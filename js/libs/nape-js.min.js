define((function(){"use strict";var nape,zpp_nape,js,Std,Reflect,StringTools,sandbox,$_,$hxClasses=$hxClasses||{},$estr=function(){return js.Boot.__string_rec(this,"")};function $bind(o,m){var f=function(){return f.method.apply(f.scope,arguments)};return f.scope=o,f.method=m,f}for(var k in(Reflect=$hxClasses.Reflect=function(){}).__name__=["Reflect"],Reflect.field=function(o,field){try{return o[field]}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;return null}},Reflect.fields=function(o){var a=[];if(null!=o){var hasOwnProperty=Object.prototype.hasOwnProperty;for(var f in o)"__id__"!=f&&"hx__closures__"!=f&&hasOwnProperty.call(o,f)&&a.push(f)}return a},Reflect.copy=function(o){if(null==o)return null;for(var o2={},_g=0,_g1=Reflect.fields(o);_g<_g1.length;){var f=_g1[_g];++_g,o2[f]=Reflect.field(o,f)}return o2},Reflect.prototype.__class__=Reflect,(Std=$hxClasses.Std=function(){}).__name__=["Std"],Std.string=function(s){return js.Boot.__string_rec(s,"")},Std.prototype.__class__=Std,(StringTools=$hxClasses.StringTools=function(){}).__name__=["StringTools"],StringTools.hex=function(n,digits){for(var s="",hexChars="0123456789ABCDEF";s=hexChars.charAt(15&n)+s,(n>>>=4)>0;);if(null!=digits)for(;s.length<digits;)s="0"+s;return s},StringTools.prototype.__class__=StringTools,void 0===js&&(js={}),js._Boot||(js._Boot={}),js._Boot.HaxeError=$hxClasses["js._Boot.HaxeError"]=function(val){Error.call(this),this.val=val,Error.captureStackTrace&&Error.captureStackTrace(this,js._Boot.HaxeError)},js._Boot.HaxeError.__name__=["js","_Boot","HaxeError"],js._Boot.HaxeError.__super__=Error,Error.prototype)js._Boot.HaxeError.prototype[k]=Error.prototype[k];for(var k in js._Boot.HaxeError.prototype.val=null,js._Boot.HaxeError.prototype.__class__=js._Boot.HaxeError,js.Boot=$hxClasses["js.Boot"]=function(){},js.Boot.__name__=["js","Boot"],js.Boot.__string_rec=function(o,s){if(null==o)return"null";if(s.length>=5)return"<...>";var t=typeof o;switch("function"==t&&(o.__name__||o.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(o instanceof Array){var str="[";s+="\t";for(var _g3=0,_g11=o.length;_g3<_g11;){var i=_g3++;str+=(i>0?",":"")+js.Boot.__string_rec(o[i],s)}return str+="]"}var tostr;try{tostr=o.toString}catch(e1){var e2=e1 instanceof js._Boot.HaxeError?e1.val:e1;return"???"}if(null!=tostr&&tostr!=Object.toString&&"function"==typeof tostr){var s2=o.toString();if("[object Object]"!=s2)return s2}var str1="{\n";s+="\t";var hasp=null!=o.hasOwnProperty,k=null;for(k in o)hasp&&!o.hasOwnProperty(k)||"prototype"!=k&&"__class__"!=k&&"__super__"!=k&&"__interfaces__"!=k&&"__properties__"!=k&&(2!=str1.length&&(str1+=", \n"),str1+=s+k+" : "+js.Boot.__string_rec(o[k],s));return str1+="\n"+(s=s.substring(1))+"}";case"string":return o;default:return String(o)}},js.Boot.__toStr=null,js.Boot.prototype.__class__=js.Boot,void 0===nape&&(nape={}),nape.Config=$hxClasses["nape.Config"]=function(){},nape.Config.__name__=["nape","Config"],nape.Config.prototype.__class__=nape.Config,nape.callbacks||(nape.callbacks={}),nape.callbacks.Callback=$hxClasses["nape.callbacks.Callback"]=function(){if(this.zpp_inner=null,!zpp_nape.callbacks.ZPP_Callback.internal)throw new js._Boot.HaxeError("Error: Callback cannot be instantiated derp!")},nape.callbacks.Callback.__name__=["nape","callbacks","Callback"],nape.callbacks.Callback.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.Callback.prototype,"event",{get:nape.callbacks.Callback.prototype.get_event}),nape.callbacks.Callback.prototype.get_event=function(){return zpp_nape.callbacks.ZPP_Listener.events[this.zpp_inner.event]},Object.defineProperty(nape.callbacks.Callback.prototype,"listener",{get:nape.callbacks.Callback.prototype.get_listener}),nape.callbacks.Callback.prototype.get_listener=function(){return this.zpp_inner.listener.outer},nape.callbacks.Callback.prototype.toString=function(){return""},nape.callbacks.Callback.prototype.__class__=nape.callbacks.Callback,nape.callbacks.BodyCallback=$hxClasses["nape.callbacks.BodyCallback"]=function(){nape.callbacks.Callback.call(this)},nape.callbacks.BodyCallback.__name__=["nape","callbacks","BodyCallback"],nape.callbacks.BodyCallback.__super__=nape.callbacks.Callback,nape.callbacks.Callback.prototype)nape.callbacks.BodyCallback.prototype[k]=nape.callbacks.Callback.prototype[k];for(var k in Object.defineProperty(nape.callbacks.BodyCallback.prototype,"body",{get:nape.callbacks.BodyCallback.prototype.get_body}),nape.callbacks.BodyCallback.prototype.get_body=function(){return this.zpp_inner.body.outer},nape.callbacks.BodyCallback.prototype.toString=function(){var ret="Cb:";return ret+=["WAKE","SLEEP"][this.zpp_inner.event-2],ret+=":"+this.zpp_inner.body.outer.toString(),ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},nape.callbacks.BodyCallback.prototype.__class__=nape.callbacks.BodyCallback,nape.callbacks.Listener=$hxClasses["nape.callbacks.Listener"]=function(){if(this.zpp_inner=null,!zpp_nape.callbacks.ZPP_Listener.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Listener derp!")},nape.callbacks.Listener.__name__=["nape","callbacks","Listener"],nape.callbacks.Listener.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.Listener.prototype,"type",{get:nape.callbacks.Listener.prototype.get_type}),nape.callbacks.Listener.prototype.get_type=function(){return zpp_nape.callbacks.ZPP_Listener.types[this.zpp_inner.type]},Object.defineProperty(nape.callbacks.Listener.prototype,"event",{get:nape.callbacks.Listener.prototype.get_event,set:nape.callbacks.Listener.prototype.set_event}),nape.callbacks.Listener.prototype.get_event=function(){return zpp_nape.callbacks.ZPP_Listener.events[this.zpp_inner.event]},nape.callbacks.Listener.prototype.set_event=function(event){if(null==event)throw new js._Boot.HaxeError("Error: Cannot set listener event type to null");var xevent;zpp_nape.callbacks.ZPP_Listener.events[this.zpp_inner.event]!=event&&(null==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN?xevent=0:(null==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING?xevent=6:(null==zpp_nape.util.ZPP_Flags.CbEvent_END&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_END=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_END?xevent=1:(null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP?xevent=3:(null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_WAKE?xevent=2:(null==zpp_nape.util.ZPP_Flags.CbEvent_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_PRE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),xevent=event==zpp_nape.util.ZPP_Flags.CbEvent_PRE?5:4))))),this.zpp_inner.swapEvent(xevent));return zpp_nape.callbacks.ZPP_Listener.events[this.zpp_inner.event]},Object.defineProperty(nape.callbacks.Listener.prototype,"precedence",{get:nape.callbacks.Listener.prototype.get_precedence,set:nape.callbacks.Listener.prototype.set_precedence}),nape.callbacks.Listener.prototype.get_precedence=function(){return this.zpp_inner.precedence},nape.callbacks.Listener.prototype.set_precedence=function(precedence){return this.zpp_inner.precedence!=precedence&&(this.zpp_inner.precedence=precedence,this.zpp_inner.invalidate_precedence()),this.zpp_inner.precedence},Object.defineProperty(nape.callbacks.Listener.prototype,"space",{get:nape.callbacks.Listener.prototype.get_space,set:nape.callbacks.Listener.prototype.set_space}),nape.callbacks.Listener.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.callbacks.Listener.prototype.set_space=function(space){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=space)if(null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this),null!=space){var _this=space.zpp_inner.wrap_listeners;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.callbacks.Listener.prototype.toString=function(){var event=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(0==this.zpp_inner.type){var body=this.zpp_inner.body;return"BodyListener{"+event+"::"+Std.string(body.outer_zn.zpp_inner_zn.options.outer)+"}"}if(1==this.zpp_inner.type){var con=this.zpp_inner.constraint;return"ConstraintListener{"+event+"::"+Std.string(con.outer_zn.zpp_inner_zn.options.outer)+"}"}var con1=this.zpp_inner.interaction,itype;switch(con1.itype){case 1:itype="COLLISION";break;case 2:itype="SENSOR";break;case 4:itype="FLUID";break;default:itype="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+event+"#"+itype+"::"+Std.string(con1.outer_zni.zpp_inner_zn.options1.outer)+":"+Std.string(con1.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+itype+"::"+Std.string(con1.outer_znp.zpp_inner_zn.options1.outer)+":"+Std.string(con1.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},nape.callbacks.Listener.prototype.__class__=nape.callbacks.Listener,nape.callbacks.BodyListener=$hxClasses["nape.callbacks.BodyListener"]=function(event,options,handler,precedence){if(null==precedence&&(precedence=0),this.zpp_inner_zn=null,zpp_nape.callbacks.ZPP_Listener.internal=!0,nape.callbacks.Listener.call(this),zpp_nape.callbacks.ZPP_Listener.internal=!1,null==handler)throw new js._Boot.HaxeError("Error: BodyListener::handler cannot be null");var xevent=-1;if(null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_WAKE)xevent=2;else{if(null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event!=zpp_nape.util.ZPP_Flags.CbEvent_SLEEP)throw new js._Boot.HaxeError("Error: cbEvent '"+event.toString()+"' is not a valid event type for a BodyListener");xevent=3}this.zpp_inner_zn=new zpp_nape.callbacks.ZPP_BodyListener(zpp_nape.callbacks.ZPP_OptionType.argument(options),xevent,handler),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner.precedence=precedence},nape.callbacks.BodyListener.__name__=["nape","callbacks","BodyListener"],nape.callbacks.BodyListener.__super__=nape.callbacks.Listener,nape.callbacks.Listener.prototype)nape.callbacks.BodyListener.prototype[k]=nape.callbacks.Listener.prototype[k];for(var k in nape.callbacks.BodyListener.prototype.zpp_inner_zn=null,Object.defineProperty(nape.callbacks.BodyListener.prototype,"options",{get:nape.callbacks.BodyListener.prototype.get_options,set:nape.callbacks.BodyListener.prototype.set_options}),nape.callbacks.BodyListener.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},nape.callbacks.BodyListener.prototype.set_options=function(options){return this.zpp_inner_zn.options.set(options.zpp_inner),this.zpp_inner_zn.options.outer},Object.defineProperty(nape.callbacks.BodyListener.prototype,"handler",{get:nape.callbacks.BodyListener.prototype.get_handler,set:nape.callbacks.BodyListener.prototype.set_handler}),nape.callbacks.BodyListener.prototype.get_handler=function(){return this.zpp_inner_zn.handler},nape.callbacks.BodyListener.prototype.set_handler=function(handler){if(null==handler)throw new js._Boot.HaxeError("Error: BodyListener::handler cannot be null");return this.zpp_inner_zn.handler=handler,this.zpp_inner_zn.handler},nape.callbacks.BodyListener.prototype.__class__=nape.callbacks.BodyListener,nape.callbacks.CbEvent=$hxClasses["nape.callbacks.CbEvent"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate CbEvent derp!")},nape.callbacks.CbEvent.__name__=["nape","callbacks","CbEvent"],nape.callbacks.CbEvent.BEGIN=null,nape.callbacks.CbEvent.get_BEGIN=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_BEGIN},nape.callbacks.CbEvent.ONGOING=null,nape.callbacks.CbEvent.get_ONGOING=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_ONGOING},nape.callbacks.CbEvent.END=null,nape.callbacks.CbEvent.get_END=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_END&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_END=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_END},nape.callbacks.CbEvent.WAKE=null,nape.callbacks.CbEvent.get_WAKE=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_WAKE},nape.callbacks.CbEvent.SLEEP=null,nape.callbacks.CbEvent.get_SLEEP=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_SLEEP},nape.callbacks.CbEvent.BREAK=null,nape.callbacks.CbEvent.get_BREAK=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_BREAK&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BREAK=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_BREAK},nape.callbacks.CbEvent.PRE=null,nape.callbacks.CbEvent.get_PRE=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_PRE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.CbEvent_PRE},nape.callbacks.CbEvent.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.CbEvent_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_PRE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_PRE?"PRE":(null==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN?"BEGIN":(null==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING?"ONGOING":(null==zpp_nape.util.ZPP_Flags.CbEvent_END&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_END=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_END?"END":(null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_WAKE?"WAKE":(null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP?"SLEEP":(null==zpp_nape.util.ZPP_Flags.CbEvent_BREAK&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BREAK=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.CbEvent_BREAK?"BREAK":""))))))},nape.callbacks.CbEvent.prototype.__class__=nape.callbacks.CbEvent,nape.callbacks.CbType=$hxClasses["nape.callbacks.CbType"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.callbacks.ZPP_CbType,this.zpp_inner.outer=this},nape.callbacks.CbType.__name__=["nape","callbacks","CbType"],nape.callbacks.CbType.ANY_BODY=null,nape.callbacks.CbType.get_ANY_BODY=function(){return zpp_nape.callbacks.ZPP_CbType.ANY_BODY},nape.callbacks.CbType.ANY_CONSTRAINT=null,nape.callbacks.CbType.get_ANY_CONSTRAINT=function(){return zpp_nape.callbacks.ZPP_CbType.ANY_CONSTRAINT},nape.callbacks.CbType.ANY_SHAPE=null,nape.callbacks.CbType.get_ANY_SHAPE=function(){return zpp_nape.callbacks.ZPP_CbType.ANY_SHAPE},nape.callbacks.CbType.ANY_COMPOUND=null,nape.callbacks.CbType.get_ANY_COMPOUND=function(){return zpp_nape.callbacks.ZPP_CbType.ANY_COMPOUND},nape.callbacks.CbType.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.CbType.prototype,"id",{get:nape.callbacks.CbType.prototype.get_id}),nape.callbacks.CbType.prototype.get_id=function(){return this.zpp_inner.id},nape.callbacks.CbType.prototype.including=function(includes){return new nape.callbacks.OptionType(this).including(includes)},nape.callbacks.CbType.prototype.excluding=function(excludes){return new nape.callbacks.OptionType(this).excluding(excludes)},Object.defineProperty(nape.callbacks.CbType.prototype,"userData",{get:nape.callbacks.CbType.prototype.get_userData}),nape.callbacks.CbType.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.callbacks.CbType.prototype,"interactors",{get:nape.callbacks.CbType.prototype.get_interactors}),nape.callbacks.CbType.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=zpp_nape.util.ZPP_InteractorList.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},Object.defineProperty(nape.callbacks.CbType.prototype,"constraints",{get:nape.callbacks.CbType.prototype.get_constraints}),nape.callbacks.CbType.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_nape.util.ZPP_ConstraintList.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},nape.callbacks.CbType.prototype.toString=function(){return this==zpp_nape.callbacks.ZPP_CbType.ANY_BODY?"ANY_BODY":this==zpp_nape.callbacks.ZPP_CbType.ANY_SHAPE?"ANY_SHAPE":this==zpp_nape.callbacks.ZPP_CbType.ANY_COMPOUND?"ANY_COMPOUND":this==zpp_nape.callbacks.ZPP_CbType.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},nape.callbacks.CbType.prototype.__class__=nape.callbacks.CbType,nape.callbacks.CbTypeIterator=$hxClasses["nape.callbacks.CbTypeIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_CbTypeList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate CbTypeIterator derp!")},nape.callbacks.CbTypeIterator.__name__=["nape","callbacks","CbTypeIterator"],nape.callbacks.CbTypeIterator.get=function(list){var ret;if(null==nape.callbacks.CbTypeIterator.zpp_pool){zpp_nape.util.ZPP_CbTypeList.internal=!0;var ret1=new nape.callbacks.CbTypeIterator;zpp_nape.util.ZPP_CbTypeList.internal=!1,ret=ret1}else{var r=nape.callbacks.CbTypeIterator.zpp_pool;nape.callbacks.CbTypeIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.callbacks.CbTypeIterator.prototype.zpp_inner=null,nape.callbacks.CbTypeIterator.prototype.zpp_i=null,nape.callbacks.CbTypeIterator.prototype.zpp_critical=null,nape.callbacks.CbTypeIterator.prototype.zpp_next=null,nape.callbacks.CbTypeIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.callbacks.CbTypeIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.callbacks.CbTypeIterator.prototype.__class__=nape.callbacks.CbTypeIterator,nape.callbacks.CbTypeList=$hxClasses["nape.callbacks.CbTypeList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_CbTypeList,this.zpp_inner.outer=this},nape.callbacks.CbTypeList.__name__=["nape","callbacks","CbTypeList"],nape.callbacks.CbTypeList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.callbacks.CbTypeList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.callbacks.CbTypeList.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.CbTypeList.prototype,"length",{get:nape.callbacks.CbTypeList.prototype.get_length}),nape.callbacks.CbTypeList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.callbacks.CbTypeList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.callbacks.CbTypeList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.callbacks.CbTypeList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.callbacks.CbTypeList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.callbacks.CbTypeList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.callbacks.CbTypeList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.callbacks.CbTypeList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.callbacks.CbTypeList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.callbacks.CbTypeList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CbTypeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.callbacks.CbTypeList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.callbacks.CbTypeList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.callbacks.CbTypeIterator.get(this)},nape.callbacks.CbTypeList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.callbacks.CbTypeList;this.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: CbType is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.callbacks.CbTypeList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.callbacks.CbTypeList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.callbacks.CbTypeList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.callbacks.CbTypeIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.callbacks.CbTypeList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.callbacks.CbTypeList.prototype.__class__=nape.callbacks.CbTypeList,nape.callbacks.ConstraintCallback=$hxClasses["nape.callbacks.ConstraintCallback"]=function(){nape.callbacks.Callback.call(this)},nape.callbacks.ConstraintCallback.__name__=["nape","callbacks","ConstraintCallback"],nape.callbacks.ConstraintCallback.__super__=nape.callbacks.Callback,nape.callbacks.Callback.prototype)nape.callbacks.ConstraintCallback.prototype[k]=nape.callbacks.Callback.prototype[k];for(var k in Object.defineProperty(nape.callbacks.ConstraintCallback.prototype,"constraint",{get:nape.callbacks.ConstraintCallback.prototype.get_constraint}),nape.callbacks.ConstraintCallback.prototype.get_constraint=function(){return this.zpp_inner.constraint.outer},nape.callbacks.ConstraintCallback.prototype.toString=function(){var ret="Cb:";return ret+=["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2],ret+=":"+this.zpp_inner.constraint.outer.toString(),ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},nape.callbacks.ConstraintCallback.prototype.__class__=nape.callbacks.ConstraintCallback,nape.callbacks.ConstraintListener=$hxClasses["nape.callbacks.ConstraintListener"]=function(event,options,handler,precedence){if(null==precedence&&(precedence=0),this.zpp_inner_zn=null,zpp_nape.callbacks.ZPP_Listener.internal=!0,nape.callbacks.Listener.call(this),zpp_nape.callbacks.ZPP_Listener.internal=!1,null==handler)throw new js._Boot.HaxeError("Error: ConstraintListener::handler cannot be null");var xevent=-1;if(null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_WAKE)xevent=2;else if(null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP)xevent=3;else{if(null==zpp_nape.util.ZPP_Flags.CbEvent_BREAK&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BREAK=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event!=zpp_nape.util.ZPP_Flags.CbEvent_BREAK)throw new js._Boot.HaxeError("Error: cbEvent '"+event.toString()+"' is not a valid event type for a ConstraintListener");xevent=4}this.zpp_inner_zn=new zpp_nape.callbacks.ZPP_ConstraintListener(zpp_nape.callbacks.ZPP_OptionType.argument(options),xevent,handler),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner.precedence=precedence},nape.callbacks.ConstraintListener.__name__=["nape","callbacks","ConstraintListener"],nape.callbacks.ConstraintListener.__super__=nape.callbacks.Listener,nape.callbacks.Listener.prototype)nape.callbacks.ConstraintListener.prototype[k]=nape.callbacks.Listener.prototype[k];for(var k in nape.callbacks.ConstraintListener.prototype.zpp_inner_zn=null,Object.defineProperty(nape.callbacks.ConstraintListener.prototype,"options",{get:nape.callbacks.ConstraintListener.prototype.get_options,set:nape.callbacks.ConstraintListener.prototype.set_options}),nape.callbacks.ConstraintListener.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},nape.callbacks.ConstraintListener.prototype.set_options=function(options){return this.zpp_inner_zn.options.set(options.zpp_inner),this.zpp_inner_zn.options.outer},Object.defineProperty(nape.callbacks.ConstraintListener.prototype,"handler",{get:nape.callbacks.ConstraintListener.prototype.get_handler,set:nape.callbacks.ConstraintListener.prototype.set_handler}),nape.callbacks.ConstraintListener.prototype.get_handler=function(){return this.zpp_inner_zn.handler},nape.callbacks.ConstraintListener.prototype.set_handler=function(handler){if(null==handler)throw new js._Boot.HaxeError("Error: ConstraintListener::handler cannot be null");return this.zpp_inner_zn.handler=handler,this.zpp_inner_zn.handler},nape.callbacks.ConstraintListener.prototype.__class__=nape.callbacks.ConstraintListener,nape.callbacks.InteractionCallback=$hxClasses["nape.callbacks.InteractionCallback"]=function(){nape.callbacks.Callback.call(this)},nape.callbacks.InteractionCallback.__name__=["nape","callbacks","InteractionCallback"],nape.callbacks.InteractionCallback.__super__=nape.callbacks.Callback,nape.callbacks.Callback.prototype)nape.callbacks.InteractionCallback.prototype[k]=nape.callbacks.Callback.prototype[k];for(var k in Object.defineProperty(nape.callbacks.InteractionCallback.prototype,"int1",{get:nape.callbacks.InteractionCallback.prototype.get_int1}),nape.callbacks.InteractionCallback.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},Object.defineProperty(nape.callbacks.InteractionCallback.prototype,"int2",{get:nape.callbacks.InteractionCallback.prototype.get_int2}),nape.callbacks.InteractionCallback.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},Object.defineProperty(nape.callbacks.InteractionCallback.prototype,"arbiters",{get:nape.callbacks.InteractionCallback.prototype.get_arbiters}),nape.callbacks.InteractionCallback.prototype.get_arbiters=function(){return this.zpp_inner.wrap_arbiters},nape.callbacks.InteractionCallback.prototype.toString=function(){var ret="Cb:";return ret+=["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event],ret+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),ret+=" : "+this.zpp_inner.wrap_arbiters.toString(),ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer)},nape.callbacks.InteractionCallback.prototype.__class__=nape.callbacks.InteractionCallback,nape.callbacks.InteractionListener=$hxClasses["nape.callbacks.InteractionListener"]=function(event,interactionType,options1,options2,handler,precedence){if(null==precedence&&(precedence=0),this.zpp_inner_zn=null,zpp_nape.callbacks.ZPP_Listener.internal=!0,nape.callbacks.Listener.call(this),zpp_nape.callbacks.ZPP_Listener.internal=!1,null==handler)throw new js._Boot.HaxeError("Error: InteractionListener::handler cannot be null");if(null==event)throw new js._Boot.HaxeError("Error: CbEvent cannot be null for InteractionListener");var xevent=-1;if(null==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN)xevent=0;else if(null==zpp_nape.util.ZPP_Flags.CbEvent_END&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_END=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event==zpp_nape.util.ZPP_Flags.CbEvent_END)xevent=1;else{if(null==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),event!=zpp_nape.util.ZPP_Flags.CbEvent_ONGOING)throw new js._Boot.HaxeError("Error: CbEvent '"+event.toString()+"' is not a valid event type for InteractionListener");xevent=6}if(this.zpp_inner_zn=new zpp_nape.callbacks.ZPP_InteractionListener(zpp_nape.callbacks.ZPP_OptionType.argument(options1),zpp_nape.callbacks.ZPP_OptionType.argument(options2),xevent,2),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zni=this,this.zpp_inner.precedence=precedence,this.zpp_inner_zn.handleri=handler,null==interactionType)throw new js._Boot.HaxeError("Error: Cannot set listener interaction type to null");var ret=this.zpp_inner_zn.itype,tmp,xtype;(1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_ANY):tmp=null,tmp!=interactionType)&&(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?xtype=1:(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?xtype=2:(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),xtype=interactionType==zpp_nape.util.ZPP_Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=xtype);var ret1=this.zpp_inner_zn.itype;1==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):2==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):4==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):7==ret1&&null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1)},nape.callbacks.InteractionListener.__name__=["nape","callbacks","InteractionListener"],nape.callbacks.InteractionListener.__super__=nape.callbacks.Listener,nape.callbacks.Listener.prototype)nape.callbacks.InteractionListener.prototype[k]=nape.callbacks.Listener.prototype[k];for(var k in nape.callbacks.InteractionListener.prototype.zpp_inner_zn=null,Object.defineProperty(nape.callbacks.InteractionListener.prototype,"options1",{get:nape.callbacks.InteractionListener.prototype.get_options1,set:nape.callbacks.InteractionListener.prototype.set_options1}),nape.callbacks.InteractionListener.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},nape.callbacks.InteractionListener.prototype.set_options1=function(options1){return this.zpp_inner_zn.options1.set(options1.zpp_inner),this.zpp_inner_zn.options1.outer},Object.defineProperty(nape.callbacks.InteractionListener.prototype,"options2",{get:nape.callbacks.InteractionListener.prototype.get_options2,set:nape.callbacks.InteractionListener.prototype.set_options2}),nape.callbacks.InteractionListener.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},nape.callbacks.InteractionListener.prototype.set_options2=function(options2){return this.zpp_inner_zn.options2.set(options2.zpp_inner),this.zpp_inner_zn.options2.outer},Object.defineProperty(nape.callbacks.InteractionListener.prototype,"interactionType",{get:nape.callbacks.InteractionListener.prototype.get_interactionType,set:nape.callbacks.InteractionListener.prototype.set_interactionType}),nape.callbacks.InteractionListener.prototype.get_interactionType=function(){var ret=this.zpp_inner_zn.itype;return 1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_ANY):null},nape.callbacks.InteractionListener.prototype.set_interactionType=function(interactionType){if(null==interactionType)throw new js._Boot.HaxeError("Error: Cannot set listener interaction type to null");var ret=this.zpp_inner_zn.itype,tmp,xtype;(1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_ANY):tmp=null,tmp!=interactionType)&&(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?xtype=1:(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?xtype=2:(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),xtype=interactionType==zpp_nape.util.ZPP_Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=xtype);var ret1=this.zpp_inner_zn.itype;return 1==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_ANY):null},Object.defineProperty(nape.callbacks.InteractionListener.prototype,"handler",{get:nape.callbacks.InteractionListener.prototype.get_handler,set:nape.callbacks.InteractionListener.prototype.set_handler}),nape.callbacks.InteractionListener.prototype.get_handler=function(){return this.zpp_inner_zn.handleri},nape.callbacks.InteractionListener.prototype.set_handler=function(handler){if(null==handler)throw new js._Boot.HaxeError("Error: InteractionListener::handler cannot be null");return this.zpp_inner_zn.handleri=handler,this.zpp_inner_zn.handleri},Object.defineProperty(nape.callbacks.InteractionListener.prototype,"allowSleepingCallbacks",{get:nape.callbacks.InteractionListener.prototype.get_allowSleepingCallbacks,set:nape.callbacks.InteractionListener.prototype.set_allowSleepingCallbacks}),nape.callbacks.InteractionListener.prototype.get_allowSleepingCallbacks=function(){return this.zpp_inner_zn.allowSleepingCallbacks},nape.callbacks.InteractionListener.prototype.set_allowSleepingCallbacks=function(allowSleepingCallbacks){return this.zpp_inner_zn.allowSleepingCallbacks=allowSleepingCallbacks,this.zpp_inner_zn.allowSleepingCallbacks},nape.callbacks.InteractionListener.prototype.__class__=nape.callbacks.InteractionListener,nape.callbacks.InteractionType=$hxClasses["nape.callbacks.InteractionType"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate InteractionType derp!")},nape.callbacks.InteractionType.__name__=["nape","callbacks","InteractionType"],nape.callbacks.InteractionType.COLLISION=null,nape.callbacks.InteractionType.get_COLLISION=function(){return null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION},nape.callbacks.InteractionType.SENSOR=null,nape.callbacks.InteractionType.get_SENSOR=function(){return null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR},nape.callbacks.InteractionType.FLUID=null,nape.callbacks.InteractionType.get_FLUID=function(){return null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID},nape.callbacks.InteractionType.ANY=null,nape.callbacks.InteractionType.get_ANY=function(){return null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_ANY},nape.callbacks.InteractionType.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?"COLLISION":(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?"SENSOR":(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InteractionType_FLUID?"FLUID":(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InteractionType_ANY?"ANY":"")))},nape.callbacks.InteractionType.prototype.__class__=nape.callbacks.InteractionType,nape.callbacks.ListenerIterator=$hxClasses["nape.callbacks.ListenerIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ListenerList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ListenerIterator derp!")},nape.callbacks.ListenerIterator.__name__=["nape","callbacks","ListenerIterator"],nape.callbacks.ListenerIterator.get=function(list){var ret;if(null==nape.callbacks.ListenerIterator.zpp_pool){zpp_nape.util.ZPP_ListenerList.internal=!0;var ret1=new nape.callbacks.ListenerIterator;zpp_nape.util.ZPP_ListenerList.internal=!1,ret=ret1}else{var r=nape.callbacks.ListenerIterator.zpp_pool;nape.callbacks.ListenerIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.callbacks.ListenerIterator.prototype.zpp_inner=null,nape.callbacks.ListenerIterator.prototype.zpp_i=null,nape.callbacks.ListenerIterator.prototype.zpp_critical=null,nape.callbacks.ListenerIterator.prototype.zpp_next=null,nape.callbacks.ListenerIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.callbacks.ListenerIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.callbacks.ListenerIterator.prototype.__class__=nape.callbacks.ListenerIterator,nape.callbacks.ListenerList=$hxClasses["nape.callbacks.ListenerList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ListenerList,this.zpp_inner.outer=this},nape.callbacks.ListenerList.__name__=["nape","callbacks","ListenerList"],nape.callbacks.ListenerList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.callbacks.ListenerList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.callbacks.ListenerList.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.ListenerList.prototype,"length",{get:nape.callbacks.ListenerList.prototype.get_length}),nape.callbacks.ListenerList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.callbacks.ListenerList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.callbacks.ListenerList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.callbacks.ListenerList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.callbacks.ListenerList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.callbacks.ListenerList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.callbacks.ListenerList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.callbacks.ListenerList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.callbacks.ListenerList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.callbacks.ListenerList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ListenerList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.callbacks.ListenerList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.callbacks.ListenerList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.callbacks.ListenerIterator.get(this)},nape.callbacks.ListenerList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.callbacks.ListenerList;this.zpp_inner.valmod();for(var _g=nape.callbacks.ListenerIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Listener is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.callbacks.ListenerList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.callbacks.ListenerIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.callbacks.ListenerList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.callbacks.ListenerIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.callbacks.ListenerList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.callbacks.ListenerIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.callbacks.ListenerIterator.zpp_pool,nape.callbacks.ListenerIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.callbacks.ListenerList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.callbacks.ListenerList.prototype.__class__=nape.callbacks.ListenerList,nape.callbacks.ListenerType=$hxClasses["nape.callbacks.ListenerType"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ListenerType derp!")},nape.callbacks.ListenerType.__name__=["nape","callbacks","ListenerType"],nape.callbacks.ListenerType.BODY=null,nape.callbacks.ListenerType.get_BODY=function(){return null==zpp_nape.util.ZPP_Flags.ListenerType_BODY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_BODY=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ListenerType_BODY},nape.callbacks.ListenerType.CONSTRAINT=null,nape.callbacks.ListenerType.get_CONSTRAINT=function(){return null==zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT},nape.callbacks.ListenerType.INTERACTION=null,nape.callbacks.ListenerType.get_INTERACTION=function(){return null==zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION},nape.callbacks.ListenerType.PRE=null,nape.callbacks.ListenerType.get_PRE=function(){return null==zpp_nape.util.ZPP_Flags.ListenerType_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_PRE=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ListenerType_PRE},nape.callbacks.ListenerType.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.ListenerType_BODY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_BODY=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ListenerType_BODY?"BODY":(null==zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT?"CONSTRAINT":(null==zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION?"INTERACTION":(null==zpp_nape.util.ZPP_Flags.ListenerType_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_PRE=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ListenerType_PRE?"PRE":"")))},nape.callbacks.ListenerType.prototype.__class__=nape.callbacks.ListenerType,nape.callbacks.OptionType=$hxClasses["nape.callbacks.OptionType"]=function(includes,excludes){this.zpp_inner=null,this.zpp_inner=new zpp_nape.callbacks.ZPP_OptionType,this.zpp_inner.outer=this,null!=includes&&this.including(includes),null!=excludes&&this.excluding(excludes)},nape.callbacks.OptionType.__name__=["nape","callbacks","OptionType"],nape.callbacks.OptionType.prototype.zpp_inner=null,Object.defineProperty(nape.callbacks.OptionType.prototype,"includes",{get:nape.callbacks.OptionType.prototype.get_includes}),nape.callbacks.OptionType.prototype.get_includes=function(){return null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes(),this.zpp_inner.wrap_includes},Object.defineProperty(nape.callbacks.OptionType.prototype,"excludes",{get:nape.callbacks.OptionType.prototype.get_excludes}),nape.callbacks.OptionType.prototype.get_excludes=function(){return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),this.zpp_inner.wrap_excludes},nape.callbacks.OptionType.prototype.including=function(includes){return this.zpp_inner.append(this.zpp_inner.includes,includes),this},nape.callbacks.OptionType.prototype.excluding=function(excludes){return this.zpp_inner.append(this.zpp_inner.excludes,excludes),this},nape.callbacks.OptionType.prototype.toString=function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var inc=this.zpp_inner.wrap_includes.toString(),exc;return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),"@{"+inc+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},nape.callbacks.OptionType.prototype.__class__=nape.callbacks.OptionType,nape.callbacks.PreCallback=$hxClasses["nape.callbacks.PreCallback"]=function(){nape.callbacks.Callback.call(this)},nape.callbacks.PreCallback.__name__=["nape","callbacks","PreCallback"],nape.callbacks.PreCallback.__super__=nape.callbacks.Callback,nape.callbacks.Callback.prototype)nape.callbacks.PreCallback.prototype[k]=nape.callbacks.Callback.prototype[k];for(var k in Object.defineProperty(nape.callbacks.PreCallback.prototype,"arbiter",{get:nape.callbacks.PreCallback.prototype.get_arbiter}),nape.callbacks.PreCallback.prototype.get_arbiter=function(){return this.zpp_inner.pre_arbiter.wrapper()},Object.defineProperty(nape.callbacks.PreCallback.prototype,"int1",{get:nape.callbacks.PreCallback.prototype.get_int1}),nape.callbacks.PreCallback.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},Object.defineProperty(nape.callbacks.PreCallback.prototype,"int2",{get:nape.callbacks.PreCallback.prototype.get_int2}),nape.callbacks.PreCallback.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},Object.defineProperty(nape.callbacks.PreCallback.prototype,"swapped",{get:nape.callbacks.PreCallback.prototype.get_swapped}),nape.callbacks.PreCallback.prototype.get_swapped=function(){return this.zpp_inner.pre_swapped},nape.callbacks.PreCallback.prototype.toString=function(){var ret="Cb:PRE:";return ret+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),ret+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString(),ret+=" : listnener: "+Std.string(this.zpp_inner.listener.outer)},nape.callbacks.PreCallback.prototype.__class__=nape.callbacks.PreCallback,nape.callbacks.PreFlag=$hxClasses["nape.callbacks.PreFlag"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate PreFlag derp!")},nape.callbacks.PreFlag.__name__=["nape","callbacks","PreFlag"],nape.callbacks.PreFlag.ACCEPT=null,nape.callbacks.PreFlag.get_ACCEPT=function(){return null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT},nape.callbacks.PreFlag.IGNORE=null,nape.callbacks.PreFlag.get_IGNORE=function(){return null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_IGNORE},nape.callbacks.PreFlag.ACCEPT_ONCE=null,nape.callbacks.PreFlag.get_ACCEPT_ONCE=function(){return null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE},nape.callbacks.PreFlag.IGNORE_ONCE=null,nape.callbacks.PreFlag.get_IGNORE_ONCE=function(){return null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE},nape.callbacks.PreFlag.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT?"ACCEPT":(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE?"IGNORE":(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE?"ACCEPT_ONCE":(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")))},nape.callbacks.PreFlag.prototype.__class__=nape.callbacks.PreFlag,nape.callbacks.PreListener=$hxClasses["nape.callbacks.PreListener"]=function(interactionType,options1,options2,handler,precedence,pure){if(null==pure&&(pure=!1),null==precedence&&(precedence=0),this.zpp_inner_zn=null,zpp_nape.callbacks.ZPP_Listener.internal=!0,nape.callbacks.Listener.call(this),zpp_nape.callbacks.ZPP_Listener.internal=!1,null==handler)throw new js._Boot.HaxeError("Error: PreListener must take a handler!");if(this.zpp_inner_zn=new zpp_nape.callbacks.ZPP_InteractionListener(zpp_nape.callbacks.ZPP_OptionType.argument(options1),zpp_nape.callbacks.ZPP_OptionType.argument(options2),5,3),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_znp=this,this.zpp_inner.precedence=precedence,this.zpp_inner_zn.pure=pure,this.zpp_inner_zn.handlerp=handler,null==interactionType)throw new js._Boot.HaxeError("Error: Cannot set listener interaction type to null");var ret=this.zpp_inner_zn.itype,tmp,xtype;(1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_ANY):tmp=null,tmp!=interactionType)&&(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?xtype=1:(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?xtype=2:(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),xtype=interactionType==zpp_nape.util.ZPP_Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=xtype);var ret1=this.zpp_inner_zn.itype;1==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):2==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):4==ret1?null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1):7==ret1&&null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1)},nape.callbacks.PreListener.__name__=["nape","callbacks","PreListener"],nape.callbacks.PreListener.__super__=nape.callbacks.Listener,nape.callbacks.Listener.prototype)nape.callbacks.PreListener.prototype[k]=nape.callbacks.Listener.prototype[k];for(var k in nape.callbacks.PreListener.prototype.zpp_inner_zn=null,Object.defineProperty(nape.callbacks.PreListener.prototype,"options1",{get:nape.callbacks.PreListener.prototype.get_options1,set:nape.callbacks.PreListener.prototype.set_options1}),nape.callbacks.PreListener.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},nape.callbacks.PreListener.prototype.set_options1=function(options1){return this.zpp_inner_zn.options1.set(options1.zpp_inner),this.zpp_inner_zn.options1.outer},Object.defineProperty(nape.callbacks.PreListener.prototype,"options2",{get:nape.callbacks.PreListener.prototype.get_options2,set:nape.callbacks.PreListener.prototype.set_options2}),nape.callbacks.PreListener.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},nape.callbacks.PreListener.prototype.set_options2=function(options2){return this.zpp_inner_zn.options2.set(options2.zpp_inner),this.zpp_inner_zn.options2.outer},Object.defineProperty(nape.callbacks.PreListener.prototype,"handler",{get:nape.callbacks.PreListener.prototype.get_handler,set:nape.callbacks.PreListener.prototype.set_handler}),nape.callbacks.PreListener.prototype.get_handler=function(){return this.zpp_inner_zn.handlerp},nape.callbacks.PreListener.prototype.set_handler=function(handler){if(null==handler)throw new js._Boot.HaxeError("Error: PreListener must take a non-null handler!");return this.zpp_inner_zn.handlerp=handler,this.zpp_inner_zn.wake(),this.zpp_inner_zn.handlerp},Object.defineProperty(nape.callbacks.PreListener.prototype,"pure",{get:nape.callbacks.PreListener.prototype.get_pure,set:nape.callbacks.PreListener.prototype.set_pure}),nape.callbacks.PreListener.prototype.get_pure=function(){return this.zpp_inner_zn.pure},nape.callbacks.PreListener.prototype.set_pure=function(pure){return pure||this.zpp_inner_zn.wake(),this.zpp_inner_zn.pure=pure,this.zpp_inner_zn.pure},Object.defineProperty(nape.callbacks.PreListener.prototype,"interactionType",{get:nape.callbacks.PreListener.prototype.get_interactionType,set:nape.callbacks.PreListener.prototype.set_interactionType}),nape.callbacks.PreListener.prototype.get_interactionType=function(){var ret=this.zpp_inner_zn.itype;return 1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_ANY):null},nape.callbacks.PreListener.prototype.set_interactionType=function(interactionType){if(null==interactionType)throw new js._Boot.HaxeError("Error: Cannot set listener interaction type to null");var ret=this.zpp_inner_zn.itype,tmp,xtype;(1==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),tmp=zpp_nape.util.ZPP_Flags.InteractionType_ANY):tmp=null,tmp!=interactionType)&&(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?xtype=1:(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),interactionType==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?xtype=2:(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),xtype=interactionType==zpp_nape.util.ZPP_Flags.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=xtype);var ret1=this.zpp_inner_zn.itype;return 1==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION):2==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR):4==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID):7==ret1?(null==zpp_nape.util.ZPP_Flags.InteractionType_ANY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_ANY=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_ANY):null},nape.callbacks.PreListener.prototype.__class__=nape.callbacks.PreListener,nape.constraint||(nape.constraint={}),nape.constraint.Constraint=$hxClasses["nape.constraint.Constraint"]=function(){if(this.debugDraw=!0,this.zpp_inner.insert_cbtype(zpp_nape.callbacks.ZPP_CbType.ANY_CONSTRAINT.zpp_inner),!nape.constraint.Constraint.zpp_internalAlloc)throw new js._Boot.HaxeError("Error: Constraint cannot be instantiated derp!")},nape.constraint.Constraint.__name__=["nape","constraint","Constraint"],nape.constraint.Constraint.prototype.zpp_inner=null,Object.defineProperty(nape.constraint.Constraint.prototype,"userData",{get:nape.constraint.Constraint.prototype.get_userData}),nape.constraint.Constraint.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},nape.constraint.Constraint.prototype.debugDraw=null,Object.defineProperty(nape.constraint.Constraint.prototype,"compound",{get:nape.constraint.Constraint.prototype.get_compound,set:nape.constraint.Constraint.prototype.set_compound}),nape.constraint.Constraint.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},nape.constraint.Constraint.prototype.set_compound=function(compound){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=compound&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this),null!=compound)){var _this=compound.zpp_inner.wrap_constraints;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},Object.defineProperty(nape.constraint.Constraint.prototype,"space",{get:nape.constraint.Constraint.prototype.get_space,set:nape.constraint.Constraint.prototype.set_space}),nape.constraint.Constraint.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.constraint.Constraint.prototype.set_space=function(space){if(null!=this.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=space)if(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this),null!=space){var _this=space.zpp_inner.wrap_constraints;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},Object.defineProperty(nape.constraint.Constraint.prototype,"isSleeping",{get:nape.constraint.Constraint.prototype.get_isSleeping}),nape.constraint.Constraint.prototype.get_isSleeping=function(){if(null==this.zpp_inner.space||!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: isSleeping only makes sense if constraint is active and inside a space");return this.zpp_inner.component.sleeping},Object.defineProperty(nape.constraint.Constraint.prototype,"active",{get:nape.constraint.Constraint.prototype.get_active,set:nape.constraint.Constraint.prototype.set_active}),nape.constraint.Constraint.prototype.get_active=function(){return this.zpp_inner.active},nape.constraint.Constraint.prototype.set_active=function(active){return this.zpp_inner.active!=active&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),active?(this.zpp_inner.active=active,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),this.zpp_inner.active=active,this.zpp_inner.deactivate())),this.zpp_inner.active},Object.defineProperty(nape.constraint.Constraint.prototype,"ignore",{get:nape.constraint.Constraint.prototype.get_ignore,set:nape.constraint.Constraint.prototype.set_ignore}),nape.constraint.Constraint.prototype.get_ignore=function(){return this.zpp_inner.ignore},nape.constraint.Constraint.prototype.set_ignore=function(ignore){return this.zpp_inner.ignore!=ignore&&(this.zpp_inner.ignore=ignore,this.zpp_inner.wake()),this.zpp_inner.ignore},Object.defineProperty(nape.constraint.Constraint.prototype,"stiff",{get:nape.constraint.Constraint.prototype.get_stiff,set:nape.constraint.Constraint.prototype.set_stiff}),nape.constraint.Constraint.prototype.get_stiff=function(){return this.zpp_inner.stiff},nape.constraint.Constraint.prototype.set_stiff=function(stiff){return this.zpp_inner.stiff!=stiff&&(this.zpp_inner.stiff=stiff,this.zpp_inner.wake()),this.zpp_inner.stiff},Object.defineProperty(nape.constraint.Constraint.prototype,"frequency",{get:nape.constraint.Constraint.prototype.get_frequency,set:nape.constraint.Constraint.prototype.set_frequency}),nape.constraint.Constraint.prototype.get_frequency=function(){return this.zpp_inner.frequency},nape.constraint.Constraint.prototype.set_frequency=function(frequency){if(frequency!=frequency)throw new js._Boot.HaxeError("Error: Constraint::Frequency cannot be NaN");if(frequency<=0)throw new js._Boot.HaxeError("Error: Constraint::Frequency must be >0");return this.zpp_inner.frequency!=frequency&&(this.zpp_inner.frequency=frequency,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.frequency},Object.defineProperty(nape.constraint.Constraint.prototype,"damping",{get:nape.constraint.Constraint.prototype.get_damping,set:nape.constraint.Constraint.prototype.set_damping}),nape.constraint.Constraint.prototype.get_damping=function(){return this.zpp_inner.damping},nape.constraint.Constraint.prototype.set_damping=function(damping){if(damping!=damping)throw new js._Boot.HaxeError("Error: Constraint::Damping cannot be Nan");if(damping<0)throw new js._Boot.HaxeError("Error: Constraint::Damping must be >=0");return this.zpp_inner.damping!=damping&&(this.zpp_inner.damping=damping,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.damping},Object.defineProperty(nape.constraint.Constraint.prototype,"maxForce",{get:nape.constraint.Constraint.prototype.get_maxForce,set:nape.constraint.Constraint.prototype.set_maxForce}),nape.constraint.Constraint.prototype.get_maxForce=function(){return this.zpp_inner.maxForce},nape.constraint.Constraint.prototype.set_maxForce=function(maxForce){if(maxForce!=maxForce)throw new js._Boot.HaxeError("Error: Constraint::maxForce cannot be NaN");if(maxForce<0)throw new js._Boot.HaxeError("Error: Constraint::maxForce must be >=0");return this.zpp_inner.maxForce!=maxForce&&(this.zpp_inner.maxForce=maxForce,this.zpp_inner.wake()),this.zpp_inner.maxForce},Object.defineProperty(nape.constraint.Constraint.prototype,"maxError",{get:nape.constraint.Constraint.prototype.get_maxError,set:nape.constraint.Constraint.prototype.set_maxError}),nape.constraint.Constraint.prototype.get_maxError=function(){return this.zpp_inner.maxError},nape.constraint.Constraint.prototype.set_maxError=function(maxError){if(maxError!=maxError)throw new js._Boot.HaxeError("Error: Constraint::maxError cannot be NaN");if(maxError<0)throw new js._Boot.HaxeError("Error: Constraint::maxError must be >=0");return this.zpp_inner.maxError!=maxError&&(this.zpp_inner.maxError=maxError,this.zpp_inner.wake()),this.zpp_inner.maxError},Object.defineProperty(nape.constraint.Constraint.prototype,"breakUnderForce",{get:nape.constraint.Constraint.prototype.get_breakUnderForce,set:nape.constraint.Constraint.prototype.set_breakUnderForce}),nape.constraint.Constraint.prototype.get_breakUnderForce=function(){return this.zpp_inner.breakUnderForce},nape.constraint.Constraint.prototype.set_breakUnderForce=function(breakUnderForce){return this.zpp_inner.breakUnderForce!=breakUnderForce&&(this.zpp_inner.breakUnderForce=breakUnderForce,this.zpp_inner.wake()),this.zpp_inner.breakUnderForce},Object.defineProperty(nape.constraint.Constraint.prototype,"breakUnderError",{get:nape.constraint.Constraint.prototype.get_breakUnderError,set:nape.constraint.Constraint.prototype.set_breakUnderError}),nape.constraint.Constraint.prototype.get_breakUnderError=function(){return this.zpp_inner.breakUnderError},nape.constraint.Constraint.prototype.set_breakUnderError=function(breakUnderError){return this.zpp_inner.breakUnderError!=breakUnderError&&(this.zpp_inner.breakUnderError=breakUnderError,this.zpp_inner.wake()),this.zpp_inner.breakUnderError},Object.defineProperty(nape.constraint.Constraint.prototype,"removeOnBreak",{get:nape.constraint.Constraint.prototype.get_removeOnBreak,set:nape.constraint.Constraint.prototype.set_removeOnBreak}),nape.constraint.Constraint.prototype.get_removeOnBreak=function(){return this.zpp_inner.removeOnBreak},nape.constraint.Constraint.prototype.set_removeOnBreak=function(removeOnBreak){return this.zpp_inner.removeOnBreak=removeOnBreak,this.zpp_inner.removeOnBreak},nape.constraint.Constraint.prototype.impulse=function(){return null},nape.constraint.Constraint.prototype.bodyImpulse=function(body){return null},nape.constraint.Constraint.prototype.visitBodies=function(lambda){},Object.defineProperty(nape.constraint.Constraint.prototype,"cbTypes",{get:nape.constraint.Constraint.prototype.get_cbTypes}),nape.constraint.Constraint.prototype.get_cbTypes=function(){return null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes(),this.zpp_inner.wrap_cbTypes},nape.constraint.Constraint.prototype.toString=function(){return"{Constraint}"},nape.constraint.Constraint.prototype.copy=function(){return this.zpp_inner.copy()},nape.constraint.Constraint.prototype.__class__=nape.constraint.Constraint,nape.constraint.AngleJoint=$hxClasses["nape.constraint.AngleJoint"]=function(body1,body2,jointMin,jointMax,ratio){null==ratio&&(ratio=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_AngleJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: AngleJoint::jointMax cannot be NaN");if(this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: AngleJoint::ratio cannot be NaN");this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake())},nape.constraint.AngleJoint.__name__=["nape","constraint","AngleJoint"],nape.constraint.AngleJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.AngleJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.AngleJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.AngleJoint.prototype,"body1",{get:nape.constraint.AngleJoint.prototype.get_body1,set:nape.constraint.AngleJoint.prototype.set_body1}),nape.constraint.AngleJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.AngleJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.AngleJoint.prototype,"body2",{get:nape.constraint.AngleJoint.prototype.get_body2,set:nape.constraint.AngleJoint.prototype.set_body2}),nape.constraint.AngleJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.AngleJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.AngleJoint.prototype,"jointMin",{get:nape.constraint.AngleJoint.prototype.get_jointMin,set:nape.constraint.AngleJoint.prototype.set_jointMin}),nape.constraint.AngleJoint.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},nape.constraint.AngleJoint.prototype.set_jointMin=function(jointMin){if(this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: AngleJoint::jointMin cannot be NaN");return this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},Object.defineProperty(nape.constraint.AngleJoint.prototype,"jointMax",{get:nape.constraint.AngleJoint.prototype.get_jointMax,set:nape.constraint.AngleJoint.prototype.set_jointMax}),nape.constraint.AngleJoint.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},nape.constraint.AngleJoint.prototype.set_jointMax=function(jointMax){if(this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: AngleJoint::jointMax cannot be NaN");return this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},Object.defineProperty(nape.constraint.AngleJoint.prototype,"ratio",{get:nape.constraint.AngleJoint.prototype.get_ratio,set:nape.constraint.AngleJoint.prototype.set_ratio}),nape.constraint.AngleJoint.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},nape.constraint.AngleJoint.prototype.set_ratio=function(ratio){if(this.zpp_inner.immutable_midstep("AngleJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: AngleJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},nape.constraint.AngleJoint.prototype.isSlack=function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Cannot compute slack for AngleJoint if either body is null.");var _this=this.zpp_inner_zn,slack,C=_this.ratio*_this.b2.rot-_this.b1.rot;return _this.equal?(C-=_this.jointMax,slack=!1,_this.scale=1):C<_this.jointMin?(C=_this.jointMin-C,_this.scale=-1,slack=!1):C>_this.jointMax?(C-=_this.jointMax,_this.scale=1,slack=!1):(_this.scale=0,C=0,slack=!0),slack},nape.constraint.AngleJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(1,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAcc,ret},nape.constraint.AngleJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get(0,0,0)},nape.constraint.AngleJoint.prototype.visitBodies=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot apply null lambda to bodies");null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.AngleJoint.prototype.__class__=nape.constraint.AngleJoint,nape.constraint.ConstraintIterator=$hxClasses["nape.constraint.ConstraintIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ConstraintList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ConstraintIterator derp!")},nape.constraint.ConstraintIterator.__name__=["nape","constraint","ConstraintIterator"],nape.constraint.ConstraintIterator.get=function(list){var ret;if(null==nape.constraint.ConstraintIterator.zpp_pool){zpp_nape.util.ZPP_ConstraintList.internal=!0;var ret1=new nape.constraint.ConstraintIterator;zpp_nape.util.ZPP_ConstraintList.internal=!1,ret=ret1}else{var r=nape.constraint.ConstraintIterator.zpp_pool;nape.constraint.ConstraintIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.constraint.ConstraintIterator.prototype.zpp_inner=null,nape.constraint.ConstraintIterator.prototype.zpp_i=null,nape.constraint.ConstraintIterator.prototype.zpp_critical=null,nape.constraint.ConstraintIterator.prototype.zpp_next=null,nape.constraint.ConstraintIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.constraint.ConstraintIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.constraint.ConstraintIterator.prototype.__class__=nape.constraint.ConstraintIterator,nape.constraint.ConstraintList=$hxClasses["nape.constraint.ConstraintList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ConstraintList,this.zpp_inner.outer=this},nape.constraint.ConstraintList.__name__=["nape","constraint","ConstraintList"],nape.constraint.ConstraintList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.constraint.ConstraintList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.constraint.ConstraintList.prototype.zpp_inner=null,Object.defineProperty(nape.constraint.ConstraintList.prototype,"length",{get:nape.constraint.ConstraintList.prototype.get_length}),nape.constraint.ConstraintList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.constraint.ConstraintList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.constraint.ConstraintList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.constraint.ConstraintList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.constraint.ConstraintList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.constraint.ConstraintList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.constraint.ConstraintList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.constraint.ConstraintList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.constraint.ConstraintList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.constraint.ConstraintList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConstraintList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.constraint.ConstraintList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.constraint.ConstraintList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.constraint.ConstraintIterator.get(this)},nape.constraint.ConstraintList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.constraint.ConstraintList;this.zpp_inner.valmod();for(var _g=nape.constraint.ConstraintIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Constraint is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.constraint.ConstraintList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.constraint.ConstraintIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.constraint.ConstraintList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.constraint.ConstraintIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.constraint.ConstraintList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.constraint.ConstraintIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.constraint.ConstraintList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.constraint.ConstraintList.prototype.__class__=nape.constraint.ConstraintList,nape.constraint.DistanceJoint=$hxClasses["nape.constraint.DistanceJoint"]=function(body1,body2,anchor1,anchor2,jointMin,jointMax){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_DistanceJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp2;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp2=_this.zpp_inner.y==y}else tmp2=!1;if(!tmp2){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this9=this.zpp_inner_zn.wrap_a2;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=anchor2.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=anchor2.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=anchor2.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp3;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp3=_this9.zpp_inner.y==y1}else tmp3=!1;if(!tmp3){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=anchor2.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o2=anchor2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMin cannot be NaN");if(jointMin<0)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMax cannot be NaN");if(jointMax<0)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMax must be >= 0");this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake())},nape.constraint.DistanceJoint.__name__=["nape","constraint","DistanceJoint"],nape.constraint.DistanceJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.DistanceJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.DistanceJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.DistanceJoint.prototype,"body1",{get:nape.constraint.DistanceJoint.prototype.get_body1,set:nape.constraint.DistanceJoint.prototype.set_body1}),nape.constraint.DistanceJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.DistanceJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.DistanceJoint.prototype,"body2",{get:nape.constraint.DistanceJoint.prototype.get_body2,set:nape.constraint.DistanceJoint.prototype.set_body2}),nape.constraint.DistanceJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.DistanceJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.DistanceJoint.prototype,"anchor1",{get:nape.constraint.DistanceJoint.prototype.get_anchor1,set:nape.constraint.DistanceJoint.prototype.set_anchor1}),nape.constraint.DistanceJoint.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},nape.constraint.DistanceJoint.prototype.set_anchor1=function(anchor1){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},Object.defineProperty(nape.constraint.DistanceJoint.prototype,"anchor2",{get:nape.constraint.DistanceJoint.prototype.get_anchor2,set:nape.constraint.DistanceJoint.prototype.set_anchor2}),nape.constraint.DistanceJoint.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.DistanceJoint.prototype.set_anchor2=function(anchor2){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this=this.zpp_inner_zn.wrap_a2;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor2.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor2.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor2.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o=anchor2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},Object.defineProperty(nape.constraint.DistanceJoint.prototype,"jointMin",{get:nape.constraint.DistanceJoint.prototype.get_jointMin,set:nape.constraint.DistanceJoint.prototype.set_jointMin}),nape.constraint.DistanceJoint.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},nape.constraint.DistanceJoint.prototype.set_jointMin=function(jointMin){if(this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMin cannot be NaN");if(jointMin<0)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMin must be >= 0");return this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},Object.defineProperty(nape.constraint.DistanceJoint.prototype,"jointMax",{get:nape.constraint.DistanceJoint.prototype.get_jointMax,set:nape.constraint.DistanceJoint.prototype.set_jointMax}),nape.constraint.DistanceJoint.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},nape.constraint.DistanceJoint.prototype.set_jointMax=function(jointMax){if(this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMax cannot be NaN");if(jointMax<0)throw new js._Boot.HaxeError("Error: DistanceJoint::jointMax must be >= 0");return this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},nape.constraint.DistanceJoint.prototype.isSlack=function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Cannot compute slack for DistanceJoint if either body is null.");return this.zpp_inner_zn.slack},nape.constraint.DistanceJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(1,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAcc,ret},nape.constraint.DistanceJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.DistanceJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.DistanceJoint.prototype.__class__=nape.constraint.DistanceJoint,nape.constraint.LineJoint=$hxClasses["nape.constraint.LineJoint"]=function(body1,body2,anchor1,anchor2,direction,jointMin,jointMax){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_LineJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp2;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp2=_this.zpp_inner.y==y}else tmp2=!1;if(!tmp2){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this9=this.zpp_inner_zn.wrap_a2;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=anchor2.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=anchor2.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=anchor2.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp3;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp3=_this9.zpp_inner.y==y1}else tmp3=!1;if(!tmp3){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=anchor2.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o2=anchor2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==direction)throw new js._Boot.HaxeError("Error: Constraint::direction cannot be null");null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var _this18=this.zpp_inner_zn.wrap_n;if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=_this18.zpp_inner;if(_this19._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this19._isimmutable&&_this19._isimmutable(),null==direction)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=direction.zpp_inner;null!=_this20._validate&&_this20._validate();var x2=direction.zpp_inner.x;if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this21=direction.zpp_inner;null!=_this21._validate&&_this21._validate();var y2=direction.zpp_inner.y;if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this22=_this18.zpp_inner,tmp4;if(_this22._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this22._isimmutable&&_this22._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this23=_this18.zpp_inner;if(null!=_this23._validate&&_this23._validate(),_this18.zpp_inner.x==x2){if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this24=_this18.zpp_inner;null!=_this24._validate&&_this24._validate(),tmp4=_this18.zpp_inner.y==y2}else tmp4=!1;if(!tmp4){_this18.zpp_inner.x=x2,_this18.zpp_inner.y=y2;var _this25=_this18.zpp_inner;null!=_this25._invalidate&&_this25._invalidate(_this25)}var ret2=_this18;if(direction.zpp_inner.weak){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this26=direction.zpp_inner;if(_this26._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this26._isimmutable&&_this26._isimmutable(),direction.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=direction.zpp_inner;direction.zpp_inner.outer=null,direction.zpp_inner=null;var o4=direction;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}if(null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner.immutable_midstep("LineJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: AngleJoint::jointMin cannot be NaN");if(this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("LineJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: AngleJoint::jointMax cannot be NaN");this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake())},nape.constraint.LineJoint.__name__=["nape","constraint","LineJoint"],nape.constraint.LineJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.LineJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.LineJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.LineJoint.prototype,"body1",{get:nape.constraint.LineJoint.prototype.get_body1,set:nape.constraint.LineJoint.prototype.set_body1}),nape.constraint.LineJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.LineJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.LineJoint.prototype,"body2",{get:nape.constraint.LineJoint.prototype.get_body2,set:nape.constraint.LineJoint.prototype.set_body2}),nape.constraint.LineJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.LineJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.LineJoint.prototype,"anchor1",{get:nape.constraint.LineJoint.prototype.get_anchor1,set:nape.constraint.LineJoint.prototype.set_anchor1}),nape.constraint.LineJoint.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},nape.constraint.LineJoint.prototype.set_anchor1=function(anchor1){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},Object.defineProperty(nape.constraint.LineJoint.prototype,"anchor2",{get:nape.constraint.LineJoint.prototype.get_anchor2,set:nape.constraint.LineJoint.prototype.set_anchor2}),nape.constraint.LineJoint.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.LineJoint.prototype.set_anchor2=function(anchor2){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this=this.zpp_inner_zn.wrap_a2;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor2.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor2.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor2.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o=anchor2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},Object.defineProperty(nape.constraint.LineJoint.prototype,"direction",{get:nape.constraint.LineJoint.prototype.get_direction,set:nape.constraint.LineJoint.prototype.set_direction}),nape.constraint.LineJoint.prototype.get_direction=function(){return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},nape.constraint.LineJoint.prototype.set_direction=function(direction){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==direction)throw new js._Boot.HaxeError("Error: Constraint::direction cannot be null");null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var _this=this.zpp_inner_zn.wrap_n;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==direction)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=direction.zpp_inner;null!=_this2._validate&&_this2._validate();var x=direction.zpp_inner.x;if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=direction.zpp_inner;null!=_this3._validate&&_this3._validate();var y=direction.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(direction.zpp_inner.weak){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=direction.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),direction.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=direction.zpp_inner;direction.zpp_inner.outer=null,direction.zpp_inner=null;var o=direction;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},Object.defineProperty(nape.constraint.LineJoint.prototype,"jointMin",{get:nape.constraint.LineJoint.prototype.get_jointMin,set:nape.constraint.LineJoint.prototype.set_jointMin}),nape.constraint.LineJoint.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},nape.constraint.LineJoint.prototype.set_jointMin=function(jointMin){if(this.zpp_inner.immutable_midstep("LineJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: AngleJoint::jointMin cannot be NaN");return this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},Object.defineProperty(nape.constraint.LineJoint.prototype,"jointMax",{get:nape.constraint.LineJoint.prototype.get_jointMax,set:nape.constraint.LineJoint.prototype.set_jointMax}),nape.constraint.LineJoint.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},nape.constraint.LineJoint.prototype.set_jointMax=function(jointMax){if(this.zpp_inner.immutable_midstep("LineJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: AngleJoint::jointMax cannot be NaN");return this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},nape.constraint.LineJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(2,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAccx,1>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[ret.zpp_inner.n]=this.zpp_inner_zn.jAccy,ret},nape.constraint.LineJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.LineJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.LineJoint.prototype.__class__=nape.constraint.LineJoint,nape.constraint.MotorJoint=$hxClasses["nape.constraint.MotorJoint"]=function(body1,body2,rate,ratio){null==ratio&&(ratio=1),null==rate&&(rate=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_MotorJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(this.zpp_inner.immutable_midstep("MotorJoint::rate"),rate!=rate)throw new js._Boot.HaxeError("Error: MotorJoint::rate cannot be NaN");if(this.zpp_inner_zn.rate!=rate&&(this.zpp_inner_zn.rate=rate,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("MotorJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: MotorJoint::ratio cannot be NaN");this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake())},nape.constraint.MotorJoint.__name__=["nape","constraint","MotorJoint"],nape.constraint.MotorJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.MotorJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.MotorJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.MotorJoint.prototype,"body1",{get:nape.constraint.MotorJoint.prototype.get_body1,set:nape.constraint.MotorJoint.prototype.set_body1}),nape.constraint.MotorJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.MotorJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.MotorJoint.prototype,"body2",{get:nape.constraint.MotorJoint.prototype.get_body2,set:nape.constraint.MotorJoint.prototype.set_body2}),nape.constraint.MotorJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.MotorJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.MotorJoint.prototype,"ratio",{get:nape.constraint.MotorJoint.prototype.get_ratio,set:nape.constraint.MotorJoint.prototype.set_ratio}),nape.constraint.MotorJoint.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},nape.constraint.MotorJoint.prototype.set_ratio=function(ratio){if(this.zpp_inner.immutable_midstep("MotorJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: MotorJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},Object.defineProperty(nape.constraint.MotorJoint.prototype,"rate",{get:nape.constraint.MotorJoint.prototype.get_rate,set:nape.constraint.MotorJoint.prototype.set_rate}),nape.constraint.MotorJoint.prototype.get_rate=function(){return this.zpp_inner_zn.rate},nape.constraint.MotorJoint.prototype.set_rate=function(rate){if(this.zpp_inner.immutable_midstep("MotorJoint::rate"),rate!=rate)throw new js._Boot.HaxeError("Error: MotorJoint::rate cannot be NaN");return this.zpp_inner_zn.rate!=rate&&(this.zpp_inner_zn.rate=rate,this.zpp_inner.wake()),this.zpp_inner_zn.rate},nape.constraint.MotorJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(1,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAcc,ret},nape.constraint.MotorJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.MotorJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.MotorJoint.prototype.__class__=nape.constraint.MotorJoint,nape.constraint.PivotJoint=$hxClasses["nape.constraint.PivotJoint"]=function(body1,body2,anchor1,anchor2){this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_PivotJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp2;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp2=_this.zpp_inner.y==y}else tmp2=!1;if(!tmp2){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this9=this.zpp_inner_zn.wrap_a2;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=anchor2.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=anchor2.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=anchor2.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp3;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp3=_this9.zpp_inner.y==y1}else tmp3=!1;if(!tmp3){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=anchor2.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o2=anchor2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()},nape.constraint.PivotJoint.__name__=["nape","constraint","PivotJoint"],nape.constraint.PivotJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.PivotJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.PivotJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.PivotJoint.prototype,"body1",{get:nape.constraint.PivotJoint.prototype.get_body1,set:nape.constraint.PivotJoint.prototype.set_body1}),nape.constraint.PivotJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.PivotJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.PivotJoint.prototype,"body2",{get:nape.constraint.PivotJoint.prototype.get_body2,set:nape.constraint.PivotJoint.prototype.set_body2}),nape.constraint.PivotJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.PivotJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.PivotJoint.prototype,"anchor1",{get:nape.constraint.PivotJoint.prototype.get_anchor1,set:nape.constraint.PivotJoint.prototype.set_anchor1}),nape.constraint.PivotJoint.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},nape.constraint.PivotJoint.prototype.set_anchor1=function(anchor1){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},Object.defineProperty(nape.constraint.PivotJoint.prototype,"anchor2",{get:nape.constraint.PivotJoint.prototype.get_anchor2,set:nape.constraint.PivotJoint.prototype.set_anchor2}),nape.constraint.PivotJoint.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.PivotJoint.prototype.set_anchor2=function(anchor2){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this=this.zpp_inner_zn.wrap_a2;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor2.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor2.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor2.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o=anchor2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.PivotJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(2,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAccx,1>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[ret.zpp_inner.n]=this.zpp_inner_zn.jAccy,ret},nape.constraint.PivotJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.PivotJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.PivotJoint.prototype.__class__=nape.constraint.PivotJoint,nape.constraint.PulleyJoint=$hxClasses["nape.constraint.PulleyJoint"]=function(body1,body2,body3,body4,anchor1,anchor2,anchor3,anchor4,jointMin,jointMax,ratio){null==ratio&&(ratio=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_PulleyJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&this.zpp_inner_zn.b3!=inbody1&&this.zpp_inner_zn.b4!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&this.zpp_inner_zn.b3!=inbody2&&this.zpp_inner_zn.b4!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;this.zpp_inner.immutable_midstep("Constraint::body3");var inbody3=null==body3?null:body3.zpp_inner;inbody3!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=inbody3,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody3&&this.zpp_inner_zn.b1!=inbody3&&this.zpp_inner_zn.b2!=inbody3&&this.zpp_inner_zn.b4!=inbody3&&null!=inbody3&&inbody3.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody3&&inbody3.wake()));var tmp2=null==this.zpp_inner_zn.b3;this.zpp_inner.immutable_midstep("Constraint::body4");var inbody4=null==body4?null:body4.zpp_inner;inbody4!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=inbody4,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody4&&this.zpp_inner_zn.b1!=inbody4&&this.zpp_inner_zn.b2!=inbody4&&this.zpp_inner_zn.b3!=inbody4&&null!=inbody4&&inbody4.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody4&&inbody4.wake()));var tmp3=null==this.zpp_inner_zn.b4;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp4;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp4=_this.zpp_inner.y==y}else tmp4=!1;if(!tmp4){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this9=this.zpp_inner_zn.wrap_a2;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=anchor2.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=anchor2.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=anchor2.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp5;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp5=_this9.zpp_inner.y==y1}else tmp5=!1;if(!tmp5){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=anchor2.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o2=anchor2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor3)throw new js._Boot.HaxeError("Error: Constraint::anchor3 cannot be null");null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var _this18=this.zpp_inner_zn.wrap_a3;if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=_this18.zpp_inner;if(_this19._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this19._isimmutable&&_this19._isimmutable(),null==anchor3)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=anchor3.zpp_inner;null!=_this20._validate&&_this20._validate();var x2=anchor3.zpp_inner.x;if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this21=anchor3.zpp_inner;null!=_this21._validate&&_this21._validate();var y2=anchor3.zpp_inner.y;if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this22=_this18.zpp_inner,tmp6;if(_this22._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this22._isimmutable&&_this22._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this23=_this18.zpp_inner;if(null!=_this23._validate&&_this23._validate(),_this18.zpp_inner.x==x2){if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this24=_this18.zpp_inner;null!=_this24._validate&&_this24._validate(),tmp6=_this18.zpp_inner.y==y2}else tmp6=!1;if(!tmp6){_this18.zpp_inner.x=x2,_this18.zpp_inner.y=y2;var _this25=_this18.zpp_inner;null!=_this25._invalidate&&_this25._invalidate(_this25)}var ret2=_this18;if(anchor3.zpp_inner.weak){if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this26=anchor3.zpp_inner;if(_this26._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this26._isimmutable&&_this26._isimmutable(),anchor3.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=anchor3.zpp_inner;anchor3.zpp_inner.outer=null,anchor3.zpp_inner=null;var o4=anchor3;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}if(null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor4)throw new js._Boot.HaxeError("Error: Constraint::anchor4 cannot be null");null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var _this27=this.zpp_inner_zn.wrap_a4;if(null!=_this27&&_this27.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this28=_this27.zpp_inner;if(_this28._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this28._isimmutable&&_this28._isimmutable(),null==anchor4)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this29=anchor4.zpp_inner;null!=_this29._validate&&_this29._validate();var x3=anchor4.zpp_inner.x;if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this30=anchor4.zpp_inner;null!=_this30._validate&&_this30._validate();var y3=anchor4.zpp_inner.y;if(null!=_this27&&_this27.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this31=_this27.zpp_inner,tmp7;if(_this31._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this31._isimmutable&&_this31._isimmutable(),x3!=x3||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this27&&_this27.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this32=_this27.zpp_inner;if(null!=_this32._validate&&_this32._validate(),_this27.zpp_inner.x==x3){if(null!=_this27&&_this27.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this33=_this27.zpp_inner;null!=_this33._validate&&_this33._validate(),tmp7=_this27.zpp_inner.y==y3}else tmp7=!1;if(!tmp7){_this27.zpp_inner.x=x3,_this27.zpp_inner.y=y3;var _this34=_this27.zpp_inner;null!=_this34._invalidate&&_this34._invalidate(_this34)}var ret3=_this27;if(anchor4.zpp_inner.weak){if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this35=anchor4.zpp_inner;if(_this35._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this35._isimmutable&&_this35._isimmutable(),anchor4.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner3=anchor4.zpp_inner;anchor4.zpp_inner.outer=null,anchor4.zpp_inner=null;var o6=anchor4;o6.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o6:zpp_nape.util.ZPP_PubPool.poolVec2=o6,zpp_nape.util.ZPP_PubPool.nextVec2=o6,o6.zpp_disp=!0;var o7=inner3;null!=o7.outer&&(o7.outer.zpp_inner=null,o7.outer=null),o7._isimmutable=null,o7._validate=null,o7._invalidate=null,o7.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o7}if(null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: PulleyJoint::ratio cannot be NaN");if(this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMin cannot be NaN");if(jointMin<0)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMin must be >= 0");if(this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMax cannot be NaN");if(jointMax<0)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMax must be >= 0");this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake())},nape.constraint.PulleyJoint.__name__=["nape","constraint","PulleyJoint"],nape.constraint.PulleyJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.PulleyJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.PulleyJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.PulleyJoint.prototype,"body1",{get:nape.constraint.PulleyJoint.prototype.get_body1,set:nape.constraint.PulleyJoint.prototype.set_body1}),nape.constraint.PulleyJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.PulleyJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&this.zpp_inner_zn.b3!=inbody1&&this.zpp_inner_zn.b4!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"body2",{get:nape.constraint.PulleyJoint.prototype.get_body2,set:nape.constraint.PulleyJoint.prototype.set_body2}),nape.constraint.PulleyJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.PulleyJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&this.zpp_inner_zn.b3!=inbody2&&this.zpp_inner_zn.b4!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"body3",{get:nape.constraint.PulleyJoint.prototype.get_body3,set:nape.constraint.PulleyJoint.prototype.set_body3}),nape.constraint.PulleyJoint.prototype.get_body3=function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},nape.constraint.PulleyJoint.prototype.set_body3=function(body3){this.zpp_inner.immutable_midstep("Constraint::body3");var inbody3=null==body3?null:body3.zpp_inner;return inbody3!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=inbody3,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody3&&this.zpp_inner_zn.b1!=inbody3&&this.zpp_inner_zn.b2!=inbody3&&this.zpp_inner_zn.b4!=inbody3&&null!=inbody3&&inbody3.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody3&&inbody3.wake())),null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"body4",{get:nape.constraint.PulleyJoint.prototype.get_body4,set:nape.constraint.PulleyJoint.prototype.set_body4}),nape.constraint.PulleyJoint.prototype.get_body4=function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},nape.constraint.PulleyJoint.prototype.set_body4=function(body4){this.zpp_inner.immutable_midstep("Constraint::body4");var inbody4=null==body4?null:body4.zpp_inner;return inbody4!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=inbody4,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody4&&this.zpp_inner_zn.b1!=inbody4&&this.zpp_inner_zn.b2!=inbody4&&this.zpp_inner_zn.b3!=inbody4&&null!=inbody4&&inbody4.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody4&&inbody4.wake())),null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"anchor1",{get:nape.constraint.PulleyJoint.prototype.get_anchor1,set:nape.constraint.PulleyJoint.prototype.set_anchor1}),nape.constraint.PulleyJoint.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},nape.constraint.PulleyJoint.prototype.set_anchor1=function(anchor1){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"anchor2",{get:nape.constraint.PulleyJoint.prototype.get_anchor2,set:nape.constraint.PulleyJoint.prototype.set_anchor2}),nape.constraint.PulleyJoint.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.PulleyJoint.prototype.set_anchor2=function(anchor2){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this=this.zpp_inner_zn.wrap_a2;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor2.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor2.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor2.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o=anchor2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"anchor3",{get:nape.constraint.PulleyJoint.prototype.get_anchor3,set:nape.constraint.PulleyJoint.prototype.set_anchor3}),nape.constraint.PulleyJoint.prototype.get_anchor3=function(){return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},nape.constraint.PulleyJoint.prototype.set_anchor3=function(anchor3){if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor3)throw new js._Boot.HaxeError("Error: Constraint::anchor3 cannot be null");null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var _this=this.zpp_inner_zn.wrap_a3;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor3)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor3.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor3.zpp_inner.x;if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor3.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor3.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor3.zpp_inner.weak){if(null!=anchor3&&anchor3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor3.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor3.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor3.zpp_inner;anchor3.zpp_inner.outer=null,anchor3.zpp_inner=null;var o=anchor3;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"anchor4",{get:nape.constraint.PulleyJoint.prototype.get_anchor4,set:nape.constraint.PulleyJoint.prototype.set_anchor4}),nape.constraint.PulleyJoint.prototype.get_anchor4=function(){return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},nape.constraint.PulleyJoint.prototype.set_anchor4=function(anchor4){if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor4)throw new js._Boot.HaxeError("Error: Constraint::anchor4 cannot be null");null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var _this=this.zpp_inner_zn.wrap_a4;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor4)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor4.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor4.zpp_inner.x;if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor4.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor4.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor4.zpp_inner.weak){if(null!=anchor4&&anchor4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor4.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor4.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor4.zpp_inner;anchor4.zpp_inner.outer=null,anchor4.zpp_inner=null;var o=anchor4;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"jointMin",{get:nape.constraint.PulleyJoint.prototype.get_jointMin,set:nape.constraint.PulleyJoint.prototype.set_jointMin}),nape.constraint.PulleyJoint.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},nape.constraint.PulleyJoint.prototype.set_jointMin=function(jointMin){if(this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),jointMin!=jointMin)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMin cannot be NaN");if(jointMin<0)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMin must be >= 0");return this.zpp_inner_zn.jointMin!=jointMin&&(this.zpp_inner_zn.jointMin=jointMin,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"jointMax",{get:nape.constraint.PulleyJoint.prototype.get_jointMax,set:nape.constraint.PulleyJoint.prototype.set_jointMax}),nape.constraint.PulleyJoint.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},nape.constraint.PulleyJoint.prototype.set_jointMax=function(jointMax){if(this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),jointMax!=jointMax)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMax cannot be NaN");if(jointMax<0)throw new js._Boot.HaxeError("Error: PulleyJoint::jointMax must be >= 0");return this.zpp_inner_zn.jointMax!=jointMax&&(this.zpp_inner_zn.jointMax=jointMax,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},Object.defineProperty(nape.constraint.PulleyJoint.prototype,"ratio",{get:nape.constraint.PulleyJoint.prototype.get_ratio,set:nape.constraint.PulleyJoint.prototype.set_ratio}),nape.constraint.PulleyJoint.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},nape.constraint.PulleyJoint.prototype.set_ratio=function(ratio){if(this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),ratio!=ratio)throw new js._Boot.HaxeError("Error: PulleyJoint::ratio cannot be NaN");return this.zpp_inner_zn.ratio!=ratio&&(this.zpp_inner_zn.ratio=ratio,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},nape.constraint.PulleyJoint.prototype.isSlack=function(){if(null==(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)||null==(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)||null==(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)||null==(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer))throw new js._Boot.HaxeError("Error: Cannot compute slack for PulleyJoint if either body is null.");return this.zpp_inner_zn.slack},nape.constraint.PulleyJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(1,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAcc,ret},nape.constraint.PulleyJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&body!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&body!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.PulleyJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer),null!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&lambda(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer),null!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&lambda(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)},nape.constraint.PulleyJoint.prototype.__class__=nape.constraint.PulleyJoint,nape.constraint.UserConstraint=$hxClasses["nape.constraint.UserConstraint"]=function(dimensions,velocityOnly){if(null==velocityOnly&&(velocityOnly=!1),this.zpp_inner_zn=null,dimensions<1)throw new js._Boot.HaxeError("Error: Constraint dimension must be at least 1");this.zpp_inner_zn=new zpp_nape.constraint.ZPP_UserConstraint(dimensions,velocityOnly),this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1},nape.constraint.UserConstraint.__name__=["nape","constraint","UserConstraint"],nape.constraint.UserConstraint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.UserConstraint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.UserConstraint.prototype.zpp_inner_zn=null,nape.constraint.UserConstraint.prototype.__bindVec2=function(){var ret=new nape.geom.Vec2;return ret.zpp_inner._inuse=!0,ret.zpp_inner._invalidate=$bind($_=this.zpp_inner_zn,$_.bindVec2_invalidate),ret},nape.constraint.UserConstraint.prototype.__copy=function(){throw new js._Boot.HaxeError("Error: UserConstraint::__copy must be overriden")},nape.constraint.UserConstraint.prototype.__broken=function(){},nape.constraint.UserConstraint.prototype.__validate=function(){},nape.constraint.UserConstraint.prototype.__draw=function(debug){},nape.constraint.UserConstraint.prototype.__prepare=function(){},nape.constraint.UserConstraint.prototype.__position=function(err){throw new js._Boot.HaxeError("Error: UserConstraint::__position must be overriden")},nape.constraint.UserConstraint.prototype.__velocity=function(err){throw new js._Boot.HaxeError("Error: Userconstraint::__velocity must be overriden")},nape.constraint.UserConstraint.prototype.__eff_mass=function(eff){throw new js._Boot.HaxeError("Error: UserConstraint::__eff_mass must be overriden")},nape.constraint.UserConstraint.prototype.__clamp=function(jAcc){},nape.constraint.UserConstraint.prototype.__impulse=function(imp,body,out){throw new js._Boot.HaxeError("Error: UserConstraint::__impulse must be overriden")},nape.constraint.UserConstraint.prototype.impulse=function(){for(var ret=new nape.geom.MatMN(this.zpp_inner_zn.dim,1),_g=0,_g1=this.zpp_inner_zn.dim;_g<_g1;){var i=_g++;if(i<0||i>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");ret.zpp_inner.x[i*ret.zpp_inner.n]=this.zpp_inner_zn.jAcc[i]}return ret},nape.constraint.UserConstraint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");for(var found=!1,_g=0,_g1=this.zpp_inner_zn.bodies;_g<_g1.length;){var b=_g1[_g];if(++_g,b.body==body.zpp_inner){found=!0;break}}if(!found)throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.UserConstraint.prototype.visitBodies=function(lambda){for(var i=0,nbodies=this.zpp_inner_zn.bodies.length;i<nbodies;){var b=this.zpp_inner_zn.bodies[i];if(null!=b.body){for(var found=!1,_g=i+1,_g1=nbodies;_g<_g1;){var j=_g++,c;if(this.zpp_inner_zn.bodies[j].body==b.body){found=!0;break}}found||lambda(b.body.outer)}++i}},nape.constraint.UserConstraint.prototype.__invalidate=function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()"),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner.wake()},nape.constraint.UserConstraint.prototype.__registerBody=function(oldBody,newBody){if(this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)"),oldBody!=newBody){if(null!=oldBody){if(!this.zpp_inner_zn.remBody(oldBody.zpp_inner))throw new js._Boot.HaxeError("Error: oldBody is not registered to the cosntraint");this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&oldBody.zpp_inner.wake()}null!=newBody&&this.zpp_inner_zn.addBody(newBody.zpp_inner),this.zpp_inner.wake(),null!=newBody&&newBody.zpp_inner.wake()}return newBody},nape.constraint.UserConstraint.prototype.__class__=nape.constraint.UserConstraint,nape.constraint.WeldJoint=$hxClasses["nape.constraint.WeldJoint"]=function(body1,body2,anchor1,anchor2,phase){null==phase&&(phase=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new zpp_nape.constraint.ZPP_WeldJoint,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner.outer=this,this.zpp_inner_zn.outer_zn=this,nape.constraint.Constraint.zpp_internalAlloc=!0,nape.constraint.Constraint.call(this),nape.constraint.Constraint.zpp_internalAlloc=!1,this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake()));var tmp=null==this.zpp_inner_zn.b1;this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake()));var tmp1=null==this.zpp_inner_zn.b2;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp2;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp2=_this.zpp_inner.y==y}else tmp2=!1;if(!tmp2){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this9=this.zpp_inner_zn.wrap_a2;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=anchor2.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=anchor2.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=anchor2.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp3;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp3=_this9.zpp_inner.y==y1}else tmp3=!1;if(!tmp3){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=anchor2.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o2=anchor2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}if(null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("WeldJoint::phase"),phase!=phase)throw new js._Boot.HaxeError("Error: WeldJoint::phase cannot be NaN");this.zpp_inner_zn.phase!=phase&&(this.zpp_inner_zn.phase=phase,this.zpp_inner.wake())},nape.constraint.WeldJoint.__name__=["nape","constraint","WeldJoint"],nape.constraint.WeldJoint.__super__=nape.constraint.Constraint,nape.constraint.Constraint.prototype)nape.constraint.WeldJoint.prototype[k]=nape.constraint.Constraint.prototype[k];for(var k in nape.constraint.WeldJoint.prototype.zpp_inner_zn=null,Object.defineProperty(nape.constraint.WeldJoint.prototype,"body1",{get:nape.constraint.WeldJoint.prototype.get_body1,set:nape.constraint.WeldJoint.prototype.set_body1}),nape.constraint.WeldJoint.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},nape.constraint.WeldJoint.prototype.set_body1=function(body1){this.zpp_inner.immutable_midstep("Constraint::body1");var inbody1=null==body1?null:body1.zpp_inner;return inbody1!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=inbody1,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody1&&this.zpp_inner_zn.b2!=inbody1&&null!=inbody1&&inbody1.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody1&&inbody1.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},Object.defineProperty(nape.constraint.WeldJoint.prototype,"body2",{get:nape.constraint.WeldJoint.prototype.get_body2,set:nape.constraint.WeldJoint.prototype.set_body2}),nape.constraint.WeldJoint.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},nape.constraint.WeldJoint.prototype.set_body2=function(body2){this.zpp_inner.immutable_midstep("Constraint::body2");var inbody2=null==body2?null:body2.zpp_inner;return inbody2!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=inbody2,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=inbody2&&this.zpp_inner_zn.b1!=inbody2&&null!=inbody2&&inbody2.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=inbody2&&inbody2.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},Object.defineProperty(nape.constraint.WeldJoint.prototype,"anchor1",{get:nape.constraint.WeldJoint.prototype.get_anchor1,set:nape.constraint.WeldJoint.prototype.set_anchor1}),nape.constraint.WeldJoint.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},nape.constraint.WeldJoint.prototype.set_anchor1=function(anchor1){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor1)throw new js._Boot.HaxeError("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var _this=this.zpp_inner_zn.wrap_a1;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor1)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor1.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor1.zpp_inner.x;if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor1.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor1.zpp_inner.weak){if(null!=anchor1&&anchor1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor1.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null,anchor1.zpp_inner=null;var o=anchor1;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},Object.defineProperty(nape.constraint.WeldJoint.prototype,"anchor2",{get:nape.constraint.WeldJoint.prototype.get_anchor2,set:nape.constraint.WeldJoint.prototype.set_anchor2}),nape.constraint.WeldJoint.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},nape.constraint.WeldJoint.prototype.set_anchor2=function(anchor2){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==anchor2)throw new js._Boot.HaxeError("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var _this=this.zpp_inner_zn.wrap_a2;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==anchor2)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=anchor2.zpp_inner;null!=_this2._validate&&_this2._validate();var x=anchor2.zpp_inner.x;if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=anchor2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=anchor2.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(anchor2.zpp_inner.weak){if(null!=anchor2&&anchor2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=anchor2.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),anchor2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=anchor2.zpp_inner;anchor2.zpp_inner.outer=null,anchor2.zpp_inner=null;var o=anchor2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},Object.defineProperty(nape.constraint.WeldJoint.prototype,"phase",{get:nape.constraint.WeldJoint.prototype.get_phase,set:nape.constraint.WeldJoint.prototype.set_phase}),nape.constraint.WeldJoint.prototype.get_phase=function(){return this.zpp_inner_zn.phase},nape.constraint.WeldJoint.prototype.set_phase=function(phase){if(this.zpp_inner.immutable_midstep("WeldJoint::phase"),phase!=phase)throw new js._Boot.HaxeError("Error: WeldJoint::phase cannot be NaN");return this.zpp_inner_zn.phase!=phase&&(this.zpp_inner_zn.phase=phase,this.zpp_inner.wake()),this.zpp_inner_zn.phase},nape.constraint.WeldJoint.prototype.impulse=function(){var ret=new nape.geom.MatMN(3,1);if(0>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(ret.zpp_inner.x[0*ret.zpp_inner.n]=this.zpp_inner_zn.jAccx,1>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(ret.zpp_inner.x[ret.zpp_inner.n]=this.zpp_inner_zn.jAccy,1>=ret.zpp_inner.m||0>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return ret.zpp_inner.x[ret.zpp_inner.n]=this.zpp_inner_zn.jAccz,ret},nape.constraint.WeldJoint.prototype.bodyImpulse=function(body){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate impulse on null body");if(body!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&body!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer))throw new js._Boot.HaxeError("Error: Body is not linked to this constraint");return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(body.zpp_inner):nape.geom.Vec3.get()},nape.constraint.WeldJoint.prototype.visitBodies=function(lambda){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&lambda(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},nape.constraint.WeldJoint.prototype.__class__=nape.constraint.WeldJoint,nape.dynamics||(nape.dynamics={}),nape.dynamics.Arbiter=$hxClasses["nape.dynamics.Arbiter"]=function(){if(this.zpp_inner=null,!zpp_nape.dynamics.ZPP_Arbiter.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Arbiter derp!")},nape.dynamics.Arbiter.__name__=["nape","dynamics","Arbiter"],nape.dynamics.Arbiter.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.Arbiter.prototype,"isSleeping",{get:nape.dynamics.Arbiter.prototype.get_isSleeping}),nape.dynamics.Arbiter.prototype.get_isSleeping=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.sleeping},Object.defineProperty(nape.dynamics.Arbiter.prototype,"type",{get:nape.dynamics.Arbiter.prototype.get_type}),nape.dynamics.Arbiter.prototype.get_type=function(){return zpp_nape.dynamics.ZPP_Arbiter.types[this.zpp_inner.type]},nape.dynamics.Arbiter.prototype.isCollisionArbiter=function(){return this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL},nape.dynamics.Arbiter.prototype.isFluidArbiter=function(){return this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID},nape.dynamics.Arbiter.prototype.isSensorArbiter=function(){return this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.SENSOR},Object.defineProperty(nape.dynamics.Arbiter.prototype,"collisionArbiter",{get:nape.dynamics.Arbiter.prototype.get_collisionArbiter}),nape.dynamics.Arbiter.prototype.get_collisionArbiter=function(){return this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?this.zpp_inner.colarb.outer_zn:null},Object.defineProperty(nape.dynamics.Arbiter.prototype,"fluidArbiter",{get:nape.dynamics.Arbiter.prototype.get_fluidArbiter}),nape.dynamics.Arbiter.prototype.get_fluidArbiter=function(){return this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?this.zpp_inner.fluidarb.outer_zn:null},Object.defineProperty(nape.dynamics.Arbiter.prototype,"shape1",{get:nape.dynamics.Arbiter.prototype.get_shape1}),nape.dynamics.Arbiter.prototype.get_shape1=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},Object.defineProperty(nape.dynamics.Arbiter.prototype,"shape2",{get:nape.dynamics.Arbiter.prototype.get_shape2}),nape.dynamics.Arbiter.prototype.get_shape2=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},Object.defineProperty(nape.dynamics.Arbiter.prototype,"body1",{get:nape.dynamics.Arbiter.prototype.get_body1}),nape.dynamics.Arbiter.prototype.get_body1=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},Object.defineProperty(nape.dynamics.Arbiter.prototype,"body2",{get:nape.dynamics.Arbiter.prototype.get_body2}),nape.dynamics.Arbiter.prototype.get_body2=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},Object.defineProperty(nape.dynamics.Arbiter.prototype,"state",{get:nape.dynamics.Arbiter.prototype.get_state}),nape.dynamics.Arbiter.prototype.get_state=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var _g=this.zpp_inner.immState,x,x1;return 5==_g?(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT):1==_g?(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE):6==_g?(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_IGNORE):(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE)},nape.dynamics.Arbiter.prototype.totalImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");return nape.geom.Vec3.get(0,0,0)},nape.dynamics.Arbiter.prototype.toString=function(){var ret=this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?"CollisionArbiter":this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return ret+"(object-pooled)";if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp=ret+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|";if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp1=tmp+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")",tmp2=this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"",tmp3;if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var _g=this.zpp_inner.immState,x;if(5==_g)null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),tmp3=zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT;else if(1==_g)null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),tmp3=zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE;else{var x1;6==_g?(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),tmp3=zpp_nape.util.ZPP_Flags.PreFlag_IGNORE):(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),tmp3=zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE)}return tmp1+tmp2+"<-"+tmp3.toString()},nape.dynamics.Arbiter.prototype.__class__=nape.dynamics.Arbiter,nape.dynamics.ArbiterIterator=$hxClasses["nape.dynamics.ArbiterIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ArbiterList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ArbiterIterator derp!")},nape.dynamics.ArbiterIterator.__name__=["nape","dynamics","ArbiterIterator"],nape.dynamics.ArbiterIterator.get=function(list){var ret;if(null==nape.dynamics.ArbiterIterator.zpp_pool){zpp_nape.util.ZPP_ArbiterList.internal=!0;var ret1=new nape.dynamics.ArbiterIterator;zpp_nape.util.ZPP_ArbiterList.internal=!1,ret=ret1}else{var r=nape.dynamics.ArbiterIterator.zpp_pool;nape.dynamics.ArbiterIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.dynamics.ArbiterIterator.prototype.zpp_inner=null,nape.dynamics.ArbiterIterator.prototype.zpp_i=null,nape.dynamics.ArbiterIterator.prototype.zpp_critical=null,nape.dynamics.ArbiterIterator.prototype.zpp_next=null,nape.dynamics.ArbiterIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var length=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.dynamics.ArbiterIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.dynamics.ArbiterIterator.prototype.__class__=nape.dynamics.ArbiterIterator,nape.dynamics.ArbiterList=$hxClasses["nape.dynamics.ArbiterList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ArbiterList,this.zpp_inner.outer=this},nape.dynamics.ArbiterList.__name__=["nape","dynamics","ArbiterList"],nape.dynamics.ArbiterList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.dynamics.ArbiterList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.dynamics.ArbiterList.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.ArbiterList.prototype,"length",{get:nape.dynamics.ArbiterList.prototype.get_length}),nape.dynamics.ArbiterList.prototype.get_length=function(){return this.zpp_gl()},nape.dynamics.ArbiterList.prototype.zpp_gl=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var i;cx_ite.elt.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}return this.zpp_inner.user_length},nape.dynamics.ArbiterList.prototype.zpp_vm=function(){this.zpp_inner.valmod()},nape.dynamics.ArbiterList.prototype.has=function(obj){return this.zpp_vm(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.dynamics.ArbiterList.prototype.at=function(index){if(this.zpp_vm(),index<0||index>=this.zpp_gl())throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(index=this.zpp_gl()-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.head;;){var x;if(this.zpp_inner.at_ite.elt.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=index;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var x1;if(this.zpp_inner.at_ite.elt.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},nape.dynamics.ArbiterList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.ArbiterList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.ArbiterList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var ite=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.wrapper()},nape.dynamics.ArbiterList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var ite=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.wrapper()},nape.dynamics.ArbiterList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.dynamics.ArbiterList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_vm(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.dynamics.ArbiterList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ArbiterList is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},nape.dynamics.ArbiterList.prototype.empty=function(){return 0==this.zpp_gl()},nape.dynamics.ArbiterList.prototype.iterator=function(){return this.zpp_vm(),nape.dynamics.ArbiterIterator.get(this)},nape.dynamics.ArbiterList.prototype.copy=function(deep){null==deep&&(deep=!1);for(var ret=new nape.dynamics.ArbiterList,_g=this.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Arbiter is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.dynamics.ArbiterList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");for(var _g=xs.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||this.add(x)}},nape.dynamics.ArbiterList.prototype.toString=function(){for(var ret="[",fst=!0,_g=this.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.dynamics.ArbiterList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");for(var it=this.iterator();;){it.zpp_inner.zpp_inner.valmod();var length=it.zpp_inner.zpp_gl(),tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.dynamics.ArbiterList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;i<this.zpp_gl();){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.dynamics.ArbiterList.prototype.__class__=nape.dynamics.ArbiterList,nape.dynamics.ArbiterType=$hxClasses["nape.dynamics.ArbiterType"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ArbiterType derp!")},nape.dynamics.ArbiterType.__name__=["nape","dynamics","ArbiterType"],nape.dynamics.ArbiterType.COLLISION=null,nape.dynamics.ArbiterType.get_COLLISION=function(){return null==zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION},nape.dynamics.ArbiterType.SENSOR=null,nape.dynamics.ArbiterType.get_SENSOR=function(){return null==zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR},nape.dynamics.ArbiterType.FLUID=null,nape.dynamics.ArbiterType.get_FLUID=function(){return null==zpp_nape.util.ZPP_Flags.ArbiterType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_FLUID=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ArbiterType_FLUID},nape.dynamics.ArbiterType.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION?"COLLISION":(null==zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR?"SENSOR":(null==zpp_nape.util.ZPP_Flags.ArbiterType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_FLUID=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ArbiterType_FLUID?"FLUID":""))},nape.dynamics.ArbiterType.prototype.__class__=nape.dynamics.ArbiterType,nape.dynamics.CollisionArbiter=$hxClasses["nape.dynamics.CollisionArbiter"]=function(){if(!zpp_nape.dynamics.ZPP_Arbiter.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate CollisionArbiter derp!");nape.dynamics.Arbiter.call(this)},nape.dynamics.CollisionArbiter.__name__=["nape","dynamics","CollisionArbiter"],nape.dynamics.CollisionArbiter.__super__=nape.dynamics.Arbiter,nape.dynamics.Arbiter.prototype)nape.dynamics.CollisionArbiter.prototype[k]=nape.dynamics.Arbiter.prototype[k];for(var k in Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"contacts",{get:nape.dynamics.CollisionArbiter.prototype.get_contacts}),nape.dynamics.CollisionArbiter.prototype.get_contacts=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return null==this.zpp_inner.colarb.wrap_contacts&&this.zpp_inner.colarb.setupcontacts(),this.zpp_inner.colarb.wrap_contacts},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"normal",{get:nape.dynamics.CollisionArbiter.prototype.get_normal}),nape.dynamics.CollisionArbiter.prototype.get_normal=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return null==this.zpp_inner.colarb.wrap_normal&&this.zpp_inner.colarb.getnormal(),this.zpp_inner.colarb.wrap_normal},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"radius",{get:nape.dynamics.CollisionArbiter.prototype.get_radius}),nape.dynamics.CollisionArbiter.prototype.get_radius=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.colarb.radius},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"referenceEdge1",{get:nape.dynamics.CollisionArbiter.prototype.get_referenceEdge1}),nape.dynamics.CollisionArbiter.prototype.get_referenceEdge1=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var edge=this.zpp_inner.colarb.__ref_edge1,tmp;if(null!=edge){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");if(1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner.type){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner!=edge.polygon}else tmp=!0}else tmp=!1;return tmp&&(edge=this.zpp_inner.colarb.__ref_edge2),null==edge?null:edge.wrapper()},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"referenceEdge2",{get:nape.dynamics.CollisionArbiter.prototype.get_referenceEdge2}),nape.dynamics.CollisionArbiter.prototype.get_referenceEdge2=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var edge=this.zpp_inner.colarb.__ref_edge1,tmp;if(null!=edge){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");if(1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner.type){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner!=edge.polygon}else tmp=!0}else tmp=!1;return tmp&&(edge=this.zpp_inner.colarb.__ref_edge2),null==edge?null:edge.wrapper()},nape.dynamics.CollisionArbiter.prototype.firstVertex=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var poly2circle;return!!(null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2))&&-1==this.zpp_inner.colarb.__ref_vertex},nape.dynamics.CollisionArbiter.prototype.secondVertex=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var poly2circle;return!!(null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2))&&1==this.zpp_inner.colarb.__ref_vertex},nape.dynamics.CollisionArbiter.prototype.normalImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var retx=0,rety=0,retz=0,colarb=this.zpp_inner.colarb;if(!freshOnly||colarb.oc1.fresh){var imp=colarb.oc1.wrapper().normalImpulse(body),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=imp.zpp_inner;if(null!=_this._validate&&_this._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;null!=_this2._validate&&_this2._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}if(colarb.hc2&&(!freshOnly||colarb.oc2.fresh)){var imp1=colarb.oc2.wrapper().normalImpulse(body),t2=1,t3=1;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp1.zpp_inner;if(null!=_this3._validate&&_this3._validate(),retx+=1*imp1.zpp_inner.x,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=imp1.zpp_inner;if(null!=_this4._validate&&_this4._validate(),rety+=1*imp1.zpp_inner.y,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=imp1.zpp_inner;null!=_this5._validate&&_this5._validate(),retz+=1*imp1.zpp_inner.z,imp1.dispose()}return nape.geom.Vec3.get(retx,rety,retz)},nape.dynamics.CollisionArbiter.prototype.tangentImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var retx=0,rety=0,retz=0,colarb=this.zpp_inner.colarb;if(!freshOnly||colarb.oc1.fresh){var imp=colarb.oc1.wrapper().tangentImpulse(body),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=imp.zpp_inner;if(null!=_this._validate&&_this._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;null!=_this2._validate&&_this2._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}if(colarb.hc2&&(!freshOnly||colarb.oc2.fresh)){var imp1=colarb.oc2.wrapper().tangentImpulse(body),t2=1,t3=1;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp1.zpp_inner;if(null!=_this3._validate&&_this3._validate(),retx+=1*imp1.zpp_inner.x,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=imp1.zpp_inner;if(null!=_this4._validate&&_this4._validate(),rety+=1*imp1.zpp_inner.y,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=imp1.zpp_inner;null!=_this5._validate&&_this5._validate(),retz+=1*imp1.zpp_inner.z,imp1.dispose()}return nape.geom.Vec3.get(retx,rety,retz)},nape.dynamics.CollisionArbiter.prototype.totalImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var retx=0,rety=0,retz=0,colarb=this.zpp_inner.colarb;if(!freshOnly||colarb.oc1.fresh){var imp=colarb.oc1.wrapper().totalImpulse(body),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=imp.zpp_inner;if(null!=_this._validate&&_this._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;null!=_this2._validate&&_this2._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}if(colarb.hc2&&(!freshOnly||colarb.oc2.fresh)){var imp1=colarb.oc2.wrapper().totalImpulse(body),t2=1,t3=1;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp1.zpp_inner;if(null!=_this3._validate&&_this3._validate(),retx+=1*imp1.zpp_inner.x,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=imp1.zpp_inner;if(null!=_this4._validate&&_this4._validate(),rety+=1*imp1.zpp_inner.y,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=imp1.zpp_inner;null!=_this5._validate&&_this5._validate(),retz+=1*imp1.zpp_inner.z,imp1.dispose()}return nape.geom.Vec3.get(retx,rety,retz)},nape.dynamics.CollisionArbiter.prototype.rollingImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var colarb=this.zpp_inner.colarb;return!freshOnly||colarb.oc1.fresh?colarb.oc1.wrapper().rollingImpulse(body):0},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"elasticity",{get:nape.dynamics.CollisionArbiter.prototype.get_elasticity,set:nape.dynamics.CollisionArbiter.prototype.set_elasticity}),nape.dynamics.CollisionArbiter.prototype.get_elasticity=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb=this.zpp_inner.colarb;return colarb.invalidated&&(colarb.invalidated=!1,colarb.userdef_restitution||(colarb.s1.material.elasticity<=-1/0||colarb.s2.material.elasticity<=-1/0?colarb.restitution=0:colarb.s1.material.elasticity>=1/0||colarb.s2.material.elasticity>=1/0?colarb.restitution=1:colarb.restitution=(colarb.s1.material.elasticity+colarb.s2.material.elasticity)/2,colarb.restitution<0&&(colarb.restitution=0),colarb.restitution>1&&(colarb.restitution=1)),colarb.userdef_dyn_fric||(colarb.dyn_fric=Math.sqrt(colarb.s1.material.dynamicFriction*colarb.s2.material.dynamicFriction)),colarb.userdef_stat_fric||(colarb.stat_fric=Math.sqrt(colarb.s1.material.staticFriction*colarb.s2.material.staticFriction)),colarb.userdef_rfric||(colarb.rfric=Math.sqrt(colarb.s1.material.rollingFriction*colarb.s2.material.rollingFriction))),colarb.restitution},nape.dynamics.CollisionArbiter.prototype.set_elasticity=function(elasticity){if(!this.zpp_inner.colarb.mutable)throw new js._Boot.HaxeError("Error: CollisionArbiter::elasticity is only mutable during a pre-handler");if(elasticity!=elasticity)throw new js._Boot.HaxeError("Error: CollisionArbiter::elasticity cannot be NaN");if(elasticity<0)throw new js._Boot.HaxeError("Error: CollisionArbiter::elasticity cannot be negative");var colarb=this.zpp_inner.colarb;if(colarb.restitution=elasticity,colarb.userdef_restitution=!0,!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb1=this.zpp_inner.colarb;return colarb1.invalidated&&(colarb1.invalidated=!1,colarb1.userdef_restitution||(colarb1.s1.material.elasticity<=-1/0||colarb1.s2.material.elasticity<=-1/0?colarb1.restitution=0:colarb1.s1.material.elasticity>=1/0||colarb1.s2.material.elasticity>=1/0?colarb1.restitution=1:colarb1.restitution=(colarb1.s1.material.elasticity+colarb1.s2.material.elasticity)/2,colarb1.restitution<0&&(colarb1.restitution=0),colarb1.restitution>1&&(colarb1.restitution=1)),colarb1.userdef_dyn_fric||(colarb1.dyn_fric=Math.sqrt(colarb1.s1.material.dynamicFriction*colarb1.s2.material.dynamicFriction)),colarb1.userdef_stat_fric||(colarb1.stat_fric=Math.sqrt(colarb1.s1.material.staticFriction*colarb1.s2.material.staticFriction)),colarb1.userdef_rfric||(colarb1.rfric=Math.sqrt(colarb1.s1.material.rollingFriction*colarb1.s2.material.rollingFriction))),colarb1.restitution},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"dynamicFriction",{get:nape.dynamics.CollisionArbiter.prototype.get_dynamicFriction,set:nape.dynamics.CollisionArbiter.prototype.set_dynamicFriction}),nape.dynamics.CollisionArbiter.prototype.get_dynamicFriction=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb=this.zpp_inner.colarb;return colarb.invalidated&&(colarb.invalidated=!1,colarb.userdef_restitution||(colarb.s1.material.elasticity<=-1/0||colarb.s2.material.elasticity<=-1/0?colarb.restitution=0:colarb.s1.material.elasticity>=1/0||colarb.s2.material.elasticity>=1/0?colarb.restitution=1:colarb.restitution=(colarb.s1.material.elasticity+colarb.s2.material.elasticity)/2,colarb.restitution<0&&(colarb.restitution=0),colarb.restitution>1&&(colarb.restitution=1)),colarb.userdef_dyn_fric||(colarb.dyn_fric=Math.sqrt(colarb.s1.material.dynamicFriction*colarb.s2.material.dynamicFriction)),colarb.userdef_stat_fric||(colarb.stat_fric=Math.sqrt(colarb.s1.material.staticFriction*colarb.s2.material.staticFriction)),colarb.userdef_rfric||(colarb.rfric=Math.sqrt(colarb.s1.material.rollingFriction*colarb.s2.material.rollingFriction))),colarb.dyn_fric},nape.dynamics.CollisionArbiter.prototype.set_dynamicFriction=function(dynamicFriction){if(!this.zpp_inner.colarb.mutable)throw new js._Boot.HaxeError("Error: CollisionArbiter::dynamicFriction is only mutable during a pre-handler");if(dynamicFriction!=dynamicFriction)throw new js._Boot.HaxeError("Error: CollisionArbiter::dynamicFriction cannot be NaN");if(dynamicFriction<0)throw new js._Boot.HaxeError("Error: CollisionArbiter::dynamicFriction cannot be negative");var colarb=this.zpp_inner.colarb;if(colarb.dyn_fric=dynamicFriction,colarb.userdef_dyn_fric=!0,!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb1=this.zpp_inner.colarb;return colarb1.invalidated&&(colarb1.invalidated=!1,colarb1.userdef_restitution||(colarb1.s1.material.elasticity<=-1/0||colarb1.s2.material.elasticity<=-1/0?colarb1.restitution=0:colarb1.s1.material.elasticity>=1/0||colarb1.s2.material.elasticity>=1/0?colarb1.restitution=1:colarb1.restitution=(colarb1.s1.material.elasticity+colarb1.s2.material.elasticity)/2,colarb1.restitution<0&&(colarb1.restitution=0),colarb1.restitution>1&&(colarb1.restitution=1)),colarb1.userdef_dyn_fric||(colarb1.dyn_fric=Math.sqrt(colarb1.s1.material.dynamicFriction*colarb1.s2.material.dynamicFriction)),colarb1.userdef_stat_fric||(colarb1.stat_fric=Math.sqrt(colarb1.s1.material.staticFriction*colarb1.s2.material.staticFriction)),colarb1.userdef_rfric||(colarb1.rfric=Math.sqrt(colarb1.s1.material.rollingFriction*colarb1.s2.material.rollingFriction))),colarb1.dyn_fric},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"staticFriction",{get:nape.dynamics.CollisionArbiter.prototype.get_staticFriction,set:nape.dynamics.CollisionArbiter.prototype.set_staticFriction}),nape.dynamics.CollisionArbiter.prototype.get_staticFriction=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb=this.zpp_inner.colarb;return colarb.invalidated&&(colarb.invalidated=!1,colarb.userdef_restitution||(colarb.s1.material.elasticity<=-1/0||colarb.s2.material.elasticity<=-1/0?colarb.restitution=0:colarb.s1.material.elasticity>=1/0||colarb.s2.material.elasticity>=1/0?colarb.restitution=1:colarb.restitution=(colarb.s1.material.elasticity+colarb.s2.material.elasticity)/2,colarb.restitution<0&&(colarb.restitution=0),colarb.restitution>1&&(colarb.restitution=1)),colarb.userdef_dyn_fric||(colarb.dyn_fric=Math.sqrt(colarb.s1.material.dynamicFriction*colarb.s2.material.dynamicFriction)),colarb.userdef_stat_fric||(colarb.stat_fric=Math.sqrt(colarb.s1.material.staticFriction*colarb.s2.material.staticFriction)),colarb.userdef_rfric||(colarb.rfric=Math.sqrt(colarb.s1.material.rollingFriction*colarb.s2.material.rollingFriction))),colarb.stat_fric},nape.dynamics.CollisionArbiter.prototype.set_staticFriction=function(staticFriction){if(!this.zpp_inner.colarb.mutable)throw new js._Boot.HaxeError("Error: CollisionArbiter::staticFriction is only mutable during a pre-handler");if(staticFriction!=staticFriction)throw new js._Boot.HaxeError("Error: CollisionArbiter::staticFriction cannot be NaN");if(staticFriction<0)throw new js._Boot.HaxeError("Error: CollisionArbiter::staticFriction cannot be negative");var colarb=this.zpp_inner.colarb;if(colarb.stat_fric=staticFriction,colarb.userdef_stat_fric=!0,!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb1=this.zpp_inner.colarb;return colarb1.invalidated&&(colarb1.invalidated=!1,colarb1.userdef_restitution||(colarb1.s1.material.elasticity<=-1/0||colarb1.s2.material.elasticity<=-1/0?colarb1.restitution=0:colarb1.s1.material.elasticity>=1/0||colarb1.s2.material.elasticity>=1/0?colarb1.restitution=1:colarb1.restitution=(colarb1.s1.material.elasticity+colarb1.s2.material.elasticity)/2,colarb1.restitution<0&&(colarb1.restitution=0),colarb1.restitution>1&&(colarb1.restitution=1)),colarb1.userdef_dyn_fric||(colarb1.dyn_fric=Math.sqrt(colarb1.s1.material.dynamicFriction*colarb1.s2.material.dynamicFriction)),colarb1.userdef_stat_fric||(colarb1.stat_fric=Math.sqrt(colarb1.s1.material.staticFriction*colarb1.s2.material.staticFriction)),colarb1.userdef_rfric||(colarb1.rfric=Math.sqrt(colarb1.s1.material.rollingFriction*colarb1.s2.material.rollingFriction))),colarb1.stat_fric},Object.defineProperty(nape.dynamics.CollisionArbiter.prototype,"rollingFriction",{get:nape.dynamics.CollisionArbiter.prototype.get_rollingFriction,set:nape.dynamics.CollisionArbiter.prototype.set_rollingFriction}),nape.dynamics.CollisionArbiter.prototype.get_rollingFriction=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb=this.zpp_inner.colarb;return colarb.invalidated&&(colarb.invalidated=!1,colarb.userdef_restitution||(colarb.s1.material.elasticity<=-1/0||colarb.s2.material.elasticity<=-1/0?colarb.restitution=0:colarb.s1.material.elasticity>=1/0||colarb.s2.material.elasticity>=1/0?colarb.restitution=1:colarb.restitution=(colarb.s1.material.elasticity+colarb.s2.material.elasticity)/2,colarb.restitution<0&&(colarb.restitution=0),colarb.restitution>1&&(colarb.restitution=1)),colarb.userdef_dyn_fric||(colarb.dyn_fric=Math.sqrt(colarb.s1.material.dynamicFriction*colarb.s2.material.dynamicFriction)),colarb.userdef_stat_fric||(colarb.stat_fric=Math.sqrt(colarb.s1.material.staticFriction*colarb.s2.material.staticFriction)),colarb.userdef_rfric||(colarb.rfric=Math.sqrt(colarb.s1.material.rollingFriction*colarb.s2.material.rollingFriction))),colarb.rfric},nape.dynamics.CollisionArbiter.prototype.set_rollingFriction=function(rollingFriction){if(!this.zpp_inner.colarb.mutable)throw new js._Boot.HaxeError("Error: CollisionArbiter::rollingFriction is only mutable during a pre-handler");if(rollingFriction!=rollingFriction)throw new js._Boot.HaxeError("Error: CollisionArbiter::rollingFriction cannot be NaN");if(rollingFriction<0)throw new js._Boot.HaxeError("Error: CollisionArbiter::rollingFriction cannot be negative");var colarb=this.zpp_inner.colarb;if(colarb.rfric=rollingFriction,colarb.userdef_rfric=!0,!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var colarb1=this.zpp_inner.colarb;return colarb1.invalidated&&(colarb1.invalidated=!1,colarb1.userdef_restitution||(colarb1.s1.material.elasticity<=-1/0||colarb1.s2.material.elasticity<=-1/0?colarb1.restitution=0:colarb1.s1.material.elasticity>=1/0||colarb1.s2.material.elasticity>=1/0?colarb1.restitution=1:colarb1.restitution=(colarb1.s1.material.elasticity+colarb1.s2.material.elasticity)/2,colarb1.restitution<0&&(colarb1.restitution=0),colarb1.restitution>1&&(colarb1.restitution=1)),colarb1.userdef_dyn_fric||(colarb1.dyn_fric=Math.sqrt(colarb1.s1.material.dynamicFriction*colarb1.s2.material.dynamicFriction)),colarb1.userdef_stat_fric||(colarb1.stat_fric=Math.sqrt(colarb1.s1.material.staticFriction*colarb1.s2.material.staticFriction)),colarb1.userdef_rfric||(colarb1.rfric=Math.sqrt(colarb1.s1.material.rollingFriction*colarb1.s2.material.rollingFriction))),colarb1.rfric},nape.dynamics.CollisionArbiter.prototype.__class__=nape.dynamics.CollisionArbiter,nape.dynamics.Contact=$hxClasses["nape.dynamics.Contact"]=function(){if(this.zpp_inner=null,!zpp_nape.dynamics.ZPP_Contact.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Contact derp!")},nape.dynamics.Contact.__name__=["nape","dynamics","Contact"],nape.dynamics.Contact.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.Contact.prototype,"arbiter",{get:nape.dynamics.Contact.prototype.get_arbiter}),nape.dynamics.Contact.prototype.get_arbiter=function(){if(null==this.zpp_inner.arbiter)return null;var _this=this.zpp_inner.arbiter.outer;return _this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null},Object.defineProperty(nape.dynamics.Contact.prototype,"penetration",{get:nape.dynamics.Contact.prototype.get_penetration}),nape.dynamics.Contact.prototype.get_penetration=function(){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");return-this.zpp_inner.dist},Object.defineProperty(nape.dynamics.Contact.prototype,"position",{get:nape.dynamics.Contact.prototype.get_position}),nape.dynamics.Contact.prototype.get_position=function(){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");return null==this.zpp_inner.wrap_position&&this.zpp_inner.getposition(),this.zpp_inner.wrap_position},Object.defineProperty(nape.dynamics.Contact.prototype,"fresh",{get:nape.dynamics.Contact.prototype.get_fresh}),nape.dynamics.Contact.prototype.get_fresh=function(){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");return this.zpp_inner.fresh},nape.dynamics.Contact.prototype.normalImpulse=function(body){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");var colarb=this.zpp_inner.arbiter.colarb,cin=this.zpp_inner.inner,jnAcc=cin.jnAcc;if(null==body)return nape.geom.Vec3.get(colarb.nx*jnAcc,colarb.ny*jnAcc);if(body!=colarb.b1.outer&&body!=colarb.b2.outer)throw new js._Boot.HaxeError("Error: Contact does not relate to the given body");return body==colarb.b1.outer?nape.geom.Vec3.get(colarb.nx*-jnAcc,colarb.ny*-jnAcc,-(colarb.ny*cin.r1x-colarb.nx*cin.r1y)*jnAcc):nape.geom.Vec3.get(colarb.nx*jnAcc,colarb.ny*jnAcc,(colarb.ny*cin.r2x-colarb.nx*cin.r2y)*jnAcc)},nape.dynamics.Contact.prototype.tangentImpulse=function(body){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");var colarb=this.zpp_inner.arbiter.colarb,cin=this.zpp_inner.inner,jtAcc=cin.jtAcc;if(null==body)return nape.geom.Vec3.get(-colarb.ny*jtAcc,colarb.nx*jtAcc);if(body!=colarb.b1.outer&&body!=colarb.b2.outer)throw new js._Boot.HaxeError("Error: Contact does not relate to the given body");return body==colarb.b1.outer?nape.geom.Vec3.get(colarb.ny*jtAcc,-colarb.nx*jtAcc,-(cin.r1x*colarb.nx+cin.r1y*colarb.ny)*jtAcc):nape.geom.Vec3.get(-colarb.ny*jtAcc,colarb.nx*jtAcc,(cin.r2x*colarb.nx+cin.r2y*colarb.ny)*jtAcc)},nape.dynamics.Contact.prototype.rollingImpulse=function(body){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");var colarb=this.zpp_inner.arbiter.colarb,jrAcc=this.zpp_inner.arbiter.colarb.jrAcc;if(null==body)return jrAcc;if(body!=colarb.b1.outer&&body!=colarb.b2.outer)throw new js._Boot.HaxeError("Error: Contact does not relate to the given body");return body==colarb.b1.outer?-jrAcc:jrAcc},nape.dynamics.Contact.prototype.totalImpulse=function(body){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");var colarb=this.zpp_inner.arbiter.colarb,cin=this.zpp_inner.inner,jnAcc=cin.jnAcc,jtAcc=cin.jtAcc,jrAcc=colarb.jrAcc;if(null==body)return nape.geom.Vec3.get(colarb.nx*jnAcc-colarb.ny*jtAcc,colarb.ny*jnAcc+colarb.nx*jtAcc,jrAcc);if(body!=colarb.b1.outer&&body!=colarb.b2.outer)throw new js._Boot.HaxeError("Error: Contact does not relate to the given body");var jx=colarb.nx*jnAcc-colarb.ny*jtAcc,jy=colarb.ny*jnAcc+colarb.nx*jtAcc;return body==colarb.b1.outer?nape.geom.Vec3.get(-jx,-jy,-(jy*cin.r1x-jx*cin.r1y)-jrAcc):nape.geom.Vec3.get(jx,jy,jy*cin.r2x-jx*cin.r2y+jrAcc)},Object.defineProperty(nape.dynamics.Contact.prototype,"friction",{get:nape.dynamics.Contact.prototype.get_friction}),nape.dynamics.Contact.prototype.get_friction=function(){if(this.zpp_inner.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");return this.zpp_inner.inner.friction},nape.dynamics.Contact.prototype.toString=function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},nape.dynamics.Contact.prototype.__class__=nape.dynamics.Contact,nape.dynamics.ContactIterator=$hxClasses["nape.dynamics.ContactIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ContactList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ContactIterator derp!")},nape.dynamics.ContactIterator.__name__=["nape","dynamics","ContactIterator"],nape.dynamics.ContactIterator.get=function(list){var ret;if(null==nape.dynamics.ContactIterator.zpp_pool){zpp_nape.util.ZPP_ContactList.internal=!0;var ret1=new nape.dynamics.ContactIterator;zpp_nape.util.ZPP_ContactList.internal=!1,ret=ret1}else{var r=nape.dynamics.ContactIterator.zpp_pool;nape.dynamics.ContactIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.dynamics.ContactIterator.prototype.zpp_inner=null,nape.dynamics.ContactIterator.prototype.zpp_i=null,nape.dynamics.ContactIterator.prototype.zpp_critical=null,nape.dynamics.ContactIterator.prototype.zpp_next=null,nape.dynamics.ContactIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;if(_this.zpp_inner.valmod(),_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=0;for(var cx_ite=_this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&_this.zpp_inner.user_length++,cx_ite=cx_ite.next}}var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.dynamics.ContactIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.dynamics.ContactIterator.prototype.__class__=nape.dynamics.ContactIterator,nape.dynamics.ContactList=$hxClasses["nape.dynamics.ContactList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ContactList,this.zpp_inner.outer=this},nape.dynamics.ContactList.__name__=["nape","dynamics","ContactList"],nape.dynamics.ContactList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.dynamics.ContactList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.dynamics.ContactList.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.ContactList.prototype,"length",{get:nape.dynamics.ContactList.prototype.get_length}),nape.dynamics.ContactList.prototype.get_length=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}return this.zpp_inner.user_length},nape.dynamics.ContactList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.dynamics.ContactList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}tmp=index>=this.zpp_inner.user_length}else tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var x=this.zpp_inner.at_ite;if(x.active&&x.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=index;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var x1=this.zpp_inner.at_ite;if(x1.active&&x1.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.wrapper()},nape.dynamics.ContactList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(0==this.zpp_inner.user_length)tmp=null;else{var tmp1=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.ContactList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(0==this.zpp_inner.user_length)tmp=null;else{var tmp1=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.ContactList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");if(this.zpp_inner.modify_test(),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(0==this.zpp_inner.user_length)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}if(1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite2=this.zpp_inner.inner.next;null!=cx_ite2;){var i2=cx_ite2;i2.active&&i2.arbiter.active&&this.zpp_inner.user_length++,cx_ite2=cx_ite2.next}}ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.next:ite.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.wrapper()},nape.dynamics.ContactList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");if(this.zpp_inner.modify_test(),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(0==this.zpp_inner.user_length)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}if(1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite2=this.zpp_inner.inner.next;null!=cx_ite2;){var i2=cx_ite2;i2.active&&i2.arbiter.active&&this.zpp_inner.user_length++,cx_ite2=cx_ite2.next}}ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.next:ite.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.wrapper()},nape.dynamics.ContactList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.dynamics.ContactList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var x;if(cx_ite==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.dynamics.ContactList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ContactList is immutable");if(this.zpp_inner.reverse_flag)for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(0==this.zpp_inner.user_length)break;this.pop()}else for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite1=this.zpp_inner.inner.next;null!=cx_ite1;){var i1=cx_ite1;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite1=cx_ite1.next}}if(0==this.zpp_inner.user_length)break;this.shift()}},nape.dynamics.ContactList.prototype.empty=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}return 0==this.zpp_inner.user_length},nape.dynamics.ContactList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.dynamics.ContactIterator.get(this)},nape.dynamics.ContactList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.dynamics.ContactList;this.zpp_inner.valmod();for(var _g=nape.dynamics.ContactIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;if(_this.zpp_inner.valmod(),_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=0;for(var cx_ite=_this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&_this.zpp_inner.user_length++,cx_ite=cx_ite.next}}var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i1=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Contact is not a copyable type");tmp1=i1,ret.push(tmp1)}return ret},nape.dynamics.ContactList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.dynamics.ContactIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;if(_this.zpp_inner.valmod(),_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=0;for(var cx_ite=_this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&_this.zpp_inner.user_length++,cx_ite=cx_ite.next}}var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.dynamics.ContactList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.dynamics.ContactIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;if(_this.zpp_inner.valmod(),_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=0;for(var cx_ite=_this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&_this.zpp_inner.user_length++,cx_ite=cx_ite.next}}var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i1=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i1?"NULL":i1.toString(),fst=!1}return ret+"]"},nape.dynamics.ContactList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.dynamics.ContactIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;if(_this.zpp_inner.valmod(),_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=0;for(var cx_ite=_this.zpp_inner.inner.next;null!=cx_ite;){var i=cx_ite;i.active&&i.arbiter.active&&_this.zpp_inner.user_length++,cx_ite=cx_ite.next}}var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.dynamics.ContactIterator.zpp_pool,nape.dynamics.ContactIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.dynamics.ContactList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var cx_ite=this.zpp_inner.inner.next;null!=cx_ite;){var i1=cx_ite;i1.active&&i1.arbiter.active&&this.zpp_inner.user_length++,cx_ite=cx_ite.next}}if(!(i<this.zpp_inner.user_length))break;var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.dynamics.ContactList.prototype.__class__=nape.dynamics.ContactList,nape.dynamics.FluidArbiter=$hxClasses["nape.dynamics.FluidArbiter"]=function(){if(!zpp_nape.dynamics.ZPP_Arbiter.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate FluidArbiter derp!");nape.dynamics.Arbiter.call(this)},nape.dynamics.FluidArbiter.__name__=["nape","dynamics","FluidArbiter"],nape.dynamics.FluidArbiter.__super__=nape.dynamics.Arbiter,nape.dynamics.Arbiter.prototype)nape.dynamics.FluidArbiter.prototype[k]=nape.dynamics.Arbiter.prototype[k];for(var k in Object.defineProperty(nape.dynamics.FluidArbiter.prototype,"position",{get:nape.dynamics.FluidArbiter.prototype.get_position,set:nape.dynamics.FluidArbiter.prototype.set_position}),nape.dynamics.FluidArbiter.prototype.get_position=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},nape.dynamics.FluidArbiter.prototype.set_position=function(position){if(!this.zpp_inner.fluidarb.mutable)throw new js._Boot.HaxeError("Error: Arbiter is mutable only within a pre-handler");if(null==position)throw new js._Boot.HaxeError("Error: FluidArbiter::position cannot be null");if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition();var _this=this.zpp_inner.fluidarb.wrap_position;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==position)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=position.zpp_inner;null!=_this2._validate&&_this2._validate();var x=position.zpp_inner.x;if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=position.zpp_inner;null!=_this3._validate&&_this3._validate();var y=position.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=position.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},Object.defineProperty(nape.dynamics.FluidArbiter.prototype,"overlap",{get:nape.dynamics.FluidArbiter.prototype.get_overlap,set:nape.dynamics.FluidArbiter.prototype.set_overlap}),nape.dynamics.FluidArbiter.prototype.get_overlap=function(){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},nape.dynamics.FluidArbiter.prototype.set_overlap=function(overlap){if(!this.zpp_inner.fluidarb.mutable)throw new js._Boot.HaxeError("Error: Arbiter is mutable only within a pre-handler");if(overlap!=overlap)throw new js._Boot.HaxeError("Error: FluidArbiter::overlap cannot be NaN");if(overlap<=0||overlap==1/0)throw new js._Boot.HaxeError("Error: FluidArbiter::overlap must be strictly positive and non infinite");if(this.zpp_inner.fluidarb.overlap=overlap,!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");return this.zpp_inner.fluidarb.overlap},nape.dynamics.FluidArbiter.prototype.buoyancyImpulse=function(body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var farb=this.zpp_inner.fluidarb;return null==body?nape.geom.Vec3.get(farb.buoyx,farb.buoyy,0):body.zpp_inner==this.zpp_inner.b2?nape.geom.Vec3.get(farb.buoyx,farb.buoyy,farb.buoyy*farb.r2x-farb.buoyx*farb.r2y):nape.geom.Vec3.get(-farb.buoyx,-farb.buoyy,-(farb.buoyy*farb.r1x-farb.buoyx*farb.r1y))},nape.dynamics.FluidArbiter.prototype.dragImpulse=function(body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var farb=this.zpp_inner.fluidarb,scale=null==body||body.zpp_inner==this.zpp_inner.b2?1:-1;return nape.geom.Vec3.get(farb.dampx*scale,farb.dampy*scale,farb.adamp*scale)},nape.dynamics.FluidArbiter.prototype.totalImpulse=function(body,freshOnly){if(null==freshOnly&&(freshOnly=!1),!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");var tmp,tmp1;if(null!=body){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp1=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer)}else tmp1=!1;if(tmp1){if(!this.zpp_inner.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");tmp=body!=(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer)}else tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Arbiter does not relate to body");var tmp2=this.buoyancyImpulse(body),ret=this.dragImpulse(body),_g=ret;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=_g.zpp_inner;null!=_this._validate&&_this._validate();var x=_g.zpp_inner.x;if(null!=tmp2&&tmp2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=tmp2.zpp_inner;if(null!=_this1._validate&&_this1._validate(),null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g.zpp_inner.x=x+tmp2.zpp_inner.x,null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=_g.zpp_inner;null!=_this2._validate&&_this2._validate();var _g1=ret;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=_g1.zpp_inner;null!=_this3._validate&&_this3._validate();var y=_g1.zpp_inner.y;if(null!=tmp2&&tmp2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=tmp2.zpp_inner;if(null!=_this4._validate&&_this4._validate(),null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g1.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g1.zpp_inner.y=y+tmp2.zpp_inner.y,null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=_g1.zpp_inner;null!=_this5._validate&&_this5._validate();var _g2=ret;if(null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this6=_g2.zpp_inner;null!=_this6._validate&&_this6._validate();var z=_g2.zpp_inner.z;if(null!=tmp2&&tmp2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this7=tmp2.zpp_inner;if(null!=_this7._validate&&_this7._validate(),null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g2.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g2.zpp_inner.z=z+tmp2.zpp_inner.z,null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this8=_g2.zpp_inner;return null!=_this8._validate&&_this8._validate(),tmp2.dispose(),ret},nape.dynamics.FluidArbiter.prototype.__class__=nape.dynamics.FluidArbiter,nape.dynamics.InteractionFilter=$hxClasses["nape.dynamics.InteractionFilter"]=function(collisionGroup,collisionMask,sensorGroup,sensorMask,fluidGroup,fluidMask){null==fluidMask&&(fluidMask=-1),null==fluidGroup&&(fluidGroup=1),null==sensorMask&&(sensorMask=-1),null==sensorGroup&&(sensorGroup=1),null==collisionMask&&(collisionMask=-1),null==collisionGroup&&(collisionGroup=1),this.zpp_inner=null,null==zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool?this.zpp_inner=new zpp_nape.dynamics.ZPP_InteractionFilter:(this.zpp_inner=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,this.zpp_inner.collisionGroup!=collisionGroup&&(this.zpp_inner.collisionGroup=collisionGroup,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask!=collisionMask&&(this.zpp_inner.collisionMask=collisionMask,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup!=sensorGroup&&(this.zpp_inner.sensorGroup=sensorGroup,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask!=sensorMask&&(this.zpp_inner.sensorMask=sensorMask,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup!=fluidGroup&&(this.zpp_inner.fluidGroup=fluidGroup,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask!=fluidMask&&(this.zpp_inner.fluidMask=fluidMask,this.zpp_inner.invalidate())},nape.dynamics.InteractionFilter.__name__=["nape","dynamics","InteractionFilter"],nape.dynamics.InteractionFilter.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"userData",{get:nape.dynamics.InteractionFilter.prototype.get_userData}),nape.dynamics.InteractionFilter.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"shapes",{get:nape.dynamics.InteractionFilter.prototype.get_shapes}),nape.dynamics.InteractionFilter.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_nape.util.ZPP_ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"collisionGroup",{get:nape.dynamics.InteractionFilter.prototype.get_collisionGroup,set:nape.dynamics.InteractionFilter.prototype.set_collisionGroup}),nape.dynamics.InteractionFilter.prototype.get_collisionGroup=function(){return this.zpp_inner.collisionGroup},nape.dynamics.InteractionFilter.prototype.set_collisionGroup=function(collisionGroup){return this.zpp_inner.collisionGroup!=collisionGroup&&(this.zpp_inner.collisionGroup=collisionGroup,this.zpp_inner.invalidate()),this.zpp_inner.collisionGroup},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"collisionMask",{get:nape.dynamics.InteractionFilter.prototype.get_collisionMask,set:nape.dynamics.InteractionFilter.prototype.set_collisionMask}),nape.dynamics.InteractionFilter.prototype.get_collisionMask=function(){return this.zpp_inner.collisionMask},nape.dynamics.InteractionFilter.prototype.set_collisionMask=function(collisionMask){return this.zpp_inner.collisionMask!=collisionMask&&(this.zpp_inner.collisionMask=collisionMask,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"sensorGroup",{get:nape.dynamics.InteractionFilter.prototype.get_sensorGroup,set:nape.dynamics.InteractionFilter.prototype.set_sensorGroup}),nape.dynamics.InteractionFilter.prototype.get_sensorGroup=function(){return this.zpp_inner.sensorGroup},nape.dynamics.InteractionFilter.prototype.set_sensorGroup=function(sensorGroup){return this.zpp_inner.sensorGroup!=sensorGroup&&(this.zpp_inner.sensorGroup=sensorGroup,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"sensorMask",{get:nape.dynamics.InteractionFilter.prototype.get_sensorMask,set:nape.dynamics.InteractionFilter.prototype.set_sensorMask}),nape.dynamics.InteractionFilter.prototype.get_sensorMask=function(){return this.zpp_inner.sensorMask},nape.dynamics.InteractionFilter.prototype.set_sensorMask=function(sensorMask){return this.zpp_inner.sensorMask!=sensorMask&&(this.zpp_inner.sensorMask=sensorMask,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"fluidGroup",{get:nape.dynamics.InteractionFilter.prototype.get_fluidGroup,set:nape.dynamics.InteractionFilter.prototype.set_fluidGroup}),nape.dynamics.InteractionFilter.prototype.get_fluidGroup=function(){return this.zpp_inner.fluidGroup},nape.dynamics.InteractionFilter.prototype.set_fluidGroup=function(fluidGroup){return this.zpp_inner.fluidGroup!=fluidGroup&&(this.zpp_inner.fluidGroup=fluidGroup,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup},Object.defineProperty(nape.dynamics.InteractionFilter.prototype,"fluidMask",{get:nape.dynamics.InteractionFilter.prototype.get_fluidMask,set:nape.dynamics.InteractionFilter.prototype.set_fluidMask}),nape.dynamics.InteractionFilter.prototype.get_fluidMask=function(){return this.zpp_inner.fluidMask},nape.dynamics.InteractionFilter.prototype.set_fluidMask=function(fluidMask){return this.zpp_inner.fluidMask!=fluidMask&&(this.zpp_inner.fluidMask=fluidMask,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask},nape.dynamics.InteractionFilter.prototype.shouldCollide=function(filter){if(null==filter)throw new js._Boot.HaxeError("Error: filter argument cannot be null for shouldCollide");var _this=this.zpp_inner,x=filter.zpp_inner;return 0!=(_this.collisionMask&x.collisionGroup)&&0!=(x.collisionMask&_this.collisionGroup)},nape.dynamics.InteractionFilter.prototype.shouldSense=function(filter){if(null==filter)throw new js._Boot.HaxeError("Error: filter argument cannot be null for shouldSense");var _this=this.zpp_inner,x=filter.zpp_inner;return 0!=(_this.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&_this.sensorGroup)},nape.dynamics.InteractionFilter.prototype.shouldFlow=function(filter){if(null==filter)throw new js._Boot.HaxeError("Error: filter argument cannot be null for shouldFlow");var _this=this.zpp_inner,x=filter.zpp_inner;return 0!=(_this.fluidMask&x.fluidGroup)&&0!=(x.fluidMask&_this.fluidGroup)},nape.dynamics.InteractionFilter.prototype.copy=function(){return new nape.dynamics.InteractionFilter(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},nape.dynamics.InteractionFilter.prototype.toString=function(){return"{ collision: "+StringTools.hex(this.zpp_inner.collisionGroup,8)+"~"+StringTools.hex(this.zpp_inner.collisionMask,8)+" sensor: "+StringTools.hex(this.zpp_inner.sensorGroup,8)+"~"+StringTools.hex(this.zpp_inner.sensorMask,8)+" fluid: "+StringTools.hex(this.zpp_inner.fluidGroup,8)+"~"+StringTools.hex(this.zpp_inner.fluidMask,8)+" }"},nape.dynamics.InteractionFilter.prototype.__class__=nape.dynamics.InteractionFilter,nape.dynamics.InteractionGroup=$hxClasses["nape.dynamics.InteractionGroup"]=function(ignore){null==ignore&&(ignore=!1),this.zpp_inner=null,this.zpp_inner=new zpp_nape.dynamics.ZPP_InteractionGroup,this.zpp_inner.outer=this,this.zpp_inner.ignore!=ignore&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=ignore)},nape.dynamics.InteractionGroup.__name__=["nape","dynamics","InteractionGroup"],nape.dynamics.InteractionGroup.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.InteractionGroup.prototype,"group",{get:nape.dynamics.InteractionGroup.prototype.get_group,set:nape.dynamics.InteractionGroup.prototype.set_group}),nape.dynamics.InteractionGroup.prototype.get_group=function(){return null==this.zpp_inner.group?null:this.zpp_inner.group.outer},nape.dynamics.InteractionGroup.prototype.set_group=function(group){if(group==this)throw new js._Boot.HaxeError("Error: Cannot assign InteractionGroup to itself");return this.zpp_inner.setGroup(null==group?null:group.zpp_inner),null==this.zpp_inner.group?null:this.zpp_inner.group.outer},Object.defineProperty(nape.dynamics.InteractionGroup.prototype,"ignore",{get:nape.dynamics.InteractionGroup.prototype.get_ignore,set:nape.dynamics.InteractionGroup.prototype.set_ignore}),nape.dynamics.InteractionGroup.prototype.get_ignore=function(){return this.zpp_inner.ignore},nape.dynamics.InteractionGroup.prototype.set_ignore=function(ignore){return this.zpp_inner.ignore!=ignore&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=ignore),this.zpp_inner.ignore},Object.defineProperty(nape.dynamics.InteractionGroup.prototype,"interactors",{get:nape.dynamics.InteractionGroup.prototype.get_interactors}),nape.dynamics.InteractionGroup.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=zpp_nape.util.ZPP_InteractorList.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},Object.defineProperty(nape.dynamics.InteractionGroup.prototype,"groups",{get:nape.dynamics.InteractionGroup.prototype.get_groups}),nape.dynamics.InteractionGroup.prototype.get_groups=function(){return null==this.zpp_inner.wrap_groups&&(this.zpp_inner.wrap_groups=zpp_nape.util.ZPP_InteractionGroupList.get(this.zpp_inner.groups,!0)),this.zpp_inner.wrap_groups},nape.dynamics.InteractionGroup.prototype.toString=function(){var ret="InteractionGroup";return this.zpp_inner.ignore&&(ret+=":ignore"),ret},nape.dynamics.InteractionGroup.prototype.__class__=nape.dynamics.InteractionGroup,nape.dynamics.InteractionGroupIterator=$hxClasses["nape.dynamics.InteractionGroupIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_InteractionGroupList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate InteractionGroupIterator derp!")},nape.dynamics.InteractionGroupIterator.__name__=["nape","dynamics","InteractionGroupIterator"],nape.dynamics.InteractionGroupIterator.get=function(list){var ret;if(null==nape.dynamics.InteractionGroupIterator.zpp_pool){zpp_nape.util.ZPP_InteractionGroupList.internal=!0;var ret1=new nape.dynamics.InteractionGroupIterator;zpp_nape.util.ZPP_InteractionGroupList.internal=!1,ret=ret1}else{var r=nape.dynamics.InteractionGroupIterator.zpp_pool;nape.dynamics.InteractionGroupIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.dynamics.InteractionGroupIterator.prototype.zpp_inner=null,nape.dynamics.InteractionGroupIterator.prototype.zpp_i=null,nape.dynamics.InteractionGroupIterator.prototype.zpp_critical=null,nape.dynamics.InteractionGroupIterator.prototype.zpp_next=null,nape.dynamics.InteractionGroupIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.dynamics.InteractionGroupIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.dynamics.InteractionGroupIterator.prototype.__class__=nape.dynamics.InteractionGroupIterator,nape.dynamics.InteractionGroupList=$hxClasses["nape.dynamics.InteractionGroupList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_InteractionGroupList,this.zpp_inner.outer=this},nape.dynamics.InteractionGroupList.__name__=["nape","dynamics","InteractionGroupList"],nape.dynamics.InteractionGroupList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.dynamics.InteractionGroupList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.dynamics.InteractionGroupList.prototype.zpp_inner=null,Object.defineProperty(nape.dynamics.InteractionGroupList.prototype,"length",{get:nape.dynamics.InteractionGroupList.prototype.get_length}),nape.dynamics.InteractionGroupList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.dynamics.InteractionGroupList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.dynamics.InteractionGroupList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.dynamics.InteractionGroupList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.InteractionGroupList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.dynamics.InteractionGroupList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.dynamics.InteractionGroupList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.dynamics.InteractionGroupList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.dynamics.InteractionGroupList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.dynamics.InteractionGroupList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractionGroupList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.dynamics.InteractionGroupList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.dynamics.InteractionGroupList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.dynamics.InteractionGroupIterator.get(this)},nape.dynamics.InteractionGroupList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.dynamics.InteractionGroupList;this.zpp_inner.valmod();for(var _g=nape.dynamics.InteractionGroupIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: InteractionGroup is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.dynamics.InteractionGroupList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.dynamics.InteractionGroupIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.dynamics.InteractionGroupList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.dynamics.InteractionGroupIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.dynamics.InteractionGroupList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.dynamics.InteractionGroupIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.dynamics.InteractionGroupIterator.zpp_pool,nape.dynamics.InteractionGroupIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.dynamics.InteractionGroupList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.dynamics.InteractionGroupList.prototype.__class__=nape.dynamics.InteractionGroupList,nape.geom||(nape.geom={}),nape.geom.AABB=$hxClasses["nape.geom.AABB"]=function(x,y,width,height){if(null==height&&(height=0),null==width&&(width=0),null==y&&(y=0),null==x&&(x=0),this.zpp_inner=null,x!=x||y!=y)throw new js._Boot.HaxeError("Error: AABB position cannot be NaN");if(width!=width||height!=height)throw new js._Boot.HaxeError("Error: AABB dimensions cannot be NaN");var ret;null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=x,ret.miny=y,ret.maxx=x+width,ret.maxy=y+height,this.zpp_inner=ret,this.zpp_inner.outer=this},nape.geom.AABB.__name__=["nape","geom","AABB"],nape.geom.AABB.prototype.zpp_inner=null,nape.geom.AABB.prototype.copy=function(){var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var _this1=this.zpp_inner,minx=_this1.minx,miny=_this1.miny,maxx=_this1.maxx,maxy=_this1.maxy,ret;return null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=minx,ret.miny=miny,ret.maxx=maxx,ret.maxy=maxy,ret.wrapper()},Object.defineProperty(nape.geom.AABB.prototype,"min",{get:nape.geom.AABB.prototype.get_min,set:nape.geom.AABB.prototype.set_min}),nape.geom.AABB.prototype.get_min=function(){return this.zpp_inner.getmin()},nape.geom.AABB.prototype.set_min=function(min){if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");if(null==min)throw new js._Boot.HaxeError("Error: Cannot assign null to AABB::min");var tmp,_this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=this.zpp_inner.minx,_this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),tmp1==this.zpp_inner.minx){var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.miny,_this3=this.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp=tmp2!=this.zpp_inner.miny}else tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: AABB::min components cannot be NaN");if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=min.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp3=min.zpp_inner.x,_this5=this.zpp_inner.getmax();if(null!=_this5&&_this5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this5.zpp_inner;if(null!=_this6._validate&&_this6._validate(),tmp3>_this5.zpp_inner.x)throw new js._Boot.HaxeError("Error: Assignment would cause negative width");if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=min.zpp_inner;null!=_this7._validate&&_this7._validate();var tmp4=min.zpp_inner.y,_this8=this.zpp_inner.getmax();if(null!=_this8&&_this8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_this8.zpp_inner;if(null!=_this9._validate&&_this9._validate(),tmp4>_this8.zpp_inner.y)throw new js._Boot.HaxeError("Error: Assignment would cause negative height");var _this10=this.zpp_inner.getmin();if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=_this10.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),null==min)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=min.zpp_inner;null!=_this12._validate&&_this12._validate();var x=min.zpp_inner.x;if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=min.zpp_inner;null!=_this13._validate&&_this13._validate();var y=min.zpp_inner.y;if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this10.zpp_inner,tmp5;if(_this14._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this14._isimmutable&&_this14._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this10.zpp_inner;if(null!=_this15._validate&&_this15._validate(),_this10.zpp_inner.x==x){if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=_this10.zpp_inner;null!=_this16._validate&&_this16._validate(),tmp5=_this10.zpp_inner.y==y}else tmp5=!1;if(!tmp5){_this10.zpp_inner.x=x,_this10.zpp_inner.y=y;var _this17=_this10.zpp_inner;null!=_this17._invalidate&&_this17._invalidate(_this17)}var ret=_this10;if(min.zpp_inner.weak){if(null!=min&&min.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=min.zpp_inner;if(_this18._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this18._isimmutable&&_this18._isimmutable(),min.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=min.zpp_inner;min.zpp_inner.outer=null,min.zpp_inner=null;var o=min;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this.zpp_inner.getmin()},Object.defineProperty(nape.geom.AABB.prototype,"max",{get:nape.geom.AABB.prototype.get_max,set:nape.geom.AABB.prototype.set_max}),nape.geom.AABB.prototype.get_max=function(){return this.zpp_inner.getmax()},nape.geom.AABB.prototype.set_max=function(max){if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");if(null==max)throw new js._Boot.HaxeError("Error: Cannot assign null to AABB::max");var tmp,_this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=this.zpp_inner.minx,_this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),tmp1==this.zpp_inner.minx){var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.miny,_this3=this.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp=tmp2!=this.zpp_inner.miny}else tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: AABB::max components cannot be NaN");if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=max.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp3=max.zpp_inner.x,_this5=this.zpp_inner.getmin();if(null!=_this5&&_this5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this5.zpp_inner;if(null!=_this6._validate&&_this6._validate(),tmp3<_this5.zpp_inner.x)throw new js._Boot.HaxeError("Error: Assignment would cause negative width");if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=max.zpp_inner;null!=_this7._validate&&_this7._validate();var tmp4=max.zpp_inner.y,_this8=this.zpp_inner.getmin();if(null!=_this8&&_this8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_this8.zpp_inner;if(null!=_this9._validate&&_this9._validate(),tmp4<_this8.zpp_inner.y)throw new js._Boot.HaxeError("Error: Assignment would cause negative height");var _this10=this.zpp_inner.getmax();if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=_this10.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),null==max)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=max.zpp_inner;null!=_this12._validate&&_this12._validate();var x=max.zpp_inner.x;if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=max.zpp_inner;null!=_this13._validate&&_this13._validate();var y=max.zpp_inner.y;if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this10.zpp_inner,tmp5;if(_this14._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this14._isimmutable&&_this14._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this10.zpp_inner;if(null!=_this15._validate&&_this15._validate(),_this10.zpp_inner.x==x){if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=_this10.zpp_inner;null!=_this16._validate&&_this16._validate(),tmp5=_this10.zpp_inner.y==y}else tmp5=!1;if(!tmp5){_this10.zpp_inner.x=x,_this10.zpp_inner.y=y;var _this17=_this10.zpp_inner;null!=_this17._invalidate&&_this17._invalidate(_this17)}var ret=_this10;if(max.zpp_inner.weak){if(null!=max&&max.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=max.zpp_inner;if(_this18._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this18._isimmutable&&_this18._isimmutable(),max.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=max.zpp_inner;max.zpp_inner.outer=null,max.zpp_inner=null;var o=max;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this.zpp_inner.getmax()},Object.defineProperty(nape.geom.AABB.prototype,"x",{get:nape.geom.AABB.prototype.get_x,set:nape.geom.AABB.prototype.set_x}),nape.geom.AABB.prototype.get_x=function(){var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.minx},nape.geom.AABB.prototype.set_x=function(x){if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");var _this=this.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_inner.minx!=x){if(x!=x)throw new js._Boot.HaxeError("Error: AABB::x cannot be NaN");this.zpp_inner.maxx+=x-this.zpp_inner.minx,this.zpp_inner.minx=x;var _this1=this.zpp_inner;null!=_this1._invalidate&&_this1._invalidate(_this1)}var _this2=this.zpp_inner;return null!=_this2._validate&&_this2._validate(),this.zpp_inner.minx},Object.defineProperty(nape.geom.AABB.prototype,"y",{get:nape.geom.AABB.prototype.get_y,set:nape.geom.AABB.prototype.set_y}),nape.geom.AABB.prototype.get_y=function(){var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.miny},nape.geom.AABB.prototype.set_y=function(y){if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");var _this=this.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_inner.miny!=y){if(y!=y)throw new js._Boot.HaxeError("Error: AABB::y cannot be NaN");this.zpp_inner.maxy+=y-this.zpp_inner.miny,this.zpp_inner.miny=y;var _this1=this.zpp_inner;null!=_this1._invalidate&&_this1._invalidate(_this1)}var _this2=this.zpp_inner;return null!=_this2._validate&&_this2._validate(),this.zpp_inner.miny},Object.defineProperty(nape.geom.AABB.prototype,"width",{get:nape.geom.AABB.prototype.get_width,set:nape.geom.AABB.prototype.set_width}),nape.geom.AABB.prototype.get_width=function(){var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var _this1=this.zpp_inner;return _this1.maxx-_this1.minx},nape.geom.AABB.prototype.set_width=function(width){if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var _this1=this.zpp_inner;if(_this1.maxx-_this1.minx!=width){if(width!=width)throw new js._Boot.HaxeError("Error: AABB::width cannot be NaN");if(width<0)throw new js._Boot.HaxeError("Error: AABB::width ("+width+") must be >= 0");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate(),this.zpp_inner.maxx=this.zpp_inner.minx+width;var _this3=this.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var _this5=this.zpp_inner;return _this5.maxx-_this5.minx},Object.defineProperty(nape.geom.AABB.prototype,"height",{get:nape.geom.AABB.prototype.get_height,set:nape.geom.AABB.prototype.set_height}),nape.geom.AABB.prototype.get_height=function(){var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var _this1=this.zpp_inner;return _this1.maxy-_this1.miny},nape.geom.AABB.prototype.set_height=function(height){if(this.zpp_inner._immutable)throw new js._Boot.HaxeError("Error: AABB is immutable");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var _this1=this.zpp_inner;if(_this1.maxy-_this1.miny!=height){if(height!=height)throw new js._Boot.HaxeError("Error: AABB::height cannot be NaN");if(height<0)throw new js._Boot.HaxeError("Error: AABB::height ("+height+") must be >= 0");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate(),this.zpp_inner.maxy=this.zpp_inner.miny+height;var _this3=this.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var _this5=this.zpp_inner;return _this5.maxy-_this5.miny},nape.geom.AABB.prototype.toString=function(){var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.toString()},nape.geom.AABB.prototype.__class__=nape.geom.AABB,nape.geom.ConvexResult=$hxClasses["nape.geom.ConvexResult"]=function(){if(this.zpp_inner=null,!zpp_nape.geom.ZPP_ConvexRayResult.internal)throw new js._Boot.HaxeError("Error: ConvexResult cannot be instantiated derp!")},nape.geom.ConvexResult.__name__=["nape","geom","ConvexResult"],nape.geom.ConvexResult.prototype.zpp_inner=null,Object.defineProperty(nape.geom.ConvexResult.prototype,"normal",{get:nape.geom.ConvexResult.prototype.get_normal}),nape.geom.ConvexResult.prototype.get_normal=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},Object.defineProperty(nape.geom.ConvexResult.prototype,"position",{get:nape.geom.ConvexResult.prototype.get_position}),nape.geom.ConvexResult.prototype.get_position=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.position},Object.defineProperty(nape.geom.ConvexResult.prototype,"toi",{get:nape.geom.ConvexResult.prototype.get_toi}),nape.geom.ConvexResult.prototype.get_toi=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},Object.defineProperty(nape.geom.ConvexResult.prototype,"shape",{get:nape.geom.ConvexResult.prototype.get_shape}),nape.geom.ConvexResult.prototype.get_shape=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},nape.geom.ConvexResult.prototype.dispose=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},nape.geom.ConvexResult.prototype.toString=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return"{ shape: "+Std.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},nape.geom.ConvexResult.prototype.__class__=nape.geom.ConvexResult,nape.geom.ConvexResultIterator=$hxClasses["nape.geom.ConvexResultIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ConvexResultList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ConvexResultIterator derp!")},nape.geom.ConvexResultIterator.__name__=["nape","geom","ConvexResultIterator"],nape.geom.ConvexResultIterator.get=function(list){var ret;if(null==nape.geom.ConvexResultIterator.zpp_pool){zpp_nape.util.ZPP_ConvexResultList.internal=!0;var ret1=new nape.geom.ConvexResultIterator;zpp_nape.util.ZPP_ConvexResultList.internal=!1,ret=ret1}else{var r=nape.geom.ConvexResultIterator.zpp_pool;nape.geom.ConvexResultIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.geom.ConvexResultIterator.prototype.zpp_inner=null,nape.geom.ConvexResultIterator.prototype.zpp_i=null,nape.geom.ConvexResultIterator.prototype.zpp_critical=null,nape.geom.ConvexResultIterator.prototype.zpp_next=null,nape.geom.ConvexResultIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.geom.ConvexResultIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.geom.ConvexResultIterator.prototype.__class__=nape.geom.ConvexResultIterator,nape.geom.ConvexResultList=$hxClasses["nape.geom.ConvexResultList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ConvexResultList,this.zpp_inner.outer=this},nape.geom.ConvexResultList.__name__=["nape","geom","ConvexResultList"],nape.geom.ConvexResultList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.geom.ConvexResultList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.geom.ConvexResultList.prototype.zpp_inner=null,Object.defineProperty(nape.geom.ConvexResultList.prototype,"length",{get:nape.geom.ConvexResultList.prototype.get_length}),nape.geom.ConvexResultList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.geom.ConvexResultList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj)},nape.geom.ConvexResultList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},nape.geom.ConvexResultList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.ConvexResultList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj)}else this.zpp_inner.inner.add(obj);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.ConvexResultList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=ret=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret},nape.geom.ConvexResultList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=ret=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret},nape.geom.ConvexResultList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.geom.ConvexResultList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj),this.zpp_inner.invalidate()),ret},nape.geom.ConvexResultList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ConvexResultList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.geom.ConvexResultList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.geom.ConvexResultList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.geom.ConvexResultIterator.get(this)},nape.geom.ConvexResultList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.geom.ConvexResultList;this.zpp_inner.valmod();for(var _g=nape.geom.ConvexResultIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: ConvexResult is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.geom.ConvexResultList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.geom.ConvexResultIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.geom.ConvexResultList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.geom.ConvexResultIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.geom.ConvexResultList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.geom.ConvexResultIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.geom.ConvexResultIterator.zpp_pool,nape.geom.ConvexResultIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.geom.ConvexResultList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.geom.ConvexResultList.prototype.__class__=nape.geom.ConvexResultList,nape.geom.Geom=$hxClasses["nape.geom.Geom"]=function(){},nape.geom.Geom.__name__=["nape","geom","Geom"],nape.geom.Geom.distanceBody=function(body1,body2,out1,out2){if(null!=out1&&out1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=out2&&out2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=out1.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");null!=_this._isimmutable&&_this._isimmutable();var _this1=out2.zpp_inner,tmp,_this2,_this3;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");(null!=_this1._isimmutable&&_this1._isimmutable(),null!=body1.zpp_inner.wrap_shapes.zpp_inner.inner.head)?tmp=null==body2.zpp_inner.wrap_shapes.zpp_inner.inner.head:tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: Bodies cannot be empty in calculating distances");for(var cx_ite=body1.zpp_inner.shapes.head;null!=cx_ite;){var i=cx_ite.elt;zpp_nape.geom.ZPP_Geom.validateShape(i),cx_ite=cx_ite.next}for(var cx_ite1=body2.zpp_inner.shapes.head;null!=cx_ite1;){var i1=cx_ite1.elt;zpp_nape.geom.ZPP_Geom.validateShape(i1),cx_ite1=cx_ite1.next}return zpp_nape.geom.ZPP_SweepDistance.distanceBody(body1.zpp_inner,body2.zpp_inner,out1.zpp_inner,out2.zpp_inner)},nape.geom.Geom.distance=function(shape1,shape2,out1,out2){if(null!=out1&&out1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=out2&&out2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=out1.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");null!=_this._isimmutable&&_this._isimmutable();var _this1=out2.zpp_inner,tmp;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==(null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null)||null==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape must be part of a Body to calculate distances");zpp_nape.geom.ZPP_Geom.validateShape(shape1.zpp_inner),zpp_nape.geom.ZPP_Geom.validateShape(shape2.zpp_inner),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?tmp=new zpp_nape.geom.ZPP_Vec2:(tmp=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=tmp.next,tmp.next=null),tmp.weak=!1;var s1=shape1.zpp_inner,s2=shape2.zpp_inner,w1=out1.zpp_inner,w2=out2.zpp_inner,upperBound=1e100,ret;if(null==upperBound&&(upperBound=1e100),0==s1.type&&0==s2.type){var c1=s1.circle,c2=s2.circle,dist,nx=0,ny=0;nx=c2.worldCOMx-c1.worldCOMx,ny=c2.worldCOMy-c1.worldCOMy;var len=Math.sqrt(nx*nx+ny*ny);if((dist=len-(c1.radius+c2.radius))<upperBound){if(0==len)nx=1,ny=0;else{var t=1/len;nx*=t,ny*=t}var t1=c1.radius;w1.x=c1.worldCOMx+nx*t1,w1.y=c1.worldCOMy+ny*t1;var t2=-c2.radius;w2.x=c2.worldCOMx+nx*t2,w2.y=c2.worldCOMy+ny*t2,tmp.x=nx,tmp.y=ny}ret=dist}else{var swapped=!1;if(0==s1.type&&1==s2.type){var tmp1=s1;s1=s2,s2=tmp1;var tmp2=w1;w1=w2,w2=tmp2,swapped=!0}if(1==s1.type&&0==s2.type){for(var poly=s1.polygon,circle=s2.circle,best=-1e100,a0=null,cx_ite=poly.edges.head;null!=cx_ite;){var a=cx_ite.elt,dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>upperBound){best=dist1;break}dist1>0?dist1>best&&(best=dist1,a0=a):best<0&&dist1>best&&(best=dist1,a0=a),cx_ite=cx_ite.next}if(best<upperBound){var v0=a0.gp0,v1=a0.gp1,dt=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx1=0,ny1=0;nx1=circle.worldCOMx-v0.x,ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx1*nx1+ny1*ny1);if((best=len1-circle.radius)<upperBound){if(0==len1)nx1=1,ny1=0;else{var t3=1/len1;nx1*=t3,ny1*=t3}var t4=0;w1.x=v0.x+0*nx1,w1.y=v0.y+0*ny1;var t5=-circle.radius;w2.x=circle.worldCOMx+nx1*t5,w2.y=circle.worldCOMy+ny1*t5,tmp.x=nx1,tmp.y=ny1}}else if(dt>=v1.y*a0.gnormx-v1.x*a0.gnormy){var nx2=0,ny2=0;nx2=circle.worldCOMx-v1.x,ny2=circle.worldCOMy-v1.y;var len2=Math.sqrt(nx2*nx2+ny2*ny2);if((best=len2-circle.radius)<upperBound){if(0==len2)nx2=1,ny2=0;else{var t6=1/len2;nx2*=t6,ny2*=t6}var t7=0;w1.x=v1.x+0*nx2,w1.y=v1.y+0*ny2;var t8=-circle.radius;w2.x=circle.worldCOMx+nx2*t8,w2.y=circle.worldCOMy+ny2*t8,tmp.x=nx2,tmp.y=ny2}}else{var t9=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t9,w2.y=circle.worldCOMy+a0.gnormy*t9;var t10=-best;w1.x=w2.x+a0.gnormx*t10,w1.y=w2.y+a0.gnormy*t10,tmp.x=a0.gnormx,tmp.y=a0.gnormy}}swapped&&(tmp.x=-tmp.x,tmp.y=-tmp.y),ret=best}else{for(var p1=s1.polygon,p2=s2.polygon,best1=-1e100,a1=null,a2=null,besti=0,cx_ite1=p1.edges.head;null!=cx_ite1;){for(var a3=cx_ite1.elt,min=1e100,cx_ite2=p2.gverts.next;null!=cx_ite2;){var v=cx_ite2,k=a3.gnormx*v.x+a3.gnormy*v.y;k<min&&(min=k),cx_ite2=cx_ite2.next}if((min-=a3.gprojection)>upperBound){best1=min;break}min>0?min>best1&&(best1=min,a1=a3,besti=1):best1<0&&min>best1&&(best1=min,a1=a3,besti=1),cx_ite1=cx_ite1.next}if(best1<upperBound){for(var cx_ite3=p2.edges.head;null!=cx_ite3;){for(var a4=cx_ite3.elt,min1=1e100,cx_ite4=p1.gverts.next;null!=cx_ite4;){var v2=cx_ite4,k1=a4.gnormx*v2.x+a4.gnormy*v2.y;k1<min1&&(min1=k1),cx_ite4=cx_ite4.next}if((min1-=a4.gprojection)>upperBound){best1=min1;break}min1>0?min1>best1&&(best1=min1,a2=a4,besti=2):best1<0&&min1>best1&&(best1=min1,a2=a4,besti=2),cx_ite3=cx_ite3.next}if(best1<upperBound){var q1,q2,ax;if(1==besti)q1=p1,q2=p2,ax=a1;else{q1=p2,q2=p1,ax=a2;var tmp3=w1;w1=w2,w2=tmp3,swapped=!swapped}for(var ay=null,min2=1e100,cx_ite5=q2.edges.head;null!=cx_ite5;){var a5=cx_ite5.elt,k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;k2<min2&&(min2=k2,ay=a5),cx_ite5=cx_ite5.next}if(swapped?(tmp.x=-ax.gnormx,tmp.y=-ax.gnormy):(tmp.x=ax.gnormx,tmp.y=ax.gnormy),best1>=0){var v01=ax.gp0,v11=ax.gp1,q0=ay.gp0,q11=ay.gp1,vx=0,vy=0,qx=0,qy=0,vdot=1/((vx=v11.x-v01.x)*vx+(vy=v11.y-v01.y)*vy),qdot=1/((qx=q11.x-q0.x)*qx+(qy=q11.y-q0.y)*qy),t11=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot,t21=-(vx*(v01.x-q11.x)+vy*(v01.y-q11.y))*vdot,s11=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot,s21=-(qx*(q0.x-v11.x)+qy*(q0.y-v11.y))*qdot;t11<0?t11=0:t11>1&&(t11=1),t21<0?t21=0:t21>1&&(t21=1),s11<0?s11=0:s11>1&&(s11=1),s21<0?s21=0:s21>1&&(s21=1);var f1x=0,f1y=0,t12=t11;f1x=v01.x+vx*t12,f1y=v01.y+vy*t12;var f2x=0,f2y=0,t13=t21;f2x=v01.x+vx*t13,f2y=v01.y+vy*t13;var g1x=0,g1y=0,t14=s11;g1x=q0.x+qx*t14,g1y=q0.y+qy*t14;var g2x=0,g2y=0,t15=s21;g2x=q0.x+qx*t15,g2y=q0.y+qy*t15;var dx=0,dy=0,d1=(dx=f1x-q0.x)*dx+(dy=f1y-q0.y)*dy,dx1=0,dy1=0,d2=(dx1=f2x-q11.x)*dx1+(dy1=f2y-q11.y)*dy1,dx2=0,dy2=0,e1=(dx2=g1x-v01.x)*dx2+(dy2=g1y-v01.y)*dy2,dx3=0,dy3=0,e2=(dx3=g2x-v11.x)*dx3+(dy3=g2y-v11.y)*dy3,minfx=0,minfy=0,minq=null;d1<d2?(minfx=f1x,minfy=f1y,minq=q0):(minfx=f2x,minfy=f2y,minq=q11,d1=d2);var mingx=0,mingy=0,minv=null;if(e1<e2?(mingx=g1x,mingy=g1y,minv=v01):(mingx=g2x,mingy=g2y,minv=v11,e1=e2),d1<e1?(w1.x=minfx,w1.y=minfy,w2.x=minq.x,w2.y=minq.y,best1=Math.sqrt(d1)):(w2.x=mingx,w2.y=mingy,w1.x=minv.x,w1.y=minv.y,best1=Math.sqrt(e1)),0!=best1){tmp.x=w2.x-w1.x,tmp.y=w2.y-w1.y;var t16=1/best1;tmp.x*=t16,tmp.y*=t16,swapped&&(tmp.x=-tmp.x,tmp.y=-tmp.y)}ret=best1}else{var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y,d11=ax.gnormy*c1x-ax.gnormx*c1y,den=1/(d11-d0),t17=(-ax.tp1-d0)*den;if(t17>nape.Config.epsilon){var t18=t17;c0x+=dvx*t17,c0y+=dvy*t17}var t19=(-ax.tp0-d11)*den;if(t19<-nape.Config.epsilon){var t20=t19;c1x+=dvx*t19,c1y+=dvy*t19}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection,c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x,w2.y=c0y;var t22=-c0d;w1.x=w2.x+ax.gnormx*t22,w1.y=w2.y+ax.gnormy*t22,ret=c0d}else{w2.x=c1x,w2.y=c1y;var t23=-c1d;w1.x=w2.x+ax.gnormx*t23,w1.y=w2.y+ax.gnormy*t23,ret=c1d}}}else ret=upperBound}else ret=upperBound}}var o=tmp;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret},nape.geom.Geom.intersectsBody=function(body1,body2){var tmp,_this,_this1;null!=body1.zpp_inner.wrap_shapes.zpp_inner.inner.head?tmp=null==body2.zpp_inner.wrap_shapes.zpp_inner.inner.head:tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: Bodies must have shapes to test for intersection.");for(var cx_ite=body1.zpp_inner.shapes.head;null!=cx_ite;){var i=cx_ite.elt;zpp_nape.geom.ZPP_Geom.validateShape(i),cx_ite=cx_ite.next}for(var cx_ite1=body2.zpp_inner.shapes.head;null!=cx_ite1;){var i1=cx_ite1.elt;zpp_nape.geom.ZPP_Geom.validateShape(i1),cx_ite1=cx_ite1.next}var _this2=body1.zpp_inner.aabb,x=body2.zpp_inner.aabb;if(x.miny<=_this2.maxy&&_this2.miny<=x.maxy&&x.minx<=_this2.maxx&&_this2.minx<=x.maxx){for(var cx_ite2=body1.zpp_inner.shapes.head;null!=cx_ite2;){for(var s1=cx_ite2.elt,cx_ite3=body2.zpp_inner.shapes.head;null!=cx_ite3;){var s2=cx_ite3.elt;if(zpp_nape.geom.ZPP_Collide.testCollide_safe(s1,s2))return!0;cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}return!1}return!1},nape.geom.Geom.intersects=function(shape1,shape2){if(null==(null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null)||null==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape must be part of a Body to calculate intersection");zpp_nape.geom.ZPP_Geom.validateShape(shape1.zpp_inner),zpp_nape.geom.ZPP_Geom.validateShape(shape2.zpp_inner);var _this=shape1.zpp_inner.aabb,x=shape2.zpp_inner.aabb;return x.miny<=_this.maxy&&_this.miny<=x.maxy&&x.minx<=_this.maxx&&_this.minx<=x.maxx&&zpp_nape.geom.ZPP_Collide.testCollide_safe(shape1.zpp_inner,shape2.zpp_inner)},nape.geom.Geom.contains=function(shape1,shape2){if(null==(null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null)||null==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape must be part of a Body to calculate containment");return zpp_nape.geom.ZPP_Geom.validateShape(shape1.zpp_inner),zpp_nape.geom.ZPP_Geom.validateShape(shape2.zpp_inner),zpp_nape.geom.ZPP_Collide.containTest(shape1.zpp_inner,shape2.zpp_inner)},nape.geom.Geom.prototype.__class__=nape.geom.Geom,nape.geom.GeomPoly=$hxClasses["nape.geom.GeomPoly"]=function(vertices){if(this.zpp_inner=null,this.zpp_pool=null,this.zpp_inner=new zpp_nape.geom.ZPP_GeomPoly(this),null!=vertices){if(vertices instanceof Array)for(var lv=vertices,_g=0;_g<lv.length;){var vite=lv[_g];if(++_g,null==vite)throw new js._Boot.HaxeError("Error: Array<Vec2> contains null objects");if(!(vite instanceof nape.geom.Vec2))throw new js._Boot.HaxeError("Error: Array<Vec2> contains non Vec2 objects");var v=vite;if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=v.zpp_inner;null!=_this._validate&&_this._validate();var x=v.zpp_inner.x;if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=v.zpp_inner;null!=_this1._validate&&_this1._validate();var y=v.zpp_inner.y,ret;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret=new zpp_nape.geom.ZPP_GeomVert:(ret=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.forced=!1,ret.x=x,ret.y=y;var obj=ret;null==this.zpp_inner.vertices?this.zpp_inner.vertices=obj.prev=obj.next=obj:(obj.prev=this.zpp_inner.vertices,obj.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=obj,this.zpp_inner.vertices.next=obj),this.zpp_inner.vertices=obj}else if(vertices instanceof nape.geom.Vec2List)for(var lv1,_g1=vertices.iterator();;){_g1.zpp_inner.zpp_inner.valmod();var length=_g1.zpp_inner.zpp_gl(),tmp;if(_g1.zpp_critical=!0,_g1.zpp_i<length?tmp=!0:(_g1.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp=!1),!tmp)break;_g1.zpp_critical=!1;var v1=_g1.zpp_inner.at(_g1.zpp_i++);if(null==v1)throw new js._Boot.HaxeError("Error: Vec2List contains null objects");if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=v1.zpp_inner;null!=_this2._validate&&_this2._validate();var x1=v1.zpp_inner.x;if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=v1.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=v1.zpp_inner.y,ret1;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x1,ret1.y=y1;var obj1=ret1;null==this.zpp_inner.vertices?this.zpp_inner.vertices=obj1.prev=obj1.next=obj1:(obj1.prev=this.zpp_inner.vertices,obj1.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=obj1,this.zpp_inner.vertices.next=obj1),this.zpp_inner.vertices=obj1}else{if(!(vertices instanceof nape.geom.GeomPoly))throw new js._Boot.HaxeError("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");var lv2=vertices;if(null!=lv2&&lv2.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var verts=lv2.zpp_inner.vertices;if(null!=verts)for(var vite1=verts;;){var x2=vite1.x,y2=vite1.y,ret2;if(null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=x2,ret3.y=y2,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret2.zpp_inner,tmp1;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret2.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret2.zpp_inner.x==x2){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret2.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp1=ret2.zpp_inner.y==y2}else tmp1=!1;if(!tmp1){ret2.zpp_inner.x=x2,ret2.zpp_inner.y=y2;var _this7=ret2.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret2.zpp_inner.weak=!1;var v2=ret2;if(vite1=vite1.next,null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=v2.zpp_inner;null!=_this8._validate&&_this8._validate();var x3=v2.zpp_inner.x;if(null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=v2.zpp_inner;null!=_this9._validate&&_this9._validate();var y3=v2.zpp_inner.y,ret4;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret4=new zpp_nape.geom.ZPP_GeomVert:(ret4=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret4.next,ret4.next=null),ret4.forced=!1,ret4.x=x3,ret4.y=y3;var obj2=ret4;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=obj2.prev=obj2.next=obj2:(obj2.prev=this.zpp_inner.vertices,obj2.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=obj2,this.zpp_inner.vertices.next=obj2),this.zpp_inner.vertices=obj2,null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=v2.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),v2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=v2.zpp_inner;v2.zpp_inner.outer=null,v2.zpp_inner=null;var o=v2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;if(null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,vite1==verts)break}}if(this.skipForward(1),vertices instanceof Array)for(var lv3=vertices,i=0;i<lv3.length;){var cur=lv3[i],tmp2;if(cur.zpp_inner.weak){if(null!=cur&&cur.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=cur.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),cur.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=cur.zpp_inner;cur.zpp_inner.outer=null,cur.zpp_inner=null;var o2=cur;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3,tmp2=!0}else tmp2=!1;tmp2?lv3.splice(i,1):++i}else if(vertices instanceof nape.geom.Vec2List){var lv4=vertices;null!=lv4.zpp_inner._validate&&lv4.zpp_inner._validate();for(var ins=lv4.zpp_inner.inner,pre=null,cur1=ins.head;null!=cur1;){var x4=cur1.elt;if(x4.outer.zpp_inner.weak){if(cur1=ins.erase(pre),x4.outer.zpp_inner.weak){var _this12=x4.outer;if(null!=_this12&&_this12.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this12.zpp_inner;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),_this12.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=_this12.zpp_inner;_this12.zpp_inner.outer=null,_this12.zpp_inner=null;var o4=_this12;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}}else pre=cur1,cur1=cur1.next}}}},nape.geom.GeomPoly.__name__=["nape","geom","GeomPoly"],nape.geom.GeomPoly.get=function(vertices){var ret;if(null==zpp_nape.util.ZPP_PubPool.poolGeomPoly?ret=new nape.geom.GeomPoly:(ret=zpp_nape.util.ZPP_PubPool.poolGeomPoly,zpp_nape.util.ZPP_PubPool.poolGeomPoly=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextGeomPoly&&(zpp_nape.util.ZPP_PubPool.nextGeomPoly=null)),null!=vertices){if(vertices instanceof Array)for(var lv=vertices,_g=0;_g<lv.length;){var vite=lv[_g];if(++_g,null==vite)throw new js._Boot.HaxeError("Error: Array<Vec2> contains null objects");if(!(vite instanceof nape.geom.Vec2))throw new js._Boot.HaxeError("Error: Array<Vec2> contains non Vec2 objects");var v=vite;if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=v.zpp_inner;null!=_this._validate&&_this._validate();var x=v.zpp_inner.x;if(null!=v&&v.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=v.zpp_inner;null!=_this1._validate&&_this1._validate();var y=v.zpp_inner.y,ret1;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x,ret1.y=y;var obj=ret1;null==ret.zpp_inner.vertices?ret.zpp_inner.vertices=obj.prev=obj.next=obj:(obj.prev=ret.zpp_inner.vertices,obj.next=ret.zpp_inner.vertices.next,ret.zpp_inner.vertices.next.prev=obj,ret.zpp_inner.vertices.next=obj),ret.zpp_inner.vertices=obj}else if(vertices instanceof nape.geom.Vec2List)for(var lv1,_g1=vertices.iterator();;){_g1.zpp_inner.zpp_inner.valmod();var length=_g1.zpp_inner.zpp_gl(),tmp;if(_g1.zpp_critical=!0,_g1.zpp_i<length?tmp=!0:(_g1.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp=!1),!tmp)break;_g1.zpp_critical=!1;var v1=_g1.zpp_inner.at(_g1.zpp_i++);if(null==v1)throw new js._Boot.HaxeError("Error: Vec2List contains null objects");if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=v1.zpp_inner;null!=_this2._validate&&_this2._validate();var x1=v1.zpp_inner.x;if(null!=v1&&v1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=v1.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=v1.zpp_inner.y,ret2;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret2=new zpp_nape.geom.ZPP_GeomVert:(ret2=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret2.next,ret2.next=null),ret2.forced=!1,ret2.x=x1,ret2.y=y1;var obj1=ret2;null==ret.zpp_inner.vertices?ret.zpp_inner.vertices=obj1.prev=obj1.next=obj1:(obj1.prev=ret.zpp_inner.vertices,obj1.next=ret.zpp_inner.vertices.next,ret.zpp_inner.vertices.next.prev=obj1,ret.zpp_inner.vertices.next=obj1),ret.zpp_inner.vertices=obj1}else{if(!(vertices instanceof nape.geom.GeomPoly))throw new js._Boot.HaxeError("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");var lv2=vertices;if(null!=lv2&&lv2.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var verts=lv2.zpp_inner.vertices;if(null!=verts)for(var vite1=verts;;){var x2=vite1.x,y2=vite1.y,ret3;if(null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret3=new nape.geom.Vec2:(ret3=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret3.zpp_pool,ret3.zpp_pool=null,ret3.zpp_disp=!1,ret3==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret3.zpp_inner){var ret4;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret4=new zpp_nape.geom.ZPP_Vec2:(ret4=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret4.next,ret4.next=null),ret4.weak=!1,ret4._immutable=!1,ret4.x=x2,ret4.y=y2,ret3.zpp_inner=ret4,ret3.zpp_inner.outer=ret3}else{if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret3.zpp_inner,tmp1;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret3.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret3.zpp_inner.x==x2){if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret3.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp1=ret3.zpp_inner.y==y2}else tmp1=!1;if(!tmp1){ret3.zpp_inner.x=x2,ret3.zpp_inner.y=y2;var _this7=ret3.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret3.zpp_inner.weak=!1;var v2=ret3;if(vite1=vite1.next,null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=v2.zpp_inner;null!=_this8._validate&&_this8._validate();var x3=v2.zpp_inner.x;if(null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=v2.zpp_inner;null!=_this9._validate&&_this9._validate();var y3=v2.zpp_inner.y,ret5;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret5=new zpp_nape.geom.ZPP_GeomVert:(ret5=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret5.next,ret5.next=null),ret5.forced=!1,ret5.x=x3,ret5.y=y3;var obj2=ret5;if(null==ret.zpp_inner.vertices?ret.zpp_inner.vertices=obj2.prev=obj2.next=obj2:(obj2.prev=ret.zpp_inner.vertices,obj2.next=ret.zpp_inner.vertices.next,ret.zpp_inner.vertices.next.prev=obj2,ret.zpp_inner.vertices.next=obj2),ret.zpp_inner.vertices=obj2,null!=v2&&v2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=v2.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),v2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=v2.zpp_inner;v2.zpp_inner.outer=null,v2.zpp_inner=null;var o=v2;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;if(null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,vite1==verts)break}}if(ret.skipForward(1),vertices instanceof Array)for(var lv3=vertices,i=0;i<lv3.length;){var cur=lv3[i],tmp2;if(cur.zpp_inner.weak){if(null!=cur&&cur.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=cur.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),cur.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=cur.zpp_inner;cur.zpp_inner.outer=null,cur.zpp_inner=null;var o2=cur;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3,tmp2=!0}else tmp2=!1;tmp2?lv3.splice(i,1):++i}else if(vertices instanceof nape.geom.Vec2List){var lv4=vertices;null!=lv4.zpp_inner._validate&&lv4.zpp_inner._validate();for(var ins=lv4.zpp_inner.inner,pre=null,cur1=ins.head;null!=cur1;){var x4=cur1.elt;if(x4.outer.zpp_inner.weak){if(cur1=ins.erase(pre),x4.outer.zpp_inner.weak){var _this12=x4.outer;if(null!=_this12&&_this12.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this12.zpp_inner;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),_this12.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=_this12.zpp_inner;_this12.zpp_inner.outer=null,_this12.zpp_inner=null;var o4=_this12;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}}else pre=cur1,cur1=cur1.next}}}return ret},nape.geom.GeomPoly.prototype.zpp_pool=null,nape.geom.GeomPoly.prototype.zpp_disp=null,nape.geom.GeomPoly.prototype.zpp_inner=null,nape.geom.GeomPoly.prototype.empty=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices},nape.geom.GeomPoly.prototype.size=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var ret=0,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var i=nite;if(++ret,(nite=nite.next)==L)break}return ret},nape.geom.GeomPoly.prototype.iterator=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return zpp_nape.geom.ZPP_GeomVertexIterator.get(this.zpp_inner.vertices,!0)},nape.geom.GeomPoly.prototype.forwardIterator=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return zpp_nape.geom.ZPP_GeomVertexIterator.get(this.zpp_inner.vertices,!0)},nape.geom.GeomPoly.prototype.backwardsIterator=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return zpp_nape.geom.ZPP_GeomVertexIterator.get(this.zpp_inner.vertices,!1)},nape.geom.GeomPoly.prototype.current=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: GeomPoly is empty");var _this=this.zpp_inner.vertices;if(null==_this.wrap){var x=_this.x,y=_this.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner,tmp;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;if(null!=_this2._validate&&_this2._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this4=ret.zpp_inner;null!=_this4._invalidate&&_this4._invalidate(_this4)}}ret.zpp_inner.weak=!1,_this.wrap=ret,_this.wrap.zpp_inner._inuse=!0,_this.wrap.zpp_inner._invalidate=$bind(_this,_this.modwrap),_this.wrap.zpp_inner._validate=$bind(_this,_this.getwrap)}return _this.wrap},nape.geom.GeomPoly.prototype.push=function(vertex){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vertex)throw new js._Boot.HaxeError("Error: Cannot push null vertex");if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=vertex.zpp_inner;null!=_this._validate&&_this._validate();var x=vertex.zpp_inner.x;if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vertex.zpp_inner;null!=_this1._validate&&_this1._validate();var y=vertex.zpp_inner.y,ret;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret=new zpp_nape.geom.ZPP_GeomVert:(ret=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.forced=!1,ret.x=x,ret.y=y;var obj=ret;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=obj.prev=obj.next=obj:(obj.prev=this.zpp_inner.vertices,obj.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=obj,this.zpp_inner.vertices.next=obj),this.zpp_inner.vertices=obj,vertex.zpp_inner.weak){if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vertex.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),vertex.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vertex.zpp_inner;vertex.zpp_inner.outer=null,vertex.zpp_inner=null;var o=vertex;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.geom.GeomPoly.prototype.pop=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: Cannot pop from empty polygon");var retv=this.zpp_inner.vertices,tmp;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,tmp=null;else{var retnodes=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,tmp=retnodes}this.zpp_inner.vertices=tmp;var o=retv;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}return o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o,this},nape.geom.GeomPoly.prototype.unshift=function(vertex){if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vertex)throw new js._Boot.HaxeError("Error: Cannot unshift null vertex");if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=vertex.zpp_inner;null!=_this._validate&&_this._validate();var x=vertex.zpp_inner.x;if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vertex.zpp_inner;null!=_this1._validate&&_this1._validate();var y=vertex.zpp_inner.y,ret;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret=new zpp_nape.geom.ZPP_GeomVert:(ret=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.forced=!1,ret.x=x,ret.y=y;var obj=ret;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=obj.prev=obj.next=obj:(obj.next=this.zpp_inner.vertices,obj.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.prev.next=obj,this.zpp_inner.vertices.prev=obj),this.zpp_inner.vertices=obj,vertex.zpp_inner.weak){if(null!=vertex&&vertex.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vertex.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),vertex.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vertex.zpp_inner;vertex.zpp_inner.outer=null,vertex.zpp_inner=null;var o=vertex;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.geom.GeomPoly.prototype.shift=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: Cannot shift from empty polygon");var retv=this.zpp_inner.vertices,tmp;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,tmp=this.zpp_inner.vertices=null;else{var retnodes=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,tmp=retnodes}this.zpp_inner.vertices=tmp;var o=retv;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}return o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o,this},nape.geom.GeomPoly.prototype.skipForward=function(times){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null!=this.zpp_inner.vertices)if(times>0)for(;times-- >0;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(times<0)for(;times++<0;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},nape.geom.GeomPoly.prototype.skipBackwards=function(times){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return this.skipForward(-times)},nape.geom.GeomPoly.prototype.erase=function(count){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");for(;0!=count&&null!=this.zpp_inner.vertices;){var retv=this.zpp_inner.vertices;if(count>0){var tmp;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,tmp=this.zpp_inner.vertices=null;else{var retnodes=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,tmp=retnodes}this.zpp_inner.vertices=tmp,--count}else if(count<0){var tmp1;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,tmp1=null;else{var retnodes1=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,tmp1=retnodes1}this.zpp_inner.vertices=tmp1,++count}var o=retv;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o}return this},nape.geom.GeomPoly.prototype.clear=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");for(;null!=this.zpp_inner.vertices;){var tmp=this.zpp_inner.vertices,tmp1;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,tmp1=this.zpp_inner.vertices=null;else{var retnodes=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,tmp1=retnodes}this.zpp_inner.vertices=tmp1;var o=tmp;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o}return this},nape.geom.GeomPoly.prototype.copy=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var ret=nape.geom.GeomPoly.get(),F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite,x=v.x,y=v.y,ret1;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x,ret1.y=y;var obj=ret1;if(null==ret.zpp_inner.vertices?ret.zpp_inner.vertices=obj.prev=obj.next=obj:(obj.prev=ret.zpp_inner.vertices,obj.next=ret.zpp_inner.vertices.next,ret.zpp_inner.vertices.next.prev=obj,ret.zpp_inner.vertices.next=obj),ret.zpp_inner.vertices=obj,(nite=nite.next)==L)break}return ret.skipForward(1)},nape.geom.GeomPoly.prototype.dispose=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");this.clear();var o=this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextGeomPoly?zpp_nape.util.ZPP_PubPool.nextGeomPoly.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolGeomPoly=o,zpp_nape.util.ZPP_PubPool.nextGeomPoly=o,o.zpp_disp=!0},nape.geom.GeomPoly.prototype.toString=function(){var ret="GeomPoly[",F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v!=this.zpp_inner.vertices&&(ret+=","),ret+="{"+v.x+","+v.y+"}",(nite=nite.next)==L)break}return ret+"]"},nape.geom.GeomPoly.prototype.area=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;var area=0,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}var ret=.5*area;return ret<0?-ret:ret},nape.geom.GeomPoly.prototype.winding=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return null==zpp_nape.util.ZPP_Flags.Winding_UNDEFINED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_UNDEFINED=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_UNDEFINED;var area=0,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}var area1=.5*area;return area1>0?(null==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE):0==area1?(null==zpp_nape.util.ZPP_Flags.Winding_UNDEFINED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_UNDEFINED=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_UNDEFINED):(null==zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE)},nape.geom.GeomPoly.prototype.contains=function(point){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: GeomPoly::contains point cannot be null");if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var x=point.zpp_inner.x;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var y=point.zpp_inner.y,ret=!1,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var p=nite,q=p.prev;if((p.y<y&&q.y>=y||q.y<y&&p.y>=y)&&(p.x<=x||q.x<=x)&&p.x+(y-p.y)/(q.y-p.y)*(q.x-p.x)<x&&(ret=!ret),(nite=nite.next)==L)break}var ret1=ret;if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret1},nape.geom.GeomPoly.prototype.isClockwise=function(){var tmp=this.winding();return null==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),tmp==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE},nape.geom.GeomPoly.prototype.isConvex=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return!0;var neg=!1,pos=!1,ret=!0,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite,u=v.prev,w=v.next,ax=0,ay=0;ax=w.x-v.x,ay=w.y-v.y;var bx=0,by=0;bx=v.x-u.x;var dot=(by=v.y-u.y)*ax-bx*ay;if(dot>0?pos=!0:dot<0&&(neg=!0),pos&&neg){ret=!1;break}if((nite=nite.next)==L)break}return ret},nape.geom.GeomPoly.prototype.isSimple=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||zpp_nape.geom.ZPP_Simple.isSimple(this.zpp_inner.vertices)},nape.geom.GeomPoly.prototype.isMonotone=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||zpp_nape.geom.ZPP_Monotone.isMonotone(this.zpp_inner.vertices)},nape.geom.GeomPoly.prototype.isDegenerate=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||this.area()<nape.Config.epsilon},nape.geom.GeomPoly.prototype.simplify=function(epsilon){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(epsilon<=0)throw new js._Boot.HaxeError("Error: Epsilon should be > 0 for simplifying a GeomPoly");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();var x=zpp_nape.geom.ZPP_Simplify.simplify(this.zpp_inner.vertices,epsilon),ret=nape.geom.GeomPoly.get();return ret.zpp_inner.vertices=x,ret},nape.geom.GeomPoly.prototype.simpleDecomposition=function(output){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new js._Boot.HaxeError("Error: Cannot decompose a degenerate polygon");var MPs=this.zpp_inner.vertices;null==zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=new zpp_nape.util.ZNPList_ZPP_GeomVert);for(var MPs1=zpp_nape.geom.ZPP_Simple.decompose(MPs,zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList),ret=null==output?new nape.geom.GeomPolyList:output;null!=MPs1.head;){var MP=MPs1.pop_unsafe(),x=nape.geom.GeomPoly.get();x.zpp_inner.vertices=MP,ret.zpp_inner.reverse_flag?ret.push(x):ret.unshift(x)}return ret},nape.geom.GeomPoly.prototype.monotoneDecomposition=function(output){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new js._Boot.HaxeError("Error: Cannot decompose a degenerate polygon");var poly=this.zpp_inner.vertices;null==zpp_nape.geom.ZPP_Monotone.sharedPPoly&&(zpp_nape.geom.ZPP_Monotone.sharedPPoly=new zpp_nape.geom.ZPP_PartitionedPoly);var poly1=zpp_nape.geom.ZPP_Monotone.decompose(poly,zpp_nape.geom.ZPP_Monotone.sharedPPoly);null==zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=new zpp_nape.util.ZNPList_ZPP_GeomVert);for(var MPs=poly1.extract(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList),ret=null==output?new nape.geom.GeomPolyList:output;null!=MPs.head;){var MP=MPs.pop_unsafe(),x=nape.geom.GeomPoly.get();x.zpp_inner.vertices=MP,ret.zpp_inner.reverse_flag?ret.push(x):ret.unshift(x)}return ret},nape.geom.GeomPoly.prototype.convexDecomposition=function(delaunay,output){if(null==delaunay&&(delaunay=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new js._Boot.HaxeError("Error: Cannot decompose a degenerate polygon");var poly=this.zpp_inner.vertices;null==zpp_nape.geom.ZPP_Monotone.sharedPPoly&&(zpp_nape.geom.ZPP_Monotone.sharedPPoly=new zpp_nape.geom.ZPP_PartitionedPoly);var poly1=zpp_nape.geom.ZPP_Monotone.decompose(poly,zpp_nape.geom.ZPP_Monotone.sharedPPoly);null==zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList=new zpp_nape.util.ZNPList_ZPP_PartitionedPoly);for(var MPs=poly1.extract_partitions(zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList),ret=null==output?new nape.geom.GeomPolyList:output;null!=MPs.head;){var MP=MPs.pop_unsafe();zpp_nape.geom.ZPP_Triangular.triangulate(MP),delaunay&&zpp_nape.geom.ZPP_Triangular.optimise(MP),zpp_nape.geom.ZPP_Convex.optimise(MP),null==zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=new zpp_nape.util.ZNPList_ZPP_GeomVert);var MQs=MP.extract(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList),o=MP;for(o.next=zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool,zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool=o;null!=MQs.head;){var MQ=MQs.pop_unsafe(),x=nape.geom.GeomPoly.get();x.zpp_inner.vertices=MQ,ret.zpp_inner.reverse_flag?ret.push(x):ret.unshift(x)}}return ret},nape.geom.GeomPoly.prototype.triangularDecomposition=function(delaunay,output){if(null==delaunay&&(delaunay=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new js._Boot.HaxeError("Error: Cannot decompose a degenerate polygon");var poly=this.zpp_inner.vertices;null==zpp_nape.geom.ZPP_Monotone.sharedPPoly&&(zpp_nape.geom.ZPP_Monotone.sharedPPoly=new zpp_nape.geom.ZPP_PartitionedPoly);var poly1=zpp_nape.geom.ZPP_Monotone.decompose(poly,zpp_nape.geom.ZPP_Monotone.sharedPPoly);null==zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList=new zpp_nape.util.ZNPList_ZPP_PartitionedPoly);for(var MPs=poly1.extract_partitions(zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList),ret=null==output?new nape.geom.GeomPolyList:output;null!=MPs.head;){var MP=MPs.pop_unsafe();zpp_nape.geom.ZPP_Triangular.triangulate(MP),delaunay&&zpp_nape.geom.ZPP_Triangular.optimise(MP),null==zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=new zpp_nape.util.ZNPList_ZPP_GeomVert);var MQs=MP.extract(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList),o=MP;for(o.next=zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool,zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool=o;null!=MQs.head;){var MQ=MQs.pop_unsafe(),x=nape.geom.GeomPoly.get();x.zpp_inner.vertices=MQ,ret.zpp_inner.reverse_flag?ret.push(x):ret.unshift(x)}}return ret},nape.geom.GeomPoly.prototype.inflate=function(inflation){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var ret=nape.geom.GeomPoly.get(),tmp=this.winding();null==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),tmp==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(inflation=-inflation);var F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var p=nite,prev=p.prev,next=p.next,ax=0,ay=0,bx=0,by=0;ax=p.x-prev.x,ay=p.y-prev.y,bx=next.x-p.x,by=next.y-p.y;var apx=0,apy=0,bpx=0,bpy=0,d=(apx=ax)*apx+(apy=ay)*apy,imag=1/Math.sqrt(d),t=imag,t1=apx*=imag;apx=-(apy*=imag),apy=t1;var t2=inflation;apx*=inflation,apy*=inflation;var d1=(bpx=bx)*bpx+(bpy=by)*bpy,imag1=1/Math.sqrt(d1),t3=imag1,t4=bpx*=imag1;bpx=-(bpy*=imag1),bpy=t4;var t5=inflation,bapx=0,bapy=0,num=by*(bapx=(bpx*=inflation)-apx)-bx*(bapy=(bpy*=inflation)-apy),t6=0==num?0:num/(by*ax-bx*ay),px=0,py=0;px=p.x+apx,py=p.y+apy;var t7=t6,x=px+=ax*t6,y=py+=ay*t6,ret1;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x,ret2.y=y,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret1.zpp_inner,tmp1;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret1.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret1.zpp_inner.x==x){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret1.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp1=ret1.zpp_inner.y==y}else tmp1=!1;if(!tmp1){ret1.zpp_inner.x=x,ret1.zpp_inner.y=y;var _this3=ret1.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}if(ret1.zpp_inner.weak=!1,ret.push(ret1),(nite=nite.next)==L)break}return ret.skipForward(1)},nape.geom.GeomPoly.prototype.cut=function(start,end,boundedStart,boundedEnd,output){if(null==boundedEnd&&(boundedEnd=!1),null==boundedStart&&(boundedStart=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null!=this.zpp_inner.vertices&&null!=this.zpp_inner.vertices.next&&this.zpp_inner.vertices.prev!=this.zpp_inner.vertices.next&&!zpp_nape.geom.ZPP_Simple.isSimple(this.zpp_inner.vertices))throw new js._Boot.HaxeError("Error: Cut requires a truly simple polygon");if(null==start||null==end)throw new js._Boot.HaxeError("Error: Cannot cut with null start/end's");if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var ret=zpp_nape.geom.ZPP_Cutter.run(this.zpp_inner.vertices,start,end,boundedStart,boundedEnd,output);if(start.zpp_inner.weak){if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=start.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),start.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=start.zpp_inner;start.zpp_inner.outer=null,start.zpp_inner=null;var o=start;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(end.zpp_inner.weak){if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=end.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),end.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=end.zpp_inner;end.zpp_inner.outer=null,end.zpp_inner=null;var o2=end;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return ret},nape.geom.GeomPoly.prototype.transform=function(matrix){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==matrix)throw new js._Boot.HaxeError("Error: Cannot transform by null matrix");var F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite,t=matrix.zpp_inner.a*v.x+matrix.zpp_inner.b*v.y+matrix.zpp_inner.tx;if(v.y=matrix.zpp_inner.c*v.x+matrix.zpp_inner.d*v.y+matrix.zpp_inner.ty,v.x=t,(nite=nite.next)==L)break}return this},nape.geom.GeomPoly.prototype.bounds=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: empty GeomPoly has no defineable bounds");var minx=1e100,miny=1e100,maxx=-1e100,maxy=-1e100,F=this.zpp_inner.vertices,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v.x<minx&&(minx=v.x),v.y<miny&&(miny=v.y),v.x>maxx&&(maxx=v.x),v.y>maxy&&(maxy=v.y),(nite=nite.next)==L)break}return new nape.geom.AABB(minx,miny,maxx-minx,maxy-miny)},nape.geom.GeomPoly.prototype.top=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: empty GeomPoly has no defineable topmost vertex");var min=this.zpp_inner.vertices,F=this.zpp_inner.vertices.next,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v.y<min.y&&(min=v),(nite=nite.next)==L)break}if(null==min.wrap){var x=min.x,y=min.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,min.wrap=ret,min.wrap.zpp_inner._inuse=!0,min.wrap.zpp_inner._invalidate=$bind(min,min.modwrap),min.wrap.zpp_inner._validate=$bind(min,min.getwrap)}return min.wrap},nape.geom.GeomPoly.prototype.bottom=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: empty GeomPoly has no defineable bottommost vertex");var max=this.zpp_inner.vertices,F=this.zpp_inner.vertices.next,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v.y>max.y&&(max=v),(nite=nite.next)==L)break}if(null==max.wrap){var x=max.x,y=max.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,max.wrap=ret,max.wrap.zpp_inner._inuse=!0,max.wrap.zpp_inner._invalidate=$bind(max,max.modwrap),max.wrap.zpp_inner._validate=$bind(max,max.getwrap)}return max.wrap},nape.geom.GeomPoly.prototype.left=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: empty GeomPoly has no defineable leftmost vertex");var min=this.zpp_inner.vertices,F=this.zpp_inner.vertices.next,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v.x<min.x&&(min=v),(nite=nite.next)==L)break}if(null==min.wrap){var x=min.x,y=min.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,min.wrap=ret,min.wrap.zpp_inner._inuse=!0,min.wrap.zpp_inner._invalidate=$bind(min,min.modwrap),min.wrap.zpp_inner._validate=$bind(min,min.getwrap)}return min.wrap},nape.geom.GeomPoly.prototype.right=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");if(null==this.zpp_inner.vertices)throw new js._Boot.HaxeError("Error: empty GeomPoly has no defineable rightmmost vertex");var max=this.zpp_inner.vertices,F=this.zpp_inner.vertices.next,L=this.zpp_inner.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(v.x>max.x&&(max=v),(nite=nite.next)==L)break}if(null==max.wrap){var x=max.x,y=max.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,max.wrap=ret,max.wrap.zpp_inner._inuse=!0,max.wrap.zpp_inner._invalidate=$bind(max,max.modwrap),max.wrap.zpp_inner._validate=$bind(max,max.getwrap)}return max.wrap},nape.geom.GeomPoly.prototype.__class__=nape.geom.GeomPoly,nape.geom.GeomPolyIterator=$hxClasses["nape.geom.GeomPolyIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_GeomPolyList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate GeomPolyIterator derp!")},nape.geom.GeomPolyIterator.__name__=["nape","geom","GeomPolyIterator"],nape.geom.GeomPolyIterator.get=function(list){var ret;if(null==nape.geom.GeomPolyIterator.zpp_pool){zpp_nape.util.ZPP_GeomPolyList.internal=!0;var ret1=new nape.geom.GeomPolyIterator;zpp_nape.util.ZPP_GeomPolyList.internal=!1,ret=ret1}else{var r=nape.geom.GeomPolyIterator.zpp_pool;nape.geom.GeomPolyIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.geom.GeomPolyIterator.prototype.zpp_inner=null,nape.geom.GeomPolyIterator.prototype.zpp_i=null,nape.geom.GeomPolyIterator.prototype.zpp_critical=null,nape.geom.GeomPolyIterator.prototype.zpp_next=null,nape.geom.GeomPolyIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.geom.GeomPolyIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.geom.GeomPolyIterator.prototype.__class__=nape.geom.GeomPolyIterator,nape.geom.GeomPolyList=$hxClasses["nape.geom.GeomPolyList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_GeomPolyList,this.zpp_inner.outer=this},nape.geom.GeomPolyList.__name__=["nape","geom","GeomPolyList"],nape.geom.GeomPolyList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.geom.GeomPolyList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.geom.GeomPolyList.prototype.zpp_inner=null,Object.defineProperty(nape.geom.GeomPolyList.prototype,"length",{get:nape.geom.GeomPolyList.prototype.get_length}),nape.geom.GeomPolyList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.geom.GeomPolyList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.geom.GeomPolyList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.geom.GeomPolyList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.GeomPolyList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.GeomPolyList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.geom.GeomPolyList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.geom.GeomPolyList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.geom.GeomPolyList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.geom.GeomPolyList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: GeomPolyList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.geom.GeomPolyList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.geom.GeomPolyList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.geom.GeomPolyIterator.get(this)},nape.geom.GeomPolyList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.geom.GeomPolyList;this.zpp_inner.valmod();for(var _g=nape.geom.GeomPolyIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: GeomPoly is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.geom.GeomPolyList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.geom.GeomPolyIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.geom.GeomPolyList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.geom.GeomPolyIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.geom.GeomPolyList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.geom.GeomPolyIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.geom.GeomPolyIterator.zpp_pool,nape.geom.GeomPolyIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.geom.GeomPolyList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.geom.GeomPolyList.prototype.__class__=nape.geom.GeomPolyList,nape.geom.GeomVertexIterator=$hxClasses["nape.geom.GeomVertexIterator"]=function(){if(!zpp_nape.geom.ZPP_GeomVertexIterator.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate GeomVertexIterator")},nape.geom.GeomVertexIterator.__name__=["nape","geom","GeomVertexIterator"],nape.geom.GeomVertexIterator.prototype.zpp_inner=null,nape.geom.GeomVertexIterator.prototype.hasNext=function(){if(null==this.zpp_inner)throw new js._Boot.HaxeError("Error: Iterator has been disposed");var ret=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;if(this.zpp_inner.first=!1,!ret){var o=this.zpp_inner;o.outer.zpp_inner=null,o.ptr=o.start=null,o.next=zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool,zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool=o}return ret},nape.geom.GeomVertexIterator.prototype.next=function(){if(null==this.zpp_inner)throw new js._Boot.HaxeError("Error: Iterator has been disposed");var _this=this.zpp_inner.ptr;if(null==_this.wrap){var x=_this.x,y=_this.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner,tmp;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;if(null!=_this2._validate&&_this2._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this4=ret.zpp_inner;null!=_this4._invalidate&&_this4._invalidate(_this4)}}ret.zpp_inner.weak=!1,_this.wrap=ret,_this.wrap.zpp_inner._inuse=!0,_this.wrap.zpp_inner._invalidate=$bind(_this,_this.modwrap),_this.wrap.zpp_inner._validate=$bind(_this,_this.getwrap)}var ret2=_this.wrap;return this.zpp_inner.ptr=this.zpp_inner.forward?this.zpp_inner.ptr.next:this.zpp_inner.ptr.prev,ret2},nape.geom.GeomVertexIterator.prototype.__class__=nape.geom.GeomVertexIterator,nape.geom.MarchingSquares=$hxClasses["nape.geom.MarchingSquares"]=function(){},nape.geom.MarchingSquares.__name__=["nape","geom","MarchingSquares"],nape.geom.MarchingSquares.run=function(iso,bounds,cellsize,quality,subgrid,combine,output){if(null==combine&&(combine=!0),null==quality&&(quality=2),null!=cellsize&&cellsize.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==iso)throw new js._Boot.HaxeError("Error: MarchingSquares requires an iso function to operate");if(null==bounds)throw new js._Boot.HaxeError("Error: MarchingSquares requires an AABB to define bounds of surface extraction");if(null==cellsize)throw new js._Boot.HaxeError("Error: MarchingSquares requires a Vec2 to define cell size for surface extraction");var tmp;if(null!=cellsize&&cellsize.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=cellsize.zpp_inner,tmp1;if(null!=_this._validate&&_this._validate(),cellsize.zpp_inner.x<=0)tmp=!0;else{if(null!=cellsize&&cellsize.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=cellsize.zpp_inner;null!=_this1._validate&&_this1._validate(),tmp=cellsize.zpp_inner.y<=0}if(tmp)throw new js._Boot.HaxeError("Error: MarchingSquares cannot operate with non-positive cell dimensions");if(quality<0)throw new js._Boot.HaxeError("Error: MarchingSquares cannot use a negative quality value for interpolation");if(null!=subgrid){if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=subgrid.zpp_inner;if(null!=_this2._validate&&_this2._validate(),subgrid.zpp_inner.x<=0)tmp1=!0;else{if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=subgrid.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp1=subgrid.zpp_inner.y<=0}}else tmp1=!1;if(tmp1)throw new js._Boot.HaxeError("Error: MarchingSquares cannot with non-positive sub-grid dimensions");var ret=null!=output?output:new nape.geom.GeomPolyList;if(null==subgrid){var _this4=bounds.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp2=bounds.zpp_inner.minx,_this5=bounds.zpp_inner;null!=_this5._validate&&_this5._validate();var tmp3=bounds.zpp_inner.miny,_this6=bounds.zpp_inner.getmax();if(null!=_this6&&_this6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=_this6.zpp_inner;null!=_this7._validate&&_this7._validate();var tmp4=_this6.zpp_inner.x,_this8=bounds.zpp_inner.getmax();if(null!=_this8&&_this8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_this8.zpp_inner;null!=_this9._validate&&_this9._validate(),zpp_nape.geom.ZPP_MarchingSquares.run(iso,tmp2,tmp3,tmp4,_this8.zpp_inner.y,cellsize,quality,combine,ret)}else{var _this10=bounds.zpp_inner;null!=_this10._validate&&_this10._validate();var _this11=bounds.zpp_inner,xp=_this11.maxx-_this11.minx;if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=subgrid.zpp_inner;null!=_this12._validate&&_this12._validate();var xp1=xp/subgrid.zpp_inner.x,_this13=bounds.zpp_inner;null!=_this13._validate&&_this13._validate();var _this14=bounds.zpp_inner,yp=_this14.maxy-_this14.miny;if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=subgrid.zpp_inner;null!=_this15._validate&&_this15._validate();var yp1=yp/subgrid.zpp_inner.y,xn=0|xp1,yn=0|yp1;xn!=xp1&&++xn,yn!=yp1&&++yn;for(var _g=0,_g1=xn;_g<_g1;){var x=_g++,_this16=bounds.zpp_inner;null!=_this16._validate&&_this16._validate();var x0=bounds.zpp_inner.minx;if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=subgrid.zpp_inner;null!=_this17._validate&&_this17._validate();var x01=x0+subgrid.zpp_inner.x*x,x1;if(x==xn-1){var _this18=bounds.zpp_inner.getmax();if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=_this18.zpp_inner;null!=_this19._validate&&_this19._validate(),x1=_this18.zpp_inner.x}else{if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=subgrid.zpp_inner;null!=_this20._validate&&_this20._validate(),x1=x01+subgrid.zpp_inner.x}for(var _g2=0,_g11=yn;_g2<_g11;){var y=_g2++,_this21=bounds.zpp_inner;null!=_this21._validate&&_this21._validate();var y0=bounds.zpp_inner.miny;if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this22=subgrid.zpp_inner;null!=_this22._validate&&_this22._validate();var y01=y0+subgrid.zpp_inner.y*y,y1;if(y==yn-1){var _this23=bounds.zpp_inner.getmax();if(null!=_this23&&_this23.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this24=_this23.zpp_inner;null!=_this24._validate&&_this24._validate(),y1=_this23.zpp_inner.y}else{if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this25=subgrid.zpp_inner;null!=_this25._validate&&_this25._validate(),y1=y01+subgrid.zpp_inner.y}zpp_nape.geom.ZPP_MarchingSquares.run(iso,x01,y01,x1,y1,cellsize,quality,combine,ret)}}}if(cellsize.zpp_inner.weak){if(null!=cellsize&&cellsize.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this26=cellsize.zpp_inner;if(_this26._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this26._isimmutable&&_this26._isimmutable(),cellsize.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=cellsize.zpp_inner;cellsize.zpp_inner.outer=null,cellsize.zpp_inner=null;var o=cellsize;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null!=subgrid&&subgrid.zpp_inner.weak){if(null!=subgrid&&subgrid.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this27=subgrid.zpp_inner;if(_this27._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this27._isimmutable&&_this27._isimmutable(),subgrid.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=subgrid.zpp_inner;subgrid.zpp_inner.outer=null,subgrid.zpp_inner=null;var o2=subgrid;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return ret},nape.geom.MarchingSquares.prototype.__class__=nape.geom.MarchingSquares,nape.geom.Mat23=$hxClasses["nape.geom.Mat23"]=function(a,b,c,d,tx,ty){if(null==ty&&(ty=0),null==tx&&(tx=0),null==d&&(d=1),null==c&&(c=0),null==b&&(b=0),null==a&&(a=1),this.zpp_inner=null,this.zpp_inner=zpp_nape.geom.ZPP_Mat23.get(),this.zpp_inner.outer=this,a!=a)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");this.zpp_inner.a=a;var _this=this.zpp_inner;if(null!=_this._invalidate&&_this._invalidate(),b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");this.zpp_inner.b=b;var _this1=this.zpp_inner;if(null!=_this1._invalidate&&_this1._invalidate(),tx!=tx)throw new js._Boot.HaxeError("Error: Mat23::tx cannot be NaN");this.zpp_inner.tx=tx;var _this2=this.zpp_inner;if(null!=_this2._invalidate&&_this2._invalidate(),c!=c)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");this.zpp_inner.c=c;var _this3=this.zpp_inner;if(null!=_this3._invalidate&&_this3._invalidate(),d!=d)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");this.zpp_inner.d=d;var _this4=this.zpp_inner;if(null!=_this4._invalidate&&_this4._invalidate(),ty!=ty)throw new js._Boot.HaxeError("Error: Mat23::ty cannot be NaN");this.zpp_inner.ty=ty;var _this5=this.zpp_inner;null!=_this5._invalidate&&_this5._invalidate()},nape.geom.Mat23.__name__=["nape","geom","Mat23"],nape.geom.Mat23.rotation=function(angle){if(angle!=angle)throw new js._Boot.HaxeError("Error: Cannot create rotation matrix with NaN angle");var cos=Math.cos(angle),sin=Math.sin(angle);return new nape.geom.Mat23(cos,-sin,sin,cos,0,0)},nape.geom.Mat23.translation=function(tx,ty){return new nape.geom.Mat23(1,0,0,1,tx,ty)},nape.geom.Mat23.scale=function(sx,sy){return new nape.geom.Mat23(sx,0,0,sy,0,0)},nape.geom.Mat23.prototype.zpp_inner=null,Object.defineProperty(nape.geom.Mat23.prototype,"a",{get:nape.geom.Mat23.prototype.get_a,set:nape.geom.Mat23.prototype.set_a}),nape.geom.Mat23.prototype.get_a=function(){return this.zpp_inner.a},nape.geom.Mat23.prototype.set_a=function(a){if(a!=a)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");this.zpp_inner.a=a;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.a},Object.defineProperty(nape.geom.Mat23.prototype,"b",{get:nape.geom.Mat23.prototype.get_b,set:nape.geom.Mat23.prototype.set_b}),nape.geom.Mat23.prototype.get_b=function(){return this.zpp_inner.b},nape.geom.Mat23.prototype.set_b=function(b){if(b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");this.zpp_inner.b=b;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.b},Object.defineProperty(nape.geom.Mat23.prototype,"c",{get:nape.geom.Mat23.prototype.get_c,set:nape.geom.Mat23.prototype.set_c}),nape.geom.Mat23.prototype.get_c=function(){return this.zpp_inner.c},nape.geom.Mat23.prototype.set_c=function(c){if(c!=c)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");this.zpp_inner.c=c;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.c},Object.defineProperty(nape.geom.Mat23.prototype,"d",{get:nape.geom.Mat23.prototype.get_d,set:nape.geom.Mat23.prototype.set_d}),nape.geom.Mat23.prototype.get_d=function(){return this.zpp_inner.d},nape.geom.Mat23.prototype.set_d=function(d){if(d!=d)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");this.zpp_inner.d=d;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.d},Object.defineProperty(nape.geom.Mat23.prototype,"tx",{get:nape.geom.Mat23.prototype.get_tx,set:nape.geom.Mat23.prototype.set_tx}),nape.geom.Mat23.prototype.get_tx=function(){return this.zpp_inner.tx},nape.geom.Mat23.prototype.set_tx=function(tx){if(tx!=tx)throw new js._Boot.HaxeError("Error: Mat23::tx cannot be NaN");this.zpp_inner.tx=tx;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.tx},Object.defineProperty(nape.geom.Mat23.prototype,"ty",{get:nape.geom.Mat23.prototype.get_ty,set:nape.geom.Mat23.prototype.set_ty}),nape.geom.Mat23.prototype.get_ty=function(){return this.zpp_inner.ty},nape.geom.Mat23.prototype.set_ty=function(ty){if(ty!=ty)throw new js._Boot.HaxeError("Error: Mat23::ty cannot be NaN");this.zpp_inner.ty=ty;var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this.zpp_inner.ty},nape.geom.Mat23.prototype.copy=function(){return new nape.geom.Mat23(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},nape.geom.Mat23.prototype.set=function(matrix){if(null==matrix)throw new js._Boot.HaxeError("Error: Cannot set form null matrix");var m=matrix.zpp_inner;this.zpp_inner.setas(m.a,m.b,m.c,m.d,m.tx,m.ty);var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this},nape.geom.Mat23.prototype.setAs=function(a,b,c,d,tx,ty){null==ty&&(ty=0),null==tx&&(tx=0),null==d&&(d=1),null==c&&(c=0),null==b&&(b=0),null==a&&(a=1),this.zpp_inner.setas(a,b,c,d,tx,ty);var _this=this.zpp_inner;return null!=_this._invalidate&&_this._invalidate(),this},nape.geom.Mat23.prototype.reset=function(){return this.setAs()},Object.defineProperty(nape.geom.Mat23.prototype,"determinant",{get:nape.geom.Mat23.prototype.get_determinant}),nape.geom.Mat23.prototype.get_determinant=function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},nape.geom.Mat23.prototype.singular=function(){var norm=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,limit=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;return limit<0&&(limit=-limit),norm>nape.Config.illConditionedThreshold*limit},nape.geom.Mat23.prototype.inverse=function(){if(this.singular())throw new js._Boot.HaxeError("Error: Matrix is singular and cannot be inverted");var idet=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new nape.geom.Mat23(this.zpp_inner.d*idet,-this.zpp_inner.b*idet,-this.zpp_inner.c*idet,this.zpp_inner.a*idet,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*idet,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*idet)},nape.geom.Mat23.prototype.transpose=function(){return new nape.geom.Mat23(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},nape.geom.Mat23.prototype.concat=function(matrix){var m=matrix;if(null==m)throw new js._Boot.HaxeError("Error: Cannot concatenate with null Mat23");return new nape.geom.Mat23(m.zpp_inner.a*this.zpp_inner.a+m.zpp_inner.b*this.zpp_inner.c,m.zpp_inner.a*this.zpp_inner.b+m.zpp_inner.b*this.zpp_inner.d,m.zpp_inner.c*this.zpp_inner.a+m.zpp_inner.d*this.zpp_inner.c,m.zpp_inner.c*this.zpp_inner.b+m.zpp_inner.d*this.zpp_inner.d,m.zpp_inner.a*this.zpp_inner.tx+m.zpp_inner.b*this.zpp_inner.ty+m.zpp_inner.tx,m.zpp_inner.c*this.zpp_inner.tx+m.zpp_inner.d*this.zpp_inner.ty+m.zpp_inner.ty)},nape.geom.Mat23.prototype.transform=function(point,noTranslation,weak){if(null==weak&&(weak=!1),null==noTranslation&&(noTranslation=!1),null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");var ret;if(noTranslation){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var x=point.zpp_inner.x*this.zpp_inner.a;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var x1=x+point.zpp_inner.y*this.zpp_inner.b;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;null!=_this2._validate&&_this2._validate();var y=point.zpp_inner.x*this.zpp_inner.c;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=point.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=y+point.zpp_inner.y*this.zpp_inner.d,weak1=weak,ret1;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x1,ret2.y=y1,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret1.zpp_inner,ret3;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret1.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret1.zpp_inner.x==x1){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret1.zpp_inner;null!=_this6._validate&&_this6._validate(),ret3=ret1.zpp_inner.y==y1}else ret3=!1;if(!ret3){ret1.zpp_inner.x=x1,ret1.zpp_inner.y=y1;var _this7=ret1.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret1.zpp_inner.weak=weak1,ret=ret1}else{if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=point.zpp_inner;null!=_this8._validate&&_this8._validate();var x2=point.zpp_inner.x*this.zpp_inner.a;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=point.zpp_inner;null!=_this9._validate&&_this9._validate();var x3=x2+point.zpp_inner.y*this.zpp_inner.b+this.zpp_inner.tx;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=point.zpp_inner;null!=_this10._validate&&_this10._validate();var y2=point.zpp_inner.x*this.zpp_inner.c;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=point.zpp_inner;null!=_this11._validate&&_this11._validate();var y3=y2+point.zpp_inner.y*this.zpp_inner.d+this.zpp_inner.ty,weak2=weak,ret4;if(null==weak2&&(weak2=!1),null==y3&&(y3=0),null==x3&&(x3=0),x3!=x3||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret4=new nape.geom.Vec2:(ret4=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret4.zpp_pool,ret4.zpp_pool=null,ret4.zpp_disp=!1,ret4==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret4.zpp_inner){var ret5;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=x3,ret5.y=y3,ret4.zpp_inner=ret5,ret4.zpp_inner.outer=ret4}else{if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret4.zpp_inner,ret6;if(_this12._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this12._isimmutable&&_this12._isimmutable(),x3!=x3||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret4.zpp_inner;if(null!=_this13._validate&&_this13._validate(),ret4.zpp_inner.x==x3){if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret4.zpp_inner;null!=_this14._validate&&_this14._validate(),ret6=ret4.zpp_inner.y==y3}else ret6=!1;if(!ret6){ret4.zpp_inner.x=x3,ret4.zpp_inner.y=y3;var _this15=ret4.zpp_inner;null!=_this15._invalidate&&_this15._invalidate(_this15)}}ret4.zpp_inner.weak=weak2,ret=ret4}if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=point.zpp_inner;if(_this16._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this16._isimmutable&&_this16._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.geom.Mat23.prototype.inverseTransform=function(point,noTranslation,weak){if(null==weak&&(weak=!1),null==noTranslation&&(noTranslation=!1),null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");if(this.singular())throw new js._Boot.HaxeError("Error: Matrix is singular and inverse transformation cannot be performed");var idet=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c),ret;if(noTranslation){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var x=point.zpp_inner.x*this.zpp_inner.d;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var x1=(x-point.zpp_inner.y*this.zpp_inner.b)*idet;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;null!=_this2._validate&&_this2._validate();var y=point.zpp_inner.y*this.zpp_inner.a;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=point.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=(y-point.zpp_inner.x*this.zpp_inner.c)*idet,weak1=weak,ret1;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x1,ret2.y=y1,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret1.zpp_inner,ret3;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret1.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret1.zpp_inner.x==x1){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret1.zpp_inner;null!=_this6._validate&&_this6._validate(),ret3=ret1.zpp_inner.y==y1}else ret3=!1;if(!ret3){ret1.zpp_inner.x=x1,ret1.zpp_inner.y=y1;var _this7=ret1.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret1.zpp_inner.weak=weak1,ret=ret1}else{if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=point.zpp_inner;null!=_this8._validate&&_this8._validate();var dx=point.zpp_inner.x-this.zpp_inner.tx;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=point.zpp_inner;null!=_this9._validate&&_this9._validate();var dy=point.zpp_inner.y-this.zpp_inner.ty,x2=(dx*this.zpp_inner.d-dy*this.zpp_inner.b)*idet,y2=(dy*this.zpp_inner.a-dx*this.zpp_inner.c)*idet,weak2=weak,ret4;if(null==weak2&&(weak2=!1),null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret4=new nape.geom.Vec2:(ret4=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret4.zpp_pool,ret4.zpp_pool=null,ret4.zpp_disp=!1,ret4==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret4.zpp_inner){var ret5;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=x2,ret5.y=y2,ret4.zpp_inner=ret5,ret4.zpp_inner.outer=ret4}else{if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret4.zpp_inner,ret6;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=ret4.zpp_inner;if(null!=_this11._validate&&_this11._validate(),ret4.zpp_inner.x==x2){if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret4.zpp_inner;null!=_this12._validate&&_this12._validate(),ret6=ret4.zpp_inner.y==y2}else ret6=!1;if(!ret6){ret4.zpp_inner.x=x2,ret4.zpp_inner.y=y2;var _this13=ret4.zpp_inner;null!=_this13._invalidate&&_this13._invalidate(_this13)}}ret4.zpp_inner.weak=weak2,ret=ret4}if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=point.zpp_inner;if(_this14._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this14._isimmutable&&_this14._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.geom.Mat23.prototype.toString=function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},nape.geom.Mat23.prototype.equiorthogonal=function(){if(this.singular())return!1;var x=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(x*x<nape.Config.epsilon){var y=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return y*y<nape.Config.epsilon}return!1},nape.geom.Mat23.prototype.orthogonal=function(){var x=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(x*x<nape.Config.epsilon){var y=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1,z=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return y*y<nape.Config.epsilon&&z*z<nape.Config.epsilon}return!1},nape.geom.Mat23.prototype.equiorthogonalise=function(){if(!this.equiorthogonal()){var k1=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),k2=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(k1*k1<nape.Config.epsilon||k2*k2<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: Matrix is singular and cannot be equiorthogonalised");var k=(k1+k2)/2;k1=k/k1,k2=k/k2;var _g=this,a=_g.zpp_inner.a*k1;if(a!=a)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");_g.zpp_inner.a=a;var _this=_g.zpp_inner;null!=_this._invalidate&&_this._invalidate();var _g1=this,c=_g1.zpp_inner.c*k1;if(c!=c)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");_g1.zpp_inner.c=c;var _this1=_g1.zpp_inner;null!=_this1._invalidate&&_this1._invalidate();var _g2=this,b=_g2.zpp_inner.b*k2;if(b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");_g2.zpp_inner.b=b;var _this2=_g2.zpp_inner;null!=_this2._invalidate&&_this2._invalidate();var _g3=this,d=_g3.zpp_inner.d*k2;if(d!=d)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");_g3.zpp_inner.d=d;var _this3=_g3.zpp_inner;null!=_this3._invalidate&&_this3._invalidate();var dot=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d,ang=.25*Math.PI-.5*Math.acos(dot/(k*k));this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0&&(ang=-ang);var sin=Math.sin(ang),cos=Math.cos(ang),a2=this.zpp_inner.a*cos-this.zpp_inner.c*sin,b2=this.zpp_inner.b*cos+this.zpp_inner.d*sin,c1=this.zpp_inner.c*cos+this.zpp_inner.a*sin;if(c1!=c1)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");this.zpp_inner.c=c1;var _this4=this.zpp_inner;if(null!=_this4._invalidate&&_this4._invalidate(),a2!=a2)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");this.zpp_inner.a=a2;var _this5=this.zpp_inner;null!=_this5._invalidate&&_this5._invalidate();var d1=this.zpp_inner.d*cos-this.zpp_inner.b*sin;if(d1!=d1)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");this.zpp_inner.d=d1;var _this6=this.zpp_inner;if(null!=_this6._invalidate&&_this6._invalidate(),b2!=b2)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");this.zpp_inner.b=b2;var _this7=this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate();var _this8=this.zpp_inner;null!=_this8._invalidate&&_this8._invalidate()}return this},nape.geom.Mat23.prototype.orthogonalise=function(){if(!this.orthogonal()){var k1=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),k2=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);if(k1*k1<nape.Config.epsilon||k2*k2<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: Matrix is singular and cannot be orthogonalised");var k=1;k1=1/k1,k2=1/k2;var _g=this,a=_g.zpp_inner.a*k1;if(a!=a)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");_g.zpp_inner.a=a;var _this=_g.zpp_inner;null!=_this._invalidate&&_this._invalidate();var _g1=this,c=_g1.zpp_inner.c*k1;if(c!=c)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");_g1.zpp_inner.c=c;var _this1=_g1.zpp_inner;null!=_this1._invalidate&&_this1._invalidate();var _g2=this,b=_g2.zpp_inner.b*k2;if(b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");_g2.zpp_inner.b=b;var _this2=_g2.zpp_inner;null!=_this2._invalidate&&_this2._invalidate();var _g3=this,d=_g3.zpp_inner.d*k2;if(d!=d)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");_g3.zpp_inner.d=d;var _this3=_g3.zpp_inner;null!=_this3._invalidate&&_this3._invalidate();var dot=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d,ang=.25*Math.PI-.5*Math.acos(dot/1);this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c>0&&(ang=-ang);var sin=Math.sin(ang),cos=Math.cos(ang),a2=this.zpp_inner.a*cos-this.zpp_inner.c*sin,b2=this.zpp_inner.b*cos+this.zpp_inner.d*sin,c1=this.zpp_inner.c*cos+this.zpp_inner.a*sin;if(c1!=c1)throw new js._Boot.HaxeError("Error: Mat23::c cannot be NaN");this.zpp_inner.c=c1;var _this4=this.zpp_inner;if(null!=_this4._invalidate&&_this4._invalidate(),a2!=a2)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");this.zpp_inner.a=a2;var _this5=this.zpp_inner;null!=_this5._invalidate&&_this5._invalidate();var d1=this.zpp_inner.d*cos-this.zpp_inner.b*sin;if(d1!=d1)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");this.zpp_inner.d=d1;var _this6=this.zpp_inner;if(null!=_this6._invalidate&&_this6._invalidate(),b2!=b2)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");this.zpp_inner.b=b2;var _this7=this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate();var _this8=this.zpp_inner;null!=_this8._invalidate&&_this8._invalidate()}return this},nape.geom.Mat23.prototype.__class__=nape.geom.Mat23,nape.geom.MatMN=$hxClasses["nape.geom.MatMN"]=function(rows,cols){if(this.zpp_inner=null,rows<=0||cols<=0)throw new js._Boot.HaxeError("Error: MatMN::dimensions cannot be < 1");this.zpp_inner=new zpp_nape.geom.ZPP_MatMN(rows,cols),this.zpp_inner.outer=this},nape.geom.MatMN.__name__=["nape","geom","MatMN"],nape.geom.MatMN.prototype.zpp_inner=null,Object.defineProperty(nape.geom.MatMN.prototype,"rows",{get:nape.geom.MatMN.prototype.get_rows}),nape.geom.MatMN.prototype.get_rows=function(){return this.zpp_inner.m},Object.defineProperty(nape.geom.MatMN.prototype,"cols",{get:nape.geom.MatMN.prototype.get_cols}),nape.geom.MatMN.prototype.get_cols=function(){return this.zpp_inner.n},nape.geom.MatMN.prototype.x=function(row,col){if(row<0||col<0||row>=this.zpp_inner.m||col>=this.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return this.zpp_inner.x[row*this.zpp_inner.n+col]},nape.geom.MatMN.prototype.setx=function(row,col,x){if(row<0||col<0||row>=this.zpp_inner.m||col>=this.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");return this.zpp_inner.x[row*this.zpp_inner.n+col]=x},nape.geom.MatMN.prototype.toString=function(){for(var ret="{ ",fst=!0,_g=0,_g1=this.zpp_inner.m;_g<_g1;){var i=_g++;fst||(ret+="; "),fst=!1;for(var _g2=0,_g11=this.zpp_inner.n;_g2<_g11;){var j=_g2++;if(i<0||j<0||i>=this.zpp_inner.m||j>=this.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");ret+=this.zpp_inner.x[i*this.zpp_inner.n+j]+" "}}return ret+="}"},nape.geom.MatMN.prototype.transpose=function(){for(var ret=new nape.geom.MatMN(this.zpp_inner.n,this.zpp_inner.m),_g=0,_g1=this.zpp_inner.m;_g<_g1;)for(var i=_g++,_g2=0,_g11=this.zpp_inner.n;_g2<_g11;){var j=_g2++;if(i<0||j<0||i>=this.zpp_inner.m||j>=this.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(j<0||i<0||j>=ret.zpp_inner.m||i>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");ret.zpp_inner.x[j*ret.zpp_inner.n+i]=this.zpp_inner.x[i*this.zpp_inner.n+j]}return ret},nape.geom.MatMN.prototype.mul=function(matrix){var y=matrix;if(this.zpp_inner.n!=y.zpp_inner.m)throw new js._Boot.HaxeError("Error: Matrix dimensions aren't compatible");for(var ret=new nape.geom.MatMN(this.zpp_inner.m,y.zpp_inner.n),_g=0,_g1=this.zpp_inner.m;_g<_g1;)for(var i=_g++,_g2=0,_g11=y.zpp_inner.n;_g2<_g11;){for(var j=_g2++,v=0,_g3=0,_g12=this.zpp_inner.n;_g3<_g12;){var k=_g3++;if(i<0||k<0||i>=this.zpp_inner.m||k>=this.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");if(k<0||j<0||k>=y.zpp_inner.m||j>=y.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");v+=this.zpp_inner.x[i*this.zpp_inner.n+k]*y.zpp_inner.x[k*y.zpp_inner.n+j]}if(i<0||j<0||i>=ret.zpp_inner.m||j>=ret.zpp_inner.n)throw new js._Boot.HaxeError("Error: MatMN indices out of range");ret.zpp_inner.x[i*ret.zpp_inner.n+j]=v}return ret},nape.geom.MatMN.prototype.__class__=nape.geom.MatMN,nape.geom.Ray=$hxClasses["nape.geom.Ray"]=function(origin,direction){if(this.zpp_inner=null,null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner=new zpp_nape.geom.ZPP_Ray,null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==origin)throw new js._Boot.HaxeError("Error: Ray::origin cannot be null");var _this=this.zpp_inner.origin;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==origin)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=origin.zpp_inner;null!=_this2._validate&&_this2._validate();var x=origin.zpp_inner.x;if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=origin.zpp_inner;null!=_this3._validate&&_this3._validate();var y=origin.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(origin.zpp_inner.weak){if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=origin.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),origin.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=origin.zpp_inner;origin.zpp_inner.outer=null,origin.zpp_inner=null;var o=origin;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==direction)throw new js._Boot.HaxeError("Error: Ray::direction cannot be null");var _this9=this.zpp_inner.direction;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_this9.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null==direction)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=direction.zpp_inner;null!=_this11._validate&&_this11._validate();var x1=direction.zpp_inner.x;if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=direction.zpp_inner;null!=_this12._validate&&_this12._validate();var y1=direction.zpp_inner.y;if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this9.zpp_inner,tmp1;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_this9.zpp_inner;if(null!=_this14._validate&&_this14._validate(),_this9.zpp_inner.x==x1){if(null!=_this9&&_this9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this9.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp1=_this9.zpp_inner.y==y1}else tmp1=!1;if(!tmp1){_this9.zpp_inner.x=x1,_this9.zpp_inner.y=y1;var _this16=_this9.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}var ret1=_this9;if(direction.zpp_inner.weak){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=direction.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),direction.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=direction.zpp_inner;direction.zpp_inner.outer=null,direction.zpp_inner=null;var o2=direction;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}this.zpp_inner.zip_dir=!0,this.zpp_inner.maxdist=1/0},nape.geom.Ray.__name__=["nape","geom","Ray"],nape.geom.Ray.fromSegment=function(start,end){if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==start)throw new js._Boot.HaxeError("Error: Ray::fromSegment::start is null");if(null==end)throw new js._Boot.HaxeError("Error: Ray::fromSegment::end is null");var dir=end.sub(start,!0),ret=new nape.geom.Ray(start,dir);if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=start.zpp_inner;null!=_this._validate&&_this._validate();var ax=start.zpp_inner.x;if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=start.zpp_inner;null!=_this1._validate&&_this1._validate();var ay=start.zpp_inner.y;if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=end.zpp_inner;null!=_this2._validate&&_this2._validate();var bx=end.zpp_inner.x;if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=end.zpp_inner;null!=_this3._validate&&_this3._validate();var dx=0,dy=0;dx=ax-bx,dy=ay-end.zpp_inner.y;var maxDistance=Math.sqrt(dx*dx+dy*dy);if(maxDistance!=maxDistance)throw new js._Boot.HaxeError("Error: maxDistance cannot be NaN");if(ret.zpp_inner.maxdist=maxDistance,start.zpp_inner.weak){if(null!=start&&start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=start.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),start.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=start.zpp_inner;start.zpp_inner.outer=null,start.zpp_inner=null;var o=start;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(end.zpp_inner.weak){if(null!=end&&end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=end.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),end.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=end.zpp_inner;end.zpp_inner.outer=null,end.zpp_inner=null;var o2=end;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return ret},nape.geom.Ray.prototype.zpp_inner=null,Object.defineProperty(nape.geom.Ray.prototype,"userData",{get:nape.geom.Ray.prototype.get_userData}),nape.geom.Ray.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.geom.Ray.prototype,"origin",{get:nape.geom.Ray.prototype.get_origin,set:nape.geom.Ray.prototype.set_origin}),nape.geom.Ray.prototype.get_origin=function(){return this.zpp_inner.origin},nape.geom.Ray.prototype.set_origin=function(origin){if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==origin)throw new js._Boot.HaxeError("Error: Ray::origin cannot be null");var _this=this.zpp_inner.origin;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==origin)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=origin.zpp_inner;null!=_this2._validate&&_this2._validate();var x=origin.zpp_inner.x;if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=origin.zpp_inner;null!=_this3._validate&&_this3._validate();var y=origin.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(origin.zpp_inner.weak){if(null!=origin&&origin.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=origin.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),origin.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=origin.zpp_inner;origin.zpp_inner.outer=null,origin.zpp_inner=null;var o=origin;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this.zpp_inner.origin},Object.defineProperty(nape.geom.Ray.prototype,"direction",{get:nape.geom.Ray.prototype.get_direction,set:nape.geom.Ray.prototype.set_direction}),nape.geom.Ray.prototype.get_direction=function(){return this.zpp_inner.direction},nape.geom.Ray.prototype.set_direction=function(direction){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==direction)throw new js._Boot.HaxeError("Error: Ray::direction cannot be null");var _this=this.zpp_inner.direction;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==direction)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=direction.zpp_inner;null!=_this2._validate&&_this2._validate();var x=direction.zpp_inner.x;if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=direction.zpp_inner;null!=_this3._validate&&_this3._validate();var y=direction.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(direction.zpp_inner.weak){if(null!=direction&&direction.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=direction.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),direction.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=direction.zpp_inner;direction.zpp_inner.outer=null,direction.zpp_inner=null;var o=direction;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this.zpp_inner.zip_dir=!0,this.zpp_inner.direction},Object.defineProperty(nape.geom.Ray.prototype,"maxDistance",{get:nape.geom.Ray.prototype.get_maxDistance,set:nape.geom.Ray.prototype.set_maxDistance}),nape.geom.Ray.prototype.get_maxDistance=function(){return this.zpp_inner.maxdist},nape.geom.Ray.prototype.set_maxDistance=function(maxDistance){if(maxDistance!=maxDistance)throw new js._Boot.HaxeError("Error: maxDistance cannot be NaN");return this.zpp_inner.maxdist=maxDistance,this.zpp_inner.maxdist},nape.geom.Ray.prototype.aabb=function(){return this.zpp_inner.rayAABB().wrapper()},nape.geom.Ray.prototype.at=function(distance,weak){null==weak&&(weak=!1),this.zpp_inner.validate_dir();var _this=this.zpp_inner.origin;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;null!=_this1._validate&&_this1._validate();var x=_this.zpp_inner.x+distance*this.zpp_inner.dirx,_this2=this.zpp_inner.origin;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;null!=_this3._validate&&_this3._validate();var y=_this2.zpp_inner.y+distance*this.zpp_inner.diry,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this7=ret.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Ray.prototype.copy=function(){var ret=new nape.geom.Ray(this.zpp_inner.origin,this.zpp_inner.direction),maxDistance=this.zpp_inner.maxdist;if(maxDistance!=maxDistance)throw new js._Boot.HaxeError("Error: maxDistance cannot be NaN");return ret.zpp_inner.maxdist=maxDistance,ret},nape.geom.Ray.prototype.__class__=nape.geom.Ray,nape.geom.RayResult=$hxClasses["nape.geom.RayResult"]=function(){if(this.zpp_inner=null,!zpp_nape.geom.ZPP_ConvexRayResult.internal)throw new js._Boot.HaxeError("Error: RayResult cannot be instantiated derp!")},nape.geom.RayResult.__name__=["nape","geom","RayResult"],nape.geom.RayResult.prototype.zpp_inner=null,Object.defineProperty(nape.geom.RayResult.prototype,"normal",{get:nape.geom.RayResult.prototype.get_normal}),nape.geom.RayResult.prototype.get_normal=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.normal},Object.defineProperty(nape.geom.RayResult.prototype,"distance",{get:nape.geom.RayResult.prototype.get_distance}),nape.geom.RayResult.prototype.get_distance=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.toiDistance},Object.defineProperty(nape.geom.RayResult.prototype,"inner",{get:nape.geom.RayResult.prototype.get_inner}),nape.geom.RayResult.prototype.get_inner=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.inner},Object.defineProperty(nape.geom.RayResult.prototype,"shape",{get:nape.geom.RayResult.prototype.get_shape}),nape.geom.RayResult.prototype.get_shape=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return this.zpp_inner.shape},nape.geom.RayResult.prototype.dispose=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");this.zpp_inner.free()},nape.geom.RayResult.prototype.toString=function(){if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");return"{ shape: "+Std.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+Std.string(this.zpp_inner.inner)+" }"},nape.geom.RayResult.prototype.__class__=nape.geom.RayResult,nape.geom.RayResultIterator=$hxClasses["nape.geom.RayResultIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_RayResultList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate RayResultIterator derp!")},nape.geom.RayResultIterator.__name__=["nape","geom","RayResultIterator"],nape.geom.RayResultIterator.get=function(list){var ret;if(null==nape.geom.RayResultIterator.zpp_pool){zpp_nape.util.ZPP_RayResultList.internal=!0;var ret1=new nape.geom.RayResultIterator;zpp_nape.util.ZPP_RayResultList.internal=!1,ret=ret1}else{var r=nape.geom.RayResultIterator.zpp_pool;nape.geom.RayResultIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.geom.RayResultIterator.prototype.zpp_inner=null,nape.geom.RayResultIterator.prototype.zpp_i=null,nape.geom.RayResultIterator.prototype.zpp_critical=null,nape.geom.RayResultIterator.prototype.zpp_next=null,nape.geom.RayResultIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.geom.RayResultIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.geom.RayResultIterator.prototype.__class__=nape.geom.RayResultIterator,nape.geom.RayResultList=$hxClasses["nape.geom.RayResultList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_RayResultList,this.zpp_inner.outer=this},nape.geom.RayResultList.__name__=["nape","geom","RayResultList"],nape.geom.RayResultList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.geom.RayResultList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.geom.RayResultList.prototype.zpp_inner=null,Object.defineProperty(nape.geom.RayResultList.prototype,"length",{get:nape.geom.RayResultList.prototype.get_length}),nape.geom.RayResultList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.geom.RayResultList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj)},nape.geom.RayResultList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},nape.geom.RayResultList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.RayResultList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj)}else this.zpp_inner.inner.add(obj);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.RayResultList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=ret=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret},nape.geom.RayResultList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=ret=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret},nape.geom.RayResultList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.geom.RayResultList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj),this.zpp_inner.invalidate()),ret},nape.geom.RayResultList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: RayResultList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.geom.RayResultList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.geom.RayResultList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.geom.RayResultIterator.get(this)},nape.geom.RayResultList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.geom.RayResultList;this.zpp_inner.valmod();for(var _g=nape.geom.RayResultIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: RayResult is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.geom.RayResultList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.geom.RayResultIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.geom.RayResultList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.geom.RayResultIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.geom.RayResultList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.geom.RayResultIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.geom.RayResultIterator.zpp_pool,nape.geom.RayResultIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.geom.RayResultList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.geom.RayResultList.prototype.__class__=nape.geom.RayResultList,nape.geom.Vec2=$hxClasses["nape.geom.Vec2"]=function(x,y){if(null==y&&(y=0),null==x&&(x=0),this.zpp_pool=null,this.zpp_inner=null,x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");var ret;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y,this.zpp_inner=ret,this.zpp_inner.outer=this},nape.geom.Vec2.__name__=["nape","geom","Vec2"],nape.geom.Vec2.weak=function(x,y){null==y&&(y=0),null==x&&(x=0);var x1=x,y1=y,weak=!0,ret;if(null==weak&&(weak=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y1}else tmp=!1;if(!tmp){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}return ret.zpp_inner.weak=weak,ret},nape.geom.Vec2.get=function(x,y,weak){if(null==weak&&(weak=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");var ret;if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}return ret.zpp_inner.weak=weak,ret},nape.geom.Vec2.fromPolar=function(length,angle,weak){if(null==weak&&(weak=!1),length!=length)throw new js._Boot.HaxeError("Error: Vec2::length cannot be NaN");if(angle!=angle)throw new js._Boot.HaxeError("Error: Vec2::angle cannot be NaN");var x=length*Math.cos(angle),y=length*Math.sin(angle),weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Vec2.dsq=function(a,b){if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==a||null==b)throw new js._Boot.HaxeError("Error: Cannot compute squared distance between null Vec2");if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=a.zpp_inner;null!=_this._validate&&_this._validate();var ax=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=a.zpp_inner;null!=_this1._validate&&_this1._validate();var ay=a.zpp_inner.y;if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=b.zpp_inner;null!=_this2._validate&&_this2._validate();var bx=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=b.zpp_inner;null!=_this3._validate&&_this3._validate();var dx=0,dy=0,ret=(dx=ax-bx)*dx+(dy=ay-b.zpp_inner.y)*dy;if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=a.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),a.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null;var o=a;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(b.zpp_inner.weak){if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=b.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),b.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=b.zpp_inner;b.zpp_inner.outer=null,b.zpp_inner=null;var o2=b;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return ret},nape.geom.Vec2.distance=function(a,b){if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==a||null==b)throw new js._Boot.HaxeError("Error: Cannot compute squared distance between null Vec2");if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=a.zpp_inner;null!=_this._validate&&_this._validate();var ax=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=a.zpp_inner;null!=_this1._validate&&_this1._validate();var ay=a.zpp_inner.y;if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=b.zpp_inner;null!=_this2._validate&&_this2._validate();var bx=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=b.zpp_inner;null!=_this3._validate&&_this3._validate();var dx=0,dy=0;dx=ax-bx,dy=ay-b.zpp_inner.y;var ret=Math.sqrt(dx*dx+dy*dy);if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=a.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),a.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null;var o=a;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(b.zpp_inner.weak){if(null!=b&&b.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=b.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),b.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=b.zpp_inner;b.zpp_inner.outer=null,b.zpp_inner=null;var o2=b;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return ret},nape.geom.Vec2.prototype.zpp_inner=null,nape.geom.Vec2.prototype.zpp_pool=null,nape.geom.Vec2.prototype.zpp_disp=null,nape.geom.Vec2.prototype.dispose=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=this.zpp_inner;this.zpp_inner.outer=null,this.zpp_inner=null;var o=this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1},nape.geom.Vec2.prototype.copy=function(weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var y=this.zpp_inner.y,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}return ret.zpp_inner.weak=weak1,ret},Object.defineProperty(nape.geom.Vec2.prototype,"x",{get:nape.geom.Vec2.prototype.get_x,set:nape.geom.Vec2.prototype.set_x}),nape.geom.Vec2.prototype.get_x=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.x},nape.geom.Vec2.prototype.set_x=function(x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_inner.x!=x){if(x!=x)throw new js._Boot.HaxeError("Error: Vec2::x cannot be NaN");this.zpp_inner.x=x;var _this2=this.zpp_inner;null!=_this2._invalidate&&_this2._invalidate(_this2)}if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;return null!=_this3._validate&&_this3._validate(),this.zpp_inner.x},Object.defineProperty(nape.geom.Vec2.prototype,"y",{get:nape.geom.Vec2.prototype.get_y,set:nape.geom.Vec2.prototype.set_y}),nape.geom.Vec2.prototype.get_y=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.y},nape.geom.Vec2.prototype.set_y=function(y){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_inner.y!=y){if(y!=y)throw new js._Boot.HaxeError("Error: Vec2::y cannot be NaN");this.zpp_inner.y=y;var _this2=this.zpp_inner;null!=_this2._invalidate&&_this2._invalidate(_this2)}if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;return null!=_this3._validate&&_this3._validate(),this.zpp_inner.y},Object.defineProperty(nape.geom.Vec2.prototype,"length",{get:nape.geom.Vec2.prototype.get_length,set:nape.geom.Vec2.prototype.set_length}),nape.geom.Vec2.prototype.get_length=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;return null!=_this3._validate&&_this3._validate(),Math.sqrt(tmp1+tmp2*this.zpp_inner.y)},nape.geom.Vec2.prototype.set_length=function(length){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),length!=length)throw new js._Boot.HaxeError("Error: Vec2::length cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;if(null!=_this4._validate&&_this4._validate(),tmp1+tmp2*this.zpp_inner.y==0)throw new js._Boot.HaxeError("Error: Cannot set length of a zero vector");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate();var t=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner;null!=_this6._validate&&_this6._validate();var t1=t*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate();var t2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=this.zpp_inner;null!=_this8._validate&&_this8._validate();var t3=length/Math.sqrt(t1+t2*this.zpp_inner.y),_g=this;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_g.zpp_inner;null!=_this9._validate&&_this9._validate();var x=_g.zpp_inner.x*t3;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_g.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=_g.zpp_inner;if(null!=_this11._validate&&_this11._validate(),_g.zpp_inner.x!=x){if(x!=x)throw new js._Boot.HaxeError("Error: Vec2::x cannot be NaN");_g.zpp_inner.x=x;var _this12=_g.zpp_inner;null!=_this12._invalidate&&_this12._invalidate(_this12)}if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_g.zpp_inner;null!=_this13._validate&&_this13._validate();var _g1=this;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_g1.zpp_inner;null!=_this14._validate&&_this14._validate();var y=_g1.zpp_inner.y*t3;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_g1.zpp_inner;if(_this15._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this15._isimmutable&&_this15._isimmutable(),null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=_g1.zpp_inner;if(null!=_this16._validate&&_this16._validate(),_g1.zpp_inner.y!=y){if(y!=y)throw new js._Boot.HaxeError("Error: Vec2::y cannot be NaN");_g1.zpp_inner.y=y;var _this17=_g1.zpp_inner;null!=_this17._invalidate&&_this17._invalidate(_this17)}if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=_g1.zpp_inner;null!=_this18._validate&&_this18._validate();var _this19=this.zpp_inner;if(null!=_this19._invalidate&&_this19._invalidate(_this19),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=this.zpp_inner;null!=_this20._validate&&_this20._validate();var tmp3=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this21=this.zpp_inner;null!=_this21._validate&&_this21._validate();var tmp4=tmp3*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this22=this.zpp_inner;null!=_this22._validate&&_this22._validate();var tmp5=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this23=this.zpp_inner;return null!=_this23._validate&&_this23._validate(),Math.sqrt(tmp4+tmp5*this.zpp_inner.y)},nape.geom.Vec2.prototype.lsq=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;return null!=_this3._validate&&_this3._validate(),tmp1+tmp2*this.zpp_inner.y},nape.geom.Vec2.prototype.set=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null==vector)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var x=vector.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;null!=_this2._validate&&_this2._validate();var y=vector.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner,tmp;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;if(null!=_this4._validate&&_this4._validate(),this.zpp_inner.x==x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate(),tmp=this.zpp_inner.y==y}else tmp=!1;if(!tmp){this.zpp_inner.x=x,this.zpp_inner.y=y;var _this6=this.zpp_inner;null!=_this6._invalidate&&_this6._invalidate(_this6)}var ret=this;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=vector.zpp_inner;if(_this7._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this7._isimmutable&&_this7._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.geom.Vec2.prototype.setxy=function(x,y){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_inner.x==x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=this.zpp_inner.y==y}else tmp=!1;if(!tmp){this.zpp_inner.x=x,this.zpp_inner.y=y;var _this3=this.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}return this},Object.defineProperty(nape.geom.Vec2.prototype,"angle",{get:nape.geom.Vec2.prototype.get_angle,set:nape.geom.Vec2.prototype.set_angle}),nape.geom.Vec2.prototype.get_angle=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var tmp;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),tmp1==this.zpp_inner.y){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=0==this.zpp_inner.x}else tmp=!1;if(tmp)return 0;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;return null!=_this4._validate&&_this4._validate(),Math.atan2(tmp2,this.zpp_inner.x)},nape.geom.Vec2.prototype.set_angle=function(angle){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),angle!=angle)throw new js._Boot.HaxeError("Error: Vec2::angle cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var l=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var l1=l*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var l2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var l3=Math.sqrt(l1+l2*this.zpp_inner.y),x=l3*Math.cos(angle),y=l3*Math.sin(angle);if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner,tmp;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner,tmp1;if(null!=_this6._validate&&_this6._validate(),this.zpp_inner.x==x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate(),tmp=this.zpp_inner.y==y}else tmp=!1;if(!tmp){this.zpp_inner.x=x,this.zpp_inner.y=y;var _this8=this.zpp_inner;null!=_this8._invalidate&&_this8._invalidate(_this8)}if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=this.zpp_inner;null!=_this9._validate&&_this9._validate();var tmp2=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=this.zpp_inner;if(null!=_this10._validate&&_this10._validate(),tmp2==this.zpp_inner.y){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=this.zpp_inner;null!=_this11._validate&&_this11._validate(),tmp1=0==this.zpp_inner.x}else tmp1=!1;if(tmp1)return 0;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=this.zpp_inner;null!=_this12._validate&&_this12._validate();var tmp3=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=this.zpp_inner;return null!=_this13._validate&&_this13._validate(),Math.atan2(tmp3,this.zpp_inner.x)},nape.geom.Vec2.prototype.rotate=function(angle){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),angle!=angle)throw new js._Boot.HaxeError("Error: Cannot rotate Vec2 by NaN");if(angle%(2*Math.PI)!=0){var ax=Math.sin(angle),ay=Math.cos(angle),t=ay*this.zpp_inner.x-ax*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*ax+this.zpp_inner.y*ay,this.zpp_inner.x=t;var _this1=this.zpp_inner;null!=_this1._invalidate&&_this1._invalidate(_this1)}return this},nape.geom.Vec2.prototype.reflect=function(vec,weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vec&&vec.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;if(null!=_this3._validate&&_this3._validate(),0==Math.sqrt(tmp1+tmp2*this.zpp_inner.y))throw new js._Boot.HaxeError("Error: Cannot reflect in zero vector");var weak1=!0;if(null==weak1&&(weak1=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var x=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate();var y=this.zpp_inner.y,weak2=weak1,ret;if(null==weak2&&(weak2=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner,normal;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret.zpp_inner;if(null!=_this7._validate&&_this7._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret.zpp_inner;null!=_this8._validate&&_this8._validate(),normal=ret.zpp_inner.y==y}else normal=!1;if(!normal){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this9=ret.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}}ret.zpp_inner.weak=weak2;var normal1=ret.normalise(),ret2=vec.sub(normal1.muleq(2*normal1.dot(vec)),weak);if(vec.zpp_inner.weak){if(null!=vec&&vec.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=vec.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),vec.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vec.zpp_inner;vec.zpp_inner.outer=null,vec.zpp_inner=null;var o=vec;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.geom.Vec2.prototype.normalise=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;if(null!=_this4._validate&&_this4._validate(),0==Math.sqrt(tmp1+tmp2*this.zpp_inner.y))throw new js._Boot.HaxeError("Error: Cannot normalise vector of length 0");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate();var d=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner;null!=_this6._validate&&_this6._validate();var d1=d*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate();var d2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=this.zpp_inner;null!=_this8._validate&&_this8._validate();var d3=d1+d2*this.zpp_inner.y,imag,t=1/Math.sqrt(d3),_g=this;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_g.zpp_inner;null!=_this9._validate&&_this9._validate();var x=_g.zpp_inner.x*t;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=_g.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=_g.zpp_inner;if(null!=_this11._validate&&_this11._validate(),_g.zpp_inner.x!=x){if(x!=x)throw new js._Boot.HaxeError("Error: Vec2::x cannot be NaN");_g.zpp_inner.x=x;var _this12=_g.zpp_inner;null!=_this12._invalidate&&_this12._invalidate(_this12)}if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_g.zpp_inner;null!=_this13._validate&&_this13._validate();var _g1=this;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=_g1.zpp_inner;null!=_this14._validate&&_this14._validate();var y=_g1.zpp_inner.y*t;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_g1.zpp_inner;if(_this15._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this15._isimmutable&&_this15._isimmutable(),null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=_g1.zpp_inner;if(null!=_this16._validate&&_this16._validate(),_g1.zpp_inner.y!=y){if(y!=y)throw new js._Boot.HaxeError("Error: Vec2::y cannot be NaN");_g1.zpp_inner.y=y;var _this17=_g1.zpp_inner;null!=_this17._invalidate&&_this17._invalidate(_this17)}if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=_g1.zpp_inner;null!=_this18._validate&&_this18._validate();var _this19=this.zpp_inner;return null!=_this19._invalidate&&_this19._invalidate(_this19),this},nape.geom.Vec2.prototype.unit=function(weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;if(null!=_this3._validate&&_this3._validate(),0==Math.sqrt(tmp1+tmp2*this.zpp_inner.y))throw new js._Boot.HaxeError("Error: Cannot normalise vector of length 0");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var x=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate();var x1=x*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner;null!=_this6._validate&&_this6._validate();var x2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate();var scale=1/Math.sqrt(x1+x2*this.zpp_inner.y);if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=this.zpp_inner;null!=_this8._validate&&_this8._validate();var x3=this.zpp_inner.x*scale;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=this.zpp_inner;null!=_this9._validate&&_this9._validate();var y=this.zpp_inner.y*scale,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x3&&(x3=0),x3!=x3||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x3,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret.zpp_inner,tmp3;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),x3!=x3||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=ret.zpp_inner;if(null!=_this11._validate&&_this11._validate(),ret.zpp_inner.x==x3){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret.zpp_inner;null!=_this12._validate&&_this12._validate(),tmp3=ret.zpp_inner.y==y}else tmp3=!1;if(!tmp3){ret.zpp_inner.x=x3,ret.zpp_inner.y=y;var _this13=ret.zpp_inner;null!=_this13._invalidate&&_this13._invalidate(_this13)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Vec2.prototype.add=function(vector,weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot add null vectors");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var x1=x+vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var y=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=y+vector.zpp_inner.y,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=ret.zpp_inner.y==y1}else tmp=!1;if(!tmp){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this7=ret.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret.zpp_inner.weak=weak1;var ret2=ret;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=vector.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.geom.Vec2.prototype.addMul=function(vector,scalar,weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot add null vectors");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var x1=x+vector.zpp_inner.x*scalar;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var y=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=y+vector.zpp_inner.y*scalar,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=ret.zpp_inner.y==y1}else tmp=!1;if(!tmp){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this7=ret.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret.zpp_inner.weak=weak1;var ret2=ret;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=vector.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.geom.Vec2.prototype.sub=function(vector,weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot subtract null vectors");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var x1=x-vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var y=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var y1=y-vector.zpp_inner.y,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=ret.zpp_inner.y==y1}else tmp=!1;if(!tmp){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this7=ret.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret.zpp_inner.weak=weak1;var ret2=ret;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=vector.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.geom.Vec2.prototype.mul=function(scalar,weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(scalar!=scalar)throw new js._Boot.HaxeError("Error: Cannot multiply with NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x*scalar;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var y=this.zpp_inner.y*scalar,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Vec2.prototype.addeq=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null==vector)throw new js._Boot.HaxeError("Error: Cannot add null vectors");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var x=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;null!=_this2._validate&&_this2._validate();var x1=x+vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var y=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;null!=_this4._validate&&_this4._validate();var y1=y+vector.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner,tmp;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner;if(null!=_this6._validate&&_this6._validate(),this.zpp_inner.x==x1){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate(),tmp=this.zpp_inner.y==y1}else tmp=!1;if(!tmp){this.zpp_inner.x=x1,this.zpp_inner.y=y1;var _this8=this.zpp_inner;null!=_this8._invalidate&&_this8._invalidate(_this8)}if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=vector.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.geom.Vec2.prototype.subeq=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null==vector)throw new js._Boot.HaxeError("Error: Cannot subtract null vectors");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var x=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;null!=_this2._validate&&_this2._validate();var x1=x-vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var y=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;null!=_this4._validate&&_this4._validate();var y1=y-vector.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner,tmp;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=this.zpp_inner;if(null!=_this6._validate&&_this6._validate(),this.zpp_inner.x==x1){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate(),tmp=this.zpp_inner.y==y1}else tmp=!1;if(!tmp){this.zpp_inner.x=x1,this.zpp_inner.y=y1;var _this8=this.zpp_inner;null!=_this8._invalidate&&_this8._invalidate(_this8)}if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=vector.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.geom.Vec2.prototype.muleq=function(scalar){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),scalar!=scalar)throw new js._Boot.HaxeError("Error: Cannot multiply with NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var x=this.zpp_inner.x*scalar;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var y=this.zpp_inner.y*scalar;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner,tmp;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=this.zpp_inner;if(null!=_this4._validate&&_this4._validate(),this.zpp_inner.x==x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=this.zpp_inner;null!=_this5._validate&&_this5._validate(),tmp=this.zpp_inner.y==y}else tmp=!1;if(!tmp){this.zpp_inner.x=x,this.zpp_inner.y=y;var _this6=this.zpp_inner;null!=_this6._invalidate&&_this6._invalidate(_this6)}return this},nape.geom.Vec2.prototype.dot=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot take dot product with null vector");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var ret=this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var ret1=ret*vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var ret2=this.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var ret3=ret1+ret2*vector.zpp_inner.y;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret3},nape.geom.Vec2.prototype.cross=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot take cross product with null vector");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=vector.zpp_inner;null!=_this._validate&&_this._validate();var ret=vector.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var ret1=ret*this.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;null!=_this2._validate&&_this2._validate();var ret2=vector.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var ret3=ret1-ret2*this.zpp_inner.y;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret3},nape.geom.Vec2.prototype.perp=function(weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=-this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var y=this.zpp_inner.x,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Vec2.prototype.toString=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.toString()},nape.geom.Vec2.prototype.__class__=nape.geom.Vec2,nape.geom.Vec2Iterator=$hxClasses["nape.geom.Vec2Iterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_Vec2List.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Vec2Iterator derp!")},nape.geom.Vec2Iterator.__name__=["nape","geom","Vec2Iterator"],nape.geom.Vec2Iterator.get=function(list){var ret;if(null==nape.geom.Vec2Iterator.zpp_pool){zpp_nape.util.ZPP_Vec2List.internal=!0;var ret1=new nape.geom.Vec2Iterator;zpp_nape.util.ZPP_Vec2List.internal=!1,ret=ret1}else{var r=nape.geom.Vec2Iterator.zpp_pool;nape.geom.Vec2Iterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.geom.Vec2Iterator.prototype.zpp_inner=null,nape.geom.Vec2Iterator.prototype.zpp_i=null,nape.geom.Vec2Iterator.prototype.zpp_critical=null,nape.geom.Vec2Iterator.prototype.zpp_next=null,nape.geom.Vec2Iterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var length=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.geom.Vec2Iterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.geom.Vec2Iterator.prototype.__class__=nape.geom.Vec2Iterator,nape.geom.Vec2List=$hxClasses["nape.geom.Vec2List"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_Vec2List,this.zpp_inner.outer=this},nape.geom.Vec2List.__name__=["nape","geom","Vec2List"],nape.geom.Vec2List.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.geom.Vec2List,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.geom.Vec2List.prototype.zpp_inner=null,Object.defineProperty(nape.geom.Vec2List.prototype,"length",{get:nape.geom.Vec2List.prototype.get_length}),nape.geom.Vec2List.prototype.get_length=function(){return this.zpp_gl()},nape.geom.Vec2List.prototype.zpp_gl=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.geom.Vec2List.prototype.zpp_vm=function(){this.zpp_inner.valmod()},nape.geom.Vec2List.prototype.has=function(obj){return this.zpp_vm(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.geom.Vec2List.prototype.at=function(index){if(this.zpp_vm(),index<0||index>=this.zpp_gl())throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(index=this.zpp_gl()-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;var _this=this.zpp_inner.at_ite.elt;if(null==_this.outer){_this.outer=new nape.geom.Vec2;var o=_this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this.outer.zpp_inner=_this}return _this.outer},nape.geom.Vec2List.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.Vec2List.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");this.zpp_inner.modify_test(),this.zpp_vm();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.geom.Vec2List.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){if(null==(ret=this.zpp_inner.inner.head.elt).outer){ret.outer=new nape.geom.Vec2;var o=ret.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret.outer.zpp_inner=ret}var retx=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var ite=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer){ret.outer=new nape.geom.Vec2;var o1=ret.outer.zpp_inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret.outer.zpp_inner=ret}var retx1=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}if(this.zpp_inner.invalidate(),null==ret.outer){ret.outer=new nape.geom.Vec2;var o2=ret.outer.zpp_inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,ret.outer.zpp_inner=ret}return ret.outer},nape.geom.Vec2List.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var ite=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer){ret.outer=new nape.geom.Vec2;var o=ret.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret.outer.zpp_inner=ret}var retx=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{if(null==(ret=this.zpp_inner.inner.head.elt).outer){ret.outer=new nape.geom.Vec2;var o1=ret.outer.zpp_inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret.outer.zpp_inner=ret}var retx1=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}if(this.zpp_inner.invalidate(),null==ret.outer){ret.outer=new nape.geom.Vec2;var o2=ret.outer.zpp_inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,ret.outer.zpp_inner=ret}return ret.outer},nape.geom.Vec2List.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.geom.Vec2List.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_vm(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.geom.Vec2List.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},nape.geom.Vec2List.prototype.empty=function(){return 0==this.zpp_gl()},nape.geom.Vec2List.prototype.iterator=function(){return this.zpp_vm(),nape.geom.Vec2Iterator.get(this)},nape.geom.Vec2List.prototype.copy=function(deep){null==deep&&(deep=!1);for(var ret=new nape.geom.Vec2List,_g=this.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep){if(null!=i&&i.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(i.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=i.zpp_inner;null!=_this._validate&&_this._validate();var x=i.zpp_inner.x;if(i.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=i.zpp_inner;null!=_this1._validate&&_this1._validate();var y=i.zpp_inner.y,weak=!1,ret1;if(null==weak&&(weak=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x,ret2.y=y,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret1.zpp_inner,tmp2;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret1.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret1.zpp_inner.x==x){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret1.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp2=ret1.zpp_inner.y==y}else tmp2=!1;if(!tmp2){ret1.zpp_inner.x=x,ret1.zpp_inner.y=y;var _this5=ret1.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}ret1.zpp_inner.weak=weak,tmp1=ret1}else tmp1=i;ret.push(tmp1)}return ret},nape.geom.Vec2List.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");for(var _g=xs.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||this.add(x)}},nape.geom.Vec2List.prototype.toString=function(){for(var ret="[",fst=!0,_g=this.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.geom.Vec2List.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");for(var it=this.iterator();;){it.zpp_inner.zpp_inner.valmod();var length=it.zpp_inner.zpp_gl(),tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.geom.Vec2List.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;i<this.zpp_gl();){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.geom.Vec2List.prototype.__class__=nape.geom.Vec2List,nape.geom.Vec3=$hxClasses["nape.geom.Vec3"]=function(x,y,z){if(null==z&&(z=0),null==y&&(y=0),null==x&&(x=0),this.zpp_pool=null,this.zpp_inner=null,this.zpp_inner=new zpp_nape.geom.ZPP_Vec3,this.zpp_inner.outer=this,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.x=x,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.y=y,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.z=z,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate()},nape.geom.Vec3.__name__=["nape","geom","Vec3"],nape.geom.Vec3.get=function(x,y,z){var ret;return null==z&&(z=0),null==y&&(y=0),null==x&&(x=0),null==zpp_nape.util.ZPP_PubPool.poolVec3?ret=new nape.geom.Vec3:(ret=zpp_nape.util.ZPP_PubPool.poolVec3,zpp_nape.util.ZPP_PubPool.poolVec3=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec3&&(zpp_nape.util.ZPP_PubPool.nextVec3=null)),ret.setxyz(x,y,z),ret.zpp_inner.immutable=!1,ret.zpp_inner._validate=null,ret},nape.geom.Vec3.prototype.zpp_inner=null,nape.geom.Vec3.prototype.zpp_pool=null,nape.geom.Vec3.prototype.zpp_disp=null,Object.defineProperty(nape.geom.Vec3.prototype,"x",{get:nape.geom.Vec3.prototype.get_x,set:nape.geom.Vec3.prototype.set_x}),nape.geom.Vec3.prototype.get_x=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.x},nape.geom.Vec3.prototype.set_x=function(x){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.x=x,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.x},Object.defineProperty(nape.geom.Vec3.prototype,"y",{get:nape.geom.Vec3.prototype.get_y,set:nape.geom.Vec3.prototype.set_y}),nape.geom.Vec3.prototype.get_y=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.y},nape.geom.Vec3.prototype.set_y=function(y){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.y=y,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.y},Object.defineProperty(nape.geom.Vec3.prototype,"z",{get:nape.geom.Vec3.prototype.get_z,set:nape.geom.Vec3.prototype.set_z}),nape.geom.Vec3.prototype.get_z=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.z},nape.geom.Vec3.prototype.set_z=function(z){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.z=z,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;return null!=_this._validate&&_this._validate(),this.zpp_inner.z},nape.geom.Vec3.prototype.dispose=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: This Vec3 is not disposable");var o=this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec3?zpp_nape.util.ZPP_PubPool.nextVec3.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec3=o,zpp_nape.util.ZPP_PubPool.nextVec3=o,o.zpp_disp=!0},Object.defineProperty(nape.geom.Vec3.prototype,"length",{get:nape.geom.Vec3.prototype.get_length,set:nape.geom.Vec3.prototype.set_length}),nape.geom.Vec3.prototype.get_length=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp3=tmp1+tmp2*this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp4=this.zpp_inner.z;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=this.zpp_inner;return null!=_this5._validate&&_this5._validate(),Math.sqrt(tmp3+tmp4*this.zpp_inner.z)},nape.geom.Vec3.prototype.set_length=function(length){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(length!=length)throw new js._Boot.HaxeError("Error: Vec3::length cannot be NaN");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp3=tmp1+tmp2*this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp4=this.zpp_inner.z;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),tmp3+tmp4*this.zpp_inner.z==0)throw new js._Boot.HaxeError("Error: Cannot set length of a zero vector");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this6=this.zpp_inner;null!=_this6._validate&&_this6._validate();var t=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this7=this.zpp_inner;null!=_this7._validate&&_this7._validate();var t1=t*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this8=this.zpp_inner;null!=_this8._validate&&_this8._validate();var t2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this9=this.zpp_inner;null!=_this9._validate&&_this9._validate();var t3=t1+t2*this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this10=this.zpp_inner;null!=_this10._validate&&_this10._validate();var t4=this.zpp_inner.z;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this11=this.zpp_inner;null!=_this11._validate&&_this11._validate();var t5=length/Math.sqrt(t3+t4*this.zpp_inner.z),t6=t5,_g=this;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this12=_g.zpp_inner;if(null!=_this12._validate&&_this12._validate(),null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g.zpp_inner.x=_g.zpp_inner.x*t6,null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this13=_g.zpp_inner;null!=_this13._validate&&_this13._validate();var _g1=this;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this14=_g1.zpp_inner;if(null!=_this14._validate&&_this14._validate(),null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g1.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g1.zpp_inner.y=_g1.zpp_inner.y*t6,null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this15=_g1.zpp_inner;null!=_this15._validate&&_this15._validate();var _g2=this;if(null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this16=_g2.zpp_inner;if(null!=_this16._validate&&_this16._validate(),null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g2.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g2.zpp_inner.z=_g2.zpp_inner.z*t5,null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this17=_g2.zpp_inner;if(null!=_this17._validate&&_this17._validate(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this18=this.zpp_inner;null!=_this18._validate&&_this18._validate();var tmp5=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this19=this.zpp_inner;null!=_this19._validate&&_this19._validate();var tmp6=tmp5*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this20=this.zpp_inner;null!=_this20._validate&&_this20._validate();var tmp7=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this21=this.zpp_inner;null!=_this21._validate&&_this21._validate();var tmp8=tmp6+tmp7*this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this22=this.zpp_inner;null!=_this22._validate&&_this22._validate();var tmp9=this.zpp_inner.z;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this23=this.zpp_inner;return null!=_this23._validate&&_this23._validate(),Math.sqrt(tmp8+tmp9*this.zpp_inner.z)},nape.geom.Vec3.prototype.lsq=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp*this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp2=this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=this.zpp_inner;null!=_this3._validate&&_this3._validate();var tmp3=tmp1+tmp2*this.zpp_inner.y;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=this.zpp_inner;null!=_this4._validate&&_this4._validate();var tmp4=this.zpp_inner.z;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=this.zpp_inner;return null!=_this5._validate&&_this5._validate(),tmp3+tmp4*this.zpp_inner.z},nape.geom.Vec3.prototype.set=function(vector){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot assign null Vec3");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=vector.zpp_inner;null!=_this._validate&&_this._validate();var tmp=vector.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=vector.zpp_inner.y;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=vector.zpp_inner;return null!=_this2._validate&&_this2._validate(),this.setxyz(tmp,tmp1,vector.zpp_inner.z)},nape.geom.Vec3.prototype.setxyz=function(x,y,z){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.x=x,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.y=y,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(this.zpp_inner.z=z,this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;return null!=_this2._validate&&_this2._validate(),this},nape.geom.Vec3.prototype.xy=function(weak){if(null==weak&&(weak=!1),this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var x=this.zpp_inner.x;if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var y=this.zpp_inner.y,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}return ret.zpp_inner.weak=weak1,ret},nape.geom.Vec3.prototype.toString=function(){if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=this.zpp_inner;null!=_this._validate&&_this._validate();var tmp="{ x: "+this.zpp_inner.x+" y: ";if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=this.zpp_inner;null!=_this1._validate&&_this1._validate();var tmp1=tmp+this.zpp_inner.y+" z: ";if(this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=this.zpp_inner;return null!=_this2._validate&&_this2._validate(),tmp1+this.zpp_inner.z+" }"},nape.geom.Vec3.prototype.__class__=nape.geom.Vec3,nape.geom.Winding=$hxClasses["nape.geom.Winding"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Winding derp!")},nape.geom.Winding.__name__=["nape","geom","Winding"],nape.geom.Winding.UNDEFINED=null,nape.geom.Winding.get_UNDEFINED=function(){return null==zpp_nape.util.ZPP_Flags.Winding_UNDEFINED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_UNDEFINED=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_UNDEFINED},nape.geom.Winding.CLOCKWISE=null,nape.geom.Winding.get_CLOCKWISE=function(){return null==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE},nape.geom.Winding.ANTICLOCKWISE=null,nape.geom.Winding.get_ANTICLOCKWISE=function(){return null==zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE},nape.geom.Winding.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.Winding_UNDEFINED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_UNDEFINED=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.Winding_UNDEFINED?"UNDEFINED":(null==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE?"CLOCKWISE":(null==zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE=new nape.geom.Winding,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""))},nape.geom.Winding.prototype.__class__=nape.geom.Winding,nape.phys||(nape.phys={}),nape.phys.Interactor=$hxClasses["nape.phys.Interactor"]=function(){if(this.zpp_inner_i=null,!nape.phys.Interactor.zpp_internalAlloc)throw new js._Boot.HaxeError("Error: Cannot instantiate an Interactor, only Shape/Body/Compound")},nape.phys.Interactor.__name__=["nape","phys","Interactor"],nape.phys.Interactor.prototype.zpp_inner_i=null,Object.defineProperty(nape.phys.Interactor.prototype,"id",{get:nape.phys.Interactor.prototype.get_id}),nape.phys.Interactor.prototype.get_id=function(){return this.zpp_inner_i.id},Object.defineProperty(nape.phys.Interactor.prototype,"userData",{get:nape.phys.Interactor.prototype.get_userData}),nape.phys.Interactor.prototype.get_userData=function(){return null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={}),this.zpp_inner_i.userData},nape.phys.Interactor.prototype.isShape=function(){return null!=this.zpp_inner_i.ishape},nape.phys.Interactor.prototype.isBody=function(){return null!=this.zpp_inner_i.ibody},nape.phys.Interactor.prototype.isCompound=function(){return null!=this.zpp_inner_i.icompound},Object.defineProperty(nape.phys.Interactor.prototype,"castShape",{get:nape.phys.Interactor.prototype.get_castShape}),nape.phys.Interactor.prototype.get_castShape=function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},Object.defineProperty(nape.phys.Interactor.prototype,"castBody",{get:nape.phys.Interactor.prototype.get_castBody}),nape.phys.Interactor.prototype.get_castBody=function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},Object.defineProperty(nape.phys.Interactor.prototype,"castCompound",{get:nape.phys.Interactor.prototype.get_castCompound}),nape.phys.Interactor.prototype.get_castCompound=function(){return null!=this.zpp_inner_i.icompound?this.zpp_inner_i.icompound.outer:null},Object.defineProperty(nape.phys.Interactor.prototype,"group",{get:nape.phys.Interactor.prototype.get_group,set:nape.phys.Interactor.prototype.set_group}),nape.phys.Interactor.prototype.get_group=function(){return null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},nape.phys.Interactor.prototype.set_group=function(group){return this.zpp_inner_i.immutable_midstep("Interactor::group"),this.zpp_inner_i.setGroup(null==group?null:group.zpp_inner),null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Object.defineProperty(nape.phys.Interactor.prototype,"cbTypes",{get:nape.phys.Interactor.prototype.get_cbTypes}),nape.phys.Interactor.prototype.get_cbTypes=function(){return null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes(),this.zpp_inner_i.wrap_cbTypes},nape.phys.Interactor.prototype.toString=function(){return""},nape.phys.Interactor.prototype.__class__=nape.phys.Interactor,nape.phys.Body=$hxClasses["nape.phys.Body"]=function(type,position){if(this.debugDraw=!0,this.zpp_inner=null,nape.phys.Interactor.zpp_internalAlloc=!0,nape.phys.Interactor.call(this),nape.phys.Interactor.zpp_internalAlloc=!1,this.zpp_inner=new zpp_nape.phys.ZPP_Body,this.zpp_inner.outer=this,this.zpp_inner.outer_i=this,this.zpp_inner_i=this.zpp_inner,null!=position){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=position.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_inner.posx=position.zpp_inner.x,null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=position.zpp_inner;null!=_this1._validate&&_this1._validate(),this.zpp_inner.posy=position.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;var type1;if(null==type?(null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),type1=zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC):type1=type,this.zpp_inner.immutable_midstep("Body::type"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(zpp_nape.phys.ZPP_Body.types[this.zpp_inner.type]!=type1){if(null==type1)throw new js._Boot.HaxeError("Error: Cannot use null BodyType");var ntype;null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),type1==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC?ntype=2:(null==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),ntype=type1==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC?3:1),1==ntype&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,ntype):this.zpp_inner.type=ntype}if(null!=position&&position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=position.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}this.zpp_inner_i.insert_cbtype(zpp_nape.callbacks.ZPP_CbType.ANY_BODY.zpp_inner)},nape.phys.Body.__name__=["nape","phys","Body"],nape.phys.Body.__super__=nape.phys.Interactor,nape.phys.Interactor.prototype)nape.phys.Body.prototype[k]=nape.phys.Interactor.prototype[k];for(var k in nape.phys.Body.prototype.zpp_inner=null,nape.phys.Body.prototype.debugDraw=null,Object.defineProperty(nape.phys.Body.prototype,"type",{get:nape.phys.Body.prototype.get_type,set:nape.phys.Body.prototype.set_type}),nape.phys.Body.prototype.get_type=function(){return zpp_nape.phys.ZPP_Body.types[this.zpp_inner.type]},nape.phys.Body.prototype.set_type=function(type){if(this.zpp_inner.immutable_midstep("Body::type"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(zpp_nape.phys.ZPP_Body.types[this.zpp_inner.type]!=type){if(null==type)throw new js._Boot.HaxeError("Error: Cannot use null BodyType");var ntype;null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),type==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC?ntype=2:(null==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),ntype=type==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC?3:1),1==ntype&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,ntype):this.zpp_inner.type=ntype}return zpp_nape.phys.ZPP_Body.types[this.zpp_inner.type]},Object.defineProperty(nape.phys.Body.prototype,"isBullet",{get:nape.phys.Body.prototype.get_isBullet,set:nape.phys.Body.prototype.set_isBullet}),nape.phys.Body.prototype.get_isBullet=function(){return this.zpp_inner.bulletEnabled},nape.phys.Body.prototype.set_isBullet=function(isBullet){return this.zpp_inner.bulletEnabled=isBullet,this.zpp_inner.bulletEnabled},Object.defineProperty(nape.phys.Body.prototype,"disableCCD",{get:nape.phys.Body.prototype.get_disableCCD,set:nape.phys.Body.prototype.set_disableCCD}),nape.phys.Body.prototype.get_disableCCD=function(){return this.zpp_inner.disableCCD},nape.phys.Body.prototype.set_disableCCD=function(disableCCD){return this.zpp_inner.disableCCD=disableCCD,this.zpp_inner.disableCCD},nape.phys.Body.prototype.integrate=function(deltaTime){if(deltaTime!=deltaTime)throw new js._Boot.HaxeError("Cannot integrate by NaN time");if(this.zpp_inner.immutable_midstep("Body::space"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(0==deltaTime)return this;var cur=this.zpp_inner;cur.sweepTime=0,cur.sweep_angvel=cur.angvel;var delta=deltaTime-cur.sweepTime;if(0!=delta){cur.sweepTime=deltaTime;var t=delta;if(cur.posx+=cur.velx*t,cur.posy+=cur.vely*t,0!=cur.angvel){var dr=cur.sweep_angvel*delta;if(cur.rot+=dr,dr*dr>1e-4)cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*cur.axisx+dr*cur.axisy)*m;cur.axisy=(p*cur.axisy-dr*cur.axisx)*m,cur.axisx=nx}}}for(var cx_ite=cur.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}cur.zip_worldCOM=!0,cur.zip_axis=!0;for(var cx_ite1=cur.shapes.head;null!=cx_ite1;){var s1=cx_ite1.elt;1==s1.type&&(s1.polygon.invalidate_gverts(),s1.polygon.invalidate_gaxi()),s1.invalidate_worldCOM(),cx_ite1=cx_ite1.next}return cur.zip_worldCOM=!0,cur.sweepTime=0,this},nape.phys.Body.prototype.isStatic=function(){return 1==this.zpp_inner.type},nape.phys.Body.prototype.isDynamic=function(){return 2==this.zpp_inner.type},nape.phys.Body.prototype.isKinematic=function(){return 3==this.zpp_inner.type},Object.defineProperty(nape.phys.Body.prototype,"shapes",{get:nape.phys.Body.prototype.get_shapes}),nape.phys.Body.prototype.get_shapes=function(){return this.zpp_inner.wrap_shapes},Object.defineProperty(nape.phys.Body.prototype,"compound",{get:nape.phys.Body.prototype.get_compound,set:nape.phys.Body.prototype.set_compound}),nape.phys.Body.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},nape.phys.Body.prototype.set_compound=function(compound){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=compound&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this),null!=compound)){var _this=compound.zpp_inner.wrap_bodies;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},Object.defineProperty(nape.phys.Body.prototype,"space",{get:nape.phys.Body.prototype.get_space,set:nape.phys.Body.prototype.set_space}),nape.phys.Body.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.phys.Body.prototype.set_space=function(space){if(null!=this.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");if(this.zpp_inner.immutable_midstep("Body::space"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=space&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.component.woken=!1),null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this),null!=space)){var _this=space.zpp_inner.wrap_bodies;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},Object.defineProperty(nape.phys.Body.prototype,"arbiters",{get:nape.phys.Body.prototype.get_arbiters}),nape.phys.Body.prototype.get_arbiters=function(){return null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0)),this.zpp_inner.wrap_arbiters},Object.defineProperty(nape.phys.Body.prototype,"isSleeping",{get:nape.phys.Body.prototype.get_isSleeping}),nape.phys.Body.prototype.get_isSleeping=function(){if(null==this.zpp_inner.space)throw new js._Boot.HaxeError("Error: isSleeping makes no sense if the object is not contained within a Space");return this.zpp_inner.component.sleeping},Object.defineProperty(nape.phys.Body.prototype,"constraints",{get:nape.phys.Body.prototype.get_constraints}),nape.phys.Body.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_nape.util.ZPP_ConstraintList.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},nape.phys.Body.prototype.copy=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world cannot be copied");return this.zpp_inner.copy()},Object.defineProperty(nape.phys.Body.prototype,"position",{get:nape.phys.Body.prototype.get_position,set:nape.phys.Body.prototype.set_position}),nape.phys.Body.prototype.get_position=function(){return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},nape.phys.Body.prototype.set_position=function(position){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==position)throw new js._Boot.HaxeError("Error: Body::position cannot be null");null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var _this=this.zpp_inner.wrap_pos;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==position)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=position.zpp_inner;null!=_this2._validate&&_this2._validate();var x=position.zpp_inner.x;if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=position.zpp_inner;null!=_this3._validate&&_this3._validate();var y=position.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=position.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},Object.defineProperty(nape.phys.Body.prototype,"velocity",{get:nape.phys.Body.prototype.get_velocity,set:nape.phys.Body.prototype.set_velocity}),nape.phys.Body.prototype.get_velocity=function(){return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},nape.phys.Body.prototype.set_velocity=function(velocity){if(null!=velocity&&velocity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==velocity)throw new js._Boot.HaxeError("Error: Body::velocity cannot be null");null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var _this=this.zpp_inner.wrap_vel;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=velocity&&velocity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==velocity)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=velocity&&velocity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=velocity.zpp_inner;null!=_this2._validate&&_this2._validate();var x=velocity.zpp_inner.x;if(null!=velocity&&velocity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=velocity.zpp_inner;null!=_this3._validate&&_this3._validate();var y=velocity.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(velocity.zpp_inner.weak){if(null!=velocity&&velocity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=velocity.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),velocity.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null,velocity.zpp_inner=null;var o=velocity;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},nape.phys.Body.prototype.setVelocityFromTarget=function(targetPosition,targetRotation,deltaTime){if(null!=targetPosition&&targetPosition.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==targetPosition)throw new js._Boot.HaxeError("Cannot set velocity for null target position");if(0==deltaTime)throw new js._Boot.HaxeError("deltaTime cannot be 0 for setVelocityFromTarget");var idt=1/deltaTime;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var _this=this.zpp_inner.wrap_vel;null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var vector=targetPosition.sub(this.zpp_inner.wrap_pos,!0).muleq(idt);if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==vector)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;null!=_this2._validate&&_this2._validate();var x=vector.zpp_inner.x;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var y=vector.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=vector.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}var angularVel=(targetRotation-this.zpp_inner.rot)*idt;if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(this.zpp_inner.angvel!=angularVel){if(angularVel!=angularVel)throw new js._Boot.HaxeError("Error: Body::angularVel cannot be NaN");if(1==this.zpp_inner.type)throw new js._Boot.HaxeError("Error: A static object cannot be given a velocity");this.zpp_inner.angvel=angularVel,this.zpp_inner.wake()}if(targetPosition.zpp_inner.weak){if(null!=targetPosition&&targetPosition.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=targetPosition.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),targetPosition.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=targetPosition.zpp_inner;targetPosition.zpp_inner.outer=null,targetPosition.zpp_inner=null;var o2=targetPosition;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return this},Object.defineProperty(nape.phys.Body.prototype,"kinematicVel",{get:nape.phys.Body.prototype.get_kinematicVel,set:nape.phys.Body.prototype.set_kinematicVel}),nape.phys.Body.prototype.get_kinematicVel=function(){return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},nape.phys.Body.prototype.set_kinematicVel=function(kinematicVel){if(null!=kinematicVel&&kinematicVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==kinematicVel)throw new js._Boot.HaxeError("Error: Body::kinematicVel cannot be null");null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel();var _this=this.zpp_inner.wrap_kinvel;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=kinematicVel&&kinematicVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==kinematicVel)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=kinematicVel&&kinematicVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=kinematicVel.zpp_inner;null!=_this2._validate&&_this2._validate();var x=kinematicVel.zpp_inner.x;if(null!=kinematicVel&&kinematicVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=kinematicVel.zpp_inner;null!=_this3._validate&&_this3._validate();var y=kinematicVel.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(kinematicVel.zpp_inner.weak){if(null!=kinematicVel&&kinematicVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=kinematicVel.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),kinematicVel.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=kinematicVel.zpp_inner;kinematicVel.zpp_inner.outer=null,kinematicVel.zpp_inner=null;var o=kinematicVel;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},Object.defineProperty(nape.phys.Body.prototype,"surfaceVel",{get:nape.phys.Body.prototype.get_surfaceVel,set:nape.phys.Body.prototype.set_surfaceVel}),nape.phys.Body.prototype.get_surfaceVel=function(){return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},nape.phys.Body.prototype.set_surfaceVel=function(surfaceVel){if(null!=surfaceVel&&surfaceVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==surfaceVel)throw new js._Boot.HaxeError("Error: Body::surfaceVel cannot be null");null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel();var _this=this.zpp_inner.wrap_svel;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=surfaceVel&&surfaceVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==surfaceVel)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=surfaceVel&&surfaceVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=surfaceVel.zpp_inner;null!=_this2._validate&&_this2._validate();var x=surfaceVel.zpp_inner.x;if(null!=surfaceVel&&surfaceVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=surfaceVel.zpp_inner;null!=_this3._validate&&_this3._validate();var y=surfaceVel.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(surfaceVel.zpp_inner.weak){if(null!=surfaceVel&&surfaceVel.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=surfaceVel.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),surfaceVel.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=surfaceVel.zpp_inner;surfaceVel.zpp_inner.outer=null,surfaceVel.zpp_inner=null;var o=surfaceVel;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},Object.defineProperty(nape.phys.Body.prototype,"force",{get:nape.phys.Body.prototype.get_force,set:nape.phys.Body.prototype.set_force}),nape.phys.Body.prototype.get_force=function(){return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},nape.phys.Body.prototype.set_force=function(force){if(null!=force&&force.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==force)throw new js._Boot.HaxeError("Error: Body::force cannot be null");null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();var _this=this.zpp_inner.wrap_force;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=force&&force.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==force)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=force&&force.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=force.zpp_inner;null!=_this2._validate&&_this2._validate();var x=force.zpp_inner.x;if(null!=force&&force.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=force.zpp_inner;null!=_this3._validate&&_this3._validate();var y=force.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(force.zpp_inner.weak){if(null!=force&&force.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=force.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),force.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=force.zpp_inner;force.zpp_inner.outer=null,force.zpp_inner=null;var o=force;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},Object.defineProperty(nape.phys.Body.prototype,"constraintVelocity",{get:nape.phys.Body.prototype.get_constraintVelocity}),nape.phys.Body.prototype.get_constraintVelocity=function(){return null==this.zpp_inner.wrapcvel&&this.zpp_inner.setup_cvel(),this.zpp_inner.wrapcvel},Object.defineProperty(nape.phys.Body.prototype,"rotation",{get:nape.phys.Body.prototype.get_rotation,set:nape.phys.Body.prototype.set_rotation}),nape.phys.Body.prototype.get_rotation=function(){return this.zpp_inner.rot},nape.phys.Body.prototype.set_rotation=function(rotation){if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(1==this.zpp_inner.type&&null!=this.zpp_inner.space)throw new js._Boot.HaxeError("Error: Static objects cannot be rotated once inside a Space");if(this.zpp_inner.rot!=rotation){if(rotation!=rotation)throw new js._Boot.HaxeError("Error: Body::rotation cannot be NaN");this.zpp_inner.rot=rotation;var _this=this.zpp_inner;_this.zip_axis=!0;for(var cx_ite=_this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}_this.zip_worldCOM=!0,this.zpp_inner.wake()}return this.zpp_inner.rot},Object.defineProperty(nape.phys.Body.prototype,"angularVel",{get:nape.phys.Body.prototype.get_angularVel,set:nape.phys.Body.prototype.set_angularVel}),nape.phys.Body.prototype.get_angularVel=function(){return this.zpp_inner.angvel},nape.phys.Body.prototype.set_angularVel=function(angularVel){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(this.zpp_inner.angvel!=angularVel){if(angularVel!=angularVel)throw new js._Boot.HaxeError("Error: Body::angularVel cannot be NaN");if(1==this.zpp_inner.type)throw new js._Boot.HaxeError("Error: A static object cannot be given a velocity");this.zpp_inner.angvel=angularVel,this.zpp_inner.wake()}return this.zpp_inner.angvel},Object.defineProperty(nape.phys.Body.prototype,"kinAngVel",{get:nape.phys.Body.prototype.get_kinAngVel,set:nape.phys.Body.prototype.set_kinAngVel}),nape.phys.Body.prototype.get_kinAngVel=function(){return this.zpp_inner.kinangvel},nape.phys.Body.prototype.set_kinAngVel=function(kinAngVel){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(this.zpp_inner.kinangvel!=kinAngVel){if(kinAngVel!=kinAngVel)throw new js._Boot.HaxeError("Error: Body::kinAngVel cannot be NaN");this.zpp_inner.kinangvel=kinAngVel,this.zpp_inner.wake()}return this.zpp_inner.kinangvel},Object.defineProperty(nape.phys.Body.prototype,"torque",{get:nape.phys.Body.prototype.get_torque,set:nape.phys.Body.prototype.set_torque}),nape.phys.Body.prototype.get_torque=function(){return this.zpp_inner.torque},nape.phys.Body.prototype.set_torque=function(torque){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(2!=this.zpp_inner.type)throw new js._Boot.HaxeError("Error: Non-dynamic body cannot have torque applied.");if(torque!=torque)throw new js._Boot.HaxeError("Error: Body::torque cannot be NaN");return this.zpp_inner.torque!=torque&&(this.zpp_inner.torque=torque,this.zpp_inner.wake()),this.zpp_inner.torque},Object.defineProperty(nape.phys.Body.prototype,"bounds",{get:nape.phys.Body.prototype.get_bounds}),nape.phys.Body.prototype.get_bounds=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no bounds");return this.zpp_inner.aabb.wrapper()},Object.defineProperty(nape.phys.Body.prototype,"allowMovement",{get:nape.phys.Body.prototype.get_allowMovement,set:nape.phys.Body.prototype.set_allowMovement}),nape.phys.Body.prototype.get_allowMovement=function(){return!this.zpp_inner.nomove},nape.phys.Body.prototype.set_allowMovement=function(allowMovement){return this.zpp_inner.immutable_midstep("Body::"+(null==allowMovement?"null":""+allowMovement)),!this.zpp_inner.nomove!=allowMovement&&(this.zpp_inner.nomove=!allowMovement,this.zpp_inner.invalidate_mass()),!this.zpp_inner.nomove},Object.defineProperty(nape.phys.Body.prototype,"allowRotation",{get:nape.phys.Body.prototype.get_allowRotation,set:nape.phys.Body.prototype.set_allowRotation}),nape.phys.Body.prototype.get_allowRotation=function(){return!this.zpp_inner.norotate},nape.phys.Body.prototype.set_allowRotation=function(allowRotation){return this.zpp_inner.immutable_midstep("Body::"+(null==allowRotation?"null":""+allowRotation)),!this.zpp_inner.norotate!=allowRotation&&(this.zpp_inner.norotate=!allowRotation,this.zpp_inner.invalidate_inertia()),!this.zpp_inner.norotate},Object.defineProperty(nape.phys.Body.prototype,"massMode",{get:nape.phys.Body.prototype.get_massMode,set:nape.phys.Body.prototype.set_massMode}),nape.phys.Body.prototype.get_massMode=function(){null==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.MassMode_DEFAULT;return null==zpp_nape.util.ZPP_Flags.MassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_FIXED=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp,zpp_nape.util.ZPP_Flags.MassMode_FIXED][this.zpp_inner.massMode]},nape.phys.Body.prototype.set_massMode=function(massMode){if(this.zpp_inner.immutable_midstep("Body::massMode"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==massMode)throw new js._Boot.HaxeError("Error: cannot use null massMode");null==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),this.zpp_inner.massMode=massMode==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT?0:1,this.zpp_inner.invalidate_mass(),null==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.MassMode_DEFAULT;return null==zpp_nape.util.ZPP_Flags.MassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_FIXED=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp,zpp_nape.util.ZPP_Flags.MassMode_FIXED][this.zpp_inner.massMode]},Object.defineProperty(nape.phys.Body.prototype,"constraintMass",{get:nape.phys.Body.prototype.get_constraintMass}),nape.phys.Body.prototype.get_constraintMass=function(){return this.zpp_inner.world||this.zpp_inner.validate_mass(),this.zpp_inner.smass},Object.defineProperty(nape.phys.Body.prototype,"mass",{get:nape.phys.Body.prototype.get_mass,set:nape.phys.Body.prototype.set_mass}),nape.phys.Body.prototype.get_mass=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},nape.phys.Body.prototype.set_mass=function(mass){if(this.zpp_inner.immutable_midstep("Body::mass"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(mass!=mass)throw new js._Boot.HaxeError("Error: Mass cannot be NaN");if(mass<=0)throw new js._Boot.HaxeError("Error: Mass must be strictly positive");if(mass>=1/0)throw new js._Boot.HaxeError("Error: Mass cannot be infinite, use allowMovement = false instead");if(this.zpp_inner.massMode=1,this.zpp_inner.cmass=mass,this.zpp_inner.invalidate_mass(),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");return this.zpp_inner.cmass},Object.defineProperty(nape.phys.Body.prototype,"gravMassMode",{get:nape.phys.Body.prototype.get_gravMassMode,set:nape.phys.Body.prototype.set_gravMassMode}),nape.phys.Body.prototype.get_gravMassMode=function(){null==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT;null==zpp_nape.util.ZPP_Flags.GravMassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_FIXED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.GravMassMode_FIXED;return null==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp,tmp1,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED][this.zpp_inner.massMode]},nape.phys.Body.prototype.set_gravMassMode=function(gravMassMode){if(this.zpp_inner.immutable_midstep("Body::gravMassMode"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==gravMassMode)throw new js._Boot.HaxeError("Error: Cannot use null gravMassMode");var tmp;null==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),gravMassMode==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED?tmp=2:(null==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),tmp=gravMassMode==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT?0:1),this.zpp_inner.gravMassMode=tmp,this.zpp_inner.invalidate_gravMass(),null==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT;null==zpp_nape.util.ZPP_Flags.GravMassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_FIXED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp2=zpp_nape.util.ZPP_Flags.GravMassMode_FIXED;return null==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp1,tmp2,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED][this.zpp_inner.massMode]},Object.defineProperty(nape.phys.Body.prototype,"gravMass",{get:nape.phys.Body.prototype.get_gravMass,set:nape.phys.Body.prototype.set_gravMass}),nape.phys.Body.prototype.get_gravMass=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no gravMass");if(this.zpp_inner.validate_gravMass(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&1!=this.zpp_inner.gravMassMode)throw new js._Boot.HaxeError("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes");return this.zpp_inner.gravMass},nape.phys.Body.prototype.set_gravMass=function(gravMass){if(this.zpp_inner.immutable_midstep("Body::gravMass"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(gravMass!=gravMass)throw new js._Boot.HaxeError("Error: gravMass cannot be NaN");if(this.zpp_inner.gravMassMode=1,this.zpp_inner.gravMass=gravMass,this.zpp_inner.invalidate_gravMass(),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no gravMass");if(this.zpp_inner.validate_gravMass(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&1!=this.zpp_inner.gravMassMode)throw new js._Boot.HaxeError("Error: Given current mass/gravMass modes; Body::gravMass only makes sense if it contains Shapes");return this.zpp_inner.gravMass},Object.defineProperty(nape.phys.Body.prototype,"gravMassScale",{get:nape.phys.Body.prototype.get_gravMassScale,set:nape.phys.Body.prototype.set_gravMassScale}),nape.phys.Body.prototype.get_gravMassScale=function(){if(this.zpp_inner.validate_gravMassScale(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&2!=this.zpp_inner.gravMassMode)throw new js._Boot.HaxeError("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes");return this.zpp_inner.gravMassScale},nape.phys.Body.prototype.set_gravMassScale=function(gravMassScale){if(this.zpp_inner.immutable_midstep("Body::gravMassScale"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(gravMassScale!=gravMassScale)throw new js._Boot.HaxeError("Error: gravMassScale cannot be NaN");if(this.zpp_inner.gravMassMode=2,this.zpp_inner.gravMassScale=gravMassScale,this.zpp_inner.invalidate_gravMassScale(),this.zpp_inner.validate_gravMassScale(),null==this.zpp_inner.shapes.head&&0==this.zpp_inner.massMode&&2!=this.zpp_inner.gravMassMode)throw new js._Boot.HaxeError("Error: Given current mass/gravMass modes; Body::gravMassScale only makes sense if it contains Shapes");return this.zpp_inner.gravMassScale},Object.defineProperty(nape.phys.Body.prototype,"inertiaMode",{get:nape.phys.Body.prototype.get_inertiaMode,set:nape.phys.Body.prototype.set_inertiaMode}),nape.phys.Body.prototype.get_inertiaMode=function(){null==zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT;return null==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},nape.phys.Body.prototype.set_inertiaMode=function(inertiaMode){if(this.zpp_inner.immutable_midstep("Body::inertiaMode"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==inertiaMode)throw new js._Boot.HaxeError("Error: Cannot use null InertiaMode");null==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),this.zpp_inner.inertiaMode=inertiaMode==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED?1:0,this.zpp_inner.invalidate_inertia(),null==zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT;return null==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),[tmp,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},Object.defineProperty(nape.phys.Body.prototype,"constraintInertia",{get:nape.phys.Body.prototype.get_constraintInertia}),nape.phys.Body.prototype.get_constraintInertia=function(){return this.zpp_inner.world||this.zpp_inner.validate_inertia(),this.zpp_inner.sinertia},Object.defineProperty(nape.phys.Body.prototype,"inertia",{get:nape.phys.Body.prototype.get_inertia,set:nape.phys.Body.prototype.set_inertia}),nape.phys.Body.prototype.get_inertia=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no inertia");var tmp,_this;(this.zpp_inner.validate_inertia(),0==this.zpp_inner.inertiaMode)?tmp=null==this.zpp_inner.wrap_shapes.zpp_inner.inner.head:tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},nape.phys.Body.prototype.set_inertia=function(inertia){if(this.zpp_inner.immutable_midstep("Body::inertia"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(inertia!=inertia)throw new js._Boot.HaxeError("Error: Inertia cannot be NaN");if(inertia<=0)throw new js._Boot.HaxeError("Error: Inertia must be strictly positive");if(inertia>=1/0)throw new js._Boot.HaxeError("Error: Inertia cannot be infinite, use allowRotation = false instead");if(this.zpp_inner.inertiaMode=1,this.zpp_inner.cinertia=inertia,this.zpp_inner.invalidate_inertia(),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no inertia");var tmp,_this;(this.zpp_inner.validate_inertia(),0==this.zpp_inner.inertiaMode)?tmp=null==this.zpp_inner.wrap_shapes.zpp_inner.inner.head:tmp=!1;if(tmp)throw new js._Boot.HaxeError("Error: Given current inertia mode flag, Body::inertia only makes sense if Body contains Shapes");return this.zpp_inner.cinertia},nape.phys.Body.prototype.connectedBodies=function(depth,output){return null==depth&&(depth=-1),this.zpp_inner.connectedBodies(depth,output)},nape.phys.Body.prototype.interactingBodies=function(type,depth,output){var arbiter_type;return null==depth&&(depth=-1),null==type?arbiter_type=zpp_nape.dynamics.ZPP_Arbiter.COL|zpp_nape.dynamics.ZPP_Arbiter.SENSOR|zpp_nape.dynamics.ZPP_Arbiter.FLUID:(null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),type==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION?arbiter_type=zpp_nape.dynamics.ZPP_Arbiter.COL:(null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),arbiter_type=type==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR?zpp_nape.dynamics.ZPP_Arbiter.SENSOR:zpp_nape.dynamics.ZPP_Arbiter.FLUID)),this.zpp_inner.interactingBodies(arbiter_type,depth,output)},nape.phys.Body.prototype.crushFactor=function(){if(null==(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))throw new js._Boot.HaxeError("Error: Makes no sense to see how much an object not taking part in a simulation is being crushed");var msum=0,ret;if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=0,ret1.y=0,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),0==ret.zpp_inner.x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=0==ret.zpp_inner.y}else tmp=!1;if(!tmp){ret.zpp_inner.x=0,ret.zpp_inner.y=0;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1;var jsum=ret;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp1;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp1=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp1=!1),!tmp1)break;_g.zpp_critical=!1;var arb,imp3=_g.zpp_inner.at(_g.zpp_i++).totalImpulse(this),imp=imp3.xy();if(jsum.addeq(imp),null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=imp.zpp_inner;null!=_this4._validate&&_this4._validate();var msum1=imp.zpp_inner.x;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=imp.zpp_inner;null!=_this5._validate&&_this5._validate();var msum2=msum1*imp.zpp_inner.x;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=imp.zpp_inner;null!=_this6._validate&&_this6._validate();var msum3=imp.zpp_inner.y;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=imp.zpp_inner;if(null!=_this7._validate&&_this7._validate(),msum+=Math.sqrt(msum2+msum3*imp.zpp_inner.y),null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=imp.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),imp.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=imp.zpp_inner;imp.zpp_inner.outer=null,imp.zpp_inner=null;var o=imp;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,imp3.dispose()}null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=zpp_nape.util.ZPP_ConstraintList.get(this.zpp_inner.constraints,!0));var _this9=this.zpp_inner.wrap_constraints;_this9.zpp_inner.valmod();for(var _g1=nape.constraint.ConstraintIterator.get(_this9);;){_g1.zpp_inner.zpp_inner.valmod();var _this10=_g1.zpp_inner;_this10.zpp_inner.valmod(),_this10.zpp_inner.zip_length&&(_this10.zpp_inner.zip_length=!1,_this10.zpp_inner.user_length=_this10.zpp_inner.inner.length);var length1=_this10.zpp_inner.user_length,tmp2;if(_g1.zpp_critical=!0,_g1.zpp_i<length1?tmp2=!0:(_g1.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp2=!1),!tmp2)break;_g1.zpp_critical=!1;var con,imp31=_g1.zpp_inner.at(_g1.zpp_i++).bodyImpulse(this),imp1=imp31.xy();if(jsum.addeq(imp1),null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=imp1.zpp_inner;null!=_this11._validate&&_this11._validate();var msum4=imp1.zpp_inner.x;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=imp1.zpp_inner;null!=_this12._validate&&_this12._validate();var msum5=msum4*imp1.zpp_inner.x;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=imp1.zpp_inner;null!=_this13._validate&&_this13._validate();var msum6=imp1.zpp_inner.y;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=imp1.zpp_inner;if(null!=_this14._validate&&_this14._validate(),msum+=Math.sqrt(msum5+msum6*imp1.zpp_inner.y),null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=imp1.zpp_inner;if(_this15._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this15._isimmutable&&_this15._isimmutable(),imp1.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=imp1.zpp_inner;imp1.zpp_inner.outer=null,imp1.zpp_inner=null;var o2=imp1;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3,imp31.dispose()}if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=jsum.zpp_inner;null!=_this16._validate&&_this16._validate();var ret2=jsum.zpp_inner.x;if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=jsum.zpp_inner;null!=_this17._validate&&_this17._validate();var ret3=ret2*jsum.zpp_inner.x;if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=jsum.zpp_inner;null!=_this18._validate&&_this18._validate();var ret4=jsum.zpp_inner.y;if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=jsum.zpp_inner;null!=_this19._validate&&_this19._validate();var ret5=msum-Math.sqrt(ret3+ret4*jsum.zpp_inner.y);if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no mass");if(this.zpp_inner.validate_mass(),0==this.zpp_inner.massMode&&null==this.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");var ret6=ret5/(this.zpp_inner.cmass*(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.pre_dt);if(null!=jsum&&jsum.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=jsum.zpp_inner;if(_this20._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this20._isimmutable&&_this20._isimmutable(),jsum.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=jsum.zpp_inner;jsum.zpp_inner.outer=null,jsum.zpp_inner=null;var o4=jsum;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;return null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5,ret6},nape.phys.Body.prototype.localPointToWorld=function(point,weak){if(null==weak&&(weak=!1),null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");var _this=this.zpp_inner;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));var tempx=0,tempy=0,tempx1=this.zpp_inner.axisy;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var tempx2=tempx1*point.zpp_inner.x,tempx3=this.zpp_inner.axisx;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;if(null!=_this2._validate&&_this2._validate(),tempx=tempx2-tempx3*point.zpp_inner.y,null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=point.zpp_inner;null!=_this3._validate&&_this3._validate();var tempy1=point.zpp_inner.x*this.zpp_inner.axisx;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=point.zpp_inner;if(null!=_this4._validate&&_this4._validate(),tempy=tempy1+point.zpp_inner.y*this.zpp_inner.axisy,point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=point.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}var x=tempx+this.zpp_inner.posx,y=tempy+this.zpp_inner.posy,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner,tmp;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret.zpp_inner;if(null!=_this7._validate&&_this7._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this9=ret.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}}return ret.zpp_inner.weak=weak1,ret},nape.phys.Body.prototype.worldPointToLocal=function(point,weak){if(null==weak&&(weak=!1),null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");var _this=this.zpp_inner;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));var tempx=0,tempy=0,pointx=0,pointy=0;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;if(null!=_this1._validate&&_this1._validate(),pointx=point.zpp_inner.x-this.zpp_inner.posx,null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;if(null!=_this2._validate&&_this2._validate(),pointy=point.zpp_inner.y-this.zpp_inner.posy,tempx=pointx*this.zpp_inner.axisy+pointy*this.zpp_inner.axisx,tempy=pointy*this.zpp_inner.axisy-pointx*this.zpp_inner.axisx,point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=point.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}var x=tempx,y=tempy,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this7=ret.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}return ret.zpp_inner.weak=weak1,ret},nape.phys.Body.prototype.localVectorToWorld=function(vector,weak){if(null==weak&&(weak=!1),null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");var _this=this.zpp_inner;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));var tempx=0,tempy=0,tempx1=this.zpp_inner.axisy;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var tempx2=tempx1*vector.zpp_inner.x,tempx3=this.zpp_inner.axisx;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;if(null!=_this2._validate&&_this2._validate(),tempx=tempx2-tempx3*vector.zpp_inner.y,null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var tempy1=vector.zpp_inner.x*this.zpp_inner.axisx;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;if(null!=_this4._validate&&_this4._validate(),tempy=tempy1+vector.zpp_inner.y*this.zpp_inner.axisy,vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=vector.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}var x=tempx,y=tempy,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner,tmp;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret.zpp_inner;if(null!=_this7._validate&&_this7._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this9=ret.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}}return ret.zpp_inner.weak=weak1,ret},nape.phys.Body.prototype.worldVectorToLocal=function(vector,weak){if(null==weak&&(weak=!1),null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==vector)throw new js._Boot.HaxeError("Error: Cannot transform null Vec2");var _this=this.zpp_inner;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));var tempx=0,tempy=0;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=vector.zpp_inner;null!=_this1._validate&&_this1._validate();var tempx1=vector.zpp_inner.x*this.zpp_inner.axisy;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=vector.zpp_inner;if(null!=_this2._validate&&_this2._validate(),tempx=tempx1+vector.zpp_inner.y*this.zpp_inner.axisx,null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=vector.zpp_inner;null!=_this3._validate&&_this3._validate();var tempy1=vector.zpp_inner.y*this.zpp_inner.axisy;if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=vector.zpp_inner;if(null!=_this4._validate&&_this4._validate(),tempy=tempy1-vector.zpp_inner.x*this.zpp_inner.axisx,vector.zpp_inner.weak){if(null!=vector&&vector.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=vector.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),vector.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=vector.zpp_inner;vector.zpp_inner.outer=null,vector.zpp_inner=null;var o=vector;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}var x=tempx,y=tempy,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret.zpp_inner,tmp;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret.zpp_inner;if(null!=_this7._validate&&_this7._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this9=ret.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}}return ret.zpp_inner.weak=weak1,ret},nape.phys.Body.prototype.applyImpulse=function(impulse,pos,sleepable){if(null==sleepable&&(sleepable=!1),null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==impulse)throw new js._Boot.HaxeError("Error: Cannot apply null impulse to Body");var tmp;if(sleepable){if(null==this.zpp_inner.space)throw new js._Boot.HaxeError("Error: isSleeping makes no sense if the object is not contained within a Space");tmp=this.zpp_inner.component.sleeping}else tmp=!1;if(tmp){if(impulse.zpp_inner.weak){if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=impulse.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),impulse.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=impulse.zpp_inner;impulse.zpp_inner.outer=null,impulse.zpp_inner=null;var o=impulse;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null!=pos&&pos.zpp_inner.weak){if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=pos.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),pos.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=pos.zpp_inner;pos.zpp_inner.outer=null,pos.zpp_inner=null;var o2=pos;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}return this}this.zpp_inner.validate_mass();var t=this.zpp_inner.imass,tmp1=this.zpp_inner,tmp2=tmp1.velx;if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=impulse.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp1.velx=tmp2+impulse.zpp_inner.x*t;var tmp3=this.zpp_inner,tmp4=tmp3.vely;if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=impulse.zpp_inner;if(null!=_this3._validate&&_this3._validate(),tmp3.vely=tmp4+impulse.zpp_inner.y*t,null!=pos){var rx=0,ry=0;if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=pos.zpp_inner;if(null!=_this4._validate&&_this4._validate(),rx=pos.zpp_inner.x-this.zpp_inner.posx,null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=pos.zpp_inner;null!=_this5._validate&&_this5._validate(),ry=pos.zpp_inner.y-this.zpp_inner.posy,this.zpp_inner.validate_inertia();var tmp5=this.zpp_inner,tmp6=tmp5.angvel;if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=impulse.zpp_inner;null!=_this6._validate&&_this6._validate();var tmp7=impulse.zpp_inner.y*rx;if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=impulse.zpp_inner;if(null!=_this7._validate&&_this7._validate(),tmp5.angvel=tmp6+(tmp7-impulse.zpp_inner.x*ry)*this.zpp_inner.iinertia,pos.zpp_inner.weak){if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=pos.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),pos.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=pos.zpp_inner;pos.zpp_inner.outer=null,pos.zpp_inner=null;var o4=pos;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}}if(sleepable||2==this.zpp_inner.type&&this.zpp_inner.wake(),impulse.zpp_inner.weak){if(null!=impulse&&impulse.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=impulse.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),impulse.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner3=impulse.zpp_inner;impulse.zpp_inner.outer=null,impulse.zpp_inner=null;var o6=impulse;o6.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o6:zpp_nape.util.ZPP_PubPool.poolVec2=o6,zpp_nape.util.ZPP_PubPool.nextVec2=o6,o6.zpp_disp=!0;var o7=inner3;null!=o7.outer&&(o7.outer.zpp_inner=null,o7.outer=null),o7._isimmutable=null,o7._validate=null,o7._invalidate=null,o7.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o7}return this},nape.phys.Body.prototype.applyAngularImpulse=function(impulse,sleepable){if(null==sleepable&&(sleepable=!1),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");var tmp;if(sleepable){if(null==this.zpp_inner.space)throw new js._Boot.HaxeError("Error: isSleeping makes no sense if the object is not contained within a Space");tmp=this.zpp_inner.component.sleeping}else tmp=!1;return tmp?this:(this.zpp_inner.validate_inertia(),this.zpp_inner.angvel+=impulse*this.zpp_inner.iinertia,sleepable||2==this.zpp_inner.type&&this.zpp_inner.wake(),this)},nape.phys.Body.prototype.translateShapes=function(translation){if(this.zpp_inner.immutable_midstep("Body::translateShapes()"),null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==translation)throw new js._Boot.HaxeError("Error: Cannot displace by null Vec2");var weak=translation.zpp_inner.weak;translation.zpp_inner.weak=!1;for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s;cx_ite.elt.outer.translate(translation),cx_ite=cx_ite.next}if(translation.zpp_inner.weak=weak,translation.zpp_inner.weak){if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=translation.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),translation.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=translation.zpp_inner;translation.zpp_inner.outer=null,translation.zpp_inner=null;var o=translation;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.phys.Body.prototype.rotateShapes=function(angle){if(this.zpp_inner.immutable_midstep("Body::rotateShapes()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s;cx_ite.elt.outer.rotate(angle),cx_ite=cx_ite.next}return this},nape.phys.Body.prototype.scaleShapes=function(scaleX,scaleY){if(this.zpp_inner.immutable_midstep("Body::scaleShapes()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s;cx_ite.elt.outer.scale(scaleX,scaleY),cx_ite=cx_ite.next}return this},nape.phys.Body.prototype.transformShapes=function(matrix){if(this.zpp_inner.immutable_midstep("Body::transformShapes()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s;cx_ite.elt.outer.transform(matrix),cx_ite=cx_ite.next}return this},nape.phys.Body.prototype.align=function(){if(this.zpp_inner.immutable_midstep("Body::align()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(null==this.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Cannot align empty Body");this.zpp_inner.validate_localCOM();var x=-this.zpp_inner.localCOMx,y=-this.zpp_inner.localCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1;var dx=ret;this.translateShapes(dx);var dx2=this.localVectorToWorld(dx);if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos.subeq(dx2),this.zpp_inner.pre_posx<1/0){var t=1,tmp1=this.zpp_inner,tmp2=tmp1.pre_posx;if(null!=dx2&&dx2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=dx2.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp1.pre_posx=tmp2-1*dx2.zpp_inner.x;var tmp3=this.zpp_inner,tmp4=tmp3.pre_posy;if(null!=dx2&&dx2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=dx2.zpp_inner;null!=_this5._validate&&_this5._validate(),tmp3.pre_posy=tmp4-1*dx2.zpp_inner.y}if(null!=dx&&dx.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=dx.zpp_inner;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),dx.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=dx.zpp_inner;dx.zpp_inner.outer=null,dx.zpp_inner=null;var o=dx;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;if(null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,null!=dx2&&dx2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=dx2.zpp_inner;if(_this7._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this7._isimmutable&&_this7._isimmutable(),dx2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=dx2.zpp_inner;dx2.zpp_inner.outer=null,dx2.zpp_inner=null;var o2=dx2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;return null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3,this},nape.phys.Body.prototype.rotate=function(centre,angle){if(null!=centre&&centre.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==centre)throw new js._Boot.HaxeError("Error: Cannot rotate about a null Vec2");if(angle!=angle)throw new js._Boot.HaxeError("Error: Cannot rotate by NaN radians");var weak=centre.zpp_inner.weak;centre.zpp_inner.weak=!1,null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var del=this.zpp_inner.wrap_pos.sub(centre);del.rotate(angle);var position=centre.add(del,!0);if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==position)throw new js._Boot.HaxeError("Error: Body::position cannot be null");null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var _this=this.zpp_inner.wrap_pos;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==position)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=position.zpp_inner;null!=_this2._validate&&_this2._validate();var x=position.zpp_inner.x;if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=position.zpp_inner;null!=_this3._validate&&_this3._validate();var y=position.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=position.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),null!=del&&del.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=del.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),del.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=del.zpp_inner;del.zpp_inner.outer=null,del.zpp_inner=null;var o2=del;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3;var _g=this,rotation=_g.zpp_inner.rot+angle;if(_g.zpp_inner.immutable_midstep("Body::rotation"),_g.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");if(1==_g.zpp_inner.type&&null!=_g.zpp_inner.space)throw new js._Boot.HaxeError("Error: Static objects cannot be rotated once inside a Space");if(_g.zpp_inner.rot!=rotation){if(rotation!=rotation)throw new js._Boot.HaxeError("Error: Body::rotation cannot be NaN");_g.zpp_inner.rot=rotation;var _this10=_g.zpp_inner;_this10.zip_axis=!0;for(var cx_ite=_this10.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}_this10.zip_worldCOM=!0,_g.zpp_inner.wake()}if(centre.zpp_inner.weak=weak,centre.zpp_inner.weak){if(null!=centre&&centre.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=centre.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),centre.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=centre.zpp_inner;centre.zpp_inner.outer=null,centre.zpp_inner=null;var o4=centre;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}return this},nape.phys.Body.prototype.setShapeMaterials=function(material){if(this.zpp_inner.immutable_midstep("Body::setShapeMaterials()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s,_this=cx_ite.elt.outer;if(_this.zpp_inner.immutable_midstep("Shape::material"),null==material)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape material");_this.zpp_inner.setMaterial(material.zpp_inner),_this.zpp_inner.material.wrapper(),cx_ite=cx_ite.next}return this},nape.phys.Body.prototype.setShapeFilters=function(filter){if(this.zpp_inner.immutable_midstep("Body::setShapeFilters()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s,_this=cx_ite.elt.outer;if(_this.zpp_inner.immutable_midstep("Shape::filter"),null==filter)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape filter");_this.zpp_inner.setFilter(filter.zpp_inner),_this.zpp_inner.filter.wrapper(),cx_ite=cx_ite.next}return this},nape.phys.Body.prototype.setShapeFluidProperties=function(fluidProperties){if(this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()"),this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world is immutable");for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s,_this=cx_ite.elt.outer;if(null==fluidProperties)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");_this.zpp_inner.setFluid(fluidProperties.zpp_inner),_this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==_this.zpp_inner.fluidProperties&&_this.zpp_inner.setFluid((new nape.phys.FluidProperties).zpp_inner),_this.zpp_inner.fluidProperties.wrapper(),cx_ite=cx_ite.next}return this},Object.defineProperty(nape.phys.Body.prototype,"localCOM",{get:nape.phys.Body.prototype.get_localCOM}),nape.phys.Body.prototype.get_localCOM=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no localCOM");if(null==this.zpp_inner.wrap_localCOM){var x=this.zpp_inner.localCOMx,y=this.zpp_inner.localCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.zpp_inner.wrap_localCOM=ret,this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=$bind($_=this.zpp_inner,$_.getlocalCOM)}return this.zpp_inner.wrap_localCOM},Object.defineProperty(nape.phys.Body.prototype,"worldCOM",{get:nape.phys.Body.prototype.get_worldCOM}),nape.phys.Body.prototype.get_worldCOM=function(){if(this.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no worldCOM");if(null==this.zpp_inner.wrap_worldCOM){var x=this.zpp_inner.worldCOMx,y=this.zpp_inner.worldCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=ret,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind($_=this.zpp_inner,$_.getworldCOM)}return this.zpp_inner.wrap_worldCOM},nape.phys.Body.prototype.normalImpulse=function(body,freshOnly){null==freshOnly&&(freshOnly=!1);var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null).normalImpulse(this,freshOnly),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.tangentImpulse=function(body,freshOnly){null==freshOnly&&(freshOnly=!1);var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null).tangentImpulse(this,freshOnly),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.totalContactsImpulse=function(body,freshOnly){null==freshOnly&&(freshOnly=!1);var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null).totalImpulse(this,freshOnly),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.rollingImpulse=function(body,freshOnly){null==freshOnly&&(freshOnly=!1);var ret=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper();ret+=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null).rollingImpulse(this,freshOnly)}}return ret},nape.phys.Body.prototype.buoyancyImpulse=function(body){var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?_this.zpp_inner.fluidarb.outer_zn:null).buoyancyImpulse(this),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.dragImpulse=function(body){var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?_this.zpp_inner.fluidarb.outer_zn:null).dragImpulse(this),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.totalFluidImpulse=function(body){var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var _this=arb.wrapper(),imp=(_this.zpp_inner.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?_this.zpp_inner.fluidarb.outer_zn:null).totalImpulse(this),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;if(null!=_this2._validate&&_this2._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp.zpp_inner;null!=_this3._validate&&_this3._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.constraintsImpulse=function(){for(var retx=0,rety=0,retz=0,cx_ite=this.zpp_inner.constraints.head;null!=cx_ite;){var con,imp=cx_ite.elt.outer.bodyImpulse(this),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=imp.zpp_inner;if(null!=_this._validate&&_this._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;null!=_this2._validate&&_this2._validate(),retz+=1*imp.zpp_inner.z,imp.dispose(),cx_ite=cx_ite.next}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.totalImpulse=function(body,freshOnly){null==freshOnly&&(freshOnly=!1);var retx=0,rety=0,retz=0,arbs=this.zpp_inner.arbiters;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.zpp_inner.arbiters,!0));for(var _g=this.zpp_inner.wrap_arbiters.iterator();;){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl(),tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.dynamics.ArbiterIterator.zpp_pool,nape.dynamics.ArbiterIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var oarb,arb=_g.zpp_inner.at(_g.zpp_i++).zpp_inner;if(arb.type!=zpp_nape.dynamics.ZPP_Arbiter.SENSOR&&(null==body||arb.b2==body.zpp_inner||arb.b1==body.zpp_inner)){var imp=arb.wrapper().totalImpulse(this,freshOnly),t=1,t1=1;if(null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=imp.zpp_inner;if(null!=_this._validate&&_this._validate(),retx+=1*imp.zpp_inner.x,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=imp.zpp_inner;if(null!=_this1._validate&&_this1._validate(),rety+=1*imp.zpp_inner.y,null!=imp&&imp.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=imp.zpp_inner;null!=_this2._validate&&_this2._validate(),retz+=1*imp.zpp_inner.z,imp.dispose()}}for(var cx_ite=this.zpp_inner.constraints.head;null!=cx_ite;){var con=cx_ite.elt;if(con.active){var imp1=con.outer.bodyImpulse(this),t2=1,t3=1;if(null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=imp1.zpp_inner;if(null!=_this3._validate&&_this3._validate(),retx+=1*imp1.zpp_inner.x,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=imp1.zpp_inner;if(null!=_this4._validate&&_this4._validate(),rety+=1*imp1.zpp_inner.y,null!=imp1&&imp1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=imp1.zpp_inner;null!=_this5._validate&&_this5._validate(),retz+=1*imp1.zpp_inner.z,imp1.dispose()}cx_ite=cx_ite.next}return nape.geom.Vec3.get(retx,rety,retz)},nape.phys.Body.prototype.contains=function(point){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot check containment of null point");var wasWeak=point.zpp_inner.weak,retvar;point.zpp_inner.weak=!1,retvar=!1;for(var cx_ite=this.zpp_inner.shapes.head;null!=cx_ite;){var s;if(cx_ite.elt.outer.contains(point)){retvar=!0;break}cx_ite=cx_ite.next}if(point.zpp_inner.weak=wasWeak,point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return retvar},nape.phys.Body.prototype.toString=function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},nape.phys.Body.prototype.__class__=nape.phys.Body,nape.phys.BodyIterator=$hxClasses["nape.phys.BodyIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_BodyList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate BodyIterator derp!")},nape.phys.BodyIterator.__name__=["nape","phys","BodyIterator"],nape.phys.BodyIterator.get=function(list){var ret;if(null==nape.phys.BodyIterator.zpp_pool){zpp_nape.util.ZPP_BodyList.internal=!0;var ret1=new nape.phys.BodyIterator;zpp_nape.util.ZPP_BodyList.internal=!1,ret=ret1}else{var r=nape.phys.BodyIterator.zpp_pool;nape.phys.BodyIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.phys.BodyIterator.prototype.zpp_inner=null,nape.phys.BodyIterator.prototype.zpp_i=null,nape.phys.BodyIterator.prototype.zpp_critical=null,nape.phys.BodyIterator.prototype.zpp_next=null,nape.phys.BodyIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.phys.BodyIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.phys.BodyIterator.prototype.__class__=nape.phys.BodyIterator,nape.phys.BodyList=$hxClasses["nape.phys.BodyList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_BodyList,this.zpp_inner.outer=this},nape.phys.BodyList.__name__=["nape","phys","BodyList"],nape.phys.BodyList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.phys.BodyList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.phys.BodyList.prototype.zpp_inner=null,Object.defineProperty(nape.phys.BodyList.prototype,"length",{get:nape.phys.BodyList.prototype.get_length}),nape.phys.BodyList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.phys.BodyList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.phys.BodyList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.phys.BodyList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.BodyList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.BodyList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.phys.BodyList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.phys.BodyList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.phys.BodyList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.phys.BodyList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: BodyList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.phys.BodyList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.phys.BodyList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.phys.BodyIterator.get(this)},nape.phys.BodyList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.phys.BodyList;this.zpp_inner.valmod();for(var _g=nape.phys.BodyIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Body is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.phys.BodyList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.phys.BodyIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.phys.BodyList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.phys.BodyIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.phys.BodyList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.phys.BodyIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.phys.BodyList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.phys.BodyList.prototype.__class__=nape.phys.BodyList,nape.phys.BodyType=$hxClasses["nape.phys.BodyType"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate BodyType derp!")},nape.phys.BodyType.__name__=["nape","phys","BodyType"],nape.phys.BodyType.STATIC=null,nape.phys.BodyType.get_STATIC=function(){return null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.BodyType_STATIC},nape.phys.BodyType.DYNAMIC=null,nape.phys.BodyType.get_DYNAMIC=function(){return null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC},nape.phys.BodyType.KINEMATIC=null,nape.phys.BodyType.get_KINEMATIC=function(){return null==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC},nape.phys.BodyType.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.BodyType_STATIC?"STATIC":(null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC?"DYNAMIC":(null==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC?"KINEMATIC":""))},nape.phys.BodyType.prototype.__class__=nape.phys.BodyType,nape.phys.Compound=$hxClasses["nape.phys.Compound"]=function(){this.zpp_inner=null,nape.phys.Interactor.zpp_internalAlloc=!0,nape.phys.Interactor.call(this),nape.phys.Interactor.zpp_internalAlloc=!1,this.zpp_inner=new zpp_nape.phys.ZPP_Compound,this.zpp_inner.outer=this,this.zpp_inner.outer_i=this,this.zpp_inner_i=this.zpp_inner,this.zpp_inner.insert_cbtype(zpp_nape.callbacks.ZPP_CbType.ANY_COMPOUND.zpp_inner)},nape.phys.Compound.__name__=["nape","phys","Compound"],nape.phys.Compound.__super__=nape.phys.Interactor,nape.phys.Interactor.prototype)nape.phys.Compound.prototype[k]=nape.phys.Interactor.prototype[k];for(var k in nape.phys.Compound.prototype.zpp_inner=null,Object.defineProperty(nape.phys.Compound.prototype,"bodies",{get:nape.phys.Compound.prototype.get_bodies}),nape.phys.Compound.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},Object.defineProperty(nape.phys.Compound.prototype,"constraints",{get:nape.phys.Compound.prototype.get_constraints}),nape.phys.Compound.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},Object.defineProperty(nape.phys.Compound.prototype,"compounds",{get:nape.phys.Compound.prototype.get_compounds}),nape.phys.Compound.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},Object.defineProperty(nape.phys.Compound.prototype,"compound",{get:nape.phys.Compound.prototype.get_compound,set:nape.phys.Compound.prototype.set_compound}),nape.phys.Compound.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},nape.phys.Compound.prototype.set_compound=function(compound){if(this.zpp_inner.immutable_midstep("Compound::compound"),(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=compound&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this),null!=compound)){var _this=compound.zpp_inner.wrap_compounds;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},Object.defineProperty(nape.phys.Compound.prototype,"space",{get:nape.phys.Compound.prototype.get_space,set:nape.phys.Compound.prototype.set_space}),nape.phys.Compound.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.phys.Compound.prototype.set_space=function(space){if(null!=this.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");if(this.zpp_inner.immutable_midstep("Compound::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=space&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this),null!=space)){var _this=space.zpp_inner.wrap_compounds;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},nape.phys.Compound.prototype.toString=function(){return"Compound"+this.zpp_inner_i.id},nape.phys.Compound.prototype.copy=function(){return this.zpp_inner.copy()},nape.phys.Compound.prototype.breakApart=function(){this.zpp_inner.breakApart()},nape.phys.Compound.prototype.visitBodies=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Compound::visitBodies");var _this=this.zpp_inner.wrap_bodies;_this.zpp_inner.valmod();for(var _g=nape.phys.BodyIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp,b;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1,lambda(_g.zpp_inner.at(_g.zpp_i++))}var _this2=this.zpp_inner.wrap_compounds;_this2.zpp_inner.valmod();for(var _g1=nape.phys.CompoundIterator.get(_this2);;){_g1.zpp_inner.zpp_inner.valmod();var _this3=_g1.zpp_inner;_this3.zpp_inner.valmod(),_this3.zpp_inner.zip_length&&(_this3.zpp_inner.zip_length=!1,_this3.zpp_inner.user_length=_this3.zpp_inner.inner.length);var length1=_this3.zpp_inner.user_length,tmp1,c;if(_g1.zpp_critical=!0,_g1.zpp_i<length1?tmp1=!0:(_g1.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp1=!1),!tmp1)break;_g1.zpp_critical=!1,_g1.zpp_inner.at(_g1.zpp_i++).visitBodies(lambda)}},nape.phys.Compound.prototype.visitConstraints=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Compound::visitConstraints");var _this=this.zpp_inner.wrap_constraints;_this.zpp_inner.valmod();for(var _g=nape.constraint.ConstraintIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp,c;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1,lambda(_g.zpp_inner.at(_g.zpp_i++))}var _this2=this.zpp_inner.wrap_compounds;_this2.zpp_inner.valmod();for(var _g1=nape.phys.CompoundIterator.get(_this2);;){_g1.zpp_inner.zpp_inner.valmod();var _this3=_g1.zpp_inner;_this3.zpp_inner.valmod(),_this3.zpp_inner.zip_length&&(_this3.zpp_inner.zip_length=!1,_this3.zpp_inner.user_length=_this3.zpp_inner.inner.length);var length1=_this3.zpp_inner.user_length,tmp1,c1;if(_g1.zpp_critical=!0,_g1.zpp_i<length1?tmp1=!0:(_g1.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp1=!1),!tmp1)break;_g1.zpp_critical=!1,_g1.zpp_inner.at(_g1.zpp_i++).visitConstraints(lambda)}},nape.phys.Compound.prototype.visitCompounds=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Compound::visitConstraints");var _this=this.zpp_inner.wrap_compounds;_this.zpp_inner.valmod();for(var _g=nape.phys.CompoundIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var c=_g.zpp_inner.at(_g.zpp_i++);lambda(c),c.visitCompounds(lambda)}},nape.phys.Compound.prototype.COM=function(weak){null==weak&&(weak=!1);var x=0,y=0,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=weak1;var ret2=ret,total=0;if(this.visitBodies((function(b){var _this4;if(null!=b.zpp_inner.wrap_shapes.zpp_inner.inner.head){if(b.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no worldCOM");if(null==b.zpp_inner.wrap_worldCOM){var x1=b.zpp_inner.worldCOMx,y1=b.zpp_inner.worldCOMy,ret3;if(null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret3=new nape.geom.Vec2:(ret3=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret3.zpp_pool,ret3.zpp_pool=null,ret3.zpp_disp=!1,ret3==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret3.zpp_inner){var ret4;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret4=new zpp_nape.geom.ZPP_Vec2:(ret4=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret4.next,ret4.next=null),ret4.weak=!1,ret4._immutable=!1,ret4.x=x1,ret4.y=y1,ret3.zpp_inner=ret4,ret3.zpp_inner.outer=ret3}else{if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret3.zpp_inner,tmp1;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret3.zpp_inner;if(null!=_this6._validate&&_this6._validate(),ret3.zpp_inner.x==x1){if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret3.zpp_inner;null!=_this7._validate&&_this7._validate(),tmp1=ret3.zpp_inner.y==y1}else tmp1=!1;if(!tmp1){ret3.zpp_inner.x=x1,ret3.zpp_inner.y=y1;var _this8=ret3.zpp_inner;null!=_this8._invalidate&&_this8._invalidate(_this8)}}ret3.zpp_inner.weak=!1,b.zpp_inner.wrap_worldCOM=ret3,b.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,b.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,b.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind($_=b.zpp_inner,$_.getworldCOM)}var tmp2=b.zpp_inner.wrap_worldCOM;if(b.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no mass");if(b.zpp_inner.validate_mass(),0==b.zpp_inner.massMode&&null==b.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");var tmp3=tmp2.mul(b.zpp_inner.cmass,!0);if(ret2.addeq(tmp3),b.zpp_inner.world)throw new js._Boot.HaxeError("Error: Space::world has no mass");if(b.zpp_inner.validate_mass(),0==b.zpp_inner.massMode&&null==b.zpp_inner.shapes.head)throw new js._Boot.HaxeError("Error: Given current mass mode, Body::mass only makes sense if it contains shapes");total+=b.zpp_inner.cmass}})),0==total)throw new js._Boot.HaxeError("Error: COM of an empty Compound is undefined silly");return ret2.muleq(1/total),ret2},nape.phys.Compound.prototype.translate=function(translation){if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==translation)throw new js._Boot.HaxeError("Error: Cannot translate by null Vec2");var weak=translation.zpp_inner.weak;if(translation.zpp_inner.weak=!1,this.visitBodies((function(b){null==b.zpp_inner.wrap_pos&&b.zpp_inner.setupPosition(),b.zpp_inner.wrap_pos.addeq(translation)})),translation.zpp_inner.weak=weak,translation.zpp_inner.weak){if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=translation.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),translation.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=translation.zpp_inner;translation.zpp_inner.outer=null,translation.zpp_inner=null;var o=translation;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.phys.Compound.prototype.rotate=function(centre,angle){if(null!=centre&&centre.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==centre)throw new js._Boot.HaxeError("Error: Cannot rotate about a null Vec2");if(angle!=angle)throw new js._Boot.HaxeError("Error: Cannot rotate by NaN radians");var weak=centre.zpp_inner.weak;if(centre.zpp_inner.weak=!1,this.visitBodies((function(b){b.rotate(centre,angle)})),centre.zpp_inner.weak=weak,centre.zpp_inner.weak){if(null!=centre&&centre.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=centre.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),centre.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=centre.zpp_inner;centre.zpp_inner.outer=null,centre.zpp_inner=null;var o=centre;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.phys.Compound.prototype.__class__=nape.phys.Compound,nape.phys.CompoundIterator=$hxClasses["nape.phys.CompoundIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_CompoundList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate CompoundIterator derp!")},nape.phys.CompoundIterator.__name__=["nape","phys","CompoundIterator"],nape.phys.CompoundIterator.get=function(list){var ret;if(null==nape.phys.CompoundIterator.zpp_pool){zpp_nape.util.ZPP_CompoundList.internal=!0;var ret1=new nape.phys.CompoundIterator;zpp_nape.util.ZPP_CompoundList.internal=!1,ret=ret1}else{var r=nape.phys.CompoundIterator.zpp_pool;nape.phys.CompoundIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.phys.CompoundIterator.prototype.zpp_inner=null,nape.phys.CompoundIterator.prototype.zpp_i=null,nape.phys.CompoundIterator.prototype.zpp_critical=null,nape.phys.CompoundIterator.prototype.zpp_next=null,nape.phys.CompoundIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.phys.CompoundIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.phys.CompoundIterator.prototype.__class__=nape.phys.CompoundIterator,nape.phys.CompoundList=$hxClasses["nape.phys.CompoundList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_CompoundList,this.zpp_inner.outer=this},nape.phys.CompoundList.__name__=["nape","phys","CompoundList"],nape.phys.CompoundList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.phys.CompoundList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.phys.CompoundList.prototype.zpp_inner=null,Object.defineProperty(nape.phys.CompoundList.prototype,"length",{get:nape.phys.CompoundList.prototype.get_length}),nape.phys.CompoundList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.phys.CompoundList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.phys.CompoundList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.phys.CompoundList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.CompoundList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.CompoundList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.phys.CompoundList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.phys.CompoundList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.phys.CompoundList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.phys.CompoundList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: CompoundList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.phys.CompoundList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.phys.CompoundList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.phys.CompoundIterator.get(this)},nape.phys.CompoundList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.phys.CompoundList;this.zpp_inner.valmod();for(var _g=nape.phys.CompoundIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Compound is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.phys.CompoundList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.phys.CompoundIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.phys.CompoundList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.phys.CompoundIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.phys.CompoundList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.phys.CompoundIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.phys.CompoundList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.phys.CompoundList.prototype.__class__=nape.phys.CompoundList,nape.phys.FluidProperties=$hxClasses["nape.phys.FluidProperties"]=function(density,viscosity){if(null==viscosity&&(viscosity=1),null==density&&(density=1),this.zpp_inner=null,null==zpp_nape.phys.ZPP_FluidProperties.zpp_pool?this.zpp_inner=new zpp_nape.phys.ZPP_FluidProperties:(this.zpp_inner=zpp_nape.phys.ZPP_FluidProperties.zpp_pool,zpp_nape.phys.ZPP_FluidProperties.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,density!=1e3*this.zpp_inner.density){if(density!=density)throw new js._Boot.HaxeError("Error: FluidProperties::density cannot be NaN");this.zpp_inner.density=density/1e3,this.zpp_inner.invalidate()}if(viscosity!=this.zpp_inner.viscosity){if(viscosity!=viscosity)throw new js._Boot.HaxeError("Error: FluidProperties::viscosity cannot be NaN");if(viscosity<0)throw new js._Boot.HaxeError("Error: FluidProperties::viscosity ("+viscosity+") must be >= 0");this.zpp_inner.viscosity=viscosity/1,this.zpp_inner.invalidate()}},nape.phys.FluidProperties.__name__=["nape","phys","FluidProperties"],nape.phys.FluidProperties.prototype.zpp_inner=null,Object.defineProperty(nape.phys.FluidProperties.prototype,"userData",{get:nape.phys.FluidProperties.prototype.get_userData}),nape.phys.FluidProperties.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.phys.FluidProperties.prototype,"shapes",{get:nape.phys.FluidProperties.prototype.get_shapes}),nape.phys.FluidProperties.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_nape.util.ZPP_ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},nape.phys.FluidProperties.prototype.copy=function(){var ret=new nape.phys.FluidProperties(1e3*this.zpp_inner.density,this.zpp_inner.viscosity);null!=this.zpp_inner.userData&&(ret.zpp_inner.userData=Reflect.copy(this.zpp_inner.userData));var gravity=this.zpp_inner.wrap_gravity;if(null==gravity){if(null!=ret.zpp_inner.wrap_gravity){ret.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var _this=ret.zpp_inner.wrap_gravity;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o=_this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret.zpp_inner.wrap_gravity=null}}else{if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");null==ret.zpp_inner.wrap_gravity&&ret.zpp_inner.getgravity();var _this2=ret.zpp_inner.wrap_gravity;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),null==gravity)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=gravity.zpp_inner;null!=_this4._validate&&_this4._validate();var x=gravity.zpp_inner.x;if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=gravity.zpp_inner;null!=_this5._validate&&_this5._validate();var y=gravity.zpp_inner.y;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this2.zpp_inner,tmp;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=_this2.zpp_inner;if(null!=_this7._validate&&_this7._validate(),_this2.zpp_inner.x==x){if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=_this2.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp=_this2.zpp_inner.y==y}else tmp=!1;if(!tmp){_this2.zpp_inner.x=x,_this2.zpp_inner.y=y;var _this9=_this2.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}var ret1=_this2;if(gravity.zpp_inner.weak){if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=gravity.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),gravity.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=gravity.zpp_inner;gravity.zpp_inner.outer=null,gravity.zpp_inner=null;var o2=gravity;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}}return ret},Object.defineProperty(nape.phys.FluidProperties.prototype,"density",{get:nape.phys.FluidProperties.prototype.get_density,set:nape.phys.FluidProperties.prototype.set_density}),nape.phys.FluidProperties.prototype.get_density=function(){return 1e3*this.zpp_inner.density},nape.phys.FluidProperties.prototype.set_density=function(density){if(density!=1e3*this.zpp_inner.density){if(density!=density)throw new js._Boot.HaxeError("Error: FluidProperties::density cannot be NaN");this.zpp_inner.density=density/1e3,this.zpp_inner.invalidate()}return 1e3*this.zpp_inner.density},Object.defineProperty(nape.phys.FluidProperties.prototype,"viscosity",{get:nape.phys.FluidProperties.prototype.get_viscosity,set:nape.phys.FluidProperties.prototype.set_viscosity}),nape.phys.FluidProperties.prototype.get_viscosity=function(){return this.zpp_inner.viscosity},nape.phys.FluidProperties.prototype.set_viscosity=function(viscosity){if(viscosity!=this.zpp_inner.viscosity){if(viscosity!=viscosity)throw new js._Boot.HaxeError("Error: FluidProperties::viscosity cannot be NaN");if(viscosity<0)throw new js._Boot.HaxeError("Error: FluidProperties::viscosity ("+viscosity+") must be >= 0");this.zpp_inner.viscosity=viscosity/1,this.zpp_inner.invalidate()}return this.zpp_inner.viscosity},Object.defineProperty(nape.phys.FluidProperties.prototype,"gravity",{get:nape.phys.FluidProperties.prototype.get_gravity,set:nape.phys.FluidProperties.prototype.set_gravity}),nape.phys.FluidProperties.prototype.get_gravity=function(){return this.zpp_inner.wrap_gravity},nape.phys.FluidProperties.prototype.set_gravity=function(gravity){if(null==gravity){if(null!=this.zpp_inner.wrap_gravity){this.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var _this=this.zpp_inner.wrap_gravity;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o=_this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,this.zpp_inner.wrap_gravity=null}}else{if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var _this2=this.zpp_inner.wrap_gravity;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),null==gravity)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=gravity.zpp_inner;null!=_this4._validate&&_this4._validate();var x=gravity.zpp_inner.x;if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=gravity.zpp_inner;null!=_this5._validate&&_this5._validate();var y=gravity.zpp_inner.y;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this2.zpp_inner,tmp;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=_this2.zpp_inner;if(null!=_this7._validate&&_this7._validate(),_this2.zpp_inner.x==x){if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=_this2.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp=_this2.zpp_inner.y==y}else tmp=!1;if(!tmp){_this2.zpp_inner.x=x,_this2.zpp_inner.y=y;var _this9=_this2.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}var ret=_this2;if(gravity.zpp_inner.weak){if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=gravity.zpp_inner;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),gravity.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=gravity.zpp_inner;gravity.zpp_inner.outer=null,gravity.zpp_inner=null;var o2=gravity;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}}return this.zpp_inner.wrap_gravity},nape.phys.FluidProperties.prototype.toString=function(){return"{ density: "+1e3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+Std.string(this.zpp_inner.wrap_gravity)+" }"},nape.phys.FluidProperties.prototype.__class__=nape.phys.FluidProperties,nape.phys.GravMassMode=$hxClasses["nape.phys.GravMassMode"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate GravMassMode derp!")},nape.phys.GravMassMode.__name__=["nape","phys","GravMassMode"],nape.phys.GravMassMode.DEFAULT=null,nape.phys.GravMassMode.get_DEFAULT=function(){return null==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT},nape.phys.GravMassMode.FIXED=null,nape.phys.GravMassMode.get_FIXED=function(){return null==zpp_nape.util.ZPP_Flags.GravMassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_FIXED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.GravMassMode_FIXED},nape.phys.GravMassMode.SCALED=null,nape.phys.GravMassMode.get_SCALED=function(){return null==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.GravMassMode_SCALED},nape.phys.GravMassMode.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT?"DEFAULT":(null==zpp_nape.util.ZPP_Flags.GravMassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_FIXED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.GravMassMode_FIXED?"FIXED":(null==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=new nape.phys.GravMassMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.GravMassMode_SCALED?"SCALED":""))},nape.phys.GravMassMode.prototype.__class__=nape.phys.GravMassMode,nape.phys.InertiaMode=$hxClasses["nape.phys.InertiaMode"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate InertiaMode derp!")},nape.phys.InertiaMode.__name__=["nape","phys","InertiaMode"],nape.phys.InertiaMode.DEFAULT=null,nape.phys.InertiaMode.get_DEFAULT=function(){return null==zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT},nape.phys.InertiaMode.FIXED=null,nape.phys.InertiaMode.get_FIXED=function(){return null==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InertiaMode_FIXED},nape.phys.InertiaMode.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT?"DEFAULT":(null==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=new nape.phys.InertiaMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.InertiaMode_FIXED?"FIXED":"")},nape.phys.InertiaMode.prototype.__class__=nape.phys.InertiaMode,nape.phys.InteractorIterator=$hxClasses["nape.phys.InteractorIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_InteractorList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate InteractorIterator derp!")},nape.phys.InteractorIterator.__name__=["nape","phys","InteractorIterator"],nape.phys.InteractorIterator.get=function(list){var ret;if(null==nape.phys.InteractorIterator.zpp_pool){zpp_nape.util.ZPP_InteractorList.internal=!0;var ret1=new nape.phys.InteractorIterator;zpp_nape.util.ZPP_InteractorList.internal=!1,ret=ret1}else{var r=nape.phys.InteractorIterator.zpp_pool;nape.phys.InteractorIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.phys.InteractorIterator.prototype.zpp_inner=null,nape.phys.InteractorIterator.prototype.zpp_i=null,nape.phys.InteractorIterator.prototype.zpp_critical=null,nape.phys.InteractorIterator.prototype.zpp_next=null,nape.phys.InteractorIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.phys.InteractorIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.phys.InteractorIterator.prototype.__class__=nape.phys.InteractorIterator,nape.phys.InteractorList=$hxClasses["nape.phys.InteractorList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_InteractorList,this.zpp_inner.outer=this},nape.phys.InteractorList.__name__=["nape","phys","InteractorList"],nape.phys.InteractorList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.phys.InteractorList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.phys.InteractorList.prototype.zpp_inner=null,Object.defineProperty(nape.phys.InteractorList.prototype,"length",{get:nape.phys.InteractorList.prototype.get_length}),nape.phys.InteractorList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.phys.InteractorList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner_i)},nape.phys.InteractorList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},nape.phys.InteractorList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner_i);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner_i)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.InteractorList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner_i)}else this.zpp_inner.inner.add(obj.zpp_inner_i);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.phys.InteractorList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer_i},nape.phys.InteractorList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer_i},nape.phys.InteractorList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.phys.InteractorList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner_i){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner_i),this.zpp_inner.invalidate()),ret},nape.phys.InteractorList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: InteractorList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.phys.InteractorList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.phys.InteractorList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.phys.InteractorIterator.get(this)},nape.phys.InteractorList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.phys.InteractorList;this.zpp_inner.valmod();for(var _g=nape.phys.InteractorIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Interactor is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.phys.InteractorList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.phys.InteractorIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.phys.InteractorList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.phys.InteractorIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.phys.InteractorList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.phys.InteractorIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.phys.InteractorIterator.zpp_pool,nape.phys.InteractorIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.phys.InteractorList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.phys.InteractorList.prototype.__class__=nape.phys.InteractorList,nape.phys.MassMode=$hxClasses["nape.phys.MassMode"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate MassMode derp!")},nape.phys.MassMode.__name__=["nape","phys","MassMode"],nape.phys.MassMode.DEFAULT=null,nape.phys.MassMode.get_DEFAULT=function(){return null==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.MassMode_DEFAULT},nape.phys.MassMode.FIXED=null,nape.phys.MassMode.get_FIXED=function(){return null==zpp_nape.util.ZPP_Flags.MassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_FIXED=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.MassMode_FIXED},nape.phys.MassMode.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.MassMode_DEFAULT?"DEFAULT":(null==zpp_nape.util.ZPP_Flags.MassMode_FIXED&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.MassMode_FIXED=new nape.phys.MassMode,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.MassMode_FIXED?"FIXED":"")},nape.phys.MassMode.prototype.__class__=nape.phys.MassMode,nape.phys.Material=$hxClasses["nape.phys.Material"]=function(elasticity,dynamicFriction,staticFriction,density,rollingFriction){if(null==rollingFriction&&(rollingFriction=.001),null==density&&(density=1),null==staticFriction&&(staticFriction=2),null==dynamicFriction&&(dynamicFriction=1),null==elasticity&&(elasticity=0),this.zpp_inner=null,null==zpp_nape.phys.ZPP_Material.zpp_pool?this.zpp_inner=new zpp_nape.phys.ZPP_Material:(this.zpp_inner=zpp_nape.phys.ZPP_Material.zpp_pool,zpp_nape.phys.ZPP_Material.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),this.zpp_inner.outer=this,elasticity!=this.zpp_inner.elasticity){if(elasticity!=elasticity)throw new js._Boot.HaxeError("Error: Material::elasticity cannot be NaN");this.zpp_inner.elasticity=elasticity/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}if(dynamicFriction!=this.zpp_inner.dynamicFriction){if(dynamicFriction!=dynamicFriction)throw new js._Boot.HaxeError("Error: Material::dynamicFriction cannot be NaN");if(dynamicFriction<0)throw new js._Boot.HaxeError("Error: Material::dynamicFriction cannot be negative");this.zpp_inner.dynamicFriction=dynamicFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ANGDRAG|zpp_nape.phys.ZPP_Material.ARBITERS)}if(staticFriction!=this.zpp_inner.staticFriction){if(staticFriction!=staticFriction)throw new js._Boot.HaxeError("Error: Material::staticFriction cannot be NaN");if(staticFriction<0)throw new js._Boot.HaxeError("Error: Material::staticFriction cannot be negative");this.zpp_inner.staticFriction=staticFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}if(density!=1e3*this.zpp_inner.density){if(density!=density)throw new js._Boot.HaxeError("Error: Material::density cannot be NaN");if(density<0)throw new js._Boot.HaxeError("Error: Material::density must be positive");if(density<0)throw new js._Boot.HaxeError("Error: Material::density cannot be negative");this.zpp_inner.density=density/1e3,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.PROPS)}if(rollingFriction!=this.zpp_inner.rollingFriction){if(rollingFriction!=rollingFriction)throw new js._Boot.HaxeError("Error: Material::rollingFriction cannot be NaN");if(rollingFriction<0)throw new js._Boot.HaxeError("Error: Material::rollingFriction cannot be negative");this.zpp_inner.rollingFriction=rollingFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}},nape.phys.Material.__name__=["nape","phys","Material"],nape.phys.Material.wood=function(){return new nape.phys.Material(.4,.2,.38,.7,.005)},nape.phys.Material.steel=function(){return new nape.phys.Material(.2,.57,.74,7.8,.001)},nape.phys.Material.ice=function(){return new nape.phys.Material(.3,.03,.1,.9,1e-4)},nape.phys.Material.rubber=function(){return new nape.phys.Material(.8,1,1.4,1.5,.01)},nape.phys.Material.glass=function(){return new nape.phys.Material(.4,.4,.94,2.6,.002)},nape.phys.Material.sand=function(){return new nape.phys.Material(-1,.45,.6,1.6,16)},nape.phys.Material.prototype.zpp_inner=null,Object.defineProperty(nape.phys.Material.prototype,"userData",{get:nape.phys.Material.prototype.get_userData}),nape.phys.Material.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.phys.Material.prototype,"shapes",{get:nape.phys.Material.prototype.get_shapes}),nape.phys.Material.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=zpp_nape.util.ZPP_ShapeList.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},nape.phys.Material.prototype.copy=function(){var ret=new nape.phys.Material(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,1e3*this.zpp_inner.density,this.zpp_inner.rollingFriction);return null!=this.zpp_inner.userData&&(ret.zpp_inner.userData=Reflect.copy(this.zpp_inner.userData)),ret},Object.defineProperty(nape.phys.Material.prototype,"elasticity",{get:nape.phys.Material.prototype.get_elasticity,set:nape.phys.Material.prototype.set_elasticity}),nape.phys.Material.prototype.get_elasticity=function(){return this.zpp_inner.elasticity},nape.phys.Material.prototype.set_elasticity=function(elasticity){if(elasticity!=this.zpp_inner.elasticity){if(elasticity!=elasticity)throw new js._Boot.HaxeError("Error: Material::elasticity cannot be NaN");this.zpp_inner.elasticity=elasticity/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}return this.zpp_inner.elasticity},Object.defineProperty(nape.phys.Material.prototype,"dynamicFriction",{get:nape.phys.Material.prototype.get_dynamicFriction,set:nape.phys.Material.prototype.set_dynamicFriction}),nape.phys.Material.prototype.get_dynamicFriction=function(){return this.zpp_inner.dynamicFriction},nape.phys.Material.prototype.set_dynamicFriction=function(dynamicFriction){if(dynamicFriction!=this.zpp_inner.dynamicFriction){if(dynamicFriction!=dynamicFriction)throw new js._Boot.HaxeError("Error: Material::dynamicFriction cannot be NaN");if(dynamicFriction<0)throw new js._Boot.HaxeError("Error: Material::dynamicFriction cannot be negative");this.zpp_inner.dynamicFriction=dynamicFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ANGDRAG|zpp_nape.phys.ZPP_Material.ARBITERS)}return this.zpp_inner.dynamicFriction},Object.defineProperty(nape.phys.Material.prototype,"staticFriction",{get:nape.phys.Material.prototype.get_staticFriction,set:nape.phys.Material.prototype.set_staticFriction}),nape.phys.Material.prototype.get_staticFriction=function(){return this.zpp_inner.staticFriction},nape.phys.Material.prototype.set_staticFriction=function(staticFriction){if(staticFriction!=this.zpp_inner.staticFriction){if(staticFriction!=staticFriction)throw new js._Boot.HaxeError("Error: Material::staticFriction cannot be NaN");if(staticFriction<0)throw new js._Boot.HaxeError("Error: Material::staticFriction cannot be negative");this.zpp_inner.staticFriction=staticFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}return this.zpp_inner.staticFriction},Object.defineProperty(nape.phys.Material.prototype,"density",{get:nape.phys.Material.prototype.get_density,set:nape.phys.Material.prototype.set_density}),nape.phys.Material.prototype.get_density=function(){return 1e3*this.zpp_inner.density},nape.phys.Material.prototype.set_density=function(density){if(density!=1e3*this.zpp_inner.density){if(density!=density)throw new js._Boot.HaxeError("Error: Material::density cannot be NaN");if(density<0)throw new js._Boot.HaxeError("Error: Material::density must be positive");if(density<0)throw new js._Boot.HaxeError("Error: Material::density cannot be negative");this.zpp_inner.density=density/1e3,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.PROPS)}return 1e3*this.zpp_inner.density},Object.defineProperty(nape.phys.Material.prototype,"rollingFriction",{get:nape.phys.Material.prototype.get_rollingFriction,set:nape.phys.Material.prototype.set_rollingFriction}),nape.phys.Material.prototype.get_rollingFriction=function(){return this.zpp_inner.rollingFriction},nape.phys.Material.prototype.set_rollingFriction=function(rollingFriction){if(rollingFriction!=this.zpp_inner.rollingFriction){if(rollingFriction!=rollingFriction)throw new js._Boot.HaxeError("Error: Material::rollingFriction cannot be NaN");if(rollingFriction<0)throw new js._Boot.HaxeError("Error: Material::rollingFriction cannot be negative");this.zpp_inner.rollingFriction=rollingFriction/1,this.zpp_inner.invalidate(zpp_nape.phys.ZPP_Material.WAKE|zpp_nape.phys.ZPP_Material.ARBITERS)}return this.zpp_inner.rollingFriction},nape.phys.Material.prototype.toString=function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1e3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},nape.phys.Material.prototype.__class__=nape.phys.Material,nape.shape||(nape.shape={}),nape.shape.Shape=$hxClasses["nape.shape.Shape"]=function(){if(this.zpp_inner=null,nape.phys.Interactor.zpp_internalAlloc=!0,nape.phys.Interactor.call(this),nape.phys.Interactor.zpp_internalAlloc=!1,!nape.shape.Shape.zpp_internalAlloc)throw new js._Boot.HaxeError("Error: Shape cannot be instantiated derp!")},nape.shape.Shape.__name__=["nape","shape","Shape"],nape.shape.Shape.__super__=nape.phys.Interactor,nape.phys.Interactor.prototype)nape.shape.Shape.prototype[k]=nape.phys.Interactor.prototype[k];for(var k in nape.shape.Shape.prototype.zpp_inner=null,Object.defineProperty(nape.shape.Shape.prototype,"type",{get:nape.shape.Shape.prototype.get_type}),nape.shape.Shape.prototype.get_type=function(){return zpp_nape.shape.ZPP_Shape.types[this.zpp_inner.type]},nape.shape.Shape.prototype.isCircle=function(){return 0==this.zpp_inner.type},nape.shape.Shape.prototype.isPolygon=function(){return 1==this.zpp_inner.type},Object.defineProperty(nape.shape.Shape.prototype,"body",{get:nape.shape.Shape.prototype.get_body,set:nape.shape.Shape.prototype.set_body}),nape.shape.Shape.prototype.get_body=function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},nape.shape.Shape.prototype.set_body=function(body){if(this.zpp_inner.immutable_midstep("Shape::body"),(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null)!=body&&(null!=this.zpp_inner.body&&(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this),null!=body)){var _this=body.zpp_inner.wrap_shapes;_this.zpp_inner.reverse_flag?_this.push(this):_this.unshift(this)}return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},Object.defineProperty(nape.shape.Shape.prototype,"castCircle",{get:nape.shape.Shape.prototype.get_castCircle}),nape.shape.Shape.prototype.get_castCircle=function(){return 0==this.zpp_inner.type?this.zpp_inner.circle.outer_zn:null},Object.defineProperty(nape.shape.Shape.prototype,"castPolygon",{get:nape.shape.Shape.prototype.get_castPolygon}),nape.shape.Shape.prototype.get_castPolygon=function(){return 1==this.zpp_inner.type?this.zpp_inner.polygon.outer_zn:null},Object.defineProperty(nape.shape.Shape.prototype,"worldCOM",{get:nape.shape.Shape.prototype.get_worldCOM}),nape.shape.Shape.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var x=this.zpp_inner.worldCOMx,y=this.zpp_inner.worldCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=ret,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$bind($_=this.zpp_inner,$_.getworldCOM)}return this.zpp_inner.wrap_worldCOM},Object.defineProperty(nape.shape.Shape.prototype,"localCOM",{get:nape.shape.Shape.prototype.get_localCOM,set:nape.shape.Shape.prototype.set_localCOM}),nape.shape.Shape.prototype.get_localCOM=function(){return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},nape.shape.Shape.prototype.set_localCOM=function(localCOM){if(this.zpp_inner.immutable_midstep("Body::localCOM"),null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new js._Boot.HaxeError("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==localCOM)throw new js._Boot.HaxeError("Error: Shape::localCOM cannot be null");null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());var _this=this.zpp_inner.wrap_localCOM;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==localCOM)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=localCOM.zpp_inner;null!=_this2._validate&&_this2._validate();var x=localCOM.zpp_inner.x;if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=localCOM.zpp_inner;null!=_this3._validate&&_this3._validate();var y=localCOM.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(localCOM.zpp_inner.weak){if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=localCOM.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),localCOM.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=localCOM.zpp_inner;localCOM.zpp_inner.outer=null,localCOM.zpp_inner=null;var o=localCOM;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},Object.defineProperty(nape.shape.Shape.prototype,"area",{get:nape.shape.Shape.prototype.get_area}),nape.shape.Shape.prototype.get_area=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.area},Object.defineProperty(nape.shape.Shape.prototype,"inertia",{get:nape.shape.Shape.prototype.get_inertia}),nape.shape.Shape.prototype.get_inertia=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.inertia},Object.defineProperty(nape.shape.Shape.prototype,"angDrag",{get:nape.shape.Shape.prototype.get_angDrag}),nape.shape.Shape.prototype.get_angDrag=function(){return this.zpp_inner.validate_angDrag(),this.zpp_inner.angDrag},Object.defineProperty(nape.shape.Shape.prototype,"material",{get:nape.shape.Shape.prototype.get_material,set:nape.shape.Shape.prototype.set_material}),nape.shape.Shape.prototype.get_material=function(){return this.zpp_inner.material.wrapper()},nape.shape.Shape.prototype.set_material=function(material){if(this.zpp_inner.immutable_midstep("Shape::material"),null==material)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape material");return this.zpp_inner.setMaterial(material.zpp_inner),this.zpp_inner.material.wrapper()},Object.defineProperty(nape.shape.Shape.prototype,"filter",{get:nape.shape.Shape.prototype.get_filter,set:nape.shape.Shape.prototype.set_filter}),nape.shape.Shape.prototype.get_filter=function(){return this.zpp_inner.filter.wrapper()},nape.shape.Shape.prototype.set_filter=function(filter){if(this.zpp_inner.immutable_midstep("Shape::filter"),null==filter)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape filter");return this.zpp_inner.setFilter(filter.zpp_inner),this.zpp_inner.filter.wrapper()},Object.defineProperty(nape.shape.Shape.prototype,"fluidProperties",{get:nape.shape.Shape.prototype.get_fluidProperties,set:nape.shape.Shape.prototype.set_fluidProperties}),nape.shape.Shape.prototype.get_fluidProperties=function(){return this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape.phys.FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},nape.shape.Shape.prototype.set_fluidProperties=function(fluidProperties){if(null==fluidProperties)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");return this.zpp_inner.setFluid(fluidProperties.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape.phys.FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},Object.defineProperty(nape.shape.Shape.prototype,"fluidEnabled",{get:nape.shape.Shape.prototype.get_fluidEnabled,set:nape.shape.Shape.prototype.set_fluidEnabled}),nape.shape.Shape.prototype.get_fluidEnabled=function(){return this.zpp_inner.fluidEnabled},nape.shape.Shape.prototype.set_fluidEnabled=function(fluidEnabled){if(this.zpp_inner.immutable_midstep("Shape::fluidEnabled"),this.zpp_inner.fluidEnabled=fluidEnabled,fluidEnabled&&null==this.zpp_inner.fluidProperties){var fluidProperties=new nape.phys.FluidProperties;if(null==fluidProperties)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape fluidProperties, disable fluids by setting fluidEnabled to false");this.zpp_inner.setFluid(fluidProperties.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new nape.phys.FluidProperties).zpp_inner),this.zpp_inner.fluidProperties.wrapper()}return this.zpp_inner.wake(),this.zpp_inner.fluidEnabled},Object.defineProperty(nape.shape.Shape.prototype,"sensorEnabled",{get:nape.shape.Shape.prototype.get_sensorEnabled,set:nape.shape.Shape.prototype.set_sensorEnabled}),nape.shape.Shape.prototype.get_sensorEnabled=function(){return this.zpp_inner.sensorEnabled},nape.shape.Shape.prototype.set_sensorEnabled=function(sensorEnabled){return this.zpp_inner.immutable_midstep("Shape::sensorEnabled"),this.zpp_inner.sensorEnabled=sensorEnabled,this.zpp_inner.wake(),this.zpp_inner.sensorEnabled},Object.defineProperty(nape.shape.Shape.prototype,"bounds",{get:nape.shape.Shape.prototype.get_bounds}),nape.shape.Shape.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},nape.shape.Shape.prototype.translate=function(translation){if(this.zpp_inner.immutable_midstep("Shape::translate()"),null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new js._Boot.HaxeError("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==translation)throw new js._Boot.HaxeError("Error: Cannot displace Shape by null Vec2");if(translation.lsq()>0)if(0==this.zpp_inner.type){var tmp=this.zpp_inner.circle;if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=translation.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=translation.zpp_inner.x;if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=translation.zpp_inner;null!=_this1._validate&&_this1._validate(),tmp.__translate(tmp1,translation.zpp_inner.y)}else{var tmp2=this.zpp_inner.polygon;if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=translation.zpp_inner;null!=_this2._validate&&_this2._validate();var tmp3=translation.zpp_inner.x;if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=translation.zpp_inner;null!=_this3._validate&&_this3._validate(),tmp2.__translate(tmp3,translation.zpp_inner.y)}if(translation.zpp_inner.weak){if(null!=translation&&translation.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=translation.zpp_inner;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),translation.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=translation.zpp_inner;translation.zpp_inner.outer=null,translation.zpp_inner=null;var o=translation;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return this},nape.shape.Shape.prototype.scale=function(scalex,scaley){if(this.zpp_inner.immutable_midstep("Shape::scale()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new js._Boot.HaxeError("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(scalex!=scalex||scaley!=scaley)throw new js._Boot.HaxeError("Error: Cannot scale Shape by NaN");if(0==scalex||0==scaley)throw new js._Boot.HaxeError("Error: Cannot Scale shape by a factor of 0");if(0==this.zpp_inner.type){var d=scalex*scalex-scaley*scaley;if(!(d*d<nape.Config.epsilon*nape.Config.epsilon))throw new js._Boot.HaxeError("Error: Cannot perform a non equal scaling on a Circle");this.zpp_inner.circle.__scale(scalex,scaley)}else this.zpp_inner.polygon.__scale(scalex,scaley);return this},nape.shape.Shape.prototype.rotate=function(angle){if(this.zpp_inner.immutable_midstep("Shape::rotate()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new js._Boot.HaxeError("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(angle!=angle)throw new js._Boot.HaxeError("Error: Cannot rotate Shape by NaN");var dr;if(0!=angle%(2*Math.PI)){var cos=Math.cos(angle),sin=Math.sin(angle);0==this.zpp_inner.type?this.zpp_inner.circle.__rotate(sin,cos):this.zpp_inner.polygon.__rotate(sin,cos)}return this},nape.shape.Shape.prototype.transform=function(matrix){if(this.zpp_inner.immutable_midstep("Shape::transform()"),null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new js._Boot.HaxeError("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==matrix)throw new js._Boot.HaxeError("Error: Cannot transform Shape by null matrix");if(matrix.singular())throw new js._Boot.HaxeError("Error: Cannot transform Shape by a singular matrix");if(0==this.zpp_inner.type){if(!matrix.equiorthogonal())throw new js._Boot.HaxeError("Error: Cannot transform Circle by a non equiorthogonal matrix");this.zpp_inner.circle.__transform(matrix)}else this.zpp_inner.polygon.__transform(matrix);return this},nape.shape.Shape.prototype.contains=function(point){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Cannot check null point for containment");if(null==(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape is not well defined without a Body");zpp_nape.geom.ZPP_Geom.validateShape(this.zpp_inner);var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var ret=zpp_nape.geom.ZPP_Collide.shapeContains(this.zpp_inner,point.zpp_inner);if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.shape.Shape.prototype.copy=function(){return this.zpp_inner.copy()},nape.shape.Shape.prototype.toString=function(){var ret;return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},nape.shape.Shape.prototype.__class__=nape.shape.Shape,nape.shape.Circle=$hxClasses["nape.shape.Circle"]=function(radius,localCOM,material,filter){if(this.zpp_inner_zn=null,nape.shape.Shape.zpp_internalAlloc=!0,nape.shape.Shape.call(this),nape.shape.Shape.zpp_internalAlloc=!1,this.zpp_inner_zn=new zpp_nape.shape.ZPP_Circle,this.zpp_inner_zn.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,this.zpp_inner.immutable_midstep("Circle::radius"),null!=this.zpp_inner.body&&1==this.zpp_inner.body.type&&null!=this.zpp_inner.body.space)throw new js._Boot.HaxeError("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(radius!=this.zpp_inner_zn.radius){if(radius!=radius)throw new js._Boot.HaxeError("Error: Circle::radius cannot be NaN");if(radius<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: Circle::radius ("+radius+") must be > Config.epsilon");if(radius>1e100)throw new js._Boot.HaxeError("Error: Circle::radius ("+radius+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=radius,this.zpp_inner_zn.invalidate_radius()}if(null==localCOM)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=localCOM.zpp_inner;if(null!=_this._validate&&_this._validate(),this.zpp_inner.localCOMx=localCOM.zpp_inner.x,null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=localCOM.zpp_inner;if(null!=_this1._validate&&_this1._validate(),this.zpp_inner.localCOMy=localCOM.zpp_inner.y,localCOM.zpp_inner.weak){if(null!=localCOM&&localCOM.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=localCOM.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),localCOM.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=localCOM.zpp_inner;localCOM.zpp_inner.outer=null,localCOM.zpp_inner=null;var o=localCOM;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}}if(null==material)null==zpp_nape.phys.ZPP_Material.zpp_pool?this.zpp_inner.material=new zpp_nape.phys.ZPP_Material:(this.zpp_inner.material=zpp_nape.phys.ZPP_Material.zpp_pool,zpp_nape.phys.ZPP_Material.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::material"),null==material)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(material.zpp_inner),this.zpp_inner.material.wrapper()}if(null==filter)null==zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool?this.zpp_inner.filter=new zpp_nape.dynamics.ZPP_InteractionFilter:(this.zpp_inner.filter=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::filter"),null==filter)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(filter.zpp_inner),this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_nape.callbacks.ZPP_CbType.ANY_SHAPE.zpp_inner)},nape.shape.Circle.__name__=["nape","shape","Circle"],nape.shape.Circle.__super__=nape.shape.Shape,nape.shape.Shape.prototype)nape.shape.Circle.prototype[k]=nape.shape.Shape.prototype[k];for(var k in nape.shape.Circle.prototype.zpp_inner_zn=null,Object.defineProperty(nape.shape.Circle.prototype,"radius",{get:nape.shape.Circle.prototype.get_radius,set:nape.shape.Circle.prototype.set_radius}),nape.shape.Circle.prototype.get_radius=function(){return this.zpp_inner_zn.radius},nape.shape.Circle.prototype.set_radius=function(radius){if(this.zpp_inner.immutable_midstep("Circle::radius"),null!=this.zpp_inner.body&&1==this.zpp_inner.body.type&&null!=this.zpp_inner.body.space)throw new js._Boot.HaxeError("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(radius!=this.zpp_inner_zn.radius){if(radius!=radius)throw new js._Boot.HaxeError("Error: Circle::radius cannot be NaN");if(radius<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: Circle::radius ("+radius+") must be > Config.epsilon");if(radius>1e100)throw new js._Boot.HaxeError("Error: Circle::radius ("+radius+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=radius,this.zpp_inner_zn.invalidate_radius()}return this.zpp_inner_zn.radius},nape.shape.Circle.prototype.__class__=nape.shape.Circle,nape.shape.Edge=$hxClasses["nape.shape.Edge"]=function(){if(this.zpp_inner=null,!zpp_nape.shape.ZPP_Edge.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate an Edge derp!")},nape.shape.Edge.__name__=["nape","shape","Edge"],nape.shape.Edge.prototype.zpp_inner=null,Object.defineProperty(nape.shape.Edge.prototype,"polygon",{get:nape.shape.Edge.prototype.get_polygon}),nape.shape.Edge.prototype.get_polygon=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");return this.zpp_inner.polygon.outer_zn},Object.defineProperty(nape.shape.Edge.prototype,"localNormal",{get:nape.shape.Edge.prototype.get_localNormal}),nape.shape.Edge.prototype.get_localNormal=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");return null==this.zpp_inner.wrap_lnorm&&this.zpp_inner.getlnorm(),this.zpp_inner.wrap_lnorm},Object.defineProperty(nape.shape.Edge.prototype,"worldNormal",{get:nape.shape.Edge.prototype.get_worldNormal}),nape.shape.Edge.prototype.get_worldNormal=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");return null==this.zpp_inner.wrap_gnorm&&this.zpp_inner.getgnorm(),this.zpp_inner.wrap_gnorm},Object.defineProperty(nape.shape.Edge.prototype,"length",{get:nape.shape.Edge.prototype.get_length}),nape.shape.Edge.prototype.get_length=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.length},Object.defineProperty(nape.shape.Edge.prototype,"localProjection",{get:nape.shape.Edge.prototype.get_localProjection}),nape.shape.Edge.prototype.get_localProjection=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.lprojection},Object.defineProperty(nape.shape.Edge.prototype,"worldProjection",{get:nape.shape.Edge.prototype.get_worldProjection}),nape.shape.Edge.prototype.get_worldProjection=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");if(null==this.zpp_inner.polygon.body)throw new js._Boot.HaxeError("Error: Edge world projection only makes sense for Polygons contained within a rigid body");var _this=this.zpp_inner.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}return this.zpp_inner.gprojection},Object.defineProperty(nape.shape.Edge.prototype,"localVertex1",{get:nape.shape.Edge.prototype.get_localVertex1}),nape.shape.Edge.prototype.get_localVertex1=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();var _this=this.zpp_inner.lp0;if(null==_this.outer){_this.outer=new nape.geom.Vec2;var o=_this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this.outer.zpp_inner=_this}return _this.outer},Object.defineProperty(nape.shape.Edge.prototype,"localVertex2",{get:nape.shape.Edge.prototype.get_localVertex2}),nape.shape.Edge.prototype.get_localVertex2=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");this.zpp_inner.polygon.validate_laxi();var _this=this.zpp_inner.lp1;if(null==_this.outer){_this.outer=new nape.geom.Vec2;var o=_this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this.outer.zpp_inner=_this}return _this.outer},Object.defineProperty(nape.shape.Edge.prototype,"worldVertex1",{get:nape.shape.Edge.prototype.get_worldVertex1}),nape.shape.Edge.prototype.get_worldVertex1=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");var _this=this.zpp_inner.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}var _this3=this.zpp_inner.gp0;if(null==_this3.outer){_this3.outer=new nape.geom.Vec2;var o=_this3.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this3.outer.zpp_inner=_this3}return _this3.outer},Object.defineProperty(nape.shape.Edge.prototype,"worldVertex2",{get:nape.shape.Edge.prototype.get_worldVertex2}),nape.shape.Edge.prototype.get_worldVertex2=function(){if(null==this.zpp_inner.polygon)throw new js._Boot.HaxeError("Error: Edge not current in use");var _this=this.zpp_inner.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}var _this3=this.zpp_inner.gp1;if(null==_this3.outer){_this3.outer=new nape.geom.Vec2;var o=_this3.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this3.outer.zpp_inner=_this3}return _this3.outer},nape.shape.Edge.prototype.toString=function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } }";var _this=this.zpp_inner.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}return"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } worldNormal : { x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" } }"},nape.shape.Edge.prototype.__class__=nape.shape.Edge,nape.shape.EdgeIterator=$hxClasses["nape.shape.EdgeIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_EdgeList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate EdgeIterator derp!")},nape.shape.EdgeIterator.__name__=["nape","shape","EdgeIterator"],nape.shape.EdgeIterator.get=function(list){var ret;if(null==nape.shape.EdgeIterator.zpp_pool){zpp_nape.util.ZPP_EdgeList.internal=!0;var ret1=new nape.shape.EdgeIterator;zpp_nape.util.ZPP_EdgeList.internal=!1,ret=ret1}else{var r=nape.shape.EdgeIterator.zpp_pool;nape.shape.EdgeIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.shape.EdgeIterator.prototype.zpp_inner=null,nape.shape.EdgeIterator.prototype.zpp_i=null,nape.shape.EdgeIterator.prototype.zpp_critical=null,nape.shape.EdgeIterator.prototype.zpp_next=null,nape.shape.EdgeIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.shape.EdgeIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.shape.EdgeIterator.prototype.__class__=nape.shape.EdgeIterator,nape.shape.EdgeList=$hxClasses["nape.shape.EdgeList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_EdgeList,this.zpp_inner.outer=this},nape.shape.EdgeList.__name__=["nape","shape","EdgeList"],nape.shape.EdgeList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.shape.EdgeList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.shape.EdgeList.prototype.zpp_inner=null,Object.defineProperty(nape.shape.EdgeList.prototype,"length",{get:nape.shape.EdgeList.prototype.get_length}),nape.shape.EdgeList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.shape.EdgeList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.shape.EdgeList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index==this.zpp_inner.user_length-1?index=index:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-2-index)),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},nape.shape.EdgeList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.shape.EdgeList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.shape.EdgeList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.wrapper()},nape.shape.EdgeList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.wrapper()},nape.shape.EdgeList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.shape.EdgeList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.shape.EdgeList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: EdgeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.shape.EdgeList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.shape.EdgeList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.shape.EdgeIterator.get(this)},nape.shape.EdgeList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.shape.EdgeList;this.zpp_inner.valmod();for(var _g=nape.shape.EdgeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Edge is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.shape.EdgeList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.shape.EdgeIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.shape.EdgeList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.shape.EdgeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.shape.EdgeList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.shape.EdgeIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.shape.EdgeIterator.zpp_pool,nape.shape.EdgeIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.shape.EdgeList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.shape.EdgeList.prototype.__class__=nape.shape.EdgeList,nape.shape.Polygon=$hxClasses["nape.shape.Polygon"]=function(localVerts,material,filter){if(this.zpp_inner_zn=null,nape.shape.Shape.zpp_internalAlloc=!0,nape.shape.Shape.call(this),nape.shape.Shape.zpp_internalAlloc=!1,null==localVerts)throw new js._Boot.HaxeError("Error: localVerts cannot be null");if(this.zpp_inner_zn=new zpp_nape.shape.ZPP_Polygon,this.zpp_inner_zn.outer=this,this.zpp_inner_zn.outer_zn=this,this.zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,localVerts instanceof Array)for(var lv=localVerts,_g=0;_g<lv.length;){var vite=lv[_g];if(++_g,null==vite)throw new js._Boot.HaxeError("Error: Array<Vec2> contains null objects");if(!(vite instanceof nape.geom.Vec2))throw new js._Boot.HaxeError("Error: Array<Vec2> contains non Vec2 objects");var x=vite;if(null!=x&&x.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var tmp=this.zpp_inner_zn.wrap_lverts;if(null!=x&&x.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(x.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=x.zpp_inner;null!=_this._validate&&_this._validate();var x1=x.zpp_inner.x;if(x.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=x.zpp_inner;null!=_this1._validate&&_this1._validate();var y=x.zpp_inner.y,weak=!1,ret;if(null==weak&&(weak=!1),null==y&&(y=0),null==x1&&(x1=0),x1!=x1||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp1;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x1!=x1||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp1=ret.zpp_inner.y==y}else tmp1=!1;if(!tmp1){ret.zpp_inner.x=x1,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}ret.zpp_inner.weak=weak,tmp.push(ret)}else if(localVerts instanceof nape.geom.Vec2List)for(var lv1,_g1=localVerts.iterator();;){_g1.zpp_inner.zpp_inner.valmod();var length=_g1.zpp_inner.zpp_gl(),tmp2;if(_g1.zpp_critical=!0,_g1.zpp_i<length?tmp2=!0:(_g1.zpp_next=nape.geom.Vec2Iterator.zpp_pool,nape.geom.Vec2Iterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp2=!1),!tmp2)break;_g1.zpp_critical=!1;var x2=_g1.zpp_inner.at(_g1.zpp_i++);if(null==x2)throw new js._Boot.HaxeError("Error: Vec2List contains null objects");if(null!=x2&&x2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var tmp3=this.zpp_inner_zn.wrap_lverts;if(null!=x2&&x2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(x2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=x2.zpp_inner;null!=_this6._validate&&_this6._validate();var x3=x2.zpp_inner.x;if(x2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=x2.zpp_inner;null!=_this7._validate&&_this7._validate();var y1=x2.zpp_inner.y,weak1=!1,ret2;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x3&&(x3=0),x3!=x3||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=x3,ret3.y=y1,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret2.zpp_inner,tmp4;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),x3!=x3||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=ret2.zpp_inner;if(null!=_this9._validate&&_this9._validate(),ret2.zpp_inner.x==x3){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret2.zpp_inner;null!=_this10._validate&&_this10._validate(),tmp4=ret2.zpp_inner.y==y1}else tmp4=!1;if(!tmp4){ret2.zpp_inner.x=x3,ret2.zpp_inner.y=y1;var _this11=ret2.zpp_inner;null!=_this11._invalidate&&_this11._invalidate(_this11)}}ret2.zpp_inner.weak=weak1,tmp3.push(ret2)}else{if(!(localVerts instanceof nape.geom.GeomPoly))throw new js._Boot.HaxeError("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");var lv2=localVerts;if(null!=lv2&&lv2.zpp_disp)throw new js._Boot.HaxeError("Error: GeomPoly has been disposed and cannot be used!");var verts=lv2.zpp_inner.vertices;if(null!=verts)for(var vite1=verts;;){var x4=vite1.x,y2=vite1.y,ret4;if(null==y2&&(y2=0),null==x4&&(x4=0),x4!=x4||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret4=new nape.geom.Vec2:(ret4=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret4.zpp_pool,ret4.zpp_pool=null,ret4.zpp_disp=!1,ret4==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret4.zpp_inner){var ret5;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=x4,ret5.y=y2,ret4.zpp_inner=ret5,ret4.zpp_inner.outer=ret4}else{if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret4.zpp_inner,tmp5;if(_this12._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this12._isimmutable&&_this12._isimmutable(),x4!=x4||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret4.zpp_inner;if(null!=_this13._validate&&_this13._validate(),ret4.zpp_inner.x==x4){if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret4.zpp_inner;null!=_this14._validate&&_this14._validate(),tmp5=ret4.zpp_inner.y==y2}else tmp5=!1;if(!tmp5){ret4.zpp_inner.x=x4,ret4.zpp_inner.y=y2;var _this15=ret4.zpp_inner;null!=_this15._invalidate&&_this15._invalidate(_this15)}}ret4.zpp_inner.weak=!1;var x5=ret4;vite1=vite1.next,null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var tmp6=this.zpp_inner_zn.wrap_lverts;if(null!=x5&&x5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(x5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this16=x5.zpp_inner;null!=_this16._validate&&_this16._validate();var x6=x5.zpp_inner.x;if(x5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=x5.zpp_inner;null!=_this17._validate&&_this17._validate();var y3=x5.zpp_inner.y,weak2=!1,ret6;if(null==weak2&&(weak2=!1),null==y3&&(y3=0),null==x6&&(x6=0),x6!=x6||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret6=new nape.geom.Vec2:(ret6=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret6.zpp_pool,ret6.zpp_pool=null,ret6.zpp_disp=!1,ret6==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret6.zpp_inner){var ret7;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret7=new zpp_nape.geom.ZPP_Vec2:(ret7=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret7.next,ret7.next=null),ret7.weak=!1,ret7._immutable=!1,ret7.x=x6,ret7.y=y3,ret6.zpp_inner=ret7,ret6.zpp_inner.outer=ret6}else{if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this18=ret6.zpp_inner,tmp7;if(_this18._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this18._isimmutable&&_this18._isimmutable(),x6!=x6||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=ret6.zpp_inner;if(null!=_this19._validate&&_this19._validate(),ret6.zpp_inner.x==x6){if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this20=ret6.zpp_inner;null!=_this20._validate&&_this20._validate(),tmp7=ret6.zpp_inner.y==y3}else tmp7=!1;if(!tmp7){ret6.zpp_inner.x=x6,ret6.zpp_inner.y=y3;var _this21=ret6.zpp_inner;null!=_this21._invalidate&&_this21._invalidate(_this21)}}if(ret6.zpp_inner.weak=weak2,tmp6.push(ret6),null!=x5&&x5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this22=x5.zpp_inner;if(_this22._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this22._isimmutable&&_this22._isimmutable(),x5.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=x5.zpp_inner;x5.zpp_inner.outer=null,x5.zpp_inner=null;var o=x5;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;if(null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,vite1==verts)break}}if(localVerts instanceof Array)for(var lv3=localVerts,i=0;i<lv3.length;){var cur=lv3[i],tmp8;if(cur.zpp_inner.weak){if(null!=cur&&cur.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this23=cur.zpp_inner;if(_this23._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this23._isimmutable&&_this23._isimmutable(),cur.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=cur.zpp_inner;cur.zpp_inner.outer=null,cur.zpp_inner=null;var o2=cur;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3,tmp8=!0}else tmp8=!1;tmp8?lv3.splice(i,1):++i}else if(localVerts instanceof nape.geom.Vec2List){var lv4=localVerts;null!=lv4.zpp_inner._validate&&lv4.zpp_inner._validate();for(var ins=lv4.zpp_inner.inner,pre=null,cur1=ins.head;null!=cur1;){var x7=cur1.elt;if(x7.outer.zpp_inner.weak){if(cur1=ins.erase(pre),x7.outer.zpp_inner.weak){var _this24=x7.outer;if(null!=_this24&&_this24.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this25=_this24.zpp_inner;if(_this25._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this25._isimmutable&&_this25._isimmutable(),_this24.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=_this24.zpp_inner;_this24.zpp_inner.outer=null,_this24.zpp_inner=null;var o4=_this24;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner2;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5}}else pre=cur1,cur1=cur1.next}}if(null==material)null==zpp_nape.phys.ZPP_Material.zpp_pool?this.zpp_inner.material=new zpp_nape.phys.ZPP_Material:(this.zpp_inner.material=zpp_nape.phys.ZPP_Material.zpp_pool,zpp_nape.phys.ZPP_Material.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::material"),null==material)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(material.zpp_inner),this.zpp_inner.material.wrapper()}if(null==filter)null==zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool?this.zpp_inner.filter=new zpp_nape.dynamics.ZPP_InteractionFilter:(this.zpp_inner.filter=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null);else{if(this.zpp_inner.immutable_midstep("Shape::filter"),null==filter)throw new js._Boot.HaxeError("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(filter.zpp_inner),this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_nape.callbacks.ZPP_CbType.ANY_SHAPE.zpp_inner)},nape.shape.Polygon.__name__=["nape","shape","Polygon"],nape.shape.Polygon.__super__=nape.shape.Shape,nape.shape.Shape.prototype)nape.shape.Polygon.prototype[k]=nape.shape.Shape.prototype[k];for(var k in nape.shape.Polygon.rect=function(x,y,width,height,weak){if(null==weak&&(weak=!1),x!=x||y!=y||width!=width||height!=height)throw new js._Boot.HaxeError("Error: Polygon.rect cannot accept NaN arguments");var x1=x,y1=y,weak1=weak,ret;if(null==weak1&&(weak1=!1),null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y1}else tmp=!1;if(!tmp){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=weak1;var x2=x+width,y2=y,weak2=weak,ret2;if(null==weak2&&(weak2=!1),null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=x2,ret3.y=y2,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret2.zpp_inner,tmp1;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret2.zpp_inner;if(null!=_this5._validate&&_this5._validate(),ret2.zpp_inner.x==x2){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret2.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp1=ret2.zpp_inner.y==y2}else tmp1=!1;if(!tmp1){ret2.zpp_inner.x=x2,ret2.zpp_inner.y=y2;var _this7=ret2.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret2.zpp_inner.weak=weak2;var x3=x+width,y3=y+height,weak3=weak,ret4;if(null==weak3&&(weak3=!1),null==y3&&(y3=0),null==x3&&(x3=0),x3!=x3||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret4=new nape.geom.Vec2:(ret4=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret4.zpp_pool,ret4.zpp_pool=null,ret4.zpp_disp=!1,ret4==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret4.zpp_inner){var ret5;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=x3,ret5.y=y3,ret4.zpp_inner=ret5,ret4.zpp_inner.outer=ret4}else{if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret4.zpp_inner,tmp2;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),x3!=x3||y3!=y3)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=ret4.zpp_inner;if(null!=_this9._validate&&_this9._validate(),ret4.zpp_inner.x==x3){if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret4.zpp_inner;null!=_this10._validate&&_this10._validate(),tmp2=ret4.zpp_inner.y==y3}else tmp2=!1;if(!tmp2){ret4.zpp_inner.x=x3,ret4.zpp_inner.y=y3;var _this11=ret4.zpp_inner;null!=_this11._invalidate&&_this11._invalidate(_this11)}}ret4.zpp_inner.weak=weak3;var x4=x,y4=y+height,weak4=weak,ret6;if(null==weak4&&(weak4=!1),null==y4&&(y4=0),null==x4&&(x4=0),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret6=new nape.geom.Vec2:(ret6=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret6.zpp_pool,ret6.zpp_pool=null,ret6.zpp_disp=!1,ret6==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret6.zpp_inner){var ret7;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret7=new zpp_nape.geom.ZPP_Vec2:(ret7=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret7.next,ret7.next=null),ret7.weak=!1,ret7._immutable=!1,ret7.x=x4,ret7.y=y4,ret6.zpp_inner=ret7,ret6.zpp_inner.outer=ret6}else{if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret6.zpp_inner,tmp3;if(_this12._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this12._isimmutable&&_this12._isimmutable(),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret6.zpp_inner;if(null!=_this13._validate&&_this13._validate(),ret6.zpp_inner.x==x4){if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret6.zpp_inner;null!=_this14._validate&&_this14._validate(),tmp3=ret6.zpp_inner.y==y4}else tmp3=!1;if(!tmp3){ret6.zpp_inner.x=x4,ret6.zpp_inner.y=y4;var _this15=ret6.zpp_inner;null!=_this15._invalidate&&_this15._invalidate(_this15)}}return ret6.zpp_inner.weak=weak4,[ret,ret2,ret4,ret6]},nape.shape.Polygon.box=function(width,height,weak){if(null==weak&&(weak=!1),width!=width||height!=height)throw new js._Boot.HaxeError("Error: Polygon.box cannot accept NaN arguments");return nape.shape.Polygon.rect(-width/2,-height/2,width,height,weak)},nape.shape.Polygon.regular=function(xRadius,yRadius,edgeCount,angleOffset,weak){if(null==weak&&(weak=!1),null==angleOffset&&(angleOffset=0),xRadius!=xRadius||yRadius!=yRadius||angleOffset!=angleOffset)throw new js._Boot.HaxeError("Error: Polygon.regular cannot accept NaN arguments");for(var ret=[],dangle=2*Math.PI/edgeCount,_g=0,_g1=edgeCount;_g<_g1;){var i,ang=_g++*dangle+angleOffset,x=Math.cos(ang)*xRadius,y=Math.sin(ang)*yRadius,weak1=weak,ret1;if(null==weak1&&(weak1=!1),null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x,ret2.y=y,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret1.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret1.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret1.zpp_inner.x==x){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret1.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret1.zpp_inner.y==y}else tmp=!1;if(!tmp){ret1.zpp_inner.x=x,ret1.zpp_inner.y=y;var _this3=ret1.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret1.zpp_inner.weak=weak1;var x1=ret1;ret.push(x1)}return ret},nape.shape.Polygon.prototype.zpp_inner_zn=null,Object.defineProperty(nape.shape.Polygon.prototype,"localVerts",{get:nape.shape.Polygon.prototype.get_localVerts}),nape.shape.Polygon.prototype.get_localVerts=function(){return null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts(),this.zpp_inner_zn.wrap_lverts},Object.defineProperty(nape.shape.Polygon.prototype,"worldVerts",{get:nape.shape.Polygon.prototype.get_worldVerts}),nape.shape.Polygon.prototype.get_worldVerts=function(){return null==this.zpp_inner_zn.wrap_gverts&&this.zpp_inner_zn.getgverts(),this.zpp_inner_zn.wrap_gverts},Object.defineProperty(nape.shape.Polygon.prototype,"edges",{get:nape.shape.Polygon.prototype.get_edges}),nape.shape.Polygon.prototype.get_edges=function(){return null==this.zpp_inner_zn.wrap_edges&&this.zpp_inner_zn.getedges(),this.zpp_inner_zn.wrap_edges},nape.shape.Polygon.prototype.validity=function(){return this.zpp_inner_zn.valid()},nape.shape.Polygon.prototype.__class__=nape.shape.Polygon,nape.shape.ShapeIterator=$hxClasses["nape.shape.ShapeIterator"]=function(){if(this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null,!zpp_nape.util.ZPP_ShapeList.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ShapeIterator derp!")},nape.shape.ShapeIterator.__name__=["nape","shape","ShapeIterator"],nape.shape.ShapeIterator.get=function(list){var ret;if(null==nape.shape.ShapeIterator.zpp_pool){zpp_nape.util.ZPP_ShapeList.internal=!0;var ret1=new nape.shape.ShapeIterator;zpp_nape.util.ZPP_ShapeList.internal=!1,ret=ret1}else{var r=nape.shape.ShapeIterator.zpp_pool;nape.shape.ShapeIterator.zpp_pool=r.zpp_next,ret=r}return ret.zpp_i=0,ret.zpp_inner=list,ret.zpp_critical=!1,ret},nape.shape.ShapeIterator.prototype.zpp_inner=null,nape.shape.ShapeIterator.prototype.zpp_i=null,nape.shape.ShapeIterator.prototype.zpp_critical=null,nape.shape.ShapeIterator.prototype.zpp_next=null,nape.shape.ShapeIterator.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<length||(this.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=this,this.zpp_inner=null,!1)},nape.shape.ShapeIterator.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},nape.shape.ShapeIterator.prototype.__class__=nape.shape.ShapeIterator,nape.shape.ShapeList=$hxClasses["nape.shape.ShapeList"]=function(){this.zpp_inner=null,this.zpp_inner=new zpp_nape.util.ZPP_ShapeList,this.zpp_inner.outer=this},nape.shape.ShapeList.__name__=["nape","shape","ShapeList"],nape.shape.ShapeList.fromArray=function(array){if(null==array)throw new js._Boot.HaxeError("Error: Cannot convert null Array to Nape list");for(var ret=new nape.shape.ShapeList,_g=0;_g<array.length;){var i=array[_g];++_g,ret.push(i)}return ret},nape.shape.ShapeList.prototype.zpp_inner=null,Object.defineProperty(nape.shape.ShapeList.prototype,"length",{get:nape.shape.ShapeList.prototype.get_length}),nape.shape.ShapeList.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},nape.shape.ShapeList.prototype.has=function(obj){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(obj.zpp_inner)},nape.shape.ShapeList.prototype.at=function(index){var tmp;if(this.zpp_inner.valmod(),index>=0?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=index>=this.zpp_inner.user_length):tmp=!0,tmp)throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),index=this.zpp_inner.user_length-1-index),index<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=index,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index);else for(;this.zpp_inner.at_index!=index;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},nape.shape.ShapeList.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(obj.zpp_inner);else{if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.shape.ShapeList.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");this.zpp_inner.modify_test(),this.zpp_inner.valmod();var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var tmp;if(null==this.zpp_inner.inner.head)tmp=null;else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else this.zpp_inner.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},nape.shape.ShapeList.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var retx=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx1=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}return this.zpp_inner.invalidate(),ret.outer},nape.shape.ShapeList.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");if(this.zpp_inner.modify_test(),null==this.zpp_inner.inner.head)throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_inner.valmod();var ret=null,retx2;if(this.zpp_inner.reverse_flag){var ite;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length)ite=null;else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),ite=ite1.iterator_at(this.zpp_inner.user_length-2)}var retx=(ret=null==ite?this.zpp_inner.inner.head.elt:ite.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(ite)}else{var retx1=(ret=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),ret.outer},nape.shape.ShapeList.prototype.add=function(obj){return this.zpp_inner.reverse_flag?this.push(obj):this.unshift(obj)},nape.shape.ShapeList.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),ret=!1;for(var cx_ite=this.zpp_inner.inner.head;null!=cx_ite;){var x;if(cx_ite.elt==obj.zpp_inner){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},nape.shape.ShapeList.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: ShapeList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},nape.shape.ShapeList.prototype.empty=function(){return null==this.zpp_inner.inner.head},nape.shape.ShapeList.prototype.iterator=function(){return this.zpp_inner.valmod(),nape.shape.ShapeIterator.get(this)},nape.shape.ShapeList.prototype.copy=function(deep){null==deep&&(deep=!1);var ret=new nape.shape.ShapeList;this.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++),tmp1;if(deep)throw new js._Boot.HaxeError("Error: Shape is not a copyable type");tmp1=i,ret.push(tmp1)}return ret},nape.shape.ShapeList.prototype.merge=function(xs){if(null==xs)throw new js._Boot.HaxeError("Error: Cannot merge with null list");xs.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(xs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var x=_g.zpp_inner.at(_g.zpp_i++);this.has(x)||(this.zpp_inner.reverse_flag?this.push(x):this.unshift(x))}},nape.shape.ShapeList.prototype.toString=function(){var ret="[",fst=!0;this.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(this);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var i=_g.zpp_inner.at(_g.zpp_i++);fst||(ret+=","),ret+=null==i?"NULL":i.toString(),fst=!1}return ret+"]"},nape.shape.ShapeList.prototype.foreach=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot execute null on list elements");this.zpp_inner.valmod();for(var it=nape.shape.ShapeIterator.get(this);;){it.zpp_inner.zpp_inner.valmod();var _this=it.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(it.zpp_critical=!0,it.zpp_i<length?tmp=!0:(it.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=it,it.zpp_inner=null,tmp=!1),!tmp)break;try{it.zpp_critical=!1,lambda(it.zpp_inner.at(it.zpp_i++))}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;it.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=it,it.zpp_inner=null;break}}return this},nape.shape.ShapeList.prototype.filter=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: Cannot select elements of list with null");for(var i=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i<this.zpp_inner.user_length;){var x=this.at(i);try{lambda(x)?++i:this.remove(x)}catch(e){var e1=e instanceof js._Boot.HaxeError?e.val:e;break}}return this},nape.shape.ShapeList.prototype.__class__=nape.shape.ShapeList,nape.shape.ShapeType=$hxClasses["nape.shape.ShapeType"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ShapeType derp!")},nape.shape.ShapeType.__name__=["nape","shape","ShapeType"],nape.shape.ShapeType.CIRCLE=null,nape.shape.ShapeType.get_CIRCLE=function(){return null==zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE},nape.shape.ShapeType.POLYGON=null,nape.shape.ShapeType.get_POLYGON=function(){return null==zpp_nape.util.ZPP_Flags.ShapeType_POLYGON&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_POLYGON=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ShapeType_POLYGON},nape.shape.ShapeType.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE?"CIRCLE":(null==zpp_nape.util.ZPP_Flags.ShapeType_POLYGON&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_POLYGON=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ShapeType_POLYGON?"POLYGON":"")},nape.shape.ShapeType.prototype.__class__=nape.shape.ShapeType,nape.shape.ValidationResult=$hxClasses["nape.shape.ValidationResult"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate ValidationResult derp!")},nape.shape.ValidationResult.__name__=["nape","shape","ValidationResult"],nape.shape.ValidationResult.VALID=null,nape.shape.ValidationResult.get_VALID=function(){return null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ValidationResult_VALID},nape.shape.ValidationResult.DEGENERATE=null,nape.shape.ValidationResult.get_DEGENERATE=function(){return null==zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE},nape.shape.ValidationResult.CONCAVE=null,nape.shape.ValidationResult.get_CONCAVE=function(){return null==zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE},nape.shape.ValidationResult.SELF_INTERSECTING=null,nape.shape.ValidationResult.get_SELF_INTERSECTING=function(){return null==zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING},nape.shape.ValidationResult.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ValidationResult_VALID?"VALID":(null==zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE?"DEGENERATE":(null==zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE?"CONCAVE":(null==zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")))},nape.shape.ValidationResult.prototype.__class__=nape.shape.ValidationResult,nape.space||(nape.space={}),nape.space.Broadphase=$hxClasses["nape.space.Broadphase"]=function(){if(!zpp_nape.util.ZPP_Flags.internal)throw new js._Boot.HaxeError("Error: Cannot instantiate Broadphase derp!")},nape.space.Broadphase.__name__=["nape","space","Broadphase"],nape.space.Broadphase.DYNAMIC_AABB_TREE=null,nape.space.Broadphase.get_DYNAMIC_AABB_TREE=function(){return null==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE},nape.space.Broadphase.SWEEP_AND_PRUNE=null,nape.space.Broadphase.get_SWEEP_AND_PRUNE=function(){return null==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE},nape.space.Broadphase.prototype.toString=function(){return null==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE?"DYNAMIC_AABB_TREE":(null==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),this==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"")},nape.space.Broadphase.prototype.__class__=nape.space.Broadphase,nape.space.Space=$hxClasses["nape.space.Space"]=function(gravity,broadphase){if(this.zpp_inner=null,null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner=new zpp_nape.space.ZPP_Space(null==gravity?null:gravity.zpp_inner,broadphase),this.zpp_inner.outer=this,null!=gravity&&gravity.zpp_inner.weak){if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=gravity.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),gravity.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=gravity.zpp_inner;gravity.zpp_inner.outer=null,gravity.zpp_inner=null;var o=gravity;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}},nape.space.Space.__name__=["nape","space","Space"],nape.space.Space.prototype.zpp_inner=null,Object.defineProperty(nape.space.Space.prototype,"userData",{get:nape.space.Space.prototype.get_userData}),nape.space.Space.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Object.defineProperty(nape.space.Space.prototype,"gravity",{get:nape.space.Space.prototype.get_gravity,set:nape.space.Space.prototype.set_gravity}),nape.space.Space.prototype.get_gravity=function(){return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},nape.space.Space.prototype.set_gravity=function(gravity){if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==gravity)throw new js._Boot.HaxeError("Error: Space::gravity cannot be null");null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var _this=this.zpp_inner.wrap_gravity;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),null==gravity)throw new js._Boot.HaxeError("Error: Cannot assign null Vec2");if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=gravity.zpp_inner;null!=_this2._validate&&_this2._validate();var x=gravity.zpp_inner.x;if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=gravity.zpp_inner;null!=_this3._validate&&_this3._validate();var y=gravity.zpp_inner.y;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=_this.zpp_inner,tmp;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this.zpp_inner;if(null!=_this5._validate&&_this5._validate(),_this.zpp_inner.x==x){if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=_this.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp=_this.zpp_inner.y==y}else tmp=!1;if(!tmp){_this.zpp_inner.x=x,_this.zpp_inner.y=y;var _this7=_this.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}var ret=_this;if(gravity.zpp_inner.weak){if(null!=gravity&&gravity.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=gravity.zpp_inner;if(_this8._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this8._isimmutable&&_this8._isimmutable(),gravity.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=gravity.zpp_inner;gravity.zpp_inner.outer=null,gravity.zpp_inner=null;var o=gravity;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Object.defineProperty(nape.space.Space.prototype,"broadphase",{get:nape.space.Space.prototype.get_broadphase}),nape.space.Space.prototype.get_broadphase=function(){return this.zpp_inner.bphase.is_sweep?(null==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE):(null==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE)},Object.defineProperty(nape.space.Space.prototype,"sortContacts",{get:nape.space.Space.prototype.get_sortContacts,set:nape.space.Space.prototype.set_sortContacts}),nape.space.Space.prototype.get_sortContacts=function(){return this.zpp_inner.sortcontacts},nape.space.Space.prototype.set_sortContacts=function(sortContacts){return this.zpp_inner.sortcontacts=sortContacts,this.zpp_inner.sortcontacts},Object.defineProperty(nape.space.Space.prototype,"worldAngularDrag",{get:nape.space.Space.prototype.get_worldAngularDrag,set:nape.space.Space.prototype.set_worldAngularDrag}),nape.space.Space.prototype.get_worldAngularDrag=function(){return this.zpp_inner.global_ang_drag},nape.space.Space.prototype.set_worldAngularDrag=function(worldAngularDrag){var d=worldAngularDrag;if(d!=d)throw new js._Boot.HaxeError("Error: Space::worldAngularDrag cannot be NaN");return this.zpp_inner.global_ang_drag=d,this.zpp_inner.global_ang_drag},Object.defineProperty(nape.space.Space.prototype,"worldLinearDrag",{get:nape.space.Space.prototype.get_worldLinearDrag,set:nape.space.Space.prototype.set_worldLinearDrag}),nape.space.Space.prototype.get_worldLinearDrag=function(){return this.zpp_inner.global_lin_drag},nape.space.Space.prototype.set_worldLinearDrag=function(worldLinearDrag){var d=worldLinearDrag;if(d!=d)throw new js._Boot.HaxeError("Error: Space::worldLinearDrag cannot be NaN");return this.zpp_inner.global_lin_drag=d,this.zpp_inner.global_lin_drag},Object.defineProperty(nape.space.Space.prototype,"compounds",{get:nape.space.Space.prototype.get_compounds}),nape.space.Space.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},Object.defineProperty(nape.space.Space.prototype,"bodies",{get:nape.space.Space.prototype.get_bodies}),nape.space.Space.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},Object.defineProperty(nape.space.Space.prototype,"liveBodies",{get:nape.space.Space.prototype.get_liveBodies}),nape.space.Space.prototype.get_liveBodies=function(){return this.zpp_inner.wrap_live},Object.defineProperty(nape.space.Space.prototype,"constraints",{get:nape.space.Space.prototype.get_constraints}),nape.space.Space.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},Object.defineProperty(nape.space.Space.prototype,"liveConstraints",{get:nape.space.Space.prototype.get_liveConstraints}),nape.space.Space.prototype.get_liveConstraints=function(){return this.zpp_inner.wrap_livecon},nape.space.Space.prototype.visitBodies=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Space::visitBodies");var _this=this.zpp_inner.wrap_bodies;_this.zpp_inner.valmod();for(var _g=nape.phys.BodyIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp,b;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.BodyIterator.zpp_pool,nape.phys.BodyIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1,lambda(_g.zpp_inner.at(_g.zpp_i++))}var _this2=this.zpp_inner.wrap_compounds;_this2.zpp_inner.valmod();for(var _g1=nape.phys.CompoundIterator.get(_this2);;){_g1.zpp_inner.zpp_inner.valmod();var _this3=_g1.zpp_inner;_this3.zpp_inner.valmod(),_this3.zpp_inner.zip_length&&(_this3.zpp_inner.zip_length=!1,_this3.zpp_inner.user_length=_this3.zpp_inner.inner.length);var length1=_this3.zpp_inner.user_length,tmp1,c;if(_g1.zpp_critical=!0,_g1.zpp_i<length1?tmp1=!0:(_g1.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp1=!1),!tmp1)break;_g1.zpp_critical=!1,_g1.zpp_inner.at(_g1.zpp_i++).visitBodies(lambda)}},nape.space.Space.prototype.visitConstraints=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Space::visitConstraints");var _this=this.zpp_inner.wrap_constraints;_this.zpp_inner.valmod();for(var _g=nape.constraint.ConstraintIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp,c;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.constraint.ConstraintIterator.zpp_pool,nape.constraint.ConstraintIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1,lambda(_g.zpp_inner.at(_g.zpp_i++))}var _this2=this.zpp_inner.wrap_compounds;_this2.zpp_inner.valmod();for(var _g1=nape.phys.CompoundIterator.get(_this2);;){_g1.zpp_inner.zpp_inner.valmod();var _this3=_g1.zpp_inner;_this3.zpp_inner.valmod(),_this3.zpp_inner.zip_length&&(_this3.zpp_inner.zip_length=!1,_this3.zpp_inner.user_length=_this3.zpp_inner.inner.length);var length1=_this3.zpp_inner.user_length,tmp1,c1;if(_g1.zpp_critical=!0,_g1.zpp_i<length1?tmp1=!0:(_g1.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g1,_g1.zpp_inner=null,tmp1=!1),!tmp1)break;_g1.zpp_critical=!1,_g1.zpp_inner.at(_g1.zpp_i++).visitConstraints(lambda)}},nape.space.Space.prototype.visitCompounds=function(lambda){if(null==lambda)throw new js._Boot.HaxeError("Error: lambda cannot be null for Space::visitCompounds");var _this=this.zpp_inner.wrap_compounds;_this.zpp_inner.valmod();for(var _g=nape.phys.CompoundIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.phys.CompoundIterator.zpp_pool,nape.phys.CompoundIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var c=_g.zpp_inner.at(_g.zpp_i++);lambda(c),c.visitCompounds(lambda)}},Object.defineProperty(nape.space.Space.prototype,"world",{get:nape.space.Space.prototype.get_world}),nape.space.Space.prototype.get_world=function(){return this.zpp_inner.__static},Object.defineProperty(nape.space.Space.prototype,"arbiters",{get:nape.space.Space.prototype.get_arbiters}),nape.space.Space.prototype.get_arbiters=function(){if(null==this.zpp_inner.wrap_arbiters){var ret=new zpp_nape.dynamics.ZPP_SpaceArbiterList;ret.space=this.zpp_inner,this.zpp_inner.wrap_arbiters=ret}return this.zpp_inner.wrap_arbiters},Object.defineProperty(nape.space.Space.prototype,"listeners",{get:nape.space.Space.prototype.get_listeners}),nape.space.Space.prototype.get_listeners=function(){return this.zpp_inner.wrap_listeners},nape.space.Space.prototype.clear=function(){if(this.zpp_inner.midstep)throw new js._Boot.HaxeError("Error: Space::clear() cannot be called during space step()");this.zpp_inner.clear()},nape.space.Space.prototype.step=function(deltaTime,velocityIterations,positionIterations){if(null==positionIterations&&(positionIterations=10),null==velocityIterations&&(velocityIterations=10),deltaTime!=deltaTime)throw new js._Boot.HaxeError("Error: deltaTime cannot be NaN");if(deltaTime<=0)throw new js._Boot.HaxeError("Error: deltaTime must be strictly positive");if(velocityIterations<=0)throw new js._Boot.HaxeError("Error: must use atleast one velocity iteration");if(positionIterations<=0)throw new js._Boot.HaxeError("Error: must use atleast one position iteration");this.zpp_inner.step(deltaTime,velocityIterations,positionIterations)},Object.defineProperty(nape.space.Space.prototype,"timeStamp",{get:nape.space.Space.prototype.get_timeStamp}),nape.space.Space.prototype.get_timeStamp=function(){return this.zpp_inner.stamp},Object.defineProperty(nape.space.Space.prototype,"elapsedTime",{get:nape.space.Space.prototype.get_elapsedTime}),nape.space.Space.prototype.get_elapsedTime=function(){return this.zpp_inner.time},nape.space.Space.prototype.interactionType=function(shape1,shape2){if(null==shape1||null==shape2)throw new js._Boot.HaxeError("Error: Cannot evaluate interaction type for null shapes");if(null==(null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null)||null==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Cannot evaluate interaction type for shapes not part of a Body");if(1==(null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null).zpp_inner.type&&1==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null).zpp_inner.type)return null;if((null!=shape1.zpp_inner.body?shape1.zpp_inner.body.outer:null)==(null!=shape2.zpp_inner.body?shape2.zpp_inner.body.outer:null))return null;var s1=shape1.zpp_inner,s2=shape2.zpp_inner,_this=this.zpp_inner,b1=s1.body,b2=s2.body,con_ignore;con_ignore=!1;for(var cx_ite=b1.constraints.head,_g,_g1;null!=cx_ite;){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=!0;break}cx_ite=cx_ite.next}if(con_ignore)_g1=!1;else{for(var cur=s1;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;var g1=null==cur?null:cur.group,_g2;if(null==g1)_g2=!1;else{for(var cur1=s2;null!=cur1&&null==cur1.group;)cur1=null!=cur1.ishape?cur1.ishape.body:null!=cur1.icompound?cur1.icompound.compound:cur1.ibody.compound;var g2=null==cur1?null:cur1.group;if(null==g2)_g2=!1;else{for(var ret=!1;null!=g1&&null!=g2;){if(g1==g2){ret=g1.ignore;break}g1.depth<g2.depth?g2=g2.group:g1=g1.group}_g2=ret}}_g1=!_g2}if(_g1){var _g3;if(s1.sensorEnabled||s2.sensorEnabled){var _this1=s1.filter,x=s2.filter;_g3=0!=(_this1.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&_this1.sensorGroup)}else _g3=!1;if(_g3)_g=2;else{var _g4;if(s1.fluidEnabled||s2.fluidEnabled){var _this2=s1.filter,x1=s2.filter;_g4=0!=(_this2.fluidMask&x1.fluidGroup)&&0!=(x1.fluidMask&_this2.fluidGroup)}else _g4=!1;if(!_g4||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia){var _this3=s1.filter,x2=s2.filter;_g=0==(_this3.collisionMask&x2.collisionGroup)||0==(x2.collisionMask&_this3.collisionGroup)||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia?-1:1}else _g=0}}else _g=-1;switch(_g){case 0:return null==zpp_nape.util.ZPP_Flags.InteractionType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_FLUID;case 1:return null==zpp_nape.util.ZPP_Flags.InteractionType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_COLLISION;case 2:return null==zpp_nape.util.ZPP_Flags.InteractionType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=new nape.callbacks.InteractionType,zpp_nape.util.ZPP_Flags.internal=!1),zpp_nape.util.ZPP_Flags.InteractionType_SENSOR;default:return null}},nape.space.Space.prototype.shapesUnderPoint=function(point,filter,output){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes under a null point :)");var ret=this.zpp_inner;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var ret1=point.zpp_inner.x;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var ret2=ret.shapesUnderPoint(ret1,point.zpp_inner.y,null==filter?null:filter.zpp_inner,output);if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.space.Space.prototype.bodiesUnderPoint=function(point,filter,output){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==point)throw new js._Boot.HaxeError("Error: Cannot evaluate objects under a null point :)");var ret=this.zpp_inner;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=point.zpp_inner;null!=_this._validate&&_this._validate();var ret1=point.zpp_inner.x;if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=point.zpp_inner;null!=_this1._validate&&_this1._validate();var ret2=ret.bodiesUnderPoint(ret1,point.zpp_inner.y,null==filter?null:filter.zpp_inner,output);if(point.zpp_inner.weak){if(null!=point&&point.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=point.zpp_inner;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),point.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=point.zpp_inner;point.zpp_inner.outer=null,point.zpp_inner=null;var o=point;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret2},nape.space.Space.prototype.shapesInAABB=function(aabb,containment,strict,filter,output){if(null==strict&&(strict=!0),null==containment&&(containment=!1),null==aabb)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes in a null AABB :)");var tmp,_this=aabb.zpp_inner;null!=_this._validate&&_this._validate();var _this1=aabb.zpp_inner;if(_this1.maxx-_this1.minx!=0){var _this2=aabb.zpp_inner;null!=_this2._validate&&_this2._validate();var _this3=aabb.zpp_inner;tmp=_this3.maxy-_this3.miny==0}else tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes in degenerate AABB :/");return this.zpp_inner.shapesInAABB(aabb,strict,containment,null==filter?null:filter.zpp_inner,output)},nape.space.Space.prototype.bodiesInAABB=function(aabb,containment,strict,filter,output){if(null==strict&&(strict=!0),null==containment&&(containment=!1),null==aabb)throw new js._Boot.HaxeError("Error: Cannot evaluate objects in a null AABB :)");var tmp,_this=aabb.zpp_inner;null!=_this._validate&&_this._validate();var _this1=aabb.zpp_inner;if(_this1.maxx-_this1.minx!=0){var _this2=aabb.zpp_inner;null!=_this2._validate&&_this2._validate();var _this3=aabb.zpp_inner;tmp=_this3.maxy-_this3.miny==0}else tmp=!0;if(tmp)throw new js._Boot.HaxeError("Error: Cannot evaluate objects in degenerate AABB :/");return this.zpp_inner.bodiesInAABB(aabb,strict,containment,null==filter?null:filter.zpp_inner,output)},nape.space.Space.prototype.shapesInCircle=function(position,radius,containment,filter,output){if(null==containment&&(containment=!1),null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==position)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes at null circle :)");if(radius!=radius)throw new js._Boot.HaxeError("Error: Circle radius cannot be NaN");if(radius<=0)throw new js._Boot.HaxeError("Error: Circle radius must be strictly positive");var ret=this.zpp_inner.shapesInCircle(position,radius,containment,null==filter?null:filter.zpp_inner,output);if(position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=position.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.space.Space.prototype.bodiesInCircle=function(position,radius,containment,filter,output){if(null==containment&&(containment=!1),null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");if(null==position)throw new js._Boot.HaxeError("Error: Cannot evaluate objects at null circle :)");if(radius!=radius)throw new js._Boot.HaxeError("Error: Circle radius cannot be NaN");if(radius<=0)throw new js._Boot.HaxeError("Error: Circle radius must be strictly positive");var ret=this.zpp_inner.bodiesInCircle(position,radius,containment,null==filter?null:filter.zpp_inner,output);if(position.zpp_inner.weak){if(null!=position&&position.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=position.zpp_inner;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),position.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=position.zpp_inner;position.zpp_inner.outer=null,position.zpp_inner=null;var o=position;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}return ret},nape.space.Space.prototype.shapesInShape=function(shape,containment,filter,output){if(null==containment&&(containment=!1),null==shape)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes in a null shapes :)");if(null==(null!=shape.zpp_inner.body?shape.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Query shape needs to be inside a Body to be well defined :)");if(1==shape.zpp_inner.type){var res=shape.zpp_inner.polygon.valid();if(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),res!=zpp_nape.util.ZPP_Flags.ValidationResult_VALID)throw new js._Boot.HaxeError("Error: Polygon query shape is invalid : "+res.toString())}return this.zpp_inner.shapesInShape(shape.zpp_inner,containment,null==filter?null:filter.zpp_inner,output)},nape.space.Space.prototype.bodiesInShape=function(shape,containment,filter,output){if(null==containment&&(containment=!1),null==shape)throw new js._Boot.HaxeError("Error: Cannot evaluate bodies in a null shapes :)");if(null==(null!=shape.zpp_inner.body?shape.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Query shape needs to be inside a Body to be well defined :)");if(1==shape.zpp_inner.type){var res=shape.zpp_inner.polygon.valid();if(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),res!=zpp_nape.util.ZPP_Flags.ValidationResult_VALID)throw new js._Boot.HaxeError("Error: Polygon query shape is invalid : "+res.toString())}return this.zpp_inner.bodiesInShape(shape.zpp_inner,containment,null==filter?null:filter.zpp_inner,output)},nape.space.Space.prototype.shapesInBody=function(body,filter,output){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes in null body");var ret=null==output?new nape.shape.ShapeList:output,_this=body.zpp_inner.wrap_shapes;_this.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var shape=_g.zpp_inner.at(_g.zpp_i++),cur=this.shapesInShape(shape,!1,filter,ret)}return ret},nape.space.Space.prototype.bodiesInBody=function(body,filter,output){if(null==body)throw new js._Boot.HaxeError("Error: Cannot evaluate shapes in null body");var ret=null==output?new nape.phys.BodyList:output,_this=body.zpp_inner.wrap_shapes;_this.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var shape=_g.zpp_inner.at(_g.zpp_i++),cur=this.bodiesInShape(shape,!1,filter,ret)}return ret},nape.space.Space.prototype.convexCast=function(shape,deltaTime,liveSweep,filter){if(null==liveSweep&&(liveSweep=!1),null==shape)throw new js._Boot.HaxeError("Error: Cannot cast null shape :)");if(null==(null!=shape.zpp_inner.body?shape.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape must belong to a body to be cast.");if(deltaTime<0||deltaTime!=deltaTime)throw new js._Boot.HaxeError("Error: deltaTime must be positive");return this.zpp_inner.convexCast(shape.zpp_inner,deltaTime,filter,liveSweep)},nape.space.Space.prototype.convexMultiCast=function(shape,deltaTime,liveSweep,filter,output){if(null==liveSweep&&(liveSweep=!1),null==shape)throw new js._Boot.HaxeError("Error: Cannot cast null shape :)");if(null==(null!=shape.zpp_inner.body?shape.zpp_inner.body.outer:null))throw new js._Boot.HaxeError("Error: Shape must belong to a body to be cast.");if(deltaTime<0||deltaTime!=deltaTime)throw new js._Boot.HaxeError("Error: deltaTime must be positive");return this.zpp_inner.convexMultiCast(shape.zpp_inner,deltaTime,filter,liveSweep,output)},nape.space.Space.prototype.rayCast=function(ray,inner,filter){if(null==inner&&(inner=!1),null==ray)throw new js._Boot.HaxeError("Error: Cannot cast null ray :)");return this.zpp_inner.rayCast(ray,inner,filter)},nape.space.Space.prototype.rayMultiCast=function(ray,inner,filter,output){if(null==inner&&(inner=!1),null==ray)throw new js._Boot.HaxeError("Error: Cannot cast null ray :)");return this.zpp_inner.rayMultiCast(ray,inner,filter,output)},nape.space.Space.prototype.__class__=nape.space.Space,nape.util||(nape.util={}),nape.util.Debug=$hxClasses["nape.util.Debug"]=function(){},nape.util.Debug.__name__=["nape","util","Debug"],nape.util.Debug.version=function(){return"Nape 2.0.19"},nape.util.Debug.clearObjectPools=function(){for(;null!=nape.constraint.ConstraintIterator.zpp_pool;){var nxt=nape.constraint.ConstraintIterator.zpp_pool.zpp_next;nape.constraint.ConstraintIterator.zpp_pool.zpp_next=null,nape.constraint.ConstraintIterator.zpp_pool=nxt}for(;null!=nape.phys.InteractorIterator.zpp_pool;){var nxt1=nape.phys.InteractorIterator.zpp_pool.zpp_next;nape.phys.InteractorIterator.zpp_pool.zpp_next=null,nape.phys.InteractorIterator.zpp_pool=nxt1}for(;null!=nape.phys.BodyIterator.zpp_pool;){var nxt2=nape.phys.BodyIterator.zpp_pool.zpp_next;nape.phys.BodyIterator.zpp_pool.zpp_next=null,nape.phys.BodyIterator.zpp_pool=nxt2}for(;null!=nape.phys.CompoundIterator.zpp_pool;){var nxt3=nape.phys.CompoundIterator.zpp_pool.zpp_next;nape.phys.CompoundIterator.zpp_pool.zpp_next=null,nape.phys.CompoundIterator.zpp_pool=nxt3}for(;null!=nape.callbacks.ListenerIterator.zpp_pool;){var nxt4=nape.callbacks.ListenerIterator.zpp_pool.zpp_next;nape.callbacks.ListenerIterator.zpp_pool.zpp_next=null,nape.callbacks.ListenerIterator.zpp_pool=nxt4}for(;null!=nape.callbacks.CbTypeIterator.zpp_pool;){var nxt5=nape.callbacks.CbTypeIterator.zpp_pool.zpp_next;nape.callbacks.CbTypeIterator.zpp_pool.zpp_next=null,nape.callbacks.CbTypeIterator.zpp_pool=nxt5}for(;null!=nape.geom.ConvexResultIterator.zpp_pool;){var nxt6=nape.geom.ConvexResultIterator.zpp_pool.zpp_next;nape.geom.ConvexResultIterator.zpp_pool.zpp_next=null,nape.geom.ConvexResultIterator.zpp_pool=nxt6}for(;null!=nape.geom.GeomPolyIterator.zpp_pool;){var nxt7=nape.geom.GeomPolyIterator.zpp_pool.zpp_next;nape.geom.GeomPolyIterator.zpp_pool.zpp_next=null,nape.geom.GeomPolyIterator.zpp_pool=nxt7}for(;null!=nape.geom.Vec2Iterator.zpp_pool;){var nxt8=nape.geom.Vec2Iterator.zpp_pool.zpp_next;nape.geom.Vec2Iterator.zpp_pool.zpp_next=null,nape.geom.Vec2Iterator.zpp_pool=nxt8}for(;null!=nape.geom.RayResultIterator.zpp_pool;){var nxt9=nape.geom.RayResultIterator.zpp_pool.zpp_next;nape.geom.RayResultIterator.zpp_pool.zpp_next=null,nape.geom.RayResultIterator.zpp_pool=nxt9}for(;null!=nape.shape.ShapeIterator.zpp_pool;){var nxt10=nape.shape.ShapeIterator.zpp_pool.zpp_next;nape.shape.ShapeIterator.zpp_pool.zpp_next=null,nape.shape.ShapeIterator.zpp_pool=nxt10}for(;null!=nape.shape.EdgeIterator.zpp_pool;){var nxt11=nape.shape.EdgeIterator.zpp_pool.zpp_next;nape.shape.EdgeIterator.zpp_pool.zpp_next=null,nape.shape.EdgeIterator.zpp_pool=nxt11}for(;null!=nape.dynamics.ContactIterator.zpp_pool;){var nxt12=nape.dynamics.ContactIterator.zpp_pool.zpp_next;nape.dynamics.ContactIterator.zpp_pool.zpp_next=null,nape.dynamics.ContactIterator.zpp_pool=nxt12}for(;null!=nape.dynamics.ArbiterIterator.zpp_pool;){var nxt13=nape.dynamics.ArbiterIterator.zpp_pool.zpp_next;nape.dynamics.ArbiterIterator.zpp_pool.zpp_next=null,nape.dynamics.ArbiterIterator.zpp_pool=nxt13}for(;null!=nape.dynamics.InteractionGroupIterator.zpp_pool;){var nxt14=nape.dynamics.InteractionGroupIterator.zpp_pool.zpp_next;nape.dynamics.InteractionGroupIterator.zpp_pool.zpp_next=null,nape.dynamics.InteractionGroupIterator.zpp_pool=nxt14}for(;null!=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool;){var nxt15=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=nxt15}for(;null!=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool;){var nxt16=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=nxt16}for(;null!=zpp_nape.phys.ZPP_Material.zpp_pool;){var nxt17=zpp_nape.phys.ZPP_Material.zpp_pool.next;zpp_nape.phys.ZPP_Material.zpp_pool.next=null,zpp_nape.phys.ZPP_Material.zpp_pool=nxt17}for(;null!=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool;){var nxt18=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=nxt18}for(;null!=zpp_nape.phys.ZPP_FluidProperties.zpp_pool;){var nxt19=zpp_nape.phys.ZPP_FluidProperties.zpp_pool.next;zpp_nape.phys.ZPP_FluidProperties.zpp_pool.next=null,zpp_nape.phys.ZPP_FluidProperties.zpp_pool=nxt19}for(;null!=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool;){var nxt20=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=nxt20}for(;null!=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool;){var nxt21=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=nxt21}for(;null!=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool;){var nxt22=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=nxt22}for(;null!=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool;){var nxt23=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=nxt23}for(;null!=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool;){var nxt24=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=nxt24}for(;null!=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool;){var nxt25=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool.next;zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool.next=null,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=nxt25}for(;null!=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool;){var nxt26=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=nxt26}for(;null!=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool;){var nxt27=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=nxt27}for(;null!=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool;){var nxt28=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=nxt28}for(;null!=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool;){var nxt29=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=nxt29}for(;null!=zpp_nape.callbacks.ZPP_Callback.zpp_pool;){var nxt30=zpp_nape.callbacks.ZPP_Callback.zpp_pool.next;zpp_nape.callbacks.ZPP_Callback.zpp_pool.next=null,zpp_nape.callbacks.ZPP_Callback.zpp_pool=nxt30}for(;null!=zpp_nape.callbacks.ZPP_CbSet.zpp_pool;){var nxt31=zpp_nape.callbacks.ZPP_CbSet.zpp_pool.next;zpp_nape.callbacks.ZPP_CbSet.zpp_pool.next=null,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=nxt31}for(;null!=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool;){var nxt32=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=nxt32}for(;null!=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool;){var nxt33=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=nxt33}for(;null!=zpp_nape.geom.ZPP_GeomVert.zpp_pool;){var nxt34=zpp_nape.geom.ZPP_GeomVert.zpp_pool.next;zpp_nape.geom.ZPP_GeomVert.zpp_pool.next=null,zpp_nape.geom.ZPP_GeomVert.zpp_pool=nxt34}for(;null!=zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool;){var nxt35=zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool.next;zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool.next=null,zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool=nxt35}for(;null!=zpp_nape.geom.ZPP_Mat23.zpp_pool;){var nxt36=zpp_nape.geom.ZPP_Mat23.zpp_pool.next;zpp_nape.geom.ZPP_Mat23.zpp_pool.next=null,zpp_nape.geom.ZPP_Mat23.zpp_pool=nxt36}for(;null!=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool;){var nxt37=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=nxt37}for(;null!=zpp_nape.geom.ZPP_CutVert.zpp_pool;){var nxt38=zpp_nape.geom.ZPP_CutVert.zpp_pool.next;zpp_nape.geom.ZPP_CutVert.zpp_pool.next=null,zpp_nape.geom.ZPP_CutVert.zpp_pool=nxt38}for(;null!=zpp_nape.geom.ZPP_CutInt.zpp_pool;){var nxt39=zpp_nape.geom.ZPP_CutInt.zpp_pool.next;zpp_nape.geom.ZPP_CutInt.zpp_pool.next=null,zpp_nape.geom.ZPP_CutInt.zpp_pool=nxt39}for(;null!=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool;){var nxt40=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=nxt40}for(;null!=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool;){var nxt41=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=nxt41}for(;null!=zpp_nape.geom.ZPP_Vec2.zpp_pool;){var nxt42=zpp_nape.geom.ZPP_Vec2.zpp_pool.next;zpp_nape.geom.ZPP_Vec2.zpp_pool.next=null,zpp_nape.geom.ZPP_Vec2.zpp_pool=nxt42}for(;null!=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool;){var nxt43=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=nxt43}for(;null!=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool;){var nxt44=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool.next;zpp_nape.geom.ZPP_PartitionVertex.zpp_pool.next=null,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=nxt44}for(;null!=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool;){var nxt45=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=nxt45}for(;null!=zpp_nape.geom.ZPP_SimplifyV.zpp_pool;){var nxt46=zpp_nape.geom.ZPP_SimplifyV.zpp_pool.next;zpp_nape.geom.ZPP_SimplifyV.zpp_pool.next=null,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=nxt46}for(;null!=zpp_nape.geom.ZPP_SimplifyP.zpp_pool;){var nxt47=zpp_nape.geom.ZPP_SimplifyP.zpp_pool.next;zpp_nape.geom.ZPP_SimplifyP.zpp_pool.next=null,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=nxt47}for(;null!=zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool;){var nxt48=zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool.next;zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool.next=null,zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool=nxt48}for(;null!=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool;){var nxt49=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=nxt49}for(;null!=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool;){var nxt50=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=nxt50}for(;null!=zpp_nape.geom.ZPP_PartitionPair.zpp_pool;){var nxt51=zpp_nape.geom.ZPP_PartitionPair.zpp_pool.next;zpp_nape.geom.ZPP_PartitionPair.zpp_pool.next=null,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=nxt51}for(;null!=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool;){var nxt52=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=nxt52}for(;null!=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool;){var nxt53=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=nxt53}for(;null!=zpp_nape.geom.ZPP_AABB.zpp_pool;){var nxt54=zpp_nape.geom.ZPP_AABB.zpp_pool.next;zpp_nape.geom.ZPP_AABB.zpp_pool.next=null,zpp_nape.geom.ZPP_AABB.zpp_pool=nxt54}for(;null!=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool;){var nxt55=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=nxt55}for(;null!=zpp_nape.geom.ZPP_SimpleVert.zpp_pool;){var nxt56=zpp_nape.geom.ZPP_SimpleVert.zpp_pool.next;zpp_nape.geom.ZPP_SimpleVert.zpp_pool.next=null,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=nxt56}for(;null!=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool;){var nxt57=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool.next;zpp_nape.geom.ZPP_SimpleSeg.zpp_pool.next=null,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=nxt57}for(;null!=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool;){var nxt58=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=nxt58}for(;null!=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool;){var nxt59=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=nxt59}for(;null!=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool;){var nxt60=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool.next;zpp_nape.geom.ZPP_SimpleEvent.zpp_pool.next=null,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=nxt60}for(;null!=zpp_nape.util.Hashable2_Boolfalse.zpp_pool;){var nxt61=zpp_nape.util.Hashable2_Boolfalse.zpp_pool.next;zpp_nape.util.Hashable2_Boolfalse.zpp_pool.next=null,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=nxt61}for(;null!=zpp_nape.geom.ZPP_ToiEvent.zpp_pool;){var nxt62=zpp_nape.geom.ZPP_ToiEvent.zpp_pool.next;zpp_nape.geom.ZPP_ToiEvent.zpp_pool.next=null,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=nxt62}for(;null!=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool;){var nxt63=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=nxt63}for(;null!=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool;){var nxt64=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=nxt64}for(;null!=zpp_nape.geom.ZPP_MarchSpan.zpp_pool;){var nxt65=zpp_nape.geom.ZPP_MarchSpan.zpp_pool.next;zpp_nape.geom.ZPP_MarchSpan.zpp_pool.next=null,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=nxt65}for(;null!=zpp_nape.geom.ZPP_MarchPair.zpp_pool;){var nxt66=zpp_nape.geom.ZPP_MarchPair.zpp_pool.next;zpp_nape.geom.ZPP_MarchPair.zpp_pool.next=null,zpp_nape.geom.ZPP_MarchPair.zpp_pool=nxt66}for(;null!=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool;){var nxt67=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=nxt67}for(;null!=zpp_nape.shape.ZPP_Edge.zpp_pool;){var nxt68=zpp_nape.shape.ZPP_Edge.zpp_pool.next;zpp_nape.shape.ZPP_Edge.zpp_pool.next=null,zpp_nape.shape.ZPP_Edge.zpp_pool=nxt68}for(;null!=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool;){var nxt69=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=nxt69}for(;null!=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool;){var nxt70=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=nxt70}for(;null!=zpp_nape.space.ZPP_SweepData.zpp_pool;){var nxt71=zpp_nape.space.ZPP_SweepData.zpp_pool.next;zpp_nape.space.ZPP_SweepData.zpp_pool.next=null,zpp_nape.space.ZPP_SweepData.zpp_pool=nxt71}for(;null!=zpp_nape.space.ZPP_AABBNode.zpp_pool;){var nxt72=zpp_nape.space.ZPP_AABBNode.zpp_pool.next;zpp_nape.space.ZPP_AABBNode.zpp_pool.next=null,zpp_nape.space.ZPP_AABBNode.zpp_pool=nxt72}for(;null!=zpp_nape.space.ZPP_AABBPair.zpp_pool;){var nxt73=zpp_nape.space.ZPP_AABBPair.zpp_pool.next;zpp_nape.space.ZPP_AABBPair.zpp_pool.next=null,zpp_nape.space.ZPP_AABBPair.zpp_pool=nxt73}for(;null!=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool;){var nxt74=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=nxt74}for(;null!=zpp_nape.dynamics.ZPP_Contact.zpp_pool;){var nxt75=zpp_nape.dynamics.ZPP_Contact.zpp_pool.next;zpp_nape.dynamics.ZPP_Contact.zpp_pool.next=null,zpp_nape.dynamics.ZPP_Contact.zpp_pool=nxt75}for(;null!=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool;){var nxt76=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=nxt76}for(;null!=zpp_nape.space.ZPP_Island.zpp_pool;){var nxt77=zpp_nape.space.ZPP_Island.zpp_pool.next;zpp_nape.space.ZPP_Island.zpp_pool.next=null,zpp_nape.space.ZPP_Island.zpp_pool=nxt77}for(;null!=zpp_nape.space.ZPP_Component.zpp_pool;){var nxt78=zpp_nape.space.ZPP_Component.zpp_pool.next;zpp_nape.space.ZPP_Component.zpp_pool.next=null,zpp_nape.space.ZPP_Component.zpp_pool=nxt78}for(;null!=zpp_nape.space.ZPP_CallbackSet.zpp_pool;){var nxt79=zpp_nape.space.ZPP_CallbackSet.zpp_pool.next;zpp_nape.space.ZPP_CallbackSet.zpp_pool.next=null,zpp_nape.space.ZPP_CallbackSet.zpp_pool=nxt79}for(;null!=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool;){var nxt80=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool.next;zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool.next=null,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=nxt80}for(;null!=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool;){var nxt81=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool.next;zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool.next=null,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=nxt81}for(;null!=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool;){var nxt82=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool.next;zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool.next=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=nxt82}for(;null!=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool;){var nxt83=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=nxt83}for(;null!=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool;){var nxt84=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool.next;zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool.next=null,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=nxt84}for(;null!=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool;){var nxt85=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=nxt85}for(;null!=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool;){var nxt86=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=nxt86}for(;null!=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool;){var nxt87=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=nxt87}for(;null!=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool;){var nxt88=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=nxt88}for(;null!=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool;){var nxt89=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=nxt89}for(;null!=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool;){var nxt90=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool.next;zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool.next=null,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=nxt90}for(;null!=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool;){var nxt91=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool.next;zpp_nape.util.ZNPNode_ConvexResult.zpp_pool.next=null,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=nxt91}for(;null!=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool;){var nxt92=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool.next;zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool.next=null,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=nxt92}for(;null!=zpp_nape.util.ZNPNode_RayResult.zpp_pool;){var nxt93=zpp_nape.util.ZNPNode_RayResult.zpp_pool.next;zpp_nape.util.ZNPNode_RayResult.zpp_pool.next=null,zpp_nape.util.ZNPNode_RayResult.zpp_pool=nxt93}for(;null!=zpp_nape.util.ZPP_PubPool.poolGeomPoly;){var nxt94=zpp_nape.util.ZPP_PubPool.poolGeomPoly.zpp_pool;zpp_nape.util.ZPP_PubPool.poolGeomPoly.zpp_pool=null,zpp_nape.util.ZPP_PubPool.poolGeomPoly=nxt94}for(;null!=zpp_nape.util.ZPP_PubPool.poolVec2;){var nxt95=zpp_nape.util.ZPP_PubPool.poolVec2.zpp_pool;zpp_nape.util.ZPP_PubPool.poolVec2.zpp_pool=null,zpp_nape.util.ZPP_PubPool.poolVec2=nxt95}for(;null!=zpp_nape.util.ZPP_PubPool.poolVec3;){var nxt96=zpp_nape.util.ZPP_PubPool.poolVec3.zpp_pool;zpp_nape.util.ZPP_PubPool.poolVec3.zpp_pool=null,zpp_nape.util.ZPP_PubPool.poolVec3=nxt96}},nape.util.Debug.prototype.__class__=nape.util.Debug,void 0===sandbox&&(sandbox={}),sandbox.Main=$hxClasses["sandbox.Main"]=function(){},sandbox.Main.__name__=["sandbox","Main"],sandbox.Main.main=function(){},sandbox.Main.prototype.__class__=sandbox.Main,void 0===zpp_nape&&(zpp_nape={}),zpp_nape.ZPP_Const=$hxClasses["zpp_nape.ZPP_Const"]=function(){},zpp_nape.ZPP_Const.__name__=["zpp_nape","ZPP_Const"],zpp_nape.ZPP_Const.POSINF=function(){return 1/0},zpp_nape.ZPP_Const.NEGINF=function(){return-1/0},zpp_nape.ZPP_Const.prototype.__class__=zpp_nape.ZPP_Const,zpp_nape.ZPP_ID=$hxClasses["zpp_nape.ZPP_ID"]=function(){},zpp_nape.ZPP_ID.__name__=["zpp_nape","ZPP_ID"],zpp_nape.ZPP_ID.Constraint=function(){return zpp_nape.ZPP_ID._Constraint++},zpp_nape.ZPP_ID.Interactor=function(){return zpp_nape.ZPP_ID._Interactor++},zpp_nape.ZPP_ID.CbType=function(){return zpp_nape.ZPP_ID._CbType++},zpp_nape.ZPP_ID.CbSet=function(){return zpp_nape.ZPP_ID._CbSet++},zpp_nape.ZPP_ID.Listener=function(){return zpp_nape.ZPP_ID._Listener++},zpp_nape.ZPP_ID.ZPP_SimpleVert=function(){return zpp_nape.ZPP_ID._ZPP_SimpleVert++},zpp_nape.ZPP_ID.ZPP_SimpleSeg=function(){return zpp_nape.ZPP_ID._ZPP_SimpleSeg++},zpp_nape.ZPP_ID.Space=function(){return zpp_nape.ZPP_ID._Space++},zpp_nape.ZPP_ID.InteractionGroup=function(){return zpp_nape.ZPP_ID._InteractionGroup++},zpp_nape.ZPP_ID.prototype.__class__=zpp_nape.ZPP_ID,zpp_nape.callbacks||(zpp_nape.callbacks={}),zpp_nape.callbacks.ZPP_Callback=$hxClasses["zpp_nape.callbacks.ZPP_Callback"]=function(){this.constraint=null,this.body=null,this.pre_swapped=!1,this.pre_arbiter=null,this.wrap_arbiters=null,this.set=null,this.int2=null,this.int1=null,this.length=0,this.prev=null,this.next=null,this.index=0,this.space=null,this.listener=null,this.event=0,this.outer_int=null,this.outer_con=null,this.outer_body=null,this.length=0},zpp_nape.callbacks.ZPP_Callback.__name__=["zpp_nape","callbacks","ZPP_Callback"],zpp_nape.callbacks.ZPP_Callback.prototype.outer_body=null,zpp_nape.callbacks.ZPP_Callback.prototype.outer_con=null,zpp_nape.callbacks.ZPP_Callback.prototype.outer_int=null,zpp_nape.callbacks.ZPP_Callback.prototype.wrapper_body=function(){return null==this.outer_body&&(zpp_nape.callbacks.ZPP_Callback.internal=!0,this.outer_body=new nape.callbacks.BodyCallback,zpp_nape.callbacks.ZPP_Callback.internal=!1,this.outer_body.zpp_inner=this),this.outer_body},zpp_nape.callbacks.ZPP_Callback.prototype.wrapper_con=function(){return null==this.outer_con&&(zpp_nape.callbacks.ZPP_Callback.internal=!0,this.outer_con=new nape.callbacks.ConstraintCallback,zpp_nape.callbacks.ZPP_Callback.internal=!1,this.outer_con.zpp_inner=this),this.outer_con},zpp_nape.callbacks.ZPP_Callback.prototype.wrapper_int=function(){return null==this.outer_int&&(zpp_nape.callbacks.ZPP_Callback.internal=!0,this.outer_int=new nape.callbacks.InteractionCallback,zpp_nape.callbacks.ZPP_Callback.internal=!1,this.outer_int.zpp_inner=this),null==this.wrap_arbiters?this.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null,this.outer_int},zpp_nape.callbacks.ZPP_Callback.prototype.event=null,zpp_nape.callbacks.ZPP_Callback.prototype.listener=null,zpp_nape.callbacks.ZPP_Callback.prototype.space=null,zpp_nape.callbacks.ZPP_Callback.prototype.index=null,zpp_nape.callbacks.ZPP_Callback.prototype.next=null,zpp_nape.callbacks.ZPP_Callback.prototype.prev=null,zpp_nape.callbacks.ZPP_Callback.prototype.length=null,zpp_nape.callbacks.ZPP_Callback.prototype.push=function(obj){null!=this.prev?this.prev.next=obj:this.next=obj,obj.prev=this.prev,obj.next=null,this.prev=obj,this.length++},zpp_nape.callbacks.ZPP_Callback.prototype.push_rev=function(obj){null!=this.next?this.next.prev=obj:this.prev=obj,obj.next=this.next,obj.prev=null,this.next=obj,this.length++},zpp_nape.callbacks.ZPP_Callback.prototype.pop=function(){var ret=this.next;return this.next=ret.next,null==this.next?this.prev=null:this.next.prev=null,this.length--,ret},zpp_nape.callbacks.ZPP_Callback.prototype.pop_rev=function(){var ret=this.prev;return this.prev=ret.prev,null==this.prev?this.next=null:this.prev.next=null,this.length--,ret},zpp_nape.callbacks.ZPP_Callback.prototype.empty=function(){return null==this.next},zpp_nape.callbacks.ZPP_Callback.prototype.clear=function(){for(;!this.empty();)this.pop()},zpp_nape.callbacks.ZPP_Callback.prototype.splice=function(o){var ret=o.next;return null==o.prev?(this.next=o.next,null!=this.next?this.next.prev=null:this.prev=null):(o.prev.next=o.next,null!=o.next?o.next.prev=o.prev:this.prev=o.prev),this.length--,ret},zpp_nape.callbacks.ZPP_Callback.prototype.rotateL=function(){this.push(this.pop())},zpp_nape.callbacks.ZPP_Callback.prototype.rotateR=function(){this.push_rev(this.pop_rev())},zpp_nape.callbacks.ZPP_Callback.prototype.cycleNext=function(o){return null==o.next?this.next:o.next},zpp_nape.callbacks.ZPP_Callback.prototype.cyclePrev=function(o){return null==o.prev?this.prev:o.prev},zpp_nape.callbacks.ZPP_Callback.prototype.at=function(i){for(var ret=this.next;0!=i--;)ret=ret.next;return ret},zpp_nape.callbacks.ZPP_Callback.prototype.rev_at=function(i){for(var ret=this.prev;0!=i--;)ret=ret.prev;return ret},zpp_nape.callbacks.ZPP_Callback.prototype.free=function(){this.int1=this.int2=null,this.body=null,this.constraint=null,this.listener=null,null!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null),this.set=null},zpp_nape.callbacks.ZPP_Callback.prototype.alloc=function(){},zpp_nape.callbacks.ZPP_Callback.prototype.int1=null,zpp_nape.callbacks.ZPP_Callback.prototype.int2=null,zpp_nape.callbacks.ZPP_Callback.prototype.set=null,zpp_nape.callbacks.ZPP_Callback.prototype.wrap_arbiters=null,zpp_nape.callbacks.ZPP_Callback.prototype.pre_arbiter=null,zpp_nape.callbacks.ZPP_Callback.prototype.pre_swapped=null,zpp_nape.callbacks.ZPP_Callback.prototype.genarbs=function(){null==this.wrap_arbiters?this.wrap_arbiters=zpp_nape.util.ZPP_ArbiterList.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null},zpp_nape.callbacks.ZPP_Callback.prototype.body=null,zpp_nape.callbacks.ZPP_Callback.prototype.constraint=null,zpp_nape.callbacks.ZPP_Callback.prototype.__class__=zpp_nape.callbacks.ZPP_Callback,zpp_nape.callbacks.ZPP_CbSet=$hxClasses["zpp_nape.callbacks.ZPP_CbSet"]=function(){this.wrap_constraints=null,this.constraints=null,this.wrap_interactors=null,this.interactors=null,this.zip_conlisteners=!1,this.conlisteners=null,this.zip_bodylisteners=!1,this.bodylisteners=null,this.zip_listeners=!1,this.listeners=null,this.cbpairs=null,this.manager=null,this.id=0,this.next=null,this.count=0,this.cbTypes=null,this.cbTypes=new zpp_nape.util.ZNPList_ZPP_CbType,this.listeners=new zpp_nape.util.ZNPList_ZPP_InteractionListener,this.zip_listeners=!0,this.bodylisteners=new zpp_nape.util.ZNPList_ZPP_BodyListener,this.zip_bodylisteners=!0,this.conlisteners=new zpp_nape.util.ZNPList_ZPP_ConstraintListener,this.zip_conlisteners=!0,this.constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.interactors=new zpp_nape.util.ZNPList_ZPP_Interactor,this.id=zpp_nape.ZPP_ID.CbSet(),this.cbpairs=new zpp_nape.util.ZNPList_ZPP_CbSetPair},zpp_nape.callbacks.ZPP_CbSet.__name__=["zpp_nape","callbacks","ZPP_CbSet"],zpp_nape.callbacks.ZPP_CbSet.setlt=function(a,b){for(var i=a.cbTypes.head,j=b.cbTypes.head;null!=i&&null!=j;){var ca=i.elt,cb=j.elt;if(ca.id<cb.id)return!0;if(cb.id<ca.id)return!1;i=i.next,j=j.next}return null!=j&&null==i},zpp_nape.callbacks.ZPP_CbSet.get=function(cbTypes){var ret;null==zpp_nape.callbacks.ZPP_CbSet.zpp_pool?ret=new zpp_nape.callbacks.ZPP_CbSet:(ret=zpp_nape.callbacks.ZPP_CbSet.zpp_pool,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=ret.next,ret.next=null);for(var ite=null,cx_ite=cbTypes.head;null!=cx_ite;){var cb=cx_ite.elt;ite=ret.cbTypes.insert(ite,cb),cb.cbsets.add(ret),cx_ite=cx_ite.next}return ret},zpp_nape.callbacks.ZPP_CbSet.compatible=function(i,a,b){var tmp,_this=i.options1,xs=a.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=i.options2,xs1=b.cbTypes;tmp=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else tmp=!1;if(tmp)return!0;var _this2=i.options2,xs2=a.cbTypes;if(_this2.nonemptyintersection(xs2,_this2.includes)&&!_this2.nonemptyintersection(xs2,_this2.excludes)){var _this3=i.options1,xs3=b.cbTypes;return!!_this3.nonemptyintersection(xs3,_this3.includes)&&!_this3.nonemptyintersection(xs3,_this3.excludes)}return!1},zpp_nape.callbacks.ZPP_CbSet.empty_intersection=function(a,b){for(var _this=a.manager,ret=null,pairs,cx_ite=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head,ret1;null!=cx_ite;){var p=cx_ite.elt;if(p.a==a&&p.b==b||p.a==b&&p.b==a){ret=p;break}cx_ite=cx_ite.next}null==ret&&(null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)?(ret1.a=a,ret1.b=b):(ret1.a=b,ret1.b=a),ret=ret1,a.cbpairs.add(ret),b!=a&&b.cbpairs.add(ret));return ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate()),null==ret.listeners.head},zpp_nape.callbacks.ZPP_CbSet.single_intersection=function(a,b,i){for(var _this=a.manager,ret=null,pairs,cx_ite=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head,ret1;null!=cx_ite;){var p=cx_ite.elt;if(p.a==a&&p.b==b||p.a==b&&p.b==a){ret=p;break}cx_ite=cx_ite.next}null==ret&&(null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)?(ret1.a=a,ret1.b=b):(ret1.a=b,ret1.b=a),ret=ret1,a.cbpairs.add(ret),b!=a&&b.cbpairs.add(ret));ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate());var ite=ret.listeners.head;return null!=ite&&ite.elt==i&&null==ite.next},zpp_nape.callbacks.ZPP_CbSet.find_all=function(a,b,event,cb){for(var _this=a.manager,ret=null,pairs,cx_ite=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head,ret1;null!=cx_ite;){var p=cx_ite.elt;if(p.a==a&&p.b==b||p.a==b&&p.b==a){ret=p;break}cx_ite=cx_ite.next}null==ret&&(null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)?(ret1.a=a,ret1.b=b):(ret1.a=b,ret1.b=a),ret=ret1,a.cbpairs.add(ret),b!=a&&b.cbpairs.add(ret));ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate());for(var cx_ite1=ret.listeners.head;null!=cx_ite1;){var x=cx_ite1.elt;x.event==event&&cb(x),cx_ite1=cx_ite1.next}},zpp_nape.callbacks.ZPP_CbSet.prototype.cbTypes=null,zpp_nape.callbacks.ZPP_CbSet.prototype.count=null,zpp_nape.callbacks.ZPP_CbSet.prototype.next=null,zpp_nape.callbacks.ZPP_CbSet.prototype.id=null,zpp_nape.callbacks.ZPP_CbSet.prototype.manager=null,zpp_nape.callbacks.ZPP_CbSet.prototype.cbpairs=null,zpp_nape.callbacks.ZPP_CbSet.prototype.increment=function(){this.count++},zpp_nape.callbacks.ZPP_CbSet.prototype.decrement=function(){return 0==--this.count},zpp_nape.callbacks.ZPP_CbSet.prototype.invalidate_pairs=function(){for(var cx_ite=this.cbpairs.head;null!=cx_ite;){var cb;cx_ite.elt.zip_listeners=!0,cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbSet.prototype.listeners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.zip_listeners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.invalidate_listeners=function(){this.zip_listeners=!0,this.invalidate_pairs()},zpp_nape.callbacks.ZPP_CbSet.prototype.validate_listeners=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},zpp_nape.callbacks.ZPP_CbSet.prototype.realvalidate_listeners=function(){this.listeners.clear();for(var cx_ite=this.cbTypes.head;null!=cx_ite;){for(var cb=cx_ite.elt,npre=null,nite=this.listeners.head,cite=cb.listeners.head;null!=cite;){var cx=cite.elt;if(null!=nite&&nite.elt==cx)cite=cite.next,npre=nite,nite=nite.next;else{var tmp;if(null!=nite){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else tmp=!0;if(tmp){if(cx.space==this.manager.space){var _this=this.listeners,ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=cx;var temp=ret;null==npre?(temp.next=_this.head,_this.head=temp):(temp.next=npre.next,npre.next=temp),_this.pushmod=_this.modified=!0,_this.length++,npre=temp}cite=cite.next}else npre=nite,nite=nite.next}}cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbSet.prototype.bodylisteners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.zip_bodylisteners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.invalidate_bodylisteners=function(){this.zip_bodylisteners=!0},zpp_nape.callbacks.ZPP_CbSet.prototype.validate_bodylisteners=function(){this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners())},zpp_nape.callbacks.ZPP_CbSet.prototype.realvalidate_bodylisteners=function(){this.bodylisteners.clear();for(var cx_ite=this.cbTypes.head;null!=cx_ite;){for(var cb=cx_ite.elt,npre=null,nite=this.bodylisteners.head,cite=cb.bodylisteners.head;null!=cite;){var cx=cite.elt;if(null!=nite&&nite.elt==cx)cite=cite.next,npre=nite,nite=nite.next;else{var tmp;if(null!=nite){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else tmp=!0;if(tmp){var _this=cx.options;if(!_this.nonemptyintersection(this.cbTypes,_this.excludes)&&cx.space==this.manager.space){var _this1=this.bodylisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=cx;var temp=ret;null==npre?(temp.next=_this1.head,_this1.head=temp):(temp.next=npre.next,npre.next=temp),_this1.pushmod=_this1.modified=!0,_this1.length++,npre=temp}cite=cite.next}else npre=nite,nite=nite.next}}cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbSet.prototype.conlisteners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.zip_conlisteners=null,zpp_nape.callbacks.ZPP_CbSet.prototype.invalidate_conlisteners=function(){this.zip_conlisteners=!0},zpp_nape.callbacks.ZPP_CbSet.prototype.validate_conlisteners=function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},zpp_nape.callbacks.ZPP_CbSet.prototype.realvalidate_conlisteners=function(){this.conlisteners.clear();for(var cx_ite=this.cbTypes.head;null!=cx_ite;){for(var cb=cx_ite.elt,npre=null,nite=this.conlisteners.head,cite=cb.conlisteners.head;null!=cite;){var cx=cite.elt;if(null!=nite&&nite.elt==cx)cite=cite.next,npre=nite,nite=nite.next;else{var tmp;if(null!=nite){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else tmp=!0;if(tmp){var _this=cx.options;if(!_this.nonemptyintersection(this.cbTypes,_this.excludes)&&cx.space==this.manager.space){var _this1=this.conlisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=cx;var temp=ret;null==npre?(temp.next=_this1.head,_this1.head=temp):(temp.next=npre.next,npre.next=temp),_this1.pushmod=_this1.modified=!0,_this1.length++,npre=temp}cite=cite.next}else npre=nite,nite=nite.next}}cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbSet.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners()),this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners()),this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},zpp_nape.callbacks.ZPP_CbSet.prototype.interactors=null,zpp_nape.callbacks.ZPP_CbSet.prototype.wrap_interactors=null,zpp_nape.callbacks.ZPP_CbSet.prototype.constraints=null,zpp_nape.callbacks.ZPP_CbSet.prototype.wrap_constraints=null,zpp_nape.callbacks.ZPP_CbSet.prototype.addConstraint=function(con){this.constraints.add(con)},zpp_nape.callbacks.ZPP_CbSet.prototype.addInteractor=function(intx){this.interactors.add(intx)},zpp_nape.callbacks.ZPP_CbSet.prototype.remConstraint=function(con){this.constraints.remove(con)},zpp_nape.callbacks.ZPP_CbSet.prototype.remInteractor=function(intx){this.interactors.remove(intx)},zpp_nape.callbacks.ZPP_CbSet.prototype.free=function(){for(this.listeners.clear(),this.zip_listeners=!0,this.bodylisteners.clear(),this.zip_bodylisteners=!0,this.conlisteners.clear(),this.zip_conlisteners=!0;null!=this.cbTypes.head;){var cb;this.cbTypes.pop_unsafe().cbsets.remove(this)}},zpp_nape.callbacks.ZPP_CbSet.prototype.alloc=function(){},zpp_nape.callbacks.ZPP_CbSet.prototype.__class__=zpp_nape.callbacks.ZPP_CbSet,zpp_nape.callbacks.ZPP_CbSetPair=$hxClasses["zpp_nape.callbacks.ZPP_CbSetPair"]=function(){this.listeners=null,this.zip_listeners=!1,this.next=null,this.b=null,this.a=null,this.listeners=new zpp_nape.util.ZNPList_ZPP_InteractionListener},zpp_nape.callbacks.ZPP_CbSetPair.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"],zpp_nape.callbacks.ZPP_CbSetPair.get=function(a,b){var ret;return null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret=new zpp_nape.callbacks.ZPP_CbSetPair:(ret=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret.next,ret.next=null),ret.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)?(ret.a=a,ret.b=b):(ret.a=b,ret.b=a),ret},zpp_nape.callbacks.ZPP_CbSetPair.setlt=function(x,y){return!!zpp_nape.callbacks.ZPP_CbSet.setlt(x.a,y.a)||x.a==y.a&&zpp_nape.callbacks.ZPP_CbSet.setlt(x.b,y.b)},zpp_nape.callbacks.ZPP_CbSetPair.prototype.a=null,zpp_nape.callbacks.ZPP_CbSetPair.prototype.b=null,zpp_nape.callbacks.ZPP_CbSetPair.prototype.next=null,zpp_nape.callbacks.ZPP_CbSetPair.prototype.free=function(){this.a=this.b=null,this.listeners.clear()},zpp_nape.callbacks.ZPP_CbSetPair.prototype.alloc=function(){this.zip_listeners=!0},zpp_nape.callbacks.ZPP_CbSetPair.prototype.compatible=function(i){var tmp,_this=i.options1,xs=this.a.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=i.options2,xs1=this.b.cbTypes;tmp=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else tmp=!1;if(tmp)return!0;var _this2=i.options2,xs2=this.a.cbTypes;if(_this2.nonemptyintersection(xs2,_this2.includes)&&!_this2.nonemptyintersection(xs2,_this2.excludes)){var _this3=i.options1,xs3=this.b.cbTypes;return!!_this3.nonemptyintersection(xs3,_this3.includes)&&!_this3.nonemptyintersection(xs3,_this3.excludes)}return!1},zpp_nape.callbacks.ZPP_CbSetPair.prototype.zip_listeners=null,zpp_nape.callbacks.ZPP_CbSetPair.prototype.listeners=null,zpp_nape.callbacks.ZPP_CbSetPair.prototype.invalidate=function(){this.zip_listeners=!0},zpp_nape.callbacks.ZPP_CbSetPair.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},zpp_nape.callbacks.ZPP_CbSetPair.prototype.__validate=function(){this.listeners.clear();for(var aite=this.a.listeners.head,bite=this.b.listeners.head;null!=aite&&null!=bite;){var ax=aite.elt,bx=bite.elt;if(ax==bx){var tmp,tmp1,_this=ax.options1,xs=this.a.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=ax.options2,xs1=this.b.cbTypes;tmp1=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else tmp1=!1;if(tmp1)tmp=!0;else{var _this2=ax.options2,xs2=this.a.cbTypes;if(_this2.nonemptyintersection(xs2,_this2.includes)&&!_this2.nonemptyintersection(xs2,_this2.excludes)){var _this3=ax.options1,xs3=this.b.cbTypes;tmp=_this3.nonemptyintersection(xs3,_this3.includes)&&!_this3.nonemptyintersection(xs3,_this3.excludes)}else tmp=!1}tmp&&this.listeners.add(ax),aite=aite.next,bite=bite.next}else ax.precedence>bx.precedence||ax.precedence==bx.precedence&&ax.id>bx.id?aite=aite.next:bite=bite.next}},zpp_nape.callbacks.ZPP_CbSetPair.prototype.empty_intersection=function(){return null==this.listeners.head},zpp_nape.callbacks.ZPP_CbSetPair.prototype.single_intersection=function(i){var ite=this.listeners.head;return null!=ite&&ite.elt==i&&null==ite.next},zpp_nape.callbacks.ZPP_CbSetPair.prototype.forall=function(event,cb){for(var cx_ite=this.listeners.head;null!=cx_ite;){var x=cx_ite.elt;x.event==event&&cb(x),cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbSetPair.prototype.__class__=zpp_nape.callbacks.ZPP_CbSetPair,zpp_nape.util||(zpp_nape.util={}),zpp_nape.util.ZNPList_ZPP_InteractionListener=$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_InteractionListener.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"],zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.head=null,zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.length=null,zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_InteractionListener.prototype.__class__=zpp_nape.util.ZNPList_ZPP_InteractionListener,zpp_nape.util.ZNPList_ZPP_BodyListener=$hxClasses["zpp_nape.util.ZNPList_ZPP_BodyListener"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_BodyListener.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"],zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.head=null,zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.length=null,zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_BodyListener.prototype.__class__=zpp_nape.util.ZNPList_ZPP_BodyListener,zpp_nape.util.ZNPList_ZPP_ConstraintListener=$hxClasses["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_ConstraintListener.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"],zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.head=null,zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.length=null,zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_ConstraintListener.prototype.__class__=zpp_nape.util.ZNPList_ZPP_ConstraintListener,zpp_nape.util.ZNPList_ZPP_Constraint=$hxClasses["zpp_nape.util.ZNPList_ZPP_Constraint"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Constraint.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"],zpp_nape.util.ZNPList_ZPP_Constraint.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Constraint.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Constraint.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Constraint.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Constraint.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Constraint.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Constraint,zpp_nape.util.ZNPList_ZPP_Interactor=$hxClasses["zpp_nape.util.ZNPList_ZPP_Interactor"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Interactor.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"],zpp_nape.util.ZNPList_ZPP_Interactor.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Interactor.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Interactor.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Interactor.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Interactor.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Interactor.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Interactor,zpp_nape.util.ZNPList_ZPP_CbSet=$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSet"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CbSet.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"],zpp_nape.util.ZNPList_ZPP_CbSet.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CbSet.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CbSet.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CbSet.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CbSet.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CbSet.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CbSet,zpp_nape.callbacks.ZPP_CbType=$hxClasses["zpp_nape.callbacks.ZPP_CbType"]=function(){this.conlisteners=null,this.bodylisteners=null,this.listeners=null,this.cbsets=null,this.id=0,this.userData=null,this.outer=null,this.id=zpp_nape.ZPP_ID.CbType(),this.listeners=new zpp_nape.util.ZNPList_ZPP_InteractionListener,this.bodylisteners=new zpp_nape.util.ZNPList_ZPP_BodyListener,this.conlisteners=new zpp_nape.util.ZNPList_ZPP_ConstraintListener,this.constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.interactors=new zpp_nape.util.ZNPList_ZPP_Interactor,this.cbsets=new zpp_nape.util.ZNPList_ZPP_CbSet},zpp_nape.callbacks.ZPP_CbType.__name__=["zpp_nape","callbacks","ZPP_CbType"],zpp_nape.callbacks.ZPP_CbType.setlt=function(a,b){return a.id<b.id},zpp_nape.callbacks.ZPP_CbType.prototype.outer=null,zpp_nape.callbacks.ZPP_CbType.prototype.userData=null,zpp_nape.callbacks.ZPP_CbType.prototype.id=null,zpp_nape.callbacks.ZPP_CbType.prototype.cbsets=null,zpp_nape.callbacks.ZPP_CbType.prototype.interactors=null,zpp_nape.callbacks.ZPP_CbType.prototype.wrap_interactors=null,zpp_nape.callbacks.ZPP_CbType.prototype.constraints=null,zpp_nape.callbacks.ZPP_CbType.prototype.wrap_constraints=null,zpp_nape.callbacks.ZPP_CbType.prototype.addConstraint=function(con){this.constraints.add(con)},zpp_nape.callbacks.ZPP_CbType.prototype.addInteractor=function(intx){this.interactors.add(intx)},zpp_nape.callbacks.ZPP_CbType.prototype.remConstraint=function(con){this.constraints.remove(con)},zpp_nape.callbacks.ZPP_CbType.prototype.remInteractor=function(intx){this.interactors.remove(intx)},zpp_nape.callbacks.ZPP_CbType.prototype.listeners=null,zpp_nape.callbacks.ZPP_CbType.prototype.addint=function(x){for(var pre=null,cx_ite=this.listeners.head;null!=cx_ite;){var j=cx_ite.elt;if(x.precedence>j.precedence||x.precedence==j.precedence&&x.id>j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.listeners,ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=x;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite1=this.cbsets.head;null!=cx_ite1;){var cb=cx_ite1.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite1=cx_ite1.next}},zpp_nape.callbacks.ZPP_CbType.prototype.removeint=function(x){this.listeners.remove(x);for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb=cx_ite.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.invalidateint=function(){for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb=cx_ite.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.bodylisteners=null,zpp_nape.callbacks.ZPP_CbType.prototype.addbody=function(x){for(var pre=null,cx_ite=this.bodylisteners.head;null!=cx_ite;){var j=cx_ite.elt;if(x.precedence>j.precedence||x.precedence==j.precedence&&x.id>j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.bodylisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=x;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite1=this.cbsets.head;null!=cx_ite1;){var cb;cx_ite1.elt.zip_bodylisteners=!0,cx_ite1=cx_ite1.next}},zpp_nape.callbacks.ZPP_CbType.prototype.removebody=function(x){this.bodylisteners.remove(x);for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb;cx_ite.elt.zip_bodylisteners=!0,cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.invalidatebody=function(){for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb;cx_ite.elt.zip_bodylisteners=!0,cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.conlisteners=null,zpp_nape.callbacks.ZPP_CbType.prototype.addconstraint=function(x){for(var pre=null,cx_ite=this.conlisteners.head;null!=cx_ite;){var j=cx_ite.elt;if(x.precedence>j.precedence||x.precedence==j.precedence&&x.id>j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.conlisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=x;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite1=this.cbsets.head;null!=cx_ite1;){var cb;cx_ite1.elt.zip_conlisteners=!0,cx_ite1=cx_ite1.next}},zpp_nape.callbacks.ZPP_CbType.prototype.removeconstraint=function(x){this.conlisteners.remove(x);for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb;cx_ite.elt.zip_conlisteners=!0,cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.invalidateconstraint=function(){for(var cx_ite=this.cbsets.head;null!=cx_ite;){var cb;cx_ite.elt.zip_conlisteners=!0,cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_CbType.prototype.__class__=zpp_nape.callbacks.ZPP_CbType,zpp_nape.util.ZPP_Flags=$hxClasses["zpp_nape.util.ZPP_Flags"]=function(){},zpp_nape.util.ZPP_Flags.__name__=["zpp_nape","util","ZPP_Flags"],zpp_nape.util.ZPP_Flags.GravMassMode_DEFAULT=null,zpp_nape.util.ZPP_Flags.GravMassMode_FIXED=null,zpp_nape.util.ZPP_Flags.GravMassMode_SCALED=null,zpp_nape.util.ZPP_Flags.InertiaMode_DEFAULT=null,zpp_nape.util.ZPP_Flags.InertiaMode_FIXED=null,zpp_nape.util.ZPP_Flags.MassMode_DEFAULT=null,zpp_nape.util.ZPP_Flags.MassMode_FIXED=null,zpp_nape.util.ZPP_Flags.BodyType_STATIC=null,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=null,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=null,zpp_nape.util.ZPP_Flags.ListenerType_BODY=null,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=null,zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT=null,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=null,zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION=null,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=null,zpp_nape.util.ZPP_Flags.ListenerType_PRE=null,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE_ONCE=null,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=null,zpp_nape.util.ZPP_Flags.InteractionType_COLLISION=null,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=null,zpp_nape.util.ZPP_Flags.InteractionType_SENSOR=null,zpp_nape.util.ZPP_Flags.CbEvent_END=null,zpp_nape.util.ZPP_Flags.InteractionType_FLUID=null,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=null,zpp_nape.util.ZPP_Flags.InteractionType_ANY=null,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=null,zpp_nape.util.ZPP_Flags.CbEvent_BREAK=null,zpp_nape.util.ZPP_Flags.CbEvent_PRE=null,zpp_nape.util.ZPP_Flags.Winding_UNDEFINED=null,zpp_nape.util.ZPP_Flags.Winding_CLOCKWISE=null,zpp_nape.util.ZPP_Flags.Winding_ANTICLOCKWISE=null,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=null,zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE=null,zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE=null,zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING=null,zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE=null,zpp_nape.util.ZPP_Flags.ShapeType_POLYGON=null,zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE=null,zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE=null,zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION=null,zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR=null,zpp_nape.util.ZPP_Flags.ArbiterType_FLUID=null,zpp_nape.util.ZPP_Flags.prototype.__class__=zpp_nape.util.ZPP_Flags,zpp_nape.callbacks.ZPP_Listener=$hxClasses["zpp_nape.callbacks.ZPP_Listener"]=function(){this.space=null,this.interaction=null,this.constraint=null,this.body=null,this.precedence=0,this.event=0,this.type=0,this.id=0,this.outer=null,this.id=zpp_nape.ZPP_ID.Listener()},zpp_nape.callbacks.ZPP_Listener.__name__=["zpp_nape","callbacks","ZPP_Listener"],zpp_nape.callbacks.ZPP_Listener.setlt=function(a,b){return!(a.precedence<=b.precedence)||a.precedence==b.precedence&&a.id>b.id},zpp_nape.callbacks.ZPP_Listener.prototype.outer=null,zpp_nape.callbacks.ZPP_Listener.prototype.id=null,zpp_nape.callbacks.ZPP_Listener.prototype.type=null,zpp_nape.callbacks.ZPP_Listener.prototype.event=null,zpp_nape.callbacks.ZPP_Listener.prototype.precedence=null,zpp_nape.callbacks.ZPP_Listener.prototype.body=null,zpp_nape.callbacks.ZPP_Listener.prototype.constraint=null,zpp_nape.callbacks.ZPP_Listener.prototype.interaction=null,zpp_nape.callbacks.ZPP_Listener.prototype.space=null,zpp_nape.callbacks.ZPP_Listener.prototype.swapEvent=function(event){},zpp_nape.callbacks.ZPP_Listener.prototype.invalidate_precedence=function(){},zpp_nape.callbacks.ZPP_Listener.prototype.addedToSpace=function(){},zpp_nape.callbacks.ZPP_Listener.prototype.removedFromSpace=function(){},zpp_nape.callbacks.ZPP_Listener.prototype.__class__=zpp_nape.callbacks.ZPP_Listener,zpp_nape.callbacks.ZPP_BodyListener=$hxClasses["zpp_nape.callbacks.ZPP_BodyListener"]=function(options,event,handler){this.handler=null,this.options=null,this.outer_zn=null,zpp_nape.callbacks.ZPP_Listener.call(this),this.event=event,this.handler=handler,this.body=this,this.type=0,this.options=options.zpp_inner},zpp_nape.callbacks.ZPP_BodyListener.__name__=["zpp_nape","callbacks","ZPP_BodyListener"],zpp_nape.callbacks.ZPP_BodyListener.__super__=zpp_nape.callbacks.ZPP_Listener,zpp_nape.callbacks.ZPP_Listener.prototype)zpp_nape.callbacks.ZPP_BodyListener.prototype[k]=zpp_nape.callbacks.ZPP_Listener.prototype[k];for(var k in zpp_nape.callbacks.ZPP_BodyListener.prototype.outer_zn=null,zpp_nape.callbacks.ZPP_BodyListener.prototype.options=null,zpp_nape.callbacks.ZPP_BodyListener.prototype.handler=null,zpp_nape.callbacks.ZPP_BodyListener.prototype.immutable_options=function(){if(null!=this.space&&this.space.midstep)throw new js._Boot.HaxeError("Error: Cannot change listener type options during space.step()")},zpp_nape.callbacks.ZPP_BodyListener.prototype.addedToSpace=function(){this.options.handler=$bind(this,this.cbtype_change);for(var cx_ite=this.options.includes.head;null!=cx_ite;){for(var cb=cx_ite.elt,pre=null,cx_ite1=cb.bodylisteners.head;null!=cx_ite1;){var j=cx_ite1.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id)break;pre=cx_ite1,cx_ite1=cx_ite1.next}var _this=cb.bodylisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_BodyListener:(ret=zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite2=cb.cbsets.head;null!=cx_ite2;){var cb1;cx_ite2.elt.zip_bodylisteners=!0,cx_ite2=cx_ite2.next}cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_BodyListener.prototype.removedFromSpace=function(){for(var cx_ite=this.options.includes.head;null!=cx_ite;){var cb=cx_ite.elt;cb.bodylisteners.remove(this);for(var cx_ite1=cb.cbsets.head;null!=cx_ite1;){var cb1;cx_ite1.elt.zip_bodylisteners=!0,cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}this.options.handler=null},zpp_nape.callbacks.ZPP_BodyListener.prototype.cbtype_change=function(cb,included,added){this.removedFromSpace();var _this=this.options;if(included)if(added){for(var pre=null,cx_ite=_this.includes.head;null!=cx_ite;){var j=cx_ite.elt;if(cb.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this1=_this.includes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;null==pre?(temp.next=_this1.head,_this1.head=temp):(temp.next=pre.next,pre.next=temp),_this1.pushmod=_this1.modified=!0,_this1.length++}else _this.includes.remove(cb);else if(added){for(var pre1=null,cx_ite1=_this.excludes.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(cb.id<j1.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this2=_this.excludes,ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=cb;var temp1=ret1;null==pre1?(temp1.next=_this2.head,_this2.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this2.pushmod=_this2.modified=!0,_this2.length++}else _this.excludes.remove(cb);this.addedToSpace()},zpp_nape.callbacks.ZPP_BodyListener.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},zpp_nape.callbacks.ZPP_BodyListener.prototype.swapEvent=function(newev){if(2!=newev&&3!=newev)throw new js._Boot.HaxeError("Error: BodyListener event must be either WAKE or SLEEP only");this.removedFromSpace(),this.event=newev,this.addedToSpace()},zpp_nape.callbacks.ZPP_BodyListener.prototype.__class__=zpp_nape.callbacks.ZPP_BodyListener,zpp_nape.callbacks.ZPP_ConstraintListener=$hxClasses["zpp_nape.callbacks.ZPP_ConstraintListener"]=function(options,event,handler){this.handler=null,this.options=null,this.outer_zn=null,zpp_nape.callbacks.ZPP_Listener.call(this),this.event=event,this.handler=handler,this.constraint=this,this.type=1,this.options=options.zpp_inner},zpp_nape.callbacks.ZPP_ConstraintListener.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"],zpp_nape.callbacks.ZPP_ConstraintListener.__super__=zpp_nape.callbacks.ZPP_Listener,zpp_nape.callbacks.ZPP_Listener.prototype)zpp_nape.callbacks.ZPP_ConstraintListener.prototype[k]=zpp_nape.callbacks.ZPP_Listener.prototype[k];for(var k in zpp_nape.callbacks.ZPP_ConstraintListener.prototype.outer_zn=null,zpp_nape.callbacks.ZPP_ConstraintListener.prototype.options=null,zpp_nape.callbacks.ZPP_ConstraintListener.prototype.handler=null,zpp_nape.callbacks.ZPP_ConstraintListener.prototype.immutable_options=function(){if(null!=this.space&&this.space.midstep)throw new js._Boot.HaxeError("Error: Cannot change listener type options during space.step()")},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.addedToSpace=function(){this.options.handler=$bind(this,this.cbtype_change);for(var cx_ite=this.options.includes.head;null!=cx_ite;){for(var cb=cx_ite.elt,pre=null,cx_ite1=cb.conlisteners.head;null!=cx_ite1;){var j=cx_ite1.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id)break;pre=cx_ite1,cx_ite1=cx_ite1.next}var _this=cb.conlisteners,ret;null==zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ConstraintListener:(ret=zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite2=cb.cbsets.head;null!=cx_ite2;){var cb1;cx_ite2.elt.zip_conlisteners=!0,cx_ite2=cx_ite2.next}cx_ite=cx_ite.next}},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.removedFromSpace=function(){for(var cx_ite=this.options.includes.head;null!=cx_ite;){var cb=cx_ite.elt;cb.conlisteners.remove(this);for(var cx_ite1=cb.cbsets.head;null!=cx_ite1;){var cb1;cx_ite1.elt.zip_conlisteners=!0,cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}this.options.handler=null},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.cbtype_change=function(cb,included,added){this.removedFromSpace();var _this=this.options;if(included)if(added){for(var pre=null,cx_ite=_this.includes.head;null!=cx_ite;){var j=cx_ite.elt;if(cb.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this1=_this.includes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;null==pre?(temp.next=_this1.head,_this1.head=temp):(temp.next=pre.next,pre.next=temp),_this1.pushmod=_this1.modified=!0,_this1.length++}else _this.includes.remove(cb);else if(added){for(var pre1=null,cx_ite1=_this.excludes.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(cb.id<j1.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this2=_this.excludes,ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=cb;var temp1=ret1;null==pre1?(temp1.next=_this2.head,_this2.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this2.pushmod=_this2.modified=!0,_this2.length++}else _this.excludes.remove(cb);this.addedToSpace()},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.swapEvent=function(newev){if(2!=newev&&3!=newev&&4!=newev)throw new js._Boot.HaxeError("Error: ConstraintListener event must be either WAKE or SLEEP only");this.removedFromSpace(),this.event=newev,this.addedToSpace()},zpp_nape.callbacks.ZPP_ConstraintListener.prototype.__class__=zpp_nape.callbacks.ZPP_ConstraintListener,zpp_nape.util.ZNPList_ZPP_CbType=$hxClasses["zpp_nape.util.ZNPList_ZPP_CbType"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CbType.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"],zpp_nape.util.ZNPList_ZPP_CbType.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CbType.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CbType.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CbType.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CbType.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CbType.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbType.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbType.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CbType.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbType.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbType.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbType.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CbType.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbType.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbType.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CbType.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CbType.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CbType.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CbType.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CbType.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CbType.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CbType,zpp_nape.callbacks.ZPP_InteractionListener=$hxClasses["zpp_nape.callbacks.ZPP_InteractionListener"]=function(options1,options2,event,type){this.handlerp=null,this.pure=!1,this.allowSleepingCallbacks=!1,this.handleri=null,this.options2=null,this.options1=null,this.itype=0,this.outer_znp=null,this.outer_zni=null,zpp_nape.callbacks.ZPP_Listener.call(this),this.type=type,this.interaction=this,this.event=event,this.options1=options1.zpp_inner,this.options2=options2.zpp_inner,this.allowSleepingCallbacks=!1},zpp_nape.callbacks.ZPP_InteractionListener.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"],zpp_nape.callbacks.ZPP_InteractionListener.__super__=zpp_nape.callbacks.ZPP_Listener,zpp_nape.callbacks.ZPP_Listener.prototype)zpp_nape.callbacks.ZPP_InteractionListener.prototype[k]=zpp_nape.callbacks.ZPP_Listener.prototype[k];for(var k in zpp_nape.callbacks.ZPP_InteractionListener.prototype.outer_zni=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.outer_znp=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.itype=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.options1=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.options2=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.handleri=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.allowSleepingCallbacks=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.pure=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.handlerp=null,zpp_nape.callbacks.ZPP_InteractionListener.prototype.setInteractionType=function(itype){this.itype=itype},zpp_nape.callbacks.ZPP_InteractionListener.prototype.wake=function(){for(var ite1=this.options1.includes.head,ite2=this.options2.includes.head;null!=ite1&&null!=ite2;){var cb1=ite1.elt,cb2=ite2.elt;if(cb1==cb2){for(var cx_ite=cb1.interactors.head;null!=cx_ite;){var i;cx_ite.elt.wake(),cx_ite=cx_ite.next}ite1=ite1.next,ite2=ite2.next}else if(cb1.id<cb2.id){for(var cx_ite1=cb1.interactors.head;null!=cx_ite1;){var i1;cx_ite1.elt.wake(),cx_ite1=cx_ite1.next}ite1=ite1.next}else{for(var cx_ite2=cb2.interactors.head;null!=cx_ite2;){var i2;cx_ite2.elt.wake(),cx_ite2=cx_ite2.next}ite2=ite2.next}}for(;null!=ite1;){for(var cx_ite3=ite1.elt.interactors.head;null!=cx_ite3;){var i3;cx_ite3.elt.wake(),cx_ite3=cx_ite3.next}ite1=ite1.next}for(;null!=ite2;){for(var cx_ite4=ite2.elt.interactors.head;null!=cx_ite4;){var i4;cx_ite4.elt.wake(),cx_ite4=cx_ite4.next}ite2=ite2.next}},zpp_nape.callbacks.ZPP_InteractionListener.prototype.CbSetset=function(A,B,lambda){for(var U=zpp_nape.callbacks.ZPP_InteractionListener.UCbSet,V=zpp_nape.callbacks.ZPP_InteractionListener.VCbSet,W=zpp_nape.callbacks.ZPP_InteractionListener.WCbSet,aite=A.head,bite=B.head;null!=aite&&null!=bite;){var a=aite.elt,b=bite.elt;if(a==b){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret.next,ret.next=null),ret.elt=a;var temp=ret;temp.next=W.head,W.head=temp,W.modified=!0,W.length++,aite=aite.next,bite=bite.next}else if(zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)){var ret1;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret1=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret1.next,ret1.next=null),ret1.elt=a;var temp1=ret1;temp1.next=U.head,U.head=temp1,U.modified=!0,U.length++,aite=aite.next}else{var ret2;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret2=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret2.next,ret2.next=null),ret2.elt=b;var temp2=ret2;temp2.next=V.head,V.head=temp2,V.modified=!0,V.length++,bite=bite.next}}for(;null!=aite;){var o=aite.elt,ret3;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret3=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o;var temp3=ret3;temp3.next=U.head,U.head=temp3,U.modified=!0,U.length++,aite=aite.next}for(;null!=bite;){var o1=bite.elt,ret4;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret4=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret4.next,ret4.next=null),ret4.elt=o1;var temp4=ret4;temp4.next=V.head,V.head=temp4,V.modified=!0,V.length++,bite=bite.next}for(;null!=U.head;)for(var x=U.pop_unsafe(),cx_ite=B.head;null!=cx_ite;){var y;lambda(x,cx_ite.elt),cx_ite=cx_ite.next}for(;null!=V.head;)for(var x1=V.pop_unsafe(),cx_ite1=W.head;null!=cx_ite1;){var y1;lambda(x1,cx_ite1.elt),cx_ite1=cx_ite1.next}for(;null!=W.head;){var x2=W.pop_unsafe();lambda(x2,x2);for(var cx_ite2=W.head;null!=cx_ite2;){var y2;lambda(x2,cx_ite2.elt),cx_ite2=cx_ite2.next}}},zpp_nape.callbacks.ZPP_InteractionListener.prototype.CbTypeset=function(A,B,lambda){for(var U=zpp_nape.callbacks.ZPP_InteractionListener.UCbType,V=zpp_nape.callbacks.ZPP_InteractionListener.VCbType,W=zpp_nape.callbacks.ZPP_InteractionListener.WCbType,aite=A.head,bite=B.head;null!=aite&&null!=bite;){var a=aite.elt,b=bite.elt;if(a==b){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=a;var temp=ret;temp.next=W.head,W.head=temp,W.modified=!0,W.length++,aite=aite.next,bite=bite.next}else if(a.id<b.id){var ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=a;var temp1=ret1;temp1.next=U.head,U.head=temp1,U.modified=!0,U.length++,aite=aite.next}else{var ret2;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret2=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret2.next,ret2.next=null),ret2.elt=b;var temp2=ret2;temp2.next=V.head,V.head=temp2,V.modified=!0,V.length++,bite=bite.next}}for(;null!=aite;){var o=aite.elt,ret3;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret3=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o;var temp3=ret3;temp3.next=U.head,U.head=temp3,U.modified=!0,U.length++,aite=aite.next}for(;null!=bite;){var o1=bite.elt,ret4;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret4=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret4.next,ret4.next=null),ret4.elt=o1;var temp4=ret4;temp4.next=V.head,V.head=temp4,V.modified=!0,V.length++,bite=bite.next}for(;null!=U.head;)for(var x=U.pop_unsafe(),cx_ite=B.head;null!=cx_ite;){var y;lambda(x,cx_ite.elt),cx_ite=cx_ite.next}for(;null!=V.head;)for(var x1=V.pop_unsafe(),cx_ite1=W.head;null!=cx_ite1;){var y1;lambda(x1,cx_ite1.elt),cx_ite1=cx_ite1.next}for(;null!=W.head;){var x2=W.pop_unsafe();lambda(x2,x2);for(var cx_ite2=W.head;null!=cx_ite2;){var y2;lambda(x2,cx_ite2.elt),cx_ite2=cx_ite2.next}}},zpp_nape.callbacks.ZPP_InteractionListener.prototype.with_uniquesets=function(fresh){var _gthis=this,set;null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?set=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(set=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=set.next,set.next=null),set.lt=zpp_nape.callbacks.ZPP_CbSetPair.setlt;for(var B=this.options2.includes,U=zpp_nape.callbacks.ZPP_InteractionListener.UCbType,V=zpp_nape.callbacks.ZPP_InteractionListener.VCbType,W=zpp_nape.callbacks.ZPP_InteractionListener.WCbType,aite=this.options1.includes.head,bite=B.head;null!=aite&&null!=bite;){var a=aite.elt,b=bite.elt;if(a==b){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=a;var temp=ret;temp.next=W.head,W.head=temp,W.modified=!0,W.length++,aite=aite.next,bite=bite.next}else if(a.id<b.id){var ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=a;var temp1=ret1;temp1.next=U.head,U.head=temp1,U.modified=!0,U.length++,aite=aite.next}else{var ret2;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret2=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret2.next,ret2.next=null),ret2.elt=b;var temp2=ret2;temp2.next=V.head,V.head=temp2,V.modified=!0,V.length++,bite=bite.next}}for(;null!=aite;){var o=aite.elt,ret3;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret3=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o;var temp3=ret3;temp3.next=U.head,U.head=temp3,U.modified=!0,U.length++,aite=aite.next}for(;null!=bite;){var o1=bite.elt,ret4;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret4=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret4.next,ret4.next=null),ret4.elt=o1;var temp4=ret4;temp4.next=V.head,V.head=temp4,V.modified=!0,V.length++,bite=bite.next}for(;null!=U.head;)for(var x=U.pop_unsafe(),cx_ite=B.head;null!=cx_ite;){for(var y,B1=cx_ite.elt.cbsets,U1=zpp_nape.callbacks.ZPP_InteractionListener.UCbSet,V1=zpp_nape.callbacks.ZPP_InteractionListener.VCbSet,W1=zpp_nape.callbacks.ZPP_InteractionListener.WCbSet,aite1=x.cbsets.head,bite1=B1.head;null!=aite1&&null!=bite1;){var a1=aite1.elt,b1=bite1.elt;if(a1==b1){var ret5;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret5=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret5.next,ret5.next=null),ret5.elt=a1;var temp5=ret5;temp5.next=W1.head,W1.head=temp5,W1.modified=!0,W1.length++,aite1=aite1.next,bite1=bite1.next}else if(zpp_nape.callbacks.ZPP_CbSet.setlt(a1,b1)){var ret6;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret6=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret6.next,ret6.next=null),ret6.elt=a1;var temp6=ret6;temp6.next=U1.head,U1.head=temp6,U1.modified=!0,U1.length++,aite1=aite1.next}else{var ret7;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret7=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret7.next,ret7.next=null),ret7.elt=b1;var temp7=ret7;temp7.next=V1.head,V1.head=temp7,V1.modified=!0,V1.length++,bite1=bite1.next}}for(;null!=aite1;){var o2=aite1.elt,ret8;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret8=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret8=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret8.next,ret8.next=null),ret8.elt=o2;var temp8=ret8;temp8.next=U1.head,U1.head=temp8,U1.modified=!0,U1.length++,aite1=aite1.next}for(;null!=bite1;){var o3=bite1.elt,ret9;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret9=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret9=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret9.next,ret9.next=null),ret9.elt=o3;var temp9=ret9;temp9.next=V1.head,V1.head=temp9,V1.modified=!0,V1.length++,bite1=bite1.next}for(;null!=U1.head;)for(var x1=U1.pop_unsafe(),cx_ite1=B1.head;null!=cx_ite1;){var y1=cx_ite1.elt,ret10;if(x1.validate(),y1.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x1,y1,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret10=new zpp_nape.callbacks.ZPP_CbSetPair:(ret10=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret10.next,ret10.next=null),ret10.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x1,y1)?(ret10.a=x1,ret10.b=y1):(ret10.a=y1,ret10.b=x1),set.try_insert(ret10);cx_ite1=cx_ite1.next}for(;null!=V1.head;)for(var x2=V1.pop_unsafe(),cx_ite2=W1.head;null!=cx_ite2;){var y2=cx_ite2.elt,ret11;if(x2.validate(),y2.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x2,y2,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret11=new zpp_nape.callbacks.ZPP_CbSetPair:(ret11=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret11.next,ret11.next=null),ret11.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x2,y2)?(ret11.a=x2,ret11.b=y2):(ret11.a=y2,ret11.b=x2),set.try_insert(ret11);cx_ite2=cx_ite2.next}for(;null!=W1.head;){var x3=W1.pop_unsafe(),ret12;if(x3.validate(),x3.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x3,x3,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret12=new zpp_nape.callbacks.ZPP_CbSetPair:(ret12=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret12.next,ret12.next=null),ret12.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x3,x3),ret12.a=x3,ret12.b=x3,set.try_insert(ret12);for(var cx_ite3=W1.head;null!=cx_ite3;){var y3=cx_ite3.elt,ret13;if(x3.validate(),y3.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x3,y3,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret13=new zpp_nape.callbacks.ZPP_CbSetPair:(ret13=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret13.next,ret13.next=null),ret13.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x3,y3)?(ret13.a=x3,ret13.b=y3):(ret13.a=y3,ret13.b=x3),set.try_insert(ret13);cx_ite3=cx_ite3.next}}cx_ite=cx_ite.next}for(;null!=V.head;)for(var x4=V.pop_unsafe(),cx_ite4=W.head;null!=cx_ite4;){for(var y4,B2=cx_ite4.elt.cbsets,U2=zpp_nape.callbacks.ZPP_InteractionListener.UCbSet,V2=zpp_nape.callbacks.ZPP_InteractionListener.VCbSet,W2=zpp_nape.callbacks.ZPP_InteractionListener.WCbSet,aite2=x4.cbsets.head,bite2=B2.head;null!=aite2&&null!=bite2;){var a2=aite2.elt,b2=bite2.elt;if(a2==b2){var ret14;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret14=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret14=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret14.next,ret14.next=null),ret14.elt=a2;var temp10=ret14;temp10.next=W2.head,W2.head=temp10,W2.modified=!0,W2.length++,aite2=aite2.next,bite2=bite2.next}else if(zpp_nape.callbacks.ZPP_CbSet.setlt(a2,b2)){var ret15;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret15=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret15=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret15.next,ret15.next=null),ret15.elt=a2;var temp11=ret15;temp11.next=U2.head,U2.head=temp11,U2.modified=!0,U2.length++,aite2=aite2.next}else{var ret16;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret16=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret16=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret16.next,ret16.next=null),ret16.elt=b2;var temp12=ret16;temp12.next=V2.head,V2.head=temp12,V2.modified=!0,V2.length++,bite2=bite2.next}}for(;null!=aite2;){var o4=aite2.elt,ret17;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret17=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret17=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret17.next,ret17.next=null),ret17.elt=o4;var temp13=ret17;temp13.next=U2.head,U2.head=temp13,U2.modified=!0,U2.length++,aite2=aite2.next}for(;null!=bite2;){var o5=bite2.elt,ret18;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret18=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret18=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret18.next,ret18.next=null),ret18.elt=o5;var temp14=ret18;temp14.next=V2.head,V2.head=temp14,V2.modified=!0,V2.length++,bite2=bite2.next}for(;null!=U2.head;)for(var x5=U2.pop_unsafe(),cx_ite5=B2.head;null!=cx_ite5;){var y5=cx_ite5.elt,ret19;if(x5.validate(),y5.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x5,y5,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret19=new zpp_nape.callbacks.ZPP_CbSetPair:(ret19=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret19.next,ret19.next=null),ret19.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x5,y5)?(ret19.a=x5,ret19.b=y5):(ret19.a=y5,ret19.b=x5),set.try_insert(ret19);cx_ite5=cx_ite5.next}for(;null!=V2.head;)for(var x6=V2.pop_unsafe(),cx_ite6=W2.head;null!=cx_ite6;){var y6=cx_ite6.elt,ret20;if(x6.validate(),y6.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x6,y6,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret20=new zpp_nape.callbacks.ZPP_CbSetPair:(ret20=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret20.next,ret20.next=null),ret20.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x6,y6)?(ret20.a=x6,ret20.b=y6):(ret20.a=y6,ret20.b=x6),set.try_insert(ret20);cx_ite6=cx_ite6.next}for(;null!=W2.head;){var x7=W2.pop_unsafe(),ret21;if(x7.validate(),x7.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x7,x7,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret21=new zpp_nape.callbacks.ZPP_CbSetPair:(ret21=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret21.next,ret21.next=null),ret21.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x7,x7),ret21.a=x7,ret21.b=x7,set.try_insert(ret21);for(var cx_ite7=W2.head;null!=cx_ite7;){var y7=cx_ite7.elt,ret22;if(x7.validate(),y7.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x7,y7,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret22=new zpp_nape.callbacks.ZPP_CbSetPair:(ret22=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret22.next,ret22.next=null),ret22.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x7,y7)?(ret22.a=x7,ret22.b=y7):(ret22.a=y7,ret22.b=x7),set.try_insert(ret22);cx_ite7=cx_ite7.next}}cx_ite4=cx_ite4.next}for(;null!=W.head;){for(var x8=W.pop_unsafe(),B3=x8.cbsets,U3=zpp_nape.callbacks.ZPP_InteractionListener.UCbSet,V3=zpp_nape.callbacks.ZPP_InteractionListener.VCbSet,W3=zpp_nape.callbacks.ZPP_InteractionListener.WCbSet,aite3=x8.cbsets.head,bite3=B3.head;null!=aite3&&null!=bite3;){var a3=aite3.elt,b3=bite3.elt;if(a3==b3){var ret23;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret23=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret23=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret23.next,ret23.next=null),ret23.elt=a3;var temp15=ret23;temp15.next=W3.head,W3.head=temp15,W3.modified=!0,W3.length++,aite3=aite3.next,bite3=bite3.next}else if(zpp_nape.callbacks.ZPP_CbSet.setlt(a3,b3)){var ret24;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret24=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret24=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret24.next,ret24.next=null),ret24.elt=a3;var temp16=ret24;temp16.next=U3.head,U3.head=temp16,U3.modified=!0,U3.length++,aite3=aite3.next}else{var ret25;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret25=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret25=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret25.next,ret25.next=null),ret25.elt=b3;var temp17=ret25;temp17.next=V3.head,V3.head=temp17,V3.modified=!0,V3.length++,bite3=bite3.next}}for(;null!=aite3;){var o6=aite3.elt,ret26;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret26=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret26=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret26.next,ret26.next=null),ret26.elt=o6;var temp18=ret26;temp18.next=U3.head,U3.head=temp18,U3.modified=!0,U3.length++,aite3=aite3.next}for(;null!=bite3;){var o7=bite3.elt,ret27;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret27=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret27=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret27.next,ret27.next=null),ret27.elt=o7;var temp19=ret27;temp19.next=V3.head,V3.head=temp19,V3.modified=!0,V3.length++,bite3=bite3.next}for(;null!=U3.head;)for(var x9=U3.pop_unsafe(),cx_ite8=B3.head;null!=cx_ite8;){var y8=cx_ite8.elt,ret28;if(x9.validate(),y8.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x9,y8,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret28=new zpp_nape.callbacks.ZPP_CbSetPair:(ret28=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret28.next,ret28.next=null),ret28.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x9,y8)?(ret28.a=x9,ret28.b=y8):(ret28.a=y8,ret28.b=x9),set.try_insert(ret28);cx_ite8=cx_ite8.next}for(;null!=V3.head;)for(var x10=V3.pop_unsafe(),cx_ite9=W3.head;null!=cx_ite9;){var y9=cx_ite9.elt,ret29;if(x10.validate(),y9.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x10,y9,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret29=new zpp_nape.callbacks.ZPP_CbSetPair:(ret29=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret29.next,ret29.next=null),ret29.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x10,y9)?(ret29.a=x10,ret29.b=y9):(ret29.a=y9,ret29.b=x10),set.try_insert(ret29);cx_ite9=cx_ite9.next}for(;null!=W3.head;){var x11=W3.pop_unsafe(),ret30;if(x11.validate(),x11.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x11,x11,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret30=new zpp_nape.callbacks.ZPP_CbSetPair:(ret30=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret30.next,ret30.next=null),ret30.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x11,x11),ret30.a=x11,ret30.b=x11,set.try_insert(ret30);for(var cx_ite10=W3.head;null!=cx_ite10;){var y10=cx_ite10.elt,ret31;if(x11.validate(),y10.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x11,y10,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret31=new zpp_nape.callbacks.ZPP_CbSetPair:(ret31=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret31.next,ret31.next=null),ret31.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x11,y10)?(ret31.a=x11,ret31.b=y10):(ret31.a=y10,ret31.b=x11),set.try_insert(ret31);cx_ite10=cx_ite10.next}}for(var cx_ite11=W.head;null!=cx_ite11;){for(var y11,B4=cx_ite11.elt.cbsets,U4=zpp_nape.callbacks.ZPP_InteractionListener.UCbSet,V4=zpp_nape.callbacks.ZPP_InteractionListener.VCbSet,W4=zpp_nape.callbacks.ZPP_InteractionListener.WCbSet,aite4=x8.cbsets.head,bite4=B4.head;null!=aite4&&null!=bite4;){var a4=aite4.elt,b4=bite4.elt;if(a4==b4){var ret32;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret32=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret32=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret32.next,ret32.next=null),ret32.elt=a4;var temp20=ret32;temp20.next=W4.head,W4.head=temp20,W4.modified=!0,W4.length++,aite4=aite4.next,bite4=bite4.next}else if(zpp_nape.callbacks.ZPP_CbSet.setlt(a4,b4)){var ret33;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret33=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret33=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret33.next,ret33.next=null),ret33.elt=a4;var temp21=ret33;temp21.next=U4.head,U4.head=temp21,U4.modified=!0,U4.length++,aite4=aite4.next}else{var ret34;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret34=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret34=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret34.next,ret34.next=null),ret34.elt=b4;var temp22=ret34;temp22.next=V4.head,V4.head=temp22,V4.modified=!0,V4.length++,bite4=bite4.next}}for(;null!=aite4;){var o8=aite4.elt,ret35;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret35=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret35=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret35.next,ret35.next=null),ret35.elt=o8;var temp23=ret35;temp23.next=U4.head,U4.head=temp23,U4.modified=!0,U4.length++,aite4=aite4.next}for(;null!=bite4;){var o9=bite4.elt,ret36;null==zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool?ret36=new zpp_nape.util.ZNPNode_ZPP_CbSet:(ret36=zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=ret36.next,ret36.next=null),ret36.elt=o9;var temp24=ret36;temp24.next=V4.head,V4.head=temp24,V4.modified=!0,V4.length++,bite4=bite4.next}for(;null!=U4.head;)for(var x12=U4.pop_unsafe(),cx_ite12=B4.head;null!=cx_ite12;){var y12=cx_ite12.elt,ret37;if(x12.validate(),y12.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x12,y12,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret37=new zpp_nape.callbacks.ZPP_CbSetPair:(ret37=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret37.next,ret37.next=null),ret37.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x12,y12)?(ret37.a=x12,ret37.b=y12):(ret37.a=y12,ret37.b=x12),set.try_insert(ret37);cx_ite12=cx_ite12.next}for(;null!=V4.head;)for(var x13=V4.pop_unsafe(),cx_ite13=W4.head;null!=cx_ite13;){var y13=cx_ite13.elt,ret38;if(x13.validate(),y13.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x13,y13,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret38=new zpp_nape.callbacks.ZPP_CbSetPair:(ret38=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret38.next,ret38.next=null),ret38.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x13,y13)?(ret38.a=x13,ret38.b=y13):(ret38.a=y13,ret38.b=x13),set.try_insert(ret38);cx_ite13=cx_ite13.next}for(;null!=W4.head;){var x14=W4.pop_unsafe(),ret39;if(x14.validate(),x14.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x14,x14,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret39=new zpp_nape.callbacks.ZPP_CbSetPair:(ret39=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret39.next,ret39.next=null),ret39.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x14,x14),ret39.a=x14,ret39.b=x14,set.try_insert(ret39);for(var cx_ite14=W4.head;null!=cx_ite14;){var y14=cx_ite14.elt,ret40;if(x14.validate(),y14.validate(),zpp_nape.callbacks.ZPP_CbSet.single_intersection(x14,y14,this))null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret40=new zpp_nape.callbacks.ZPP_CbSetPair:(ret40=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret40.next,ret40.next=null),ret40.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(x14,y14)?(ret40.a=x14,ret40.b=y14):(ret40.a=y14,ret40.b=x14),set.try_insert(ret40);cx_ite14=cx_ite14.next}}cx_ite11=cx_ite11.next}}if(null!=set.parent){for(var cur=set.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var pair=cur.data;fresh?this.space.freshListenerType(pair.a,pair.b):this.space.nullListenerType(pair.a,pair.b);var o10=pair;o10.a=o10.b=null,o10.listeners.clear(),o10.next=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=o10;var ret41=cur.parent;null!=ret41&&(cur==ret41.prev?ret41.prev=null:ret41.next=null,cur.parent=null);var o11=cur;o11.data=null,o11.lt=null,o11.swapped=null,o11.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o11,cur=ret41}set.parent=null}var o12=set;o12.data=null,o12.lt=null,o12.swapped=null,o12.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o12},zpp_nape.callbacks.ZPP_InteractionListener.prototype.with_union=function(lambda){for(var ite1=this.options1.includes.head,ite2=this.options2.includes.head;null!=ite1&&null!=ite2;){var cb1=ite1.elt,cb2=ite2.elt;cb1==cb2?(lambda(cb1),ite1=ite1.next,ite2=ite2.next):cb1.id<cb2.id?(lambda(cb1),ite1=ite1.next):(lambda(cb2),ite2=ite2.next)}for(;null!=ite1;)lambda(ite1.elt),ite1=ite1.next;for(;null!=ite2;)lambda(ite2.elt),ite2=ite2.next},zpp_nape.callbacks.ZPP_InteractionListener.prototype.addedToSpace=function(){for(var _gthis=this,pre=3==this.type,ite1=this.options1.includes.head,ite2=this.options2.includes.head;null!=ite1&&null!=ite2;){var cb1=ite1.elt,cb2=ite2.elt;if(cb1==cb2){for(var pre1=null,cx_ite=cb1.listeners.head;null!=cx_ite;){var j=cx_ite.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id)break;pre1=cx_ite,cx_ite=cx_ite.next}var _this=cb1.listeners,ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;null==pre1?(temp.next=_this.head,_this.head=temp):(temp.next=pre1.next,pre1.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite1=cb1.cbsets.head;null!=cx_ite1;){var cb=cx_ite1.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite1=cx_ite1.next}if(pre)for(var cx_ite2=cb1.interactors.head;null!=cx_ite2;){var i;cx_ite2.elt.wake(),cx_ite2=cx_ite2.next}ite1=ite1.next,ite2=ite2.next}else if(cb1.id<cb2.id){for(var pre2=null,cx_ite3=cb1.listeners.head;null!=cx_ite3;){var j1=cx_ite3.elt;if(this.precedence>j1.precedence||this.precedence==j1.precedence&&this.id>j1.id)break;pre2=cx_ite3,cx_ite3=cx_ite3.next}var _this1=cb1.listeners,ret1;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret1=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;null==pre2?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre2.next,pre2.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++;for(var cx_ite4=cb1.cbsets.head;null!=cx_ite4;){var cb3=cx_ite4.elt;cb3.zip_listeners=!0,cb3.invalidate_pairs(),cx_ite4=cx_ite4.next}if(pre)for(var cx_ite5=cb1.interactors.head;null!=cx_ite5;){var i1;cx_ite5.elt.wake(),cx_ite5=cx_ite5.next}ite1=ite1.next}else{for(var pre3=null,cx_ite6=cb2.listeners.head;null!=cx_ite6;){var j2=cx_ite6.elt;if(this.precedence>j2.precedence||this.precedence==j2.precedence&&this.id>j2.id)break;pre3=cx_ite6,cx_ite6=cx_ite6.next}var _this2=cb2.listeners,ret2;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret2=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret2.next,ret2.next=null),ret2.elt=this;var temp2=ret2;null==pre3?(temp2.next=_this2.head,_this2.head=temp2):(temp2.next=pre3.next,pre3.next=temp2),_this2.pushmod=_this2.modified=!0,_this2.length++;for(var cx_ite7=cb2.cbsets.head;null!=cx_ite7;){var cb4=cx_ite7.elt;cb4.zip_listeners=!0,cb4.invalidate_pairs(),cx_ite7=cx_ite7.next}if(pre)for(var cx_ite8=cb2.interactors.head;null!=cx_ite8;){var i2;cx_ite8.elt.wake(),cx_ite8=cx_ite8.next}ite2=ite2.next}}for(;null!=ite1;){for(var cb5=ite1.elt,pre4=null,cx_ite9=cb5.listeners.head;null!=cx_ite9;){var j3=cx_ite9.elt;if(this.precedence>j3.precedence||this.precedence==j3.precedence&&this.id>j3.id)break;pre4=cx_ite9,cx_ite9=cx_ite9.next}var _this3=cb5.listeners,ret3;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret3=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret3.next,ret3.next=null),ret3.elt=this;var temp3=ret3;null==pre4?(temp3.next=_this3.head,_this3.head=temp3):(temp3.next=pre4.next,pre4.next=temp3),_this3.pushmod=_this3.modified=!0,_this3.length++;for(var cx_ite10=cb5.cbsets.head;null!=cx_ite10;){var cb6=cx_ite10.elt;cb6.zip_listeners=!0,cb6.invalidate_pairs(),cx_ite10=cx_ite10.next}if(pre)for(var cx_ite11=cb5.interactors.head;null!=cx_ite11;){var i3;cx_ite11.elt.wake(),cx_ite11=cx_ite11.next}ite1=ite1.next}for(;null!=ite2;){for(var cb7=ite2.elt,pre5=null,cx_ite12=cb7.listeners.head;null!=cx_ite12;){var j4=cx_ite12.elt;if(this.precedence>j4.precedence||this.precedence==j4.precedence&&this.id>j4.id)break;pre5=cx_ite12,cx_ite12=cx_ite12.next}var _this4=cb7.listeners,ret4;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret4=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret4.next,ret4.next=null),ret4.elt=this;var temp4=ret4;null==pre5?(temp4.next=_this4.head,_this4.head=temp4):(temp4.next=pre5.next,pre5.next=temp4),_this4.pushmod=_this4.modified=!0,_this4.length++;for(var cx_ite13=cb7.cbsets.head;null!=cx_ite13;){var cb8=cx_ite13.elt;cb8.zip_listeners=!0,cb8.invalidate_pairs(),cx_ite13=cx_ite13.next}if(pre)for(var cx_ite14=cb7.interactors.head;null!=cx_ite14;){var i4;cx_ite14.elt.wake(),cx_ite14=cx_ite14.next}ite2=ite2.next}this.options1.handler=$bind(this,this.cbtype_change1),this.options2.handler=$bind(this,this.cbtype_change2),this.with_uniquesets(!0)},zpp_nape.callbacks.ZPP_InteractionListener.prototype.removedFromSpace=function(){var _gthis=this;this.with_uniquesets(!1);for(var pre=3==this.type,ite1=this.options1.includes.head,ite2=this.options2.includes.head;null!=ite1&&null!=ite2;){var cb1=ite1.elt,cb2=ite2.elt;if(cb1==cb2){cb1.listeners.remove(this);for(var cx_ite=cb1.cbsets.head;null!=cx_ite;){var cb=cx_ite.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite=cx_ite.next}if(pre)for(var cx_ite1=cb1.interactors.head;null!=cx_ite1;){var i;cx_ite1.elt.wake(),cx_ite1=cx_ite1.next}ite1=ite1.next,ite2=ite2.next}else if(cb1.id<cb2.id){cb1.listeners.remove(this);for(var cx_ite2=cb1.cbsets.head;null!=cx_ite2;){var cb3=cx_ite2.elt;cb3.zip_listeners=!0,cb3.invalidate_pairs(),cx_ite2=cx_ite2.next}if(pre)for(var cx_ite3=cb1.interactors.head;null!=cx_ite3;){var i1;cx_ite3.elt.wake(),cx_ite3=cx_ite3.next}ite1=ite1.next}else{cb2.listeners.remove(this);for(var cx_ite4=cb2.cbsets.head;null!=cx_ite4;){var cb4=cx_ite4.elt;cb4.zip_listeners=!0,cb4.invalidate_pairs(),cx_ite4=cx_ite4.next}if(pre)for(var cx_ite5=cb2.interactors.head;null!=cx_ite5;){var i2;cx_ite5.elt.wake(),cx_ite5=cx_ite5.next}ite2=ite2.next}}for(;null!=ite1;){var cb5=ite1.elt;cb5.listeners.remove(this);for(var cx_ite6=cb5.cbsets.head;null!=cx_ite6;){var cb6=cx_ite6.elt;cb6.zip_listeners=!0,cb6.invalidate_pairs(),cx_ite6=cx_ite6.next}if(pre)for(var cx_ite7=cb5.interactors.head;null!=cx_ite7;){var i3;cx_ite7.elt.wake(),cx_ite7=cx_ite7.next}ite1=ite1.next}for(;null!=ite2;){var cb7=ite2.elt;cb7.listeners.remove(this);for(var cx_ite8=cb7.cbsets.head;null!=cx_ite8;){var cb8=cx_ite8.elt;cb8.zip_listeners=!0,cb8.invalidate_pairs(),cx_ite8=cx_ite8.next}if(pre)for(var cx_ite9=cb7.interactors.head;null!=cx_ite9;){var i4;cx_ite9.elt.wake(),cx_ite9=cx_ite9.next}ite2=ite2.next}this.options1.handler=null,this.options2.handler=null},zpp_nape.callbacks.ZPP_InteractionListener.prototype.invalidate_precedence=function(){var _gthis=this;if(null!=this.space){for(var pre=3==this.type,ite1=this.options1.includes.head,ite2=this.options2.includes.head;null!=ite1&&null!=ite2;){var cb1=ite1.elt,cb2=ite2.elt;if(cb1==cb2){cb1.listeners.remove(this);for(var cx_ite=cb1.cbsets.head;null!=cx_ite;){var cb=cx_ite.elt;cb.zip_listeners=!0,cb.invalidate_pairs(),cx_ite=cx_ite.next}for(var pre1=null,cx_ite1=cb1.listeners.head;null!=cx_ite1;){var j=cx_ite1.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this=cb1.listeners,ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;null==pre1?(temp.next=_this.head,_this.head=temp):(temp.next=pre1.next,pre1.next=temp),_this.pushmod=_this.modified=!0,_this.length++;for(var cx_ite2=cb1.cbsets.head;null!=cx_ite2;){var cb3=cx_ite2.elt;cb3.zip_listeners=!0,cb3.invalidate_pairs(),cx_ite2=cx_ite2.next}if(pre)for(var cx_ite3=cb1.interactors.head;null!=cx_ite3;){var i;cx_ite3.elt.wake(),cx_ite3=cx_ite3.next}ite1=ite1.next,ite2=ite2.next}else if(cb1.id<cb2.id){cb1.listeners.remove(this);for(var cx_ite4=cb1.cbsets.head;null!=cx_ite4;){var cb4=cx_ite4.elt;cb4.zip_listeners=!0,cb4.invalidate_pairs(),cx_ite4=cx_ite4.next}for(var pre2=null,cx_ite5=cb1.listeners.head;null!=cx_ite5;){var j1=cx_ite5.elt;if(this.precedence>j1.precedence||this.precedence==j1.precedence&&this.id>j1.id)break;pre2=cx_ite5,cx_ite5=cx_ite5.next}var _this1=cb1.listeners,ret1;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret1=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;null==pre2?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre2.next,pre2.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++;for(var cx_ite6=cb1.cbsets.head;null!=cx_ite6;){var cb5=cx_ite6.elt;cb5.zip_listeners=!0,cb5.invalidate_pairs(),cx_ite6=cx_ite6.next}if(pre)for(var cx_ite7=cb1.interactors.head;null!=cx_ite7;){var i1;cx_ite7.elt.wake(),cx_ite7=cx_ite7.next}ite1=ite1.next}else{cb2.listeners.remove(this);for(var cx_ite8=cb2.cbsets.head;null!=cx_ite8;){var cb6=cx_ite8.elt;cb6.zip_listeners=!0,cb6.invalidate_pairs(),cx_ite8=cx_ite8.next}for(var pre3=null,cx_ite9=cb2.listeners.head;null!=cx_ite9;){var j2=cx_ite9.elt;if(this.precedence>j2.precedence||this.precedence==j2.precedence&&this.id>j2.id)break;pre3=cx_ite9,cx_ite9=cx_ite9.next}var _this2=cb2.listeners,ret2;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret2=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret2.next,ret2.next=null),ret2.elt=this;var temp2=ret2;null==pre3?(temp2.next=_this2.head,_this2.head=temp2):(temp2.next=pre3.next,pre3.next=temp2),_this2.pushmod=_this2.modified=!0,_this2.length++;for(var cx_ite10=cb2.cbsets.head;null!=cx_ite10;){var cb7=cx_ite10.elt;cb7.zip_listeners=!0,cb7.invalidate_pairs(),cx_ite10=cx_ite10.next}if(pre)for(var cx_ite11=cb2.interactors.head;null!=cx_ite11;){var i2;cx_ite11.elt.wake(),cx_ite11=cx_ite11.next}ite2=ite2.next}}for(;null!=ite1;){var cb8=ite1.elt;cb8.listeners.remove(this);for(var cx_ite12=cb8.cbsets.head;null!=cx_ite12;){var cb9=cx_ite12.elt;cb9.zip_listeners=!0,cb9.invalidate_pairs(),cx_ite12=cx_ite12.next}for(var pre4=null,cx_ite13=cb8.listeners.head;null!=cx_ite13;){var j3=cx_ite13.elt;if(this.precedence>j3.precedence||this.precedence==j3.precedence&&this.id>j3.id)break;pre4=cx_ite13,cx_ite13=cx_ite13.next}var _this3=cb8.listeners,ret3;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret3=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret3.next,ret3.next=null),ret3.elt=this;var temp3=ret3;null==pre4?(temp3.next=_this3.head,_this3.head=temp3):(temp3.next=pre4.next,pre4.next=temp3),_this3.pushmod=_this3.modified=!0,_this3.length++;for(var cx_ite14=cb8.cbsets.head;null!=cx_ite14;){var cb10=cx_ite14.elt;cb10.zip_listeners=!0,cb10.invalidate_pairs(),cx_ite14=cx_ite14.next}if(pre)for(var cx_ite15=cb8.interactors.head;null!=cx_ite15;){var i3;cx_ite15.elt.wake(),cx_ite15=cx_ite15.next}ite1=ite1.next}for(;null!=ite2;){var cb11=ite2.elt;cb11.listeners.remove(this);for(var cx_ite16=cb11.cbsets.head;null!=cx_ite16;){var cb12=cx_ite16.elt;cb12.zip_listeners=!0,cb12.invalidate_pairs(),cx_ite16=cx_ite16.next}for(var pre5=null,cx_ite17=cb11.listeners.head;null!=cx_ite17;){var j4=cx_ite17.elt;if(this.precedence>j4.precedence||this.precedence==j4.precedence&&this.id>j4.id)break;pre5=cx_ite17,cx_ite17=cx_ite17.next}var _this4=cb11.listeners,ret4;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret4=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret4.next,ret4.next=null),ret4.elt=this;var temp4=ret4;null==pre5?(temp4.next=_this4.head,_this4.head=temp4):(temp4.next=pre5.next,pre5.next=temp4),_this4.pushmod=_this4.modified=!0,_this4.length++;for(var cx_ite18=cb11.cbsets.head;null!=cx_ite18;){var cb13=cx_ite18.elt;cb13.zip_listeners=!0,cb13.invalidate_pairs(),cx_ite18=cx_ite18.next}if(pre)for(var cx_ite19=cb11.interactors.head;null!=cx_ite19;){var i4;cx_ite19.elt.wake(),cx_ite19=cx_ite19.next}ite2=ite2.next}}},zpp_nape.callbacks.ZPP_InteractionListener.prototype.cbtype_change1=function(cb,included,added){this.cbtype_change(this.options1,cb,included,added)},zpp_nape.callbacks.ZPP_InteractionListener.prototype.cbtype_change2=function(cb,included,added){this.cbtype_change(this.options2,cb,included,added)},zpp_nape.callbacks.ZPP_InteractionListener.prototype.cbtype_change=function(options,cb,included,added){if(this.removedFromSpace(),included)if(added){for(var pre=null,cx_ite=options.includes.head;null!=cx_ite;){var j=cx_ite.elt;if(cb.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=options.includes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++}else options.includes.remove(cb);else if(added){for(var pre1=null,cx_ite1=options.excludes.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(cb.id<j1.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this1=options.excludes,ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=cb;var temp1=ret1;null==pre1?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++}else options.excludes.remove(cb);this.addedToSpace()},zpp_nape.callbacks.ZPP_InteractionListener.prototype.swapEvent=function(newev){if(3==this.type)throw new js._Boot.HaxeError("Error: PreListener event can only be PRE");if(0!=newev&&1!=newev&&6!=newev)throw new js._Boot.HaxeError("Error: InteractionListener event must be either BEGIN, END, ONGOING");this.removedFromSpace(),this.event=newev,this.addedToSpace()},zpp_nape.callbacks.ZPP_InteractionListener.prototype.__class__=zpp_nape.callbacks.ZPP_InteractionListener,zpp_nape.callbacks.ZPP_OptionType=$hxClasses["zpp_nape.callbacks.ZPP_OptionType"]=function(){this.wrap_excludes=null,this.wrap_includes=null,this.excludes=null,this.includes=null,this.handler=null,this.outer=null,this.includes=new zpp_nape.util.ZNPList_ZPP_CbType,this.excludes=new zpp_nape.util.ZNPList_ZPP_CbType},zpp_nape.callbacks.ZPP_OptionType.__name__=["zpp_nape","callbacks","ZPP_OptionType"],zpp_nape.callbacks.ZPP_OptionType.argument=function(val){return null==val?new nape.callbacks.OptionType:val instanceof nape.callbacks.OptionType?val:(new nape.callbacks.OptionType).including(val)},zpp_nape.callbacks.ZPP_OptionType.prototype.outer=null,zpp_nape.callbacks.ZPP_OptionType.prototype.handler=null,zpp_nape.callbacks.ZPP_OptionType.prototype.includes=null,zpp_nape.callbacks.ZPP_OptionType.prototype.excludes=null,zpp_nape.callbacks.ZPP_OptionType.prototype.wrap_includes=null,zpp_nape.callbacks.ZPP_OptionType.prototype.wrap_excludes=null,zpp_nape.callbacks.ZPP_OptionType.prototype.setup_includes=function(){this.wrap_includes=zpp_nape.util.ZPP_CbTypeList.get(this.includes,!0)},zpp_nape.callbacks.ZPP_OptionType.prototype.setup_excludes=function(){this.wrap_excludes=zpp_nape.util.ZPP_CbTypeList.get(this.excludes,!0)},zpp_nape.callbacks.ZPP_OptionType.prototype.excluded=function(xs){return this.nonemptyintersection(xs,this.excludes)},zpp_nape.callbacks.ZPP_OptionType.prototype.included=function(xs){return this.nonemptyintersection(xs,this.includes)},zpp_nape.callbacks.ZPP_OptionType.prototype.compatible=function(xs){return!!this.nonemptyintersection(xs,this.includes)&&!this.nonemptyintersection(xs,this.excludes)},zpp_nape.callbacks.ZPP_OptionType.prototype.nonemptyintersection=function(xs,ys){for(var ret=!1,xite=xs.head,eite=ys.head;null!=eite&&null!=xite;){var ex=eite.elt,xi=xite.elt;if(ex==xi){ret=!0;break}ex.id<xi.id?eite=eite.next:xite=xite.next}return ret},zpp_nape.callbacks.ZPP_OptionType.prototype.effect_change=function(val,included,added){if(included)if(added){for(var pre=null,cx_ite=this.includes.head;null!=cx_ite;){var j=cx_ite.elt;if(val.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.includes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=val;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++}else this.includes.remove(val);else if(added){for(var pre1=null,cx_ite1=this.excludes.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(val.id<j1.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this1=this.excludes,ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=val;var temp1=ret1;null==pre1?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++}else this.excludes.remove(val)},zpp_nape.callbacks.ZPP_OptionType.prototype.append_type=function(list,val){if(list==this.includes){if(!this.includes.has(val))if(this.excludes.has(val))null!=this.handler?this.handler(val,!1,!1):this.excludes.remove(val);else if(null!=this.handler)this.handler(val,!0,!0);else{for(var pre=null,cx_ite=this.includes.head;null!=cx_ite;){var j=cx_ite.elt;if(val.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.includes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=val;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++}}else if(!this.excludes.has(val))if(this.includes.has(val))null!=this.handler?this.handler(val,!0,!1):this.includes.remove(val);else if(null!=this.handler)this.handler(val,!1,!0);else{for(var pre1=null,cx_ite1=this.excludes.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(val.id<j1.id)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this1=this.excludes,ret1;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret1=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret1.next,ret1.next=null),ret1.elt=val;var temp1=ret1;null==pre1?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++}},zpp_nape.callbacks.ZPP_OptionType.prototype.set=function(options){if(options!=this){for(;null!=this.includes.head;)this.append_type(this.excludes,this.includes.head.elt);for(;null!=this.excludes.head;)this.append_type(this.includes,this.excludes.head.elt);for(var cx_ite=options.excludes.head;null!=cx_ite;){var i=cx_ite.elt;this.append_type(this.excludes,i),cx_ite=cx_ite.next}for(var cx_ite1=options.includes.head;null!=cx_ite1;){var i1=cx_ite1.elt;this.append_type(this.includes,i1),cx_ite1=cx_ite1.next}}return this},zpp_nape.callbacks.ZPP_OptionType.prototype.append=function(list,val){if(null==val)throw new js._Boot.HaxeError("Error: Cannot append null, only CbType and CbType list values");if(val instanceof nape.callbacks.CbType){var cb=val;this.append_type(list,cb.zpp_inner)}else if(val instanceof nape.callbacks.CbTypeList){var cbs=val;cbs.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(cbs);;){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod(),_this.zpp_inner.zip_length&&(_this.zpp_inner.zip_length=!1,_this.zpp_inner.user_length=_this.zpp_inner.inner.length);var length=_this.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var cb1=_g.zpp_inner.at(_g.zpp_i++);this.append_type(list,cb1.zpp_inner)}}else{if(!(val instanceof Array))throw new js._Boot.HaxeError("Error: Cannot append non-CbType or CbType list value");for(var cbs1=val,_g1=0;_g1<cbs1.length;){var cb2=cbs1[_g1];if(++_g1,!(cb2 instanceof nape.callbacks.CbType))throw new js._Boot.HaxeError("Error: Cannot append non-CbType or CbType list value");var cbx=cb2;this.append_type(list,cbx.zpp_inner)}}},zpp_nape.callbacks.ZPP_OptionType.prototype.__class__=zpp_nape.callbacks.ZPP_OptionType,zpp_nape.constraint||(zpp_nape.constraint={}),zpp_nape.constraint.ZPP_Constraint=$hxClasses["zpp_nape.constraint.ZPP_Constraint"]=function(){this.pre_dt=0,this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.__velocity=!1,this.ignore=!1,this.component=null,this.removeOnBreak=!1,this.breakUnderError=!1,this.breakUnderForce=!1,this.maxError=0,this.maxForce=0,this.damping=0,this.frequency=0,this.stiff=!1,this.active=!1,this.space=null,this.compound=null,this.userData=null,this.id=0,this.outer=null,this.__velocity=!1,this.id=zpp_nape.ZPP_ID.Constraint(),this.stiff=!0,this.active=!0,this.ignore=!1,this.frequency=10,this.damping=1,this.maxForce=1/0,this.maxError=1/0,this.breakUnderForce=!1,this.removeOnBreak=!0,this.pre_dt=-1,this.cbTypes=new zpp_nape.util.ZNPList_ZPP_CbType},zpp_nape.constraint.ZPP_Constraint.__name__=["zpp_nape","constraint","ZPP_Constraint"],zpp_nape.constraint.ZPP_Constraint.prototype.outer=null,zpp_nape.constraint.ZPP_Constraint.prototype.clear=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.id=null,zpp_nape.constraint.ZPP_Constraint.prototype.userData=null,zpp_nape.constraint.ZPP_Constraint.prototype.compound=null,zpp_nape.constraint.ZPP_Constraint.prototype.space=null,zpp_nape.constraint.ZPP_Constraint.prototype.active=null,zpp_nape.constraint.ZPP_Constraint.prototype.stiff=null,zpp_nape.constraint.ZPP_Constraint.prototype.frequency=null,zpp_nape.constraint.ZPP_Constraint.prototype.damping=null,zpp_nape.constraint.ZPP_Constraint.prototype.maxForce=null,zpp_nape.constraint.ZPP_Constraint.prototype.maxError=null,zpp_nape.constraint.ZPP_Constraint.prototype.breakUnderForce=null,zpp_nape.constraint.ZPP_Constraint.prototype.breakUnderError=null,zpp_nape.constraint.ZPP_Constraint.prototype.removeOnBreak=null,zpp_nape.constraint.ZPP_Constraint.prototype.component=null,zpp_nape.constraint.ZPP_Constraint.prototype.ignore=null,zpp_nape.constraint.ZPP_Constraint.prototype.__velocity=null,zpp_nape.constraint.ZPP_Constraint.prototype.immutable_midstep=function(name){if(null!=this.space&&this.space.midstep)throw new js._Boot.HaxeError("Error: Constraint::"+name+" cannot be set during space step()")},zpp_nape.constraint.ZPP_Constraint.prototype.cbTypes=null,zpp_nape.constraint.ZPP_Constraint.prototype.cbSet=null,zpp_nape.constraint.ZPP_Constraint.prototype.wrap_cbTypes=null,zpp_nape.constraint.ZPP_Constraint.prototype.setupcbTypes=function(){this.wrap_cbTypes=zpp_nape.util.ZPP_CbTypeList.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$bind(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$bind(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0,this.wrap_cbTypes.zpp_inner._modifiable=$bind(this,this.immutable_cbTypes)},zpp_nape.constraint.ZPP_Constraint.prototype.immutable_cbTypes=function(){this.immutable_midstep("Constraint::cbTypes")},zpp_nape.constraint.ZPP_Constraint.prototype.wrap_cbTypes_subber=function(pcb){var cb=pcb.zpp_inner;this.cbTypes.has(cb)&&(null!=this.space&&(this.dealloc_cbSet(),cb.constraints.remove(this)),this.cbTypes.remove(cb),null!=this.space&&(this.alloc_cbSet(),this.wake()))},zpp_nape.constraint.ZPP_Constraint.prototype.wrap_cbTypes_adder=function(cb){return this.insert_cbtype(cb.zpp_inner),!1},zpp_nape.constraint.ZPP_Constraint.prototype.insert_cbtype=function(cb){if(!this.cbTypes.has(cb)){null!=this.space&&(this.dealloc_cbSet(),cb.constraints.add(this));for(var pre=null,cx_ite=this.cbTypes.head;null!=cx_ite;){var j=cx_ite.elt;if(cb.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.cbTypes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++,null!=this.space&&(this.alloc_cbSet(),this.wake())}},zpp_nape.constraint.ZPP_Constraint.prototype.alloc_cbSet=function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.constraints.add(this))},zpp_nape.constraint.ZPP_Constraint.prototype.dealloc_cbSet=function(){if(null!=this.cbSet){if(this.cbSet.constraints.remove(this),0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var o=this.cbSet;for(o.listeners.clear(),o.zip_listeners=!0,o.bodylisteners.clear(),o.zip_bodylisteners=!0,o.conlisteners.clear(),o.zip_conlisteners=!0;null!=o.cbTypes.head;){var cb;o.cbTypes.pop_unsafe().cbsets.remove(o)}o.next=zpp_nape.callbacks.ZPP_CbSet.zpp_pool,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=o}this.cbSet=null}},zpp_nape.constraint.ZPP_Constraint.prototype.activate=function(){null!=this.space&&this.activeInSpace()},zpp_nape.constraint.ZPP_Constraint.prototype.deactivate=function(){null!=this.space&&this.inactiveOrOutSpace()},zpp_nape.constraint.ZPP_Constraint.prototype.addedToSpace=function(){this.active&&this.activeInSpace(),this.activeBodies();for(var cx_ite=this.cbTypes.head;null!=cx_ite;){var cb;cx_ite.elt.constraints.add(this),cx_ite=cx_ite.next}},zpp_nape.constraint.ZPP_Constraint.prototype.removedFromSpace=function(){this.active&&this.inactiveOrOutSpace(),this.inactiveBodies();for(var cx_ite=this.cbTypes.head;null!=cx_ite;){var cb;cx_ite.elt.constraints.remove(this),cx_ite=cx_ite.next}},zpp_nape.constraint.ZPP_Constraint.prototype.activeInSpace=function(){this.alloc_cbSet(),null==zpp_nape.space.ZPP_Component.zpp_pool?this.component=new zpp_nape.space.ZPP_Component:(this.component=zpp_nape.space.ZPP_Component.zpp_pool,zpp_nape.space.ZPP_Component.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!1,this.component.constraint=this},zpp_nape.constraint.ZPP_Constraint.prototype.inactiveOrOutSpace=function(){this.dealloc_cbSet();var o=this.component;o.body=null,o.constraint=null,o.next=zpp_nape.space.ZPP_Component.zpp_pool,zpp_nape.space.ZPP_Component.zpp_pool=o,this.component=null},zpp_nape.constraint.ZPP_Constraint.prototype.activeBodies=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.inactiveBodies=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.clearcache=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.validate=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.wake_connected=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.forest=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.pair_exists=function(id,di){return!1},zpp_nape.constraint.ZPP_Constraint.prototype.broken=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.warmStart=function(){},zpp_nape.constraint.ZPP_Constraint.prototype.pre_dt=null,zpp_nape.constraint.ZPP_Constraint.prototype.preStep=function(dt){return!1},zpp_nape.constraint.ZPP_Constraint.prototype.applyImpulseVel=function(){return!1},zpp_nape.constraint.ZPP_Constraint.prototype.applyImpulsePos=function(){return!1},zpp_nape.constraint.ZPP_Constraint.prototype.wake=function(){null!=this.space&&this.space.wake_constraint(this)},zpp_nape.constraint.ZPP_Constraint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_Constraint.prototype.copy=function(dict,todo){return null},zpp_nape.constraint.ZPP_Constraint.prototype.copyto=function(ret){var me=this.outer;null==me.zpp_inner.wrap_cbTypes&&me.zpp_inner.setupcbTypes();var _this=me.zpp_inner.wrap_cbTypes;_this.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(_this);;){_g.zpp_inner.zpp_inner.valmod();var _this1=_g.zpp_inner;_this1.zpp_inner.valmod(),_this1.zpp_inner.zip_length&&(_this1.zpp_inner.zip_length=!1,_this1.zpp_inner.user_length=_this1.zpp_inner.inner.length);var length=_this1.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var cb=_g.zpp_inner.at(_g.zpp_i++);null==ret.zpp_inner.wrap_cbTypes&&ret.zpp_inner.setupcbTypes();var _this2=ret.zpp_inner.wrap_cbTypes;_this2.zpp_inner.reverse_flag?_this2.push(cb):_this2.unshift(cb)}ret.zpp_inner.removeOnBreak=me.zpp_inner.removeOnBreak;var breakUnderError=me.zpp_inner.breakUnderError;ret.zpp_inner.breakUnderError!=breakUnderError&&(ret.zpp_inner.breakUnderError=breakUnderError,ret.zpp_inner.wake());var breakUnderForce=me.zpp_inner.breakUnderForce;ret.zpp_inner.breakUnderForce!=breakUnderForce&&(ret.zpp_inner.breakUnderForce=breakUnderForce,ret.zpp_inner.wake());var maxError=me.zpp_inner.maxError;if(maxError!=maxError)throw new js._Boot.HaxeError("Error: Constraint::maxError cannot be NaN");if(maxError<0)throw new js._Boot.HaxeError("Error: Constraint::maxError must be >=0");ret.zpp_inner.maxError!=maxError&&(ret.zpp_inner.maxError=maxError,ret.zpp_inner.wake());var maxForce=me.zpp_inner.maxForce;if(maxForce!=maxForce)throw new js._Boot.HaxeError("Error: Constraint::maxForce cannot be NaN");if(maxForce<0)throw new js._Boot.HaxeError("Error: Constraint::maxForce must be >=0");ret.zpp_inner.maxForce!=maxForce&&(ret.zpp_inner.maxForce=maxForce,ret.zpp_inner.wake());var damping=me.zpp_inner.damping;if(damping!=damping)throw new js._Boot.HaxeError("Error: Constraint::Damping cannot be Nan");if(damping<0)throw new js._Boot.HaxeError("Error: Constraint::Damping must be >=0");ret.zpp_inner.damping!=damping&&(ret.zpp_inner.damping=damping,ret.zpp_inner.stiff||ret.zpp_inner.wake());var frequency=me.zpp_inner.frequency;if(frequency!=frequency)throw new js._Boot.HaxeError("Error: Constraint::Frequency cannot be NaN");if(frequency<=0)throw new js._Boot.HaxeError("Error: Constraint::Frequency must be >0");ret.zpp_inner.frequency!=frequency&&(ret.zpp_inner.frequency=frequency,ret.zpp_inner.stiff||ret.zpp_inner.wake());var stiff=me.zpp_inner.stiff;ret.zpp_inner.stiff!=stiff&&(ret.zpp_inner.stiff=stiff,ret.zpp_inner.wake());var ignore=me.zpp_inner.ignore;ret.zpp_inner.ignore!=ignore&&(ret.zpp_inner.ignore=ignore,ret.zpp_inner.wake());var active=me.zpp_inner.active;ret.zpp_inner.active!=active&&(null!=ret.zpp_inner.component&&(ret.zpp_inner.component.woken=!1),ret.zpp_inner.clearcache(),active?(ret.zpp_inner.active=active,ret.zpp_inner.activate(),null!=ret.zpp_inner.space&&(null!=ret.zpp_inner.component&&(ret.zpp_inner.component.sleeping=!0),ret.zpp_inner.space.wake_constraint(ret.zpp_inner,!0))):(null!=ret.zpp_inner.space&&(ret.zpp_inner.wake(),ret.zpp_inner.space.live_constraints.remove(ret.zpp_inner)),ret.zpp_inner.active=active,ret.zpp_inner.deactivate()))},zpp_nape.constraint.ZPP_Constraint.prototype.__class__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_AngleJoint=$hxClasses["zpp_nape.constraint.ZPP_AngleJoint"]=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.scale=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=0,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.ratio=1,this.jAcc=0,this.slack=!1,this.jMax=1/0,this.stepped=!1},zpp_nape.constraint.ZPP_AngleJoint.__name__=["zpp_nape","constraint","ZPP_AngleJoint"],zpp_nape.constraint.ZPP_AngleJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_AngleJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_AngleJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.ratio=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.jointMin=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.jointMax=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.slack=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.equal=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.scale=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.is_slack=function(){var slack,C=this.ratio*this.b2.rot-this.b1.rot;return this.equal?(C-=this.jointMax,slack=!1,this.scale=1):C<this.jointMin?(C=this.jointMin-C,this.scale=-1,slack=!1):C>this.jointMax?(C-=this.jointMax,this.scale=1,slack=!1):(this.scale=0,C=0,slack=!0),slack},zpp_nape.constraint.ZPP_AngleJoint.prototype.bodyImpulse=function(b){return this.stepped?b==this.b1?nape.geom.Vec3.get(0,0,-this.scale*this.jAcc):nape.geom.Vec3.get(0,0,this.ratio*this.scale*this.jAcc):nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_AngleJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_AngleJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_AngleJoint.prototype.b1=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.b2=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.kMass=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.jAcc=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.bias=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_AngleJoint.prototype.copy=function(dict,todo){var ret=new nape.constraint.AngleJoint(null,null,this.jointMin,this.jointMax,this.ratio);if(this.copyto(ret),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret.zpp_inner_zn.b2=b3.zpp_inner})))}return ret},zpp_nape.constraint.ZPP_AngleJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new js._Boot.HaxeError("Error: AngleJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic")},zpp_nape.constraint.ZPP_AngleJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_AngleJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_AngleJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_AngleJoint.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1,this.slack=!1},zpp_nape.constraint.ZPP_AngleJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.stepped=!0,this.equal=this.jointMin==this.jointMax;var C=this.ratio*this.b2.rot-this.b1.rot;this.equal?(C-=this.jointMax,this.slack=!1,this.scale=1):C<this.jointMin?(C=this.jointMin-C,this.scale=-1,this.slack=!1):C>this.jointMax?(C-=this.jointMax,this.scale=1,this.slack=!1):(this.scale=0,C=0,this.slack=!0);var C1=C;if(!this.slack){if(this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&C1*C1>this.maxError*this.maxError)return!0;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma),biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig,this.kMass*=ig,this.bias=-C1*biasCoef,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=dtratio,this.jMax=this.maxForce*dt}return!1},zpp_nape.constraint.ZPP_AngleJoint.prototype.warmStart=function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},zpp_nape.constraint.ZPP_AngleJoint.prototype.applyImpulseVel=function(){if(this.slack)return!1;var E=this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel),j=this.kMass*(this.bias-E)-this.jAcc*this.gamma,jOld=this.jAcc;return this.jAcc+=j,!this.equal&&this.jAcc>0&&(this.jAcc=0),!(!this.breakUnderForce||!(this.jAcc>this.jMax||this.jAcc<-this.jMax))||(this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax)),j=this.jAcc-jOld,this.b1.angvel-=this.scale*this.b1.iinertia*j,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*j,!1)},zpp_nape.constraint.ZPP_AngleJoint.prototype.applyImpulsePos=function(){var j,slack,C=this.ratio*this.b2.rot-this.b1.rot;this.equal?(C-=this.jointMax,slack=!1,this.scale=1):C<this.jointMin?(C=this.jointMin-C,this.scale=-1,slack=!1):C>this.jointMax?(C-=this.jointMax,this.scale=1,slack=!1):(this.scale=0,C=0,slack=!0);var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError)return!0;if(j=-(E*=.5)*this.kMass,this.equal||j<0){var _this=this.b1,dr=-this.scale*j*this.b1.iinertia;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx}var _this1=this.b2,dr1=this.ratio*this.scale*j*this.b2.iinertia;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx1}}}return!1},zpp_nape.constraint.ZPP_AngleJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_AngleJoint.prototype.__class__=zpp_nape.constraint.ZPP_AngleJoint,zpp_nape.constraint.ZPP_CopyHelper=$hxClasses["zpp_nape.constraint.ZPP_CopyHelper"]=function(){this.cb=null,this.bc=null,this.id=0},zpp_nape.constraint.ZPP_CopyHelper.__name__=["zpp_nape","constraint","ZPP_CopyHelper"],zpp_nape.constraint.ZPP_CopyHelper.dict=function(id,bc){var ret=new zpp_nape.constraint.ZPP_CopyHelper;return ret.id=id,ret.bc=bc,ret},zpp_nape.constraint.ZPP_CopyHelper.todo=function(id,cb){var ret=new zpp_nape.constraint.ZPP_CopyHelper;return ret.id=id,ret.cb=cb,ret},zpp_nape.constraint.ZPP_CopyHelper.prototype.id=null,zpp_nape.constraint.ZPP_CopyHelper.prototype.bc=null,zpp_nape.constraint.ZPP_CopyHelper.prototype.cb=null,zpp_nape.constraint.ZPP_CopyHelper.prototype.__class__=zpp_nape.constraint.ZPP_CopyHelper,zpp_nape.constraint.ZPP_DistanceJoint=$hxClasses["zpp_nape.constraint.ZPP_DistanceJoint"]=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx2=0,this.cx1=0,this.ny=0,this.nx=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=0},zpp_nape.constraint.ZPP_DistanceJoint.__name__=["zpp_nape","constraint","ZPP_DistanceJoint"],zpp_nape.constraint.ZPP_DistanceJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_DistanceJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_DistanceJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.jointMin=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.jointMax=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.slack=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.equal=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.is_slack=function(){var slack;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var nx=0,ny=0,C=(nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx))*nx+(ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely))*ny;if(C<nape.Config.epsilon)nx=0,ny=0,C=0,slack=!0;else{var t=1/(C=Math.sqrt(C));nx*=t,ny*=t,this.equal?(C-=this.jointMax,slack=!1):C<this.jointMin?(C=this.jointMin-C,nx=-nx,ny=-ny,slack=!1):C>this.jointMax?(C-=this.jointMax,slack=!1):(nx=0,ny=0,C=0,slack=!0)}return slack},zpp_nape.constraint.ZPP_DistanceJoint.prototype.nx=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.ny=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.cx1=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.cx2=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.bodyImpulse=function(b){return this.stepped?b==this.b1?nape.geom.Vec3.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc):nape.geom.Vec3.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_DistanceJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_DistanceJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_DistanceJoint.prototype.b1=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a1localx=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a1localy=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a1relx=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a1rely=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},zpp_nape.constraint.ZPP_DistanceJoint.prototype.invalidate_a1=function(x){this.immutable_midstep("Constraint::a1"),this.a1localx=x.x,this.a1localy=x.y,this.wake()},zpp_nape.constraint.ZPP_DistanceJoint.prototype.setup_a1=function(){var x=this.a1localx,y=this.a1localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a1=ret,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},zpp_nape.constraint.ZPP_DistanceJoint.prototype.wrap_a1=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.b2=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a2localx=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a2localy=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a2relx=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.a2rely=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},zpp_nape.constraint.ZPP_DistanceJoint.prototype.invalidate_a2=function(x){this.immutable_midstep("Constraint::a2"),this.a2localx=x.x,this.a2localy=x.y,this.wake()},zpp_nape.constraint.ZPP_DistanceJoint.prototype.setup_a2=function(){var x=this.a2localx,y=this.a2localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a2=ret,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},zpp_nape.constraint.ZPP_DistanceJoint.prototype.wrap_a2=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.kMass=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.jAcc=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.bias=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_DistanceJoint.prototype.copy=function(dict,todo){var _this=this.outer_zn;null==_this.zpp_inner_zn.wrap_a1&&_this.zpp_inner_zn.setup_a1();var ret=_this.zpp_inner_zn.wrap_a1,_this1=this.outer_zn;null==_this1.zpp_inner_zn.wrap_a2&&_this1.zpp_inner_zn.setup_a2();var ret1=new nape.constraint.DistanceJoint(null,null,ret,_this1.zpp_inner_zn.wrap_a2,this.jointMin,this.jointMax);if(this.copyto(ret1),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret1.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret1.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret1.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret1.zpp_inner_zn.b2=b3.zpp_inner})))}return ret1},zpp_nape.constraint.ZPP_DistanceJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new js._Boot.HaxeError("Error: DistanceJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic")},zpp_nape.constraint.ZPP_DistanceJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_DistanceJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_DistanceJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_DistanceJoint.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_DistanceJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var C=this.nx*this.nx+this.ny*this.ny;if(C<nape.Config.epsilon)this.nx=0,this.ny=0,C=0,this.slack=!0;else{var t=1/(C=Math.sqrt(C));this.nx*=t,this.ny*=t,this.equal?(C-=this.jointMax,this.slack=!1):C<this.jointMin?(C=this.jointMin-C,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):C>this.jointMax?(C-=this.jointMax,this.slack=!1):(this.nx=0,this.ny=0,C=0,this.slack=!0)}var C1=C;if(!this.slack){if(this.cx1=this.ny*this.a1relx-this.nx*this.a1rely,this.cx2=this.ny*this.a2relx-this.nx*this.a2rely,this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&C1*C1>this.maxError*this.maxError)return!0;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma),biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig,this.kMass*=ig,this.bias=-C1*biasCoef,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=dtratio,this.jMax=this.maxForce*dt}return!1},zpp_nape.constraint.ZPP_DistanceJoint.prototype.warmStart=function(){if(!this.slack){var t=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*t,this.b1.vely-=this.ny*t;var t1=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t1,this.b2.vely+=this.ny*t1,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},zpp_nape.constraint.ZPP_DistanceJoint.prototype.applyImpulseVel=function(){if(this.slack)return!1;var E=this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1,j=this.kMass*(this.bias-E)-this.jAcc*this.gamma,jOld=this.jAcc;if(this.jAcc+=j,!this.equal&&this.jAcc>0&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),j=this.jAcc-jOld;var t=this.b1.imass*j;this.b1.velx-=this.nx*t,this.b1.vely-=this.ny*t;var t1=this.b2.imass*j;return this.b2.velx+=this.nx*t1,this.b2.vely+=this.ny*t1,this.b1.angvel-=this.cx1*this.b1.iinertia*j,this.b2.angvel+=this.cx2*this.b2.iinertia*j,!1},zpp_nape.constraint.ZPP_DistanceJoint.prototype.applyImpulsePos=function(){var j,r1x=0,r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0,r2y=0,slack;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var nx=0,ny=0,C=(nx=this.b2.posx+r2x-(this.b1.posx+r1x))*nx+(ny=this.b2.posy+r2y-(this.b1.posy+r1y))*ny;if(C<nape.Config.epsilon)nx=0,ny=0,C=0,slack=!0;else{var t=1/(C=Math.sqrt(C));nx*=t,ny*=t,this.equal?(C-=this.jointMax,slack=!1):C<this.jointMin?(C=this.jointMin-C,nx=-nx,ny=-ny,slack=!1):C>this.jointMax?(C-=this.jointMax,slack=!1):(nx=0,ny=0,C=0,slack=!0)}var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError)return!0;if(E*E<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop)return!1;if((E*=.5)*E>6){var k=this.b1.smass+this.b2.smass;if(k>nape.Config.epsilon&&(j=-E*(k=.75/k),this.equal||j<0)){var t1=j*this.b1.imass;this.b1.posx-=nx*t1,this.b1.posy-=ny*t1;var t2=j*this.b2.imass;this.b2.posx+=nx*t2,this.b2.posy+=ny*t2;var C1=(nx=this.b2.posx+r2x-(this.b1.posx+r1x))*nx+(ny=this.b2.posy+r2y-(this.b1.posy+r1y))*ny;if(C1<nape.Config.epsilon)nx=0,ny=0,C1=0,slack=!0;else{var t3=1/(C1=Math.sqrt(C1));nx*=t3,ny*=t3,this.equal?(C1-=this.jointMax,slack=!1):C1<this.jointMin?(C1=this.jointMin-C1,nx=-nx,ny=-ny,slack=!1):C1>this.jointMax?(C1-=this.jointMax,slack=!1):(nx=0,ny=0,C1=0,slack=!0)}E=C1,E*=.5}}var cx1=ny*r1x-nx*r1y,cx2=ny*r2x-nx*r2y,k1=this.b1.smass+this.b2.smass+cx1*cx1*this.b1.sinertia+cx2*cx2*this.b2.sinertia;if(0!=k1&&(k1=1/k1),j=-E*k1,this.equal||j<0){var t4=this.b1.imass*j;this.b1.posx-=nx*t4,this.b1.posy-=ny*t4;var t5=this.b2.imass*j;this.b2.posx+=nx*t5,this.b2.posy+=ny*t5;var _this=this.b1,dr=-cx1*this.b1.iinertia*j;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx1=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx1}var _this1=this.b2,dr1=cx2*this.b2.iinertia*j;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx2=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx2}}}return!1},zpp_nape.constraint.ZPP_DistanceJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_DistanceJoint.prototype.__class__=zpp_nape.constraint.ZPP_DistanceJoint,zpp_nape.constraint.ZPP_LineJoint=$hxClasses["zpp_nape.constraint.ZPP_LineJoint"]=function(){this.biasy=0,this.biasx=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_n=null,this.nrely=0,this.nrelx=0,this.nlocaly=0,this.nlocalx=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.cx2=0,this.cx1=0,this.dot2=0,this.dot1=0,this.equal=!1,this.jointMax=0,this.jointMin=0,this.scale=0,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.nlocalx=0,this.nlocaly=0,this.nrelx=0,this.nrely=0,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.jointMin=-1/0,this.jointMax=1/0,this.stepped=!1},zpp_nape.constraint.ZPP_LineJoint.__name__=["zpp_nape","constraint","ZPP_LineJoint"],zpp_nape.constraint.ZPP_LineJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_LineJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_LineJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_LineJoint.prototype.scale=null,zpp_nape.constraint.ZPP_LineJoint.prototype.jointMin=null,zpp_nape.constraint.ZPP_LineJoint.prototype.jointMax=null,zpp_nape.constraint.ZPP_LineJoint.prototype.equal=null,zpp_nape.constraint.ZPP_LineJoint.prototype.dot1=null,zpp_nape.constraint.ZPP_LineJoint.prototype.dot2=null,zpp_nape.constraint.ZPP_LineJoint.prototype.cx1=null,zpp_nape.constraint.ZPP_LineJoint.prototype.cx2=null,zpp_nape.constraint.ZPP_LineJoint.prototype.bodyImpulse=function(b){if(this.stepped){var jx=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,jy=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return b==this.b1?nape.geom.Vec3.get(-jx,-jy,this.scale*this.cx1*jy-this.dot1*jx):nape.geom.Vec3.get(jx,jy,this.scale*this.cx1*jy-this.dot1*jx)}return nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_LineJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_LineJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_LineJoint.prototype.b1=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a1localx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a1localy=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a1relx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a1rely=null,zpp_nape.constraint.ZPP_LineJoint.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},zpp_nape.constraint.ZPP_LineJoint.prototype.invalidate_a1=function(x){this.immutable_midstep("Constraint::a1"),this.a1localx=x.x,this.a1localy=x.y,this.wake()},zpp_nape.constraint.ZPP_LineJoint.prototype.setup_a1=function(){var x=this.a1localx,y=this.a1localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a1=ret,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},zpp_nape.constraint.ZPP_LineJoint.prototype.wrap_a1=null,zpp_nape.constraint.ZPP_LineJoint.prototype.b2=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a2localx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a2localy=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a2relx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.a2rely=null,zpp_nape.constraint.ZPP_LineJoint.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},zpp_nape.constraint.ZPP_LineJoint.prototype.invalidate_a2=function(x){this.immutable_midstep("Constraint::a2"),this.a2localx=x.x,this.a2localy=x.y,this.wake()},zpp_nape.constraint.ZPP_LineJoint.prototype.setup_a2=function(){var x=this.a2localx,y=this.a2localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a2=ret,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},zpp_nape.constraint.ZPP_LineJoint.prototype.wrap_a2=null,zpp_nape.constraint.ZPP_LineJoint.prototype.zip_n=null,zpp_nape.constraint.ZPP_LineJoint.prototype.nlocalx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.nlocaly=null,zpp_nape.constraint.ZPP_LineJoint.prototype.nrelx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.nrely=null,zpp_nape.constraint.ZPP_LineJoint.prototype.validate_n=function(){this.wrap_n.zpp_inner.x=this.nlocalx,this.wrap_n.zpp_inner.y=this.nlocaly},zpp_nape.constraint.ZPP_LineJoint.prototype.invalidate_n=function(x){this.immutable_midstep("Constraint::n"),this.nlocalx=x.x,this.nlocaly=x.y,this.zip_n=!0,this.wake()},zpp_nape.constraint.ZPP_LineJoint.prototype.setup_n=function(){var x=this.nlocalx,y=this.nlocaly,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_n=ret,this.wrap_n.zpp_inner._inuse=!0,this.wrap_n.zpp_inner._validate=$bind(this,this.validate_n),this.wrap_n.zpp_inner._invalidate=$bind(this,this.invalidate_n)},zpp_nape.constraint.ZPP_LineJoint.prototype.wrap_n=null,zpp_nape.constraint.ZPP_LineJoint.prototype.validate_norm=function(){if(this.zip_n){this.zip_n=!1;var d=this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly,imag,t=1/Math.sqrt(d);this.nlocalx*=t,this.nlocaly*=t}},zpp_nape.constraint.ZPP_LineJoint.prototype.kMassa=null,zpp_nape.constraint.ZPP_LineJoint.prototype.kMassb=null,zpp_nape.constraint.ZPP_LineJoint.prototype.kMassc=null,zpp_nape.constraint.ZPP_LineJoint.prototype.jAccx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.jAccy=null,zpp_nape.constraint.ZPP_LineJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_LineJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_LineJoint.prototype.biasx=null,zpp_nape.constraint.ZPP_LineJoint.prototype.biasy=null,zpp_nape.constraint.ZPP_LineJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_LineJoint.prototype.copy=function(dict,todo){var _this=this.outer_zn;null==_this.zpp_inner_zn.wrap_a1&&_this.zpp_inner_zn.setup_a1();var ret=_this.zpp_inner_zn.wrap_a1,_this1=this.outer_zn;null==_this1.zpp_inner_zn.wrap_a2&&_this1.zpp_inner_zn.setup_a2();var ret1=_this1.zpp_inner_zn.wrap_a2,_this2=this.outer_zn;null==_this2.zpp_inner_zn.wrap_n&&_this2.zpp_inner_zn.setup_n();var ret2=new nape.constraint.LineJoint(null,null,ret,ret1,_this2.zpp_inner_zn.wrap_n,this.jointMin,this.jointMax);if(this.copyto(ret2),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret2.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret2.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret2.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret2.zpp_inner_zn.b2=b3.zpp_inner})))}return ret2},zpp_nape.constraint.ZPP_LineJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new js._Boot.HaxeError("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: DistanceJoint direction must be non-degenerate");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic")},zpp_nape.constraint.ZPP_LineJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_LineJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_LineJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_LineJoint.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_LineJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.equal=this.jointMin==this.jointMax,this.stepped=!0,this.validate_norm(),this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var dx=0,dy=0,Cx=0,Cy=0;dx=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx,Cx=(dy=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely)*this.nrelx-dx*this.nrely,Cy=this.nrelx*dx+this.nrely*dy,this.equal?(Cy-=this.jointMin,this.scale=1):Cy>this.jointMax?(Cy-=this.jointMax,this.scale=1):Cy<this.jointMin?(Cy=this.jointMin-Cy,this.scale=-1):(Cy=0,this.scale=0);var drx=0,dry=0;drx=dx+this.a1relx,dry=dy+this.a1rely,this.dot1=this.nrelx*drx+this.nrely*dry,this.cx1=dry*this.nrelx-drx*this.nrely,this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely,this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely,this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia,this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia),this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb,flag;if(det!=det)this.kMassa=this.kMassb=this.kMassc=0,flag=3;else if(0==det){var flag1=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,flag1|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,flag1|=2),this.kMassb=0,flag=flag1}else{det=1/det;var t=this.kMassc*det;this.kMassc=this.kMassa*det,this.kMassa=t,this.kMassb*=-det,flag=0}if(0!=(1&flag)&&(this.jAccx=0),0!=(2&flag)&&(this.jAccy=0),this.stiff)this.gamma=0,this.biasx=0,this.biasy=0;else{if(this.breakUnderError&&Cx*Cx+Cy*Cy>this.maxError*this.maxError)return!0;var biasCoef,omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma,this.gamma*=ig;var X=ig;this.kMassa*=X,this.kMassb*=X,this.kMassc*=X,this.biasx=Cx,this.biasy=Cy;var t1=-biasCoef;this.biasx*=t1,this.biasy*=t1;var t2=this.maxError,ls=this.biasx*this.biasx+this.biasy*this.biasy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.biasx*=t3,this.biasy*=t3}}var t4=dtratio;return this.jAccx*=t4,this.jAccy*=t4,this.jMax=this.maxForce*dt,!1},zpp_nape.constraint.ZPP_LineJoint.prototype.warmStart=function(){var J2x=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,J2y=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,t=this.b1.imass;this.b1.velx-=J2x*t,this.b1.vely-=J2y*t;var t1=this.b2.imass;this.b2.velx+=J2x*t1,this.b2.vely+=J2y*t1,this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},zpp_nape.constraint.ZPP_LineJoint.prototype.applyImpulseVel=function(){var Ex=0,Ey=0,dvx=0,dvy=0;dvx=this.b2.velx-this.b1.velx,dvy=this.b2.vely-this.b1.vely,dvx+=this.b2.kinvelx-this.b1.kinvelx,Ex=(dvy+=this.b2.kinvely-this.b1.kinvely)*this.nrelx-dvx*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1,Ey=this.scale*(this.nrelx*dvx+this.nrely*dvy-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var Jx=0,Jy=0;Jx=this.biasx-Ex,Jy=this.biasy-Ey;var t=this.kMassa*Jx+this.kMassb*Jy;Jy=this.kMassb*Jx+this.kMassc*Jy,Jx=t;var t1=this.gamma;Jx-=this.jAccx*t1,Jy-=this.jAccy*t1;var jOldx=0,jOldy=0;jOldx=this.jAccx,jOldy=this.jAccy;var t2=1;if(this.jAccx+=1*Jx,this.jAccy+=1*Jy,this.jAccy>0&&(this.jAccy=0),this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var t3=this.jMax,ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(ls>t3*t3){var t4=t3*(1/Math.sqrt(ls));this.jAccx*=t4,this.jAccy*=t4}}Jx=this.jAccx-jOldx,Jy=this.jAccy-jOldy;var J2x=this.scale*this.nrelx*Jy-this.nrely*Jx,J2y=this.nrelx*Jx+this.scale*this.nrely*Jy,t5=this.b1.imass;this.b1.velx-=J2x*t5,this.b1.vely-=J2y*t5;var t6=this.b2.imass;return this.b2.velx+=J2x*t6,this.b2.vely+=J2y*t6,this.b1.angvel+=(this.scale*this.cx1*Jy-this.dot1*Jx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*Jx-this.scale*this.cx2*Jy)*this.b2.iinertia,!1},zpp_nape.constraint.ZPP_LineJoint.prototype.applyImpulsePos=function(){var nx=0,ny=0;nx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,ny=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var r1x=0,r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0,r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var dx=0,dy=0,scale,Ex=0,Ey=0;if(dx=this.b2.posx+r2x-this.b1.posx-r1x,Ex=(dy=this.b2.posy+r2y-this.b1.posy-r1y)*nx-dx*ny,Ey=nx*dx+ny*dy,this.equal?(Ey-=this.jointMin,scale=1):Ey>this.jointMax?(Ey-=this.jointMax,scale=1):Ey<this.jointMin?(Ey=this.jointMin-Ey,scale=-1):(Ey=0,scale=0),this.breakUnderError&&Ex*Ex+Ey*Ey>this.maxError*this.maxError)return!0;if(Ex*Ex+Ey*Ey<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop)return!1;var Jx=0,Jy=0,t=.5,dot1,dot2,cx1,cx2;if((Ex*=t)*Ex+(Ey*=t)*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape.Config.epsilon){var Jx1=(k=.8/k)*(ny*Ex-scale*nx*Ey),Jy1=k*(nx*Ex*scale-ny*Ex),t1=this.b1.imass;this.b1.posx-=Jx1*t1,this.b1.posy-=Jy1*t1;var t2=this.b2.imass;this.b2.posx+=Jx1*t2,this.b2.posy+=Jy1*t2,dx=this.b2.posx+r2x-this.b1.posx-r1x,Ex=(dy=this.b2.posy+r2y-this.b1.posy-r1y)*nx-dx*ny,Ey=nx*dx+ny*dy,this.equal?(Ey-=this.jointMin,scale=1):Ey>this.jointMax?(Ey-=this.jointMax,scale=1):Ey<this.jointMin?(Ey=this.jointMin-Ey,scale=-1):(Ey=0,scale=0);var t3=.5;Ex*=.5,Ey*=.5}}var Ka=0,Kb=0,Kc=0,drx=0,dry=0;dot1=nx*(drx=dx+r1x)+ny*(dry=dy+r1y),cx1=dry*nx-drx*ny,dot2=nx*r2x+ny*r2y,cx2=r2y*nx-r2x*ny,Ka=this.b1.smass+this.b2.smass+dot1*dot1*this.b1.sinertia+dot2*dot2*this.b2.sinertia,Kb=-scale*(dot1*cx1*this.b1.sinertia+dot2*cx2*this.b2.sinertia),Jx=-Ex,Jy=-Ey;var det=Ka*(Kc=scale*scale*(this.b1.smass+this.b2.smass+cx1*cx1*this.b1.sinertia+cx2*cx2*this.b2.sinertia))-Kb*Kb;if(det!=det)Jx=Jy=0;else if(0==det)0!=Ka?Jx/=Ka:Jx=0,0!=Kc?Jy/=Kc:Jy=0;else{var t4=(det=1/det)*(Kc*Jx-Kb*Jy);Jy=det*(Ka*Jy-Kb*Jx),Jx=t4}Jy>0&&(Jy=0);var J2x=scale*nx*Jy-ny*Jx,J2y=nx*Jx+scale*ny*Jy,t5=this.b1.imass;this.b1.posx-=J2x*t5,this.b1.posy-=J2y*t5;var t6=this.b2.imass;this.b2.posx+=J2x*t6,this.b2.posy+=J2y*t6;var _this=this.b1,dr=(scale*cx1*Jy-dot1*Jx)*this.b1.iinertia;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx1=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx1}var _this1=this.b2,dr1=(dot2*Jx-scale*cx2*Jy)*this.b2.iinertia;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx2=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx2}return!1},zpp_nape.constraint.ZPP_LineJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_LineJoint.prototype.__class__=zpp_nape.constraint.ZPP_LineJoint,zpp_nape.constraint.ZPP_MotorJoint=$hxClasses["zpp_nape.constraint.ZPP_MotorJoint"]=function(){this.stepped=!1,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.rate=0,this.ratio=0,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.jAcc=0,this.stepped=!1,this.__velocity=!0},zpp_nape.constraint.ZPP_MotorJoint.__name__=["zpp_nape","constraint","ZPP_MotorJoint"],zpp_nape.constraint.ZPP_MotorJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_MotorJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_MotorJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.ratio=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.rate=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.bodyImpulse=function(b){return this.stepped?b==this.b1?nape.geom.Vec3.get(0,0,-this.jAcc):nape.geom.Vec3.get(0,0,this.ratio*this.jAcc):nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_MotorJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_MotorJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_MotorJoint.prototype.b1=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.b2=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.kMass=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.jAcc=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_MotorJoint.prototype.copy=function(dict,todo){var ret=new nape.constraint.MotorJoint(null,null,this.rate,this.ratio);if(this.copyto(ret),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret.zpp_inner_zn.b2=b3.zpp_inner})))}return ret},zpp_nape.constraint.ZPP_MotorJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic")},zpp_nape.constraint.ZPP_MotorJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_MotorJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_MotorJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_MotorJoint.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_MotorJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;return this.pre_dt=dt,this.stepped=!0,this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,this.kMass=1/this.kMass,this.jAcc*=dtratio,this.jMax=this.maxForce*dt,!1},zpp_nape.constraint.ZPP_MotorJoint.prototype.warmStart=function(){this.b1.angvel-=this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},zpp_nape.constraint.ZPP_MotorJoint.prototype.applyImpulseVel=function(){var E=this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate,j=-this.kMass*E,jOld=this.jAcc;if(this.jAcc+=j,this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);return j=this.jAcc-jOld,this.b1.angvel-=this.b1.iinertia*j,this.b2.angvel+=this.ratio*this.b2.iinertia*j,!1},zpp_nape.constraint.ZPP_MotorJoint.prototype.applyImpulsePos=function(){return!1},zpp_nape.constraint.ZPP_MotorJoint.prototype.__class__=zpp_nape.constraint.ZPP_MotorJoint,zpp_nape.constraint.ZPP_PivotJoint=$hxClasses["zpp_nape.constraint.ZPP_PivotJoint"]=function(){this.stepped=!1,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.stepped=!1,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0},zpp_nape.constraint.ZPP_PivotJoint.__name__=["zpp_nape","constraint","ZPP_PivotJoint"],zpp_nape.constraint.ZPP_PivotJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_PivotJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_PivotJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.bodyImpulse=function(b){return this.stepped?b==this.b1?nape.geom.Vec3.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):nape.geom.Vec3.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_PivotJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_PivotJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_PivotJoint.prototype.b1=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a1localx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a1localy=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a1relx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a1rely=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},zpp_nape.constraint.ZPP_PivotJoint.prototype.invalidate_a1=function(x){this.immutable_midstep("Constraint::a1"),this.a1localx=x.x,this.a1localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PivotJoint.prototype.setup_a1=function(){var x=this.a1localx,y=this.a1localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a1=ret,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},zpp_nape.constraint.ZPP_PivotJoint.prototype.wrap_a1=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.b2=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a2localx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a2localy=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a2relx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.a2rely=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},zpp_nape.constraint.ZPP_PivotJoint.prototype.invalidate_a2=function(x){this.immutable_midstep("Constraint::a2"),this.a2localx=x.x,this.a2localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PivotJoint.prototype.setup_a2=function(){var x=this.a2localx,y=this.a2localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a2=ret,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},zpp_nape.constraint.ZPP_PivotJoint.prototype.wrap_a2=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.kMassa=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.kMassb=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.kMassc=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.jAccx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.jAccy=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.biasx=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.biasy=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_PivotJoint.prototype.copy=function(dict,todo){var _this=this.outer_zn;null==_this.zpp_inner_zn.wrap_a1&&_this.zpp_inner_zn.setup_a1();var ret=_this.zpp_inner_zn.wrap_a1,_this1=this.outer_zn;null==_this1.zpp_inner_zn.wrap_a2&&_this1.zpp_inner_zn.setup_a2();var ret1=new nape.constraint.PivotJoint(null,null,ret,_this1.zpp_inner_zn.wrap_a2);if(this.copyto(ret1),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret1.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret1.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret1.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret1.zpp_inner_zn.b2=b3.zpp_inner})))}return ret1},zpp_nape.constraint.ZPP_PivotJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},zpp_nape.constraint.ZPP_PivotJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_PivotJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_PivotJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_PivotJoint.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_PivotJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var m=this.b1.smass+this.b2.smass;if(this.kMassa=m,this.kMassb=0,this.kMassc=m,0!=this.b1.sinertia){var X=this.a1relx*this.b1.sinertia,Y=this.a1rely*this.b1.sinertia;this.kMassa+=Y*this.a1rely,this.kMassb+=-Y*this.a1relx,this.kMassc+=X*this.a1relx}if(0!=this.b2.sinertia){var X1=this.a2relx*this.b2.sinertia,Y1=this.a2rely*this.b2.sinertia;this.kMassa+=Y1*this.a2rely,this.kMassb+=-Y1*this.a2relx,this.kMassc+=X1*this.a2relx}var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb,flag;if(det!=det)this.kMassa=this.kMassb=this.kMassc=0,flag=3;else if(0==det){var flag1=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,flag1|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,flag1|=2),this.kMassb=0,flag=flag1}else{det=1/det;var t=this.kMassc*det;this.kMassc=this.kMassa*det,this.kMassa=t,this.kMassb*=-det,flag=0}if(0!=(1&flag)&&(this.jAccx=0),0!=(2&flag)&&(this.jAccy=0),this.stiff)this.biasx=0,this.biasy=0,this.gamma=0;else{var biasCoef,omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma,this.gamma*=ig;var X2=ig;if(this.kMassa*=X2,this.kMassb*=X2,this.kMassc*=X2,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;var t1=-biasCoef;this.biasx*=t1,this.biasy*=t1;var t2=this.maxError,ls=this.biasx*this.biasx+this.biasy*this.biasy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.biasx*=t3,this.biasy*=t3}}var t4=dtratio;return this.jAccx*=t4,this.jAccy*=t4,this.jMax=this.maxForce*dt,!1},zpp_nape.constraint.ZPP_PivotJoint.prototype.warmStart=function(){var t=this.b1.imass;this.b1.velx-=this.jAccx*t,this.b1.vely-=this.jAccy*t;var t1=this.b2.imass;this.b2.velx+=this.jAccx*t1,this.b2.vely+=this.jAccy*t1,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},zpp_nape.constraint.ZPP_PivotJoint.prototype.applyImpulseVel=function(){var Ex=0,Ey=0;Ex=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),Ey=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var Jx=0,Jy=0;Jx=this.biasx-Ex,Jy=this.biasy-Ey;var t=this.kMassa*Jx+this.kMassb*Jy;Jy=this.kMassb*Jx+this.kMassc*Jy,Jx=t;var t1=this.gamma;Jx-=this.jAccx*t1,Jy-=this.jAccy*t1;var jOldx=0,jOldy=0;jOldx=this.jAccx,jOldy=this.jAccy;var t2=1;if(this.jAccx+=1*Jx,this.jAccy+=1*Jy,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var t3=this.jMax,ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(ls>t3*t3){var t4=t3*(1/Math.sqrt(ls));this.jAccx*=t4,this.jAccy*=t4}}Jx=this.jAccx-jOldx,Jy=this.jAccy-jOldy;var t5=this.b1.imass;this.b1.velx-=Jx*t5,this.b1.vely-=Jy*t5;var t6=this.b2.imass;return this.b2.velx+=Jx*t6,this.b2.vely+=Jy*t6,this.b1.angvel-=(Jy*this.a1relx-Jx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(Jy*this.a2relx-Jx*this.a2rely)*this.b2.iinertia,!1},zpp_nape.constraint.ZPP_PivotJoint.prototype.applyImpulsePos=function(){var r1x=0,r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0,r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var Ex=0,Ey=0;if(Ex=this.b2.posx+r2x-(this.b1.posx+r1x),Ey=this.b2.posy+r2y-(this.b1.posy+r1y),this.breakUnderError&&Ex*Ex+Ey*Ey>this.maxError*this.maxError)return!0;if(Ex*Ex+Ey*Ey<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop)return!1;var t=.5,Jx=0,Jy=0;if((Ex*=t)*Ex+(Ey*=t)*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape.Config.epsilon){var t1=20,ls=(Jx=-Ex*(k=.75/k))*Jx+(Jy=-Ey*k)*Jy;if(ls>400){var t2=1/Math.sqrt(ls)*20;Jx*=t2,Jy*=t2}var t3=this.b1.imass;this.b1.posx-=Jx*t3,this.b1.posy-=Jy*t3;var t4=this.b2.imass;this.b2.posx+=Jx*t4,this.b2.posy+=Jy*t4,Ex=this.b2.posx+r2x-(this.b1.posx+r1x),Ey=this.b2.posy+r2y-(this.b1.posy+r1y);var t5=.5;Ex*=.5,Ey*=.5}}var Ka=0,Kb=0,Kc=0,m=this.b1.smass+this.b2.smass;if(Ka=m,Kb=0,Kc=m,0!=this.b1.sinertia){var X=r1x*this.b1.sinertia,Y=r1y*this.b1.sinertia;Ka+=Y*r1y,Kb+=-Y*r1x,Kc+=X*r1x}if(0!=this.b2.sinertia){var X1=r2x*this.b2.sinertia,Y1=r2y*this.b2.sinertia;Ka+=Y1*r2y,Kb+=-Y1*r2x,Kc+=X1*r2x}var t6=6,ls1=(Jx=-Ex)*Jx+(Jy=-Ey)*Jy;if(ls1>36){var t7=1/Math.sqrt(ls1)*6;Jx*=t7,Jy*=t7}var det=Ka*Kc-Kb*Kb;if(det!=det)Jx=Jy=0;else if(0==det)0!=Ka?Jx/=Ka:Jx=0,0!=Kc?Jy/=Kc:Jy=0;else{var t8=(det=1/det)*(Kc*Jx-Kb*Jy);Jy=det*(Ka*Jy-Kb*Jx),Jx=t8}var t9=this.b1.imass;this.b1.posx-=Jx*t9,this.b1.posy-=Jy*t9;var t10=this.b2.imass;this.b2.posx+=Jx*t10,this.b2.posy+=Jy*t10;var _this=this.b1,dr=-(Jy*r1x-Jx*r1y)*this.b1.iinertia;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m1=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m1;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m1,_this.axisx=nx}var _this1=this.b2,dr1=(Jy*r2x-Jx*r2y)*this.b2.iinertia;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m2=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m2;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m2,_this1.axisx=nx1}return!1},zpp_nape.constraint.ZPP_PivotJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_PivotJoint.prototype.__class__=zpp_nape.constraint.ZPP_PivotJoint,zpp_nape.constraint.ZPP_PulleyJoint=$hxClasses["zpp_nape.constraint.ZPP_PulleyJoint"]=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a4=null,this.a4rely=0,this.a4relx=0,this.a4localy=0,this.a4localx=0,this.b4=null,this.wrap_a3=null,this.a3rely=0,this.a3relx=0,this.a3localy=0,this.a3localx=0,this.b3=null,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx4=0,this.cx3=0,this.cx2=0,this.cx1=0,this.n34y=0,this.n34x=0,this.n12y=0,this.n12x=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=1,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.a3localx=0,this.a3localy=0,this.a3relx=0,this.a3rely=0,this.a4localx=0,this.a4localy=0,this.a4relx=0,this.a4rely=0,this.n12x=1,this.n12y=0,this.n34x=1,this.n34y=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=this.cx3=this.cx4=0},zpp_nape.constraint.ZPP_PulleyJoint.__name__=["zpp_nape","constraint","ZPP_PulleyJoint"],zpp_nape.constraint.ZPP_PulleyJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_PulleyJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_PulleyJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.ratio=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.jointMin=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.jointMax=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.slack=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.equal=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.is_slack=function(){var slack;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var n12x=0,n12y=0,n34x=0,n34y=0,t12x=0,t12y=0,t34x=0,t34y=0;t12x=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),t12y=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),t34x=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),t34y=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var C12=Math.sqrt(t12x*t12x+t12y*t12y),C34=Math.sqrt(t34x*t34x+t34y*t34y);if(0!=C12){var t=1/C12;n12x=t12x*t,n12y=t12y*t}if(0!=C34){var t1=1/C34;n34x=t34x*t1,n34y=t34y*t1;var t2=this.ratio;n34x*=t2,n34y*=t2}else{var t3=this.ratio/Math.sqrt(n34x*n34x+n34y*n34y);n34x*=t3,n34y*=t3}var C=C12+this.ratio*C34;return this.equal?(C-=this.jointMax,slack=!1):C<this.jointMin?(C=this.jointMin-C,n12x=-n12x,n12y=-n12y,n34x=-n34x,n34y=-n34y,slack=!1):C>this.jointMax?(C-=this.jointMax,slack=!1):(n12x=0,n12y=0,n34x=0,n34y=0,C=0,slack=!0),slack},zpp_nape.constraint.ZPP_PulleyJoint.prototype.n12x=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.n12y=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.n34x=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.n34y=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.cx1=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.cx2=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.cx3=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.cx4=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.bodyImpulse=function(b){if(this.stepped){var ret=nape.geom.Vec3.get();if(b==this.b1){var _g=ret;if(null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this=_g.zpp_inner;if(null!=_this._validate&&_this._validate(),null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g.zpp_inner.x=_g.zpp_inner.x-this.jAcc*this.n12x,null!=_g&&_g.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=_g.zpp_inner;null!=_this1._validate&&_this1._validate();var _g1=ret;if(null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this2=_g1.zpp_inner;if(null!=_this2._validate&&_this2._validate(),null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g1.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g1.zpp_inner.y=_g1.zpp_inner.y-this.jAcc*this.n12y,null!=_g1&&_g1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=_g1.zpp_inner;null!=_this3._validate&&_this3._validate();var _g2=ret;if(null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this4=_g2.zpp_inner;if(null!=_this4._validate&&_this4._validate(),null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g2.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g2.zpp_inner.z=_g2.zpp_inner.z-this.cx1*this.jAcc,null!=_g2&&_g2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=_g2.zpp_inner;null!=_this5._validate&&_this5._validate()}if(b==this.b2){var _g3=ret;if(null!=_g3&&_g3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this6=_g3.zpp_inner;if(null!=_this6._validate&&_this6._validate(),null!=_g3&&_g3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g3.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g3.zpp_inner.x=_g3.zpp_inner.x+this.jAcc*this.n12x,null!=_g3&&_g3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this7=_g3.zpp_inner;null!=_this7._validate&&_this7._validate();var _g4=ret;if(null!=_g4&&_g4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this8=_g4.zpp_inner;if(null!=_this8._validate&&_this8._validate(),null!=_g4&&_g4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g4.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g4.zpp_inner.y=_g4.zpp_inner.y+this.jAcc*this.n12y,null!=_g4&&_g4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this9=_g4.zpp_inner;null!=_this9._validate&&_this9._validate();var _g5=ret;if(null!=_g5&&_g5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this10=_g5.zpp_inner;if(null!=_this10._validate&&_this10._validate(),null!=_g5&&_g5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g5.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g5.zpp_inner.z=_g5.zpp_inner.z+this.cx2*this.jAcc,null!=_g5&&_g5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this11=_g5.zpp_inner;null!=_this11._validate&&_this11._validate()}if(b==this.b3){var _g6=ret;if(null!=_g6&&_g6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this12=_g6.zpp_inner;if(null!=_this12._validate&&_this12._validate(),null!=_g6&&_g6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g6.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g6.zpp_inner.x=_g6.zpp_inner.x-this.jAcc*this.n34x,null!=_g6&&_g6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this13=_g6.zpp_inner;null!=_this13._validate&&_this13._validate();var _g7=ret;if(null!=_g7&&_g7.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this14=_g7.zpp_inner;if(null!=_this14._validate&&_this14._validate(),null!=_g7&&_g7.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g7.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g7.zpp_inner.y=_g7.zpp_inner.y-this.jAcc*this.n34y,null!=_g7&&_g7.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this15=_g7.zpp_inner;null!=_this15._validate&&_this15._validate();var _g8=ret;if(null!=_g8&&_g8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this16=_g8.zpp_inner;if(null!=_this16._validate&&_this16._validate(),null!=_g8&&_g8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g8.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g8.zpp_inner.z=_g8.zpp_inner.z-this.cx3*this.jAcc,null!=_g8&&_g8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this17=_g8.zpp_inner;null!=_this17._validate&&_this17._validate()}if(b==this.b4){var _g9=ret;if(null!=_g9&&_g9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this18=_g9.zpp_inner;if(null!=_this18._validate&&_this18._validate(),null!=_g9&&_g9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g9.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g9.zpp_inner.x=_g9.zpp_inner.x+this.jAcc*this.n34x,null!=_g9&&_g9.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this19=_g9.zpp_inner;null!=_this19._validate&&_this19._validate();var _g10=ret;if(null!=_g10&&_g10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this20=_g10.zpp_inner;if(null!=_this20._validate&&_this20._validate(),null!=_g10&&_g10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g10.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g10.zpp_inner.y=_g10.zpp_inner.y+this.jAcc*this.n34y,null!=_g10&&_g10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this21=_g10.zpp_inner;null!=_this21._validate&&_this21._validate();var _g11=ret;if(null!=_g11&&_g11.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this22=_g11.zpp_inner;if(null!=_this22._validate&&_this22._validate(),null!=_g11&&_g11.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");if(_g11.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec3 is immutable");if(_g11.zpp_inner.z=_g11.zpp_inner.z+this.cx4*this.jAcc,null!=_g11&&_g11.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this23=_g11.zpp_inner;null!=_this23._validate&&_this23._validate()}return ret}return nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.b1=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a1localx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a1localy=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a1relx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a1rely=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},zpp_nape.constraint.ZPP_PulleyJoint.prototype.invalidate_a1=function(x){this.immutable_midstep("Constraint::a1"),this.a1localx=x.x,this.a1localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PulleyJoint.prototype.setup_a1=function(){var x=this.a1localx,y=this.a1localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a1=ret,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.wrap_a1=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.b2=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a2localx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a2localy=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a2relx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a2rely=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},zpp_nape.constraint.ZPP_PulleyJoint.prototype.invalidate_a2=function(x){this.immutable_midstep("Constraint::a2"),this.a2localx=x.x,this.a2localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PulleyJoint.prototype.setup_a2=function(){var x=this.a2localx,y=this.a2localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a2=ret,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.wrap_a2=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.b3=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a3localx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a3localy=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a3relx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a3rely=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.validate_a3=function(){this.wrap_a3.zpp_inner.x=this.a3localx,this.wrap_a3.zpp_inner.y=this.a3localy},zpp_nape.constraint.ZPP_PulleyJoint.prototype.invalidate_a3=function(x){this.immutable_midstep("Constraint::a3"),this.a3localx=x.x,this.a3localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PulleyJoint.prototype.setup_a3=function(){var x=this.a3localx,y=this.a3localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a3=ret,this.wrap_a3.zpp_inner._inuse=!0,this.wrap_a3.zpp_inner._validate=$bind(this,this.validate_a3),this.wrap_a3.zpp_inner._invalidate=$bind(this,this.invalidate_a3)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.wrap_a3=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.b4=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a4localx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a4localy=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a4relx=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.a4rely=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.validate_a4=function(){this.wrap_a4.zpp_inner.x=this.a4localx,this.wrap_a4.zpp_inner.y=this.a4localy},zpp_nape.constraint.ZPP_PulleyJoint.prototype.invalidate_a4=function(x){this.immutable_midstep("Constraint::a4"),this.a4localx=x.x,this.a4localy=x.y,this.wake()},zpp_nape.constraint.ZPP_PulleyJoint.prototype.setup_a4=function(){var x=this.a4localx,y=this.a4localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a4=ret,this.wrap_a4.zpp_inner._inuse=!0,this.wrap_a4.zpp_inner._validate=$bind(this,this.validate_a4),this.wrap_a4.zpp_inner._invalidate=$bind(this,this.invalidate_a4)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.wrap_a4=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.kMass=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.jAcc=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.bias=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_PulleyJoint.prototype.copy=function(dict,todo){var _this=this.outer_zn;null==_this.zpp_inner_zn.wrap_a1&&_this.zpp_inner_zn.setup_a1();var ret=_this.zpp_inner_zn.wrap_a1,_this1=this.outer_zn;null==_this1.zpp_inner_zn.wrap_a2&&_this1.zpp_inner_zn.setup_a2();var ret1=_this1.zpp_inner_zn.wrap_a2,_this2=this.outer_zn;null==_this2.zpp_inner_zn.wrap_a3&&_this2.zpp_inner_zn.setup_a3();var ret2=_this2.zpp_inner_zn.wrap_a3,_this3=this.outer_zn;null==_this3.zpp_inner_zn.wrap_a4&&_this3.zpp_inner_zn.setup_a4();var ret3=new nape.constraint.PulleyJoint(null,null,null,null,ret,ret1,ret2,_this3.zpp_inner_zn.wrap_a4,this.jointMin,this.jointMax,this.ratio);if(this.copyto(ret3),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret3.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret3.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret3.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret3.zpp_inner_zn.b2=b3.zpp_inner})))}if(null!=dict&&null!=this.b3){for(var b4=null,_g2=0;_g2<dict.length;){var idc2=dict[_g2];if(++_g2,idc2.id==this.b3.id){b4=idc2.bc;break}}null!=b4?ret3.zpp_inner_zn.b3=b4.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b3.id,(function(b5){ret3.zpp_inner_zn.b3=b5.zpp_inner})))}if(null!=dict&&null!=this.b4){for(var b6=null,_g3=0;_g3<dict.length;){var idc3=dict[_g3];if(++_g3,idc3.id==this.b4.id){b6=idc3.bc;break}}null!=b6?ret3.zpp_inner_zn.b4=b6.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b4.id,(function(b7){ret3.zpp_inner_zn.b4=b7.zpp_inner})))}return ret3},zpp_nape.constraint.ZPP_PulleyJoint.prototype.validate=function(){if(null==this.b1||null==this.b2||null==this.b3||null==this.b4)throw new js._Boot.HaxeError("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw new js._Boot.HaxeError("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new js._Boot.HaxeError("Error: PulleyJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(2!=this.b3.type&&2!=this.b4.type)throw new js._Boot.HaxeError("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},zpp_nape.constraint.ZPP_PulleyJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake(),null!=this.b3&&2==this.b3.type&&this.b3.wake(),null!=this.b4&&2==this.b4.type&&this.b4.wake()},zpp_nape.constraint.ZPP_PulleyJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}if(2==this.b3.type){var xr2,yr2;if(this.b3.component==this.b3.component.parent)xr2=this.b3.component;else{for(var obj4=this.b3.component,stack4=null;obj4!=obj4.parent;){var nxt8=obj4.parent;obj4.parent=stack4,stack4=obj4,obj4=nxt8}for(;null!=stack4;){var nxt9=stack4.parent;stack4.parent=obj4,stack4=nxt9}xr2=obj4}if(this.component==this.component.parent)yr2=this.component;else{for(var obj5=this.component,stack5=null;obj5!=obj5.parent;){var nxt10=obj5.parent;obj5.parent=stack5,stack5=obj5,obj5=nxt10}for(;null!=stack5;){var nxt11=stack5.parent;stack5.parent=obj5,stack5=nxt11}yr2=obj5}xr2!=yr2&&(xr2.rank<yr2.rank?xr2.parent=yr2:xr2.rank>yr2.rank?yr2.parent=xr2:(yr2.parent=xr2,xr2.rank++))}if(2==this.b4.type){var xr3,yr3;if(this.b4.component==this.b4.component.parent)xr3=this.b4.component;else{for(var obj6=this.b4.component,stack6=null;obj6!=obj6.parent;){var nxt12=obj6.parent;obj6.parent=stack6,stack6=obj6,obj6=nxt12}for(;null!=stack6;){var nxt13=stack6.parent;stack6.parent=obj6,stack6=nxt13}xr3=obj6}if(this.component==this.component.parent)yr3=this.component;else{for(var obj7=this.component,stack7=null;obj7!=obj7.parent;){var nxt14=obj7.parent;obj7.parent=stack7,stack7=obj7,obj7=nxt14}for(;null!=stack7;){var nxt15=stack7.parent;stack7.parent=obj7,stack7=nxt15}yr3=obj7}xr3!=yr3&&(xr3.rank<yr3.rank?xr3.parent=yr3:xr3.rank>yr3.rank?yr3.parent=xr3:(yr3.parent=xr3,xr3.rank++))}},zpp_nape.constraint.ZPP_PulleyJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&(this.b2.id==di||this.b3.id==di||this.b4.id==di)||this.b2.id==id&&(this.b3.id==di||this.b4.id==di||this.b1.id==di)||this.b3.id==id&&(this.b4.id==di||this.b1.id==di||this.b2.id==di)||this.b4.id==id&&(this.b1.id==di||this.b2.id==di||this.b3.id==di)},zpp_nape.constraint.ZPP_PulleyJoint.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_PulleyJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var t12x=0,t12y=0,t34x=0,t34y=0;t12x=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),t12y=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),t34x=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),t34y=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var C12=Math.sqrt(t12x*t12x+t12y*t12y),C34=Math.sqrt(t34x*t34x+t34y*t34y);if(0!=C12){var t=1/C12;this.n12x=t12x*t,this.n12y=t12y*t}if(0!=C34){var t1=1/C34;this.n34x=t34x*t1,this.n34y=t34y*t1;var t2=this.ratio;this.n34x*=t2,this.n34y*=t2}else{var t3=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=t3,this.n34y*=t3}var C=C12+this.ratio*C34;this.equal?(C-=this.jointMax,this.slack=!1):C<this.jointMin?(C=this.jointMin-C,this.n12x=-this.n12x,this.n12y=-this.n12y,this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):C>this.jointMax?(C-=this.jointMax,this.slack=!1):(this.n12x=0,this.n12y=0,this.n34x=0,this.n34y=0,C=0,this.slack=!0);var C1=C;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely,this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely,this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely,this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var ratioSq=this.ratio*this.ratio,K=this.b1.smass+this.b2.smass+ratioSq*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4&&(K-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)),this.b1==this.b3&&(K+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)),this.b2==this.b3&&(K-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)),this.b2==this.b4&&(K+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)),this.kMass=K,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&C1*C1>this.maxError*this.maxError)return!0;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma),biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig,this.kMass*=ig,this.bias=-C1*biasCoef,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=dtratio,this.jMax=this.maxForce*dt}return!1},zpp_nape.constraint.ZPP_PulleyJoint.prototype.warmStart=function(){if(!this.slack){var t=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*t,this.b1.vely-=this.n12y*t;var t1=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t1,this.b2.vely+=this.n12y*t1;var t2=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*t2,this.b3.vely-=this.n34y*t2;var t3=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*t3,this.b4.vely+=this.n34y*t3,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc,this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc,this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},zpp_nape.constraint.ZPP_PulleyJoint.prototype.applyImpulseVel=function(){if(this.slack)return!1;var E=this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3,j=this.kMass*(this.bias-E)-this.jAcc*this.gamma,jOld=this.jAcc;if(this.jAcc+=j,!this.equal&&this.jAcc>0&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),j=this.jAcc-jOld;var t=this.b1.imass*j;this.b1.velx-=this.n12x*t,this.b1.vely-=this.n12y*t;var t1=this.b2.imass*j;this.b2.velx+=this.n12x*t1,this.b2.vely+=this.n12y*t1;var t2=this.b3.imass*j;this.b3.velx-=this.n34x*t2,this.b3.vely-=this.n34y*t2;var t3=this.b4.imass*j;return this.b4.velx+=this.n34x*t3,this.b4.vely+=this.n34y*t3,this.b1.angvel-=this.cx1*this.b1.iinertia*j,this.b2.angvel+=this.cx2*this.b2.iinertia*j,this.b3.angvel-=this.cx3*this.b3.iinertia*j,this.b4.angvel+=this.cx4*this.b4.iinertia*j,!1},zpp_nape.constraint.ZPP_PulleyJoint.prototype.applyImpulsePos=function(){var j,r1x=0,r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0,r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r3x=0,r3y=0;r3x=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,r3y=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var r4x=0,r4y=0,slack;r4x=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,r4y=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var n12x=0,n12y=0,n34x=0,n34y=0;n12x=this.n12x,n12y=this.n12y,n34x=this.n34x,n34y=this.n34y;var t12x=0,t12y=0,t34x=0,t34y=0;t12x=this.b2.posx+r2x-(this.b1.posx+r1x),t12y=this.b2.posy+r2y-(this.b1.posy+r1y),t34x=this.b4.posx+r4x-(this.b3.posx+r3x),t34y=this.b4.posy+r4y-(this.b3.posy+r3y);var C12=Math.sqrt(t12x*t12x+t12y*t12y),C34=Math.sqrt(t34x*t34x+t34y*t34y);if(0!=C12){var t=1/C12;n12x=t12x*t,n12y=t12y*t}if(0!=C34){var t1=1/C34;n34x=t34x*t1,n34y=t34y*t1;var t2=this.ratio;n34x*=t2,n34y*=t2}else{var t3=this.ratio/Math.sqrt(n34x*n34x+n34y*n34y);n34x*=t3,n34y*=t3}var C=C12+this.ratio*C34;this.equal?(C-=this.jointMax,slack=!1):C<this.jointMin?(C=this.jointMin-C,n12x=-n12x,n12y=-n12y,n34x=-n34x,n34y=-n34y,slack=!1):C>this.jointMax?(C-=this.jointMax,slack=!1):(n12x=0,n12y=0,n34x=0,n34y=0,C=0,slack=!0);var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError)return!0;if(E*E<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop)return!1;if((E*=.5)*E>6){var k=this.b1.smass+this.b2.smass;if(k>nape.Config.epsilon&&(j=-E*(k=.75/k),this.equal||j<0)){var t4=j*this.b1.imass;this.b1.posx-=n12x*t4,this.b1.posy-=n12y*t4;var t5=j*this.b2.imass;this.b2.posx+=n12x*t5,this.b2.posy+=n12y*t5;var t6=j*this.b3.imass;this.b3.posx-=n34x*t6,this.b3.posy-=n34y*t6;var t7=j*this.b4.imass;this.b4.posx+=n34x*t7,this.b4.posy+=n34y*t7;var t12x1=0,t12y1=0,t34x1=0,t34y1=0;t12x1=this.b2.posx+r2x-(this.b1.posx+r1x),t12y1=this.b2.posy+r2y-(this.b1.posy+r1y),t34x1=this.b4.posx+r4x-(this.b3.posx+r3x),t34y1=this.b4.posy+r4y-(this.b3.posy+r3y);var C121=Math.sqrt(t12x1*t12x1+t12y1*t12y1),C341=Math.sqrt(t34x1*t34x1+t34y1*t34y1);if(0!=C121){var t8=1/C121;n12x=t12x1*t8,n12y=t12y1*t8}if(0!=C341){var t9=1/C341;n34x=t34x1*t9,n34y=t34y1*t9;var t10=this.ratio;n34x*=t10,n34y*=t10}else{var t11=this.ratio/Math.sqrt(n34x*n34x+n34y*n34y);n34x*=t11,n34y*=t11}var C1=C121+this.ratio*C341;this.equal?(C1-=this.jointMax,slack=!1):C1<this.jointMin?(C1=this.jointMin-C1,n12x=-n12x,n12y=-n12y,n34x=-n34x,n34y=-n34y,slack=!1):C1>this.jointMax?(C1-=this.jointMax,slack=!1):(n12x=0,n12y=0,n34x=0,n34y=0,C1=0,slack=!0),E=C1,E*=.5}}var cx1=n12y*r1x-n12x*r1y,cx2=n12y*r2x-n12x*r2y,cx3=n34y*r3x-n34x*r3y,cx4=n34y*r4x-n34x*r4y,ratioSq=this.ratio*this.ratio,K=this.b1.smass+this.b2.smass+ratioSq*(this.b3.smass+this.b4.smass)+this.b1.sinertia*cx1*cx1+this.b2.sinertia*cx2*cx2+this.b3.sinertia*cx3*cx3+this.b4.sinertia*cx4*cx4;this.b1==this.b4&&(K-=2*((n12x*n34x+n12y*n34y)*this.b1.smass+cx1*cx4*this.b1.sinertia)),this.b1==this.b3&&(K+=2*((n12x*n34x+n12y*n34y)*this.b1.smass+cx1*cx3*this.b1.sinertia)),this.b2==this.b3&&(K-=2*((n12x*n34x+n12y*n34y)*this.b2.smass+cx2*cx3*this.b2.sinertia)),this.b2==this.b4&&(K+=2*((n12x*n34x+n12y*n34y)*this.b2.smass+cx2*cx4*this.b2.sinertia));var k1=K;if(0!=k1&&(k1=1/k1),j=-E*k1,this.equal||j<0){var t12=this.b1.imass*j;this.b1.posx-=n12x*t12,this.b1.posy-=n12y*t12;var t13=this.b2.imass*j;this.b2.posx+=n12x*t13,this.b2.posy+=n12y*t13;var t14=this.b3.imass*j;this.b3.posx-=n34x*t14,this.b3.posy-=n34y*t14;var t15=this.b4.imass*j;this.b4.posx+=n34x*t15,this.b4.posy+=n34y*t15;var _this=this.b1,dr=-cx1*this.b1.iinertia*j;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx}var _this1=this.b2,dr1=cx2*this.b2.iinertia*j;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx1}var _this2=this.b3,dr2=-cx3*this.b3.iinertia*j;if(_this2.rot+=dr2,dr2*dr2>1e-4)_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot);else{var d22=dr2*dr2,p2=1-.5*d22,m2=1-d22*d22/8,nx2=(p2*_this2.axisx+dr2*_this2.axisy)*m2;_this2.axisy=(p2*_this2.axisy-dr2*_this2.axisx)*m2,_this2.axisx=nx2}var _this3=this.b4,dr3=cx4*this.b4.iinertia*j;if(_this3.rot+=dr3,dr3*dr3>1e-4)_this3.axisx=Math.sin(_this3.rot),_this3.axisy=Math.cos(_this3.rot);else{var d23=dr3*dr3,p3=1-.5*d23,m3=1-d23*d23/8,nx3=(p3*_this3.axisx+dr3*_this3.axisy)*m3;_this3.axisy=(p3*_this3.axisy-dr3*_this3.axisx)*m3,_this3.axisx=nx3}}}return!1},zpp_nape.constraint.ZPP_PulleyJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_PulleyJoint.prototype.__class__=zpp_nape.constraint.ZPP_PulleyJoint,zpp_nape.constraint.ZPP_UserConstraint=$hxClasses["zpp_nape.constraint.ZPP_UserConstraint"]=function(dim,velonly){this.jOld=null,this.J=null,this.vec3=null,this.Keff=null,this.jMax=0,this.velonly=!1,this.gamma=0,this.soft=0,this.y=null,this.L=null,this.stepped=!1,this.bias=null,this.jAcc=null,this.dim=0,this.bodies=null,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.bodies=[],this.dim=dim,this.velonly=velonly,this.jAcc=[],this.bias=[],this.L=[],this.J=[],this.jOld=[],this.y=[],this.Keff=[],this.vec3=nape.geom.Vec3.get(0,0,0);for(var _g=0,_g1=dim;_g<_g1;){var i=_g++,tmp=this.bias[i]=this.J[i]=this.jOld[i]=this.y[i]=0;this.jAcc[i]=tmp;for(var _g2=0,_g11=dim;_g2<_g11;){var j=_g2++;this.L[i*dim+j]=0}}this.stepped=!1},zpp_nape.constraint.ZPP_UserConstraint.__name__=["zpp_nape","constraint","ZPP_UserConstraint"],zpp_nape.constraint.ZPP_UserConstraint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_UserConstraint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_UserConstraint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.bindVec2_invalidate=function(_){this.outer_zn.__invalidate()},zpp_nape.constraint.ZPP_UserConstraint.prototype.bodies=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.dim=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.jAcc=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.bias=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.addBody=function(b){for(var match=null,_g=0,_g1=this.bodies;_g<_g1.length;){var x=_g1[_g];if(++_g,x.body==b){match=x;break}}null==match?(this.bodies.push(new zpp_nape.constraint.ZPP_UserBody(1,b)),this.active&&null!=this.space&&null!=b&&b.constraints.add(this)):match.cnt++},zpp_nape.constraint.ZPP_UserConstraint.prototype.remBody=function(b){for(var match=null,bl=0|this.bodies.length,i=0;i<bl;){var x=this.bodies[i];if(x.body==b){x.cnt--,0==x.cnt&&(bl>0&&(this.bodies[i]=this.bodies[bl-1]),this.bodies.pop(),this.active&&null!=this.space&&null!=b&&b.constraints.remove(this)),match=x;break}++i}return null!=match},zpp_nape.constraint.ZPP_UserConstraint.prototype.bodyImpulse=function(b){for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++;this.J[i]=this.jAcc[i]}var ret=nape.geom.Vec3.get(0,0,0);return this.stepped&&this.outer_zn.__impulse(this.J,b.outer,ret),ret},zpp_nape.constraint.ZPP_UserConstraint.prototype.activeBodies=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var b=_g1[_g];++_g,null!=b.body&&b.body.constraints.add(this)}},zpp_nape.constraint.ZPP_UserConstraint.prototype.inactiveBodies=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var b=_g1[_g];++_g,null!=b.body&&b.body.constraints.remove(this)}},zpp_nape.constraint.ZPP_UserConstraint.prototype.stepped=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.copy=function(dict,todo){var ret=this.outer_zn.__copy();throw this.copyto(ret),new js._Boot.HaxeError("not done yet")},zpp_nape.constraint.ZPP_UserConstraint.prototype.validate=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var b=_g1[_g];if(++_g,b.body.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},zpp_nape.constraint.ZPP_UserConstraint.prototype.wake_connected=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var b=_g1[_g];++_g,2==b.body.type&&b.body.wake()}},zpp_nape.constraint.ZPP_UserConstraint.prototype.forest=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var b=_g1[_g];if(++_g,2==b.body.type){var xr,yr;if(b.body.component==b.body.component.parent)xr=b.body.component;else{for(var obj=b.body.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}}},zpp_nape.constraint.ZPP_UserConstraint.prototype.pair_exists=function(id,di){for(var ret=!1,bl=0|this.bodies.length,_g=0,_g1=bl;_g<_g1;){for(var bi=_g++,b=this.bodies[bi].body,_g2=bi+1,_g11=bl;_g2<_g11;){var ci=_g2++,c=this.bodies[ci].body;if(b.id==id&&c.id==di||b.id==di&&c.id==id){ret=!0;break}}if(ret)break}return ret},zpp_nape.constraint.ZPP_UserConstraint.prototype.broken=function(){this.outer_zn.__broken()},zpp_nape.constraint.ZPP_UserConstraint.prototype.clearcache=function(){for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++;this.jAcc[i]=0}this.pre_dt=-1},zpp_nape.constraint.ZPP_UserConstraint.prototype.lsq=function(v){for(var sum=0,_g=0,_g1=this.dim;_g<_g1;){var i=_g++;sum+=v[i]*v[i]}return sum},zpp_nape.constraint.ZPP_UserConstraint.prototype._clamp=function(v,max){var x=this.lsq(v);if(x>max*max)for(var scale=max/Math.sqrt(x),_g=0,_g1=this.dim;_g<_g1;){var i;v[_g++]*=scale}},zpp_nape.constraint.ZPP_UserConstraint.prototype.L=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.solve=function(m){for(var ind=0,_g=0,_g1=this.dim;_g<_g1;){for(var j=_g++,sum=0,_g2=0,_g11=j-1;_g2<_g11;){var k=_g2++;sum+=this.L[j*this.dim+k]*this.L[j*this.dim+k]}var rec=Math.sqrt(m[ind++]-sum);if(this.L[j*this.dim+j]=rec,0!=rec){rec=1/rec;for(var _g21=j+1,_g3=this.dim;_g21<_g3;){for(var i=_g21++,sum1=0,_g22=0,_g31=j-1;_g22<_g31;){var k1=_g22++;sum1+=this.L[i*this.dim+k1]*this.L[j*this.dim+k1]}this.L[i*this.dim+j]=rec*(m[ind++]-sum1)}}else{for(var _g23=j+1,_g32=this.dim;_g23<_g32;){var i1=_g23++;this.L[i1*this.dim+j]=0}ind+=this.dim-j-1}}return this.L},zpp_nape.constraint.ZPP_UserConstraint.prototype.y=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.transform=function(L,x){for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++,sum=x[i],lii=L[i*this.dim+i];if(0!=lii){for(var _g2=0,_g11=i;_g2<_g11;){var k=_g2++;sum-=L[i*this.dim+k]*this.y[k]}this.y[i]=sum/lii}else this.y[i]=0}for(var _g21=0,_g3=this.dim;_g21<_g3;){var ix=_g21++,i1=this.dim-1-ix,lii1=L[i1*this.dim+i1];if(0!=lii1){for(var sum1=this.y[i1],_g22=i1+1,_g31=this.dim;_g22<_g31;){var k1=_g22++;sum1-=L[k1*this.dim+i1]*x[k1]}x[i1]=sum1/lii1}else x[i1]=0}},zpp_nape.constraint.ZPP_UserConstraint.prototype.soft=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.gamma=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.velonly=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.jMax=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.Keff=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;if(this.pre_dt=dt,this.stepped=!0,this.outer_zn.__prepare(),this.outer_zn.__eff_mass(this.Keff),this.L=this.solve(this.Keff),this.stiff||this.velonly){for(var _g2=0,_g11=this.dim;_g2<_g11;){var i1=_g2++;this.bias[i1]=0}this.gamma=0,this.soft=1}else{var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma),biasCoef=dt*omega*omega*this.gamma;if(this.gamma*=ig,this.soft=ig,this.outer_zn.__position(this.bias),this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++;this.bias[i]*=-biasCoef}this._clamp(this.bias,this.maxError)}for(var _g3=0,_g12=this.dim;_g3<_g12;){var i2=_g3++;this.jAcc[i2]*=dtratio}return this.jMax=this.maxForce*dt,!1},zpp_nape.constraint.ZPP_UserConstraint.prototype.vec3=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.warmStart=function(){for(var _g=0,_g1=this.bodies;_g<_g1.length;){var bs=_g1[_g];++_g;var b=bs.body;this.outer_zn.__impulse(this.jAcc,b.outer,this.vec3);var t=b.imass,b1=b,b2=b1.velx,_this=this.vec3;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=_this.zpp_inner;null!=_this1._validate&&_this1._validate(),b1.velx=b2+_this.zpp_inner.x*t;var b3=b,b4=b3.vely,_this2=this.vec3;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;null!=_this3._validate&&_this3._validate(),b3.vely=b4+_this2.zpp_inner.y*t;var b5=b,b6=b5.angvel,_this4=this.vec3;if(null!=_this4&&_this4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=_this4.zpp_inner;null!=_this5._validate&&_this5._validate(),b5.angvel=b6+_this4.zpp_inner.z*b.iinertia}},zpp_nape.constraint.ZPP_UserConstraint.prototype.J=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.jOld=null,zpp_nape.constraint.ZPP_UserConstraint.prototype.applyImpulseVel=function(){this.outer_zn.__velocity(this.J);for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++;this.J[i]=this.bias[i]-this.J[i]}this.transform(this.L,this.J);for(var _g2=0,_g3=this.dim;_g2<_g3;){var i1=_g2++;this.jOld[i1]=this.jAcc[i1],this.jAcc[i1]+=this.J[i1]=this.J[i1]*this.soft-this.jAcc[i1]*this.gamma}if(this.outer_zn.__clamp(this.jAcc),(this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}for(var _g4=0,_g5=this.dim;_g4<_g5;){var i2=_g4++;this.J[i2]=this.jAcc[i2]-this.jOld[i2]}for(var _g6=0,_g7=this.bodies;_g6<_g7.length;){var bs=_g7[_g6];++_g6;var b=bs.body;this.outer_zn.__impulse(this.J,b.outer,this.vec3);var t=b.imass,b1=b,b2=b1.velx,_this=this.vec3;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=_this.zpp_inner;null!=_this1._validate&&_this1._validate(),b1.velx=b2+_this.zpp_inner.x*t;var b3=b,b4=b3.vely,_this2=this.vec3;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;null!=_this3._validate&&_this3._validate(),b3.vely=b4+_this2.zpp_inner.y*t;var b5=b,b6=b5.angvel,_this4=this.vec3;if(null!=_this4&&_this4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=_this4.zpp_inner;null!=_this5._validate&&_this5._validate(),b5.angvel=b6+_this4.zpp_inner.z*b.iinertia}return!1},zpp_nape.constraint.ZPP_UserConstraint.prototype.applyImpulsePos=function(){if(this.velonly)return!1;this.outer_zn.__prepare(),this.outer_zn.__position(this.J);var lj=this.lsq(this.J);if(this.breakUnderError&&lj>this.maxError*this.maxError)return!0;if(lj<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop)return!1;for(var _g=0,_g1=this.dim;_g<_g1;){var i=_g++;this.J[i]*=-1}this.outer_zn.__eff_mass(this.Keff),this.transform(this.solve(this.Keff),this.J),this.outer_zn.__clamp(this.J);for(var _g2=0,_g3=this.bodies;_g2<_g3.length;){var bs=_g3[_g2];++_g2;var b=bs.body;this.outer_zn.__impulse(this.J,b.outer,this.vec3);var t=b.imass,b1=b,b2=b1.posx,_this=this.vec3;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this1=_this.zpp_inner;null!=_this1._validate&&_this1._validate(),b1.posx=b2+_this.zpp_inner.x*t;var b3=b,b4=b3.posy,_this2=this.vec3;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;null!=_this3._validate&&_this3._validate(),b3.posy=b4+_this2.zpp_inner.y*t;var _this4=this.vec3;if(null!=_this4&&_this4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec3 has been disposed and cannot be used!");var _this5=_this4.zpp_inner;null!=_this5._validate&&_this5._validate();var dr=_this4.zpp_inner.z*b.iinertia;if(b.rot+=dr,dr*dr>1e-4)b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*b.axisx+dr*b.axisy)*m;b.axisy=(p*b.axisy-dr*b.axisx)*m,b.axisx=nx}}return!1},zpp_nape.constraint.ZPP_UserConstraint.prototype.draw=function(g){this.outer_zn.__draw(g)},zpp_nape.constraint.ZPP_UserConstraint.prototype.__class__=zpp_nape.constraint.ZPP_UserConstraint,zpp_nape.constraint.ZPP_UserBody=$hxClasses["zpp_nape.constraint.ZPP_UserBody"]=function(cnt,body){this.body=null,this.cnt=0,this.cnt=cnt,this.body=body},zpp_nape.constraint.ZPP_UserBody.__name__=["zpp_nape","constraint","ZPP_UserBody"],zpp_nape.constraint.ZPP_UserBody.prototype.cnt=null,zpp_nape.constraint.ZPP_UserBody.prototype.body=null,zpp_nape.constraint.ZPP_UserBody.prototype.__class__=zpp_nape.constraint.ZPP_UserBody,zpp_nape.constraint.ZPP_WeldJoint=$hxClasses["zpp_nape.constraint.ZPP_WeldJoint"]=function(){this.stepped=!1,this.biasz=0,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccz=0,this.jAccy=0,this.jAccx=0,this.kMassf=0,this.kMasse=0,this.kMassc=0,this.kMassd=0,this.kMassb=0,this.kMassa=0,this.phase=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,zpp_nape.constraint.ZPP_Constraint.call(this),this.phase=0,this.jAccx=0,this.jAccy=0,this.jAccz=0,this.jMax=1/0,this.stepped=!1,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0},zpp_nape.constraint.ZPP_WeldJoint.__name__=["zpp_nape","constraint","ZPP_WeldJoint"],zpp_nape.constraint.ZPP_WeldJoint.__super__=zpp_nape.constraint.ZPP_Constraint,zpp_nape.constraint.ZPP_Constraint.prototype)zpp_nape.constraint.ZPP_WeldJoint.prototype[k]=zpp_nape.constraint.ZPP_Constraint.prototype[k];for(var k in zpp_nape.constraint.ZPP_WeldJoint.prototype.outer_zn=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.bodyImpulse=function(b){return this.stepped?b==this.b1?nape.geom.Vec3.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):nape.geom.Vec3.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):nape.geom.Vec3.get(0,0,0)},zpp_nape.constraint.ZPP_WeldJoint.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},zpp_nape.constraint.ZPP_WeldJoint.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},zpp_nape.constraint.ZPP_WeldJoint.prototype.b1=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a1localx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a1localy=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a1relx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a1rely=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},zpp_nape.constraint.ZPP_WeldJoint.prototype.invalidate_a1=function(x){this.immutable_midstep("Constraint::a1"),this.a1localx=x.x,this.a1localy=x.y,this.wake()},zpp_nape.constraint.ZPP_WeldJoint.prototype.setup_a1=function(){var x=this.a1localx,y=this.a1localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a1=ret,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},zpp_nape.constraint.ZPP_WeldJoint.prototype.wrap_a1=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.b2=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a2localx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a2localy=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a2relx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.a2rely=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},zpp_nape.constraint.ZPP_WeldJoint.prototype.invalidate_a2=function(x){this.immutable_midstep("Constraint::a2"),this.a2localx=x.x,this.a2localy=x.y,this.wake()},zpp_nape.constraint.ZPP_WeldJoint.prototype.setup_a2=function(){var x=this.a2localx,y=this.a2localy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_a2=ret,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},zpp_nape.constraint.ZPP_WeldJoint.prototype.wrap_a2=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.phase=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMassa=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMassb=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMassd=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMassc=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMasse=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.kMassf=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.jAccx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.jAccy=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.jAccz=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.jMax=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.gamma=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.biasx=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.biasy=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.biasz=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.stepped=null,zpp_nape.constraint.ZPP_WeldJoint.prototype.copy=function(dict,todo){var _this=this.outer_zn;null==_this.zpp_inner_zn.wrap_a1&&_this.zpp_inner_zn.setup_a1();var ret=_this.zpp_inner_zn.wrap_a1,_this1=this.outer_zn;null==_this1.zpp_inner_zn.wrap_a2&&_this1.zpp_inner_zn.setup_a2();var ret1=new nape.constraint.WeldJoint(null,null,ret,_this1.zpp_inner_zn.wrap_a2);if(this.copyto(ret1),null!=dict&&null!=this.b1){for(var b=null,_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==this.b1.id){b=idc.bc;break}}null!=b?ret1.zpp_inner_zn.b1=b.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b1.id,(function(b1){ret1.zpp_inner_zn.b1=b1.zpp_inner})))}if(null!=dict&&null!=this.b2){for(var b2=null,_g1=0;_g1<dict.length;){var idc1=dict[_g1];if(++_g1,idc1.id==this.b2.id){b2=idc1.bc;break}}null!=b2?ret1.zpp_inner_zn.b2=b2.zpp_inner:todo.push(zpp_nape.constraint.ZPP_CopyHelper.todo(this.b2.id,(function(b3){ret1.zpp_inner_zn.b2=b3.zpp_inner})))}return ret1},zpp_nape.constraint.ZPP_WeldJoint.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new js._Boot.HaxeError("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new js._Boot.HaxeError("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new js._Boot.HaxeError("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new js._Boot.HaxeError("Error: Constraints cannot have both bodies non-dynamic")},zpp_nape.constraint.ZPP_WeldJoint.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},zpp_nape.constraint.ZPP_WeldJoint.prototype.forest=function(){if(2==this.b1.type){var xr,yr;if(this.b1.component==this.b1.component.parent)xr=this.b1.component;else{for(var obj=this.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(this.component==this.component.parent)yr=this.component;else{for(var obj1=this.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}if(2==this.b2.type){var xr1,yr1;if(this.b2.component==this.b2.component.parent)xr1=this.b2.component;else{for(var obj2=this.b2.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(this.component==this.component.parent)yr1=this.component;else{for(var obj3=this.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}},zpp_nape.constraint.ZPP_WeldJoint.prototype.pair_exists=function(id,di){return this.b1.id==id&&this.b2.id==di||this.b1.id==di&&this.b2.id==id},zpp_nape.constraint.ZPP_WeldJoint.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.jAccz=0,this.pre_dt=-1},zpp_nape.constraint.ZPP_WeldJoint.prototype.preStep=function(dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var m=this.b1.smass+this.b2.smass;if(this.kMassa=m,this.kMassb=0,this.kMassd=m,this.kMassc=0,this.kMasse=0,this.kMassf=0,0!=this.b1.sinertia){var X=this.a1relx*this.b1.sinertia,Y=this.a1rely*this.b1.sinertia;this.kMassa+=Y*this.a1rely,this.kMassb+=-Y*this.a1relx,this.kMassd+=X*this.a1relx,this.kMassc+=-Y,this.kMasse+=X,this.kMassf+=this.b1.sinertia}if(0!=this.b2.sinertia){var X1=this.a2relx*this.b2.sinertia,Y1=this.a2rely*this.b2.sinertia;this.kMassa+=Y1*this.a2rely,this.kMassb+=-Y1*this.a2relx,this.kMassd+=X1*this.a2relx,this.kMassc+=-Y1,this.kMasse+=X1,this.kMassf+=this.b2.sinertia}var det=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),flag;if(det!=det)this.kMassa=0,this.kMassb=0,this.kMassd=0,this.kMassc=0,this.kMasse=0,this.kMassf=0,flag=7;else if(0==det){var flag1=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,flag1|=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,flag1|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,flag1|=4),this.kMassb=this.kMassc=this.kMasse=0,flag=flag1}else{var A=(det=1/det)*(this.kMassd*this.kMassf-this.kMasse*this.kMasse),B=det*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),D=det*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),C=det*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),E=det*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),F=det*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=A,this.kMassb=B,this.kMassd=D,this.kMassc=C,this.kMasse=E,this.kMassf=F,flag=0}if(0!=(1&flag)&&(this.jAccx=0),0!=(2&flag)&&(this.jAccy=0),0!=(4&flag)&&(this.jAccz=0),this.stiff)this.biasx=0,this.biasy=0,this.biasz=0,this.gamma=0;else{var biasCoef,omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma,this.gamma*=ig;var X2=ig;if(this.kMassa*=X2,this.kMassb*=X2,this.kMassd*=X2,this.kMassc*=X2,this.kMasse*=X2,this.kMassf*=X2,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.biasz=this.b2.rot-this.b1.rot-this.phase,this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;var t=-biasCoef,t1=t;this.biasx*=t1,this.biasy*=t1,this.biasz*=t;var t2=this.maxError,ls=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls)),t4=t3;this.biasx*=t4,this.biasy*=t4,this.biasz*=t3}}var t5=dtratio,t6=t5;return this.jAccx*=t6,this.jAccy*=t6,this.jAccz*=t5,this.jMax=this.maxForce*dt,!1},zpp_nape.constraint.ZPP_WeldJoint.prototype.warmStart=function(){var t=this.b1.imass;this.b1.velx-=this.jAccx*t,this.b1.vely-=this.jAccy*t;var t1=this.b2.imass;this.b2.velx+=this.jAccx*t1,this.b2.vely+=this.jAccy*t1,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},zpp_nape.constraint.ZPP_WeldJoint.prototype.applyImpulseVel=function(){var Ex=0,Ey=0,Ez=0;Ex=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),Ey=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),Ez=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var Jx=0,Jy=0,Jz=0;Jx=this.biasx-Ex,Jy=this.biasy-Ey,Jz=this.biasz-Ez;var X=this.kMassa*Jx+this.kMassb*Jy+this.kMassc*Jz,Y=this.kMassb*Jx+this.kMassd*Jy+this.kMasse*Jz;Jz=this.kMassc*Jx+this.kMasse*Jy+this.kMassf*Jz,Jx=X,Jy=Y;var t=this.gamma,t1=t;Jx-=this.jAccx*t1,Jy-=this.jAccy*t1,Jz-=this.jAccz*t;var jOldx=0,jOldy=0,jOldz=0;jOldx=this.jAccx,jOldy=this.jAccy,jOldz=this.jAccz;var t2=1,t3=1;if(this.jAccx+=1*Jx,this.jAccy+=1*Jy,this.jAccz+=1*Jz,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else if(!this.stiff){var t4=this.jMax,ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(ls>t4*t4){var t5=t4*(1/Math.sqrt(ls)),t6=t5;this.jAccx*=t6,this.jAccy*=t6,this.jAccz*=t5}}Jx=this.jAccx-jOldx,Jy=this.jAccy-jOldy,Jz=this.jAccz-jOldz;var t7=this.b1.imass;this.b1.velx-=Jx*t7,this.b1.vely-=Jy*t7;var t8=this.b2.imass;return this.b2.velx+=Jx*t8,this.b2.vely+=Jy*t8,this.b1.angvel-=(Jy*this.a1relx-Jx*this.a1rely+Jz)*this.b1.iinertia,this.b2.angvel+=(Jy*this.a2relx-Jx*this.a2rely+Jz)*this.b2.iinertia,!1},zpp_nape.constraint.ZPP_WeldJoint.prototype.applyImpulsePos=function(){var r1x=0,r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0,r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var Ex=0,Ey=0,Ez=0;Ex=this.b2.posx+r2x-(this.b1.posx+r1x),Ey=this.b2.posy+r2y-(this.b1.posy+r1y),Ez=this.b2.rot-this.b1.rot-this.phase;var Jx=0,Jy=0,Jz=0;if(this.breakUnderError&&Ex*Ex+Ey*Ey+Ez*Ez>this.maxError*this.maxError)return!0;var cont=!0;Ex*Ex+Ey*Ey<nape.Config.constraintLinearSlop*nape.Config.constraintLinearSlop&&(cont=!1,Ex=0,Ey=0);var x=nape.Config.constraintAngularSlop;if(Ez*Ez<x*x){if(!cont)return!1;Ez=0}var t=.5,t1=t;if(Ez*=t,(Ex*=.5)*Ex+(Ey*=.5)*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape.Config.epsilon){var t2=20,ls=(Jx=-Ex*(k=.75/k))*Jx+(Jy=-Ey*k)*Jy;if(ls>400){var t3=1/Math.sqrt(ls)*20;Jx*=t3,Jy*=t3}var t4=this.b1.imass;this.b1.posx-=Jx*t4,this.b1.posy-=Jy*t4;var t5=this.b2.imass;this.b2.posx+=Jx*t5,this.b2.posy+=Jy*t5,Ex=this.b2.posx+r2x-(this.b1.posx+r1x),Ey=this.b2.posy+r2y-(this.b1.posy+r1y),Ez=this.b2.rot-this.b1.rot-this.phase;var t6=.5,t7=.5;Ex*=.5,Ey*=.5,Ez*=.5}}var Ka=0,Kb=0,Kd=0,Kc=0,Ke=0,Kf=0,m=this.b1.smass+this.b2.smass;if(Ka=m,Kb=0,Kd=m,Kc=0,Ke=0,Kf=0,0!=this.b1.sinertia){var X=r1x*this.b1.sinertia,Y=r1y*this.b1.sinertia;Ka+=Y*r1y,Kb+=-Y*r1x,Kd+=X*r1x,Kc+=-Y,Ke+=X,Kf+=this.b1.sinertia}if(0!=this.b2.sinertia){var X1=r2x*this.b2.sinertia,Y1=r2y*this.b2.sinertia;Ka+=Y1*r2y,Kb+=-Y1*r2x,Kd+=X1*r2x,Kc+=-Y1,Ke+=X1,Kf+=this.b2.sinertia}Jz=-Ez;var t8=6,ls1=(Jx=-Ex)*Jx+(Jy=-Ey)*Jy;if(ls1>36){var t9=1/Math.sqrt(ls1)*6;Jx*=t9,Jy*=t9}var a,tmp=Jz<-.25,det=Ka*(Kd*Kf-Ke*Ke)+Kb*(Kc*Ke-Kb*Kf)+Kc*(Kb*Ke-Kc*Kd);if(det!=det)Jx=Jy=Jz=0;else if(0==det)0!=Ka?Jx/=Ka:Jx=0,0!=Kd?Jy/=Kd:Jy=0,0!=Kf?Jz/=Kf:Jz=0;else{var B=Ke*Kc-Kb*Kf,C=Kb*Ke-Kc*Kd,E=Kb*Kc-Ka*Ke,X2=(det=1/det)*(Jx*(Kd*Kf-Ke*Ke)+Jy*B+Jz*C),Y2=det*(Jx*B+Jy*(Ka*Kf-Kc*Kc)+Jz*E);Jz=det*(Jx*C+Jy*E+Jz*(Ka*Kd-Kb*Kb)),Jx=X2,Jy=Y2}var t10=this.b1.imass;this.b1.posx-=Jx*t10,this.b1.posy-=Jy*t10;var t11=this.b2.imass;this.b2.posx+=Jx*t11,this.b2.posy+=Jy*t11;var _this=this.b1,dr=-(Jy*r1x-Jx*r1y+Jz)*this.b1.iinertia;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m1=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m1;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m1,_this.axisx=nx}var _this1=this.b2,dr1=(Jy*r2x-Jx*r2y+Jz)*this.b2.iinertia;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m2=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m2;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m2,_this1.axisx=nx1}return!1},zpp_nape.constraint.ZPP_WeldJoint.prototype.draw=function(g){},zpp_nape.constraint.ZPP_WeldJoint.prototype.__class__=zpp_nape.constraint.ZPP_WeldJoint,zpp_nape.dynamics||(zpp_nape.dynamics={}),zpp_nape.dynamics.ZPP_Arbiter=$hxClasses["zpp_nape.dynamics.ZPP_Arbiter"]=function(){this.sensorarb=null,this.fluidarb=null,this.colarb=null,this.type=0,this.pair=null,this.ws2=null,this.ws1=null,this.b2=null,this.b1=null,this.invalidated=!1,this.immState=0,this.fresh=!1,this.continuous=!1,this.presentable=!1,this.intchange=!1,this.present=0,this.sleeping=!1,this.cleared=!1,this.active=!1,this.endGenerated=0,this.sleep_stamp=0,this.up_stamp=0,this.stamp=0,this.di=0,this.id=0,this.hnext=null,this.outer=null},zpp_nape.dynamics.ZPP_Arbiter.__name__=["zpp_nape","dynamics","ZPP_Arbiter"],zpp_nape.dynamics.ZPP_Arbiter.prototype.outer=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.wrapper=function(){return null==this.outer&&(zpp_nape.dynamics.ZPP_Arbiter.internal=!0,this.type==zpp_nape.dynamics.ZPP_Arbiter.COL?(this.colarb.outer_zn=new nape.dynamics.CollisionArbiter,this.outer=this.colarb.outer_zn):this.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID?(this.fluidarb.outer_zn=new nape.dynamics.FluidArbiter,this.outer=this.fluidarb.outer_zn):this.outer=new nape.dynamics.Arbiter,this.outer.zpp_inner=this,zpp_nape.dynamics.ZPP_Arbiter.internal=!1),this.outer},zpp_nape.dynamics.ZPP_Arbiter.prototype.inactiveme=function(){return!this.active},zpp_nape.dynamics.ZPP_Arbiter.prototype.hnext=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.id=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.di=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.stamp=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.up_stamp=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.sleep_stamp=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.endGenerated=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.active=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.cleared=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.sleeping=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.present=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.intchange=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.presentable=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.continuous=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.fresh=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.immState=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.acting=function(){return!!this.active&&0!=(1&this.immState)},zpp_nape.dynamics.ZPP_Arbiter.prototype.invalidated=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.b1=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.b2=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.ws1=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.ws2=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.pair=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.swap_features=function(){var t=this.b1;this.b1=this.b2,this.b2=t;var t1=this.ws1;this.ws1=this.ws2,this.ws2=t1;var t2=this.colarb.s1;this.colarb.s1=this.colarb.s2,this.colarb.s2=t2},zpp_nape.dynamics.ZPP_Arbiter.prototype.type=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.colarb=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.fluidarb=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.sensorarb=null,zpp_nape.dynamics.ZPP_Arbiter.prototype.lazyRetire=function(s,b){if(this.cleared=!0,null==b||this.b2==b)for(var _this=this.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==this){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}if(null==b||this.b1==b)for(var _this1=this.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==this){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=this.pair&&(this.pair.arb=null,this.pair=null),this.active=!1,s.f_arbiters.modified=!0},zpp_nape.dynamics.ZPP_Arbiter.prototype.sup_assign=function(s1,s2,id,di){this.b1=s1.body,this.ws1=s1,this.b2=s2.body,this.ws2=s2,this.id=id,this.di=di;var _this=this.b1.arbiters,ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++;var _this1=this.b2.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},zpp_nape.dynamics.ZPP_Arbiter.prototype.sup_retire=function(){if(!this.cleared){for(var _this=this.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==this){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=this.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==this){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1},zpp_nape.dynamics.ZPP_Arbiter.prototype.__class__=zpp_nape.dynamics.ZPP_Arbiter,zpp_nape.dynamics.ZPP_SensorArbiter=$hxClasses["zpp_nape.dynamics.ZPP_SensorArbiter"]=function(){this.next=null,zpp_nape.dynamics.ZPP_Arbiter.call(this),this.type=zpp_nape.dynamics.ZPP_Arbiter.SENSOR,this.sensorarb=this},zpp_nape.dynamics.ZPP_SensorArbiter.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"],zpp_nape.dynamics.ZPP_SensorArbiter.__super__=zpp_nape.dynamics.ZPP_Arbiter,zpp_nape.dynamics.ZPP_Arbiter.prototype)zpp_nape.dynamics.ZPP_SensorArbiter.prototype[k]=zpp_nape.dynamics.ZPP_Arbiter.prototype[k];for(var k in zpp_nape.dynamics.ZPP_SensorArbiter.prototype.next=null,zpp_nape.dynamics.ZPP_SensorArbiter.prototype.alloc=function(){},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.free=function(){},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.assign=function(s1,s2,id,di){this.b1=s1.body,this.ws1=s1,this.b2=s2.body,this.ws2=s2,this.id=id,this.di=di;var _this=this.b1.arbiters,ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++;var _this1=this.b2.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.retire=function(){if(!this.cleared){for(var _this=this.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==this){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=this.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==this){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;var o2=this;o2.next=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=o2},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.makemutable=function(){},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.makeimmutable=function(){},zpp_nape.dynamics.ZPP_SensorArbiter.prototype.__class__=zpp_nape.dynamics.ZPP_SensorArbiter,zpp_nape.dynamics.ZPP_FluidArbiter=$hxClasses["zpp_nape.dynamics.ZPP_FluidArbiter"]=function(){this.pre_dt=0,this.mutable=!1,this.wrap_position=null,this.buoyy=0,this.buoyx=0,this.ny=0,this.nx=0,this.lgamma=0,this.dampy=0,this.dampx=0,this.vMassc=0,this.vMassb=0,this.vMassa=0,this.agamma=0,this.adamp=0,this.wMass=0,this.nodrag=!1,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0,this.overlap=0,this.centroidy=0,this.centroidx=0,this.next=null,this.outer_zn=null,zpp_nape.dynamics.ZPP_Arbiter.call(this),this.type=zpp_nape.dynamics.ZPP_Arbiter.FLUID,this.fluidarb=this,this.buoyx=0,this.buoyy=0,this.pre_dt=-1},zpp_nape.dynamics.ZPP_FluidArbiter.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"],zpp_nape.dynamics.ZPP_FluidArbiter.__super__=zpp_nape.dynamics.ZPP_Arbiter,zpp_nape.dynamics.ZPP_Arbiter.prototype)zpp_nape.dynamics.ZPP_FluidArbiter.prototype[k]=zpp_nape.dynamics.ZPP_Arbiter.prototype[k];for(var k in zpp_nape.dynamics.ZPP_FluidArbiter.prototype.outer_zn=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.next=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.alloc=function(){},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.free=function(){},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.centroidx=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.centroidy=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.overlap=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.r1x=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.r1y=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.r2x=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.r2y=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.nodrag=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.wMass=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.adamp=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.agamma=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.vMassa=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.vMassb=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.vMassc=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.dampx=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.dampy=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.lgamma=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.nx=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.ny=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.buoyx=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.buoyy=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.position_validate=function(){if(!this.active)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");this.wrap_position.zpp_inner.x=this.centroidx,this.wrap_position.zpp_inner.y=this.centroidy},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.position_invalidate=function(x){this.centroidx=x.x,this.centroidy=x.y},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.wrap_position=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.getposition=function(){var ret;if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=0,ret1.y=0,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),0==ret.zpp_inner.x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=0==ret.zpp_inner.y}else tmp=!1;if(!tmp){ret.zpp_inner.x=0,ret.zpp_inner.y=0;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_position=ret,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!this.mutable,this.wrap_position.zpp_inner._validate=$bind(this,this.position_validate),this.wrap_position.zpp_inner._invalidate=$bind(this,this.position_invalidate)},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.assign=function(s1,s2,id,di){this.b1=s1.body,this.ws1=s1,this.b2=s2.body,this.ws2=s2,this.id=id,this.di=di;var _this=this.b1.arbiters,ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++;var _this1=this.b2.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.nx=0,this.ny=1,this.dampx=0,this.dampy=0,this.adamp=0},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.retire=function(){if(!this.cleared){for(var _this=this.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==this){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=this.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==this){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;var o2=this;o2.next=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=o2,this.pre_dt=-1},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.mutable=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!1)},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!0)},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.inject=function(area,cx,cy){this.overlap=area,this.centroidx=cx,this.centroidy=cy},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.pre_dt=null,zpp_nape.dynamics.ZPP_FluidArbiter.prototype.preStep=function(s,dt){-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt,this.r1x=this.centroidx-this.b1.posx,this.r1y=this.centroidy-this.b1.posy,this.r2x=this.centroidx-this.b2.posx,this.r2y=this.centroidy-this.b2.posy;var g1x=0,g1y=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(g1x=this.ws1.fluidProperties.gravityx,g1y=this.ws1.fluidProperties.gravityy):(g1x=s.gravityx,g1y=s.gravityy);var g2x=0,g2y=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(g2x=this.ws2.fluidProperties.gravityx,g2y=this.ws2.fluidProperties.gravityy):(g2x=s.gravityx,g2y=s.gravityy);var buoyx=0,buoyy=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var mass1=this.overlap*this.ws1.fluidProperties.density,mass2=this.overlap*this.ws2.fluidProperties.density;if(mass1>mass2){var t=mass1+mass2;buoyx-=g1x*t,buoyy-=g1y*t}else if(mass1<mass2){var t1=mass1+mass2;buoyx+=g2x*t1,buoyy+=g2y*t1}else{var gx=0,gy=0;gx=g1x+g2x,gy=g1y+g2y;var t2=.5;if(gx*=.5,gy*=.5,this.ws1.worldCOMx*gx+this.ws1.worldCOMy*gy>this.ws2.worldCOMx*gx+this.ws2.worldCOMy*gy){var t3=mass1+mass2;buoyx-=gx*t3,buoyy-=gy*t3}else{var t4=mass1+mass2;buoyx+=gx*t4,buoyy+=gy*t4}}}else if(this.ws1.fluidEnabled){var mass=this.overlap*this.ws1.fluidProperties.density,t5=mass;buoyx-=g1x*mass,buoyy-=g1y*mass}else if(this.ws2.fluidEnabled){var mass3=this.overlap*this.ws2.fluidProperties.density,t6=mass3;buoyx+=g2x*mass3,buoyy+=g2y*mass3}var t7=dt;if(buoyx*=dt,buoyy*=dt,this.buoyx=buoyx,this.buoyy=buoyy,2==this.b1.type){var t8=this.b1.imass;this.b1.velx-=buoyx*t8,this.b1.vely-=buoyy*t8,this.b1.angvel-=(buoyy*this.r1x-buoyx*this.r1y)*this.b1.iinertia}if(2==this.b2.type){var t9=this.b2.imass;this.b2.velx+=buoyx*t9,this.b2.vely+=buoyy*t9,this.b2.angvel+=(buoyy*this.r2x-buoyx*this.r2y)*this.b2.iinertia}if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;var tViscosity=0;if(this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),tViscosity+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area),this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),tViscosity+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area),0!=tViscosity){var iSum=this.b1.sinertia+this.b2.sinertia;this.wMass=0!=iSum?1/iSum:0,tViscosity*=4e-4;var omega=2*Math.PI*tViscosity;this.agamma=1/(dt*omega*(2+omega*dt));var ig=1/(1+this.agamma),biasCoef=dt*omega*omega*this.agamma;this.agamma*=ig,this.wMass*=ig}else this.wMass=0,this.agamma=0;var vrnx=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel)),vrny=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(!(vrnx*vrnx+vrny*vrny<nape.Config.epsilon*nape.Config.epsilon)){var d=vrnx*vrnx+vrny*vrny,imag=1/Math.sqrt(d),t10=imag;vrnx*=imag,vrny*=imag,this.nx=vrnx,this.ny=vrny}var tViscosity1=0;if(this.ws1.fluidEnabled){var f=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(0==this.ws2.type)tViscosity1-=f*this.ws2.circle.radius*nape.Config.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{for(var poly,bord=0,acc=0,cx_ite=this.ws2.polygon.edges.head;null!=cx_ite;){var ex=cx_ite.elt;bord+=ex.length;var fact=f*ex.length*(ex.gnormx*this.nx+ex.gnormy*this.ny);fact>0&&(fact=fact*=-nape.Config.fluidVacuumDrag),acc-=.5*fact*nape.Config.fluidLinearDrag,cx_ite=cx_ite.next}tViscosity1+=acc/bord}}if(this.ws2.fluidEnabled){var f1=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(0==this.ws1.type)tViscosity1-=f1*this.ws1.circle.radius*nape.Config.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{for(var poly1,bord1=0,acc1=0,cx_ite1=this.ws1.polygon.edges.head;null!=cx_ite1;){var ex1=cx_ite1.elt;bord1+=ex1.length;var fact1=f1*ex1.length*(ex1.gnormx*this.nx+ex1.gnormy*this.ny);fact1>0&&(fact1=fact1*=-nape.Config.fluidVacuumDrag),acc1-=.5*fact1*nape.Config.fluidLinearDrag,cx_ite1=cx_ite1.next}tViscosity1+=acc1/bord1}}if(0!=tViscosity1){var m=this.b1.smass+this.b2.smass,Ka=0,Kb=0,Kc=0;if(Ka=m,Kb=0,Kc=m,0!=this.b1.sinertia){var X=this.r1x*this.b1.sinertia,Y=this.r1y*this.b1.sinertia;Ka+=Y*this.r1y,Kb+=-Y*this.r1x,Kc+=X*this.r1x}if(0!=this.b2.sinertia){var X1=this.r2x*this.b2.sinertia,Y1=this.r2y*this.b2.sinertia;Ka+=Y1*this.r2y,Kb+=-Y1*this.r2x,Kc+=X1*this.r2x}var det=Ka*Kc-Kb*Kb,biasCoef1;if(det!=det)Ka=Kb=Kc=0;else if(0==det){var flag=0;0!=Ka?Ka=1/Ka:(Ka=0,flag|=1),0!=Kc?Kc=1/Kc:(Kc=0,flag|=2),Kb=0}else{var t11=Kc*(det=1/det);Kc=Ka*det,Ka=t11,Kb*=-det}this.vMassa=Ka,this.vMassb=Kb,this.vMassc=Kc;var omega1=2*Math.PI*tViscosity1;this.lgamma=1/(dt*omega1*(2+omega1*dt));var ig1=1/(1+this.lgamma);biasCoef1=dt*omega1*omega1*this.lgamma,this.lgamma*=ig1;var X2=ig1;this.vMassa*=X2,this.vMassb*=X2,this.vMassc*=X2}else this.vMassa=0,this.vMassb=0,this.vMassc=0,this.lgamma=0}else this.nodrag=!0,this.dampx=0,this.dampy=0,this.adamp=0;var t12=dtratio;this.dampx*=t12,this.dampy*=t12,this.adamp*=dtratio},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.warmStart=function(){var t=this.b1.imass;this.b1.velx-=this.dampx*t,this.b1.vely-=this.dampy*t;var t1=this.b2.imass;this.b2.velx+=this.dampx*t1,this.b2.vely+=this.dampy*t1,this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y),this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y),this.b1.angvel-=this.adamp*this.b1.iinertia,this.b2.angvel+=this.adamp*this.b2.iinertia},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.applyImpulseVel=function(){if(!this.nodrag){var w1=this.b1.angvel+this.b1.kinangvel,w2=this.b2.angvel+this.b2.kinangvel,jx=this.b1.velx+this.b1.kinvelx-this.r1y*w1-(this.b2.velx+this.b2.kinvelx-this.r2y*w2),jy=this.b1.vely+this.b1.kinvely+this.r1x*w1-(this.b2.vely+this.b2.kinvely+this.r2x*w2),t=this.vMassa*jx+this.vMassb*jy;jy=this.vMassb*jx+this.vMassc*jy,jx=t;var t1=this.lgamma;jx-=this.dampx*t1,jy-=this.dampy*t1;var t2=1;this.dampx+=1*jx,this.dampy+=1*jy;var t3=this.b1.imass;this.b1.velx-=jx*t3,this.b1.vely-=jy*t3;var t4=this.b2.imass;this.b2.velx+=jx*t4,this.b2.vely+=jy*t4,this.b1.angvel-=this.b1.iinertia*(jy*this.r1x-jx*this.r1y),this.b2.angvel+=this.b2.iinertia*(jy*this.r2x-jx*this.r2y);var j_damp=(w1-w2)*this.wMass-this.adamp*this.agamma;this.adamp+=j_damp,this.b1.angvel-=j_damp*this.b1.iinertia,this.b2.angvel+=j_damp*this.b2.iinertia}},zpp_nape.dynamics.ZPP_FluidArbiter.prototype.__class__=zpp_nape.dynamics.ZPP_FluidArbiter,zpp_nape.dynamics.ZPP_ColArbiter=$hxClasses["zpp_nape.dynamics.ZPP_ColArbiter"]=function(){this.pre_dt=0,this.mutable=!1,this.stat=!1,this.next=null,this.hpc2=!1,this.hc2=!1,this.oc2=null,this.c2=null,this.oc1=null,this.c1=null,this.__ref_vertex=0,this.__ref_edge2=null,this.__ref_edge1=null,this.biasCoef=0,this.rev=!1,this.radius=0,this.lproj=0,this.lnormy=0,this.lnormx=0,this.surfacey=0,this.surfacex=0,this.k2y=0,this.k2x=0,this.k1y=0,this.k1x=0,this.rt2b=0,this.rn2b=0,this.rt2a=0,this.rn2a=0,this.rt1b=0,this.rn1b=0,this.rt1a=0,this.rn1a=0,this.jrAcc=0,this.rMass=0,this.Kc=0,this.Kb=0,this.Ka=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_normal=null,this.ny=0,this.nx=0,this.innards=null,this.wrap_contacts=null,this.contacts=null,this.s2=null,this.s1=null,this.userdef_rfric=!1,this.userdef_restitution=!1,this.userdef_stat_fric=!1,this.userdef_dyn_fric=!1,this.rfric=0,this.restitution=0,this.stat_fric=0,this.dyn_fric=0,this.outer_zn=null,zpp_nape.dynamics.ZPP_Arbiter.call(this),this.pre_dt=-1,this.contacts=new zpp_nape.dynamics.ZPP_Contact,this.innards=new zpp_nape.dynamics.ZPP_IContact,this.type=zpp_nape.dynamics.ZPP_Arbiter.COL,this.colarb=this},zpp_nape.dynamics.ZPP_ColArbiter.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"],zpp_nape.dynamics.ZPP_ColArbiter.__super__=zpp_nape.dynamics.ZPP_Arbiter,zpp_nape.dynamics.ZPP_Arbiter.prototype)zpp_nape.dynamics.ZPP_ColArbiter.prototype[k]=zpp_nape.dynamics.ZPP_Arbiter.prototype[k];for(var k in zpp_nape.dynamics.ZPP_ColArbiter.prototype.outer_zn=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.dyn_fric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.stat_fric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.restitution=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rfric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.userdef_dyn_fric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.userdef_stat_fric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.userdef_restitution=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.userdef_rfric=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.s1=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.s2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.contacts=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.wrap_contacts=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.innards=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.nx=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.ny=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.normal_validate=function(){if(this.cleared)throw new js._Boot.HaxeError("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx,this.wrap_normal.zpp_inner.y=this.ny,this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},zpp_nape.dynamics.ZPP_ColArbiter.prototype.wrap_normal=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.getnormal=function(){var x=0,y=0,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_normal=ret,this.wrap_normal.zpp_inner._immutable=!0,this.wrap_normal.zpp_inner._inuse=!0,this.wrap_normal.zpp_inner._validate=$bind(this,this.normal_validate)},zpp_nape.dynamics.ZPP_ColArbiter.prototype.kMassa=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.kMassb=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.kMassc=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.Ka=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.Kb=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.Kc=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rMass=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.jrAcc=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rn1a=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rt1a=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rn1b=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rt1b=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rn2a=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rt2a=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rn2b=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rt2b=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.k1x=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.k1y=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.k2x=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.k2y=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.surfacex=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.surfacey=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.ptype=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.lnormx=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.lnormy=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.lproj=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.radius=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.rev=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.biasCoef=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.__ref_edge1=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.__ref_edge2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.__ref_vertex=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.c1=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.oc1=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.c2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.oc2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.hc2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.hpc2=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.next=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.alloc=function(){},zpp_nape.dynamics.ZPP_ColArbiter.prototype.free=function(){this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null},zpp_nape.dynamics.ZPP_ColArbiter.prototype.stat=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.injectContact=function(px,py,nx,ny,dist,hash,posOnly){null==posOnly&&(posOnly=!1);for(var c=null,cx_ite=this.contacts.next;null!=cx_ite;){var cur=cx_ite;if(hash==cur.hash){c=cur;break}cx_ite=cx_ite.next}if(null==c){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c=new zpp_nape.dynamics.ZPP_Contact:(c=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c.next,c.next=null);var ci=c.inner;ci.jnAcc=ci.jtAcc=0,c.hash=hash,c.fresh=!0,c.arbiter=this,this.jrAcc=0;var _this=this.contacts;c._inuse=!0;var temp=c;temp.next=_this.next,_this.next=temp,_this.modified=!0,_this.length++,this.innards.add(ci)}else c.fresh=!1;return c.px=px,c.py=py,this.nx=nx,this.ny=ny,c.dist=dist,c.stamp=this.stamp,c.posOnly=posOnly,c},zpp_nape.dynamics.ZPP_ColArbiter.prototype.assign=function(s1,s2,id,di){this.b1=s1.body,this.ws1=s1,this.b2=s2.body,this.ws2=s2,this.id=id,this.di=di;var _this=this.b1.arbiters,ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=this;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++;var _this1=this.b2.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=this;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.s1=s1,this.s2=s2,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},zpp_nape.dynamics.ZPP_ColArbiter.prototype.calcProperties=function(){this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},zpp_nape.dynamics.ZPP_ColArbiter.prototype.validate_props=function(){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)))},zpp_nape.dynamics.ZPP_ColArbiter.prototype.retire=function(){if(!this.cleared){for(var _this=this.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==this){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=this.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==this){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}for(this.b1=this.b2=null,this.active=!1,this.intchange=!1;null!=this.contacts.next;){var _this2=this.contacts,ret4=_this2.next;_this2.pop();var o2=ret4;o2.arbiter=null,o2.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o2;var _this3=this.innards,ret5=_this3.next;_this3.next=ret5.next,ret5._inuse=!1,null==_this3.next&&(_this3.pushmod=!0),_this3.modified=!0,_this3.length--}var o3=this;o3.userdef_dyn_fric=!1,o3.userdef_stat_fric=!1,o3.userdef_restitution=!1,o3.userdef_rfric=!1,o3.__ref_edge1=o3.__ref_edge2=null,o3.next=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=o3,this.pre_dt=-1},zpp_nape.dynamics.ZPP_ColArbiter.prototype.mutable=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!1),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!1)},zpp_nape.dynamics.ZPP_ColArbiter.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!0),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!0)},zpp_nape.dynamics.ZPP_ColArbiter.prototype.contacts_adder=function(x){throw new js._Boot.HaxeError("Error: Cannot add new contacts, information required is far too specific and detailed :)")},zpp_nape.dynamics.ZPP_ColArbiter.prototype.contacts_subber=function(x){for(var pre=null,prei=null,cx_itei=this.innards.next,cx_ite=this.contacts.next;null!=cx_ite;){var c=cx_ite;if(c==x.zpp_inner){this.contacts.erase(pre),this.innards.erase(prei);var o=c;o.arbiter=null,o.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o;break}pre=cx_ite,prei=cx_itei,cx_itei=cx_itei.next,cx_ite=cx_ite.next}},zpp_nape.dynamics.ZPP_ColArbiter.prototype.setupcontacts=function(){this.wrap_contacts=zpp_nape.util.ZPP_ContactList.get(this.contacts,!0),this.wrap_contacts.zpp_inner.immutable=!this.mutable,this.wrap_contacts.zpp_inner.adder=$bind(this,this.contacts_adder),this.wrap_contacts.zpp_inner.dontremove=!0,this.wrap_contacts.zpp_inner.subber=$bind(this,this.contacts_subber)},zpp_nape.dynamics.ZPP_ColArbiter.prototype.cleanupContacts=function(){var fst=!0,pre=null,prei=null,cx_itei=this.innards.next;this.hc2=!1;for(var cx_ite=this.contacts.next;null!=cx_ite;){var c=cx_ite;if(c.stamp+nape.Config.arbiterExpirationDelay<this.stamp){var _this=this.contacts,old,ret;null==pre?(ret=(old=_this.next).next,_this.next=ret,null==_this.next&&(_this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(_this.pushmod=!0)),old._inuse=!1,_this.modified=!0,_this.length--,_this.pushmod=!0,cx_ite=ret;var _this1=this.innards,old1,ret1;null==prei?(ret1=(old1=_this1.next).next,_this1.next=ret1,null==_this1.next&&(_this1.pushmod=!0)):(ret1=(old1=prei.next).next,prei.next=ret1,null==ret1&&(_this1.pushmod=!0)),old1._inuse=!1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,cx_itei=ret1;var o=c;o.arbiter=null,o.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o}else{var ci=c.inner,pact=c.active;c.active=c.stamp==this.stamp,c.active&&(fst?(fst=!1,this.c1=ci,this.oc1=c):(this.hc2=!0,this.c2=ci,this.oc2=c)),pact!=c.active&&(this.contacts.modified=!0),pre=cx_ite,prei=cx_itei,cx_itei=cx_itei.next,cx_ite=cx_ite.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var tmp=this.c1;this.c1=this.c2,this.c2=tmp;var tmp2=this.oc1;this.oc1=this.oc2,this.oc2=tmp2,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(fst=!0)}else this.hpc2=!1;return fst},zpp_nape.dynamics.ZPP_ColArbiter.prototype.pre_dt=null,zpp_nape.dynamics.ZPP_ColArbiter.prototype.preStep=function(dt){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),this.restitution>1&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))),-1==this.pre_dt&&(this.pre_dt=dt);var dtratio=dt/this.pre_dt;this.pre_dt=dt;var mass_sum=this.b1.smass+this.b2.smass;this.hc2=!1;var fst=!0,statType,bias=2!=this.b1.type||2!=this.b2.type?this.continuous?nape.Config.contactContinuousStaticBiasCoef:nape.Config.contactStaticBiasCoef:this.continuous?nape.Config.contactContinuousBiasCoef:nape.Config.contactBiasCoef;this.biasCoef=bias,this.continuous=!1;for(var pre=null,prei=null,cx_itei=this.innards.next,cx_ite=this.contacts.next,norm;null!=cx_ite;){var c=cx_ite;if(c.stamp+nape.Config.arbiterExpirationDelay<this.stamp){var _this=this.contacts,old,ret;null==pre?(ret=(old=_this.next).next,_this.next=ret,null==_this.next&&(_this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(_this.pushmod=!0)),old._inuse=!1,_this.modified=!0,_this.length--,_this.pushmod=!0,cx_ite=ret;var _this1=this.innards,old1,ret1;null==prei?(ret1=(old1=_this1.next).next,_this1.next=ret1,null==_this1.next&&(_this1.pushmod=!0)):(ret1=(old1=prei.next).next,prei.next=ret1,null==ret1&&(_this1.pushmod=!0)),old1._inuse=!1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,cx_itei=ret1;var o=c;o.arbiter=null,o.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o}else{var ci=c.inner,pact=c.active;if(c.active=c.stamp==this.stamp,c.active){fst?(fst=!1,this.c1=ci,this.oc1=c):(this.hc2=!0,this.c2=ci,this.oc2=c),ci.r2x=c.px-this.b2.posx,ci.r2y=c.py-this.b2.posy,ci.r1x=c.px-this.b1.posx,ci.r1y=c.py-this.b1.posy;var x=ci.r2x*this.nx+ci.r2y*this.ny,kt=mass_sum+this.b2.sinertia*(x*x),x1=ci.r1x*this.nx+ci.r1y*this.ny;kt+=this.b1.sinertia*(x1*x1),ci.tMass=kt<nape.Config.epsilon*nape.Config.epsilon?0:1/kt;var x2=this.ny*ci.r2x-this.nx*ci.r2y,nt=mass_sum+this.b2.sinertia*(x2*x2),x3=this.ny*ci.r1x-this.nx*ci.r1y;nt+=this.b1.sinertia*(x3*x3),ci.nMass=nt<nape.Config.epsilon*nape.Config.epsilon?0:1/nt;var vrx=0,vry=0,ang=this.b2.angvel+this.b2.kinangvel;vrx=this.b2.velx+this.b2.kinvelx-ci.r2y*ang,vry=this.b2.vely+this.b2.kinvely+ci.r2x*ang,ang=this.b1.angvel+this.b1.kinangvel,vrx-=this.b1.velx+this.b1.kinvelx-ci.r1y*ang,vry-=this.b1.vely+this.b1.kinvely+ci.r1x*ang;var vdot=this.nx*vrx+this.ny*vry;c.elasticity=this.restitution,ci.bounce=vdot*c.elasticity,ci.bounce>-nape.Config.elasticThreshold&&(ci.bounce=0),vdot=vry*this.nx-vrx*this.ny;var thr=nape.Config.staticFrictionThreshold;ci.friction=vdot*vdot>thr*thr?this.dyn_fric:this.stat_fric,ci.jnAcc*=dtratio,ci.jtAcc*=dtratio}pact!=c.active&&(this.contacts.modified=!0),pre=cx_ite,prei=cx_itei,cx_itei=cx_itei.next,cx_ite=cx_ite.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var tmp=this.c1;this.c1=this.c2,this.c2=tmp;var tmp2=this.oc1;this.oc1=this.oc2,this.oc2=tmp2,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(fst=!0)}else this.hpc2=!1;if(this.jrAcc*=dtratio,fst||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)),this.hc2)if(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=mass_sum+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=mass_sum+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=mass_sum+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<nape.Config.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc;var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(det!=det)this.kMassa=this.kMassb=this.kMassc=0;else if(0==det){var flag=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,flag|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,flag|=2),this.kMassb=0}else{det=1/det;var t=this.kMassc*det;this.kMassc=this.kMassa*det,this.kMassa=t,this.kMassb*=-det}}else{if(this.hc2=!1,this.oc2.dist<this.oc1.dist){var t1=this.c1;this.c1=this.c2,this.c2=t1}this.oc2.active=!1,this.contacts.modified=!0}this.surfacex=this.b2.svelx,this.surfacey=this.b2.svely;var t2=1;return this.surfacex+=1*this.b1.svelx,this.surfacey+=1*this.b1.svely,this.surfacex=-this.surfacex,this.surfacey=-this.surfacey,this.rMass=this.b1.sinertia+this.b2.sinertia,0!=this.rMass&&(this.rMass=1/this.rMass),fst},zpp_nape.dynamics.ZPP_ColArbiter.prototype.warmStart=function(){var jx=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,jy=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,t=this.b1.imass;this.b1.velx-=jx*t,this.b1.vely-=jy*t,this.b1.angvel-=this.b1.iinertia*(jy*this.c1.r1x-jx*this.c1.r1y);var t1=this.b2.imass;if(this.b2.velx+=jx*t1,this.b2.vely+=jy*t1,this.b2.angvel+=this.b2.iinertia*(jy*this.c1.r2x-jx*this.c1.r2y),this.hc2){var jx1=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,jy1=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,t2=this.b1.imass;this.b1.velx-=jx1*t2,this.b1.vely-=jy1*t2,this.b1.angvel-=this.b1.iinertia*(jy1*this.c2.r1x-jx1*this.c2.r1y);var t3=this.b2.imass;this.b2.velx+=jx1*t3,this.b2.vely+=jy1*t3,this.b2.angvel+=this.b2.iinertia*(jy1*this.c2.r2x-jx1*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia,this.b1.angvel-=this.jrAcc*this.b1.iinertia},zpp_nape.dynamics.ZPP_ColArbiter.prototype.applyImpulseVel=function(){var v1x=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),v1y=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),j=(v1y*this.nx-v1x*this.ny+this.surfacex)*this.c1.tMass,jMax=this.c1.friction*this.c1.jnAcc,jOld=this.c1.jtAcc,cjAcc=jOld-j;cjAcc>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,this.c1.jtAcc=cjAcc;var jx=-this.ny*j,jy=this.nx*j;if(this.b2.velx+=jx*this.b2.imass,this.b2.vely+=jy*this.b2.imass,this.b1.velx-=jx*this.b1.imass,this.b1.vely-=jy*this.b1.imass,this.b2.angvel+=this.rt1b*j*this.b2.iinertia,this.b1.angvel-=this.rt1a*j*this.b1.iinertia,this.hc2){var v2x=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),v2y=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);j=(v2y*this.nx-v2x*this.ny+this.surfacex)*this.c2.tMass,jMax=this.c2.friction*this.c2.jnAcc,(cjAcc=(jOld=this.c2.jtAcc)-j)>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,this.c2.jtAcc=cjAcc,jx=-this.ny*j,jy=this.nx*j,this.b2.velx+=jx*this.b2.imass,this.b2.vely+=jy*this.b2.imass,this.b1.velx-=jx*this.b1.imass,this.b1.vely-=jy*this.b1.imass,this.b2.angvel+=this.rt2b*j*this.b2.iinertia,this.b1.angvel-=this.rt2a*j*this.b1.iinertia,v1x=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),v1y=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),v2x=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),v2y=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var ax=this.c1.jnAcc,ay=this.c2.jnAcc,jnx=v1x*this.nx+v1y*this.ny+this.surfacey+this.c1.bounce-(this.Ka*ax+this.Kb*ay),jny=v2x*this.nx+v2y*this.ny+this.surfacey+this.c2.bounce-(this.Kb*ax+this.Kc*ay),xx=-(this.kMassa*jnx+this.kMassb*jny),xy=-(this.kMassb*jnx+this.kMassc*jny);xx>=0&&xy>=0?(jnx=xx-ax,jny=xy-ay,this.c1.jnAcc=xx,this.c2.jnAcc=xy):(xx=-this.c1.nMass*jnx)>=0&&this.Kb*xx+jny>=0?(jnx=xx-ax,jny=-ay,this.c1.jnAcc=xx,this.c2.jnAcc=0):(xy=-this.c2.nMass*jny)>=0&&this.Kb*xy+jnx>=0?(jnx=-ax,jny=xy-ay,this.c1.jnAcc=0,this.c2.jnAcc=xy):jnx>=0&&jny>=0?(jnx=-ax,jny=-ay,this.c1.jnAcc=this.c2.jnAcc=0):(jnx=0,jny=0),j=jnx+jny,jx=this.nx*j,jy=this.ny*j,this.b2.velx+=jx*this.b2.imass,this.b2.vely+=jy*this.b2.imass,this.b1.velx-=jx*this.b1.imass,this.b1.vely-=jy*this.b1.imass,this.b2.angvel+=(this.rn1b*jnx+this.rn2b*jny)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*jnx+this.rn2a*jny)*this.b1.iinertia}else{var dw;if(0!=this.radius)j=(this.b2.angvel-this.b1.angvel)*this.rMass,jMax=this.rfric*this.c1.jnAcc,jOld=this.jrAcc,this.jrAcc-=j,this.jrAcc>jMax?this.jrAcc=jMax:this.jrAcc<-jMax&&(this.jrAcc=-jMax),j=this.jrAcc-jOld,this.b2.angvel+=j*this.b2.iinertia,this.b1.angvel-=j*this.b1.iinertia;v1x=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),v1y=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),j=(this.c1.bounce+(this.nx*v1x+this.ny*v1y)+this.surfacey)*this.c1.nMass,(cjAcc=(jOld=this.c1.jnAcc)-j)<0&&(cjAcc=0),j=cjAcc-jOld,this.c1.jnAcc=cjAcc,jx=this.nx*j,jy=this.ny*j,this.b2.velx+=jx*this.b2.imass,this.b2.vely+=jy*this.b2.imass,this.b1.velx-=jx*this.b1.imass,this.b1.vely-=jy*this.b1.imass,this.b2.angvel+=this.rn1b*j*this.b2.iinertia,this.b1.angvel-=this.rn1a*j*this.b1.iinertia}},zpp_nape.dynamics.ZPP_ColArbiter.prototype.applyImpulsePos=function(){if(2==this.ptype){var c=this.c1,dx=0,dy=0,r2x=0,r2y=0;r2x=this.b2.axisy*c.lr2x-this.b2.axisx*c.lr2y,r2y=c.lr2x*this.b2.axisx+c.lr2y*this.b2.axisy;var t=1;r2x+=1*this.b2.posx,r2y+=1*this.b2.posy;var r1x=0,r1y=0;r1x=this.b1.axisy*c.lr1x-this.b1.axisx*c.lr1y,r1y=c.lr1x*this.b1.axisx+c.lr1y*this.b1.axisy;var t1=1,dx1=0,dy1=0;dx1=r2x-(r1x+=1*this.b1.posx),dy1=r2y-(r1y+=1*this.b1.posy);var dl=Math.sqrt(dx1*dx1+dy1*dy1),r=this.radius-nape.Config.collisionSlop,err=dl-r;if(dx1*this.nx+dy1*this.ny<0&&(dx1=-dx1,dy1=-dy1,err-=this.radius),err<0)if(dl<nape.Config.epsilon)0!=this.b1.smass?this.b1.posx+=10*nape.Config.epsilon:this.b2.posx+=10*nape.Config.epsilon;else{var t2=1/dl;dx1*=t2;var px=.5*(r1x+r2x),py=.5*(r1y+r2y),pen=dl-r,rn1=(dy1*=t2)*(r1x=px-this.b1.posx)-dx1*(r1y=py-this.b1.posy),rn2=dy1*(r2x=px-this.b2.posx)-dx1*(r2y=py-this.b2.posy),K=this.b2.smass+rn2*rn2*this.b2.sinertia+this.b1.smass+rn1*rn1*this.b1.sinertia;if(0!=K){var jn=-this.biasCoef*pen/K,Jx=0,Jy=0,t3=jn;Jx=dx1*jn,Jy=dy1*jn;var t4=this.b1.imass;this.b1.posx-=Jx*t4,this.b1.posy-=Jy*t4;var _this=this.b1,dr=-rn1*this.b1.iinertia*jn;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx}var t5=this.b2.imass;this.b2.posx+=Jx*t5,this.b2.posy+=Jy*t5;var _this1=this.b2,dr1=rn2*this.b2.iinertia*jn;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx1}}}}else{var gnormx=0,gnormy=0,gproj,clip1x=0,clip1y=0,clip2x=0,clip2y=0;if(0==this.ptype){gnormx=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,gnormy=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,gproj=this.lproj+(gnormx*this.b1.posx+gnormy*this.b1.posy),clip1x=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,clip1y=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy;var t6=1;if(clip1x+=1*this.b2.posx,clip1y+=1*this.b2.posy,this.hpc2){clip2x=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,clip2y=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy;var t7=1;clip2x+=1*this.b2.posx,clip2y+=1*this.b2.posy}}else{gnormx=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,gnormy=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,gproj=this.lproj+(gnormx*this.b2.posx+gnormy*this.b2.posy),clip1x=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,clip1y=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy;var t8=1;if(clip1x+=1*this.b1.posx,clip1y+=1*this.b1.posy,this.hpc2){clip2x=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,clip2y=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy;var t9=1;clip2x+=1*this.b1.posx,clip2y+=1*this.b1.posy}}var err1=clip1x*gnormx+clip1y*gnormy-gproj-this.radius;err1+=nape.Config.collisionSlop;var err2=0;if(this.hpc2&&(err2=clip2x*gnormx+clip2y*gnormy-gproj-this.radius,err2+=nape.Config.collisionSlop),err1<0||err2<0){this.rev&&(gnormx=-gnormx,gnormy=-gnormy);var c1r1x=0,c1r1y=0;c1r1x=clip1x-this.b1.posx,c1r1y=clip1y-this.b1.posy;var c1r2x=0,c1r2y=0;c1r2x=clip1x-this.b2.posx,c1r2y=clip1y-this.b2.posy;var c2r1x=0,c2r1y=0,c2r2x=0,c2r2y=0;if(this.hpc2){var rn1a=gnormy*c1r1x-gnormx*c1r1y,rn1b=gnormy*c1r2x-gnormx*c1r2y,rn2a=gnormy*(c2r1x=clip2x-this.b1.posx)-gnormx*(c2r1y=clip2y-this.b1.posy),rn2b=gnormy*(c2r2x=clip2x-this.b2.posx)-gnormx*(c2r2y=clip2y-this.b2.posy),mass_sum=this.b1.smass+this.b2.smass;this.kMassa=mass_sum+this.b1.sinertia*rn1a*rn1a+this.b2.sinertia*rn1b*rn1b,this.kMassb=mass_sum+this.b1.sinertia*rn1a*rn2a+this.b2.sinertia*rn1b*rn2b,this.kMassc=mass_sum+this.b1.sinertia*rn2a*rn2a+this.b2.sinertia*rn2b*rn2b;var Ka=0,Kb=0,Kc=0;Ka=this.kMassa,Kb=this.kMassb,Kc=this.kMassc;for(var bx=err1*this.biasCoef,by=err2*this.biasCoef;;){var xx=0,xy=0;xx=-(xx=bx),xy=-(xy=by);var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb,vn2,vn1;if(det!=det)xx=xy=0;else if(0==det)0!=this.kMassa?xx/=this.kMassa:xx=0,0!=this.kMassc?xy/=this.kMassc:xy=0;else{var t10=(det=1/det)*(this.kMassc*xx-this.kMassb*xy);xy=det*(this.kMassa*xy-this.kMassb*xx),xx=t10}if(xx>=0&&xy>=0){var t11=(xx+xy)*this.b1.imass;this.b1.posx-=gnormx*t11,this.b1.posy-=gnormy*t11;var _this2=this.b1,dr2=-this.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this2.rot+=dr2,dr2*dr2>1e-4)_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot);else{var d22=dr2*dr2,p2=1-.5*d22,m2=1-d22*d22/8,nx2=(p2*_this2.axisx+dr2*_this2.axisy)*m2;_this2.axisy=(p2*_this2.axisy-dr2*_this2.axisx)*m2,_this2.axisx=nx2}var t12=(xx+xy)*this.b2.imass;this.b2.posx+=gnormx*t12,this.b2.posy+=gnormy*t12;var _this3=this.b2,dr3=this.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this3.rot+=dr3,dr3*dr3>1e-4)_this3.axisx=Math.sin(_this3.rot),_this3.axisy=Math.cos(_this3.rot);else{var d23=dr3*dr3,p3=1-.5*d23,m3=1-d23*d23/8,nx3=(p3*_this3.axisx+dr3*_this3.axisy)*m3;_this3.axisy=(p3*_this3.axisy-dr3*_this3.axisx)*m3,_this3.axisx=nx3}break}if(xy=0,(xx=-bx/Ka)>=0&&Kb*xx+by>=0){var t13=(xx+xy)*this.b1.imass;this.b1.posx-=gnormx*t13,this.b1.posy-=gnormy*t13;var _this4=this.b1,dr4=-this.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this4.rot+=dr4,dr4*dr4>1e-4)_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot);else{var d24=dr4*dr4,p4=1-.5*d24,m4=1-d24*d24/8,nx4=(p4*_this4.axisx+dr4*_this4.axisy)*m4;_this4.axisy=(p4*_this4.axisy-dr4*_this4.axisx)*m4,_this4.axisx=nx4}var t14=(xx+xy)*this.b2.imass;this.b2.posx+=gnormx*t14,this.b2.posy+=gnormy*t14;var _this5=this.b2,dr5=this.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this5.rot+=dr5,dr5*dr5>1e-4)_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot);else{var d25=dr5*dr5,p5=1-.5*d25,m5=1-d25*d25/8,nx5=(p5*_this5.axisx+dr5*_this5.axisy)*m5;_this5.axisy=(p5*_this5.axisy-dr5*_this5.axisx)*m5,_this5.axisx=nx5}break}if(xx=0,(xy=-by/Kc)>=0&&Kb*xy+bx>=0){var t15=(xx+xy)*this.b1.imass;this.b1.posx-=gnormx*t15,this.b1.posy-=gnormy*t15;var _this6=this.b1,dr6=-this.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this6.rot+=dr6,dr6*dr6>1e-4)_this6.axisx=Math.sin(_this6.rot),_this6.axisy=Math.cos(_this6.rot);else{var d26=dr6*dr6,p6=1-.5*d26,m6=1-d26*d26/8,nx6=(p6*_this6.axisx+dr6*_this6.axisy)*m6;_this6.axisy=(p6*_this6.axisy-dr6*_this6.axisx)*m6,_this6.axisx=nx6}var t16=(xx+xy)*this.b2.imass;this.b2.posx+=gnormx*t16,this.b2.posy+=gnormy*t16;var _this7=this.b2,dr7=this.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this7.rot+=dr7,dr7*dr7>1e-4)_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot);else{var d27=dr7*dr7,p7=1-.5*d27,m7=1-d27*d27/8,nx7=(p7*_this7.axisx+dr7*_this7.axisy)*m7;_this7.axisy=(p7*_this7.axisy-dr7*_this7.axisx)*m7,_this7.axisx=nx7}break}break}}else{var rn11=gnormy*c1r1x-gnormx*c1r1y,rn21=gnormy*c1r2x-gnormx*c1r2y,K1=this.b2.smass+rn21*rn21*this.b2.sinertia+this.b1.smass+rn11*rn11*this.b1.sinertia;if(0!=K1){var jn1=-this.biasCoef*err1/K1,Jx1=0,Jy1=0,t17=jn1;Jx1=gnormx*jn1,Jy1=gnormy*jn1;var t18=this.b1.imass;this.b1.posx-=Jx1*t18,this.b1.posy-=Jy1*t18;var _this8=this.b1,dr8=-rn11*this.b1.iinertia*jn1;if(_this8.rot+=dr8,dr8*dr8>1e-4)_this8.axisx=Math.sin(_this8.rot),_this8.axisy=Math.cos(_this8.rot);else{var d28=dr8*dr8,p8=1-.5*d28,m8=1-d28*d28/8,nx8=(p8*_this8.axisx+dr8*_this8.axisy)*m8;_this8.axisy=(p8*_this8.axisy-dr8*_this8.axisx)*m8,_this8.axisx=nx8}var t19=this.b2.imass;this.b2.posx+=Jx1*t19,this.b2.posy+=Jy1*t19;var _this9=this.b2,dr9=rn21*this.b2.iinertia*jn1;if(_this9.rot+=dr9,dr9*dr9>1e-4)_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot);else{var d29=dr9*dr9,p9=1-.5*d29,m9=1-d29*d29/8,nx9=(p9*_this9.axisx+dr9*_this9.axisy)*m9;_this9.axisy=(p9*_this9.axisy-dr9*_this9.axisx)*m9,_this9.axisx=nx9}}}}}},zpp_nape.dynamics.ZPP_ColArbiter.prototype.__class__=zpp_nape.dynamics.ZPP_ColArbiter,zpp_nape.dynamics.ZPP_Contact=$hxClasses["zpp_nape.dynamics.ZPP_Contact"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.elasticity=0,this.dist=0,this.fresh=!1,this.hash=0,this.stamp=0,this.posOnly=!1,this.active=!1,this.inner=null,this.arbiter=null,this.wrap_position=null,this.py=0,this.px=0,this.outer=null,this.inner=new zpp_nape.dynamics.ZPP_IContact},zpp_nape.dynamics.ZPP_Contact.__name__=["zpp_nape","dynamics","ZPP_Contact"],zpp_nape.dynamics.ZPP_Contact.prototype.outer=null,zpp_nape.dynamics.ZPP_Contact.prototype.wrapper=function(){return null==this.outer&&(zpp_nape.dynamics.ZPP_Contact.internal=!0,this.outer=new nape.dynamics.Contact,zpp_nape.dynamics.ZPP_Contact.internal=!1,this.outer.zpp_inner=this),this.outer},zpp_nape.dynamics.ZPP_Contact.prototype.px=null,zpp_nape.dynamics.ZPP_Contact.prototype.py=null,zpp_nape.dynamics.ZPP_Contact.prototype.position_validate=function(){if(this.inactiveme())throw new js._Boot.HaxeError("Error: Contact not currently in use");this.wrap_position.zpp_inner.x=this.px,this.wrap_position.zpp_inner.y=this.py},zpp_nape.dynamics.ZPP_Contact.prototype.wrap_position=null,zpp_nape.dynamics.ZPP_Contact.prototype.getposition=function(){var me=this,ret;if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=0,ret1.y=0,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),0==ret.zpp_inner.x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=0==ret.zpp_inner.y}else tmp=!1;if(!tmp){ret.zpp_inner.x=0,ret.zpp_inner.y=0;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_position=ret,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!0,this.wrap_position.zpp_inner._validate=$bind(this,this.position_validate)},zpp_nape.dynamics.ZPP_Contact.prototype.inactiveme=function(){return!(this.active&&null!=this.arbiter&&this.arbiter.active)},zpp_nape.dynamics.ZPP_Contact.prototype.arbiter=null,zpp_nape.dynamics.ZPP_Contact.prototype.inner=null,zpp_nape.dynamics.ZPP_Contact.prototype.active=null,zpp_nape.dynamics.ZPP_Contact.prototype.posOnly=null,zpp_nape.dynamics.ZPP_Contact.prototype.stamp=null,zpp_nape.dynamics.ZPP_Contact.prototype.hash=null,zpp_nape.dynamics.ZPP_Contact.prototype.fresh=null,zpp_nape.dynamics.ZPP_Contact.prototype.dist=null,zpp_nape.dynamics.ZPP_Contact.prototype.elasticity=null,zpp_nape.dynamics.ZPP_Contact.prototype.free=function(){this.arbiter=null},zpp_nape.dynamics.ZPP_Contact.prototype.alloc=function(){},zpp_nape.dynamics.ZPP_Contact.prototype.next=null,zpp_nape.dynamics.ZPP_Contact.prototype.elem=function(){return this},zpp_nape.dynamics.ZPP_Contact.prototype.begin=function(){return this.next},zpp_nape.dynamics.ZPP_Contact.prototype._inuse=null,zpp_nape.dynamics.ZPP_Contact.prototype.modified=null,zpp_nape.dynamics.ZPP_Contact.prototype.pushmod=null,zpp_nape.dynamics.ZPP_Contact.prototype.length=null,zpp_nape.dynamics.ZPP_Contact.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.dynamics.ZPP_Contact.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.dynamics.ZPP_Contact.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.dynamics.ZPP_Contact.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.dynamics.ZPP_Contact.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.dynamics.ZPP_Contact.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.dynamics.ZPP_Contact.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.dynamics.ZPP_Contact.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.dynamics.ZPP_Contact.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.dynamics.ZPP_Contact.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.dynamics.ZPP_Contact.prototype.clear=function(){},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_clear=function(){},zpp_nape.dynamics.ZPP_Contact.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.dynamics.ZPP_Contact.prototype.empty=function(){return null==this.next},zpp_nape.dynamics.ZPP_Contact.prototype.size=function(){return this.length},zpp_nape.dynamics.ZPP_Contact.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.dynamics.ZPP_Contact.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.dynamics.ZPP_Contact.prototype.front=function(){return this.next},zpp_nape.dynamics.ZPP_Contact.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.dynamics.ZPP_Contact.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.dynamics.ZPP_Contact.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.dynamics.ZPP_Contact.prototype.__class__=zpp_nape.dynamics.ZPP_Contact,zpp_nape.dynamics.ZPP_IContact=$hxClasses["zpp_nape.dynamics.ZPP_IContact"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.lr2y=0,this.lr2x=0,this.lr1y=0,this.lr1x=0,this.jtAcc=0,this.jnAcc=0,this.friction=0,this.bounce=0,this.tMass=0,this.nMass=0,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0},zpp_nape.dynamics.ZPP_IContact.__name__=["zpp_nape","dynamics","ZPP_IContact"],zpp_nape.dynamics.ZPP_IContact.prototype.r1x=null,zpp_nape.dynamics.ZPP_IContact.prototype.r1y=null,zpp_nape.dynamics.ZPP_IContact.prototype.r2x=null,zpp_nape.dynamics.ZPP_IContact.prototype.r2y=null,zpp_nape.dynamics.ZPP_IContact.prototype.nMass=null,zpp_nape.dynamics.ZPP_IContact.prototype.tMass=null,zpp_nape.dynamics.ZPP_IContact.prototype.bounce=null,zpp_nape.dynamics.ZPP_IContact.prototype.friction=null,zpp_nape.dynamics.ZPP_IContact.prototype.jnAcc=null,zpp_nape.dynamics.ZPP_IContact.prototype.jtAcc=null,zpp_nape.dynamics.ZPP_IContact.prototype.lr1x=null,zpp_nape.dynamics.ZPP_IContact.prototype.lr1y=null,zpp_nape.dynamics.ZPP_IContact.prototype.lr2x=null,zpp_nape.dynamics.ZPP_IContact.prototype.lr2y=null,zpp_nape.dynamics.ZPP_IContact.prototype.next=null,zpp_nape.dynamics.ZPP_IContact.prototype.elem=function(){return this},zpp_nape.dynamics.ZPP_IContact.prototype.begin=function(){return this.next},zpp_nape.dynamics.ZPP_IContact.prototype._inuse=null,zpp_nape.dynamics.ZPP_IContact.prototype.modified=null,zpp_nape.dynamics.ZPP_IContact.prototype.pushmod=null,zpp_nape.dynamics.ZPP_IContact.prototype.length=null,zpp_nape.dynamics.ZPP_IContact.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.dynamics.ZPP_IContact.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.dynamics.ZPP_IContact.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.dynamics.ZPP_IContact.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.dynamics.ZPP_IContact.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.dynamics.ZPP_IContact.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.dynamics.ZPP_IContact.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.dynamics.ZPP_IContact.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.dynamics.ZPP_IContact.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.dynamics.ZPP_IContact.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.dynamics.ZPP_IContact.prototype.clear=function(){},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_clear=function(){},zpp_nape.dynamics.ZPP_IContact.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.dynamics.ZPP_IContact.prototype.empty=function(){return null==this.next},zpp_nape.dynamics.ZPP_IContact.prototype.size=function(){return this.length},zpp_nape.dynamics.ZPP_IContact.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.dynamics.ZPP_IContact.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.dynamics.ZPP_IContact.prototype.front=function(){return this.next},zpp_nape.dynamics.ZPP_IContact.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.dynamics.ZPP_IContact.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.dynamics.ZPP_IContact.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.dynamics.ZPP_IContact.prototype.__class__=zpp_nape.dynamics.ZPP_IContact,zpp_nape.dynamics.ZPP_InteractionFilter=$hxClasses["zpp_nape.dynamics.ZPP_InteractionFilter"]=function(){this.fluidMask=0,this.fluidGroup=0,this.sensorMask=0,this.sensorGroup=0,this.collisionMask=0,this.collisionGroup=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape,this.collisionGroup=this.sensorGroup=this.fluidGroup=1,this.collisionMask=this.sensorMask=this.fluidMask=-1},zpp_nape.dynamics.ZPP_InteractionFilter.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"],zpp_nape.dynamics.ZPP_InteractionFilter.prototype.next=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.userData=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.outer=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.dynamics.InteractionFilter;var o=this.outer.zpp_inner;o.outer=null,o.next=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.free=function(){this.outer=null},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.alloc=function(){},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.shapes=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.wrap_shapes=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.feature_cons=function(){this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.addShape=function(shape){this.shapes.add(shape)},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.remShape=function(shape){this.shapes.remove(shape)},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.copy=function(){var ret;return null==zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool?ret=new zpp_nape.dynamics.ZPP_InteractionFilter:(ret=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=ret.next,ret.next=null),ret.collisionGroup=this.collisionGroup,ret.collisionMask=this.collisionMask,ret.sensorGroup=this.sensorGroup,ret.sensorMask=this.sensorMask,ret.fluidGroup=this.fluidGroup,ret.fluidMask=this.fluidMask,ret},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.collisionGroup=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.collisionMask=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.shouldCollide=function(x){return 0!=(this.collisionMask&x.collisionGroup)&&0!=(x.collisionMask&this.collisionGroup)},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.sensorGroup=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.sensorMask=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.shouldSense=function(x){return 0!=(this.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&this.sensorGroup)},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.fluidGroup=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.fluidMask=null,zpp_nape.dynamics.ZPP_InteractionFilter.prototype.shouldFlow=function(x){return 0!=(this.fluidMask&x.fluidGroup)&&0!=(x.fluidMask&this.fluidGroup)},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.invalidate=function(){for(var cx_ite=this.shapes.head;null!=cx_ite;){var s;cx_ite.elt.invalidate_filter(),cx_ite=cx_ite.next}},zpp_nape.dynamics.ZPP_InteractionFilter.prototype.__class__=zpp_nape.dynamics.ZPP_InteractionFilter,zpp_nape.dynamics.ZPP_InteractionGroup=$hxClasses["zpp_nape.dynamics.ZPP_InteractionGroup"]=function(){this.depth=0,this.wrap_interactors=null,this.interactors=null,this.wrap_groups=null,this.groups=null,this.group=null,this.ignore=!1,this.outer=null,this.depth=0,this.groups=new zpp_nape.util.ZNPList_ZPP_InteractionGroup,this.interactors=new zpp_nape.util.ZNPList_ZPP_Interactor},zpp_nape.dynamics.ZPP_InteractionGroup.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"],zpp_nape.dynamics.ZPP_InteractionGroup.prototype.outer=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.ignore=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.group=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.setGroup=function(group){this.group!=group&&(null!=this.group&&(this.group.groups.remove(this),this.depth=0,this.group.invalidate(!0)),this.group=group,null!=group?(group.groups.add(this),this.depth=group.depth+1,group.invalidate(!0)):this.invalidate(!0))},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.groups=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.wrap_groups=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.interactors=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.wrap_interactors=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.depth=null,zpp_nape.dynamics.ZPP_InteractionGroup.prototype.invalidate=function(force){if(null==force&&(force=!1),force||this.ignore){for(var cx_ite=this.interactors.head;null!=cx_ite;){var b=cx_ite.elt;null!=b.ibody?b.ibody.wake():null!=b.ishape?b.ishape.body.wake():b.icompound.wake(),cx_ite=cx_ite.next}for(var cx_ite1=this.groups.head;null!=cx_ite1;){var g;cx_ite1.elt.invalidate(force),cx_ite1=cx_ite1.next}}},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.addGroup=function(group){this.groups.add(group),group.depth=this.depth+1},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.remGroup=function(group){this.groups.remove(group),group.depth=0},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.addInteractor=function(intx){this.interactors.add(intx)},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.remInteractor=function(intx,flag){null==flag&&(flag=-1),this.interactors.remove(intx)},zpp_nape.dynamics.ZPP_InteractionGroup.prototype.__class__=zpp_nape.dynamics.ZPP_InteractionGroup,zpp_nape.dynamics.ZPP_SpaceArbiterList=$hxClasses["zpp_nape.dynamics.ZPP_SpaceArbiterList"]=function(){this.at_index_3=0,this.at_index_2=0,this.at_index_1=0,this.at_index_0=0,this.ite_3=null,this.ite_2=null,this.ite_1=null,this.ite_0=null,this.lengths=null,this.zip_length=!1,this._length=0,this.space=null,nape.dynamics.ArbiterList.call(this),this.at_index_0=0,this.at_index_1=0,this.at_index_2=0,this.at_index_3=0,this.zip_length=!0,this._length=0,this.lengths=[],this.lengths.push(0),this.lengths.push(0),this.lengths.push(0),this.lengths.push(0)},zpp_nape.dynamics.ZPP_SpaceArbiterList.__name__=["zpp_nape","dynamics","ZPP_SpaceArbiterList"],zpp_nape.dynamics.ZPP_SpaceArbiterList.__super__=nape.dynamics.ArbiterList,nape.dynamics.ArbiterList.prototype)zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype[k]=nape.dynamics.ArbiterList.prototype[k];for(var k in zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.space=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype._length=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.zip_length=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var ind=0,len=0,cx_ite=this.space.c_arbiters_true.head;null!=cx_ite;){var i;cx_ite.elt.active&&++len,cx_ite=cx_ite.next}this.lengths[ind++]=len,this._length+=len;for(var len1=0,cx_ite1=this.space.c_arbiters_false.head;null!=cx_ite1;){var i1;cx_ite1.elt.active&&++len1,cx_ite1=cx_ite1.next}this.lengths[ind++]=len1,this._length+=len1;for(var len2=0,cx_ite2=this.space.f_arbiters.head;null!=cx_ite2;){var i2;cx_ite2.elt.active&&++len2,cx_ite2=cx_ite2.next}this.lengths[ind++]=len2,this._length+=len2;for(var len3=0,cx_ite3=this.space.s_arbiters.head;null!=cx_ite3;){var i3;cx_ite3.elt.active&&++len3,cx_ite3=cx_ite3.next}this.lengths[ind++]=len3,this._length+=len3,this.zip_length=!1}return this._length},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.lengths=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.ite_0=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.ite_1=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.ite_2=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.ite_3=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.at_index_0=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.at_index_1=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.at_index_2=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.at_index_3=null,zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.zpp_vm=function(){var modified=!1;this.space.c_arbiters_true.modified&&(modified=!0,this.space.c_arbiters_true.modified=!1),this.space.c_arbiters_false.modified&&(modified=!0,this.space.c_arbiters_false.modified=!1),this.space.f_arbiters.modified&&(modified=!0,this.space.f_arbiters.modified=!1),this.space.s_arbiters.modified&&(modified=!0,this.space.s_arbiters.modified=!1),modified&&(this.zip_length=!0,this._length=0,this.ite_0=null,this.ite_1=null,this.ite_2=null,this.ite_3=null)},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.push=function(obj){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.pop=function(){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.unshift=function(obj){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.shift=function(){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.remove=function(obj){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.clear=function(){throw new js._Boot.HaxeError("Error: ArbiterList is immutable")},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.at=function(index){if(this.zpp_vm(),index<0||index>=this.zpp_gl())throw new js._Boot.HaxeError("Error: Index out of bounds");var ret=null,accum_length=0;if(null==ret)if(index<accum_length+this.lengths[0]){var offset=index-accum_length;if(offset<this.at_index_0||null==this.ite_0)for(this.at_index_0=0,this.ite_0=this.space.c_arbiters_true.head;;){var x;if(this.ite_0.elt.active)break;this.ite_0=this.ite_0.next}for(;this.at_index_0!=offset;)for(this.at_index_0++,this.ite_0=this.ite_0.next;;){var x1;if(this.ite_0.elt.active)break;this.ite_0=this.ite_0.next}ret=this.ite_0.elt.wrapper()}else accum_length+=this.lengths[0];if(null==ret)if(index<accum_length+this.lengths[1]){var offset1=index-accum_length;if(offset1<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.head;;){var x2;if(this.ite_1.elt.active)break;this.ite_1=this.ite_1.next}for(;this.at_index_1!=offset1;)for(this.at_index_1++,this.ite_1=this.ite_1.next;;){var x3;if(this.ite_1.elt.active)break;this.ite_1=this.ite_1.next}ret=this.ite_1.elt.wrapper()}else accum_length+=this.lengths[1];if(null==ret)if(index<accum_length+this.lengths[2]){var offset2=index-accum_length;if(offset2<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.head;;){var x4;if(this.ite_2.elt.active)break;this.ite_2=this.ite_2.next}for(;this.at_index_2!=offset2;)for(this.at_index_2++,this.ite_2=this.ite_2.next;;){var x5;if(this.ite_2.elt.active)break;this.ite_2=this.ite_2.next}ret=this.ite_2.elt.wrapper()}else accum_length+=this.lengths[2];if(null==ret)if(index<accum_length+this.lengths[3]){var offset3=index-accum_length;if(offset3<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.head;;){var x6;if(this.ite_3.elt.active)break;this.ite_3=this.ite_3.next}for(;this.at_index_3!=offset3;)for(this.at_index_3++,this.ite_3=this.ite_3.next;;){var x7;if(this.ite_3.elt.active)break;this.ite_3=this.ite_3.next}ret=this.ite_3.elt.wrapper()}else accum_length+=this.lengths[3];return ret},zpp_nape.dynamics.ZPP_SpaceArbiterList.prototype.__class__=zpp_nape.dynamics.ZPP_SpaceArbiterList,zpp_nape.geom||(zpp_nape.geom={}),zpp_nape.geom.ZPP_AABB=$hxClasses["zpp_nape.geom.ZPP_AABB"]=function(){this.wrap_max=null,this.maxy=0,this.maxx=0,this.wrap_min=null,this.miny=0,this.minx=0,this.next=null,this.outer=null,this._immutable=!1,this._validate=null,this._invalidate=null},zpp_nape.geom.ZPP_AABB.__name__=["zpp_nape","geom","ZPP_AABB"],zpp_nape.geom.ZPP_AABB.get=function(minx,miny,maxx,maxy){var ret;return null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=minx,ret.miny=miny,ret.maxx=maxx,ret.maxy=maxy,ret},zpp_nape.geom.ZPP_AABB.prototype._invalidate=null,zpp_nape.geom.ZPP_AABB.prototype._validate=null,zpp_nape.geom.ZPP_AABB.prototype._immutable=null,zpp_nape.geom.ZPP_AABB.prototype.validate=function(){null!=this._validate&&this._validate()},zpp_nape.geom.ZPP_AABB.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},zpp_nape.geom.ZPP_AABB.prototype.outer=null,zpp_nape.geom.ZPP_AABB.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.geom.AABB;var o=this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.geom.ZPP_AABB.prototype.next=null,zpp_nape.geom.ZPP_AABB.prototype.alloc=function(){},zpp_nape.geom.ZPP_AABB.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this.wrap_min=this.wrap_max=null,this._invalidate=null,this._validate=null},zpp_nape.geom.ZPP_AABB.prototype.copy=function(){var minx=this.minx,miny=this.miny,maxx=this.maxx,maxy=this.maxy,ret;return null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=minx,ret.miny=miny,ret.maxx=maxx,ret.maxy=maxy,ret},zpp_nape.geom.ZPP_AABB.prototype.width=function(){return this.maxx-this.minx},zpp_nape.geom.ZPP_AABB.prototype.height=function(){return this.maxy-this.miny},zpp_nape.geom.ZPP_AABB.prototype.perimeter=function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},zpp_nape.geom.ZPP_AABB.prototype.minx=null,zpp_nape.geom.ZPP_AABB.prototype.miny=null,zpp_nape.geom.ZPP_AABB.prototype.wrap_min=null,zpp_nape.geom.ZPP_AABB.prototype.getmin=function(){if(null==this.wrap_min){var x=this.minx,y=this.miny,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_min=ret,this.wrap_min.zpp_inner._inuse=!0,this._immutable?this.wrap_min.zpp_inner._immutable=!0:this.wrap_min.zpp_inner._invalidate=$bind(this,this.mod_min),this.wrap_min.zpp_inner._validate=$bind(this,this.dom_min)}return this.wrap_min},zpp_nape.geom.ZPP_AABB.prototype.dom_min=function(){null!=this._validate&&this._validate(),this.wrap_min.zpp_inner.x=this.minx,this.wrap_min.zpp_inner.y=this.miny},zpp_nape.geom.ZPP_AABB.prototype.mod_min=function(min){min.x==this.minx&&min.y==this.miny||(this.minx=min.x,this.miny=min.y,null!=this._invalidate&&this._invalidate(this))},zpp_nape.geom.ZPP_AABB.prototype.maxx=null,zpp_nape.geom.ZPP_AABB.prototype.maxy=null,zpp_nape.geom.ZPP_AABB.prototype.wrap_max=null,zpp_nape.geom.ZPP_AABB.prototype.getmax=function(){if(null==this.wrap_max){var x=this.maxx,y=this.maxy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_max=ret,this.wrap_max.zpp_inner._inuse=!0,this._immutable?this.wrap_max.zpp_inner._immutable=!0:this.wrap_max.zpp_inner._invalidate=$bind(this,this.mod_max),this.wrap_max.zpp_inner._validate=$bind(this,this.dom_max)}return this.wrap_max},zpp_nape.geom.ZPP_AABB.prototype.dom_max=function(){null!=this._validate&&this._validate(),this.wrap_max.zpp_inner.x=this.maxx,this.wrap_max.zpp_inner.y=this.maxy},zpp_nape.geom.ZPP_AABB.prototype.mod_max=function(max){max.x==this.maxx&&max.y==this.maxy||(this.maxx=max.x,this.maxy=max.y,null!=this._invalidate&&this._invalidate(this))},zpp_nape.geom.ZPP_AABB.prototype.intersectX=function(x){return!(x.minx>this.maxx||this.minx>x.maxx)},zpp_nape.geom.ZPP_AABB.prototype.intersectY=function(x){return!(x.miny>this.maxy||this.miny>x.maxy)},zpp_nape.geom.ZPP_AABB.prototype.intersect=function(x){return x.miny<=this.maxy&&this.miny<=x.maxy&&x.minx<=this.maxx&&this.minx<=x.maxx},zpp_nape.geom.ZPP_AABB.prototype.combine=function(x){x.minx<this.minx&&(this.minx=x.minx),x.maxx>this.maxx&&(this.maxx=x.maxx),x.miny<this.miny&&(this.miny=x.miny),x.maxy>this.maxy&&(this.maxy=x.maxy)},zpp_nape.geom.ZPP_AABB.prototype.contains=function(x){return x.minx>=this.minx&&x.miny>=this.miny&&x.maxx<=this.maxx&&x.maxy<=this.maxy},zpp_nape.geom.ZPP_AABB.prototype.containsPoint=function(v){return v.x>=this.minx&&v.x<=this.maxx&&v.y>=this.miny&&v.y<=this.maxy},zpp_nape.geom.ZPP_AABB.prototype.setCombine=function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx,this.miny=a.miny<b.miny?a.miny:b.miny,this.maxx=a.maxx>b.maxx?a.maxx:b.maxx,this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},zpp_nape.geom.ZPP_AABB.prototype.setExpand=function(a,fatten){this.minx=a.minx-fatten,this.miny=a.miny-fatten,this.maxx=a.maxx+fatten,this.maxy=a.maxy+fatten},zpp_nape.geom.ZPP_AABB.prototype.setExpandPoint=function(x,y){x<this.minx&&(this.minx=x),x>this.maxx&&(this.maxx=x),y<this.miny&&(this.miny=y),y>this.maxy&&(this.maxy=y)},zpp_nape.geom.ZPP_AABB.prototype.toString=function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},zpp_nape.geom.ZPP_AABB.prototype.__class__=zpp_nape.geom.ZPP_AABB,zpp_nape.util.ZNPList_ZPP_Vec2=$hxClasses["zpp_nape.util.ZNPList_ZPP_Vec2"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Vec2.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"],zpp_nape.util.ZNPList_ZPP_Vec2.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Vec2.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Vec2.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Vec2.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Vec2.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Vec2:(ret=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Vec2:(ret=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Vec2:(ret=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Vec2:(ret=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Vec2.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Vec2,zpp_nape.geom.ZPP_Collide=$hxClasses["zpp_nape.geom.ZPP_Collide"]=function(){},zpp_nape.geom.ZPP_Collide.__name__=["zpp_nape","geom","ZPP_Collide"],zpp_nape.geom.ZPP_Collide.circleContains=function(c,p){var dx=0,dy=0;return(dx=p.x-c.worldCOMx)*dx+(dy=p.y-c.worldCOMy)*dy<c.radius*c.radius},zpp_nape.geom.ZPP_Collide.polyContains=function(s,p){var retvar;retvar=!0;for(var cx_ite=s.edges.head;null!=cx_ite;){var a=cx_ite.elt;if(!(a.gnormx*p.x+a.gnormy*p.y<=a.gprojection)){retvar=!1;break}cx_ite=cx_ite.next}return retvar},zpp_nape.geom.ZPP_Collide.shapeContains=function(s,p){return 0==s.type?zpp_nape.geom.ZPP_Collide.circleContains(s.circle,p):zpp_nape.geom.ZPP_Collide.polyContains(s.polygon,p)},zpp_nape.geom.ZPP_Collide.bodyContains=function(b,p){var retvar;retvar=!1;for(var cx_ite=b.shapes.head;null!=cx_ite;){var s=cx_ite.elt;if(zpp_nape.geom.ZPP_Collide.shapeContains(s,p)){retvar=!0;break}cx_ite=cx_ite.next}return retvar},zpp_nape.geom.ZPP_Collide.containTest=function(s1,s2){var _this=s1.aabb,x=s2.aabb;if(x.minx>=_this.minx&&x.miny>=_this.miny&&x.maxx<=_this.maxx&&x.maxy<=_this.maxy){if(0==s1.type){if(0==s2.type){var minDist=s1.circle.radius+-s2.circle.radius,px=0,py=0,distSqr;return(px=s2.circle.worldCOMx-s1.circle.worldCOMx)*px+(py=s2.circle.worldCOMy-s1.circle.worldCOMy)*py<=minDist*minDist}var retvar;retvar=!0;for(var cx_ite=s2.polygon.gverts.next;null!=cx_ite;){var p=cx_ite,minDist1=s1.circle.radius,px1=0,py1=0,distSqr1;if(!((px1=p.x-s1.circle.worldCOMx)*px1+(py1=p.y-s1.circle.worldCOMy)*py1<=minDist1*minDist1)){retvar=!1;break}cx_ite=cx_ite.next}return retvar}if(0==s2.type){var retvar1;retvar1=!0;for(var cx_ite1=s1.polygon.edges.head;null!=cx_ite1;){var a=cx_ite1.elt;if(!(a.gnormx*s2.circle.worldCOMx+a.gnormy*s2.circle.worldCOMy+s2.circle.radius<=a.gprojection)){retvar1=!1;break}cx_ite1=cx_ite1.next}return retvar1}var retvar2;retvar2=!0;for(var cx_ite2=s1.polygon.edges.head;null!=cx_ite2;){for(var a1=cx_ite2.elt,max=-1e100,cx_ite3=s2.polygon.gverts.next;null!=cx_ite3;){var v=cx_ite3,k=a1.gnormx*v.x+a1.gnormy*v.y;k>max&&(max=k),cx_ite3=cx_ite3.next}if(!(max<=a1.gprojection)){retvar2=!1;break}cx_ite2=cx_ite2.next}return retvar2}return!1},zpp_nape.geom.ZPP_Collide.contactCollide=function(s1,s2,arb,rev){if(1==s2.type){if(1==s1.type){for(var cont=!0,max=-1e100,maxmin=-1e100,maxi=-1,axis1=null,axis2=null,cx_ite=s1.polygon.edges.head;null!=cx_ite;){for(var ax=cx_ite.elt,min=1e100,cx_ite1=s2.polygon.gverts.next;null!=cx_ite1;){var v=cx_ite1,k=ax.gnormx*v.x+ax.gnormy*v.y;if(k<min&&(min=k),min-ax.gprojection<=max)break;cx_ite1=cx_ite1.next}if((min-=ax.gprojection)>=0){cont=!1;break}min>max&&(max=min,axis1=ax,maxi=1),cx_ite=cx_ite.next}if(cont){for(var cx_ite2=s2.polygon.edges.head;null!=cx_ite2;){for(var ax1=cx_ite2.elt,min1=1e100,cx_ite3=s1.polygon.gverts.next;null!=cx_ite3;){var v1=cx_ite3,k1=ax1.gnormx*v1.x+ax1.gnormy*v1.y;if(k1<min1&&(min1=k1),min1-ax1.gprojection<=max)break;cx_ite3=cx_ite3.next}if((min1-=ax1.gprojection)>=0){cont=!1;break}min1>max&&(max=min1,axis2=ax1,maxi=2),cx_ite2=cx_ite2.next}if(cont){var q1,q2,ax2,scale;1==maxi?(q1=s1.polygon,q2=s2.polygon,ax2=axis1,scale=1):(q1=s2.polygon,q2=s1.polygon,ax2=axis2,scale=-1);for(var ay=null,min2=1e100,cx_ite4=q2.edges.head;null!=cx_ite4;){var axis=cx_ite4.elt,k2=ax2.gnormx*axis.gnormx+ax2.gnormy*axis.gnormy;k2<min2&&(min2=k2,ay=axis),cx_ite4=cx_ite4.next}var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax2.gnormy*c0x-ax2.gnormx*c0y,d1=ax2.gnormy*c1x-ax2.gnormx*c1y,den=1/(d1-d0),t=(-ax2.tp1-d0)*den;if(t>nape.Config.epsilon){var t1=t;c0x+=dvx*t,c0y+=dvy*t}var t2=(-ax2.tp0-d1)*den;if(t2<-nape.Config.epsilon){var t3=t2;c1x+=dvx*t2,c1y+=dvy*t2}var nx=0,ny=0,t4=scale;nx=ax2.gnormx*t4,ny=ax2.gnormy*t4,arb.lnormx=ax2.lnormx,arb.lnormy=ax2.lnormy,arb.lproj=ax2.lprojection,arb.radius=0,arb.rev=rev!=(-1==scale),arb.ptype=arb.rev?1:0;var c0d=c0x*ax2.gnormx+c0y*ax2.gnormy-ax2.gprojection,c1d=c1x*ax2.gnormx+c1y*ax2.gnormy-ax2.gprojection;if(c0d>0&&c1d>0)return!1;rev&&(nx=-nx,ny=-ny);var px=c0x-ax2.gnormx*c0d*.5,py=c0y-ax2.gnormy*c0d*.5,hash=arb.rev?1:0,posOnly=c0d>0;null==posOnly&&(posOnly=!1);for(var c=null,cx_ite5=arb.contacts.next;null!=cx_ite5;){var cur=cx_ite5;if(hash==cur.hash){c=cur;break}cx_ite5=cx_ite5.next}if(null==c){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c=new zpp_nape.dynamics.ZPP_Contact:(c=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c.next,c.next=null);var ci=c.inner;ci.jnAcc=ci.jtAcc=0,c.hash=hash,c.fresh=!0,c.arbiter=arb,arb.jrAcc=0;var _this=arb.contacts;c._inuse=!0;var temp=c;temp.next=_this.next,_this.next=temp,_this.modified=!0,_this.length++,arb.innards.add(ci)}else c.fresh=!1;c.px=px,c.py=py,arb.nx=nx,arb.ny=ny,c.dist=c0d,c.stamp=arb.stamp,c.posOnly=posOnly;var con=c,t5=1;c0x-=1*q2.body.posx,c0y-=1*q2.body.posy,con.inner.lr1x=c0x*q2.body.axisy+c0y*q2.body.axisx,con.inner.lr1y=c0y*q2.body.axisy-c0x*q2.body.axisx;var px1=c1x-ax2.gnormx*c1d*.5,py1=c1y-ax2.gnormy*c1d*.5,hash1=arb.rev?0:1,posOnly1=c1d>0;null==posOnly1&&(posOnly1=!1);for(var c1=null,cx_ite6=arb.contacts.next;null!=cx_ite6;){var cur1=cx_ite6;if(hash1==cur1.hash){c1=cur1;break}cx_ite6=cx_ite6.next}if(null==c1){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c1=new zpp_nape.dynamics.ZPP_Contact:(c1=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c1.next,c1.next=null);var ci1=c1.inner;ci1.jnAcc=ci1.jtAcc=0,c1.hash=hash1,c1.fresh=!0,c1.arbiter=arb,arb.jrAcc=0;var _this1=arb.contacts;c1._inuse=!0;var temp1=c1;temp1.next=_this1.next,_this1.next=temp1,_this1.modified=!0,_this1.length++,arb.innards.add(ci1)}else c1.fresh=!1;c1.px=px1,c1.py=py1,arb.nx=nx,arb.ny=ny,c1.dist=c1d,c1.stamp=arb.stamp,c1.posOnly=posOnly1,con=c1;var t6=1;return c1x-=1*q2.body.posx,c1y-=1*q2.body.posy,con.inner.lr1x=c1x*q2.body.axisy+c1y*q2.body.axisx,con.inner.lr1y=c1y*q2.body.axisy-c1x*q2.body.axisx,1==maxi?(arb.__ref_edge1=ax2,arb.__ref_edge2=ay):(arb.__ref_edge2=ax2,arb.__ref_edge1=ay),!0}return!1}return!1}for(var max1=-1e100,minmax=-1e100,cont1=!0,a0=null,vi=null,vite=s2.polygon.gverts.next,cx_ite7=s2.polygon.edges.head;null!=cx_ite7;){var a=cx_ite7.elt,dist=a.gnormx*s1.circle.worldCOMx+a.gnormy*s1.circle.worldCOMy-a.gprojection-s1.circle.radius;if(dist>0){cont1=!1;break}dist>max1&&(max1=dist,a0=a,vi=vite),vite=vite.next,cx_ite7=cx_ite7.next}if(cont1){var v0=vi,v11=null==vi.next?s2.polygon.gverts.next:vi.next,dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius,px2=0,py2=0,distSqr=(px2=v0.x-s1.circle.worldCOMx)*px2+(py2=v0.y-s1.circle.worldCOMy)*py2,co;if(distSqr>minDist*minDist)co=null;else if(distSqr<nape.Config.epsilon*nape.Config.epsilon){for(var px3=s1.circle.worldCOMx,py3=s1.circle.worldCOMy,c2=null,cx_ite8=arb.contacts.next;null!=cx_ite8;){var cur2=cx_ite8;if(0==cur2.hash){c2=cur2;break}cx_ite8=cx_ite8.next}if(null==c2){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c2=new zpp_nape.dynamics.ZPP_Contact:(c2=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c2.next,c2.next=null);var ci2=c2.inner;ci2.jnAcc=ci2.jtAcc=0,c2.hash=0,c2.fresh=!0,c2.arbiter=arb,arb.jrAcc=0;var _this2=arb.contacts;c2._inuse=!0;var temp2=c2;temp2.next=_this2.next,_this2.next=temp2,_this2.modified=!0,_this2.length++,arb.innards.add(ci2)}else c2.fresh=!1;c2.px=px3,c2.py=py3,arb.nx=1,arb.ny=0,c2.dist=-minDist,c2.stamp=arb.stamp,c2.posOnly=!1,co=c2}else{var invDist=1/Math.sqrt(distSqr),dist1=invDist<nape.Config.epsilon?1e100:1/invDist,df=.5+(s1.circle.radius-.5*minDist)*invDist;if(rev){for(var px4=s1.circle.worldCOMx+px2*df,py4=s1.circle.worldCOMy+py2*df,c3=null,cx_ite9=arb.contacts.next;null!=cx_ite9;){var cur3=cx_ite9;if(0==cur3.hash){c3=cur3;break}cx_ite9=cx_ite9.next}if(null==c3){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c3=new zpp_nape.dynamics.ZPP_Contact:(c3=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c3.next,c3.next=null);var ci3=c3.inner;ci3.jnAcc=ci3.jtAcc=0,c3.hash=0,c3.fresh=!0,c3.arbiter=arb,arb.jrAcc=0;var _this3=arb.contacts;c3._inuse=!0;var temp3=c3;temp3.next=_this3.next,_this3.next=temp3,_this3.modified=!0,_this3.length++,arb.innards.add(ci3)}else c3.fresh=!1;c3.px=px4,c3.py=py4,arb.nx=-px2*invDist,arb.ny=-py2*invDist,c3.dist=dist1-minDist,c3.stamp=arb.stamp,c3.posOnly=!1,co=c3}else{for(var px5=s1.circle.worldCOMx+px2*df,py5=s1.circle.worldCOMy+py2*df,c4=null,cx_ite10=arb.contacts.next;null!=cx_ite10;){var cur4=cx_ite10;if(0==cur4.hash){c4=cur4;break}cx_ite10=cx_ite10.next}if(null==c4){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c4=new zpp_nape.dynamics.ZPP_Contact:(c4=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c4.next,c4.next=null);var ci4=c4.inner;ci4.jnAcc=ci4.jtAcc=0,c4.hash=0,c4.fresh=!0,c4.arbiter=arb,arb.jrAcc=0;var _this4=arb.contacts;c4._inuse=!0;var temp4=c4;temp4.next=_this4.next,_this4.next=temp4,_this4.modified=!0,_this4.length++,arb.innards.add(ci4)}else c4.fresh=!1;c4.px=px5,c4.py=py5,arb.nx=px2*invDist,arb.ny=py2*invDist,c4.dist=dist1-minDist,c4.stamp=arb.stamp,c4.posOnly=!1,co=c4}}if(null!=co){var con1=co.inner;arb.ptype=2;var vx=0,vy=0;vx=v0.x-s2.polygon.body.posx,vy=v0.y-s2.polygon.body.posy,arb.__ref_edge1=a0,arb.__ref_vertex=-1,rev?(con1.lr1x=vx*s2.polygon.body.axisy+vy*s2.polygon.body.axisx,con1.lr1y=vy*s2.polygon.body.axisy-vx*s2.polygon.body.axisx,con1.lr2x=s1.circle.localCOMx,con1.lr2y=s1.circle.localCOMy):(con1.lr2x=vx*s2.polygon.body.axisy+vy*s2.polygon.body.axisx,con1.lr2y=vy*s2.polygon.body.axisy-vx*s2.polygon.body.axisx,con1.lr1x=s1.circle.localCOMx,con1.lr1y=s1.circle.localCOMy),arb.radius=s1.circle.radius}return null!=co}if(dt>=v11.y*a0.gnormx-v11.x*a0.gnormy){var minDist1=s1.circle.radius,px6=0,py6=0,distSqr1=(px6=v11.x-s1.circle.worldCOMx)*px6+(py6=v11.y-s1.circle.worldCOMy)*py6,co1;if(distSqr1>minDist1*minDist1)co1=null;else if(distSqr1<nape.Config.epsilon*nape.Config.epsilon){for(var px7=s1.circle.worldCOMx,py7=s1.circle.worldCOMy,c5=null,cx_ite11=arb.contacts.next;null!=cx_ite11;){var cur5=cx_ite11;if(0==cur5.hash){c5=cur5;break}cx_ite11=cx_ite11.next}if(null==c5){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c5=new zpp_nape.dynamics.ZPP_Contact:(c5=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c5.next,c5.next=null);var ci5=c5.inner;ci5.jnAcc=ci5.jtAcc=0,c5.hash=0,c5.fresh=!0,c5.arbiter=arb,arb.jrAcc=0;var _this5=arb.contacts;c5._inuse=!0;var temp5=c5;temp5.next=_this5.next,_this5.next=temp5,_this5.modified=!0,_this5.length++,arb.innards.add(ci5)}else c5.fresh=!1;c5.px=px7,c5.py=py7,arb.nx=1,arb.ny=0,c5.dist=-minDist1,c5.stamp=arb.stamp,c5.posOnly=!1,co1=c5}else{var invDist1=1/Math.sqrt(distSqr1),dist2=invDist1<nape.Config.epsilon?1e100:1/invDist1,df1=.5+(s1.circle.radius-.5*minDist1)*invDist1;if(rev){for(var px8=s1.circle.worldCOMx+px6*df1,py8=s1.circle.worldCOMy+py6*df1,c6=null,cx_ite12=arb.contacts.next;null!=cx_ite12;){var cur6=cx_ite12;if(0==cur6.hash){c6=cur6;break}cx_ite12=cx_ite12.next}if(null==c6){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c6=new zpp_nape.dynamics.ZPP_Contact:(c6=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c6.next,c6.next=null);var ci6=c6.inner;ci6.jnAcc=ci6.jtAcc=0,c6.hash=0,c6.fresh=!0,c6.arbiter=arb,arb.jrAcc=0;var _this6=arb.contacts;c6._inuse=!0;var temp6=c6;temp6.next=_this6.next,_this6.next=temp6,_this6.modified=!0,_this6.length++,arb.innards.add(ci6)}else c6.fresh=!1;c6.px=px8,c6.py=py8,arb.nx=-px6*invDist1,arb.ny=-py6*invDist1,c6.dist=dist2-minDist1,c6.stamp=arb.stamp,c6.posOnly=!1,co1=c6}else{for(var px9=s1.circle.worldCOMx+px6*df1,py9=s1.circle.worldCOMy+py6*df1,c7=null,cx_ite13=arb.contacts.next;null!=cx_ite13;){var cur7=cx_ite13;if(0==cur7.hash){c7=cur7;break}cx_ite13=cx_ite13.next}if(null==c7){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c7=new zpp_nape.dynamics.ZPP_Contact:(c7=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c7.next,c7.next=null);var ci7=c7.inner;ci7.jnAcc=ci7.jtAcc=0,c7.hash=0,c7.fresh=!0,c7.arbiter=arb,arb.jrAcc=0;var _this7=arb.contacts;c7._inuse=!0;var temp7=c7;temp7.next=_this7.next,_this7.next=temp7,_this7.modified=!0,_this7.length++,arb.innards.add(ci7)}else c7.fresh=!1;c7.px=px9,c7.py=py9,arb.nx=px6*invDist1,arb.ny=py6*invDist1,c7.dist=dist2-minDist1,c7.stamp=arb.stamp,c7.posOnly=!1,co1=c7}}if(null!=co1){var con2=co1.inner;arb.ptype=2;var vx1=0,vy1=0;vx1=v11.x-s2.polygon.body.posx,vy1=v11.y-s2.polygon.body.posy,arb.__ref_edge1=a0,arb.__ref_vertex=1,rev?(con2.lr1x=vx1*s2.polygon.body.axisy+vy1*s2.polygon.body.axisx,con2.lr1y=vy1*s2.polygon.body.axisy-vx1*s2.polygon.body.axisx,con2.lr2x=s1.circle.localCOMx,con2.lr2y=s1.circle.localCOMy):(con2.lr2x=vx1*s2.polygon.body.axisy+vy1*s2.polygon.body.axisx,con2.lr2y=vy1*s2.polygon.body.axisy-vx1*s2.polygon.body.axisx,con2.lr1x=s1.circle.localCOMx,con2.lr1y=s1.circle.localCOMy),arb.radius=s1.circle.radius}return null!=co1}var nx1=0,ny1=0,t7=s1.circle.radius+.5*max1;nx1=a0.gnormx*t7,ny1=a0.gnormy*t7;var px10=0,py10=0,con3;if(px10=s1.circle.worldCOMx-nx1,py10=s1.circle.worldCOMy-ny1,rev){for(var nx2=a0.gnormx,ny2=a0.gnormy,c8=null,cx_ite14=arb.contacts.next;null!=cx_ite14;){var cur8=cx_ite14;if(0==cur8.hash){c8=cur8;break}cx_ite14=cx_ite14.next}if(null==c8){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c8=new zpp_nape.dynamics.ZPP_Contact:(c8=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c8.next,c8.next=null);var ci8=c8.inner;ci8.jnAcc=ci8.jtAcc=0,c8.hash=0,c8.fresh=!0,c8.arbiter=arb,arb.jrAcc=0;var _this8=arb.contacts;c8._inuse=!0;var temp8=c8;temp8.next=_this8.next,_this8.next=temp8,_this8.modified=!0,_this8.length++,arb.innards.add(ci8)}else c8.fresh=!1;c8.px=px10,c8.py=py10,arb.nx=nx2,arb.ny=ny2,c8.dist=max1,c8.stamp=arb.stamp,c8.posOnly=!1,con3=c8}else{for(var nx3=-a0.gnormx,ny3=-a0.gnormy,c9=null,cx_ite15=arb.contacts.next;null!=cx_ite15;){var cur9=cx_ite15;if(0==cur9.hash){c9=cur9;break}cx_ite15=cx_ite15.next}if(null==c9){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c9=new zpp_nape.dynamics.ZPP_Contact:(c9=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c9.next,c9.next=null);var ci9=c9.inner;ci9.jnAcc=ci9.jtAcc=0,c9.hash=0,c9.fresh=!0,c9.arbiter=arb,arb.jrAcc=0;var _this9=arb.contacts;c9._inuse=!0;var temp9=c9;temp9.next=_this9.next,_this9.next=temp9,_this9.modified=!0,_this9.length++,arb.innards.add(ci9)}else c9.fresh=!1;c9.px=px10,c9.py=py10,arb.nx=nx3,arb.ny=ny3,c9.dist=max1,c9.stamp=arb.stamp,c9.posOnly=!1,con3=c9}return arb.ptype=rev?0:1,arb.lnormx=a0.lnormx,arb.lnormy=a0.lnormy,arb.rev=!rev,arb.lproj=a0.lprojection,arb.radius=s1.circle.radius,con3.inner.lr1x=s1.circle.localCOMx,con3.inner.lr1y=s1.circle.localCOMy,arb.__ref_edge1=a0,arb.__ref_vertex=0,!0}return!1}var minDist2=s1.circle.radius+s2.circle.radius,px11=0,py11=0,distSqr2=(px11=s2.circle.worldCOMx-s1.circle.worldCOMx)*px11+(py11=s2.circle.worldCOMy-s1.circle.worldCOMy)*py11,co2;if(distSqr2>minDist2*minDist2)co2=null;else if(distSqr2<nape.Config.epsilon*nape.Config.epsilon){for(var px12=s1.circle.worldCOMx,py12=s1.circle.worldCOMy,c10=null,cx_ite16=arb.contacts.next;null!=cx_ite16;){var cur10=cx_ite16;if(0==cur10.hash){c10=cur10;break}cx_ite16=cx_ite16.next}if(null==c10){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c10=new zpp_nape.dynamics.ZPP_Contact:(c10=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c10.next,c10.next=null);var ci10=c10.inner;ci10.jnAcc=ci10.jtAcc=0,c10.hash=0,c10.fresh=!0,c10.arbiter=arb,arb.jrAcc=0;var _this10=arb.contacts;c10._inuse=!0;var temp10=c10;temp10.next=_this10.next,_this10.next=temp10,_this10.modified=!0,_this10.length++,arb.innards.add(ci10)}else c10.fresh=!1;c10.px=px12,c10.py=py12,arb.nx=1,arb.ny=0,c10.dist=-minDist2,c10.stamp=arb.stamp,c10.posOnly=!1,co2=c10}else{var invDist2=1/Math.sqrt(distSqr2),dist3=invDist2<nape.Config.epsilon?1e100:1/invDist2,df2=.5+(s1.circle.radius-.5*minDist2)*invDist2;if(rev){for(var px13=s1.circle.worldCOMx+px11*df2,py13=s1.circle.worldCOMy+py11*df2,c11=null,cx_ite17=arb.contacts.next;null!=cx_ite17;){var cur11=cx_ite17;if(0==cur11.hash){c11=cur11;break}cx_ite17=cx_ite17.next}if(null==c11){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c11=new zpp_nape.dynamics.ZPP_Contact:(c11=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c11.next,c11.next=null);var ci11=c11.inner;ci11.jnAcc=ci11.jtAcc=0,c11.hash=0,c11.fresh=!0,c11.arbiter=arb,arb.jrAcc=0;var _this11=arb.contacts;c11._inuse=!0;var temp11=c11;temp11.next=_this11.next,_this11.next=temp11,_this11.modified=!0,_this11.length++,arb.innards.add(ci11)}else c11.fresh=!1;c11.px=px13,c11.py=py13,arb.nx=-px11*invDist2,arb.ny=-py11*invDist2,c11.dist=dist3-minDist2,c11.stamp=arb.stamp,c11.posOnly=!1,co2=c11}else{for(var px14=s1.circle.worldCOMx+px11*df2,py14=s1.circle.worldCOMy+py11*df2,c12=null,cx_ite18=arb.contacts.next;null!=cx_ite18;){var cur12=cx_ite18;if(0==cur12.hash){c12=cur12;break}cx_ite18=cx_ite18.next}if(null==c12){null==zpp_nape.dynamics.ZPP_Contact.zpp_pool?c12=new zpp_nape.dynamics.ZPP_Contact:(c12=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=c12.next,c12.next=null);var ci12=c12.inner;ci12.jnAcc=ci12.jtAcc=0,c12.hash=0,c12.fresh=!0,c12.arbiter=arb,arb.jrAcc=0;var _this12=arb.contacts;c12._inuse=!0;var temp12=c12;temp12.next=_this12.next,_this12.next=temp12,_this12.modified=!0,_this12.length++,arb.innards.add(ci12)}else c12.fresh=!1;c12.px=px14,c12.py=py14,arb.nx=px11*invDist2,arb.ny=py11*invDist2,c12.dist=dist3-minDist2,c12.stamp=arb.stamp,c12.posOnly=!1,co2=c12}}if(null!=co2){var con4=co2.inner;return rev?(con4.lr1x=s2.circle.localCOMx,con4.lr1y=s2.circle.localCOMy,con4.lr2x=s1.circle.localCOMx,con4.lr2y=s1.circle.localCOMy):(con4.lr1x=s1.circle.localCOMx,con4.lr1y=s1.circle.localCOMy,con4.lr2x=s2.circle.localCOMx,con4.lr2y=s2.circle.localCOMy),arb.radius=s1.circle.radius+s2.circle.radius,arb.ptype=2,!0}return!1},zpp_nape.geom.ZPP_Collide.testCollide_safe=function(s1,s2){if(0==s2.type){var t=s1;s1=s2,s2=t}return zpp_nape.geom.ZPP_Collide.testCollide(s1,s2)},zpp_nape.geom.ZPP_Collide.testCollide=function(s1,s2){if(1==s2.type){if(1==s1.type){for(var cont=!0,cx_ite=s1.polygon.edges.head;null!=cx_ite;){for(var ax=cx_ite.elt,min=1e100,cx_ite1=s2.polygon.gverts.next;null!=cx_ite1;){var v=cx_ite1,k=ax.gnormx*v.x+ax.gnormy*v.y;k<min&&(min=k),cx_ite1=cx_ite1.next}if((min-=ax.gprojection)>0){cont=!1;break}cx_ite=cx_ite.next}if(cont){for(var cx_ite2=s2.polygon.edges.head;null!=cx_ite2;){for(var ax1=cx_ite2.elt,min1=1e100,cx_ite3=s1.polygon.gverts.next;null!=cx_ite3;){var v1=cx_ite3,k1=ax1.gnormx*v1.x+ax1.gnormy*v1.y;k1<min1&&(min1=k1),cx_ite3=cx_ite3.next}if((min1-=ax1.gprojection)>0){cont=!1;break}cx_ite2=cx_ite2.next}return cont}return!1}for(var a0=null,vi=null,cont1=!0,max=-1e100,vite=s2.polygon.gverts.next,cx_ite4=s2.polygon.edges.head;null!=cx_ite4;){var a=cx_ite4.elt,dist=a.gnormx*s1.circle.worldCOMx+a.gnormy*s1.circle.worldCOMy-a.gprojection-s1.circle.radius;if(dist>0){cont1=!1;break}dist>max&&(max=dist,a0=a,vi=vite),vite=vite.next,cx_ite4=cx_ite4.next}if(cont1){var v0=vi,v11=null==vi.next?s2.polygon.gverts.next:vi.next,dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius,px=0,py=0,distSqr;return(px=v0.x-s1.circle.worldCOMx)*px+(py=v0.y-s1.circle.worldCOMy)*py<=minDist*minDist}if(dt>=v11.y*a0.gnormx-v11.x*a0.gnormy){var minDist1=s1.circle.radius,px1=0,py1=0,distSqr1;return(px1=v11.x-s1.circle.worldCOMx)*px1+(py1=v11.y-s1.circle.worldCOMy)*py1<=minDist1*minDist1}return!0}return!1}var minDist2=s1.circle.radius+s2.circle.radius,px2=0,py2=0,distSqr2;return(px2=s2.circle.worldCOMx-s1.circle.worldCOMx)*px2+(py2=s2.circle.worldCOMy-s1.circle.worldCOMy)*py2<=minDist2*minDist2},zpp_nape.geom.ZPP_Collide.flowCollide=function(s1,s2,arb){if(1==s2.type){if(1==s1.type){for(var out1=[],out2=[],cont=!0,total=!0,cx_ite=s1.polygon.edges.head;null!=cx_ite;){for(var ax=cx_ite.elt,min=1e100,ind=0,cx_ite1=s2.polygon.gverts.next;null!=cx_ite1;){var v=cx_ite1,k=ax.gnormx*v.x+ax.gnormy*v.y;k<min&&(min=k),k>=ax.gprojection+nape.Config.epsilon&&(out2[ind]=!0,total=!1),++ind,cx_ite1=cx_ite1.next}if((min-=ax.gprojection)>0){cont=!1;break}cx_ite=cx_ite.next}if(total){var _this=s2.polygon;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite2=_this1.lverts.next,u=cx_ite2,v1=cx_ite2=cx_ite2.next;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var w=cx_ite2;area+=v1.x*(w.y-u.y);var cf=w.y*v1.x-w.x*v1.y;_this1.localCOMx+=(v1.x+w.x)*cf,_this1.localCOMy+=(v1.y+w.y)*cf,u=v1,v1=w,cx_ite2=cx_ite2.next}var w1=cx_ite2=_this1.lverts.next;area+=v1.x*(w1.y-u.y);var cf1=w1.y*v1.x-w1.x*v1.y;_this1.localCOMx+=(v1.x+w1.x)*cf1,_this1.localCOMy+=(v1.y+w1.y)*cf1,u=v1,v1=w1;var w2=cx_ite2=cx_ite2.next;area+=v1.x*(w2.y-u.y);var cf2=w2.y*v1.x-w2.x*v1.y;_this1.localCOMx+=(v1.x+w2.x)*cf2,_this1.localCOMy+=(v1.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}return arb.overlap=s2.polygon.area,arb.centroidx=s2.polygon.worldCOMx,arb.centroidy=s2.polygon.worldCOMy,!0}if(cont){total=!0;for(var cx_ite3=s2.polygon.edges.head;null!=cx_ite3;){for(var ax1=cx_ite3.elt,min1=1e100,ind1=0,cx_ite4=s1.polygon.gverts.next;null!=cx_ite4;){var v2=cx_ite4,k1=ax1.gnormx*v2.x+ax1.gnormy*v2.y;k1<min1&&(min1=k1),k1>=ax1.gprojection+nape.Config.epsilon&&(out1[ind1]=!0,total=!1),++ind1,cx_ite4=cx_ite4.next}if((min1-=ax1.gprojection)>0){cont=!1;break}cx_ite3=cx_ite3.next}if(total){var _this3=s1.polygon;if(_this3.zip_worldCOM&&null!=_this3.body){if(_this3.zip_worldCOM=!1,_this3.zip_localCOM){if(_this3.zip_localCOM=!1,1==_this3.type){var _this4=_this3.polygon;if(null==_this4.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this4.lverts.next.next)_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;else if(null==_this4.lverts.next.next.next){_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;var t3=1;_this4.localCOMx+=1*_this4.lverts.next.next.x,_this4.localCOMy+=1*_this4.lverts.next.next.y;var t4=.5;_this4.localCOMx*=.5,_this4.localCOMy*=.5}else{_this4.localCOMx=0,_this4.localCOMy=0;var area1=0,cx_ite5=_this4.lverts.next,u1=cx_ite5,v3=cx_ite5=cx_ite5.next;for(cx_ite5=cx_ite5.next;null!=cx_ite5;){var w3=cx_ite5;area1+=v3.x*(w3.y-u1.y);var cf3=w3.y*v3.x-w3.x*v3.y;_this4.localCOMx+=(v3.x+w3.x)*cf3,_this4.localCOMy+=(v3.y+w3.y)*cf3,u1=v3,v3=w3,cx_ite5=cx_ite5.next}var w4=cx_ite5=_this4.lverts.next;area1+=v3.x*(w4.y-u1.y);var cf4=w4.y*v3.x-w4.x*v3.y;_this4.localCOMx+=(v3.x+w4.x)*cf4,_this4.localCOMy+=(v3.y+w4.y)*cf4,u1=v3,v3=w4;var w5=cx_ite5=cx_ite5.next;area1+=v3.x*(w5.y-u1.y);var cf5=w5.y*v3.x-w5.x*v3.y;_this4.localCOMx+=(v3.x+w5.x)*cf5,_this4.localCOMy+=(v3.y+w5.y)*cf5;var t5=area1=1/(3*area1);_this4.localCOMx*=t5,_this4.localCOMy*=t5}}null!=_this3.wrap_localCOM&&(_this3.wrap_localCOM.zpp_inner.x=_this3.localCOMx,_this3.wrap_localCOM.zpp_inner.y=_this3.localCOMy)}var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot)),_this3.worldCOMx=_this3.body.posx+(_this3.body.axisy*_this3.localCOMx-_this3.body.axisx*_this3.localCOMy),_this3.worldCOMy=_this3.body.posy+(_this3.localCOMx*_this3.body.axisx+_this3.localCOMy*_this3.body.axisy)}return arb.overlap=s1.polygon.area,arb.centroidx=s1.polygon.worldCOMx,arb.centroidy=s1.polygon.worldCOMy,!0}if(cont){for(;null!=zpp_nape.geom.ZPP_Collide.flowpoly.head;){var p=zpp_nape.geom.ZPP_Collide.flowpoly.pop_unsafe();if(!p._inuse){var o=p;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o}}for(var fst_vert=null,poly1=!1,ite1=s1.polygon.gverts.next,ind11=0,ite2=s2.polygon.gverts.next,ind2=0,_g=0,_g1=s2.polygon.edgeCnt;_g<_g1;){var i=_g++;if(!out2[i]){ind2=i;break}ite2=ite2.next}if(null==ite2){ite2=s2.polygon.gverts.next,poly1=!0;for(var _g2=0,_g3=s1.polygon.edgeCnt;_g2<_g3;){var i1=_g2++;if(!out1[i1]){ind11=i1;break}ite1=ite1.next}null==ite1?ite1=s1.polygon.gverts.next:(zpp_nape.geom.ZPP_Collide.flowpoly.add(ite1),fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt)}else zpp_nape.geom.ZPP_Collide.flowpoly.add(ite2),fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt;var cnt=1;if(null==zpp_nape.geom.ZPP_Collide.flowpoly.head){for(var cx_cont=!0,cx_itei=s1.polygon.gverts.next,u2=cx_itei,cx_itej=cx_itei.next;null!=cx_itej;){for(var v4=cx_itej,min2=2,cx_cont1=!0,cx_itei1=s2.polygon.gverts.next,a=cx_itei1,cx_itej1=cx_itei1.next;null!=cx_itej1;){var b=cx_itej1,t6=0,_sx=0,_sy=0;_sx=u2.x-a.x,_sy=u2.y-a.y;var _vx=0,_vy=0;_vx=v4.x-u2.x;var _qx=0,_qy=0,den=(_vy=v4.y-u2.y)*(_qx=b.x-a.x)-_vx*(_qy=b.y-a.y),tmp;if(den*den>nape.Config.epsilon*nape.Config.epsilon){var txx=(_qy*_sx-_qx*_sy)*(den=1/den);if(txx>nape.Config.epsilon&&txx<1-nape.Config.epsilon){var sxx=(_vy*_sx-_vx*_sy)*den;sxx>nape.Config.epsilon&&sxx<1-nape.Config.epsilon?(t6=txx,tmp=!0):tmp=!1}else tmp=!1}else tmp=!1;tmp&&t6<min2&&(min2=t6,ite2=cx_itei1),cx_itei1=cx_itej1,a=b,cx_itej1=cx_itej1.next}for(1;;){var b1=cx_itej1=s2.polygon.gverts.next,t7=0,_sx1=0,_sy1=0;_sx1=u2.x-a.x,_sy1=u2.y-a.y;var _vx1=0,_vy1=0;_vx1=v4.x-u2.x;var _qx1=0,_qy1=0,den1=(_vy1=v4.y-u2.y)*(_qx1=b1.x-a.x)-_vx1*(_qy1=b1.y-a.y),tmp1;if(den1*den1>nape.Config.epsilon*nape.Config.epsilon){var txx1=(_qy1*_sx1-_qx1*_sy1)*(den1=1/den1);if(txx1>nape.Config.epsilon&&txx1<1-nape.Config.epsilon){var sxx1=(_vy1*_sx1-_vx1*_sy1)*den1;sxx1>nape.Config.epsilon&&sxx1<1-nape.Config.epsilon?(t7=txx1,tmp1=!0):tmp1=!1}else tmp1=!1}else tmp1=!1;tmp1&&t7<min2&&(min2=t7,ite2=cx_itei1);break}if(2!=min2){var cx=0,cy=0,T=min2,ret;cx=u2.x+(v4.x-u2.x)*T,cy=u2.y+(v4.y-u2.y)*T,null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=cx,ret.y=cy,fst_vert=ret,zpp_nape.geom.ZPP_Collide.flowpoly.add(fst_vert),poly1=!0,ite1=cx_itei,cx_cont=!1;break}cx_itei=cx_itej,u2=v4,cx_itej=cx_itej.next}if(cx_cont)for(;;){for(var v5=cx_itej=s1.polygon.gverts.next,min3=2,cx_cont2=!0,cx_itei2=s2.polygon.gverts.next,a1=cx_itei2,cx_itej2=cx_itei2.next;null!=cx_itej2;){var b2=cx_itej2,t8=0,_sx2=0,_sy2=0;_sx2=u2.x-a1.x,_sy2=u2.y-a1.y;var _vx2=0,_vy2=0;_vx2=v5.x-u2.x;var _qx2=0,_qy2=0,den2=(_vy2=v5.y-u2.y)*(_qx2=b2.x-a1.x)-_vx2*(_qy2=b2.y-a1.y),tmp2;if(den2*den2>nape.Config.epsilon*nape.Config.epsilon){var txx2=(_qy2*_sx2-_qx2*_sy2)*(den2=1/den2);if(txx2>nape.Config.epsilon&&txx2<1-nape.Config.epsilon){var sxx2=(_vy2*_sx2-_vx2*_sy2)*den2;sxx2>nape.Config.epsilon&&sxx2<1-nape.Config.epsilon?(t8=txx2,tmp2=!0):tmp2=!1}else tmp2=!1}else tmp2=!1;tmp2&&t8<min3&&(min3=t8,ite2=cx_itei2),cx_itei2=cx_itej2,a1=b2,cx_itej2=cx_itej2.next}for(1;;){var b3=cx_itej2=s2.polygon.gverts.next,t9=0,_sx3=0,_sy3=0;_sx3=u2.x-a1.x,_sy3=u2.y-a1.y;var _vx3=0,_vy3=0;_vx3=v5.x-u2.x;var _qx3=0,_qy3=0,den3=(_vy3=v5.y-u2.y)*(_qx3=b3.x-a1.x)-_vx3*(_qy3=b3.y-a1.y),tmp3;if(den3*den3>nape.Config.epsilon*nape.Config.epsilon){var txx3=(_qy3*_sx3-_qx3*_sy3)*(den3=1/den3);if(txx3>nape.Config.epsilon&&txx3<1-nape.Config.epsilon){var sxx3=(_vy3*_sx3-_vx3*_sy3)*den3;sxx3>nape.Config.epsilon&&sxx3<1-nape.Config.epsilon?(t9=txx3,tmp3=!0):tmp3=!1}else tmp3=!1}else tmp3=!1;tmp3&&t9<min3&&(min3=t9,ite2=cx_itei2);break}if(2!=min3){var cx1=0,cy1=0,T1=min3,ret1;cx1=u2.x+(v5.x-u2.x)*T1,cy1=u2.y+(v5.y-u2.y)*T1,null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=cx1,ret1.y=cy1,fst_vert=ret1,zpp_nape.geom.ZPP_Collide.flowpoly.add(fst_vert),poly1=!0,ite1=cx_itei;break}break}cnt=2}for(;;)if(poly1)if(++ind11,null==(ite1=ite1.next)&&(ite1=s1.polygon.gverts.next,ind11=0),out1[ind11]){var a2=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt,b4=ite1,u3=ite2,itm=ite2.next;null==itm&&(itm=s2.polygon.gverts.next);for(var max=-1,itmo=null,indo=0,icnt=0,beg_ite=itm,cx_ite6=itm;;){var v6=cx_ite6,t10=0,_sx4=0,_sy4=0;_sx4=u3.x-a2.x,_sy4=u3.y-a2.y;var _vx4=0,_vy4=0;_vx4=v6.x-u3.x;var _qx4=0,_qy4=0,den4=(_vy4=v6.y-u3.y)*(_qx4=b4.x-a2.x)-_vx4*(_qy4=b4.y-a2.y),tmp5;if(den4*den4>nape.Config.epsilon*nape.Config.epsilon){var txx4=(_qy4*_sx4-_qx4*_sy4)*(den4=1/den4);if(txx4>nape.Config.epsilon&&txx4<1-nape.Config.epsilon){var sxx4=(_vy4*_sx4-_vx4*_sy4)*den4;sxx4>nape.Config.epsilon&&sxx4<1-nape.Config.epsilon?(t10=txx4,tmp5=!0):tmp5=!1}else tmp5=!1}else tmp5=!1;if(tmp5&&t10>=max){if(itmo=ite2,indo=ind2,++icnt==cnt){max=t10,cx_ite6=beg_ite;break}max=t10}u3=v6,ite2=cx_ite6,++ind2>=s2.polygon.edgeCnt&&(ind2=0),null==(cx_ite6=cx_ite6.next)&&(cx_ite6=s2.polygon.gverts.next);break}for(;cx_ite6!=beg_ite;){var v7=cx_ite6,t11=0,_sx5=0,_sy5=0;_sx5=u3.x-a2.x,_sy5=u3.y-a2.y;var _vx5=0,_vy5=0;_vx5=v7.x-u3.x;var _qx5=0,_qy5=0,den5=(_vy5=v7.y-u3.y)*(_qx5=b4.x-a2.x)-_vx5*(_qy5=b4.y-a2.y),tmp6;if(den5*den5>nape.Config.epsilon*nape.Config.epsilon){var txx5=(_qy5*_sx5-_qx5*_sy5)*(den5=1/den5);if(txx5>nape.Config.epsilon&&txx5<1-nape.Config.epsilon){var sxx5=(_vy5*_sx5-_vx5*_sy5)*den5;sxx5>nape.Config.epsilon&&sxx5<1-nape.Config.epsilon?(t11=txx5,tmp6=!0):tmp6=!1}else tmp6=!1}else tmp6=!1;if(tmp6&&t11>=max){if(itmo=ite2,indo=ind2,++icnt==cnt){max=t11,cx_ite6=beg_ite;break}max=t11}u3=v7,ite2=cx_ite6,++ind2>=s2.polygon.edgeCnt&&(ind2=0),null==(cx_ite6=cx_ite6.next)&&(cx_ite6=s2.polygon.gverts.next)}if(null==itmo)break;var u4=itmo,itm2=itmo.next;null==itm2&&(itm2=s2.polygon.gverts.next);var v8=itm2,cx2=0,cy2=0,T2=max,tmp7;if(cx2=u4.x+(v8.x-u4.x)*T2,cy2=u4.y+(v8.y-u4.y)*T2,null!=fst_vert){var dx1=0,dy1=0;tmp7=(dx1=cx2-fst_vert.x)*dx1+(dy1=cy2-fst_vert.y)*dy1<nape.Config.epsilon}else tmp7=!1;if(tmp7)break;var tmp8=zpp_nape.geom.ZPP_Collide.flowpoly,ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=cx2,ret2.y=cy2,tmp8.add(ret2),null==fst_vert&&(fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),ite2=itmo,ind2=indo,poly1=!poly1,cnt=2}else{var ex=ite1,tmp4;if(null!=fst_vert){var dx=0,dy=0;tmp4=(dx=ex.x-fst_vert.x)*dx+(dy=ex.y-fst_vert.y)*dy<nape.Config.epsilon}else tmp4=!1;if(tmp4)break;zpp_nape.geom.ZPP_Collide.flowpoly.add(ex),null==fst_vert&&(fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),cnt=1}else if(++ind2,null==(ite2=ite2.next)&&(ite2=s2.polygon.gverts.next,ind2=0),out2[ind2]){var a3=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt,b5=ite2,u5=ite1,itm1=ite1.next;null==itm1&&(itm1=s1.polygon.gverts.next);for(var max1=-1,itmo1=null,indo1=0,icnt1=0,beg_ite1=itm1,cx_ite7=itm1;;){var v9=cx_ite7,t12=0,_sx6=0,_sy6=0;_sx6=u5.x-a3.x,_sy6=u5.y-a3.y;var _vx6=0,_vy6=0;_vx6=v9.x-u5.x;var _qx6=0,_qy6=0,den6=(_vy6=v9.y-u5.y)*(_qx6=b5.x-a3.x)-_vx6*(_qy6=b5.y-a3.y),tmp10;if(den6*den6>nape.Config.epsilon*nape.Config.epsilon){var txx6=(_qy6*_sx6-_qx6*_sy6)*(den6=1/den6);if(txx6>nape.Config.epsilon&&txx6<1-nape.Config.epsilon){var sxx6=(_vy6*_sx6-_vx6*_sy6)*den6;sxx6>nape.Config.epsilon&&sxx6<1-nape.Config.epsilon?(t12=txx6,tmp10=!0):tmp10=!1}else tmp10=!1}else tmp10=!1;if(tmp10&&t12>=max1){if(itmo1=ite1,indo1=ind11,++icnt1==cnt){max1=t12,cx_ite7=beg_ite1;break}max1=t12}u5=v9,ite1=cx_ite7,++ind11>=s1.polygon.edgeCnt&&(ind11=0),null==(cx_ite7=cx_ite7.next)&&(cx_ite7=s1.polygon.gverts.next);break}for(;cx_ite7!=beg_ite1;){var v10=cx_ite7,t13=0,_sx7=0,_sy7=0;_sx7=u5.x-a3.x,_sy7=u5.y-a3.y;var _vx7=0,_vy7=0;_vx7=v10.x-u5.x;var _qx7=0,_qy7=0,den7=(_vy7=v10.y-u5.y)*(_qx7=b5.x-a3.x)-_vx7*(_qy7=b5.y-a3.y),tmp11;if(den7*den7>nape.Config.epsilon*nape.Config.epsilon){var txx7=(_qy7*_sx7-_qx7*_sy7)*(den7=1/den7);if(txx7>nape.Config.epsilon&&txx7<1-nape.Config.epsilon){var sxx7=(_vy7*_sx7-_vx7*_sy7)*den7;sxx7>nape.Config.epsilon&&sxx7<1-nape.Config.epsilon?(t13=txx7,tmp11=!0):tmp11=!1}else tmp11=!1}else tmp11=!1;if(tmp11&&t13>=max1){if(itmo1=ite1,indo1=ind11,++icnt1==cnt){max1=t13,cx_ite7=beg_ite1;break}max1=t13}u5=v10,ite1=cx_ite7,++ind11>=s1.polygon.edgeCnt&&(ind11=0),null==(cx_ite7=cx_ite7.next)&&(cx_ite7=s1.polygon.gverts.next)}if(null==itmo1)break;var u6=itmo1,itm21=itmo1.next;null==itm21&&(itm21=s1.polygon.gverts.next);var v11=itm21,cx3=0,cy3=0,T3=max1,tmp12;if(cx3=u6.x+(v11.x-u6.x)*T3,cy3=u6.y+(v11.y-u6.y)*T3,null!=fst_vert){var dx3=0,dy3=0;tmp12=(dx3=cx3-fst_vert.x)*dx3+(dy3=cy3-fst_vert.y)*dy3<nape.Config.epsilon}else tmp12=!1;if(tmp12)break;var tmp13=zpp_nape.geom.ZPP_Collide.flowpoly,ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=cx3,ret3.y=cy3,tmp13.add(ret3),null==fst_vert&&(fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),ite1=itmo1,ind11=indo1,poly1=!poly1,cnt=2}else{var ex1=ite2,tmp9;if(null!=fst_vert){var dx2=0,dy2=0;tmp9=(dx2=ex1.x-fst_vert.x)*dx2+(dy2=ex1.y-fst_vert.y)*dy2<nape.Config.epsilon}else tmp9=!1;if(tmp9)break;zpp_nape.geom.ZPP_Collide.flowpoly.add(ex1),null==fst_vert&&(fst_vert=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),cnt=1}if(null!=zpp_nape.geom.ZPP_Collide.flowpoly.head&&null!=zpp_nape.geom.ZPP_Collide.flowpoly.head.next&&null!=zpp_nape.geom.ZPP_Collide.flowpoly.head.next.next){var area2=0,COMx=0,COMy=0;COMx=0,COMy=0,area2=0;var cx_ite8=zpp_nape.geom.ZPP_Collide.flowpoly.head,u7=cx_ite8.elt,v12=(cx_ite8=cx_ite8.next).elt;for(cx_ite8=cx_ite8.next;null!=cx_ite8;){var w6=cx_ite8.elt;area2+=v12.x*(w6.y-u7.y);var cf6=w6.y*v12.x-w6.x*v12.y;COMx+=(v12.x+w6.x)*cf6,COMy+=(v12.y+w6.y)*cf6,u7=v12,v12=w6,cx_ite8=cx_ite8.next}var w7=(cx_ite8=zpp_nape.geom.ZPP_Collide.flowpoly.head).elt;area2+=v12.x*(w7.y-u7.y);var cf7=w7.y*v12.x-w7.x*v12.y;COMx+=(v12.x+w7.x)*cf7,COMy+=(v12.y+w7.y)*cf7,u7=v12,v12=w7;var w8=(cx_ite8=cx_ite8.next).elt;area2+=v12.x*(w8.y-u7.y);var cf8=w8.y*v12.x-w8.x*v12.y;COMx+=(v12.x+w8.x)*cf8,COMy+=(v12.y+w8.y)*cf8;var ia=1/(6*(area2*=.5)),t14=ia;return COMx*=ia,COMy*=ia,arb.overlap=-area2,arb.centroidx=COMx,arb.centroidy=COMy,!0}return!1}return!1}return!1}for(var inte=[],total1=!0,a0=null,vi=null,max2=-1e100,cont1=!0,vite=s2.polygon.gverts.next,ind3=0,cx_ite9=s2.polygon.edges.head;null!=cx_ite9;){var a4=cx_ite9.elt,dist=a4.gnormx*s1.circle.worldCOMx+a4.gnormy*s1.circle.worldCOMy;if(dist>a4.gprojection+s1.circle.radius){cont1=!1;break}dist+s1.circle.radius>a4.gprojection+nape.Config.epsilon&&(total1=!1,inte[ind3]=!0),(dist-=a4.gprojection+s1.circle.radius)>max2&&(max2=dist,a0=a4,vi=vite),vite=vite.next,++ind3,cx_ite9=cx_ite9.next}if(cont1){if(total1)return arb.overlap=s1.circle.area,arb.centroidx=s1.circle.worldCOMx,arb.centroidy=s1.circle.worldCOMy,!0;var v0=vi,v13=null==vi.next?s2.polygon.gverts.next:vi.next,dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy,tmp14;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius,px=0,py=0,distSqr;tmp14=(px=v0.x-s1.circle.worldCOMx)*px+(py=v0.y-s1.circle.worldCOMy)*py<=minDist*minDist}else if(dt>=v13.y*a0.gnormx-v13.x*a0.gnormy){var minDist1=s1.circle.radius,px1=0,py1=0,distSqr1;tmp14=(px1=v13.x-s1.circle.worldCOMx)*px1+(py1=v13.y-s1.circle.worldCOMy)*py1<=minDist1*minDist1}else tmp14=!0;if(tmp14){for(var ins=[],ind4=0,total2=!0,vi1=null,vind=0,cx_ite10=s2.polygon.gverts.next;null!=cx_ite10;){var v14=cx_ite10,dx4=0,dy4=0,dist1=(dx4=v14.x-s1.circle.worldCOMx)*dx4+(dy4=v14.y-s1.circle.worldCOMy)*dy4;(ins[ind4]=dist1<=s1.circle.radius*s1.circle.radius)?(vind=ind4,vi1=cx_ite10):total2=!1,++ind4,cx_ite10=cx_ite10.next}if(total2){var _this6=s2.polygon;if(_this6.zip_worldCOM&&null!=_this6.body){if(_this6.zip_worldCOM=!1,_this6.zip_localCOM){if(_this6.zip_localCOM=!1,1==_this6.type){var _this7=_this6.polygon;if(null==_this7.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this7.lverts.next.next)_this7.localCOMx=_this7.lverts.next.x,_this7.localCOMy=_this7.lverts.next.y;else if(null==_this7.lverts.next.next.next){_this7.localCOMx=_this7.lverts.next.x,_this7.localCOMy=_this7.lverts.next.y;var t15=1;_this7.localCOMx+=1*_this7.lverts.next.next.x,_this7.localCOMy+=1*_this7.lverts.next.next.y;var t16=.5;_this7.localCOMx*=.5,_this7.localCOMy*=.5}else{_this7.localCOMx=0,_this7.localCOMy=0;var area3=0,cx_ite11=_this7.lverts.next,u8=cx_ite11,v15=cx_ite11=cx_ite11.next;for(cx_ite11=cx_ite11.next;null!=cx_ite11;){var w9=cx_ite11;area3+=v15.x*(w9.y-u8.y);var cf9=w9.y*v15.x-w9.x*v15.y;_this7.localCOMx+=(v15.x+w9.x)*cf9,_this7.localCOMy+=(v15.y+w9.y)*cf9,u8=v15,v15=w9,cx_ite11=cx_ite11.next}var w10=cx_ite11=_this7.lverts.next;area3+=v15.x*(w10.y-u8.y);var cf10=w10.y*v15.x-w10.x*v15.y;_this7.localCOMx+=(v15.x+w10.x)*cf10,_this7.localCOMy+=(v15.y+w10.y)*cf10,u8=v15,v15=w10;var w11=cx_ite11=cx_ite11.next;area3+=v15.x*(w11.y-u8.y);var cf11=w11.y*v15.x-w11.x*v15.y;_this7.localCOMx+=(v15.x+w11.x)*cf11,_this7.localCOMy+=(v15.y+w11.y)*cf11;var t17=area3=1/(3*area3);_this7.localCOMx*=t17,_this7.localCOMy*=t17}}null!=_this6.wrap_localCOM&&(_this6.wrap_localCOM.zpp_inner.x=_this6.localCOMx,_this6.wrap_localCOM.zpp_inner.y=_this6.localCOMy)}var _this8=_this6.body;_this8.zip_axis&&(_this8.zip_axis=!1,_this8.axisx=Math.sin(_this8.rot),_this8.axisy=Math.cos(_this8.rot)),_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy),_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy)}return arb.overlap=s2.polygon.area,arb.centroidx=s2.polygon.worldCOMx,arb.centroidy=s2.polygon.worldCOMy,!0}for(;null!=zpp_nape.geom.ZPP_Collide.flowpoly.head;){var p1=zpp_nape.geom.ZPP_Collide.flowpoly.pop_unsafe();if(!p1._inuse){var o1=p1;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1}}zpp_nape.geom.ZPP_Collide.flowsegs.clear();var fst_vert1=null,state=1;for(null==vi1?(vi1=s2.polygon.gverts.next,state=2):(fst_vert1=vi1,zpp_nape.geom.ZPP_Collide.flowpoly.add(fst_vert1));0!=state;)if(1==state)if(null==(vi1=vi1.next)&&(vi1=s2.polygon.gverts.next),++vind>=s2.polygon.edgeCnt&&(vind=0),ins[vind]){var dx5=0,dy5=0;if((dx5=fst_vert1.x-vi1.x)*dx5+(dy5=fst_vert1.y-vi1.y)*dy5<nape.Config.epsilon)break;zpp_nape.geom.ZPP_Collide.flowpoly.add(vi1)}else{var u9=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt,v16=vi1,vx=0,vy=0,qx=0,qy=0,A=(vx=v16.x-u9.x)*vx+(vy=v16.y-u9.y)*vy,B=2*((qx=u9.x-s1.circle.worldCOMx)*vx+(qy=u9.y-s1.circle.worldCOMy)*vy),C=qx*qx+qy*qy-s1.circle.radius*s1.circle.radius,D=Math.sqrt(B*B-4*A*C),t18=(-B-D)*(A=1/(2*A)),tval,cx4=0,cy4=0,T4=t18<nape.Config.epsilon?(-B+D)*A:t18;cx4=u9.x+(v16.x-u9.x)*T4,cy4=u9.y+(v16.y-u9.y)*T4;var dx6=0,dy6=0;if((dx6=fst_vert1.x-cx4)*dx6+(dy6=fst_vert1.y-cy4)*dy6<nape.Config.epsilon)break;var tmp15=zpp_nape.geom.ZPP_Collide.flowpoly,ret4;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret4=new zpp_nape.geom.ZPP_Vec2:(ret4=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret4.next,ret4.next=null),ret4.weak=!1,ret4._immutable=!1,ret4.x=cx4,ret4.y=cy4,tmp15.add(ret4),state=2}else if(2==state){var vi2=vi1.next;null==vi2&&(vi2=s2.polygon.gverts.next);var u10=vi1;state=0;for(var beg_ite2=vi2,cx_ite12=vi2;;){var v17=cx_ite12,vind2=vind+1;if(vind2==s2.polygon.edgeCnt&&(vind2=0),inte[vind]){if(ins[vind2]){var vx1=0,vy1=0,qx1=0,qy1=0,A1=(vx1=v17.x-u10.x)*vx1+(vy1=v17.y-u10.y)*vy1,B1=2*((qx1=u10.x-s1.circle.worldCOMx)*vx1+(qy1=u10.y-s1.circle.worldCOMy)*vy1),C1=qx1*qx1+qy1*qy1-s1.circle.radius*s1.circle.radius,D1=Math.sqrt(B1*B1-4*A1*C1),t19=(-B1-D1)*(A1=1/(2*A1)),tval1,cx5=0,cy5=0,T5=t19<nape.Config.epsilon?(-B1+D1)*A1:t19;cx5=u10.x+(v17.x-u10.x)*T5,cy5=u10.y+(v17.y-u10.y)*T5;var dx7=0,dy7=0,ret5;if((dx7=fst_vert1.x-cx5)*dx7+(dy7=fst_vert1.y-cy5)*dy7<nape.Config.epsilon){state=0,cx_ite12=beg_ite2;break}null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=cx5,ret5.y=cy5;var cp=ret5;zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),zpp_nape.geom.ZPP_Collide.flowsegs.add(cp),zpp_nape.geom.ZPP_Collide.flowpoly.add(cp),state=1,cx_ite12=beg_ite2;break}var t0=0,t110=0,vx2=0,vy2=0,qx2=0,qy2=0,A2=(vx2=v17.x-u10.x)*vx2+(vy2=v17.y-u10.y)*vy2,B2=2*((qx2=u10.x-s1.circle.worldCOMx)*vx2+(qy2=u10.y-s1.circle.worldCOMy)*vy2),C2,D2=B2*B2-4*A2*(qx2*qx2+qy2*qy2-s1.circle.radius*s1.circle.radius),two;if(D2*D2<nape.Config.epsilon?(t0=D2<0?10:t110=-B2/(2*A2),two=!1):(t0=(-B2-(D2=Math.sqrt(D2)))*(A2=1/(2*A2)),t110=(-B2+D2)*A2,two=!0),t0<1-nape.Config.epsilon&&t110>nape.Config.epsilon){var cx6=0,cy6=0,T6=t0,tmp16,ret6;if(cx6=u10.x+(v17.x-u10.x)*T6,cy6=u10.y+(v17.y-u10.y)*T6,null!=fst_vert1){var dx8=0,dy8=0;tmp16=(dx8=fst_vert1.x-cx6)*dx8+(dy8=fst_vert1.y-cy6)*dy8<nape.Config.epsilon}else tmp16=!1;if(tmp16){state=0,cx_ite12=beg_ite2;break}null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret6=new zpp_nape.geom.ZPP_Vec2:(ret6=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret6.next,ret6.next=null),ret6.weak=!1,ret6._immutable=!1,ret6.x=cx6,ret6.y=cy6;var cp1=ret6;if(null!=zpp_nape.geom.ZPP_Collide.flowpoly.head&&(zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),zpp_nape.geom.ZPP_Collide.flowsegs.add(cp1)),zpp_nape.geom.ZPP_Collide.flowpoly.add(cp1),null==fst_vert1&&(fst_vert1=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),two){var cx7=0,cy7=0,T7=t110;cx7=u10.x+(v17.x-u10.x)*T7,cy7=u10.y+(v17.y-u10.y)*T7;var tmp17=zpp_nape.geom.ZPP_Collide.flowpoly,ret7;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret7=new zpp_nape.geom.ZPP_Vec2:(ret7=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret7.next,ret7.next=null),ret7.weak=!1,ret7._immutable=!1,ret7.x=cx7,ret7.y=cy7,tmp17.add(ret7)}}}u10=v17,vi1=cx_ite12,vind=vind2,null==(cx_ite12=cx_ite12.next)&&(cx_ite12=s2.polygon.gverts.next);break}for(;cx_ite12!=beg_ite2;){var v18=cx_ite12,vind21=vind+1;if(vind21==s2.polygon.edgeCnt&&(vind21=0),inte[vind]){if(ins[vind21]){var vx3=0,vy3=0,qx3=0,qy3=0,A3=(vx3=v18.x-u10.x)*vx3+(vy3=v18.y-u10.y)*vy3,B3=2*((qx3=u10.x-s1.circle.worldCOMx)*vx3+(qy3=u10.y-s1.circle.worldCOMy)*vy3),C3=qx3*qx3+qy3*qy3-s1.circle.radius*s1.circle.radius,D3=Math.sqrt(B3*B3-4*A3*C3),t20=(-B3-D3)*(A3=1/(2*A3)),tval2,cx8=0,cy8=0,T8=t20<nape.Config.epsilon?(-B3+D3)*A3:t20;cx8=u10.x+(v18.x-u10.x)*T8,cy8=u10.y+(v18.y-u10.y)*T8;var dx9=0,dy9=0,ret8;if((dx9=fst_vert1.x-cx8)*dx9+(dy9=fst_vert1.y-cy8)*dy9<nape.Config.epsilon){state=0,cx_ite12=beg_ite2;break}null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret8=new zpp_nape.geom.ZPP_Vec2:(ret8=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret8.next,ret8.next=null),ret8.weak=!1,ret8._immutable=!1,ret8.x=cx8,ret8.y=cy8;var cp2=ret8;zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),zpp_nape.geom.ZPP_Collide.flowsegs.add(cp2),zpp_nape.geom.ZPP_Collide.flowpoly.add(cp2),state=1,cx_ite12=beg_ite2;break}var t01=0,t111=0,vx4=0,vy4=0,qx4=0,qy4=0,A4=(vx4=v18.x-u10.x)*vx4+(vy4=v18.y-u10.y)*vy4,B4=2*((qx4=u10.x-s1.circle.worldCOMx)*vx4+(qy4=u10.y-s1.circle.worldCOMy)*vy4),C4,D4=B4*B4-4*A4*(qx4*qx4+qy4*qy4-s1.circle.radius*s1.circle.radius),two1;if(D4*D4<nape.Config.epsilon?(t01=D4<0?10:t111=-B4/(2*A4),two1=!1):(t01=(-B4-(D4=Math.sqrt(D4)))*(A4=1/(2*A4)),t111=(-B4+D4)*A4,two1=!0),t01<1-nape.Config.epsilon&&t111>nape.Config.epsilon){var cx9=0,cy9=0,T9=t01,tmp18,ret9;if(cx9=u10.x+(v18.x-u10.x)*T9,cy9=u10.y+(v18.y-u10.y)*T9,null!=fst_vert1){var dx10=0,dy10=0;tmp18=(dx10=fst_vert1.x-cx9)*dx10+(dy10=fst_vert1.y-cy9)*dy10<nape.Config.epsilon}else tmp18=!1;if(tmp18){state=0,cx_ite12=beg_ite2;break}null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret9=new zpp_nape.geom.ZPP_Vec2:(ret9=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret9.next,ret9.next=null),ret9.weak=!1,ret9._immutable=!1,ret9.x=cx9,ret9.y=cy9;var cp3=ret9;if(null!=zpp_nape.geom.ZPP_Collide.flowpoly.head&&(zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),zpp_nape.geom.ZPP_Collide.flowsegs.add(cp3)),zpp_nape.geom.ZPP_Collide.flowpoly.add(cp3),null==fst_vert1&&(fst_vert1=zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),two1){var cx10=0,cy10=0,T10=t111;cx10=u10.x+(v18.x-u10.x)*T10,cy10=u10.y+(v18.y-u10.y)*T10;var tmp19=zpp_nape.geom.ZPP_Collide.flowpoly,ret10;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret10=new zpp_nape.geom.ZPP_Vec2:(ret10=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret10.next,ret10.next=null),ret10.weak=!1,ret10._immutable=!1,ret10.x=cx10,ret10.y=cy10,tmp19.add(ret10)}}}u10=v18,vi1=cx_ite12,vind=vind21,null==(cx_ite12=cx_ite12.next)&&(cx_ite12=s2.polygon.gverts.next)}}if(null==zpp_nape.geom.ZPP_Collide.flowpoly.head)return!1;if(null==zpp_nape.geom.ZPP_Collide.flowpoly.head.next){for(var all=!0,cx_ite13=s2.polygon.edges.head;null!=cx_ite13;){var e=cx_ite13.elt,dist2;if(e.gnormx*s1.circle.worldCOMx+e.gnormy*s1.circle.worldCOMy>e.gprojection){all=!1;break}cx_ite13=cx_ite13.next}return!!all&&(arb.overlap=s1.circle.area,arb.centroidx=s1.circle.worldCOMx,arb.centroidy=s1.circle.worldCOMy,!0)}var COMx1=0,COMy1=0,area4=0;if(null!=zpp_nape.geom.ZPP_Collide.flowpoly.head.next.next){var parea=0,pCOMx=0,pCOMy=0;pCOMx=0,pCOMy=0,parea=0;var cx_ite14=zpp_nape.geom.ZPP_Collide.flowpoly.head,u11=cx_ite14.elt,v19=(cx_ite14=cx_ite14.next).elt;for(cx_ite14=cx_ite14.next;null!=cx_ite14;){var w12=cx_ite14.elt;parea+=v19.x*(w12.y-u11.y);var cf12=w12.y*v19.x-w12.x*v19.y;pCOMx+=(v19.x+w12.x)*cf12,pCOMy+=(v19.y+w12.y)*cf12,u11=v19,v19=w12,cx_ite14=cx_ite14.next}var w13=(cx_ite14=zpp_nape.geom.ZPP_Collide.flowpoly.head).elt;parea+=v19.x*(w13.y-u11.y);var cf13=w13.y*v19.x-w13.x*v19.y;pCOMx+=(v19.x+w13.x)*cf13,pCOMy+=(v19.y+w13.y)*cf13,u11=v19,v19=w13;var w14=(cx_ite14=cx_ite14.next).elt;parea+=v19.x*(w14.y-u11.y);var cf14=w14.y*v19.x-w14.x*v19.y;pCOMx+=(v19.x+w14.x)*cf14,pCOMy+=(v19.y+w14.y)*cf14;var ia1=1/(6*(parea*=.5)),t21=ia1,t22=-parea;COMx1+=(pCOMx*=ia1)*t22,COMy1+=(pCOMy*=ia1)*t22,area4-=parea}else zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.elt),zpp_nape.geom.ZPP_Collide.flowsegs.add(zpp_nape.geom.ZPP_Collide.flowpoly.head.next.elt);for(;null!=zpp_nape.geom.ZPP_Collide.flowsegs.head;){var u12=zpp_nape.geom.ZPP_Collide.flowsegs.pop_unsafe(),v20=zpp_nape.geom.ZPP_Collide.flowsegs.pop_unsafe(),dx11=0,dy11=0,nx=0,ny=0,d=(nx=dx11=v20.x-u12.x)*nx+(ny=dy11=v20.y-u12.y)*ny,imag=1/Math.sqrt(d),t23=imag,t24=nx*=imag;nx=-(ny*=imag),ny=t24;var cx11=0,cy11=0;cx11=u12.x+v20.x,cy11=u12.y+v20.y;var t25=.5;cx11*=.5,cy11*=.5;var t26=1,xd,carea=0,ccom=0,X=nx*(cx11-=1*s1.circle.worldCOMx)+ny*(cy11-=1*s1.circle.worldCOMy),cos=X/s1.circle.radius,sin=Math.sqrt(1-cos*cos),theta=Math.acos(cos);carea=s1.circle.radius*(s1.circle.radius*theta-X*sin),ccom=.6666666666666666*s1.circle.radius*sin*sin*sin/(theta-cos*sin),cx11=s1.circle.worldCOMx,cy11=s1.circle.worldCOMy;var t27=ccom,t28=carea;COMx1+=(cx11+=nx*ccom)*carea,COMy1+=(cy11+=ny*ccom)*carea,area4+=carea}var t29=1/area4;return COMx1*=t29,COMy1*=t29,arb.overlap=area4,arb.centroidx=COMx1,arb.centroidy=COMy1,!0}return!1}return!1}var c1=s1.circle,c2=s2.circle,deltax=0,deltay=0;deltax=c2.worldCOMx-c1.worldCOMx,deltay=c2.worldCOMy-c1.worldCOMy;var cr=c1.radius+c2.radius,ds=deltax*deltax+deltay*deltay;if(ds>cr*cr)return!1;if(ds<nape.Config.epsilon*nape.Config.epsilon)return c1.radius<c2.radius?(arb.overlap=c1.area,arb.centroidx=c1.worldCOMx,arb.centroidy=c1.worldCOMy):(arb.overlap=c2.area,arb.centroidx=c2.worldCOMx,arb.centroidy=c2.worldCOMy),!0;var d1=Math.sqrt(ds),id=1/d1,x1=.5*(d1-(c2.radius*c2.radius-c1.radius*c1.radius)*id);if(x1<=-c1.radius)arb.overlap=c1.area,arb.centroidx=c1.worldCOMx,arb.centroidy=c1.worldCOMy;else{var x2=d1-x1;if(x2<=-c2.radius)arb.overlap=c2.area,arb.centroidx=c2.worldCOMx,arb.centroidy=c2.worldCOMy;else{var area11=0,y1=0,area21=0,y2=0,X1=x1,cos1=X1/c1.radius,sin1=Math.sqrt(1-cos1*cos1),theta1=Math.acos(cos1);area11=c1.radius*(c1.radius*theta1-X1*sin1),y1=.6666666666666666*c1.radius*sin1*sin1*sin1/(theta1-cos1*sin1);var X2=x2,cos2=X2/c2.radius,sin2=Math.sqrt(1-cos2*cos2),theta2=Math.acos(cos2),tarea=area11+(area21=c2.radius*(c2.radius*theta2-X2*sin2)),ya=(y1*area11+(d1-(y2=.6666666666666666*c2.radius*sin2*sin2*sin2/(theta2-cos2*sin2)))*area21)/tarea*id;arb.overlap=tarea,arb.centroidx=c1.worldCOMx+deltax*ya,arb.centroidy=c1.worldCOMy+deltay*ya}}return!0},zpp_nape.geom.ZPP_Collide.prototype.__class__=zpp_nape.geom.ZPP_Collide,zpp_nape.geom.ZPP_Convex=$hxClasses["zpp_nape.geom.ZPP_Convex"]=function(){},zpp_nape.geom.ZPP_Convex.__name__=["zpp_nape","geom","ZPP_Convex"],zpp_nape.geom.ZPP_Convex.isinner=function(a,b,c){var ux=0,uy=0;ux=a.x-b.x,uy=a.y-b.y;var vx=0,vy=0;return vx=c.x-b.x,(vy=c.y-b.y)*ux-vx*uy>=0},zpp_nape.geom.ZPP_Convex.optimise=function(P){var F=P.vertices,L=P.vertices;if(null!=F)for(var nite=F;;){var p;if(nite.sort(),(nite=nite.next)==L)break}var F1=P.vertices,L1=P.vertices;if(null!=F1)for(var nite1=F1;;){for(var p1=nite1,pright=p1.prev,ppre=null,cx_ite=p1.diagonals.head;null!=cx_ite;){var pdiag=cx_ite.elt,pleft=null==cx_ite.next?p1.next:cx_ite.next.elt;if(zpp_nape.geom.ZPP_Convex.isinner(pleft,p1,pright)){for(var removable=!0,q=pdiag,qright=q.prev,qpre=null,cx_ite1=q.diagonals.head;null!=cx_ite1;){var qdiag=cx_ite1.elt;if(qdiag==p1){var qleft=null==cx_ite1.next?q.next:cx_ite1.next.elt;removable=zpp_nape.geom.ZPP_Convex.isinner(qleft,q,qright);break}qright=qdiag,qpre=cx_ite1,cx_ite1=cx_ite1.next}removable?(cx_ite=p1.diagonals.erase(ppre),q.diagonals.erase(qpre)):(pright=pdiag,ppre=cx_ite,cx_ite=cx_ite.next)}else ppre=cx_ite,pright=pdiag,cx_ite=cx_ite.next}if((nite1=nite1.next)==L1)break}},zpp_nape.geom.ZPP_Convex.prototype.__class__=zpp_nape.geom.ZPP_Convex,zpp_nape.geom.ZPP_ConvexRayResult=$hxClasses["zpp_nape.geom.ZPP_ConvexRayResult"]=function(){this.toiDistance=0,this.next=null,this.inner=!1,this.ray=null,this.position=null,this.convex=null,this.shape=null,this.normal=null},zpp_nape.geom.ZPP_ConvexRayResult.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"],zpp_nape.geom.ZPP_ConvexRayResult.getRay=function(normal,time,inner,shape){var ret;null==zpp_nape.geom.ZPP_ConvexRayResult.rayPool?(zpp_nape.geom.ZPP_ConvexRayResult.internal=!0,(ret=new nape.geom.RayResult).zpp_inner=new zpp_nape.geom.ZPP_ConvexRayResult,ret.zpp_inner.ray=ret,zpp_nape.geom.ZPP_ConvexRayResult.internal=!1):(ret=zpp_nape.geom.ZPP_ConvexRayResult.rayPool.ray,zpp_nape.geom.ZPP_ConvexRayResult.rayPool=zpp_nape.geom.ZPP_ConvexRayResult.rayPool.next,ret.zpp_inner.next=null);var zinner=ret.zpp_inner;return zinner.normal=normal,normal.zpp_inner._immutable=!0,zinner.toiDistance=time,zinner.inner=inner,zinner.shape=shape,ret},zpp_nape.geom.ZPP_ConvexRayResult.getConvex=function(normal,position,toiDistance,shape){var ret;null==zpp_nape.geom.ZPP_ConvexRayResult.convexPool?(zpp_nape.geom.ZPP_ConvexRayResult.internal=!0,(ret=new nape.geom.ConvexResult).zpp_inner=new zpp_nape.geom.ZPP_ConvexRayResult,ret.zpp_inner.convex=ret,zpp_nape.geom.ZPP_ConvexRayResult.internal=!1):(ret=zpp_nape.geom.ZPP_ConvexRayResult.convexPool.convex,zpp_nape.geom.ZPP_ConvexRayResult.convexPool=zpp_nape.geom.ZPP_ConvexRayResult.convexPool.next,ret.zpp_inner.next=null);var inner=ret.zpp_inner;return inner.normal=normal,inner.position=position,normal.zpp_inner._immutable=!0,position.zpp_inner._immutable=!0,inner.toiDistance=toiDistance,inner.shape=shape,ret},zpp_nape.geom.ZPP_ConvexRayResult.prototype.normal=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.shape=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.convex=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.position=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.ray=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.inner=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.next=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.toiDistance=null,zpp_nape.geom.ZPP_ConvexRayResult.prototype.disposed=function(){if(null!=this.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used")},zpp_nape.geom.ZPP_ConvexRayResult.prototype.free=function(){this.normal.zpp_inner._immutable=!1;var _this=this.normal;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o=_this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;if(null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,null!=this.position){this.position.zpp_inner._immutable=!1;var _this2=this.position;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),_this2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=_this2.zpp_inner;_this2.zpp_inner.outer=null,_this2.zpp_inner=null;var o2=_this2;o2.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o2:zpp_nape.util.ZPP_PubPool.poolVec2=o2,zpp_nape.util.ZPP_PubPool.nextVec2=o2,o2.zpp_disp=!0;var o3=inner1;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3._isimmutable=null,o3._validate=null,o3._invalidate=null,o3.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o3}this.shape=null,this.toiDistance=0,null!=this.convex?(this.next=zpp_nape.geom.ZPP_ConvexRayResult.convexPool,zpp_nape.geom.ZPP_ConvexRayResult.convexPool=this):(this.next=zpp_nape.geom.ZPP_ConvexRayResult.rayPool,zpp_nape.geom.ZPP_ConvexRayResult.rayPool=this)},zpp_nape.geom.ZPP_ConvexRayResult.prototype.__class__=zpp_nape.geom.ZPP_ConvexRayResult,zpp_nape.geom.ZPP_CutVert=$hxClasses["zpp_nape.geom.ZPP_CutVert"]=function(){this.used=!1,this.rank=0,this.parent=null,this.positive=!1,this.value=0,this.vert=null,this.posy=0,this.posx=0,this.next=null,this.prev=null},zpp_nape.geom.ZPP_CutVert.__name__=["zpp_nape","geom","ZPP_CutVert"],zpp_nape.geom.ZPP_CutVert.path=function(poly){var ret;return null==zpp_nape.geom.ZPP_CutVert.zpp_pool?ret=new zpp_nape.geom.ZPP_CutVert:(ret=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=ret.next,ret.next=null),ret.vert=poly,ret.parent=ret,ret.rank=0,ret.used=!1,ret},zpp_nape.geom.ZPP_CutVert.prototype.prev=null,zpp_nape.geom.ZPP_CutVert.prototype.next=null,zpp_nape.geom.ZPP_CutVert.prototype.posx=null,zpp_nape.geom.ZPP_CutVert.prototype.posy=null,zpp_nape.geom.ZPP_CutVert.prototype.vert=null,zpp_nape.geom.ZPP_CutVert.prototype.value=null,zpp_nape.geom.ZPP_CutVert.prototype.positive=null,zpp_nape.geom.ZPP_CutVert.prototype.parent=null,zpp_nape.geom.ZPP_CutVert.prototype.rank=null,zpp_nape.geom.ZPP_CutVert.prototype.used=null,zpp_nape.geom.ZPP_CutVert.prototype.alloc=function(){},zpp_nape.geom.ZPP_CutVert.prototype.free=function(){this.vert=null,this.parent=null},zpp_nape.geom.ZPP_CutVert.prototype.__class__=zpp_nape.geom.ZPP_CutVert,zpp_nape.geom.ZPP_CutInt=$hxClasses["zpp_nape.geom.ZPP_CutInt"]=function(){this.path1=null,this.start=null,this.end=null,this.path0=null,this.vertex=!1,this.virtualint=!1,this.time=0,this.next=null},zpp_nape.geom.ZPP_CutInt.__name__=["zpp_nape","geom","ZPP_CutInt"],zpp_nape.geom.ZPP_CutInt.get=function(time,end,start,path0,path1,virtualint,vertex){var ret;return null==vertex&&(vertex=!1),null==virtualint&&(virtualint=!1),null==zpp_nape.geom.ZPP_CutInt.zpp_pool?ret=new zpp_nape.geom.ZPP_CutInt:(ret=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=ret.next,ret.next=null),ret.virtualint=virtualint,ret.end=end,ret.start=start,ret.path0=path0,ret.path1=path1,ret.time=time,ret.vertex=vertex,ret},zpp_nape.geom.ZPP_CutInt.prototype.next=null,zpp_nape.geom.ZPP_CutInt.prototype.time=null,zpp_nape.geom.ZPP_CutInt.prototype.virtualint=null,zpp_nape.geom.ZPP_CutInt.prototype.vertex=null,zpp_nape.geom.ZPP_CutInt.prototype.path0=null,zpp_nape.geom.ZPP_CutInt.prototype.end=null,zpp_nape.geom.ZPP_CutInt.prototype.start=null,zpp_nape.geom.ZPP_CutInt.prototype.path1=null,zpp_nape.geom.ZPP_CutInt.prototype.alloc=function(){},zpp_nape.geom.ZPP_CutInt.prototype.free=function(){this.end=this.start=null,this.path0=this.path1=null},zpp_nape.geom.ZPP_CutInt.prototype.__class__=zpp_nape.geom.ZPP_CutInt,zpp_nape.geom.ZPP_Cutter=$hxClasses["zpp_nape.geom.ZPP_Cutter"]=function(){},zpp_nape.geom.ZPP_Cutter.__name__=["zpp_nape","geom","ZPP_Cutter"],zpp_nape.geom.ZPP_Cutter.run=function(P,_start,_end,bstart,bend,output){var px=0,py=0;if(null!=_start&&_start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=_start.zpp_inner;if(null!=_this._validate&&_this._validate(),px=_start.zpp_inner.x,null!=_start&&_start.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_start.zpp_inner;null!=_this1._validate&&_this1._validate(),py=_start.zpp_inner.y;var dx=0,dy=0;if(null!=_end&&_end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=_end.zpp_inner;if(null!=_this2._validate&&_this2._validate(),dx=_end.zpp_inner.x-px,null!=_end&&_end.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_end.zpp_inner;null!=_this3._validate&&_this3._validate();for(var min=bstart?0:-1/0,max=bend?1:1/0,crx=-(py*dx-px*(dy=_end.zpp_inner.y-py)),verts=null,clashes=!1,p=P;;){var c;null==zpp_nape.geom.ZPP_CutVert.zpp_pool?c=new zpp_nape.geom.ZPP_CutVert:(c=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=c.next,c.next=null),c.vert=p,c.posx=c.vert.x,c.posy=c.vert.y,c.value=c.posy*dx-c.posx*dy+crx,c.positive=c.value>0,0==c.value&&(clashes=!0);var obj=c;if(null==verts?verts=obj.prev=obj.next=obj:(obj.prev=verts,obj.next=verts.next,verts.next.prev=obj,verts.next=obj),verts=obj,(p=p.next)==P)break}if(clashes){var start=null,F=verts,L=verts;if(null!=verts)for(var nite=verts;;){var p1=nite;if(0!=p1.value){start=p1;break}if((nite=nite.next)==L)break}var nx=0,ny=0,d=(nx=dx)*nx+(ny=dy)*ny,imag=1/Math.sqrt(d),t=imag,t1=nx*=imag;nx=-(ny*=imag),ny=t1;for(var pre=null,p2=start;;)if(0==p2.value||null!=pre&&p2!=pre.next){var prod=pre.value*p2.value;if(0!=prod){var a=pre.next,positive;if(prod>0)positive=pre.positive;else{var b=a.next,midx=0,midy=0;midx=a.posx+b.posx,midy=a.posy+b.posy;var t2=.5,x=(midx*=.5)+1e-8*nx,y=(midy*=.5)+1e-8*ny,ret=!1,F1=P,L1=P;if(null!=P)for(var nite1=P;;){var p3=nite1,q=p3.prev;if((p3.y<y&&q.y>=y||q.y<y&&p3.y>=y)&&(p3.x<=x||q.x<=x)&&p3.x+(y-p3.y)/(q.y-p3.y)*(q.x-p3.x)<x&&(ret=!ret),(nite1=nite1.next)==L1)break}positive=ret}var F2=a,L2=p2;if(null!=a)for(var nite2=a;;){var q1;if(nite2.positive=positive,(nite2=nite2.next)==L2)break}if(pre=p2,(p2=p2.next)==start)break}else if((p2=p2.next)==start)break}else if(pre=p2,(p2=p2.next)==start)break;for(;;){if(0!=p2.value&&(null==pre||p2==pre.next)){pre=p2,p2=p2.next;break}var prod1=pre.value*p2.value;if(0==prod1){p2=p2.next;break}var a1=pre.next,positive1;if(prod1>0)positive1=pre.positive;else{var b1=a1.next,midx1=0,midy1=0;midx1=a1.posx+b1.posx,midy1=a1.posy+b1.posy;var t3=.5,x1=(midx1*=.5)+1e-8*nx,y1=(midy1*=.5)+1e-8*ny,ret1=!1,F3=P,L3=P;if(null!=P)for(var nite3=P;;){var p4=nite3,q2=p4.prev;if((p4.y<y1&&q2.y>=y1||q2.y<y1&&p4.y>=y1)&&(p4.x<=x1||q2.x<=x1)&&p4.x+(y1-p4.y)/(q2.y-p4.y)*(q2.x-p4.x)<x1&&(ret1=!ret1),(nite3=nite3.next)==L3)break}positive1=ret1}var F4=a1,L4=p2;if(null!=a1)for(var nite4=a1;;){var q3;if(nite4.positive=positive1,(nite4=nite4.next)==L4)break}pre=p2,p2=p2.next;break}}null==zpp_nape.geom.ZPP_Cutter.ints&&(zpp_nape.geom.ZPP_Cutter.ints=new zpp_nape.util.ZNPList_ZPP_CutInt),null==zpp_nape.geom.ZPP_Cutter.paths&&(zpp_nape.geom.ZPP_Cutter.paths=new zpp_nape.util.ZNPList_ZPP_CutVert);var start1=null,x2=verts.posx,y2=verts.posy,ret2;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret2=new zpp_nape.geom.ZPP_GeomVert:(ret2=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret2.next,ret2.next=null),ret2.forced=!1,ret2.x=x2,ret2.y=y2;var obj1=ret2;null==start1?start1=obj1.prev=obj1.next=obj1:(obj1.next=start1,obj1.prev=start1.prev,start1.prev.next=obj1,start1.prev=obj1);var origin=start1,ret3;null==zpp_nape.geom.ZPP_CutVert.zpp_pool?ret3=new zpp_nape.geom.ZPP_CutVert:(ret3=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=ret3.next,ret3.next=null),ret3.vert=start1,ret3.parent=ret3,ret3.rank=0,ret3.used=!1;var firstpath=ret3;zpp_nape.geom.ZPP_Cutter.paths.add(firstpath);for(var i=verts;;){var j=i.next,x3=j.posx,y3=j.posy,ret4;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret4=new zpp_nape.geom.ZPP_GeomVert:(ret4=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret4.next,ret4.next=null),ret4.forced=!1,ret4.x=x3,ret4.y=y3;var pj=ret4;if(i.positive==j.positive){var obj2=pj;null==start1?start1=obj2.prev=obj2.next=obj2:(obj2.next=start1,obj2.prev=start1.prev,start1.prev.next=obj2,start1.prev=obj2)}else{var ux=0,uy=0,denom=dy*(ux=j.posx-i.posx)-dx*(uy=j.posy-i.posy);denom=1/denom;var pax=0,pay=0,s=(uy*(pax=px-i.posx)-ux*(pay=py-i.posy))*denom;if(s<min||s>max){var tmp=zpp_nape.geom.ZPP_Cutter.ints,virtualint=!0,ret5;null==virtualint&&(virtualint=!1),null==zpp_nape.geom.ZPP_CutInt.zpp_pool?ret5=new zpp_nape.geom.ZPP_CutInt:(ret5=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=ret5.next,ret5.next=null),ret5.virtualint=virtualint,ret5.end=null,ret5.start=null,ret5.path0=null,ret5.path1=null,ret5.time=s,ret5.vertex=!1,tmp.add(ret5);var obj3=pj;null==start1?start1=obj3.prev=obj3.next=obj3:(obj3.next=start1,obj3.prev=start1.prev,start1.prev.next=obj3,start1.prev=obj3)}else if(0==i.value){var endof=start1.prev;start1=null;var x4=endof.x,y4=endof.y,ret6;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret6=new zpp_nape.geom.ZPP_GeomVert:(ret6=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret6.next,ret6.next=null),ret6.forced=!1,ret6.x=x4,ret6.y=y4;var obj4=ret6;null==start1?start1=obj4.prev=obj4.next=obj4:(obj4.next=start1,obj4.prev=start1.prev,start1.prev.next=obj4,start1.prev=obj4);var obj5=pj;null==start1?start1=obj5.prev=obj5.next=obj5:(obj5.next=start1,obj5.prev=start1.prev,start1.prev.next=obj5,start1.prev=obj5);var prepath=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp1=zpp_nape.geom.ZPP_Cutter.paths,ret7;null==zpp_nape.geom.ZPP_CutVert.zpp_pool?ret7=new zpp_nape.geom.ZPP_CutVert:(ret7=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=ret7.next,ret7.next=null),ret7.vert=start1,ret7.parent=ret7,ret7.rank=0,ret7.used=!1,tmp1.add(ret7);var postpath=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp2=zpp_nape.geom.ZPP_Cutter.ints,virtualint1=!0,ret8;null==virtualint1&&(virtualint1=!1),null==zpp_nape.geom.ZPP_CutInt.zpp_pool?ret8=new zpp_nape.geom.ZPP_CutInt:(ret8=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=ret8.next,ret8.next=null),ret8.virtualint=virtualint1,ret8.end=endof,ret8.start=start1,ret8.path0=prepath,ret8.path1=postpath,ret8.time=s,ret8.vertex=!1,tmp2.add(ret8)}else if(0==j.value){var obj6=pj;null==start1?start1=obj6.prev=obj6.next=obj6:(obj6.next=start1,obj6.prev=start1.prev,start1.prev.next=obj6,start1.prev=obj6);var endof1=start1.prev;start1=null;var x5=j.posx,y5=j.posy,ret9;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret9=new zpp_nape.geom.ZPP_GeomVert:(ret9=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret9.next,ret9.next=null),ret9.forced=!1,ret9.x=x5,ret9.y=y5;var obj7=ret9;null==start1?start1=obj7.prev=obj7.next=obj7:(obj7.next=start1,obj7.prev=start1.prev,start1.prev.next=obj7,start1.prev=obj7);var prepath1=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp3=zpp_nape.geom.ZPP_Cutter.paths,ret10;null==zpp_nape.geom.ZPP_CutVert.zpp_pool?ret10=new zpp_nape.geom.ZPP_CutVert:(ret10=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=ret10.next,ret10.next=null),ret10.vert=start1,ret10.parent=ret10,ret10.rank=0,ret10.used=!1,tmp3.add(ret10);var postpath1=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp4=zpp_nape.geom.ZPP_Cutter.ints,virtualint2=!0,ret11;null==virtualint2&&(virtualint2=!1),null==zpp_nape.geom.ZPP_CutInt.zpp_pool?ret11=new zpp_nape.geom.ZPP_CutInt:(ret11=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=ret11.next,ret11.next=null),ret11.virtualint=virtualint2,ret11.end=endof1,ret11.start=start1,ret11.path0=prepath1,ret11.path1=postpath1,ret11.time=s,ret11.vertex=!1,tmp4.add(ret11)}else{var t4=(dy*pax-dx*pay)*denom,qx=0,qy=0;qx=i.posx,qy=i.posy;var t5=t4,ret12;qx+=ux*t4,qy+=uy*t4,null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret12=new zpp_nape.geom.ZPP_GeomVert:(ret12=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret12.next,ret12.next=null),ret12.forced=!1,ret12.x=qx,ret12.y=qy;var obj8=ret12;null==start1?start1=obj8.prev=obj8.next=obj8:(obj8.next=start1,obj8.prev=start1.prev,start1.prev.next=obj8,start1.prev=obj8);var endof2=start1.prev,ret13;start1=null,null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret13=new zpp_nape.geom.ZPP_GeomVert:(ret13=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret13.next,ret13.next=null),ret13.forced=!1,ret13.x=qx,ret13.y=qy;var obj9=ret13;null==start1?start1=obj9.prev=obj9.next=obj9:(obj9.next=start1,obj9.prev=start1.prev,start1.prev.next=obj9,start1.prev=obj9);var obj10=pj;null==start1?start1=obj10.prev=obj10.next=obj10:(obj10.next=start1,obj10.prev=start1.prev,start1.prev.next=obj10,start1.prev=obj10);var prepath2=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp5=zpp_nape.geom.ZPP_Cutter.paths,ret14;null==zpp_nape.geom.ZPP_CutVert.zpp_pool?ret14=new zpp_nape.geom.ZPP_CutVert:(ret14=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=ret14.next,ret14.next=null),ret14.vert=start1,ret14.parent=ret14,ret14.rank=0,ret14.used=!1,tmp5.add(ret14);var postpath2=zpp_nape.geom.ZPP_Cutter.paths.head.elt,tmp6=zpp_nape.geom.ZPP_Cutter.ints,virtualint3=!1,ret15;null==virtualint3&&(virtualint3=!1),null==zpp_nape.geom.ZPP_CutInt.zpp_pool?ret15=new zpp_nape.geom.ZPP_CutInt:(ret15=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=ret15.next,ret15.next=null),ret15.virtualint=virtualint3,ret15.end=endof2,ret15.start=start1,ret15.path0=prepath2,ret15.path1=postpath2,ret15.time=s,ret15.vertex=!1,tmp6.add(ret15)}}if((i=i.next)==verts)break}var endof3=start1.prev;endof3.next.prev=origin.prev,origin.prev.next=endof3.next,endof3.next=origin,origin.prev=endof3;var lastpath=zpp_nape.geom.ZPP_Cutter.paths.head.elt,xr,yr;if(firstpath==firstpath.parent)xr=firstpath;else{for(var obj11=firstpath,stack=null;obj11!=obj11.parent;){var nxt=obj11.parent;obj11.parent=stack,stack=obj11,obj11=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj11,stack=nxt1}xr=obj11}if(lastpath==lastpath.parent)yr=lastpath;else{for(var obj12=lastpath,stack1=null;obj12!=obj12.parent;){var nxt2=obj12.parent;obj12.parent=stack1,stack1=obj12,obj12=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj12,stack1=nxt3}yr=obj12}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++));var xxlist=zpp_nape.geom.ZPP_Cutter.ints;if(null!=xxlist.head&&null!=xxlist.head.next){for(var head=xxlist.head,tail=null,left=null,right=null,nxt4=null,listSize=1,numMerges,leftSize,rightSize;;){for(numMerges=0,left=head,tail=head=null;null!=left;){for(++numMerges,right=left,leftSize=0,rightSize=listSize;null!=right&&leftSize<listSize;)++leftSize,right=right.next;for(;leftSize>0||rightSize>0&&null!=right;)0==leftSize?(nxt4=right,right=right.next,--rightSize):0==rightSize||null==right?(nxt4=left,left=left.next,--leftSize):left.elt.time<right.elt.time?(nxt4=left,left=left.next,--leftSize):(nxt4=right,right=right.next,--rightSize),null!=tail?tail.next=nxt4:head=nxt4,tail=nxt4;left=right}if(tail.next=null,listSize<<=1,!(numMerges>1))break}xxlist.head=head,xxlist.modified=!0,xxlist.pushmod=!0}for(;null!=zpp_nape.geom.ZPP_Cutter.ints.head;){var i1=zpp_nape.geom.ZPP_Cutter.ints.pop_unsafe(),j1=zpp_nape.geom.ZPP_Cutter.ints.pop_unsafe();if(i1.virtualint||j1.virtualint){if(i1.virtualint&&!j1.virtualint){var tmp7,xr3,yr3;if(null!=j1.end&&j1.end.prev==j1.end){j1.end.next=j1.end.prev=null;var o=j1.end;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this4=o.wrap;if(null!=_this4&&_this4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this4.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),_this4.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this4.zpp_inner;_this4.zpp_inner.outer=null,_this4.zpp_inner=null;var o1=_this4;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o,tmp7=null}else{var retnodes=j1.end.prev;j1.end.prev.next=j1.end.next,j1.end.next.prev=j1.end.prev,j1.end.next=j1.end.prev=null;var o3=j1.end;if(null!=o3.wrap){o3.wrap.zpp_inner._inuse=!1;var _this6=o3.wrap;if(null!=_this6&&_this6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=_this6.zpp_inner;if(_this7._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this7._isimmutable&&_this7._isimmutable(),_this6.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=_this6.zpp_inner;_this6.zpp_inner.outer=null,_this6.zpp_inner=null;var o4=_this6;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner1;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5,o3.wrap=null}o3.prev=o3.next=null,o3.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o3,j1.end=null,tmp7=retnodes}if(j1.end=tmp7,!j1.vertex)if(j1.end!=j1.path0.vert){var tmp8;if(j1.start.x=j1.end.x,j1.start.y=j1.end.y,null!=j1.end&&j1.end.prev==j1.end){j1.end.next=j1.end.prev=null;var o6=j1.end;if(null!=o6.wrap){o6.wrap.zpp_inner._inuse=!1;var _this8=o6.wrap;if(null!=_this8&&_this8.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=_this8.zpp_inner;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),_this8.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=_this8.zpp_inner;_this8.zpp_inner.outer=null,_this8.zpp_inner=null;var o7=_this8;o7.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o7:zpp_nape.util.ZPP_PubPool.poolVec2=o7,zpp_nape.util.ZPP_PubPool.nextVec2=o7,o7.zpp_disp=!0;var o8=inner2;null!=o8.outer&&(o8.outer.zpp_inner=null,o8.outer=null),o8._isimmutable=null,o8._validate=null,o8._invalidate=null,o8.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o8,o6.wrap=null}o6.prev=o6.next=null,o6.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o6,tmp8=null}else{var retnodes1=j1.end.prev;j1.end.prev.next=j1.end.next,j1.end.next.prev=j1.end.prev,j1.end.next=j1.end.prev=null;var o9=j1.end;if(null!=o9.wrap){o9.wrap.zpp_inner._inuse=!1;var _this10=o9.wrap;if(null!=_this10&&_this10.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=_this10.zpp_inner;if(_this11._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this11._isimmutable&&_this11._isimmutable(),_this10.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner3=_this10.zpp_inner;_this10.zpp_inner.outer=null,_this10.zpp_inner=null;var o10=_this10;o10.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o10:zpp_nape.util.ZPP_PubPool.poolVec2=o10,zpp_nape.util.ZPP_PubPool.nextVec2=o10,o10.zpp_disp=!0;var o11=inner3;null!=o11.outer&&(o11.outer.zpp_inner=null,o11.outer=null),o11._isimmutable=null,o11._validate=null,o11._invalidate=null,o11.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o11,o9.wrap=null}o9.prev=o9.next=null,o9.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o9,j1.end=null,tmp8=retnodes1}j1.end=tmp8}else{var n=j1.start.next;if(j1.start.x=n.x,j1.start.y=n.y,null!=n&&n.prev==n){n.next=n.prev=null;var o12=n;if(null!=o12.wrap){o12.wrap.zpp_inner._inuse=!1;var _this12=o12.wrap;if(null!=_this12&&_this12.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=_this12.zpp_inner;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),_this12.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner4=_this12.zpp_inner;_this12.zpp_inner.outer=null,_this12.zpp_inner=null;var o13=_this12;o13.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o13:zpp_nape.util.ZPP_PubPool.poolVec2=o13,zpp_nape.util.ZPP_PubPool.nextVec2=o13,o13.zpp_disp=!0;var o14=inner4;null!=o14.outer&&(o14.outer.zpp_inner=null,o14.outer=null),o14._isimmutable=null,o14._validate=null,o14._invalidate=null,o14.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o14,o12.wrap=null}o12.prev=o12.next=null,o12.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o12,n=null}else{n.prev.next=n.next,n.next.prev=n.prev,n.next=n.prev=null;var o15=n;if(null!=o15.wrap){o15.wrap.zpp_inner._inuse=!1;var _this14=o15.wrap;if(null!=_this14&&_this14.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=_this14.zpp_inner;if(_this15._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this15._isimmutable&&_this15._isimmutable(),_this14.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner5=_this14.zpp_inner;_this14.zpp_inner.outer=null,_this14.zpp_inner=null;var o16=_this14;o16.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o16:zpp_nape.util.ZPP_PubPool.poolVec2=o16,zpp_nape.util.ZPP_PubPool.nextVec2=o16,o16.zpp_disp=!0;var o17=inner5;null!=o17.outer&&(o17.outer.zpp_inner=null,o17.outer=null),o17._isimmutable=null,o17._validate=null,o17._invalidate=null,o17.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o17,o15.wrap=null}o15.prev=o15.next=null,o15.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o15}}if(j1.end.next.prev=j1.start.prev,j1.start.prev.next=j1.end.next,j1.end.next=j1.start,j1.start.prev=j1.end,j1.path0==j1.path0.parent)xr3=j1.path0;else{for(var obj17=j1.path0,stack6=null;obj17!=obj17.parent;){var nxt13=obj17.parent;obj17.parent=stack6,stack6=obj17,obj17=nxt13}for(;null!=stack6;){var nxt14=stack6.parent;stack6.parent=obj17,stack6=nxt14}xr3=obj17}if(j1.path1==j1.path1.parent)yr3=j1.path1;else{for(var obj18=j1.path1,stack7=null;obj18!=obj18.parent;){var nxt15=obj18.parent;obj18.parent=stack7,stack7=obj18,obj18=nxt15}for(;null!=stack7;){var nxt16=stack7.parent;stack7.parent=obj18,stack7=nxt16}yr3=obj18}xr3!=yr3&&(xr3.rank<yr3.rank?xr3.parent=yr3:xr3.rank>yr3.rank?yr3.parent=xr3:(yr3.parent=xr3,xr3.rank++))}else if(j1.virtualint&&!i1.virtualint){var tmp9,xr4,yr4;if(null!=i1.end&&i1.end.prev==i1.end){i1.end.next=i1.end.prev=null;var o18=i1.end;if(null!=o18.wrap){o18.wrap.zpp_inner._inuse=!1;var _this16=o18.wrap;if(null!=_this16&&_this16.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this17=_this16.zpp_inner;if(_this17._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this17._isimmutable&&_this17._isimmutable(),_this16.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner6=_this16.zpp_inner;_this16.zpp_inner.outer=null,_this16.zpp_inner=null;var o19=_this16;o19.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o19:zpp_nape.util.ZPP_PubPool.poolVec2=o19,zpp_nape.util.ZPP_PubPool.nextVec2=o19,o19.zpp_disp=!0;var o20=inner6;null!=o20.outer&&(o20.outer.zpp_inner=null,o20.outer=null),o20._isimmutable=null,o20._validate=null,o20._invalidate=null,o20.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o20,o18.wrap=null}o18.prev=o18.next=null,o18.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o18,tmp9=null}else{var retnodes2=i1.end.prev;i1.end.prev.next=i1.end.next,i1.end.next.prev=i1.end.prev,i1.end.next=i1.end.prev=null;var o21=i1.end;if(null!=o21.wrap){o21.wrap.zpp_inner._inuse=!1;var _this18=o21.wrap;if(null!=_this18&&_this18.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this19=_this18.zpp_inner;if(_this19._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this19._isimmutable&&_this19._isimmutable(),_this18.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner7=_this18.zpp_inner;_this18.zpp_inner.outer=null,_this18.zpp_inner=null;var o22=_this18;o22.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o22:zpp_nape.util.ZPP_PubPool.poolVec2=o22,zpp_nape.util.ZPP_PubPool.nextVec2=o22,o22.zpp_disp=!0;var o23=inner7;null!=o23.outer&&(o23.outer.zpp_inner=null,o23.outer=null),o23._isimmutable=null,o23._validate=null,o23._invalidate=null,o23.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o23,o21.wrap=null}o21.prev=o21.next=null,o21.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o21,i1.end=null,tmp9=retnodes2}if(i1.end=tmp9,!i1.vertex)if(i1.end!=i1.path0.vert){var tmp10;if(i1.start.x=i1.end.x,i1.start.y=i1.end.y,null!=i1.end&&i1.end.prev==i1.end){i1.end.next=i1.end.prev=null;var o24=i1.end;if(null!=o24.wrap){o24.wrap.zpp_inner._inuse=!1;var _this20=o24.wrap;if(null!=_this20&&_this20.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this21=_this20.zpp_inner;if(_this21._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this21._isimmutable&&_this21._isimmutable(),_this20.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner8=_this20.zpp_inner;_this20.zpp_inner.outer=null,_this20.zpp_inner=null;var o25=_this20;o25.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o25:zpp_nape.util.ZPP_PubPool.poolVec2=o25,zpp_nape.util.ZPP_PubPool.nextVec2=o25,o25.zpp_disp=!0;var o26=inner8;null!=o26.outer&&(o26.outer.zpp_inner=null,o26.outer=null),o26._isimmutable=null,o26._validate=null,o26._invalidate=null,o26.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o26,o24.wrap=null}o24.prev=o24.next=null,o24.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o24,tmp10=null}else{var retnodes3=i1.end.prev;i1.end.prev.next=i1.end.next,i1.end.next.prev=i1.end.prev,i1.end.next=i1.end.prev=null;var o27=i1.end;if(null!=o27.wrap){o27.wrap.zpp_inner._inuse=!1;var _this22=o27.wrap;if(null!=_this22&&_this22.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this23=_this22.zpp_inner;if(_this23._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this23._isimmutable&&_this23._isimmutable(),_this22.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner9=_this22.zpp_inner;_this22.zpp_inner.outer=null,_this22.zpp_inner=null;var o28=_this22;o28.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o28:zpp_nape.util.ZPP_PubPool.poolVec2=o28,zpp_nape.util.ZPP_PubPool.nextVec2=o28,o28.zpp_disp=!0;var o29=inner9;null!=o29.outer&&(o29.outer.zpp_inner=null,o29.outer=null),o29._isimmutable=null,o29._validate=null,o29._invalidate=null,o29.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o29,o27.wrap=null}o27.prev=o27.next=null,o27.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o27,i1.end=null,tmp10=retnodes3}i1.end=tmp10}else{var n1=i1.start.next;if(i1.start.x=n1.x,i1.start.y=n1.y,null!=n1&&n1.prev==n1){n1.next=n1.prev=null;var o30=n1;if(null!=o30.wrap){o30.wrap.zpp_inner._inuse=!1;var _this24=o30.wrap;if(null!=_this24&&_this24.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this25=_this24.zpp_inner;if(_this25._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this25._isimmutable&&_this25._isimmutable(),_this24.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner10=_this24.zpp_inner;_this24.zpp_inner.outer=null,_this24.zpp_inner=null;var o31=_this24;o31.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o31:zpp_nape.util.ZPP_PubPool.poolVec2=o31,zpp_nape.util.ZPP_PubPool.nextVec2=o31,o31.zpp_disp=!0;var o32=inner10;null!=o32.outer&&(o32.outer.zpp_inner=null,o32.outer=null),o32._isimmutable=null,o32._validate=null,o32._invalidate=null,o32.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o32,o30.wrap=null}o30.prev=o30.next=null,o30.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o30,n1=null}else{n1.prev.next=n1.next,n1.next.prev=n1.prev,n1.next=n1.prev=null;var o33=n1;if(null!=o33.wrap){o33.wrap.zpp_inner._inuse=!1;var _this26=o33.wrap;if(null!=_this26&&_this26.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this27=_this26.zpp_inner;if(_this27._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this27._isimmutable&&_this27._isimmutable(),_this26.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner11=_this26.zpp_inner;_this26.zpp_inner.outer=null,_this26.zpp_inner=null;var o34=_this26;o34.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o34:zpp_nape.util.ZPP_PubPool.poolVec2=o34,zpp_nape.util.ZPP_PubPool.nextVec2=o34,o34.zpp_disp=!0;var o35=inner11;null!=o35.outer&&(o35.outer.zpp_inner=null,o35.outer=null),o35._isimmutable=null,o35._validate=null,o35._invalidate=null,o35.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o35,o33.wrap=null}o33.prev=o33.next=null,o33.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o33}}if(i1.end.next.prev=i1.start.prev,i1.start.prev.next=i1.end.next,i1.end.next=i1.start,i1.start.prev=i1.end,i1.path0==i1.path0.parent)xr4=i1.path0;else{for(var obj19=i1.path0,stack8=null;obj19!=obj19.parent;){var nxt17=obj19.parent;obj19.parent=stack8,stack8=obj19,obj19=nxt17}for(;null!=stack8;){var nxt18=stack8.parent;stack8.parent=obj19,stack8=nxt18}xr4=obj19}if(i1.path1==i1.path1.parent)yr4=i1.path1;else{for(var obj20=i1.path1,stack9=null;obj20!=obj20.parent;){var nxt19=obj20.parent;obj20.parent=stack9,stack9=obj20,obj20=nxt19}for(;null!=stack9;){var nxt20=stack9.parent;stack9.parent=obj20,stack9=nxt20}yr4=obj20}xr4!=yr4&&(xr4.rank<yr4.rank?xr4.parent=yr4:xr4.rank>yr4.rank?yr4.parent=xr4:(yr4.parent=xr4,xr4.rank++))}}else{var xr1,yr1,xr2,yr2;if(i1.end.next.prev=j1.start.prev,j1.start.prev.next=i1.end.next,i1.end.next=j1.start,j1.start.prev=i1.end,j1.end.next.prev=i1.start.prev,i1.start.prev.next=j1.end.next,j1.end.next=i1.start,i1.start.prev=j1.end,i1.path0==i1.path0.parent)xr1=i1.path0;else{for(var obj13=i1.path0,stack2=null;obj13!=obj13.parent;){var nxt5=obj13.parent;obj13.parent=stack2,stack2=obj13,obj13=nxt5}for(;null!=stack2;){var nxt6=stack2.parent;stack2.parent=obj13,stack2=nxt6}xr1=obj13}if(j1.path1==j1.path1.parent)yr1=j1.path1;else{for(var obj14=j1.path1,stack3=null;obj14!=obj14.parent;){var nxt7=obj14.parent;obj14.parent=stack3,stack3=obj14,obj14=nxt7}for(;null!=stack3;){var nxt8=stack3.parent;stack3.parent=obj14,stack3=nxt8}yr1=obj14}if(xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++)),i1.path1==i1.path1.parent)xr2=i1.path1;else{for(var obj15=i1.path1,stack4=null;obj15!=obj15.parent;){var nxt9=obj15.parent;obj15.parent=stack4,stack4=obj15,obj15=nxt9}for(;null!=stack4;){var nxt10=stack4.parent;stack4.parent=obj15,stack4=nxt10}xr2=obj15}if(j1.path0==j1.path0.parent)yr2=j1.path0;else{for(var obj16=j1.path0,stack5=null;obj16!=obj16.parent;){var nxt11=obj16.parent;obj16.parent=stack5,stack5=obj16,obj16=nxt11}for(;null!=stack5;){var nxt12=stack5.parent;stack5.parent=obj16,stack5=nxt12}yr2=obj16}xr2!=yr2&&(xr2.rank<yr2.rank?xr2.parent=yr2:xr2.rank>yr2.rank?yr2.parent=xr2:(yr2.parent=xr2,xr2.rank++))}var o36=i1;o36.end=o36.start=null,o36.path0=o36.path1=null,o36.next=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=o36;var o37=j1;o37.end=o37.start=null,o37.path0=o37.path1=null,o37.next=zpp_nape.geom.ZPP_CutInt.zpp_pool,zpp_nape.geom.ZPP_CutInt.zpp_pool=o37}for(var ret16=null==output?new nape.geom.GeomPolyList:output,cx_ite=zpp_nape.geom.ZPP_Cutter.paths.head;null!=cx_ite;){var p5=cx_ite.elt,poly;if(p5==p5.parent)poly=p5;else{for(var obj21=p5,stack10=null;obj21!=obj21.parent;){var nxt21=obj21.parent;obj21.parent=stack10,stack10=obj21,obj21=nxt21}for(;null!=stack10;){var nxt22=stack10.parent;stack10.parent=obj21,stack10=nxt22}poly=obj21}if(poly.used)cx_ite=cx_ite.next;else{poly.used=!0;for(var p6=poly.vert,skip=!0;null!=poly.vert&&(skip||p6!=poly.vert);)if(skip=!1,p6.x==p6.next.x&&p6.y==p6.next.y)if(p6==poly.vert&&(poly.vert=p6.next==p6?null:p6.next,skip=!0),null!=p6&&p6.prev==p6)p6.next=p6.prev=null,p6=p6=null;else{var retnodes4=p6.next;p6.prev.next=p6.next,p6.next.prev=p6.prev,p6.next=p6.prev=null,p6=null,p6=retnodes4}else p6=p6.next;if(null!=poly.vert){var gp=nape.geom.GeomPoly.get();gp.zpp_inner.vertices=poly.vert,ret16.zpp_inner.reverse_flag?ret16.push(gp):ret16.unshift(gp)}cx_ite=cx_ite.next}}for(;null!=zpp_nape.geom.ZPP_Cutter.paths.head;){var p7,o38=zpp_nape.geom.ZPP_Cutter.paths.pop_unsafe();o38.vert=null,o38.parent=null,o38.next=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=o38}for(;null!=verts;)if(null!=verts&&verts.prev==verts){verts.next=verts.prev=null;var o39=verts;o39.vert=null,o39.parent=null,o39.next=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=o39,verts=verts=null}else{var retnodes5=verts.next;verts.prev.next=verts.next,verts.next.prev=verts.prev,verts.next=verts.prev=null;var o40=verts;o40.vert=null,o40.parent=null,o40.next=zpp_nape.geom.ZPP_CutVert.zpp_pool,zpp_nape.geom.ZPP_CutVert.zpp_pool=o40,verts=null,verts=retnodes5}return ret16},zpp_nape.geom.ZPP_Cutter.prototype.__class__=zpp_nape.geom.ZPP_Cutter,zpp_nape.geom.ZPP_Geom=$hxClasses["zpp_nape.geom.ZPP_Geom"]=function(){},zpp_nape.geom.ZPP_Geom.__name__=["zpp_nape","geom","ZPP_Geom"],zpp_nape.geom.ZPP_Geom.validateShape=function(s){if(1==s.type){var _this=s.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}if(s.zip_aabb&&null!=s.body)if(s.zip_aabb=!1,0==s.type){var _this3=s.circle;if(_this3.zip_worldCOM&&null!=_this3.body){if(_this3.zip_worldCOM=!1,_this3.zip_localCOM){if(_this3.zip_localCOM=!1,1==_this3.type){var _this4=_this3.polygon;if(null==_this4.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this4.lverts.next.next)_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;else if(null==_this4.lverts.next.next.next){_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;var t=1;_this4.localCOMx+=1*_this4.lverts.next.next.x,_this4.localCOMy+=1*_this4.lverts.next.next.y;var t1=.5;_this4.localCOMx*=.5,_this4.localCOMy*=.5}else{_this4.localCOMx=0,_this4.localCOMy=0;var area=0,cx_ite2=_this4.lverts.next,u1=cx_ite2,v2=cx_ite2=cx_ite2.next;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var w=cx_ite2;area+=v2.x*(w.y-u1.y);var cf=w.y*v2.x-w.x*v2.y;_this4.localCOMx+=(v2.x+w.x)*cf,_this4.localCOMy+=(v2.y+w.y)*cf,u1=v2,v2=w,cx_ite2=cx_ite2.next}var w1=cx_ite2=_this4.lverts.next;area+=v2.x*(w1.y-u1.y);var cf1=w1.y*v2.x-w1.x*v2.y;_this4.localCOMx+=(v2.x+w1.x)*cf1,_this4.localCOMy+=(v2.y+w1.y)*cf1,u1=v2,v2=w1;var w2=cx_ite2=cx_ite2.next;area+=v2.x*(w2.y-u1.y);var cf2=w2.y*v2.x-w2.x*v2.y;_this4.localCOMx+=(v2.x+w2.x)*cf2,_this4.localCOMy+=(v2.y+w2.y)*cf2;var t2=area=1/(3*area);_this4.localCOMx*=t2,_this4.localCOMy*=t2}}null!=_this3.wrap_localCOM&&(_this3.wrap_localCOM.zpp_inner.x=_this3.localCOMx,_this3.wrap_localCOM.zpp_inner.y=_this3.localCOMy)}var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot)),_this3.worldCOMx=_this3.body.posx+(_this3.body.axisy*_this3.localCOMx-_this3.body.axisx*_this3.localCOMy),_this3.worldCOMy=_this3.body.posy+(_this3.localCOMx*_this3.body.axisx+_this3.localCOMy*_this3.body.axisy)}var rx=_this3.radius,ry=_this3.radius;_this3.aabb.minx=_this3.worldCOMx-rx,_this3.aabb.miny=_this3.worldCOMy-ry,_this3.aabb.maxx=_this3.worldCOMx+rx,_this3.aabb.maxy=_this3.worldCOMy+ry}else{var _this6=s.polygon;if(_this6.zip_gverts&&null!=_this6.body){_this6.zip_gverts=!1,_this6.validate_lverts();var _this7=_this6.body;_this7.zip_axis&&(_this7.zip_axis=!1,_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot));for(var li1=_this6.lverts.next,cx_ite3=_this6.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=_this6.body.posx+(_this6.body.axisy*l1.x-_this6.body.axisx*l1.y),g1.y=_this6.body.posy+(l1.x*_this6.body.axisx+l1.y*_this6.body.axisy),cx_ite3=cx_ite3.next}}if(null==_this6.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this6.gverts.next;_this6.aabb.minx=p0.x,_this6.aabb.miny=p0.y,_this6.aabb.maxx=p0.x,_this6.aabb.maxy=p0.y;for(var cx_ite4=_this6.gverts.next.next;null!=cx_ite4;){var p=cx_ite4;p.x<_this6.aabb.minx&&(_this6.aabb.minx=p.x),p.x>_this6.aabb.maxx&&(_this6.aabb.maxx=p.x),p.y<_this6.aabb.miny&&(_this6.aabb.miny=p.y),p.y>_this6.aabb.maxy&&(_this6.aabb.maxy=p.y),cx_ite4=cx_ite4.next}}if(s.zip_worldCOM&&null!=s.body){if(s.zip_worldCOM=!1,s.zip_localCOM){if(s.zip_localCOM=!1,1==s.type){var _this8=s.polygon;if(null==_this8.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this8.lverts.next.next)_this8.localCOMx=_this8.lverts.next.x,_this8.localCOMy=_this8.lverts.next.y;else if(null==_this8.lverts.next.next.next){_this8.localCOMx=_this8.lverts.next.x,_this8.localCOMy=_this8.lverts.next.y;var t3=1;_this8.localCOMx+=1*_this8.lverts.next.next.x,_this8.localCOMy+=1*_this8.lverts.next.next.y;var t4=.5;_this8.localCOMx*=.5,_this8.localCOMy*=.5}else{_this8.localCOMx=0,_this8.localCOMy=0;var area1=0,cx_ite5=_this8.lverts.next,u2=cx_ite5,v3=cx_ite5=cx_ite5.next;for(cx_ite5=cx_ite5.next;null!=cx_ite5;){var w3=cx_ite5;area1+=v3.x*(w3.y-u2.y);var cf3=w3.y*v3.x-w3.x*v3.y;_this8.localCOMx+=(v3.x+w3.x)*cf3,_this8.localCOMy+=(v3.y+w3.y)*cf3,u2=v3,v3=w3,cx_ite5=cx_ite5.next}var w4=cx_ite5=_this8.lverts.next;area1+=v3.x*(w4.y-u2.y);var cf4=w4.y*v3.x-w4.x*v3.y;_this8.localCOMx+=(v3.x+w4.x)*cf4,_this8.localCOMy+=(v3.y+w4.y)*cf4,u2=v3,v3=w4;var w5=cx_ite5=cx_ite5.next;area1+=v3.x*(w5.y-u2.y);var cf5=w5.y*v3.x-w5.x*v3.y;_this8.localCOMx+=(v3.x+w5.x)*cf5,_this8.localCOMy+=(v3.y+w5.y)*cf5;var t5=area1=1/(3*area1);_this8.localCOMx*=t5,_this8.localCOMy*=t5}}null!=s.wrap_localCOM&&(s.wrap_localCOM.zpp_inner.x=s.localCOMx,s.wrap_localCOM.zpp_inner.y=s.localCOMy)}var _this9=s.body;_this9.zip_axis&&(_this9.zip_axis=!1,_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot)),s.worldCOMx=s.body.posx+(s.body.axisy*s.localCOMx-s.body.axisx*s.localCOMy),s.worldCOMy=s.body.posy+(s.localCOMx*s.body.axisx+s.localCOMy*s.body.axisy)}},zpp_nape.geom.ZPP_Geom.prototype.__class__=zpp_nape.geom.ZPP_Geom,zpp_nape.geom.ZPP_GeomVert=$hxClasses["zpp_nape.geom.ZPP_GeomVert"]=function(){this.forced=!1,this.wrap=null,this.next=null,this.prev=null,this.y=0,this.x=0},zpp_nape.geom.ZPP_GeomVert.__name__=["zpp_nape","geom","ZPP_GeomVert"],zpp_nape.geom.ZPP_GeomVert.get=function(x,y){var ret;return null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret=new zpp_nape.geom.ZPP_GeomVert:(ret=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.forced=!1,ret.x=x,ret.y=y,ret},zpp_nape.geom.ZPP_GeomVert.prototype.x=null,zpp_nape.geom.ZPP_GeomVert.prototype.y=null,zpp_nape.geom.ZPP_GeomVert.prototype.prev=null,zpp_nape.geom.ZPP_GeomVert.prototype.next=null,zpp_nape.geom.ZPP_GeomVert.prototype.wrap=null,zpp_nape.geom.ZPP_GeomVert.prototype.forced=null,zpp_nape.geom.ZPP_GeomVert.prototype.free=function(){if(null!=this.wrap){this.wrap.zpp_inner._inuse=!1;var _this=this.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o=_this;o.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o:zpp_nape.util.ZPP_PubPool.poolVec2=o,zpp_nape.util.ZPP_PubPool.nextVec2=o,o.zpp_disp=!0;var o1=inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,this.wrap=null}this.prev=this.next=null},zpp_nape.geom.ZPP_GeomVert.prototype.alloc=function(){this.forced=!1},zpp_nape.geom.ZPP_GeomVert.prototype.wrapper=function(){if(null==this.wrap){var x=this.x,y=this.y,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap=ret,this.wrap.zpp_inner._inuse=!0,this.wrap.zpp_inner._invalidate=$bind(this,this.modwrap),this.wrap.zpp_inner._validate=$bind(this,this.getwrap)}return this.wrap},zpp_nape.geom.ZPP_GeomVert.prototype.modwrap=function(n){this.x=n.x,this.y=n.y},zpp_nape.geom.ZPP_GeomVert.prototype.getwrap=function(){this.wrap.zpp_inner.x=this.x,this.wrap.zpp_inner.y=this.y},zpp_nape.geom.ZPP_GeomVert.prototype.__class__=zpp_nape.geom.ZPP_GeomVert,zpp_nape.geom.ZPP_GeomPoly=$hxClasses["zpp_nape.geom.ZPP_GeomPoly"]=function(outer){this.vertices=null,this.outer=null,this.outer=outer},zpp_nape.geom.ZPP_GeomPoly.__name__=["zpp_nape","geom","ZPP_GeomPoly"],zpp_nape.geom.ZPP_GeomPoly.prototype.outer=null,zpp_nape.geom.ZPP_GeomPoly.prototype.vertices=null,zpp_nape.geom.ZPP_GeomPoly.prototype.__class__=zpp_nape.geom.ZPP_GeomPoly,zpp_nape.geom.ZPP_GeomVertexIterator=$hxClasses["zpp_nape.geom.ZPP_GeomVertexIterator"]=function(){this.next=null,this.outer=null,this.forward=!1,this.first=!1,this.start=null,this.ptr=null,zpp_nape.geom.ZPP_GeomVertexIterator.internal=!0,this.outer=new nape.geom.GeomVertexIterator,zpp_nape.geom.ZPP_GeomVertexIterator.internal=!1},zpp_nape.geom.ZPP_GeomVertexIterator.__name__=["zpp_nape","geom","ZPP_GeomVertexIterator"],zpp_nape.geom.ZPP_GeomVertexIterator.get=function(poly,forward){var ret;return null==zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool?ret=new zpp_nape.geom.ZPP_GeomVertexIterator:(ret=zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool,zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool=ret.next,ret.next=null),ret.outer.zpp_inner=ret,ret.ptr=poly,ret.forward=forward,ret.start=poly,ret.first=null!=poly,ret.outer},zpp_nape.geom.ZPP_GeomVertexIterator.prototype.ptr=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.start=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.first=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.forward=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.outer=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.next=null,zpp_nape.geom.ZPP_GeomVertexIterator.prototype.free=function(){this.outer.zpp_inner=null,this.ptr=this.start=null},zpp_nape.geom.ZPP_GeomVertexIterator.prototype.alloc=function(){},zpp_nape.geom.ZPP_GeomVertexIterator.prototype.__class__=zpp_nape.geom.ZPP_GeomVertexIterator,zpp_nape.geom.ZPP_MarchSpan=$hxClasses["zpp_nape.geom.ZPP_MarchSpan"]=function(){this.next=null,this.out=!1,this.rank=0,this.parent=null,this.parent=this},zpp_nape.geom.ZPP_MarchSpan.__name__=["zpp_nape","geom","ZPP_MarchSpan"],zpp_nape.geom.ZPP_MarchSpan.prototype.parent=null,zpp_nape.geom.ZPP_MarchSpan.prototype.rank=null,zpp_nape.geom.ZPP_MarchSpan.prototype.out=null,zpp_nape.geom.ZPP_MarchSpan.prototype.next=null,zpp_nape.geom.ZPP_MarchSpan.prototype.free=function(){this.parent=this},zpp_nape.geom.ZPP_MarchSpan.prototype.alloc=function(){this.out=!1,this.rank=0},zpp_nape.geom.ZPP_MarchSpan.prototype.__class__=zpp_nape.geom.ZPP_MarchSpan,zpp_nape.geom.ZPP_MarchPair=$hxClasses["zpp_nape.geom.ZPP_MarchPair"]=function(){this.next=null,this.spanr=null,this.span2=null,this.span1=null,this.pd=null,this.okeyr=0,this.keyr=0,this.pr=null,this.okey2=0,this.key2=0,this.p2=null,this.okey1=0,this.key1=0,this.p1=null},zpp_nape.geom.ZPP_MarchPair.__name__=["zpp_nape","geom","ZPP_MarchPair"],zpp_nape.geom.ZPP_MarchPair.prototype.p1=null,zpp_nape.geom.ZPP_MarchPair.prototype.key1=null,zpp_nape.geom.ZPP_MarchPair.prototype.okey1=null,zpp_nape.geom.ZPP_MarchPair.prototype.p2=null,zpp_nape.geom.ZPP_MarchPair.prototype.key2=null,zpp_nape.geom.ZPP_MarchPair.prototype.okey2=null,zpp_nape.geom.ZPP_MarchPair.prototype.pr=null,zpp_nape.geom.ZPP_MarchPair.prototype.keyr=null,zpp_nape.geom.ZPP_MarchPair.prototype.okeyr=null,zpp_nape.geom.ZPP_MarchPair.prototype.pd=null,zpp_nape.geom.ZPP_MarchPair.prototype.span1=null,zpp_nape.geom.ZPP_MarchPair.prototype.span2=null,zpp_nape.geom.ZPP_MarchPair.prototype.spanr=null,zpp_nape.geom.ZPP_MarchPair.prototype.next=null,zpp_nape.geom.ZPP_MarchPair.prototype.free=function(){this.p1=this.p2=this.pr=this.pd=null,this.span1=this.span2=this.spanr=null},zpp_nape.geom.ZPP_MarchPair.prototype.alloc=function(){},zpp_nape.geom.ZPP_MarchPair.prototype.__class__=zpp_nape.geom.ZPP_MarchPair,zpp_nape.geom.ZPP_MarchingSquares=$hxClasses["zpp_nape.geom.ZPP_MarchingSquares"]=function(){},zpp_nape.geom.ZPP_MarchingSquares.__name__=["zpp_nape","geom","ZPP_MarchingSquares"],zpp_nape.geom.ZPP_MarchingSquares.isos=null,zpp_nape.geom.ZPP_MarchingSquares.ints=null,zpp_nape.geom.ZPP_MarchingSquares.map=null,zpp_nape.geom.ZPP_MarchingSquares.run=function(iso,bx0,by0,bx1,by1,cell,quality,combine,ret){if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=cell.zpp_inner;null!=_this._validate&&_this._validate();var xp=(bx1-bx0)/cell.zpp_inner.x,xn=0|xp;if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=cell.zpp_inner;null!=_this1._validate&&_this1._validate();var yp=(by1-by0)/cell.zpp_inner.y,yn=0|yp;xp!=xn&&++xn,yp!=yn&&++yn,combine&&(null==zpp_nape.geom.ZPP_MarchingSquares.map?zpp_nape.geom.ZPP_MarchingSquares.map=new zpp_nape.util.ZNPArray2_ZPP_MarchPair(xn,yn):zpp_nape.geom.ZPP_MarchingSquares.map.resize(xn,yn,null)),null==zpp_nape.geom.ZPP_MarchingSquares.isos?zpp_nape.geom.ZPP_MarchingSquares.isos=new zpp_nape.util.ZNPArray2_Float(xn+1,yn+1):zpp_nape.geom.ZPP_MarchingSquares.isos.resize(xn+1,yn+1,0);for(var _g=0,_g1=yn+1;_g<_g1;){var y=_g++,yc;if(0==y)yc=by0;else if(y<=yn){if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=cell.zpp_inner;null!=_this2._validate&&_this2._validate(),yc=by0+cell.zpp_inner.y*y}else yc=by1;for(var _g2=0,_g11=xn+1;_g2<_g11;){var x=_g2++,xc;if(0==x)xc=bx0;else if(x<=xn){if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=cell.zpp_inner;null!=_this3._validate&&_this3._validate(),xc=bx0+cell.zpp_inner.x*x}else xc=bx1;var _this4=zpp_nape.geom.ZPP_MarchingSquares.isos,obj=iso(xc,yc);_this4.list[y*_this4.width+x]=obj}}null==zpp_nape.geom.ZPP_MarchingSquares.ints?zpp_nape.geom.ZPP_MarchingSquares.ints=new zpp_nape.util.ZNPArray2_ZPP_GeomVert(xn+1,1+(yn<<1)):zpp_nape.geom.ZPP_MarchingSquares.ints.resize(xn+1,1+(yn<<1),null);var spans=null;combine&&(null==zpp_nape.geom.ZPP_MarchSpan.zpp_pool?spans=new zpp_nape.geom.ZPP_MarchSpan:(spans=zpp_nape.geom.ZPP_MarchSpan.zpp_pool,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=spans.next,spans.next=null),spans.out=!1,spans.rank=0);for(var py=by0,_g21=0,_g3=yn;_g21<_g3;){var y1=_g21++,y0=py,y11;if(y1==yn-1)y11=by1;else{if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=cell.zpp_inner;null!=_this5._validate&&_this5._validate(),y11=by0+cell.zpp_inner.y*(y1+1)}py=y11;for(var px=bx0,pre=null,_g22=0,_g31=xn;_g22<_g31;){var x1=_g22++,x0=px,x11;if(x1==xn-1)x11=bx1;else{if(null!=cell&&cell.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=cell.zpp_inner;null!=_this6._validate&&_this6._validate(),x11=bx0+cell.zpp_inner.x*(x1+1)}px=x11;var fstx=0==x1||!combine,fsty=0==y1||!combine,sndx=x1==xn-1||!combine,sndy=y1==yn-1||!combine,pp=zpp_nape.geom.ZPP_MarchingSquares.me.marchSquare(iso,zpp_nape.geom.ZPP_MarchingSquares.isos,zpp_nape.geom.ZPP_MarchingSquares.ints,x0,y0,x11,y11,x1,y1,fstx,fsty,sndx,sndy,quality);if(null!=pp)if(combine){var pd=null!=pp.p2&&14!=pp.okey2?pp.p2:pp.p1;pp.pd=0==(128&(pd==pp.p2?pp.okey2:pp.okey1))?pd.prev:pd.prev.prev;var _this7=zpp_nape.geom.ZPP_MarchingSquares.map,tmp;if(_this7.list[y1*_this7.width+x1]=pp,null!=pre){var _this8=zpp_nape.geom.ZPP_MarchingSquares.me,key=pp.key1,flag=1&key|(192&key)>>5,cnt=0;0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,tmp=cnt>=2}else tmp=!1;if(tmp)zpp_nape.geom.ZPP_MarchingSquares.me.combLR(pre,pp),pp.span1=pre.spanr;else{null==zpp_nape.geom.ZPP_MarchSpan.zpp_pool?pp.span1=new zpp_nape.geom.ZPP_MarchSpan:(pp.span1=zpp_nape.geom.ZPP_MarchSpan.zpp_pool,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=pp.span1.next,pp.span1.next=null);var _this9=pp.span1;_this9.out=!1,_this9.rank=0,pp.span1.next=spans,spans=pp.span1}if(null!=pp.p2){null==zpp_nape.geom.ZPP_MarchSpan.zpp_pool?pp.span2=new zpp_nape.geom.ZPP_MarchSpan:(pp.span2=zpp_nape.geom.ZPP_MarchSpan.zpp_pool,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=pp.span2.next,pp.span2.next=null);var _this10=pp.span2;_this10.out=!1,_this10.rank=0,pp.span2.next=spans,spans=pp.span2,pp.spanr=pp.span2}else pp.spanr=pp.span1;var _this11=zpp_nape.geom.ZPP_MarchingSquares.me,flag1=(28&pp.keyr)>>2,cnt1=0;0!=(1&flag1)&&++cnt1,0!=(2&flag1)&&++cnt1,0!=(4&flag1)&&++cnt1,pre=cnt1>=2?pp:null}else{zpp_nape.geom.ZPP_MarchingSquares.me.output(ret,pp.p1),null!=pp.p2&&zpp_nape.geom.ZPP_MarchingSquares.me.output(ret,pp.p2);var o=pp;o.p1=o.p2=o.pr=o.pd=null,o.span1=o.span2=o.spanr=null,o.next=zpp_nape.geom.ZPP_MarchPair.zpp_pool,zpp_nape.geom.ZPP_MarchPair.zpp_pool=o}else pre=null}}if(combine){for(var _g4=1,_g5=yn;_g4<_g5;)for(var y2=_g4++,pre1=null,_g41=0,_g51=xn;_g41<_g51;){var x2=_g41++,_this12=zpp_nape.geom.ZPP_MarchingSquares.map,b=_this12.list[y2*_this12.width+x2];if(null!=b){var bkey=null!=b.p2&&14==b.okey2?b.okey2:b.okey1,_this13=zpp_nape.geom.ZPP_MarchingSquares.me,flag2=7&bkey,cnt2=0;if(0!=(1&flag2)&&++cnt2,0!=(2&flag2)&&++cnt2,0!=(4&flag2)&&++cnt2,cnt2<2)pre1=null;else{var _this14=zpp_nape.geom.ZPP_MarchingSquares.map,a=_this14.list[(y2-1)*_this14.width+x2];if(null!=a){var akey=null!=a.p2&&56==a.okey2?a.okey2:a.okey1,_this15=zpp_nape.geom.ZPP_MarchingSquares.me,flag3=(112&akey)>>4,cnt3=0;if(0!=(1&flag3)&&++cnt3,0!=(2&flag3)&&++cnt3,0!=(4&flag3)&&++cnt3,cnt3<2)pre1=null;else{var ad=null!=a.p2&&56==a.okey2?a.span2:a.span1,bu=null!=b.p2&&14==b.okey2?b.span2:b.span1,tmp1,tmp2,key1;if(ad==ad.parent)tmp1=ad;else{for(var obj1=ad,stack=null;obj1!=obj1.parent;){var nxt=obj1.parent;obj1.parent=stack,stack=obj1,obj1=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj1,stack=nxt1}tmp1=obj1}if(bu==bu.parent)tmp2=bu;else{for(var obj2=bu,stack1=null;obj2!=obj2.parent;){var nxt2=obj2.parent;obj2.parent=stack1,stack1=obj2,obj2=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj2,stack1=nxt3}tmp2=obj2}if(tmp1==tmp2)pre1!=bu&&zpp_nape.geom.ZPP_MarchingSquares.me.combUD_virtual(a,b);else{var xr,yr;if(ad==ad.parent)xr=ad;else{for(var obj3=ad,stack2=null;obj3!=obj3.parent;){var nxt4=obj3.parent;obj3.parent=stack2,stack2=obj3,obj3=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj3,stack2=nxt5}xr=obj3}if(bu==bu.parent)yr=bu;else{for(var obj4=bu,stack3=null;obj4!=obj4.parent;){var nxt6=obj4.parent;obj4.parent=stack3,stack3=obj4,obj4=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj4,stack3=nxt7}yr=obj4}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++)),zpp_nape.geom.ZPP_MarchingSquares.me.combUD(a,b)}pre1=0!=(4&(bu==b.span2?b.okey2:b.okey1))?bu:null}}else pre1=null}}else pre1=null}for(var _g6=0,_g7=yn;_g6<_g7;)for(var y3=_g6++,_g61=0,_g71=xn;_g61<_g71;){var x3=_g61++,_this16=zpp_nape.geom.ZPP_MarchingSquares.map,p=_this16.list[y3*_this16.width+x3];if(null!=p){var root;if(p.span1==p.span1.parent)root=p.span1;else{for(var obj5=p.span1,stack4=null;obj5!=obj5.parent;){var nxt8=obj5.parent;obj5.parent=stack4,stack4=obj5,obj5=nxt8}for(;null!=stack4;){var nxt9=stack4.parent;stack4.parent=obj5,stack4=nxt9}root=obj5}if(root.out||(root.out=!0,zpp_nape.geom.ZPP_MarchingSquares.me.output(ret,p.p1)),null!=p.p2){if(p.span2==p.span2.parent)root=p.span2;else{for(var obj6=p.span2,stack5=null;obj6!=obj6.parent;){var nxt10=obj6.parent;obj6.parent=stack5,stack5=obj6,obj6=nxt10}for(;null!=stack5;){var nxt11=stack5.parent;stack5.parent=obj6,stack5=nxt11}root=obj6}root.out||(root.out=!0,zpp_nape.geom.ZPP_MarchingSquares.me.output(ret,p.p2))}var o1=p;o1.p1=o1.p2=o1.pr=o1.pd=null,o1.span1=o1.span2=o1.spanr=null,o1.next=zpp_nape.geom.ZPP_MarchPair.zpp_pool,zpp_nape.geom.ZPP_MarchPair.zpp_pool=o1;var _this17=zpp_nape.geom.ZPP_MarchingSquares.map;_this17.list[y3*_this17.width+x3]=null}}for(;null!=spans;){var t=spans;spans=t.next;var o2=t;o2.parent=o2,o2.next=zpp_nape.geom.ZPP_MarchSpan.zpp_pool,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=o2}}},zpp_nape.geom.ZPP_MarchingSquares.ISO=function(iso,x,y){return iso(x,y)},zpp_nape.geom.ZPP_MarchingSquares.prototype.output=function(ret,poly){var tmp;if(null==poly||poly.next==poly||poly.next==poly.prev)tmp=!0;else{var area=0,F=poly,L=poly;if(null!=poly)for(var nite=poly;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}var a=.5*area;tmp=a*a<nape.Config.epsilon*nape.Config.epsilon}if(tmp)for(;null!=poly;)if(null!=poly&&poly.prev==poly)poly.next=poly.prev=null,poly=poly=null;else{var retnodes=poly.next;poly.prev.next=poly.next,poly.next.prev=poly.prev,poly.next=poly.prev=null,poly=null,poly=retnodes}else{var gp=nape.geom.GeomPoly.get();gp.zpp_inner.vertices=poly,ret.zpp_inner.reverse_flag?ret.push(gp):ret.unshift(gp)}},zpp_nape.geom.ZPP_MarchingSquares.prototype.linkright=function(poly,key){var kind=7&key;return 0==kind?poly:3==kind?poly.next.next:poly.next},zpp_nape.geom.ZPP_MarchingSquares.prototype.linkleft=function(poly,key){return 0==(1&key)?poly.prev:poly},zpp_nape.geom.ZPP_MarchingSquares.prototype.linkdown=function(poly,key){return 0==(128&key)?poly.prev:poly.prev.prev},zpp_nape.geom.ZPP_MarchingSquares.prototype.linkup=function(poly,key){return poly},zpp_nape.geom.ZPP_MarchingSquares.prototype.combLR=function(a,b){var poly=a.pr,kind=7&a.okeyr,ap=0==kind?poly:3==kind?poly.next.next:poly.next,poly1=b.p1,bp=0==(1&b.okey1)?poly1.prev:poly1,ap2=ap.next,bp2=bp.prev;if(0!=(4&a.keyr)){b.pr==b.p1&&(b.pr=ap.prev),b.p1=ap.prev,ap.prev.next=bp.next,bp.next.prev=ap.prev;var o=ap;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o}else ap.next=bp.next,bp.next.prev=ap;var o3=bp;if(null!=o3.wrap){o3.wrap.zpp_inner._inuse=!1;var _this2=o3.wrap;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),_this2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=_this2.zpp_inner;_this2.zpp_inner.outer=null,_this2.zpp_inner=null;var o4=_this2;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner1;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5,o3.wrap=null}if(o3.prev=o3.next=null,o3.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o3,0!=(16&a.keyr)){b.pd=ap2.next,ap2.next.prev=bp2.prev,bp2.prev.next=ap2.next;var o6=ap2;if(null!=o6.wrap){o6.wrap.zpp_inner._inuse=!1;var _this4=o6.wrap;if(null!=_this4&&_this4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=_this4.zpp_inner;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),_this4.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner2=_this4.zpp_inner;_this4.zpp_inner.outer=null,_this4.zpp_inner=null;var o7=_this4;o7.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o7:zpp_nape.util.ZPP_PubPool.poolVec2=o7,zpp_nape.util.ZPP_PubPool.nextVec2=o7,o7.zpp_disp=!0;var o8=inner2;null!=o8.outer&&(o8.outer.zpp_inner=null,o8.outer=null),o8._isimmutable=null,o8._validate=null,o8._invalidate=null,o8.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o8,o6.wrap=null}o6.prev=o6.next=null,o6.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o6}else ap2.prev=bp2.prev,bp2.prev.next=ap2;var o9=bp2;if(null!=o9.wrap){o9.wrap.zpp_inner._inuse=!1;var _this6=o9.wrap;if(null!=_this6&&_this6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=_this6.zpp_inner;if(_this7._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this7._isimmutable&&_this7._isimmutable(),_this6.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner3=_this6.zpp_inner;_this6.zpp_inner.outer=null,_this6.zpp_inner=null;var o10=_this6;o10.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o10:zpp_nape.util.ZPP_PubPool.poolVec2=o10,zpp_nape.util.ZPP_PubPool.nextVec2=o10,o10.zpp_disp=!0;var o11=inner3;null!=o11.outer&&(o11.outer.zpp_inner=null,o11.outer=null),o11._isimmutable=null,o11._validate=null,o11._invalidate=null,o11.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o11,o9.wrap=null}o9.prev=o9.next=null,o9.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o9},zpp_nape.geom.ZPP_MarchingSquares.prototype.combUD=function(a,b){var ad=null!=a.p2&&56==a.key2?a.p2:a.p1,bu=null!=b.p2&&14==b.key2?b.p2:b.p1,ap=a.pd,bp=bu,ap2=ap.prev,bp2=bp.next;bp.next=ap.next,ap.next.prev=bp;var o=ap;if(null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var _this=o.wrap;if(null!=_this&&_this.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=_this.zpp_inner;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),_this.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner=_this.zpp_inner;_this.zpp_inner.outer=null,_this.zpp_inner=null;var o1=_this;o1.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o1:zpp_nape.util.ZPP_PubPool.poolVec2=o1,zpp_nape.util.ZPP_PubPool.nextVec2=o1,o1.zpp_disp=!0;var o2=inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,o.wrap=null}o.prev=o.next=null,o.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o,bp2.prev=ap2.prev,ap2.prev.next=bp2,ap2==a.p1&&(a.p1=bp2);var o3=ap2;if(null!=o3.wrap){o3.wrap.zpp_inner._inuse=!1;var _this2=o3.wrap;if(null!=_this2&&_this2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=_this2.zpp_inner;if(_this3._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this3._isimmutable&&_this3._isimmutable(),_this2.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: This Vec2 is not disposable");var inner1=_this2.zpp_inner;_this2.zpp_inner.outer=null,_this2.zpp_inner=null;var o4=_this2;o4.zpp_pool=null,null!=zpp_nape.util.ZPP_PubPool.nextVec2?zpp_nape.util.ZPP_PubPool.nextVec2.zpp_pool=o4:zpp_nape.util.ZPP_PubPool.poolVec2=o4,zpp_nape.util.ZPP_PubPool.nextVec2=o4,o4.zpp_disp=!0;var o5=inner1;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5._isimmutable=null,o5._validate=null,o5._invalidate=null,o5.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o5,o3.wrap=null}o3.prev=o3.next=null,o3.next=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=o3},zpp_nape.geom.ZPP_MarchingSquares.prototype.combUD_virtual=function(a,b){var ad=null!=a.p2&&56==a.key2?a.p2:a.p1,bu=null!=b.p2&&14==b.key2?b.p2:b.p1,ap=a.pd,bp=bu,ap2=ap.prev,bp2=bp.next;ap.forced=bp.forced=ap2.forced=bp2.forced=!0},zpp_nape.geom.ZPP_MarchingSquares.prototype.combLeft=function(key){var flag=1&key|(192&key)>>5,cnt=0;return 0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,cnt>=2},zpp_nape.geom.ZPP_MarchingSquares.prototype.combRight=function(key){var flag=(28&key)>>2,cnt=0;return 0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,cnt>=2},zpp_nape.geom.ZPP_MarchingSquares.prototype.combUp=function(key){var flag=7&key,cnt=0;return 0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,cnt>=2},zpp_nape.geom.ZPP_MarchingSquares.prototype.combDown=function(key){var flag=(112&key)>>4,cnt=0;return 0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,cnt>=2},zpp_nape.geom.ZPP_MarchingSquares.prototype.comb=function(flag){var cnt=0;return 0!=(1&flag)&&++cnt,0!=(2&flag)&&++cnt,0!=(4&flag)&&++cnt,cnt>=2},zpp_nape.geom.ZPP_MarchingSquares.prototype.marchSquare=function(iso,isos,ints,x0,y0,x1,y1,xn,yn,fstx,fsty,sndx,sndy,quality){var key=0,v0=isos.list[yn*isos.width+xn];v0<0&&(key|=8);var v1=isos.list[yn*isos.width+(xn+1)];v1<0&&(key|=4);var v2=isos.list[(yn+1)*isos.width+(xn+1)];v2<0&&(key|=2);var v3=isos.list[(yn+1)*isos.width+xn],ret;if(v3<0&&(key|=1),0==key)return null;if(null==zpp_nape.geom.ZPP_MarchPair.zpp_pool?ret=new zpp_nape.geom.ZPP_MarchPair:(ret=zpp_nape.geom.ZPP_MarchPair.zpp_pool,zpp_nape.geom.ZPP_MarchPair.zpp_pool=ret.next,ret.next=null),10!=key&&5!=key){var val=zpp_nape.geom.ZPP_MarchingSquares.look_march[key];ret.okey1=val;for(var _g=0;_g<8;){var i=_g++;if(0!=(val&1<<i)){var p=null,ret1;if(0==i)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x0,ret1.y=y0,p=ret1,(fstx||fsty)&&(p.forced=!0);else if(2==i){var ret2;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret2=new zpp_nape.geom.ZPP_GeomVert:(ret2=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret2.next,ret2.next=null),ret2.forced=!1,ret2.x=x1,ret2.y=y0,p=ret2,(sndx||fsty)&&(p.forced=!0)}else if(4==i){var ret3;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret3=new zpp_nape.geom.ZPP_GeomVert:(ret3=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret3.next,ret3.next=null),ret3.forced=!1,ret3.x=x1,ret3.y=y1,p=ret3,(sndx||sndy)&&(p.forced=!0)}else if(6==i){var ret4;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret4=new zpp_nape.geom.ZPP_GeomVert:(ret4=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret4.next,ret4.next=null),ret4.forced=!1,ret4.x=x0,ret4.y=y1,p=ret4,(fstx||sndy)&&(p.forced=!0)}else if(1==i){if(null==(p=ints.list[(yn<<1)*ints.width+xn])){var x=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret5;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret5=new zpp_nape.geom.ZPP_GeomVert:(ret5=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret5.next,ret5.next=null),ret5.forced=!1,ret5.x=x,ret5.y=y0,p=ret5,ints.list[(yn<<1)*ints.width+xn]=p}else{var x2=p.x,y=p.y,ret6;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret6=new zpp_nape.geom.ZPP_GeomVert:(ret6=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret6.next,ret6.next=null),ret6.forced=!1,ret6.x=x2,ret6.y=y,p=ret6}fsty&&(p.forced=!0),p.x!=x0&&p.x!=x1||(p.x==x0&&0!=(1&val)||p.x==x1&&0!=(4&val))&&(val^=2)}else if(5==i){if(null==(p=ints.list[(2+(yn<<1))*ints.width+xn])){var x3=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret7;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret7=new zpp_nape.geom.ZPP_GeomVert:(ret7=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret7.next,ret7.next=null),ret7.forced=!1,ret7.x=x3,ret7.y=y1,p=ret7,ints.list[(2+(yn<<1))*ints.width+xn]=p}else{var x4=p.x,y2=p.y,ret8;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret8=new zpp_nape.geom.ZPP_GeomVert:(ret8=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret8.next,ret8.next=null),ret8.forced=!1,ret8.x=x4,ret8.y=y2,p=ret8}sndy&&(p.forced=!0),p.x!=x0&&p.x!=x1||(p.x==x0&&0!=(64&val)||p.x==x1&&0!=(16&val))&&(val^=32)}else if(3==i){if(null==(p=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y3=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret9;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret9=new zpp_nape.geom.ZPP_GeomVert:(ret9=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret9.next,ret9.next=null),ret9.forced=!1,ret9.x=x1,ret9.y=y3,p=ret9,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p}else{var x5=p.x,y4=p.y,ret10;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret10=new zpp_nape.geom.ZPP_GeomVert:(ret10=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret10.next,ret10.next=null),ret10.forced=!1,ret10.x=x5,ret10.y=y4,p=ret10}sndx&&(p.forced=!0),p.y!=y0&&p.y!=y1||(p.y==y0&&0!=(4&val)||p.y==y1&&0!=(16&val))&&(val^=8)}else{if(null==(p=ints.list[(1+(yn<<1))*ints.width+xn])){var y5=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret11;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret11=new zpp_nape.geom.ZPP_GeomVert:(ret11=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret11.next,ret11.next=null),ret11.forced=!1,ret11.x=x0,ret11.y=y5,p=ret11,ints.list[(1+(yn<<1))*ints.width+xn]=p}else{var x6=p.x,y6=p.y,ret12;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret12=new zpp_nape.geom.ZPP_GeomVert:(ret12=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret12.next,ret12.next=null),ret12.forced=!1,ret12.x=x6,ret12.y=y6,p=ret12}fstx&&(p.forced=!0),p.y!=y0&&p.y!=y1||(p.y==y0&&0!=(1&val)||p.y==y1&&0!=(64&val))&&(val^=128)}var obj=p;null==ret.p1?ret.p1=obj.prev=obj.next=obj:(obj.prev=ret.p1,obj.next=ret.p1.next,ret.p1.next.prev=obj,ret.p1.next=obj),ret.p1=obj}}ret.p1=ret.p1.next,ret.key1=val,1!=val&&4!=val&&16!=val&&64!=val&&3!=val&&12!=val&&48!=val&&192!=val&&129!=val&&6!=val&&24!=val&&96!=val&&5!=val&&20!=val&&80!=val&&65!=val&&17!=val&&68!=val||(val=0,ret.key1=0,ret.p1=null),0==val?ret=null:(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1)}else{var mid=iso(.5*(x0+x1),.5*(y0+y1))<0;if(10==key)if(mid){var val1=187;ret.okey1=val1;for(var _g1=0;_g1<8;){var i1=_g1++;if(0!=(val1&1<<i1)){var p1=null,ret13;if(0==i1)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret13=new zpp_nape.geom.ZPP_GeomVert:(ret13=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret13.next,ret13.next=null),ret13.forced=!1,ret13.x=x0,ret13.y=y0,p1=ret13,(fstx||fsty)&&(p1.forced=!0);else if(2==i1){var ret14;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret14=new zpp_nape.geom.ZPP_GeomVert:(ret14=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret14.next,ret14.next=null),ret14.forced=!1,ret14.x=x1,ret14.y=y0,p1=ret14,(sndx||fsty)&&(p1.forced=!0)}else if(4==i1){var ret15;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret15=new zpp_nape.geom.ZPP_GeomVert:(ret15=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret15.next,ret15.next=null),ret15.forced=!1,ret15.x=x1,ret15.y=y1,p1=ret15,(sndx||sndy)&&(p1.forced=!0)}else if(6==i1){var ret16;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret16=new zpp_nape.geom.ZPP_GeomVert:(ret16=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret16.next,ret16.next=null),ret16.forced=!1,ret16.x=x0,ret16.y=y1,p1=ret16,(fstx||sndy)&&(p1.forced=!0)}else if(1==i1){if(null==(p1=ints.list[(yn<<1)*ints.width+xn])){var x7=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret17;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret17=new zpp_nape.geom.ZPP_GeomVert:(ret17=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret17.next,ret17.next=null),ret17.forced=!1,ret17.x=x7,ret17.y=y0,p1=ret17,ints.list[(yn<<1)*ints.width+xn]=p1}else{var x8=p1.x,y7=p1.y,ret18;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret18=new zpp_nape.geom.ZPP_GeomVert:(ret18=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret18.next,ret18.next=null),ret18.forced=!1,ret18.x=x8,ret18.y=y7,p1=ret18}fsty&&(p1.forced=!0),p1.x!=x0&&p1.x!=x1||(p1.x==x0&&0!=(1&val1)||p1.x==x1&&0!=(4&val1))&&(val1^=2)}else if(5==i1){if(null==(p1=ints.list[(2+(yn<<1))*ints.width+xn])){var x9=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret19;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret19=new zpp_nape.geom.ZPP_GeomVert:(ret19=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret19.next,ret19.next=null),ret19.forced=!1,ret19.x=x9,ret19.y=y1,p1=ret19,ints.list[(2+(yn<<1))*ints.width+xn]=p1}else{var x10=p1.x,y8=p1.y,ret20;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret20=new zpp_nape.geom.ZPP_GeomVert:(ret20=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret20.next,ret20.next=null),ret20.forced=!1,ret20.x=x10,ret20.y=y8,p1=ret20}sndy&&(p1.forced=!0),p1.x!=x0&&p1.x!=x1||(p1.x==x0&&0!=(64&val1)||p1.x==x1&&0!=(16&val1))&&(val1^=32)}else if(3==i1){if(null==(p1=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y9=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret21;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret21=new zpp_nape.geom.ZPP_GeomVert:(ret21=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret21.next,ret21.next=null),ret21.forced=!1,ret21.x=x1,ret21.y=y9,p1=ret21,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p1}else{var x11=p1.x,y10=p1.y,ret22;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret22=new zpp_nape.geom.ZPP_GeomVert:(ret22=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret22.next,ret22.next=null),ret22.forced=!1,ret22.x=x11,ret22.y=y10,p1=ret22}sndx&&(p1.forced=!0),p1.y!=y0&&p1.y!=y1||(p1.y==y0&&0!=(4&val1)||p1.y==y1&&0!=(16&val1))&&(val1^=8)}else{if(null==(p1=ints.list[(1+(yn<<1))*ints.width+xn])){var y11=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret23;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret23=new zpp_nape.geom.ZPP_GeomVert:(ret23=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret23.next,ret23.next=null),ret23.forced=!1,ret23.x=x0,ret23.y=y11,p1=ret23,ints.list[(1+(yn<<1))*ints.width+xn]=p1}else{var x12=p1.x,y12=p1.y,ret24;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret24=new zpp_nape.geom.ZPP_GeomVert:(ret24=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret24.next,ret24.next=null),ret24.forced=!1,ret24.x=x12,ret24.y=y12,p1=ret24}fstx&&(p1.forced=!0),p1.y!=y0&&p1.y!=y1||(p1.y==y0&&0!=(1&val1)||p1.y==y1&&0!=(64&val1))&&(val1^=128)}var obj1=p1;null==ret.p1?ret.p1=obj1.prev=obj1.next=obj1:(obj1.prev=ret.p1,obj1.next=ret.p1.next,ret.p1.next.prev=obj1,ret.p1.next=obj1),ret.p1=obj1}}ret.p1=ret.p1.next,ret.key1=val1,1!=val1&&4!=val1&&16!=val1&&64!=val1&&3!=val1&&12!=val1&&48!=val1&&192!=val1&&129!=val1&&6!=val1&&24!=val1&&96!=val1&&5!=val1&&20!=val1&&80!=val1&&65!=val1&&17!=val1&&68!=val1||(val1=0,ret.key1=0,ret.p1=null),0==val1?ret=null:(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1)}else{var val2=131;ret.okey1=val2;for(var _g2=0;_g2<8;){var i2=_g2++;if(0!=(val2&1<<i2)){var p2=null,ret25;if(0==i2)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret25=new zpp_nape.geom.ZPP_GeomVert:(ret25=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret25.next,ret25.next=null),ret25.forced=!1,ret25.x=x0,ret25.y=y0,p2=ret25,(fstx||fsty)&&(p2.forced=!0);else if(2==i2){var ret26;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret26=new zpp_nape.geom.ZPP_GeomVert:(ret26=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret26.next,ret26.next=null),ret26.forced=!1,ret26.x=x1,ret26.y=y0,p2=ret26,(sndx||fsty)&&(p2.forced=!0)}else if(4==i2){var ret27;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret27=new zpp_nape.geom.ZPP_GeomVert:(ret27=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret27.next,ret27.next=null),ret27.forced=!1,ret27.x=x1,ret27.y=y1,p2=ret27,(sndx||sndy)&&(p2.forced=!0)}else if(6==i2){var ret28;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret28=new zpp_nape.geom.ZPP_GeomVert:(ret28=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret28.next,ret28.next=null),ret28.forced=!1,ret28.x=x0,ret28.y=y1,p2=ret28,(fstx||sndy)&&(p2.forced=!0)}else if(1==i2){if(null==(p2=ints.list[(yn<<1)*ints.width+xn])){var x13=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret29;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret29=new zpp_nape.geom.ZPP_GeomVert:(ret29=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret29.next,ret29.next=null),ret29.forced=!1,ret29.x=x13,ret29.y=y0,p2=ret29,ints.list[(yn<<1)*ints.width+xn]=p2}else{var x14=p2.x,y13=p2.y,ret30;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret30=new zpp_nape.geom.ZPP_GeomVert:(ret30=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret30.next,ret30.next=null),ret30.forced=!1,ret30.x=x14,ret30.y=y13,p2=ret30}fsty&&(p2.forced=!0),p2.x!=x0&&p2.x!=x1||(p2.x==x0&&0!=(1&val2)||p2.x==x1&&0!=(4&val2))&&(val2^=2)}else if(5==i2){if(null==(p2=ints.list[(2+(yn<<1))*ints.width+xn])){var x15=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret31;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret31=new zpp_nape.geom.ZPP_GeomVert:(ret31=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret31.next,ret31.next=null),ret31.forced=!1,ret31.x=x15,ret31.y=y1,p2=ret31,ints.list[(2+(yn<<1))*ints.width+xn]=p2}else{var x16=p2.x,y14=p2.y,ret32;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret32=new zpp_nape.geom.ZPP_GeomVert:(ret32=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret32.next,ret32.next=null),ret32.forced=!1,ret32.x=x16,ret32.y=y14,p2=ret32}sndy&&(p2.forced=!0),p2.x!=x0&&p2.x!=x1||(p2.x==x0&&0!=(64&val2)||p2.x==x1&&0!=(16&val2))&&(val2^=32)}else if(3==i2){if(null==(p2=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y15=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret33;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret33=new zpp_nape.geom.ZPP_GeomVert:(ret33=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret33.next,ret33.next=null),ret33.forced=!1,ret33.x=x1,ret33.y=y15,p2=ret33,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p2}else{var x17=p2.x,y16=p2.y,ret34;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret34=new zpp_nape.geom.ZPP_GeomVert:(ret34=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret34.next,ret34.next=null),ret34.forced=!1,ret34.x=x17,ret34.y=y16,p2=ret34}sndx&&(p2.forced=!0),p2.y!=y0&&p2.y!=y1||(p2.y==y0&&0!=(4&val2)||p2.y==y1&&0!=(16&val2))&&(val2^=8)}else{if(null==(p2=ints.list[(1+(yn<<1))*ints.width+xn])){var y17=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret35;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret35=new zpp_nape.geom.ZPP_GeomVert:(ret35=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret35.next,ret35.next=null),ret35.forced=!1,ret35.x=x0,ret35.y=y17,p2=ret35,ints.list[(1+(yn<<1))*ints.width+xn]=p2}else{var x18=p2.x,y18=p2.y,ret36;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret36=new zpp_nape.geom.ZPP_GeomVert:(ret36=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret36.next,ret36.next=null),ret36.forced=!1,ret36.x=x18,ret36.y=y18,p2=ret36}fstx&&(p2.forced=!0),p2.y!=y0&&p2.y!=y1||(p2.y==y0&&0!=(1&val2)||p2.y==y1&&0!=(64&val2))&&(val2^=128)}var obj2=p2;null==ret.p1?ret.p1=obj2.prev=obj2.next=obj2:(obj2.prev=ret.p1,obj2.next=ret.p1.next,ret.p1.next.prev=obj2,ret.p1.next=obj2),ret.p1=obj2}}if(ret.p1=ret.p1.next,ret.key1=val2,1!=val2&&4!=val2&&16!=val2&&64!=val2&&3!=val2&&12!=val2&&48!=val2&&192!=val2&&129!=val2&&6!=val2&&24!=val2&&96!=val2&&5!=val2&&20!=val2&&80!=val2&&65!=val2&&17!=val2&&68!=val2||(val2=0,ret.key1=0,ret.p1=null),0!=val2){var val3=56;ret.okey2=val3;for(var _g3=0;_g3<8;){var i3=_g3++;if(0!=(val3&1<<i3)){var p3=null,ret37;if(0==i3)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret37=new zpp_nape.geom.ZPP_GeomVert:(ret37=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret37.next,ret37.next=null),ret37.forced=!1,ret37.x=x0,ret37.y=y0,p3=ret37,(fstx||fsty)&&(p3.forced=!0);else if(2==i3){var ret38;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret38=new zpp_nape.geom.ZPP_GeomVert:(ret38=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret38.next,ret38.next=null),ret38.forced=!1,ret38.x=x1,ret38.y=y0,p3=ret38,(sndx||fsty)&&(p3.forced=!0)}else if(4==i3){var ret39;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret39=new zpp_nape.geom.ZPP_GeomVert:(ret39=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret39.next,ret39.next=null),ret39.forced=!1,ret39.x=x1,ret39.y=y1,p3=ret39,(sndx||sndy)&&(p3.forced=!0)}else if(6==i3){var ret40;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret40=new zpp_nape.geom.ZPP_GeomVert:(ret40=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret40.next,ret40.next=null),ret40.forced=!1,ret40.x=x0,ret40.y=y1,p3=ret40,(fstx||sndy)&&(p3.forced=!0)}else if(1==i3){if(null==(p3=ints.list[(yn<<1)*ints.width+xn])){var x19=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret41;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret41=new zpp_nape.geom.ZPP_GeomVert:(ret41=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret41.next,ret41.next=null),ret41.forced=!1,ret41.x=x19,ret41.y=y0,p3=ret41,ints.list[(yn<<1)*ints.width+xn]=p3}else{var x20=p3.x,y19=p3.y,ret42;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret42=new zpp_nape.geom.ZPP_GeomVert:(ret42=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret42.next,ret42.next=null),ret42.forced=!1,ret42.x=x20,ret42.y=y19,p3=ret42}fsty&&(p3.forced=!0),p3.x!=x0&&p3.x!=x1||(p3.x==x0&&0!=(1&val3)||p3.x==x1&&0!=(4&val3))&&(val3^=2)}else if(5==i3){if(null==(p3=ints.list[(2+(yn<<1))*ints.width+xn])){var x21=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret43;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret43=new zpp_nape.geom.ZPP_GeomVert:(ret43=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret43.next,ret43.next=null),ret43.forced=!1,ret43.x=x21,ret43.y=y1,p3=ret43,ints.list[(2+(yn<<1))*ints.width+xn]=p3}else{var x22=p3.x,y20=p3.y,ret44;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret44=new zpp_nape.geom.ZPP_GeomVert:(ret44=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret44.next,ret44.next=null),ret44.forced=!1,ret44.x=x22,ret44.y=y20,p3=ret44}sndy&&(p3.forced=!0),p3.x!=x0&&p3.x!=x1||(p3.x==x0&&0!=(64&val3)||p3.x==x1&&0!=(16&val3))&&(val3^=32)}else if(3==i3){if(null==(p3=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y21=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret45;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret45=new zpp_nape.geom.ZPP_GeomVert:(ret45=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret45.next,ret45.next=null),ret45.forced=!1,ret45.x=x1,ret45.y=y21,p3=ret45,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p3}else{var x23=p3.x,y22=p3.y,ret46;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret46=new zpp_nape.geom.ZPP_GeomVert:(ret46=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret46.next,ret46.next=null),ret46.forced=!1,ret46.x=x23,ret46.y=y22,p3=ret46}sndx&&(p3.forced=!0),p3.y!=y0&&p3.y!=y1||(p3.y==y0&&0!=(4&val3)||p3.y==y1&&0!=(16&val3))&&(val3^=8)}else{if(null==(p3=ints.list[(1+(yn<<1))*ints.width+xn])){var y23=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret47;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret47=new zpp_nape.geom.ZPP_GeomVert:(ret47=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret47.next,ret47.next=null),ret47.forced=!1,ret47.x=x0,ret47.y=y23,p3=ret47,ints.list[(1+(yn<<1))*ints.width+xn]=p3}else{var x24=p3.x,y24=p3.y,ret48;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret48=new zpp_nape.geom.ZPP_GeomVert:(ret48=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret48.next,ret48.next=null),ret48.forced=!1,ret48.x=x24,ret48.y=y24,p3=ret48}fstx&&(p3.forced=!0),p3.y!=y0&&p3.y!=y1||(p3.y==y0&&0!=(1&val3)||p3.y==y1&&0!=(64&val3))&&(val3^=128)}var obj3=p3;null==ret.p2?ret.p2=obj3.prev=obj3.next=obj3:(obj3.prev=ret.p2,obj3.next=ret.p2.next,ret.p2.next.prev=obj3,ret.p2.next=obj3),ret.p2=obj3}}ret.p2=ret.p2.next,ret.key2=val3,1!=val3&&4!=val3&&16!=val3&&64!=val3&&3!=val3&&12!=val3&&48!=val3&&192!=val3&&129!=val3&&6!=val3&&24!=val3&&96!=val3&&5!=val3&&20!=val3&&80!=val3&&65!=val3&&17!=val3&&68!=val3||(val3=0,ret.key2=0,ret.p2=null),0==val3?(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1):(ret.pr=ret.p2,ret.okeyr=ret.okey2,ret.keyr=ret.key2)}else{var val4=56;ret.okey1=val4;for(var _g4=0;_g4<8;){var i4=_g4++;if(0!=(val4&1<<i4)){var p4=null,ret49;if(0==i4)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret49=new zpp_nape.geom.ZPP_GeomVert:(ret49=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret49.next,ret49.next=null),ret49.forced=!1,ret49.x=x0,ret49.y=y0,p4=ret49,(fstx||fsty)&&(p4.forced=!0);else if(2==i4){var ret50;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret50=new zpp_nape.geom.ZPP_GeomVert:(ret50=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret50.next,ret50.next=null),ret50.forced=!1,ret50.x=x1,ret50.y=y0,p4=ret50,(sndx||fsty)&&(p4.forced=!0)}else if(4==i4){var ret51;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret51=new zpp_nape.geom.ZPP_GeomVert:(ret51=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret51.next,ret51.next=null),ret51.forced=!1,ret51.x=x1,ret51.y=y1,p4=ret51,(sndx||sndy)&&(p4.forced=!0)}else if(6==i4){var ret52;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret52=new zpp_nape.geom.ZPP_GeomVert:(ret52=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret52.next,ret52.next=null),ret52.forced=!1,ret52.x=x0,ret52.y=y1,p4=ret52,(fstx||sndy)&&(p4.forced=!0)}else if(1==i4){if(null==(p4=ints.list[(yn<<1)*ints.width+xn])){var x25=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret53;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret53=new zpp_nape.geom.ZPP_GeomVert:(ret53=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret53.next,ret53.next=null),ret53.forced=!1,ret53.x=x25,ret53.y=y0,p4=ret53,ints.list[(yn<<1)*ints.width+xn]=p4}else{var x26=p4.x,y25=p4.y,ret54;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret54=new zpp_nape.geom.ZPP_GeomVert:(ret54=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret54.next,ret54.next=null),ret54.forced=!1,ret54.x=x26,ret54.y=y25,p4=ret54}fsty&&(p4.forced=!0),p4.x!=x0&&p4.x!=x1||(p4.x==x0&&0!=(1&val4)||p4.x==x1&&0!=(4&val4))&&(val4^=2)}else if(5==i4){if(null==(p4=ints.list[(2+(yn<<1))*ints.width+xn])){var x27=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret55;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret55=new zpp_nape.geom.ZPP_GeomVert:(ret55=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret55.next,ret55.next=null),ret55.forced=!1,ret55.x=x27,ret55.y=y1,p4=ret55,ints.list[(2+(yn<<1))*ints.width+xn]=p4}else{var x28=p4.x,y26=p4.y,ret56;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret56=new zpp_nape.geom.ZPP_GeomVert:(ret56=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret56.next,ret56.next=null),ret56.forced=!1,ret56.x=x28,ret56.y=y26,p4=ret56}sndy&&(p4.forced=!0),p4.x!=x0&&p4.x!=x1||(p4.x==x0&&0!=(64&val4)||p4.x==x1&&0!=(16&val4))&&(val4^=32)}else if(3==i4){if(null==(p4=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y27=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret57;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret57=new zpp_nape.geom.ZPP_GeomVert:(ret57=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret57.next,ret57.next=null),ret57.forced=!1,ret57.x=x1,ret57.y=y27,p4=ret57,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p4}else{var x29=p4.x,y28=p4.y,ret58;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret58=new zpp_nape.geom.ZPP_GeomVert:(ret58=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret58.next,ret58.next=null),ret58.forced=!1,ret58.x=x29,ret58.y=y28,p4=ret58}sndx&&(p4.forced=!0),p4.y!=y0&&p4.y!=y1||(p4.y==y0&&0!=(4&val4)||p4.y==y1&&0!=(16&val4))&&(val4^=8)}else{if(null==(p4=ints.list[(1+(yn<<1))*ints.width+xn])){var y29=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret59;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret59=new zpp_nape.geom.ZPP_GeomVert:(ret59=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret59.next,ret59.next=null),ret59.forced=!1,ret59.x=x0,ret59.y=y29,p4=ret59,ints.list[(1+(yn<<1))*ints.width+xn]=p4}else{var x30=p4.x,y30=p4.y,ret60;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret60=new zpp_nape.geom.ZPP_GeomVert:(ret60=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret60.next,ret60.next=null),ret60.forced=!1,ret60.x=x30,ret60.y=y30,p4=ret60}fstx&&(p4.forced=!0),p4.y!=y0&&p4.y!=y1||(p4.y==y0&&0!=(1&val4)||p4.y==y1&&0!=(64&val4))&&(val4^=128)}var obj4=p4;null==ret.p1?ret.p1=obj4.prev=obj4.next=obj4:(obj4.prev=ret.p1,obj4.next=ret.p1.next,ret.p1.next.prev=obj4,ret.p1.next=obj4),ret.p1=obj4}}ret.p1=ret.p1.next,ret.key1=val4,1!=val4&&4!=val4&&16!=val4&&64!=val4&&3!=val4&&12!=val4&&48!=val4&&192!=val4&&129!=val4&&6!=val4&&24!=val4&&96!=val4&&5!=val4&&20!=val4&&80!=val4&&65!=val4&&17!=val4&&68!=val4||(val4=0,ret.key1=0,ret.p1=null),0==val4?ret=null:(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1)}}else if(mid){var val5=238;ret.okey1=val5;for(var _g5=0;_g5<8;){var i5=_g5++;if(0!=(val5&1<<i5)){var p5=null,ret61;if(0==i5)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret61=new zpp_nape.geom.ZPP_GeomVert:(ret61=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret61.next,ret61.next=null),ret61.forced=!1,ret61.x=x0,ret61.y=y0,p5=ret61,(fstx||fsty)&&(p5.forced=!0);else if(2==i5){var ret62;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret62=new zpp_nape.geom.ZPP_GeomVert:(ret62=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret62.next,ret62.next=null),ret62.forced=!1,ret62.x=x1,ret62.y=y0,p5=ret62,(sndx||fsty)&&(p5.forced=!0)}else if(4==i5){var ret63;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret63=new zpp_nape.geom.ZPP_GeomVert:(ret63=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret63.next,ret63.next=null),ret63.forced=!1,ret63.x=x1,ret63.y=y1,p5=ret63,(sndx||sndy)&&(p5.forced=!0)}else if(6==i5){var ret64;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret64=new zpp_nape.geom.ZPP_GeomVert:(ret64=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret64.next,ret64.next=null),ret64.forced=!1,ret64.x=x0,ret64.y=y1,p5=ret64,(fstx||sndy)&&(p5.forced=!0)}else if(1==i5){if(null==(p5=ints.list[(yn<<1)*ints.width+xn])){var x31=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret65;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret65=new zpp_nape.geom.ZPP_GeomVert:(ret65=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret65.next,ret65.next=null),ret65.forced=!1,ret65.x=x31,ret65.y=y0,p5=ret65,ints.list[(yn<<1)*ints.width+xn]=p5}else{var x32=p5.x,y31=p5.y,ret66;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret66=new zpp_nape.geom.ZPP_GeomVert:(ret66=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret66.next,ret66.next=null),ret66.forced=!1,ret66.x=x32,ret66.y=y31,p5=ret66}fsty&&(p5.forced=!0),p5.x!=x0&&p5.x!=x1||(p5.x==x0&&0!=(1&val5)||p5.x==x1&&0!=(4&val5))&&(val5^=2)}else if(5==i5){if(null==(p5=ints.list[(2+(yn<<1))*ints.width+xn])){var x33=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret67;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret67=new zpp_nape.geom.ZPP_GeomVert:(ret67=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret67.next,ret67.next=null),ret67.forced=!1,ret67.x=x33,ret67.y=y1,p5=ret67,ints.list[(2+(yn<<1))*ints.width+xn]=p5}else{var x34=p5.x,y32=p5.y,ret68;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret68=new zpp_nape.geom.ZPP_GeomVert:(ret68=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret68.next,ret68.next=null),ret68.forced=!1,ret68.x=x34,ret68.y=y32,p5=ret68}sndy&&(p5.forced=!0),p5.x!=x0&&p5.x!=x1||(p5.x==x0&&0!=(64&val5)||p5.x==x1&&0!=(16&val5))&&(val5^=32)}else if(3==i5){if(null==(p5=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y33=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret69;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret69=new zpp_nape.geom.ZPP_GeomVert:(ret69=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret69.next,ret69.next=null),ret69.forced=!1,ret69.x=x1,ret69.y=y33,p5=ret69,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p5}else{var x35=p5.x,y34=p5.y,ret70;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret70=new zpp_nape.geom.ZPP_GeomVert:(ret70=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret70.next,ret70.next=null),ret70.forced=!1,ret70.x=x35,ret70.y=y34,p5=ret70}sndx&&(p5.forced=!0),p5.y!=y0&&p5.y!=y1||(p5.y==y0&&0!=(4&val5)||p5.y==y1&&0!=(16&val5))&&(val5^=8)}else{if(null==(p5=ints.list[(1+(yn<<1))*ints.width+xn])){var y35=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret71;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret71=new zpp_nape.geom.ZPP_GeomVert:(ret71=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret71.next,ret71.next=null),ret71.forced=!1,ret71.x=x0,ret71.y=y35,p5=ret71,ints.list[(1+(yn<<1))*ints.width+xn]=p5}else{var x36=p5.x,y36=p5.y,ret72;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret72=new zpp_nape.geom.ZPP_GeomVert:(ret72=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret72.next,ret72.next=null),ret72.forced=!1,ret72.x=x36,ret72.y=y36,p5=ret72}fstx&&(p5.forced=!0),p5.y!=y0&&p5.y!=y1||(p5.y==y0&&0!=(1&val5)||p5.y==y1&&0!=(64&val5))&&(val5^=128)}var obj5=p5;null==ret.p1?ret.p1=obj5.prev=obj5.next=obj5:(obj5.prev=ret.p1,obj5.next=ret.p1.next,ret.p1.next.prev=obj5,ret.p1.next=obj5),ret.p1=obj5}}ret.p1=ret.p1.next,ret.key1=val5,1!=val5&&4!=val5&&16!=val5&&64!=val5&&3!=val5&&12!=val5&&48!=val5&&192!=val5&&129!=val5&&6!=val5&&24!=val5&&96!=val5&&5!=val5&&20!=val5&&80!=val5&&65!=val5&&17!=val5&&68!=val5||(val5=0,ret.key1=0,ret.p1=null),0==val5?ret=null:(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1)}else{var val6=224;ret.okey1=val6;for(var _g6=0;_g6<8;){var i6=_g6++;if(0!=(val6&1<<i6)){var p6=null,ret73;if(0==i6)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret73=new zpp_nape.geom.ZPP_GeomVert:(ret73=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret73.next,ret73.next=null),ret73.forced=!1,ret73.x=x0,ret73.y=y0,p6=ret73,(fstx||fsty)&&(p6.forced=!0);else if(2==i6){var ret74;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret74=new zpp_nape.geom.ZPP_GeomVert:(ret74=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret74.next,ret74.next=null),ret74.forced=!1,ret74.x=x1,ret74.y=y0,p6=ret74,(sndx||fsty)&&(p6.forced=!0)}else if(4==i6){var ret75;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret75=new zpp_nape.geom.ZPP_GeomVert:(ret75=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret75.next,ret75.next=null),ret75.forced=!1,ret75.x=x1,ret75.y=y1,p6=ret75,(sndx||sndy)&&(p6.forced=!0)}else if(6==i6){var ret76;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret76=new zpp_nape.geom.ZPP_GeomVert:(ret76=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret76.next,ret76.next=null),ret76.forced=!1,ret76.x=x0,ret76.y=y1,p6=ret76,(fstx||sndy)&&(p6.forced=!0)}else if(1==i6){if(null==(p6=ints.list[(yn<<1)*ints.width+xn])){var x37=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret77;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret77=new zpp_nape.geom.ZPP_GeomVert:(ret77=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret77.next,ret77.next=null),ret77.forced=!1,ret77.x=x37,ret77.y=y0,p6=ret77,ints.list[(yn<<1)*ints.width+xn]=p6}else{var x38=p6.x,y37=p6.y,ret78;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret78=new zpp_nape.geom.ZPP_GeomVert:(ret78=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret78.next,ret78.next=null),ret78.forced=!1,ret78.x=x38,ret78.y=y37,p6=ret78}fsty&&(p6.forced=!0),p6.x!=x0&&p6.x!=x1||(p6.x==x0&&0!=(1&val6)||p6.x==x1&&0!=(4&val6))&&(val6^=2)}else if(5==i6){if(null==(p6=ints.list[(2+(yn<<1))*ints.width+xn])){var x39=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret79;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret79=new zpp_nape.geom.ZPP_GeomVert:(ret79=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret79.next,ret79.next=null),ret79.forced=!1,ret79.x=x39,ret79.y=y1,p6=ret79,ints.list[(2+(yn<<1))*ints.width+xn]=p6}else{var x40=p6.x,y38=p6.y,ret80;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret80=new zpp_nape.geom.ZPP_GeomVert:(ret80=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret80.next,ret80.next=null),ret80.forced=!1,ret80.x=x40,ret80.y=y38,p6=ret80}sndy&&(p6.forced=!0),p6.x!=x0&&p6.x!=x1||(p6.x==x0&&0!=(64&val6)||p6.x==x1&&0!=(16&val6))&&(val6^=32)}else if(3==i6){if(null==(p6=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y39=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret81;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret81=new zpp_nape.geom.ZPP_GeomVert:(ret81=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret81.next,ret81.next=null),ret81.forced=!1,ret81.x=x1,ret81.y=y39,p6=ret81,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p6}else{var x41=p6.x,y40=p6.y,ret82;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret82=new zpp_nape.geom.ZPP_GeomVert:(ret82=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret82.next,ret82.next=null),ret82.forced=!1,ret82.x=x41,ret82.y=y40,p6=ret82}sndx&&(p6.forced=!0),p6.y!=y0&&p6.y!=y1||(p6.y==y0&&0!=(4&val6)||p6.y==y1&&0!=(16&val6))&&(val6^=8)}else{if(null==(p6=ints.list[(1+(yn<<1))*ints.width+xn])){var y41=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret83;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret83=new zpp_nape.geom.ZPP_GeomVert:(ret83=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret83.next,ret83.next=null),ret83.forced=!1,ret83.x=x0,ret83.y=y41,p6=ret83,ints.list[(1+(yn<<1))*ints.width+xn]=p6}else{var x42=p6.x,y42=p6.y,ret84;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret84=new zpp_nape.geom.ZPP_GeomVert:(ret84=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret84.next,ret84.next=null),ret84.forced=!1,ret84.x=x42,ret84.y=y42,p6=ret84}fstx&&(p6.forced=!0),p6.y!=y0&&p6.y!=y1||(p6.y==y0&&0!=(1&val6)||p6.y==y1&&0!=(64&val6))&&(val6^=128)}var obj6=p6;null==ret.p1?ret.p1=obj6.prev=obj6.next=obj6:(obj6.prev=ret.p1,obj6.next=ret.p1.next,ret.p1.next.prev=obj6,ret.p1.next=obj6),ret.p1=obj6}}if(ret.p1=ret.p1.next,ret.key1=val6,1!=val6&&4!=val6&&16!=val6&&64!=val6&&3!=val6&&12!=val6&&48!=val6&&192!=val6&&129!=val6&&6!=val6&&24!=val6&&96!=val6&&5!=val6&&20!=val6&&80!=val6&&65!=val6&&17!=val6&&68!=val6||(val6=0,ret.key1=0,ret.p1=null),0!=val6){var val7=14;ret.okey2=val7;for(var _g7=0;_g7<8;){var i7=_g7++;if(0!=(val7&1<<i7)){var p7=null,ret85;if(0==i7)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret85=new zpp_nape.geom.ZPP_GeomVert:(ret85=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret85.next,ret85.next=null),ret85.forced=!1,ret85.x=x0,ret85.y=y0,p7=ret85,(fstx||fsty)&&(p7.forced=!0);else if(2==i7){var ret86;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret86=new zpp_nape.geom.ZPP_GeomVert:(ret86=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret86.next,ret86.next=null),ret86.forced=!1,ret86.x=x1,ret86.y=y0,p7=ret86,(sndx||fsty)&&(p7.forced=!0)}else if(4==i7){var ret87;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret87=new zpp_nape.geom.ZPP_GeomVert:(ret87=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret87.next,ret87.next=null),ret87.forced=!1,ret87.x=x1,ret87.y=y1,p7=ret87,(sndx||sndy)&&(p7.forced=!0)}else if(6==i7){var ret88;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret88=new zpp_nape.geom.ZPP_GeomVert:(ret88=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret88.next,ret88.next=null),ret88.forced=!1,ret88.x=x0,ret88.y=y1,p7=ret88,(fstx||sndy)&&(p7.forced=!0)}else if(1==i7){if(null==(p7=ints.list[(yn<<1)*ints.width+xn])){var x43=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret89;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret89=new zpp_nape.geom.ZPP_GeomVert:(ret89=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret89.next,ret89.next=null),ret89.forced=!1,ret89.x=x43,ret89.y=y0,p7=ret89,ints.list[(yn<<1)*ints.width+xn]=p7}else{var x44=p7.x,y43=p7.y,ret90;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret90=new zpp_nape.geom.ZPP_GeomVert:(ret90=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret90.next,ret90.next=null),ret90.forced=!1,ret90.x=x44,ret90.y=y43,p7=ret90}fsty&&(p7.forced=!0),p7.x!=x0&&p7.x!=x1||(p7.x==x0&&0!=(1&val7)||p7.x==x1&&0!=(4&val7))&&(val7^=2)}else if(5==i7){if(null==(p7=ints.list[(2+(yn<<1))*ints.width+xn])){var x45=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret91;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret91=new zpp_nape.geom.ZPP_GeomVert:(ret91=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret91.next,ret91.next=null),ret91.forced=!1,ret91.x=x45,ret91.y=y1,p7=ret91,ints.list[(2+(yn<<1))*ints.width+xn]=p7}else{var x46=p7.x,y44=p7.y,ret92;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret92=new zpp_nape.geom.ZPP_GeomVert:(ret92=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret92.next,ret92.next=null),ret92.forced=!1,ret92.x=x46,ret92.y=y44,p7=ret92}sndy&&(p7.forced=!0),p7.x!=x0&&p7.x!=x1||(p7.x==x0&&0!=(64&val7)||p7.x==x1&&0!=(16&val7))&&(val7^=32)}else if(3==i7){if(null==(p7=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y45=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret93;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret93=new zpp_nape.geom.ZPP_GeomVert:(ret93=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret93.next,ret93.next=null),ret93.forced=!1,ret93.x=x1,ret93.y=y45,p7=ret93,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p7}else{var x47=p7.x,y46=p7.y,ret94;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret94=new zpp_nape.geom.ZPP_GeomVert:(ret94=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret94.next,ret94.next=null),ret94.forced=!1,ret94.x=x47,ret94.y=y46,p7=ret94}sndx&&(p7.forced=!0),p7.y!=y0&&p7.y!=y1||(p7.y==y0&&0!=(4&val7)||p7.y==y1&&0!=(16&val7))&&(val7^=8)}else{if(null==(p7=ints.list[(1+(yn<<1))*ints.width+xn])){var y47=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret95;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret95=new zpp_nape.geom.ZPP_GeomVert:(ret95=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret95.next,ret95.next=null),ret95.forced=!1,ret95.x=x0,ret95.y=y47,p7=ret95,ints.list[(1+(yn<<1))*ints.width+xn]=p7}else{var x48=p7.x,y48=p7.y,ret96;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret96=new zpp_nape.geom.ZPP_GeomVert:(ret96=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret96.next,ret96.next=null),ret96.forced=!1,ret96.x=x48,ret96.y=y48,p7=ret96}fstx&&(p7.forced=!0),p7.y!=y0&&p7.y!=y1||(p7.y==y0&&0!=(1&val7)||p7.y==y1&&0!=(64&val7))&&(val7^=128)}var obj7=p7;null==ret.p2?ret.p2=obj7.prev=obj7.next=obj7:(obj7.prev=ret.p2,obj7.next=ret.p2.next,ret.p2.next.prev=obj7,ret.p2.next=obj7),ret.p2=obj7}}ret.p2=ret.p2.next,ret.key2=val7,1!=val7&&4!=val7&&16!=val7&&64!=val7&&3!=val7&&12!=val7&&48!=val7&&192!=val7&&129!=val7&&6!=val7&&24!=val7&&96!=val7&&5!=val7&&20!=val7&&80!=val7&&65!=val7&&17!=val7&&68!=val7||(val7=0,ret.key2=0,ret.p2=null),0==val7?(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1):(ret.pr=ret.p2,ret.okeyr=ret.okey2,ret.keyr=ret.key2)}else{var val8=14;ret.okey1=val8;for(var _g8=0;_g8<8;){var i8=_g8++;if(0!=(val8&1<<i8)){var p8=null,ret97;if(0==i8)null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret97=new zpp_nape.geom.ZPP_GeomVert:(ret97=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret97.next,ret97.next=null),ret97.forced=!1,ret97.x=x0,ret97.y=y0,p8=ret97,(fstx||fsty)&&(p8.forced=!0);else if(2==i8){var ret98;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret98=new zpp_nape.geom.ZPP_GeomVert:(ret98=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret98.next,ret98.next=null),ret98.forced=!1,ret98.x=x1,ret98.y=y0,p8=ret98,(sndx||fsty)&&(p8.forced=!0)}else if(4==i8){var ret99;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret99=new zpp_nape.geom.ZPP_GeomVert:(ret99=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret99.next,ret99.next=null),ret99.forced=!1,ret99.x=x1,ret99.y=y1,p8=ret99,(sndx||sndy)&&(p8.forced=!0)}else if(6==i8){var ret100;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret100=new zpp_nape.geom.ZPP_GeomVert:(ret100=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret100.next,ret100.next=null),ret100.forced=!1,ret100.x=x0,ret100.y=y1,p8=ret100,(fstx||sndy)&&(p8.forced=!0)}else if(1==i8){if(null==(p8=ints.list[(yn<<1)*ints.width+xn])){var x49=this.xlerp(x0,x1,y0,v0,v1,iso,quality),ret101;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret101=new zpp_nape.geom.ZPP_GeomVert:(ret101=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret101.next,ret101.next=null),ret101.forced=!1,ret101.x=x49,ret101.y=y0,p8=ret101,ints.list[(yn<<1)*ints.width+xn]=p8}else{var x50=p8.x,y49=p8.y,ret102;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret102=new zpp_nape.geom.ZPP_GeomVert:(ret102=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret102.next,ret102.next=null),ret102.forced=!1,ret102.x=x50,ret102.y=y49,p8=ret102}fsty&&(p8.forced=!0),p8.x!=x0&&p8.x!=x1||(p8.x==x0&&0!=(1&val8)||p8.x==x1&&0!=(4&val8))&&(val8^=2)}else if(5==i8){if(null==(p8=ints.list[(2+(yn<<1))*ints.width+xn])){var x51=this.xlerp(x0,x1,y1,v3,v2,iso,quality),ret103;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret103=new zpp_nape.geom.ZPP_GeomVert:(ret103=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret103.next,ret103.next=null),ret103.forced=!1,ret103.x=x51,ret103.y=y1,p8=ret103,ints.list[(2+(yn<<1))*ints.width+xn]=p8}else{var x52=p8.x,y50=p8.y,ret104;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret104=new zpp_nape.geom.ZPP_GeomVert:(ret104=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret104.next,ret104.next=null),ret104.forced=!1,ret104.x=x52,ret104.y=y50,p8=ret104}sndy&&(p8.forced=!0),p8.x!=x0&&p8.x!=x1||(p8.x==x0&&0!=(64&val8)||p8.x==x1&&0!=(16&val8))&&(val8^=32)}else if(3==i8){if(null==(p8=ints.list[(1+(yn<<1))*ints.width+(xn+1)])){var y51=this.ylerp(y0,y1,x1,v1,v2,iso,quality),ret105;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret105=new zpp_nape.geom.ZPP_GeomVert:(ret105=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret105.next,ret105.next=null),ret105.forced=!1,ret105.x=x1,ret105.y=y51,p8=ret105,ints.list[(1+(yn<<1))*ints.width+(xn+1)]=p8}else{var x53=p8.x,y52=p8.y,ret106;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret106=new zpp_nape.geom.ZPP_GeomVert:(ret106=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret106.next,ret106.next=null),ret106.forced=!1,ret106.x=x53,ret106.y=y52,p8=ret106}sndx&&(p8.forced=!0),p8.y!=y0&&p8.y!=y1||(p8.y==y0&&0!=(4&val8)||p8.y==y1&&0!=(16&val8))&&(val8^=8)}else{if(null==(p8=ints.list[(1+(yn<<1))*ints.width+xn])){var y53=this.ylerp(y0,y1,x0,v0,v3,iso,quality),ret107;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret107=new zpp_nape.geom.ZPP_GeomVert:(ret107=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret107.next,ret107.next=null),ret107.forced=!1,ret107.x=x0,ret107.y=y53,p8=ret107,ints.list[(1+(yn<<1))*ints.width+xn]=p8}else{var x54=p8.x,y54=p8.y,ret108;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret108=new zpp_nape.geom.ZPP_GeomVert:(ret108=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret108.next,ret108.next=null),ret108.forced=!1,ret108.x=x54,ret108.y=y54,p8=ret108}fstx&&(p8.forced=!0),p8.y!=y0&&p8.y!=y1||(p8.y==y0&&0!=(1&val8)||p8.y==y1&&0!=(64&val8))&&(val8^=128)}var obj8=p8;null==ret.p1?ret.p1=obj8.prev=obj8.next=obj8:(obj8.prev=ret.p1,obj8.next=ret.p1.next,ret.p1.next.prev=obj8,ret.p1.next=obj8),ret.p1=obj8}}ret.p1=ret.p1.next,ret.key1=val8,1!=val8&&4!=val8&&16!=val8&&64!=val8&&3!=val8&&12!=val8&&48!=val8&&192!=val8&&129!=val8&&6!=val8&&24!=val8&&96!=val8&&5!=val8&&20!=val8&&80!=val8&&65!=val8&&17!=val8&&68!=val8||(val8=0,ret.key1=0,ret.p1=null),0==val8?ret=null:(ret.pr=ret.p1,ret.okeyr=ret.okey1,ret.keyr=ret.key1)}}}return ret},zpp_nape.geom.ZPP_MarchingSquares.prototype.lerp=function(x0,x1,v0,v1){if(0==v0)return x0;if(0==v1)return x1;var dv=v0-v1,t=dv*dv<nape.Config.epsilon*nape.Config.epsilon?.5:v0/dv;return t<0?t=0:t>1&&(t=1),x0+t*(x1-x0)},zpp_nape.geom.ZPP_MarchingSquares.prototype.xlerp=function(x0,x1,y,v0,v1,iso,quality){var xm;if(0==v0)xm=x0;else if(0==v1)xm=x1;else{var dv=v0-v1,t=dv*dv<nape.Config.epsilon*nape.Config.epsilon?.5:v0/dv;t<0?t=0:t>1&&(t=1),xm=x0+t*(x1-x0)}for(;0!=quality--&&x0<xm&&xm<x1;){var vm=iso(xm,y);if(0==vm)break;if(v0*vm<0?(x1=xm,v1=vm):(x0=xm,v0=vm),0==v0)xm=x0;else if(0==v1)xm=x1;else{var dv1=v0-v1,t1=dv1*dv1<nape.Config.epsilon*nape.Config.epsilon?.5:v0/dv1;t1<0?t1=0:t1>1&&(t1=1),xm=x0+t1*(x1-x0)}}return xm},zpp_nape.geom.ZPP_MarchingSquares.prototype.ylerp=function(y0,y1,x,v0,v1,iso,quality){var ym;if(0==v0)ym=y0;else if(0==v1)ym=y1;else{var dv=v0-v1,t=dv*dv<nape.Config.epsilon*nape.Config.epsilon?.5:v0/dv;t<0?t=0:t>1&&(t=1),ym=y0+t*(y1-y0)}for(;0!=quality--&&y0<ym&&ym<y1;){var vm=iso(x,ym);if(0==vm)break;if(v0*vm<0?(y1=ym,v1=vm):(y0=ym,v0=vm),0==v0)ym=y0;else if(0==v1)ym=y1;else{var dv1=v0-v1,t1=dv1*dv1<nape.Config.epsilon*nape.Config.epsilon?.5:v0/dv1;t1<0?t1=0:t1>1&&(t1=1),ym=y0+t1*(y1-y0)}}return ym},zpp_nape.geom.ZPP_MarchingSquares.prototype.__class__=zpp_nape.geom.ZPP_MarchingSquares,zpp_nape.geom.ZPP_Mat23=$hxClasses["zpp_nape.geom.ZPP_Mat23"]=function(){this.next=null,this._invalidate=null,this.ty=0,this.tx=0,this.d=0,this.c=0,this.b=0,this.a=0,this.outer=null},zpp_nape.geom.ZPP_Mat23.__name__=["zpp_nape","geom","ZPP_Mat23"],zpp_nape.geom.ZPP_Mat23.get=function(){var ret;return null==zpp_nape.geom.ZPP_Mat23.zpp_pool?ret=new zpp_nape.geom.ZPP_Mat23:(ret=zpp_nape.geom.ZPP_Mat23.zpp_pool,zpp_nape.geom.ZPP_Mat23.zpp_pool=ret.next,ret.next=null),ret},zpp_nape.geom.ZPP_Mat23.identity=function(){var ret=zpp_nape.geom.ZPP_Mat23.get();return ret.setas(1,0,0,1,0,0),ret},zpp_nape.geom.ZPP_Mat23.prototype.outer=null,zpp_nape.geom.ZPP_Mat23.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.geom.Mat23;var o=this.outer.zpp_inner;o.next=zpp_nape.geom.ZPP_Mat23.zpp_pool,zpp_nape.geom.ZPP_Mat23.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.geom.ZPP_Mat23.prototype.a=null,zpp_nape.geom.ZPP_Mat23.prototype.b=null,zpp_nape.geom.ZPP_Mat23.prototype.c=null,zpp_nape.geom.ZPP_Mat23.prototype.d=null,zpp_nape.geom.ZPP_Mat23.prototype.tx=null,zpp_nape.geom.ZPP_Mat23.prototype.ty=null,zpp_nape.geom.ZPP_Mat23.prototype._invalidate=null,zpp_nape.geom.ZPP_Mat23.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate()},zpp_nape.geom.ZPP_Mat23.prototype.set=function(m){this.setas(m.a,m.b,m.c,m.d,m.tx,m.ty)},zpp_nape.geom.ZPP_Mat23.prototype.setas=function(a,b,c,d,tx,ty){this.tx=tx,this.ty=ty,this.a=a,this.b=b,this.c=c,this.d=d},zpp_nape.geom.ZPP_Mat23.prototype.next=null,zpp_nape.geom.ZPP_Mat23.prototype.free=function(){},zpp_nape.geom.ZPP_Mat23.prototype.alloc=function(){},zpp_nape.geom.ZPP_Mat23.prototype.__class__=zpp_nape.geom.ZPP_Mat23,zpp_nape.geom.ZPP_MatMN=$hxClasses["zpp_nape.geom.ZPP_MatMN"]=function(m,n){this.x=null,this.n=0,this.m=0,this.outer=null,this.m=m,this.n=n,this.x=[];for(var _g=0,_g1=m*n;_g<_g1;){var i=_g++;this.x.push(0)}},zpp_nape.geom.ZPP_MatMN.__name__=["zpp_nape","geom","ZPP_MatMN"],zpp_nape.geom.ZPP_MatMN.prototype.outer=null,zpp_nape.geom.ZPP_MatMN.prototype.m=null,zpp_nape.geom.ZPP_MatMN.prototype.n=null,zpp_nape.geom.ZPP_MatMN.prototype.x=null,zpp_nape.geom.ZPP_MatMN.prototype.__class__=zpp_nape.geom.ZPP_MatMN,zpp_nape.geom.ZPP_Monotone=$hxClasses["zpp_nape.geom.ZPP_Monotone"]=function(){},zpp_nape.geom.ZPP_Monotone.__name__=["zpp_nape","geom","ZPP_Monotone"],zpp_nape.geom.ZPP_Monotone.bisector=function(b){var a=b.prev,c=b.next,ux=0,uy=0;ux=b.x-a.x,uy=b.y-a.y;var vx=0,vy=0,ret;vx=c.x-b.x,vy=c.y-b.y,null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=-uy-vy,ret.y=ux+vx;var ret1=ret,d=ret1.x*ret1.x+ret1.y*ret1.y,imag,t=1/Math.sqrt(d);return ret1.x*=t,ret1.y*=t,vy*ux-vx*uy<0&&(ret1.x=-ret1.x,ret1.y=-ret1.y),ret1},zpp_nape.geom.ZPP_Monotone.below=function(p,q){if(p.y<q.y)return!0;if(p.y>q.y)return!1;if(p.x<q.x)return!0;if(p.x>q.x)return!1;var po=zpp_nape.geom.ZPP_Monotone.bisector(p),qo=zpp_nape.geom.ZPP_Monotone.bisector(q),t=1;po.x+=1*p.x,po.y+=1*p.y;var t1=1;qo.x+=1*q.x,qo.y+=1*q.y;var ret=po.x<qo.x||po.x==qo.x&&po.y<qo.y,o=po;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o;var o1=qo;return null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret},zpp_nape.geom.ZPP_Monotone.above=function(p,q){return zpp_nape.geom.ZPP_Monotone.below(q,p)},zpp_nape.geom.ZPP_Monotone.left_vertex=function(p){var pre=p.prev;return pre.y>p.y||pre.y==p.y&&p.next.y<p.y},zpp_nape.geom.ZPP_Monotone.isMonotone=function(P){var min=P,max=P,F=P.next,L=P;if(null!=F)for(var nite=F;;){var p=nite;if(p.y<min.y&&(min=p),p.y>max.y&&(max=p),(nite=nite.next)==L)break}var ret=!0,pre=min;if(max!=min.next){var F1=min.next,L1=max;if(null!=F1)for(var nite1=F1;;){var p1=nite1;if(p1.y<pre.y){ret=!1;break}if(pre=p1,(nite1=nite1.next)==L1)break}}if(!ret)return!1;if(pre=min,max!=min.prev){var F2=min.prev,L2=max;if(null!=F2)for(var nite2=F2;;){var p2=nite2;if(p2.y<pre.y){ret=!1;break}if(pre=p2,(nite2=nite2.prev)==L2)break}}return ret},zpp_nape.geom.ZPP_Monotone.sharedPPoly=null,zpp_nape.geom.ZPP_Monotone.getShared=function(){return null==zpp_nape.geom.ZPP_Monotone.sharedPPoly&&(zpp_nape.geom.ZPP_Monotone.sharedPPoly=new zpp_nape.geom.ZPP_PartitionedPoly),zpp_nape.geom.ZPP_Monotone.sharedPPoly},zpp_nape.geom.ZPP_Monotone.decompose=function(P,poly){if(null==poly?poly=new zpp_nape.geom.ZPP_PartitionedPoly(P):poly.init(P),null==poly.vertices)return poly;null==zpp_nape.geom.ZPP_Monotone.queue&&(zpp_nape.geom.ZPP_Monotone.queue=new zpp_nape.util.ZNPList_ZPP_PartitionVertex);var F=poly.vertices,L=poly.vertices;if(null!=F)for(var nite=F;;){var p=nite;zpp_nape.geom.ZPP_Monotone.queue.add(p);var ux=0,uy=0;ux=p.next.x-p.x,uy=p.next.y-p.y;var vx=0,vy=0;vx=p.prev.x-p.x;var cx=(vy=p.prev.y-p.y)*ux-vx*uy>0;if(p.type=zpp_nape.geom.ZPP_Monotone.below(p.prev,p)?zpp_nape.geom.ZPP_Monotone.below(p.next,p)?cx?0:3:4:zpp_nape.geom.ZPP_Monotone.below(p,p.next)?cx?1:2:4,(nite=nite.next)==L)break}var xxlist=zpp_nape.geom.ZPP_Monotone.queue;if(null!=xxlist.head&&null!=xxlist.head.next){for(var head=xxlist.head,tail=null,left=null,right=null,nxt=null,listSize=1,numMerges,leftSize,rightSize;;){for(numMerges=0,left=head,tail=head=null;null!=left;){for(++numMerges,right=left,leftSize=0,rightSize=listSize;null!=right&&leftSize<listSize;)++leftSize,right=right.next;for(;leftSize>0||rightSize>0&&null!=right;)0==leftSize?(nxt=right,right=right.next,--rightSize):0==rightSize||null==right?(nxt=left,left=left.next,--leftSize):zpp_nape.geom.ZPP_Monotone.above(left.elt,right.elt)?(nxt=left,left=left.next,--leftSize):(nxt=right,right=right.next,--rightSize),null!=tail?tail.next=nxt:head=nxt,tail=nxt;left=right}if(tail.next=null,listSize<<=1,!(numMerges>1))break}xxlist.head=head,xxlist.modified=!0,xxlist.pushmod=!0}for(null==zpp_nape.geom.ZPP_Monotone.edges&&(null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?zpp_nape.geom.ZPP_Monotone.edges=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(zpp_nape.geom.ZPP_Monotone.edges=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=zpp_nape.geom.ZPP_Monotone.edges.next,zpp_nape.geom.ZPP_Monotone.edges.next=null),zpp_nape.geom.ZPP_Monotone.edges.lt=zpp_nape.geom.ZPP_PartitionVertex.edge_lt,zpp_nape.geom.ZPP_Monotone.edges.swapped=zpp_nape.geom.ZPP_PartitionVertex.edge_swap);null!=zpp_nape.geom.ZPP_Monotone.queue.head;){var v=zpp_nape.geom.ZPP_Monotone.queue.pop_unsafe();switch(v.type){case 0:v.helper=v,v.node=zpp_nape.geom.ZPP_Monotone.edges.insert(v);break;case 1:var e=v.prev;if(null==e.helper)throw new js._Boot.HaxeError("Fatal error (1): Polygon is not weakly-simple and clockwise");2==e.helper.type&&poly.add_diagonal(v,e.helper),zpp_nape.geom.ZPP_Monotone.edges.remove_node(e.node),e.helper=null;break;case 2:var e1=v.prev;if(null==e1.helper)throw new js._Boot.HaxeError("Fatal error (3): Polygon is not weakly-simple and clockwise");2==e1.helper.type&&poly.add_diagonal(v,e1.helper),zpp_nape.geom.ZPP_Monotone.edges.remove_node(e1.node),e1.helper=null;var ret=null;if(!zpp_nape.geom.ZPP_Monotone.edges.empty()){for(var set_ite=zpp_nape.geom.ZPP_Monotone.edges.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!zpp_nape.geom.ZPP_PartitionVertex.vert_lt(elt,v)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}var e2=ret;if(null!=e2){if(null==e2.helper)throw new js._Boot.HaxeError("Fatal error (4): Polygon is not weakly-simple and clockwise");2==e2.helper.type&&poly.add_diagonal(v,e2.helper),e2.helper=v}break;case 3:var ret1=null;if(!zpp_nape.geom.ZPP_Monotone.edges.empty()){for(var set_ite1=zpp_nape.geom.ZPP_Monotone.edges.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var elt1=set_ite1.data;if(!zpp_nape.geom.ZPP_PartitionVertex.vert_lt(elt1,v)){ret1=elt1;break}if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}var e3=ret1;if(null!=e3){if(null==e3.helper)throw new js._Boot.HaxeError("Fatal error (2): Polygon is not weakly-simple and clockwise");poly.add_diagonal(v,e3.helper),e3.helper=v}v.node=zpp_nape.geom.ZPP_Monotone.edges.insert(v),v.helper=v;break;case 4:var pre=v.prev;if(zpp_nape.geom.ZPP_Monotone.left_vertex(v)){if(null==pre.helper)throw new js._Boot.HaxeError("Fatal error (5): Polygon is not weakly-simple and clockwise");2==pre.helper.type&&poly.add_diagonal(v,pre.helper),zpp_nape.geom.ZPP_Monotone.edges.remove_node(pre.node),pre.helper=null,v.node=zpp_nape.geom.ZPP_Monotone.edges.insert(v),v.helper=v}else{var ret2=null;if(!zpp_nape.geom.ZPP_Monotone.edges.empty()){for(var set_ite2=zpp_nape.geom.ZPP_Monotone.edges.parent;null!=set_ite2.prev;)set_ite2=set_ite2.prev;for(;null!=set_ite2;){var elt2=set_ite2.data;if(!zpp_nape.geom.ZPP_PartitionVertex.vert_lt(elt2,v)){ret2=elt2;break}if(null!=set_ite2.next)for(set_ite2=set_ite2.next;null!=set_ite2.prev;)set_ite2=set_ite2.prev;else{for(;null!=set_ite2.parent&&set_ite2==set_ite2.parent.next;)set_ite2=set_ite2.parent;set_ite2=set_ite2.parent}}}var e4=ret2;if(null==e4||null==e4.helper)throw new js._Boot.HaxeError("Fatal error (6): Polygon is not weakly-simple and clockwise");2==e4.helper.type&&poly.add_diagonal(v,e4.helper),e4.helper=v}}}return poly},zpp_nape.geom.ZPP_Monotone.prototype.__class__=zpp_nape.geom.ZPP_Monotone,zpp_nape.geom.ZPP_PartitionVertex=$hxClasses["zpp_nape.geom.ZPP_PartitionVertex"]=function(){this.node=null,this.prev=null,this.next=null,this.rightchain=!1,this.helper=null,this.type=0,this.diagonals=null,this.forced=!1,this.y=0,this.x=0,this.mag=0,this.id=0,this.id=zpp_nape.geom.ZPP_PartitionVertex.nextId++,this.diagonals=new zpp_nape.util.ZNPList_ZPP_PartitionVertex},zpp_nape.geom.ZPP_PartitionVertex.__name__=["zpp_nape","geom","ZPP_PartitionVertex"],zpp_nape.geom.ZPP_PartitionVertex.get=function(x){var ret;return null==zpp_nape.geom.ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.geom.ZPP_PartitionVertex:(ret=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.x=x.x,ret.y=x.y,ret},zpp_nape.geom.ZPP_PartitionVertex.rightdistance=function(edge,vert){var flip=edge.next.y>edge.y,ux=0,uy=0;ux=edge.next.x-edge.x,uy=edge.next.y-edge.y;var vx=0,vy=0;return vx=vert.x-edge.x,(flip?-1:1)*((vy=vert.y-edge.y)*ux-vx*uy)},zpp_nape.geom.ZPP_PartitionVertex.vert_lt=function(edge,vert){if(vert==edge||vert==edge.next)return!0;if(edge.y==edge.next.y){var x=edge.x,y=edge.next.x;return(x<y?x:y)<=vert.x}return zpp_nape.geom.ZPP_PartitionVertex.rightdistance(edge,vert)<=0},zpp_nape.geom.ZPP_PartitionVertex.edge_swap=function(p,q){var t=p.node;p.node=q.node,q.node=t},zpp_nape.geom.ZPP_PartitionVertex.edge_lt=function(p,q){if(p==q&&p.next==q.next)return!1;if(p==q.next)return!zpp_nape.geom.ZPP_PartitionVertex.vert_lt(p,q);if(q==p.next)return zpp_nape.geom.ZPP_PartitionVertex.vert_lt(q,p);if(p.y==p.next.y){if(q.y==q.next.y){var x=p.x,y=p.next.x,x1=q.x,y1=q.next.x;return(x>y?x:y)>(x1>y1?x1:y1)}return zpp_nape.geom.ZPP_PartitionVertex.rightdistance(q,p)>0||zpp_nape.geom.ZPP_PartitionVertex.rightdistance(q,p.next)>0}var qRight=zpp_nape.geom.ZPP_PartitionVertex.rightdistance(p,q),qNextRight=zpp_nape.geom.ZPP_PartitionVertex.rightdistance(p,q.next);if(0==qRight&&0==qNextRight){var x2=p.x,y2=p.next.x,x3=q.x,y3=q.next.x;return(x2>y2?x2:y2)>(x3>y3?x3:y3)}if(qRight*qNextRight>=0)return qRight<0||qNextRight<0;var pRight=zpp_nape.geom.ZPP_PartitionVertex.rightdistance(q,p),pNextRight=zpp_nape.geom.ZPP_PartitionVertex.rightdistance(q,p.next);return pRight*pNextRight>=0&&(pRight>0||pNextRight>0)},zpp_nape.geom.ZPP_PartitionVertex.prototype.id=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.mag=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.x=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.y=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.forced=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.diagonals=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.type=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.helper=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.rightchain=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.next=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.prev=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.alloc=function(){},zpp_nape.geom.ZPP_PartitionVertex.prototype.free=function(){this.helper=null},zpp_nape.geom.ZPP_PartitionVertex.prototype.copy=function(){var ret;return null==zpp_nape.geom.ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.geom.ZPP_PartitionVertex:(ret=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.x=this.x,ret.y=this.y,ret.forced=this.forced,ret},zpp_nape.geom.ZPP_PartitionVertex.prototype.sort=function(){var ux=0,uy=0,vx=0,vy=0;ux=this.prev.x-this.x,uy=this.prev.y-this.y,vx=this.next.x-this.x;var ret=(vy=this.next.y-this.y)*ux-vx*uy,vorient=ret>0?-1:0==ret?0:1,xxlist=this.diagonals;if(null!=xxlist.head&&null!=xxlist.head.next){for(var head=xxlist.head,tail=null,left=null,right=null,nxt=null,listSize=1,numMerges,leftSize,rightSize;;){for(numMerges=0,left=head,tail=head=null;null!=left;){for(++numMerges,right=left,leftSize=0,rightSize=listSize;null!=right&&leftSize<listSize;)++leftSize,right=right.next;for(;leftSize>0||rightSize>0&&null!=right;){if(0==leftSize)nxt=right,right=right.next,--rightSize;else if(0==rightSize||null==right)nxt=left,left=left.next,--leftSize;else{var tmp;if(1==vorient){ux=left.elt.x-this.x,uy=left.elt.y-this.y,vx=right.elt.x-this.x;var ret1=(vy=right.elt.y-this.y)*ux-vx*uy;tmp=1==(ret1>0?-1:0==ret1?0:1)}else{ux=this.prev.x-this.x,uy=this.prev.y-this.y,vx=left.elt.x-this.x;var ret2=(vy=left.elt.y-this.y)*ux-vx*uy,d1=ret2>0?-1:0==ret2?0:1;ux=this.prev.x-this.x,uy=this.prev.y-this.y,vx=right.elt.x-this.x;var ret3=(vy=right.elt.y-this.y)*ux-vx*uy,d2=ret3>0?-1:0==ret3?0:1;if(d1*d2==1||d1*d2==0&&(1==d1||1==d2)){ux=left.elt.x-this.x,uy=left.elt.y-this.y,vx=right.elt.x-this.x;var ret4=(vy=right.elt.y-this.y)*ux-vx*uy;tmp=1==(ret4>0?-1:0==ret4?0:1)}else if(-1==d1||-1==d2)tmp=-1==d2;else if(0==d1&&0==d2){ux=this.x-this.prev.x,uy=this.y-this.prev.y;var d11=ux*(vx=left.elt.x-this.x)+uy*(vy=left.elt.y-this.y),d21=ux*(vx=right.elt.x-this.x)+uy*(vy=right.elt.y-this.y);tmp=d11<0&&d21>0||!(d21<0&&d11>0)}else tmp=!0}tmp?(nxt=left,left=left.next,--leftSize):(nxt=right,right=right.next,--rightSize)}null!=tail?tail.next=nxt:head=nxt,tail=nxt}left=right}if(tail.next=null,listSize<<=1,!(numMerges>1))break}xxlist.head=head,xxlist.modified=!0,xxlist.pushmod=!0}},zpp_nape.geom.ZPP_PartitionVertex.prototype.node=null,zpp_nape.geom.ZPP_PartitionVertex.prototype.__class__=zpp_nape.geom.ZPP_PartitionVertex,zpp_nape.geom.ZPP_PartitionedPoly=$hxClasses["zpp_nape.geom.ZPP_PartitionedPoly"]=function(P){this.next=null,this.vertices=null,this.init(P)},zpp_nape.geom.ZPP_PartitionedPoly.__name__=["zpp_nape","geom","ZPP_PartitionedPoly"],zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList=null,zpp_nape.geom.ZPP_PartitionedPoly.getSharedPP=function(){return null==zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList=new zpp_nape.util.ZNPList_ZPP_PartitionedPoly),zpp_nape.geom.ZPP_PartitionedPoly.sharedPPList},zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=null,zpp_nape.geom.ZPP_PartitionedPoly.getShared=function(){return null==zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList&&(zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList=new zpp_nape.util.ZNPList_ZPP_GeomVert),zpp_nape.geom.ZPP_PartitionedPoly.sharedGVList},zpp_nape.geom.ZPP_PartitionedPoly.prototype.vertices=null,zpp_nape.geom.ZPP_PartitionedPoly.prototype.eq=function(a,b){var dx=0,dy=0;return(dx=a.x-b.x)*dx+(dy=a.y-b.y)*dy<nape.Config.epsilon*nape.Config.epsilon},zpp_nape.geom.ZPP_PartitionedPoly.prototype.next=null,zpp_nape.geom.ZPP_PartitionedPoly.prototype.alloc=function(){},zpp_nape.geom.ZPP_PartitionedPoly.prototype.free=function(){},zpp_nape.geom.ZPP_PartitionedPoly.prototype.init=function(P){if(null!=P){var area=0,F=P,L=P;if(null!=P)for(var nite=P;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}for(var cw=.5*area>0,p=P;;){var tmp;if(cw){var ret;null==zpp_nape.geom.ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.geom.ZPP_PartitionVertex:(ret=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.x=p.x,ret.y=p.y;var obj=ret;null==this.vertices?this.vertices=obj.prev=obj.next=obj:(obj.prev=this.vertices,obj.next=this.vertices.next,this.vertices.next.prev=obj,this.vertices.next=obj),tmp=obj}else{var ret1;null==zpp_nape.geom.ZPP_PartitionVertex.zpp_pool?ret1=new zpp_nape.geom.ZPP_PartitionVertex:(ret1=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=ret1.next,ret1.next=null),ret1.x=p.x,ret1.y=p.y;var obj1=ret1;null==this.vertices?this.vertices=obj1.prev=obj1.next=obj1:(obj1.next=this.vertices,obj1.prev=this.vertices.prev,this.vertices.prev.next=obj1,this.vertices.prev=obj1),tmp=obj1}if(this.vertices=tmp,this.vertices.forced=p.forced,(p=p.next)==P)break}this.remove_collinear_vertices()}},zpp_nape.geom.ZPP_PartitionedPoly.prototype.remove_collinear_vertices=function(){for(var p=this.vertices,skip=!0,removed;skip||p!=this.vertices;)if(skip=!1,this.eq(p,p.next)){if(p==this.vertices&&(this.vertices=p.next,skip=!0),p.forced&&(p.next.forced=!0),null!=p&&p.prev==p){p.next=p.prev=null;var o=p;o.helper=null,o.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o,p=p=null}else{var retnodes=p.next;p.prev.next=p.next,p.next.prev=p.prev,p.next=p.prev=null;var o1=p;o1.helper=null,o1.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o1,p=null,p=retnodes}if(null==p){this.vertices=null;break}}else p=p.next;if(null==this.vertices)return!0;for(;;){for(removed=!1,p=this.vertices,skip=!0;skip||p!=this.vertices;){skip=!1;var pre=p.prev,ux=0,uy=0;ux=p.x-pre.x,uy=p.y-pre.y;var vx=0,vy=0;vx=p.next.x-p.x;var crs=(vy=p.next.y-p.y)*ux-vx*uy;if(crs*crs>=nape.Config.epsilon*nape.Config.epsilon)p=p.next;else{if(p==this.vertices&&(this.vertices=p.next,skip=!0),null!=p&&p.prev==p){p.next=p.prev=null;var o2=p;o2.helper=null,o2.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o2,p=p=null}else{var retnodes1=p.next;p.prev.next=p.next,p.next.prev=p.prev,p.next=p.prev=null;var o3=p;o3.helper=null,o3.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o3,p=null,p=retnodes1}if(removed=!0,null==p){removed=!1,this.vertices=null;break}}}if(!removed)break}return null==this.vertices},zpp_nape.geom.ZPP_PartitionedPoly.prototype.add_diagonal=function(p,q){p.diagonals.add(q),q.diagonals.add(p),p.forced=q.forced=!0},zpp_nape.geom.ZPP_PartitionedPoly.prototype.extract_partitions=function(ret){if(null==ret&&(ret=new zpp_nape.util.ZNPList_ZPP_PartitionedPoly),null!=this.vertices){var F=this.vertices,L=this.vertices;if(null!=F)for(var nite=F;;){var c;if(nite.sort(),(nite=nite.next)==L)break}for(this.pull_partitions(this.vertices,ret);null!=this.vertices;){var tmp;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o,tmp=this.vertices=null}else{var retnodes=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var o1=this.vertices;o1.helper=null,o1.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o1,this.vertices=null,tmp=retnodes}this.vertices=tmp}for(var pre=null,cx_ite=ret.head;null!=cx_ite;){var p;cx_ite.elt.remove_collinear_vertices()?ret.erase(pre):(pre=cx_ite,cx_ite=cx_ite.next)}}return ret},zpp_nape.geom.ZPP_PartitionedPoly.prototype.pull_partitions=function(start,ret){var poly;null==zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool?poly=new zpp_nape.geom.ZPP_PartitionedPoly:(poly=zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool,zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool=poly.next,poly.next=null);for(var next=start;;){var ret1;null==zpp_nape.geom.ZPP_PartitionVertex.zpp_pool?ret1=new zpp_nape.geom.ZPP_PartitionVertex:(ret1=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=ret1.next,ret1.next=null),ret1.x=next.x,ret1.y=next.y,ret1.forced=next.forced;var obj=ret1;if(null==poly.vertices?poly.vertices=obj.prev=obj.next=obj:(obj.prev=poly.vertices,obj.next=poly.vertices.next,poly.vertices.next.prev=obj,poly.vertices.next=obj),poly.vertices=obj,poly.vertices.forced=next.forced,null!=next.diagonals.head){var _this=next.diagonals,ret2=_this.head.elt,diag;if(_this.pop(),ret2==start)break;next=this.pull_partitions(next,ret)}else next=next.next;if(next==start)break}var area=0,F=poly.vertices,L=poly.vertices;if(null!=F)for(var nite=F;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}return.5*area!=0&&ret.add(poly),next},zpp_nape.geom.ZPP_PartitionedPoly.prototype.extract=function(ret){if(null==ret&&(ret=new zpp_nape.util.ZNPList_ZPP_GeomVert),null!=this.vertices){var F=this.vertices,L=this.vertices;if(null!=F)for(var nite=F;;){var c;if(nite.sort(),(nite=nite.next)==L)break}for(this.pull(this.vertices,ret);null!=this.vertices;){var tmp;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o,tmp=this.vertices=null}else{var retnodes=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var o1=this.vertices;o1.helper=null,o1.next=zpp_nape.geom.ZPP_PartitionVertex.zpp_pool,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=o1,this.vertices=null,tmp=retnodes}this.vertices=tmp}}return ret},zpp_nape.geom.ZPP_PartitionedPoly.prototype.pull=function(start,ret){for(var poly=null,next=start;;){var x=next.x,y=next.y,ret1;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x,ret1.y=y;var obj=ret1;if(null==poly?poly=obj.prev=obj.next=obj:(obj.prev=poly,obj.next=poly.next,poly.next.prev=obj,poly.next=obj),(poly=obj).forced=next.forced,null!=next.diagonals.head){var _this=next.diagonals,ret2=_this.head.elt,diag;if(_this.pop(),ret2==start)break;next=this.pull(next,ret)}else next=next.next;if(next==start)break}var area=0,F=poly,L=poly;if(null!=poly)for(var nite=poly;;){var v=nite;if(area+=v.x*(v.next.y-v.prev.y),(nite=nite.next)==L)break}var area1=.5*area;if(area1*area1>=nape.Config.epsilon*nape.Config.epsilon){for(var p=poly,skip=!0;skip||p!=poly;){skip=!1;var dx=0,dy=0;if((dx=p.x-p.next.x)*dx+(dy=p.y-p.next.y)*dy<nape.Config.epsilon*nape.Config.epsilon){if(p==poly&&(poly=p.next,skip=!0),p.forced&&(p.next.forced=!0),null!=p&&p.prev==p)p.next=p.prev=null,p=p=null;else{var retnodes=p.next;p.prev.next=p.next,p.next.prev=p.prev,p.next=p.prev=null,p=null,p=retnodes}if(null==p){poly=null;break}}else p=p.next}if(null!=poly)for(var removed;;){for(removed=!1,p=poly,skip=!0;skip||p!=poly;){skip=!1;var pre=p.prev,ux=0,uy=0;ux=p.x-pre.x,uy=p.y-pre.y;var vx=0,vy=0;vx=p.next.x-p.x;var crs=(vy=p.next.y-p.y)*ux-vx*uy;if(crs*crs>=nape.Config.epsilon*nape.Config.epsilon)p=p.next;else{if(p==poly&&(poly=p.next,skip=!0),null!=p&&p.prev==p)p.next=p.prev=null,p=p=null;else{var retnodes1=p.next;p.prev.next=p.next,p.next.prev=p.prev,p.next=p.prev=null,p=null,p=retnodes1}if(removed=!0,null==p){removed=!1,poly=null;break}}}if(!removed)break}null!=poly&&ret.add(poly)}return next},zpp_nape.geom.ZPP_PartitionedPoly.prototype.__class__=zpp_nape.geom.ZPP_PartitionedPoly,zpp_nape.geom.ZPP_Ray=$hxClasses["zpp_nape.geom.ZPP_Ray"]=function(){var ret,ret2;if(this.zip_dir=!1,this.absnormaly=0,this.absnormalx=0,this.normaly=0,this.normalx=0,this.idiry=0,this.idirx=0,this.diry=0,this.dirx=0,this.originy=0,this.originx=0,this.userData=null,this.maxdist=0,this.direction=null,this.origin=null,null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=0,ret1.y=0,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),0==ret.zpp_inner.x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=0==ret.zpp_inner.y}else tmp=!1;if(!tmp){ret.zpp_inner.x=0,ret.zpp_inner.y=0;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}if(ret.zpp_inner.weak=!1,this.origin=ret,this.origin.zpp_inner._invalidate=$bind(this,this.origin_invalidate),null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=0,ret3.y=0,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret2.zpp_inner,tmp1;if(_this4._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this4._isimmutable&&_this4._isimmutable(),null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret2.zpp_inner;if(null!=_this5._validate&&_this5._validate(),0==ret2.zpp_inner.x){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret2.zpp_inner;null!=_this6._validate&&_this6._validate(),tmp1=0==ret2.zpp_inner.y}else tmp1=!1;if(!tmp1){ret2.zpp_inner.x=0,ret2.zpp_inner.y=0;var _this7=ret2.zpp_inner;null!=_this7._invalidate&&_this7._invalidate(_this7)}}ret2.zpp_inner.weak=!1,this.direction=ret2,this.direction.zpp_inner._invalidate=$bind(this,this.direction_invalidate),this.originx=0,this.originy=0,this.dirx=0,this.diry=0,this.zip_dir=!1},zpp_nape.geom.ZPP_Ray.__name__=["zpp_nape","geom","ZPP_Ray"],zpp_nape.geom.ZPP_Ray.prototype.origin=null,zpp_nape.geom.ZPP_Ray.prototype.direction=null,zpp_nape.geom.ZPP_Ray.prototype.maxdist=null,zpp_nape.geom.ZPP_Ray.prototype.userData=null,zpp_nape.geom.ZPP_Ray.prototype.originx=null,zpp_nape.geom.ZPP_Ray.prototype.originy=null,zpp_nape.geom.ZPP_Ray.prototype.dirx=null,zpp_nape.geom.ZPP_Ray.prototype.diry=null,zpp_nape.geom.ZPP_Ray.prototype.idirx=null,zpp_nape.geom.ZPP_Ray.prototype.idiry=null,zpp_nape.geom.ZPP_Ray.prototype.normalx=null,zpp_nape.geom.ZPP_Ray.prototype.normaly=null,zpp_nape.geom.ZPP_Ray.prototype.absnormalx=null,zpp_nape.geom.ZPP_Ray.prototype.absnormaly=null,zpp_nape.geom.ZPP_Ray.prototype.origin_invalidate=function(x){this.originx=x.x,this.originy=x.y},zpp_nape.geom.ZPP_Ray.prototype.direction_invalidate=function(x){this.dirx=x.x,this.diry=x.y,this.zip_dir=!0},zpp_nape.geom.ZPP_Ray.prototype.zip_dir=null,zpp_nape.geom.ZPP_Ray.prototype.invalidate_dir=function(){this.zip_dir=!0},zpp_nape.geom.ZPP_Ray.prototype.validate_dir=function(){if(this.zip_dir){if(this.zip_dir=!1,this.dirx*this.dirx+this.diry*this.diry<nape.Config.epsilon)throw new js._Boot.HaxeError("Error: Ray::direction is degenerate");var d=this.dirx*this.dirx+this.diry*this.diry,imag,t=1/Math.sqrt(d);this.dirx*=t,this.diry*=t,this.idirx=1/this.dirx,this.idiry=1/this.diry,this.normalx=-this.diry,this.normaly=this.dirx;var x=this.normalx;this.absnormalx=x<0?-x:x;var x1=this.normaly;this.absnormaly=x1<0?-x1:x1}},zpp_nape.geom.ZPP_Ray.prototype.rayAABB=function(){var x0=this.originx,x1=x0,y0=this.originy,y1=y0,ret,rayab;if(this.maxdist>=1/0?(this.dirx>0?x1=1/0:this.dirx<0&&(x1=-1/0),this.diry>0?y1=1/0:this.diry<0&&(y1=-1/0)):(x1+=this.maxdist*this.dirx,y1+=this.maxdist*this.diry),x1<x0){var t=x0;x0=x1,x1=t}if(y1<y0){var t1=y0;y0=y1,y1=t1}return null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=x0,ret.miny=y0,ret.maxx=x1,ret.maxy=y1,ret},zpp_nape.geom.ZPP_Ray.prototype.aabbtest=function(a){var dot1=this.normalx*(this.originx-.5*(a.minx+a.maxx))+this.normaly*(this.originy-.5*(a.miny+a.maxy)),dot2,x=dot1;return(dot1<0?-dot1:dot1)<.5*this.absnormalx*(a.maxx-a.minx)+.5*this.absnormaly*(a.maxy-a.miny)},zpp_nape.geom.ZPP_Ray.prototype.aabbsect=function(a){var cx=this.originx>=a.minx&&this.originx<=a.maxx,cy=this.originy>=a.miny&&this.originy<=a.maxy;if(cx&&cy)return 0;for(var ret=-1;!(this.dirx>=0&&this.originx>=a.maxx||this.dirx<=0&&this.originx<=a.minx||this.diry>=0&&this.originy>=a.maxy||this.diry<=0&&this.originy<=a.miny);){if(this.dirx>0){var t=(a.minx-this.originx)*this.idirx;if(t>=0&&t<=this.maxdist){var y=this.originy+t*this.diry;if(y>=a.miny&&y<=a.maxy){ret=t;break}}}else if(this.dirx<0){var t1=(a.maxx-this.originx)*this.idirx;if(t1>=0&&t1<=this.maxdist){var y1=this.originy+t1*this.diry;if(y1>=a.miny&&y1<=a.maxy){ret=t1;break}}}if(this.diry>0){var t2=(a.miny-this.originy)*this.idiry;if(t2>=0&&t2<=this.maxdist){var x=this.originx+t2*this.dirx;if(x>=a.minx&&x<=a.maxx){ret=t2;break}}}else if(this.diry<0){var t3=(a.maxy-this.originy)*this.idiry;if(t3>=0&&t3<=this.maxdist){var x1=this.originx+t3*this.dirx;if(x1>=a.minx&&x1<=a.maxx){ret=t3;break}}}break}return ret},zpp_nape.geom.ZPP_Ray.prototype.circlesect=function(c,inner,mint){if(c.zip_worldCOM&&null!=c.body){if(c.zip_worldCOM=!1,c.zip_localCOM){if(c.zip_localCOM=!1,1==c.type){var _this=c.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=c.wrap_localCOM&&(c.wrap_localCOM.zpp_inner.x=c.localCOMx,c.wrap_localCOM.zpp_inner.y=c.localCOMy)}var _this1=c.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),c.worldCOMx=c.body.posx+(c.body.axisy*c.localCOMx-c.body.axisx*c.localCOMy),c.worldCOMy=c.body.posy+(c.localCOMx*c.body.axisx+c.localCOMy*c.body.axisy)}var acx=0,acy=0;acx=this.originx-c.worldCOMx,acy=this.originy-c.worldCOMy;var A=this.dirx*this.dirx+this.diry*this.diry,B=2*(acx*this.dirx+acy*this.diry),C=acx*acx+acy*acy-c.radius*c.radius,det=B*B-4*A*C;if(0==det){var t3=-B/2*A;if((!inner||C>0)&&t3>0&&t3<mint&&t3<=this.maxdist){var nx=0,ny=0;nx=this.originx,ny=this.originy;var t4=t3;nx+=this.dirx*t4,ny+=this.diry*t4;var t5=1,d=(nx-=1*c.worldCOMx)*nx+(ny-=1*c.worldCOMy)*ny,imag=1/Math.sqrt(d),t6=imag;nx*=imag,ny*=imag,C<=0&&(nx=-nx,ny=-ny);var x=nx,y=ny,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,tmp;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}return ret.zpp_inner.weak=!1,zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret,t3,C<=0,c.outer)}return null}var t0=(-B-(det=Math.sqrt(det)))*(A=1/(2*A)),t11=(-B+det)*A;if(t0>0){if(t0<mint&&t0<=this.maxdist){var nx1=0,ny1=0;nx1=this.originx,ny1=this.originy;var t7=t0;nx1+=this.dirx*t7,ny1+=this.diry*t7;var t8=1,d1=(nx1-=1*c.worldCOMx)*nx1+(ny1-=1*c.worldCOMy)*ny1,imag1=1/Math.sqrt(d1),t9=imag1,x1=nx1*=imag1,y1=ny1*=imag1,ret2;if(null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=x1,ret3.y=y1,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret2.zpp_inner,tmp1;if(_this6._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this6._isimmutable&&_this6._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret2.zpp_inner;if(null!=_this7._validate&&_this7._validate(),ret2.zpp_inner.x==x1){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret2.zpp_inner;null!=_this8._validate&&_this8._validate(),tmp1=ret2.zpp_inner.y==y1}else tmp1=!1;if(!tmp1){ret2.zpp_inner.x=x1,ret2.zpp_inner.y=y1;var _this9=ret2.zpp_inner;null!=_this9._invalidate&&_this9._invalidate(_this9)}}return ret2.zpp_inner.weak=!1,zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret2,t0,!1,c.outer)}return null}if(t11>0&&inner){if(t11<mint&&t11<=this.maxdist){var nx2=0,ny2=0;nx2=this.originx,ny2=this.originy;var t10=t11;nx2+=this.dirx*t10,ny2+=this.diry*t10;var t12=1,d2=(nx2-=1*c.worldCOMx)*nx2+(ny2-=1*c.worldCOMy)*ny2,imag2=1/Math.sqrt(d2),t13=imag2,x2=nx2=-(nx2*=imag2),y2=ny2=-(ny2*=imag2),ret4;if(null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret4=new nape.geom.Vec2:(ret4=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret4.zpp_pool,ret4.zpp_pool=null,ret4.zpp_disp=!1,ret4==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret4.zpp_inner){var ret5;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret5=new zpp_nape.geom.ZPP_Vec2:(ret5=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret5.next,ret5.next=null),ret5.weak=!1,ret5._immutable=!1,ret5.x=x2,ret5.y=y2,ret4.zpp_inner=ret5,ret4.zpp_inner.outer=ret4}else{if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret4.zpp_inner,tmp2;if(_this10._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this10._isimmutable&&_this10._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=ret4.zpp_inner;if(null!=_this11._validate&&_this11._validate(),ret4.zpp_inner.x==x2){if(null!=ret4&&ret4.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret4.zpp_inner;null!=_this12._validate&&_this12._validate(),tmp2=ret4.zpp_inner.y==y2}else tmp2=!1;if(!tmp2){ret4.zpp_inner.x=x2,ret4.zpp_inner.y=y2;var _this13=ret4.zpp_inner;null!=_this13._invalidate&&_this13._invalidate(_this13)}}return ret4.zpp_inner.weak=!1,zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret4,t11,!0,c.outer)}return null}return null},zpp_nape.geom.ZPP_Ray.prototype.circlesect2=function(c,inner,list){if(c.zip_worldCOM&&null!=c.body){if(c.zip_worldCOM=!1,c.zip_localCOM){if(c.zip_localCOM=!1,1==c.type){var _this=c.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=c.wrap_localCOM&&(c.wrap_localCOM.zpp_inner.x=c.localCOMx,c.wrap_localCOM.zpp_inner.y=c.localCOMy)}var _this1=c.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),c.worldCOMx=c.body.posx+(c.body.axisy*c.localCOMx-c.body.axisx*c.localCOMy),c.worldCOMy=c.body.posy+(c.localCOMx*c.body.axisx+c.localCOMy*c.body.axisy)}var acx=0,acy=0;acx=this.originx-c.worldCOMx,acy=this.originy-c.worldCOMy;var A=this.dirx*this.dirx+this.diry*this.diry,B=2*(acx*this.dirx+acy*this.diry),C=acx*acx+acy*acy-c.radius*c.radius,det=B*B-4*A*C;if(0==det){var t3=-B/2*A;if((!inner||C>0)&&t3>0&&t3<=this.maxdist){var nx=0,ny=0;nx=this.originx,ny=this.originy;var t4=t3;nx+=this.dirx*t4,ny+=this.diry*t4;var t5=1,d=(nx-=1*c.worldCOMx)*nx+(ny-=1*c.worldCOMy)*ny,imag=1/Math.sqrt(d),t6=imag;nx*=imag,ny*=imag,C<=0&&(nx=-nx,ny=-ny);var x=nx,y=ny,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner,res;if(_this2._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this2._isimmutable&&_this2._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;if(null!=_this3._validate&&_this3._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this4=ret.zpp_inner;null!=_this4._validate&&_this4._validate(),res=ret.zpp_inner.y==y}else res=!1;if(!res){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this5=ret.zpp_inner;null!=_this5._invalidate&&_this5._invalidate(_this5)}}ret.zpp_inner.weak=!1;for(var res1=zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret,t3,C<=0,c.outer),pre=null,cx_ite1=list.zpp_inner.inner.head;null!=cx_ite1;){var j=cx_ite1.elt;if(null!=res1.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(res1.zpp_inner.toiDistance<j.zpp_inner.toiDistance)break;pre=cx_ite1,cx_ite1=cx_ite1.next}var _this6=list.zpp_inner.inner,ret2;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret2=new zpp_nape.util.ZNPNode_RayResult:(ret2=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret2.next,ret2.next=null),ret2.elt=res1;var temp=ret2;null==pre?(temp.next=_this6.head,_this6.head=temp):(temp.next=pre.next,pre.next=temp),_this6.pushmod=_this6.modified=!0,_this6.length++}}else{var t0=(-B-(det=Math.sqrt(det)))*(A=1/(2*A)),t11=(-B+det)*A;if(t0>0&&t0<=this.maxdist){var nx1=0,ny1=0;nx1=this.originx,ny1=this.originy;var t7=t0;nx1+=this.dirx*t7,ny1+=this.diry*t7;var t8=1,d1=(nx1-=1*c.worldCOMx)*nx1+(ny1-=1*c.worldCOMy)*ny1,imag1=1/Math.sqrt(d1),t9=imag1,x1=nx1*=imag1,y1=ny1*=imag1,ret3;if(null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret3=new nape.geom.Vec2:(ret3=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret3.zpp_pool,ret3.zpp_pool=null,ret3.zpp_disp=!1,ret3==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret3.zpp_inner){var ret4;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret4=new zpp_nape.geom.ZPP_Vec2:(ret4=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret4.next,ret4.next=null),ret4.weak=!1,ret4._immutable=!1,ret4.x=x1,ret4.y=y1,ret3.zpp_inner=ret4,ret3.zpp_inner.outer=ret3}else{if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret3.zpp_inner,res2;if(_this7._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this7._isimmutable&&_this7._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this8=ret3.zpp_inner;if(null!=_this8._validate&&_this8._validate(),ret3.zpp_inner.x==x1){if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=ret3.zpp_inner;null!=_this9._validate&&_this9._validate(),res2=ret3.zpp_inner.y==y1}else res2=!1;if(!res2){ret3.zpp_inner.x=x1,ret3.zpp_inner.y=y1;var _this10=ret3.zpp_inner;null!=_this10._invalidate&&_this10._invalidate(_this10)}}ret3.zpp_inner.weak=!1;for(var res3=zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret3,t0,!1,c.outer),pre1=null,cx_ite2=list.zpp_inner.inner.head;null!=cx_ite2;){var j1=cx_ite2.elt;if(null!=res3.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j1.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(res3.zpp_inner.toiDistance<j1.zpp_inner.toiDistance)break;pre1=cx_ite2,cx_ite2=cx_ite2.next}var _this11=list.zpp_inner.inner,ret5;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret5=new zpp_nape.util.ZNPNode_RayResult:(ret5=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret5.next,ret5.next=null),ret5.elt=res3;var temp1=ret5;null==pre1?(temp1.next=_this11.head,_this11.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this11.pushmod=_this11.modified=!0,_this11.length++}if(t11>0&&t11<=this.maxdist&&inner){var nx2=0,ny2=0;nx2=this.originx,ny2=this.originy;var t10=t11;nx2+=this.dirx*t10,ny2+=this.diry*t10;var t12=1,d2=(nx2-=1*c.worldCOMx)*nx2+(ny2-=1*c.worldCOMy)*ny2,imag2=1/Math.sqrt(d2),t13=imag2,x2=nx2=-(nx2*=imag2),y2=ny2=-(ny2*=imag2),ret6;if(null==y2&&(y2=0),null==x2&&(x2=0),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret6=new nape.geom.Vec2:(ret6=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret6.zpp_pool,ret6.zpp_pool=null,ret6.zpp_disp=!1,ret6==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret6.zpp_inner){var ret7;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret7=new zpp_nape.geom.ZPP_Vec2:(ret7=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret7.next,ret7.next=null),ret7.weak=!1,ret7._immutable=!1,ret7.x=x2,ret7.y=y2,ret6.zpp_inner=ret7,ret6.zpp_inner.outer=ret6}else{if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this12=ret6.zpp_inner,res4;if(_this12._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this12._isimmutable&&_this12._isimmutable(),x2!=x2||y2!=y2)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret6.zpp_inner;if(null!=_this13._validate&&_this13._validate(),ret6.zpp_inner.x==x2){if(null!=ret6&&ret6.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret6.zpp_inner;null!=_this14._validate&&_this14._validate(),res4=ret6.zpp_inner.y==y2}else res4=!1;if(!res4){ret6.zpp_inner.x=x2,ret6.zpp_inner.y=y2;var _this15=ret6.zpp_inner;null!=_this15._invalidate&&_this15._invalidate(_this15)}}ret6.zpp_inner.weak=!1;for(var res5=zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret6,t11,!0,c.outer),pre2=null,cx_ite3=list.zpp_inner.inner.head;null!=cx_ite3;){var j2=cx_ite3.elt;if(null!=res5.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j2.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(res5.zpp_inner.toiDistance<j2.zpp_inner.toiDistance)break;pre2=cx_ite3,cx_ite3=cx_ite3.next}var _this16=list.zpp_inner.inner,ret8;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret8=new zpp_nape.util.ZNPNode_RayResult:(ret8=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret8.next,ret8.next=null),ret8.elt=res5;var temp2=ret8;null==pre2?(temp2.next=_this16.head,_this16.head=temp2):(temp2.next=pre2.next,pre2.next=temp2),_this16.pushmod=_this16.modified=!0,_this16.length++}}},zpp_nape.geom.ZPP_Ray.prototype.polysect=function(p,inner,mint){for(var min=mint,edge=null,ei=p.edges.head,cx_cont=!0,cx_itei=p.gverts.next,u=cx_itei,cx_itej=cx_itei.next;null!=cx_itej;){var v=cx_itej,e=ei.elt;if(inner||e.gnormx*this.dirx+e.gnormy*this.diry<0){var _vx=0,_vy=0;_vx=v.x-u.x,_vy=v.y-u.y;var _sx=0,_sy=0;_sx=u.x-this.originx,_sy=u.y-this.originy;var den=_vy*this.dirx-_vx*this.diry;if(den*den>nape.Config.epsilon){var sxx=(_vy*_sx-_vx*_sy)*(den=1/den);if(sxx>0&&sxx<min&&sxx<=this.maxdist){var txx=(this.diry*_sx-this.dirx*_sy)*den;txx>-nape.Config.epsilon&&txx<1+nape.Config.epsilon&&(min=sxx,edge=ei.elt)}}}ei=ei.next,cx_itei=cx_itej,u=v,cx_itej=cx_itej.next}for(1;;){var v1=cx_itej=p.gverts.next,e1=ei.elt;if(inner||e1.gnormx*this.dirx+e1.gnormy*this.diry<0){var _vx1=0,_vy1=0;_vx1=v1.x-u.x,_vy1=v1.y-u.y;var _sx1=0,_sy1=0;_sx1=u.x-this.originx,_sy1=u.y-this.originy;var den1=_vy1*this.dirx-_vx1*this.diry;if(den1*den1>nape.Config.epsilon){var sxx1=(_vy1*_sx1-_vx1*_sy1)*(den1=1/den1);if(sxx1>0&&sxx1<min&&sxx1<=this.maxdist){var txx1=(this.diry*_sx1-this.dirx*_sy1)*den1;txx1>-nape.Config.epsilon&&txx1<1+nape.Config.epsilon&&(min=sxx1,edge=ei.elt)}}}ei=ei.next;break}if(null!=edge){var nx=0,ny=0;nx=edge.gnormx,ny=edge.gnormy;var inner1=nx*this.dirx+ny*this.diry>0;inner1&&(nx=-nx,ny=-ny);var x=nx,y=ny,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}return ret.zpp_inner.weak=!1,zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret,min,inner1,p.outer)}return null},zpp_nape.geom.ZPP_Ray.prototype.polysect2=function(p,inner,list){for(var min=1/0,max=-1,edge=null,edgemax=null,ei=p.edges.head,cx_cont=!0,cx_itei=p.gverts.next,u=cx_itei,cx_itej=cx_itei.next;null!=cx_itej;){var v=cx_itej,e=ei.elt;if(inner||e.gnormx*this.dirx+e.gnormy*this.diry<0){var _vx=0,_vy=0;_vx=v.x-u.x,_vy=v.y-u.y;var _sx=0,_sy=0;_sx=u.x-this.originx,_sy=u.y-this.originy;var den=_vy*this.dirx-_vx*this.diry;if(den*den>nape.Config.epsilon){var sxx=(_vy*_sx-_vx*_sy)*(den=1/den);if(sxx>0&&sxx<=this.maxdist&&(sxx<min||sxx>max)){var txx=(this.diry*_sx-this.dirx*_sy)*den;txx>-nape.Config.epsilon&&txx<1+nape.Config.epsilon&&(sxx<min&&(min=sxx,edge=ei.elt),sxx>max&&(max=sxx,edgemax=ei.elt))}}}ei=ei.next,cx_itei=cx_itej,u=v,cx_itej=cx_itej.next}for(1;;){var v1=cx_itej=p.gverts.next,e1=ei.elt;if(inner||e1.gnormx*this.dirx+e1.gnormy*this.diry<0){var _vx1=0,_vy1=0;_vx1=v1.x-u.x,_vy1=v1.y-u.y;var _sx1=0,_sy1=0;_sx1=u.x-this.originx,_sy1=u.y-this.originy;var den1=_vy1*this.dirx-_vx1*this.diry;if(den1*den1>nape.Config.epsilon){var sxx1=(_vy1*_sx1-_vx1*_sy1)*(den1=1/den1);if(sxx1>0&&sxx1<=this.maxdist&&(sxx1<min||sxx1>max)){var txx1=(this.diry*_sx1-this.dirx*_sy1)*den1;txx1>-nape.Config.epsilon&&txx1<1+nape.Config.epsilon&&(sxx1<min&&(min=sxx1,edge=ei.elt),sxx1>max&&(max=sxx1,edgemax=ei.elt))}}}ei=ei.next;break}if(null!=edge){var nx=0,ny=0;nx=edge.gnormx,ny=edge.gnormy;var inner1=nx*this.dirx+ny*this.diry>0;inner1&&(nx=-nx,ny=-ny);var x=nx,y=ny,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,ret2;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),ret2=ret.zpp_inner.y==y}else ret2=!1;if(!ret2){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1;for(var ret3=zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret,min,inner1,p.outer),pre=null,cx_ite=list.zpp_inner.inner.head;null!=cx_ite;){var j=cx_ite.elt;if(null!=ret3.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(ret3.zpp_inner.toiDistance<j.zpp_inner.toiDistance)break;pre=cx_ite,cx_ite=cx_ite.next}var _this4=list.zpp_inner.inner,ret4;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret4=new zpp_nape.util.ZNPNode_RayResult:(ret4=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret4.next,ret4.next=null),ret4.elt=ret3;var temp=ret4;null==pre?(temp.next=_this4.head,_this4.head=temp):(temp.next=pre.next,pre.next=temp),_this4.pushmod=_this4.modified=!0,_this4.length++}if(null!=edgemax&&edge!=edgemax){var nx1=0,ny1=0;nx1=edgemax.gnormx,ny1=edgemax.gnormy;var inner2=nx1*this.dirx+ny1*this.diry>0;inner2&&(nx1=-nx1,ny1=-ny1);var x1=nx1,y1=ny1,ret5;if(null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret5=new nape.geom.Vec2:(ret5=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret5.zpp_pool,ret5.zpp_pool=null,ret5.zpp_disp=!1,ret5==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret5.zpp_inner){var ret6;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret6=new zpp_nape.geom.ZPP_Vec2:(ret6=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret6.next,ret6.next=null),ret6.weak=!1,ret6._immutable=!1,ret6.x=x1,ret6.y=y1,ret5.zpp_inner=ret6,ret5.zpp_inner.outer=ret5}else{if(null!=ret5&&ret5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this5=ret5.zpp_inner,ret7;if(_this5._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this5._isimmutable&&_this5._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret5&&ret5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this6=ret5.zpp_inner;if(null!=_this6._validate&&_this6._validate(),ret5.zpp_inner.x==x1){if(null!=ret5&&ret5.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this7=ret5.zpp_inner;null!=_this7._validate&&_this7._validate(),ret7=ret5.zpp_inner.y==y1}else ret7=!1;if(!ret7){ret5.zpp_inner.x=x1,ret5.zpp_inner.y=y1;var _this8=ret5.zpp_inner;null!=_this8._invalidate&&_this8._invalidate(_this8)}}ret5.zpp_inner.weak=!1;for(var ret8=zpp_nape.geom.ZPP_ConvexRayResult.getRay(ret5,max,inner2,p.outer),pre1=null,cx_ite1=list.zpp_inner.inner.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(null!=ret8.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j1.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(ret8.zpp_inner.toiDistance<j1.zpp_inner.toiDistance)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this9=list.zpp_inner.inner,ret9;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret9=new zpp_nape.util.ZNPNode_RayResult:(ret9=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret9.next,ret9.next=null),ret9.elt=ret8;var temp1=ret9;null==pre1?(temp1.next=_this9.head,_this9.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this9.pushmod=_this9.modified=!0,_this9.length++}},zpp_nape.geom.ZPP_Ray.prototype.__class__=zpp_nape.geom.ZPP_Ray,zpp_nape.geom.ZPP_SimpleVert=$hxClasses["zpp_nape.geom.ZPP_SimpleVert"]=function(){this.node=null,this.next=null,this.id=0,this.links=null,this.y=0,this.x=0,this.forced=!1,this.id=zpp_nape.ZPP_ID.ZPP_SimpleVert(),null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?this.links=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(this.links=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=this.links.next,this.links.next=null),this.links.lt=zpp_nape.geom.ZPP_SimpleVert.less_xy},zpp_nape.geom.ZPP_SimpleVert.__name__=["zpp_nape","geom","ZPP_SimpleVert"],zpp_nape.geom.ZPP_SimpleVert.less_xy=function(p,q){return p.y<q.y||p.y==q.y&&p.x<q.x},zpp_nape.geom.ZPP_SimpleVert.swap_nodes=function(p,q){var t=p.node;p.node=q.node,q.node=t},zpp_nape.geom.ZPP_SimpleVert.get=function(x,y){var ret;return null==zpp_nape.geom.ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleVert:(ret=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.x=x,ret.y=y,ret},zpp_nape.geom.ZPP_SimpleVert.prototype.forced=null,zpp_nape.geom.ZPP_SimpleVert.prototype.x=null,zpp_nape.geom.ZPP_SimpleVert.prototype.y=null,zpp_nape.geom.ZPP_SimpleVert.prototype.links=null,zpp_nape.geom.ZPP_SimpleVert.prototype.id=null,zpp_nape.geom.ZPP_SimpleVert.prototype.next=null,zpp_nape.geom.ZPP_SimpleVert.prototype.node=null,zpp_nape.geom.ZPP_SimpleVert.prototype.free=function(){this.links.clear(),this.node=null,this.forced=!1},zpp_nape.geom.ZPP_SimpleVert.prototype.alloc=function(){},zpp_nape.geom.ZPP_SimpleVert.prototype.__class__=zpp_nape.geom.ZPP_SimpleVert,zpp_nape.geom.ZPP_SimpleSeg=$hxClasses["zpp_nape.geom.ZPP_SimpleSeg"]=function(){this.node=null,this.prev=null,this.next=null,this.id=0,this.vertices=null,this.right=null,this.left=null,this.id=zpp_nape.ZPP_ID.ZPP_SimpleSeg(),null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?this.vertices=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(this.vertices=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=this.vertices.next,this.vertices.next=null),this.vertices.lt=$bind(this,this.less_xy)},zpp_nape.geom.ZPP_SimpleSeg.__name__=["zpp_nape","geom","ZPP_SimpleSeg"],zpp_nape.geom.ZPP_SimpleSeg.get=function(left,right){var ret;return null==zpp_nape.geom.ZPP_SimpleSeg.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleSeg:(ret=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=ret.next,ret.next=null),ret.left=left,ret.right=right,ret.vertices.insert(left),ret.vertices.insert(right),ret},zpp_nape.geom.ZPP_SimpleSeg.prototype.left=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.right=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.vertices=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.id=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.next=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.free=function(){this.left=this.right=null,this.prev=null,this.node=null,this.vertices.clear()},zpp_nape.geom.ZPP_SimpleSeg.prototype.alloc=function(){},zpp_nape.geom.ZPP_SimpleSeg.prototype.prev=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.node=null,zpp_nape.geom.ZPP_SimpleSeg.prototype.less_xy=function(a,b){return a.x<b.x||a.x==b.x&&a.y<b.y},zpp_nape.geom.ZPP_SimpleSeg.prototype.__class__=zpp_nape.geom.ZPP_SimpleSeg,zpp_nape.geom.ZPP_SimpleEvent=$hxClasses["zpp_nape.geom.ZPP_SimpleEvent"]=function(){this.next=null,this.node=null,this.segment2=null,this.segment=null,this.vertex=null,this.type=0},zpp_nape.geom.ZPP_SimpleEvent.__name__=["zpp_nape","geom","ZPP_SimpleEvent"],zpp_nape.geom.ZPP_SimpleEvent.swap_nodes=function(a,b){var t=a.node;a.node=b.node,b.node=t},zpp_nape.geom.ZPP_SimpleEvent.less_xy=function(a,b){return a.vertex.x<b.vertex.x||!(a.vertex.x>b.vertex.x)&&(a.vertex.y<b.vertex.y||!(a.vertex.y>b.vertex.y)&&a.type<b.type)},zpp_nape.geom.ZPP_SimpleEvent.get=function(v){var ret;return null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleEvent:(ret=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret.next,ret.next=null),ret.vertex=v,ret},zpp_nape.geom.ZPP_SimpleEvent.prototype.type=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.vertex=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.segment=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.segment2=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.node=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.next=null,zpp_nape.geom.ZPP_SimpleEvent.prototype.free=function(){this.vertex=null,this.segment=this.segment2=null,this.node=null},zpp_nape.geom.ZPP_SimpleEvent.prototype.alloc=function(){},zpp_nape.geom.ZPP_SimpleEvent.prototype.__class__=zpp_nape.geom.ZPP_SimpleEvent,zpp_nape.geom.ZPP_SimpleSweep=$hxClasses["zpp_nape.geom.ZPP_SimpleSweep"]=function(){this.tree=null,this.sweepx=0,null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?this.tree=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(this.tree=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=this.tree.next,this.tree.next=null),this.tree.lt=$bind(this,this.edge_lt),this.tree.swapped=$bind(this,this.swap_nodes)},zpp_nape.geom.ZPP_SimpleSweep.__name__=["zpp_nape","geom","ZPP_SimpleSweep"],zpp_nape.geom.ZPP_SimpleSweep.prototype.sweepx=null,zpp_nape.geom.ZPP_SimpleSweep.prototype.tree=null,zpp_nape.geom.ZPP_SimpleSweep.prototype.swap_nodes=function(p,q){var t=p.node;p.node=q.node,q.node=t},zpp_nape.geom.ZPP_SimpleSweep.prototype.edge_lt=function(p,q){var ux=0,uy=0,vx=0,vy=0,flip,tmp;if(p.left==q.left&&p.right==q.right)return!1;if(p.left==q.right)return p.left.x==p.right.x?p.left.y<p.right.y?p.left.y>q.left.y:p.right.y>q.left.y:(flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.left.x-p.left.x,vy=q.left.y-p.left.y,(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0);if(p.right==q.left)return q.left.x==q.right.x?tmp=q.left.y<q.right.y?q.left.y>p.left.y:q.right.y>p.left.y:(flip=q.right.x<q.left.x,ux=q.right.x-q.left.x,uy=q.right.y-q.left.y,vx=p.left.x-q.left.x,vy=p.left.y-q.left.y,tmp=(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0),!tmp;if(p.left==q.left)return p.left.x==p.right.x?p.left.y<p.right.y?p.left.y>q.right.y:p.right.y>q.right.y:(flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.right.x-p.left.x,vy=q.right.y-p.left.y,(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0);if(p.right==q.right)return p.left.x==p.right.x?p.left.y<p.right.y?p.left.y>q.left.y:p.right.y>q.left.y:(flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.left.x-p.left.x,vy=q.left.y-p.left.y,(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0);if(p.left.x==p.right.x){if(q.left.x==q.right.x){var pmax=p.left.y<p.right.y?p.right:p.left,qmax=q.left.y<q.right.y?q.right:q.left;return pmax.y>qmax.y}flip=q.right.x<q.left.x,ux=q.right.x-q.left.x,uy=q.right.y-q.left.y,vx=p.left.x-q.left.x,vy=p.left.y-q.left.y;var plrg=flip?uy*vx-ux*vy:vy*ux-vx*uy,aplrg;return flip=q.right.x<q.left.x,ux=q.right.x-q.left.x,uy=q.right.y-q.left.y,vx=p.right.x-q.left.x,vy=p.right.y-q.left.y,plrg*(flip?uy*vx-ux*vy:vy*ux-vx*uy)>=0?plrg>=0:this.sweepx>=p.left.x}if(q.left.x==q.right.x){flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.left.x-p.left.x,vy=q.left.y-p.left.y;var qlrg=flip?uy*vx-ux*vy:vy*ux-vx*uy,aqlrg;return flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.right.x-p.left.x,vy=q.right.y-p.left.y,qlrg*(flip?uy*vx-ux*vy:vy*ux-vx*uy)>=0?qlrg<0:this.sweepx<q.left.x}flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.left.x-p.left.x,vy=q.left.y-p.left.y;var qlrg1=(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0,aqlrg1;if(flip=p.right.x<p.left.x,ux=p.right.x-p.left.x,uy=p.right.y-p.left.y,vx=q.right.x-p.left.x,vy=q.right.y-p.left.y,qlrg1==(flip?uy*vx-ux*vy:vy*ux-vx*uy)<0)return qlrg1;flip=q.right.x<q.left.x,ux=q.right.x-q.left.x,uy=q.right.y-q.left.y,vx=p.left.x-q.left.x,vy=p.left.y-q.left.y;var plrg1=(flip?uy*vx-ux*vy:vy*ux-vx*uy)>=0,aplrg1,py,qy;return flip=q.right.x<q.left.x,ux=q.right.x-q.left.x,uy=q.right.y-q.left.y,vx=p.right.x-q.left.x,vy=p.right.y-q.left.y,plrg1==(flip?uy*vx-ux*vy:vy*ux-vx*uy)>=0?plrg1:(this.sweepx-p.left.x)/(p.right.x-p.left.x)*(p.right.y-p.left.y)+p.left.y>(this.sweepx-q.left.x)/(q.right.x-q.left.x)*(q.right.y-q.left.y)+q.left.y},zpp_nape.geom.ZPP_SimpleSweep.prototype.clear=function(){this.tree.clear()},zpp_nape.geom.ZPP_SimpleSweep.prototype.add=function(e){e.node=this.tree.insert(e);var nxt=this.tree.successor_node(e.node),pre=this.tree.predecessor_node(e.node);return null!=nxt&&(e.next=nxt.data,nxt.data.prev=e),null!=pre&&(e.prev=pre.data,pre.data.next=e),e},zpp_nape.geom.ZPP_SimpleSweep.prototype.remove=function(e){var nxt=this.tree.successor_node(e.node),pre=this.tree.predecessor_node(e.node);null!=nxt&&(nxt.data.prev=e.prev),null!=pre&&(pre.data.next=e.next),this.tree.remove_node(e.node),e.node=null},zpp_nape.geom.ZPP_SimpleSweep.prototype.intersect=function(p,q){if(null==p||null==q)return!1;if(p.left==q.left||p.left==q.right||p.right==q.left||p.right==q.right)return!1;var lsign=(q.left.x-p.left.x)*(p.right.y-p.left.y)-(p.right.x-p.left.x)*(q.left.y-p.left.y),rsign=(q.right.x-p.left.x)*(p.right.y-p.left.y)-(p.right.x-p.left.x)*(q.right.y-p.left.y);if(lsign*rsign>0)return!1;var lsign2=(p.left.x-q.left.x)*(q.right.y-q.left.y)-(q.right.x-q.left.x)*(p.left.y-q.left.y),rsign2=(p.right.x-q.left.x)*(q.right.y-q.left.y)-(q.right.x-q.left.x)*(p.right.y-q.left.y);return!(lsign2*rsign2>0)},zpp_nape.geom.ZPP_SimpleSweep.prototype.intersection=function(p,q){if(null==p||null==q)return null;if(p.left==q.left||p.left==q.right||p.right==q.left||p.right==q.right)return null;var ux=0,uy=0;ux=p.right.x-p.left.x,uy=p.right.y-p.left.y;var vx=0,vy=0;vx=q.right.x-q.left.x;var denom=(vy=q.right.y-q.left.y)*ux-vx*uy;if(0==denom)return null;denom=1/denom;var cx=0,cy=0,t=(vy*(cx=q.left.x-p.left.x)-vx*(cy=q.left.y-p.left.y))*denom;if(t<0||t>1)return null;var s=(uy*cx-ux*cy)*denom,vet,ret1;if(s<0||s>1)return null;if(0==s||1==s||0==t||1==t){var cases=0==s;if(1==s&&cases)throw new js._Boot.HaxeError("corner case 1a");if(1==s&&(cases=!0),0==t&&cases)throw new js._Boot.HaxeError("corner case 1b");if(0==t&&(cases=!0),1==t&&cases)throw new js._Boot.HaxeError("corner case 1c");vet=0==s?q.left:1==s?q.right:0==t?p.left:p.right}else{var x=.5*(p.left.x+ux*t+q.left.x+vx*s),y=.5*(p.left.y+uy*t+q.left.y+vy*s),ret;null==zpp_nape.geom.ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleVert:(ret=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.x=x,ret.y=y,vet=ret}null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret1=new zpp_nape.geom.ZPP_SimpleEvent:(ret1=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret1.next,ret1.next=null),ret1.vertex=vet;var ret2=ret1;return ret2.type=0,ret2.segment=p,ret2.segment2=q,ret2},zpp_nape.geom.ZPP_SimpleSweep.prototype.__class__=zpp_nape.geom.ZPP_SimpleSweep,zpp_nape.geom.ZPP_Simple=$hxClasses["zpp_nape.geom.ZPP_Simple"]=function(){},zpp_nape.geom.ZPP_Simple.__name__=["zpp_nape","geom","ZPP_Simple"],zpp_nape.geom.ZPP_Simple.decompose=function(poly,rets){null==zpp_nape.geom.ZPP_Simple.sweep&&(zpp_nape.geom.ZPP_Simple.sweep=new zpp_nape.geom.ZPP_SimpleSweep,zpp_nape.geom.ZPP_Simple.inthash=new zpp_nape.util.FastHash2_Hashable2_Boolfalse),null==zpp_nape.geom.ZPP_Simple.vertices&&(null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?zpp_nape.geom.ZPP_Simple.vertices=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(zpp_nape.geom.ZPP_Simple.vertices=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=zpp_nape.geom.ZPP_Simple.vertices.next,zpp_nape.geom.ZPP_Simple.vertices.next=null),zpp_nape.geom.ZPP_Simple.vertices.lt=zpp_nape.geom.ZPP_SimpleVert.less_xy,zpp_nape.geom.ZPP_Simple.vertices.swapped=zpp_nape.geom.ZPP_SimpleVert.swap_nodes),null==zpp_nape.geom.ZPP_Simple.queue&&(null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?zpp_nape.geom.ZPP_Simple.queue=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(zpp_nape.geom.ZPP_Simple.queue=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=zpp_nape.geom.ZPP_Simple.queue.next,zpp_nape.geom.ZPP_Simple.queue.next=null),zpp_nape.geom.ZPP_Simple.queue.lt=zpp_nape.geom.ZPP_SimpleEvent.less_xy,zpp_nape.geom.ZPP_Simple.queue.swapped=zpp_nape.geom.ZPP_SimpleEvent.swap_nodes);var fst=null,pre=null,F=poly,L=poly,ret3;if(null!=poly)for(var nite=poly;;){var v=nite,x=v.x,y=v.y,ret;null==zpp_nape.geom.ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleVert:(ret=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.x=x,ret.y=y;for(var vert=ret,cur=zpp_nape.geom.ZPP_Simple.vertices.parent;null!=cur;)if(zpp_nape.geom.ZPP_Simple.vertices.lt(vert,cur.data))cur=cur.prev;else{if(!zpp_nape.geom.ZPP_Simple.vertices.lt(cur.data,vert))break;cur=cur.next}var vx=cur;if(null!=vx){var o=vert;o.links.clear(),o.node=null,o.forced=!1,o.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o,vert=vx.data}else vert.node=zpp_nape.geom.ZPP_Simple.vertices.insert(vert);if(null!=pre){var ret1;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret1=new zpp_nape.geom.ZPP_SimpleEvent:(ret1=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret1.next,ret1.next=null),ret1.vertex=pre;var e1=ret1,ret2;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret2=new zpp_nape.geom.ZPP_SimpleEvent:(ret2=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret2.next,ret2.next=null),ret2.vertex=vert;var e2=ret2,seg;zpp_nape.geom.ZPP_SimpleEvent.less_xy(e1,e2)?(e1.type=1,e2.type=2,seg=zpp_nape.geom.ZPP_SimpleSeg.get(pre,vert)):(e1.type=2,e2.type=1,seg=zpp_nape.geom.ZPP_SimpleSeg.get(vert,pre)),e1.segment=e2.segment=seg,zpp_nape.geom.ZPP_Simple.queue.insert(e1),zpp_nape.geom.ZPP_Simple.queue.insert(e2),pre.links.insert(vert),vert.links.insert(pre)}if(pre=vert,null==fst&&(fst=vert),(nite=nite.next)==L)break}null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret3=new zpp_nape.geom.ZPP_SimpleEvent:(ret3=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret3.next,ret3.next=null),ret3.vertex=pre;var e11=ret3,ret4;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret4=new zpp_nape.geom.ZPP_SimpleEvent:(ret4=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret4.next,ret4.next=null),ret4.vertex=fst;var e21=ret4,seg1;for(zpp_nape.geom.ZPP_SimpleEvent.less_xy(e11,e21)?(e11.type=1,e21.type=2,seg1=zpp_nape.geom.ZPP_SimpleSeg.get(pre,fst)):(e11.type=2,e21.type=1,seg1=zpp_nape.geom.ZPP_SimpleSeg.get(fst,pre)),e11.segment=e21.segment=seg1,zpp_nape.geom.ZPP_Simple.queue.insert(e11),zpp_nape.geom.ZPP_Simple.queue.insert(e21),pre.links.insert(fst),fst.links.insert(pre),null==zpp_nape.geom.ZPP_Simple.ints&&(null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?zpp_nape.geom.ZPP_Simple.ints=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(zpp_nape.geom.ZPP_Simple.ints=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=zpp_nape.geom.ZPP_Simple.ints.next,zpp_nape.geom.ZPP_Simple.ints.next=null),zpp_nape.geom.ZPP_Simple.ints.lt=zpp_nape.geom.ZPP_SimpleEvent.less_xy);!zpp_nape.geom.ZPP_Simple.queue.empty();){var e=zpp_nape.geom.ZPP_Simple.queue.pop_front();if(zpp_nape.geom.ZPP_Simple.sweep.sweepx=e.vertex.x,1==e.type){var s=e.segment;if(zpp_nape.geom.ZPP_Simple.sweep.add(s),null!=s.next&&null!=s&&!(s.next.id<s.id?zpp_nape.geom.ZPP_Simple.inthash.has(s.next.id,s.id):zpp_nape.geom.ZPP_Simple.inthash.has(s.id,s.next.id))){var intx=zpp_nape.geom.ZPP_Simple.sweep.intersection(s.next,s);if(null!=intx)if(intx.vertex.x>=zpp_nape.geom.ZPP_Simple.sweep.sweepx){for(var cur1=zpp_nape.geom.ZPP_Simple.queue.parent;null!=cur1;)if(zpp_nape.geom.ZPP_Simple.queue.lt(intx,cur1.data))cur1=cur1.prev;else{if(!zpp_nape.geom.ZPP_Simple.queue.lt(cur1.data,intx))break;cur1=cur1.next}var ex=cur1;if(null==ex){for(var cur2=zpp_nape.geom.ZPP_Simple.ints.parent;null!=cur2;)if(zpp_nape.geom.ZPP_Simple.ints.lt(intx,cur2.data))cur2=cur2.prev;else{if(!zpp_nape.geom.ZPP_Simple.ints.lt(cur2.data,intx))break;cur2=cur2.next}var vx1=cur2;if(null!=vx1){var o1=intx.vertex;o1.links.clear(),o1.node=null,o1.forced=!1,o1.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o1,intx.vertex=vx1.data.vertex,vx1.data=intx,zpp_nape.geom.ZPP_Simple.queue.insert(intx)}else zpp_nape.geom.ZPP_Simple.queue.insert(intx),zpp_nape.geom.ZPP_Simple.ints.insert(intx);if(s.next.id<s.id){var tmp=zpp_nape.geom.ZPP_Simple.inthash,id=s.next.id,di=s.id,ret5;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret5=new zpp_nape.util.Hashable2_Boolfalse:(ret5=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret5.next,ret5.next=null),ret5.id=id,ret5.di=di;var ret6=ret5;ret6.value=!0,tmp.add(ret6)}else{var tmp1=zpp_nape.geom.ZPP_Simple.inthash,id1=s.id,di1=s.next.id,ret7;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret7=new zpp_nape.util.Hashable2_Boolfalse:(ret7=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret7.next,ret7.next=null),ret7.id=id1,ret7.di=di1;var ret8=ret7;ret8.value=!0,tmp1.add(ret8)}}else{var x1=ex.data;if(x1.segment!=intx.segment||intx.segment2!=x1.segment2)throw new js._Boot.HaxeError("corner case 2, shiiiit.");var o2=intx.vertex;o2.links.clear(),o2.node=null,o2.forced=!1,o2.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o2;var o3=intx;o3.vertex=null,o3.segment=o3.segment2=null,o3.node=null,o3.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o3}}else{var o4=intx.vertex;o4.links.clear(),o4.node=null,o4.forced=!1,o4.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o4;var o5=intx;o5.vertex=null,o5.segment=o5.segment2=null,o5.node=null,o5.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o5}}if(null!=s&&null!=s.prev&&!(s.id<s.prev.id?zpp_nape.geom.ZPP_Simple.inthash.has(s.id,s.prev.id):zpp_nape.geom.ZPP_Simple.inthash.has(s.prev.id,s.id))){var intx1=zpp_nape.geom.ZPP_Simple.sweep.intersection(s,s.prev);if(null!=intx1)if(intx1.vertex.x>=zpp_nape.geom.ZPP_Simple.sweep.sweepx){for(var cur3=zpp_nape.geom.ZPP_Simple.queue.parent;null!=cur3;)if(zpp_nape.geom.ZPP_Simple.queue.lt(intx1,cur3.data))cur3=cur3.prev;else{if(!zpp_nape.geom.ZPP_Simple.queue.lt(cur3.data,intx1))break;cur3=cur3.next}var ex1=cur3;if(null==ex1){for(var cur4=zpp_nape.geom.ZPP_Simple.ints.parent;null!=cur4;)if(zpp_nape.geom.ZPP_Simple.ints.lt(intx1,cur4.data))cur4=cur4.prev;else{if(!zpp_nape.geom.ZPP_Simple.ints.lt(cur4.data,intx1))break;cur4=cur4.next}var vx2=cur4;if(null!=vx2){var o6=intx1.vertex;o6.links.clear(),o6.node=null,o6.forced=!1,o6.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o6,intx1.vertex=vx2.data.vertex,vx2.data=intx1,zpp_nape.geom.ZPP_Simple.queue.insert(intx1)}else zpp_nape.geom.ZPP_Simple.queue.insert(intx1),zpp_nape.geom.ZPP_Simple.ints.insert(intx1);if(s.id<s.prev.id){var tmp2=zpp_nape.geom.ZPP_Simple.inthash,id2=s.id,di2=s.prev.id,ret9;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret9=new zpp_nape.util.Hashable2_Boolfalse:(ret9=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret9.next,ret9.next=null),ret9.id=id2,ret9.di=di2;var ret10=ret9;ret10.value=!0,tmp2.add(ret10)}else{var tmp3=zpp_nape.geom.ZPP_Simple.inthash,id3=s.prev.id,di3=s.id,ret11;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret11=new zpp_nape.util.Hashable2_Boolfalse:(ret11=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret11.next,ret11.next=null),ret11.id=id3,ret11.di=di3;var ret12=ret11;ret12.value=!0,tmp3.add(ret12)}}else{var x2=ex1.data;if(x2.segment!=intx1.segment||intx1.segment2!=x2.segment2)throw new js._Boot.HaxeError("corner case 2, shiiiit.");var o7=intx1.vertex;o7.links.clear(),o7.node=null,o7.forced=!1,o7.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o7;var o8=intx1;o8.vertex=null,o8.segment=o8.segment2=null,o8.node=null,o8.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o8}}else{var o9=intx1.vertex;o9.links.clear(),o9.node=null,o9.forced=!1,o9.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o9;var o10=intx1;o10.vertex=null,o10.segment=o10.segment2=null,o10.node=null,o10.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o10}}}else if(2==e.type){var s1=e.segment;if(null!=s1.node){var nxt=s1.next,pre1=s1.prev;zpp_nape.geom.ZPP_Simple.sweep.remove(s1);var o11=s1;if(o11.left=o11.right=null,o11.prev=null,o11.node=null,o11.vertices.clear(),o11.next=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=o11,null!=nxt&&null!=pre1&&!(nxt.id<pre1.id?zpp_nape.geom.ZPP_Simple.inthash.has(nxt.id,pre1.id):zpp_nape.geom.ZPP_Simple.inthash.has(pre1.id,nxt.id))){var intx2=zpp_nape.geom.ZPP_Simple.sweep.intersection(nxt,pre1);if(null!=intx2)if(intx2.vertex.x>=zpp_nape.geom.ZPP_Simple.sweep.sweepx){for(var cur5=zpp_nape.geom.ZPP_Simple.queue.parent;null!=cur5;)if(zpp_nape.geom.ZPP_Simple.queue.lt(intx2,cur5.data))cur5=cur5.prev;else{if(!zpp_nape.geom.ZPP_Simple.queue.lt(cur5.data,intx2))break;cur5=cur5.next}var ex2=cur5;if(null==ex2){for(var cur6=zpp_nape.geom.ZPP_Simple.ints.parent;null!=cur6;)if(zpp_nape.geom.ZPP_Simple.ints.lt(intx2,cur6.data))cur6=cur6.prev;else{if(!zpp_nape.geom.ZPP_Simple.ints.lt(cur6.data,intx2))break;cur6=cur6.next}var vx3=cur6;if(null!=vx3){var o12=intx2.vertex;o12.links.clear(),o12.node=null,o12.forced=!1,o12.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o12,intx2.vertex=vx3.data.vertex,vx3.data=intx2,zpp_nape.geom.ZPP_Simple.queue.insert(intx2)}else zpp_nape.geom.ZPP_Simple.queue.insert(intx2),zpp_nape.geom.ZPP_Simple.ints.insert(intx2);if(nxt.id<pre1.id){var tmp4=zpp_nape.geom.ZPP_Simple.inthash,id4=nxt.id,di4=pre1.id,ret13;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret13=new zpp_nape.util.Hashable2_Boolfalse:(ret13=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret13.next,ret13.next=null),ret13.id=id4,ret13.di=di4;var ret14=ret13;ret14.value=!0,tmp4.add(ret14)}else{var tmp5=zpp_nape.geom.ZPP_Simple.inthash,id5=pre1.id,di5=nxt.id,ret15;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret15=new zpp_nape.util.Hashable2_Boolfalse:(ret15=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret15.next,ret15.next=null),ret15.id=id5,ret15.di=di5;var ret16=ret15;ret16.value=!0,tmp5.add(ret16)}}else{var x3=ex2.data;if(x3.segment!=intx2.segment||intx2.segment2!=x3.segment2)throw new js._Boot.HaxeError("corner case 2, shiiiit.");var o13=intx2.vertex;o13.links.clear(),o13.node=null,o13.forced=!1,o13.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o13;var o14=intx2;o14.vertex=null,o14.segment=o14.segment2=null,o14.node=null,o14.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o14}}else{var o15=intx2.vertex;o15.links.clear(),o15.node=null,o15.forced=!1,o15.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o15;var o16=intx2;o16.vertex=null,o16.segment=o16.segment2=null,o16.node=null,o16.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o16}}}}else{var intx3=e.vertex,pnull=null==intx3.node,a=e.segment,b=e.segment2;if(b.next!=a){var t=a;a=b,b=t}for(var cur7=a.vertices.parent;null!=cur7;)if(a.vertices.lt(intx3,cur7.data))cur7=cur7.prev;else{if(!a.vertices.lt(cur7.data,intx3))break;cur7=cur7.next}for(var anew=null==cur7,cur8=b.vertices.parent;null!=cur8;)if(b.vertices.lt(intx3,cur8.data))cur8=cur8.prev;else{if(!b.vertices.lt(cur8.data,intx3))break;cur8=cur8.next}var bnew=null==cur8;if(anew){var aint=a.vertices.insert(intx3),naleft=intx3==a.left?intx3:a.vertices.predecessor_node(aint).data,naright=intx3==a.right?intx3:a.vertices.successor_node(aint).data;naleft.links.remove(naright),intx3!=naleft&&naleft.links.insert(intx3),naright.links.remove(naleft),intx3!=naright&&naright.links.insert(intx3),intx3!=naleft&&intx3.links.insert(naleft),intx3!=naright&&intx3.links.insert(naright)}if(bnew){var bint=b.vertices.insert(intx3),nbleft=intx3==b.left?intx3:b.vertices.predecessor_node(bint).data,nbright=intx3==b.right?intx3:b.vertices.successor_node(bint).data;nbleft.links.remove(nbright),intx3!=nbleft&&nbleft.links.insert(intx3),nbright.links.remove(nbleft),intx3!=nbright&&nbright.links.insert(intx3),intx3!=nbleft&&intx3.links.insert(nbleft),intx3!=nbright&&intx3.links.insert(nbright)}if(pnull&&(intx3.node=zpp_nape.geom.ZPP_Simple.vertices.insert(intx3)),intx3.forced=!0,pnull){var an=a.node,bn=b.node;an.data=b,bn.data=a,a.node=bn,b.node=an,b.next=a.next,a.next=b,a.prev=b.prev,b.prev=a,null!=a.prev&&(a.prev.next=a),null!=b.next&&(b.next.prev=b)}if(null!=b.next&&null!=b&&!(b.next.id<b.id?zpp_nape.geom.ZPP_Simple.inthash.has(b.next.id,b.id):zpp_nape.geom.ZPP_Simple.inthash.has(b.id,b.next.id))){var intx4=zpp_nape.geom.ZPP_Simple.sweep.intersection(b.next,b);if(null!=intx4)if(intx4.vertex.x>=zpp_nape.geom.ZPP_Simple.sweep.sweepx){for(var cur9=zpp_nape.geom.ZPP_Simple.queue.parent;null!=cur9;)if(zpp_nape.geom.ZPP_Simple.queue.lt(intx4,cur9.data))cur9=cur9.prev;else{if(!zpp_nape.geom.ZPP_Simple.queue.lt(cur9.data,intx4))break;cur9=cur9.next}var ex3=cur9;if(null==ex3){for(var cur10=zpp_nape.geom.ZPP_Simple.ints.parent;null!=cur10;)if(zpp_nape.geom.ZPP_Simple.ints.lt(intx4,cur10.data))cur10=cur10.prev;else{if(!zpp_nape.geom.ZPP_Simple.ints.lt(cur10.data,intx4))break;cur10=cur10.next}var vx4=cur10;if(null!=vx4){var o17=intx4.vertex;o17.links.clear(),o17.node=null,o17.forced=!1,o17.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o17,intx4.vertex=vx4.data.vertex,vx4.data=intx4,zpp_nape.geom.ZPP_Simple.queue.insert(intx4)}else zpp_nape.geom.ZPP_Simple.queue.insert(intx4),zpp_nape.geom.ZPP_Simple.ints.insert(intx4);if(b.next.id<b.id){var tmp6=zpp_nape.geom.ZPP_Simple.inthash,id6=b.next.id,di6=b.id,ret17;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret17=new zpp_nape.util.Hashable2_Boolfalse:(ret17=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret17.next,ret17.next=null),ret17.id=id6,ret17.di=di6;var ret18=ret17;ret18.value=!0,tmp6.add(ret18)}else{var tmp7=zpp_nape.geom.ZPP_Simple.inthash,id7=b.id,di7=b.next.id,ret19;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret19=new zpp_nape.util.Hashable2_Boolfalse:(ret19=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret19.next,ret19.next=null),ret19.id=id7,ret19.di=di7;var ret20=ret19;ret20.value=!0,tmp7.add(ret20)}}else{var x4=ex3.data;if(x4.segment!=intx4.segment||intx4.segment2!=x4.segment2)throw new js._Boot.HaxeError("corner case 2, shiiiit.");var o18=intx4.vertex;o18.links.clear(),o18.node=null,o18.forced=!1,o18.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o18;var o19=intx4;o19.vertex=null,o19.segment=o19.segment2=null,o19.node=null,o19.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o19}}else{var o20=intx4.vertex;o20.links.clear(),o20.node=null,o20.forced=!1,o20.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o20;var o21=intx4;o21.vertex=null,o21.segment=o21.segment2=null,o21.node=null,o21.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o21}}if(null!=a&&null!=a.prev&&!(a.id<a.prev.id?zpp_nape.geom.ZPP_Simple.inthash.has(a.id,a.prev.id):zpp_nape.geom.ZPP_Simple.inthash.has(a.prev.id,a.id))){var intx5=zpp_nape.geom.ZPP_Simple.sweep.intersection(a,a.prev);if(null!=intx5)if(intx5.vertex.x>=zpp_nape.geom.ZPP_Simple.sweep.sweepx){for(var cur11=zpp_nape.geom.ZPP_Simple.queue.parent;null!=cur11;)if(zpp_nape.geom.ZPP_Simple.queue.lt(intx5,cur11.data))cur11=cur11.prev;else{if(!zpp_nape.geom.ZPP_Simple.queue.lt(cur11.data,intx5))break;cur11=cur11.next}var ex4=cur11;if(null==ex4){for(var cur12=zpp_nape.geom.ZPP_Simple.ints.parent;null!=cur12;)if(zpp_nape.geom.ZPP_Simple.ints.lt(intx5,cur12.data))cur12=cur12.prev;else{if(!zpp_nape.geom.ZPP_Simple.ints.lt(cur12.data,intx5))break;cur12=cur12.next}var vx5=cur12;if(null!=vx5){var o22=intx5.vertex;o22.links.clear(),o22.node=null,o22.forced=!1,o22.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o22,intx5.vertex=vx5.data.vertex,vx5.data=intx5,zpp_nape.geom.ZPP_Simple.queue.insert(intx5)}else zpp_nape.geom.ZPP_Simple.queue.insert(intx5),zpp_nape.geom.ZPP_Simple.ints.insert(intx5);if(a.id<a.prev.id){var tmp8=zpp_nape.geom.ZPP_Simple.inthash,id8=a.id,di8=a.prev.id,ret21;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret21=new zpp_nape.util.Hashable2_Boolfalse:(ret21=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret21.next,ret21.next=null),ret21.id=id8,ret21.di=di8;var ret22=ret21;ret22.value=!0,tmp8.add(ret22)}else{var tmp9=zpp_nape.geom.ZPP_Simple.inthash,id9=a.prev.id,di9=a.id,ret23;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret23=new zpp_nape.util.Hashable2_Boolfalse:(ret23=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret23.next,ret23.next=null),ret23.id=id9,ret23.di=di9;var ret24=ret23;ret24.value=!0,tmp9.add(ret24)}}else{var x5=ex4.data;if(x5.segment!=intx5.segment||intx5.segment2!=x5.segment2)throw new js._Boot.HaxeError("corner case 2, shiiiit.");var o23=intx5.vertex;o23.links.clear(),o23.node=null,o23.forced=!1,o23.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o23;var o24=intx5;o24.vertex=null,o24.segment=o24.segment2=null,o24.node=null,o24.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o24}}else{var o25=intx5.vertex;o25.links.clear(),o25.node=null,o25.forced=!1,o25.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o25;var o26=intx5;o26.vertex=null,o26.segment=o26.segment2=null,o26.node=null,o26.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o26}}zpp_nape.geom.ZPP_Simple.ints.remove(e)}var o27=e;o27.vertex=null,o27.segment=o27.segment2=null,o27.node=null,o27.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o27}for(var _g=0,_g1=zpp_nape.geom.ZPP_Simple.inthash.table.length;_g<_g1;){var i=_g++,n=zpp_nape.geom.ZPP_Simple.inthash.table[i];if(null!=n){for(;null!=n;){var t1=n.hnext;n.hnext=null;var o28=n;o28.next=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=o28,n=t1}zpp_nape.geom.ZPP_Simple.inthash.table[i]=null}}for(null==rets&&(rets=new zpp_nape.util.ZNPList_ZPP_GeomVert);!zpp_nape.geom.ZPP_Simple.vertices.empty();)zpp_nape.geom.ZPP_Simple.clip_polygon(zpp_nape.geom.ZPP_Simple.vertices,rets);return rets},zpp_nape.geom.ZPP_Simple.clip_polygon=function(vertices,rets){var ret=null,cur=vertices.first(),fst=cur,pren=cur.links.parent,nxtn=null==pren.prev?pren.next:pren.prev,pre=pren.data,nxt=nxtn.data,ux=0,uy=0;ux=cur.x-pre.x,uy=cur.y-pre.y;var vx=0,vy=0;vx=nxt.x-cur.x,(vy=nxt.y-cur.y)*ux-vx*uy<0&&(nxt=pre);var x=cur.x,y=cur.y,ret1;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret1=new zpp_nape.geom.ZPP_GeomVert:(ret1=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret1.next,ret1.next=null),ret1.forced=!1,ret1.x=x,ret1.y=y;var obj=ret1;for(null==ret?ret=obj.prev=obj.next=obj:(obj.prev=ret,obj.next=ret.next,ret.next.prev=obj,ret.next=obj),(ret=obj).forced=cur.forced;;){if(cur.links.remove(nxt),nxt.links.remove(cur),nxt==fst){if(cur.links.empty()){vertices.remove(cur);var o=cur;o.links.clear(),o.node=null,o.forced=!1,o.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o}break}var x1=nxt.x,y1=nxt.y,ret2;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret2=new zpp_nape.geom.ZPP_GeomVert:(ret2=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret2.next,ret2.next=null),ret2.forced=!1,ret2.x=x1,ret2.y=y1;var obj1=ret2;if(null==ret?ret=obj1.prev=obj1.next=obj1:(obj1.prev=ret,obj1.next=ret.next,ret.next.prev=obj1,ret.next=obj1),(ret=obj1).forced=nxt.forced,nxt.links.singular()){if(cur.links.empty()){vertices.remove(cur);var o1=cur;o1.links.clear(),o1.node=null,o1.forced=!1,o1.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o1}cur=nxt,nxt=nxt.links.parent.data}else{var min=null,minl=0;if(!nxt.links.empty()){for(var set_ite=nxt.links.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var p=set_ite.data;if(null==min){min=p;var ux1=0,uy1=0;ux1=nxt.x-cur.x,uy1=nxt.y-cur.y;var vx1=0,vy1=0;vx1=p.x-nxt.x,minl=(vy1=p.y-nxt.y)*ux1-vx1*uy1}else{var ux2=0,uy2=0;ux2=nxt.x-cur.x,uy2=nxt.y-cur.y;var vx2=0,vy2=0;vx2=p.x-nxt.x;var nleft=(vy2=p.y-nxt.y)*ux2-vx2*uy2;if(nleft>0&&minl<=0)min=p,minl=nleft;else if(minl*nleft>=0){var ux3=0,uy3=0;ux3=nxt.x-p.x,uy3=nxt.y-p.y;var vx3=0,vy3=0,pleft;vx3=min.x-nxt.x,(vy3=min.y-nxt.y)*ux3-vx3*uy3>0&&(min=p,minl=nleft)}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}if(cur.links.empty()){vertices.remove(cur);var o2=cur;o2.links.clear(),o2.node=null,o2.forced=!1,o2.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o2}cur=nxt,nxt=min}}vertices.remove(fst);var o3=fst;o3.links.clear(),o3.node=null,o3.forced=!1,o3.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o3,rets.add(ret)},zpp_nape.geom.ZPP_Simple.isSimple=function(poly){null==zpp_nape.geom.ZPP_Simple.sweep&&(zpp_nape.geom.ZPP_Simple.sweep=new zpp_nape.geom.ZPP_SimpleSweep,zpp_nape.geom.ZPP_Simple.inthash=new zpp_nape.util.FastHash2_Hashable2_Boolfalse);var vertices=zpp_nape.geom.ZPP_Simple.list_vertices;null==vertices&&(vertices=zpp_nape.geom.ZPP_Simple.list_vertices=new zpp_nape.util.ZNPList_ZPP_SimpleVert);var F=poly,L=poly;if(null!=poly)for(var nite=poly;;){var v=nite,x=v.x,y=v.y,ret;if(null==zpp_nape.geom.ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.geom.ZPP_SimpleVert:(ret=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.x=x,ret.y=y,vertices.add(ret),(nite=nite.next)==L)break}var queue=zpp_nape.geom.ZPP_Simple.list_queue;null==queue&&(queue=zpp_nape.geom.ZPP_Simple.list_queue=new zpp_nape.util.ZNPList_ZPP_SimpleEvent);var cx_ite=vertices.head,u=cx_ite.elt;for(cx_ite=cx_ite.next;null!=cx_ite;){var v1=cx_ite.elt,ret1;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret1=new zpp_nape.geom.ZPP_SimpleEvent:(ret1=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret1.next,ret1.next=null),ret1.vertex=u;var e1=queue.add(ret1),ret2;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret2=new zpp_nape.geom.ZPP_SimpleEvent:(ret2=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret2.next,ret2.next=null),ret2.vertex=v1;var e2=queue.add(ret2),tmp;zpp_nape.geom.ZPP_SimpleEvent.less_xy(e1,e2)?(e1.type=1,e2.type=2,tmp=zpp_nape.geom.ZPP_SimpleSeg.get(u,v1)):(e1.type=2,e2.type=1,tmp=zpp_nape.geom.ZPP_SimpleSeg.get(v1,u)),e1.segment=e2.segment=tmp,u=v1,cx_ite=cx_ite.next}var v2=vertices.head.elt,ret3;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret3=new zpp_nape.geom.ZPP_SimpleEvent:(ret3=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret3.next,ret3.next=null),ret3.vertex=u;var e11=queue.add(ret3),ret4;null==zpp_nape.geom.ZPP_SimpleEvent.zpp_pool?ret4=new zpp_nape.geom.ZPP_SimpleEvent:(ret4=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=ret4.next,ret4.next=null),ret4.vertex=v2;var e21=queue.add(ret4),tmp1;zpp_nape.geom.ZPP_SimpleEvent.less_xy(e11,e21)?(e11.type=1,e21.type=2,tmp1=zpp_nape.geom.ZPP_SimpleSeg.get(u,v2)):(e11.type=2,e21.type=1,tmp1=zpp_nape.geom.ZPP_SimpleSeg.get(v2,u)),e11.segment=e21.segment=tmp1;var xxlist=queue;if(null!=xxlist.head&&null!=xxlist.head.next){for(var head=xxlist.head,tail=null,left=null,right=null,nxt=null,listSize=1,numMerges,leftSize,rightSize;;){for(numMerges=0,left=head,tail=head=null;null!=left;){for(++numMerges,right=left,leftSize=0,rightSize=listSize;null!=right&&leftSize<listSize;)++leftSize,right=right.next;for(;leftSize>0||rightSize>0&&null!=right;)0==leftSize?(nxt=right,right=right.next,--rightSize):0==rightSize||null==right?(nxt=left,left=left.next,--leftSize):zpp_nape.geom.ZPP_SimpleEvent.less_xy(left.elt,right.elt)?(nxt=left,left=left.next,--leftSize):(nxt=right,right=right.next,--rightSize),null!=tail?tail.next=nxt:head=nxt,tail=nxt;left=right}if(tail.next=null,listSize<<=1,!(numMerges>1))break}xxlist.head=head,xxlist.modified=!0,xxlist.pushmod=!0}for(var ret5=!0;null!=queue.head;){var e=queue.pop_unsafe(),seg=e.segment;if(1==e.type){if(zpp_nape.geom.ZPP_Simple.sweep.add(seg),zpp_nape.geom.ZPP_Simple.sweep.intersect(seg,seg.next)||zpp_nape.geom.ZPP_Simple.sweep.intersect(seg,seg.prev)){ret5=!1;break}}else if(2==e.type){if(zpp_nape.geom.ZPP_Simple.sweep.intersect(seg.prev,seg.next)){ret5=!1;break}zpp_nape.geom.ZPP_Simple.sweep.remove(seg);var o=seg;o.left=o.right=null,o.prev=null,o.node=null,o.vertices.clear(),o.next=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=o}var o1=e;o1.vertex=null,o1.segment=o1.segment2=null,o1.node=null,o1.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o1}for(;null!=queue.head;){var e3=queue.pop_unsafe();if(2==e3.type){var o2=e3.segment;o2.left=o2.right=null,o2.prev=null,o2.node=null,o2.vertices.clear(),o2.next=zpp_nape.geom.ZPP_SimpleSeg.zpp_pool,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=o2}var o3=e3;o3.vertex=null,o3.segment=o3.segment2=null,o3.node=null,o3.next=zpp_nape.geom.ZPP_SimpleEvent.zpp_pool,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=o3}for(zpp_nape.geom.ZPP_Simple.sweep.clear();null!=vertices.head;){var o4=vertices.pop_unsafe();o4.links.clear(),o4.node=null,o4.forced=!1,o4.next=zpp_nape.geom.ZPP_SimpleVert.zpp_pool,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=o4}return ret5},zpp_nape.geom.ZPP_Simple.prototype.__class__=zpp_nape.geom.ZPP_Simple,zpp_nape.geom.ZPP_SimplifyV=$hxClasses["zpp_nape.geom.ZPP_SimplifyV"]=function(){this.forced=!1,this.flag=!1,this.prev=null,this.next=null,this.y=0,this.x=0},zpp_nape.geom.ZPP_SimplifyV.__name__=["zpp_nape","geom","ZPP_SimplifyV"],zpp_nape.geom.ZPP_SimplifyV.get=function(v){var ret;return null==zpp_nape.geom.ZPP_SimplifyV.zpp_pool?ret=new zpp_nape.geom.ZPP_SimplifyV:(ret=zpp_nape.geom.ZPP_SimplifyV.zpp_pool,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=ret.next,ret.next=null),ret.x=v.x,ret.y=v.y,ret.flag=!1,ret},zpp_nape.geom.ZPP_SimplifyV.prototype.x=null,zpp_nape.geom.ZPP_SimplifyV.prototype.y=null,zpp_nape.geom.ZPP_SimplifyV.prototype.next=null,zpp_nape.geom.ZPP_SimplifyV.prototype.prev=null,zpp_nape.geom.ZPP_SimplifyV.prototype.flag=null,zpp_nape.geom.ZPP_SimplifyV.prototype.forced=null,zpp_nape.geom.ZPP_SimplifyV.prototype.free=function(){},zpp_nape.geom.ZPP_SimplifyV.prototype.alloc=function(){},zpp_nape.geom.ZPP_SimplifyV.prototype.__class__=zpp_nape.geom.ZPP_SimplifyV,zpp_nape.geom.ZPP_SimplifyP=$hxClasses["zpp_nape.geom.ZPP_SimplifyP"]=function(){this.max=null,this.min=null,this.next=null},zpp_nape.geom.ZPP_SimplifyP.__name__=["zpp_nape","geom","ZPP_SimplifyP"],zpp_nape.geom.ZPP_SimplifyP.get=function(min,max){var ret;return null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret=new zpp_nape.geom.ZPP_SimplifyP:(ret=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret.next,ret.next=null),ret.min=min,ret.max=max,ret},zpp_nape.geom.ZPP_SimplifyP.prototype.next=null,zpp_nape.geom.ZPP_SimplifyP.prototype.min=null,zpp_nape.geom.ZPP_SimplifyP.prototype.max=null,zpp_nape.geom.ZPP_SimplifyP.prototype.free=function(){this.min=this.max=null},zpp_nape.geom.ZPP_SimplifyP.prototype.alloc=function(){},zpp_nape.geom.ZPP_SimplifyP.prototype.__class__=zpp_nape.geom.ZPP_SimplifyP,zpp_nape.geom.ZPP_Simplify=$hxClasses["zpp_nape.geom.ZPP_Simplify"]=function(){},zpp_nape.geom.ZPP_Simplify.__name__=["zpp_nape","geom","ZPP_Simplify"],zpp_nape.geom.ZPP_Simplify.lessval=function(a,b){return a.x-b.x+(a.y-b.y)},zpp_nape.geom.ZPP_Simplify.less=function(a,b){return a.x-b.x+(a.y-b.y)<0},zpp_nape.geom.ZPP_Simplify.distance=function(v,a,b){var nx=0,ny=0;nx=b.x-a.x,ny=b.y-a.y;var cx=0,cy=0,den;if(cx=v.x-a.x,cy=v.y-a.y,0==nx*nx+ny*ny)return cx*cx+cy*cy;var t=(cx*nx+cy*ny)/(nx*nx+ny*ny);if(t<=0)return cx*cx+cy*cy;if(t>=1){var dx=0,dy=0;return(dx=v.x-b.x)*dx+(dy=v.y-b.y)*dy}var t1=t;return(cx-=nx*t)*cx+(cy-=ny*t)*cy},zpp_nape.geom.ZPP_Simplify.simplify=function(P,epsilon){var ret=null,min=null,max=null;epsilon*=epsilon,null==zpp_nape.geom.ZPP_Simplify.stack&&(zpp_nape.geom.ZPP_Simplify.stack=new zpp_nape.util.ZNPList_ZPP_SimplifyP);for(var pre=null,fst=null,cur=P;;){var ret1;null==zpp_nape.geom.ZPP_SimplifyV.zpp_pool?ret1=new zpp_nape.geom.ZPP_SimplifyV:(ret1=zpp_nape.geom.ZPP_SimplifyV.zpp_pool,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=ret1.next,ret1.next=null),ret1.x=cur.x,ret1.y=cur.y,ret1.flag=!1;var v=ret1;if(v.forced=cur.forced,v.forced){if(v.flag=!0,null!=pre){var tmp=zpp_nape.geom.ZPP_Simplify.stack,ret2;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret2=new zpp_nape.geom.ZPP_SimplifyP:(ret2=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret2.next,ret2.next=null),ret2.min=pre,ret2.max=v,tmp.add(ret2)}else fst=v;pre=v}var obj=v;if(null==ret?ret=obj.prev=obj.next=obj:(obj.prev=ret,obj.next=ret.next,ret.next.prev=obj,ret.next=obj),ret=obj,null==min?(min=ret,max=ret):(ret.x-min.x+(ret.y-min.y)<0&&(min=ret),max.x-ret.x+(max.y-ret.y)<0&&(max=ret)),(cur=cur.next)==P)break}if(null==zpp_nape.geom.ZPP_Simplify.stack.head)if(null==fst){min.flag=max.flag=!0;var tmp1=zpp_nape.geom.ZPP_Simplify.stack,ret3;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret3=new zpp_nape.geom.ZPP_SimplifyP:(ret3=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret3.next,ret3.next=null),ret3.min=min,ret3.max=max,tmp1.add(ret3);var tmp2=zpp_nape.geom.ZPP_Simplify.stack,ret4;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret4=new zpp_nape.geom.ZPP_SimplifyP:(ret4=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret4.next,ret4.next=null),ret4.min=max,ret4.max=min,tmp2.add(ret4)}else{var d1=min.x-fst.x+(min.y-fst.y);d1<0&&(d1=-d1);var d2=max.x-fst.x+(max.y-fst.y);if(d2<0&&(d2=-d2),d1>d2){min.flag=fst.flag=!0;var tmp3=zpp_nape.geom.ZPP_Simplify.stack,ret5;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret5=new zpp_nape.geom.ZPP_SimplifyP:(ret5=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret5.next,ret5.next=null),ret5.min=min,ret5.max=fst,tmp3.add(ret5);var tmp4=zpp_nape.geom.ZPP_Simplify.stack,ret6;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret6=new zpp_nape.geom.ZPP_SimplifyP:(ret6=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret6.next,ret6.next=null),ret6.min=fst,ret6.max=min,tmp4.add(ret6)}else{max.flag=fst.flag=!0;var tmp5=zpp_nape.geom.ZPP_Simplify.stack,ret7;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret7=new zpp_nape.geom.ZPP_SimplifyP:(ret7=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret7.next,ret7.next=null),ret7.min=max,ret7.max=fst,tmp5.add(ret7);var tmp6=zpp_nape.geom.ZPP_Simplify.stack,ret8;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret8=new zpp_nape.geom.ZPP_SimplifyP:(ret8=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret8.next,ret8.next=null),ret8.min=fst,ret8.max=max,tmp6.add(ret8)}}else{var tmp7=zpp_nape.geom.ZPP_Simplify.stack,ret9;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret9=new zpp_nape.geom.ZPP_SimplifyP:(ret9=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret9.next,ret9.next=null),ret9.min=pre,ret9.max=fst,tmp7.add(ret9)}for(;null!=zpp_nape.geom.ZPP_Simplify.stack.head;){var cur1=zpp_nape.geom.ZPP_Simplify.stack.pop_unsafe(),min1=cur1.min,max1=cur1.max,o=cur1;o.min=o.max=null,o.next=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=o;for(var dmax=epsilon,dv=null,ite=min1.next;ite!=max1;){var dist=zpp_nape.geom.ZPP_Simplify.distance(ite,min1,max1);dist>dmax&&(dmax=dist,dv=ite),ite=ite.next}if(null!=dv){dv.flag=!0;var tmp8=zpp_nape.geom.ZPP_Simplify.stack,ret10;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret10=new zpp_nape.geom.ZPP_SimplifyP:(ret10=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret10.next,ret10.next=null),ret10.min=min1,ret10.max=dv,tmp8.add(ret10);var tmp9=zpp_nape.geom.ZPP_Simplify.stack,ret11;null==zpp_nape.geom.ZPP_SimplifyP.zpp_pool?ret11=new zpp_nape.geom.ZPP_SimplifyP:(ret11=zpp_nape.geom.ZPP_SimplifyP.zpp_pool,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=ret11.next,ret11.next=null),ret11.min=dv,ret11.max=max1,tmp9.add(ret11)}}for(var retp=null;null!=ret;){if(ret.flag){var x=ret.x,y=ret.y,ret12;null==zpp_nape.geom.ZPP_GeomVert.zpp_pool?ret12=new zpp_nape.geom.ZPP_GeomVert:(ret12=zpp_nape.geom.ZPP_GeomVert.zpp_pool,zpp_nape.geom.ZPP_GeomVert.zpp_pool=ret12.next,ret12.next=null),ret12.forced=!1,ret12.x=x,ret12.y=y;var obj1=ret12;null==retp?retp=obj1.prev=obj1.next=obj1:(obj1.prev=retp,obj1.next=retp.next,retp.next.prev=obj1,retp.next=obj1),(retp=obj1).forced=ret.forced}if(null!=ret&&ret.prev==ret){ret.next=ret.prev=null;var o1=ret;o1.next=zpp_nape.geom.ZPP_SimplifyV.zpp_pool,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=o1,ret=ret=null}else{var retnodes=ret.next;ret.prev.next=ret.next,ret.next.prev=ret.prev,ret.next=ret.prev=null;var o2=ret;o2.next=zpp_nape.geom.ZPP_SimplifyV.zpp_pool,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=o2,ret=null,ret=retnodes}}return retp},zpp_nape.geom.ZPP_Simplify.prototype.__class__=zpp_nape.geom.ZPP_Simplify,zpp_nape.geom.ZPP_ToiEvent=$hxClasses["zpp_nape.geom.ZPP_ToiEvent"]=function(){this.kinematic=!1,this.failed=!1,this.slipped=!1,this.axis=null,this.c2=null,this.c1=null,this.frozen2=!1,this.frozen1=!1,this.arbiter=null,this.s2=null,this.s1=null,this.toi=0,this.next=null,this.c1=new zpp_nape.geom.ZPP_Vec2,this.c2=new zpp_nape.geom.ZPP_Vec2,this.axis=new zpp_nape.geom.ZPP_Vec2},zpp_nape.geom.ZPP_ToiEvent.__name__=["zpp_nape","geom","ZPP_ToiEvent"],zpp_nape.geom.ZPP_ToiEvent.prototype.next=null,zpp_nape.geom.ZPP_ToiEvent.prototype.alloc=function(){this.failed=!1,this.s1=this.s2=null,this.arbiter=null},zpp_nape.geom.ZPP_ToiEvent.prototype.free=function(){},zpp_nape.geom.ZPP_ToiEvent.prototype.toi=null,zpp_nape.geom.ZPP_ToiEvent.prototype.s1=null,zpp_nape.geom.ZPP_ToiEvent.prototype.s2=null,zpp_nape.geom.ZPP_ToiEvent.prototype.arbiter=null,zpp_nape.geom.ZPP_ToiEvent.prototype.frozen1=null,zpp_nape.geom.ZPP_ToiEvent.prototype.frozen2=null,zpp_nape.geom.ZPP_ToiEvent.prototype.c1=null,zpp_nape.geom.ZPP_ToiEvent.prototype.c2=null,zpp_nape.geom.ZPP_ToiEvent.prototype.axis=null,zpp_nape.geom.ZPP_ToiEvent.prototype.slipped=null,zpp_nape.geom.ZPP_ToiEvent.prototype.failed=null,zpp_nape.geom.ZPP_ToiEvent.prototype.kinematic=null,zpp_nape.geom.ZPP_ToiEvent.prototype.__class__=zpp_nape.geom.ZPP_ToiEvent,zpp_nape.geom.ZPP_SweepDistance=$hxClasses["zpp_nape.geom.ZPP_SweepDistance"]=function(){},zpp_nape.geom.ZPP_SweepDistance.__name__=["zpp_nape","geom","ZPP_SweepDistance"],zpp_nape.geom.ZPP_SweepDistance.dynamicSweep=function(toi,timeStep,lowerBound,negRadius,userAPI){null==userAPI&&(userAPI=!1);var s1=toi.s1,s2=toi.s2,b1=s1.body,b2=s2.body,deltax=0,deltay=0;deltax=b2.velx-b1.velx,deltay=b2.vely-b1.vely;var ang1=b1.angvel;ang1<0&&(ang1=-ang1);var ang2=b2.angvel;ang2<0&&(ang2=-ang2);var angBias=s1.sweepCoef*ang1+s2.sweepCoef*ang2;if(!userAPI&&!toi.kinematic&&deltax*deltax+deltay*deltay<nape.Config.dynamicSweepLinearThreshold*nape.Config.dynamicSweepLinearThreshold&&angBias<nape.Config.dynamicSweepAngularThreshold)return toi.toi=-1,void(toi.failed=!0);for(var c1=toi.c1,c2=toi.c2,axis=toi.axis,curTOI=lowerBound,curIter=0;;){var dt=curTOI*timeStep,delta=dt-b1.sweepTime;if(0!=delta){b1.sweepTime=dt;var t=delta;if(b1.posx+=b1.velx*t,b1.posy+=b1.vely*t,0!=b1.angvel){var dr=b1.sweep_angvel*delta;if(b1.rot+=dr,dr*dr>1e-4)b1.axisx=Math.sin(b1.rot),b1.axisy=Math.cos(b1.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*b1.axisx+dr*b1.axisy)*m;b1.axisy=(p*b1.axisy-dr*b1.axisx)*m,b1.axisx=nx}}}if(0==s1.type)s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy),s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy);else{for(var p1=s1.polygon,li=p1.lverts.next,cx_ite=p1.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=b1.posx+(b1.axisy*l.x-b1.axisx*l.y),g.y=b1.posy+(l.x*b1.axisx+l.y*b1.axisy),cx_ite=cx_ite.next}var ite=p1.edges.head,cx_ite1=p1.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gnormx=b1.axisy*e.lnormx-b1.axisx*e.lnormy,e.gnormy=e.lnormx*b1.axisx+e.lnormy*b1.axisy,e.gprojection=b1.posx*e.gnormx+b1.posy*e.gnormy+e.lprojection,e.tp0=u.y*e.gnormx-u.x*e.gnormy,e.tp1=v.y*e.gnormx-v.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=p1.gverts.next,e1=ite.elt;ite=ite.next,e1.gnormx=b1.axisy*e1.lnormx-b1.axisx*e1.lnormy,e1.gnormy=e1.lnormx*b1.axisx+e1.lnormy*b1.axisy,e1.gprojection=b1.posx*e1.gnormx+b1.posy*e1.gnormy+e1.lprojection,e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy,e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}var dt1=curTOI*timeStep,delta1=dt1-b2.sweepTime;if(0!=delta1){b2.sweepTime=dt1;var t1=delta1;if(b2.posx+=b2.velx*t1,b2.posy+=b2.vely*t1,0!=b2.angvel){var dr1=b2.sweep_angvel*delta1;if(b2.rot+=dr1,dr1*dr1>1e-4)b2.axisx=Math.sin(b2.rot),b2.axisy=Math.cos(b2.rot);else{var d21=dr1*dr1,p2=1-.5*d21,m1=1-d21*d21/8,nx1=(p2*b2.axisx+dr1*b2.axisy)*m1;b2.axisy=(p2*b2.axisy-dr1*b2.axisx)*m1,b2.axisx=nx1}}}if(0==s2.type)s2.worldCOMx=b2.posx+(b2.axisy*s2.localCOMx-b2.axisx*s2.localCOMy),s2.worldCOMy=b2.posy+(s2.localCOMx*b2.axisx+s2.localCOMy*b2.axisy);else{for(var p3=s2.polygon,li1=p3.lverts.next,cx_ite2=p3.gverts.next;null!=cx_ite2;){var g1=cx_ite2,l1=li1;li1=li1.next,g1.x=b2.posx+(b2.axisy*l1.x-b2.axisx*l1.y),g1.y=b2.posy+(l1.x*b2.axisx+l1.y*b2.axisy),cx_ite2=cx_ite2.next}var ite1=p3.edges.head,cx_ite3=p3.gverts.next,u1=cx_ite3;for(cx_ite3=cx_ite3.next;null!=cx_ite3;){var v2=cx_ite3,e2=ite1.elt;ite1=ite1.next,e2.gnormx=b2.axisy*e2.lnormx-b2.axisx*e2.lnormy,e2.gnormy=e2.lnormx*b2.axisx+e2.lnormy*b2.axisy,e2.gprojection=b2.posx*e2.gnormx+b2.posy*e2.gnormy+e2.lprojection,e2.tp0=u1.y*e2.gnormx-u1.x*e2.gnormy,e2.tp1=v2.y*e2.gnormx-v2.x*e2.gnormy,u1=v2,cx_ite3=cx_ite3.next}var v3=p3.gverts.next,e3=ite1.elt;ite1=ite1.next,e3.gnormx=b2.axisy*e3.lnormx-b2.axisx*e3.lnormy,e3.gnormy=e3.lnormx*b2.axisx+e3.lnormy*b2.axisy,e3.gprojection=b2.posx*e3.gnormx+b2.posy*e3.gnormy+e3.lprojection,e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy,e3.tp1=v3.y*e3.gnormx-v3.x*e3.gnormy}var s11=s1,s21=s2,w1=c1,w2=c2,sep;if(0==s11.type&&0==s21.type){var c11=s11.circle,c21=s21.circle,dist,nx2=0,ny=0;nx2=c21.worldCOMx-c11.worldCOMx,ny=c21.worldCOMy-c11.worldCOMy;var len=Math.sqrt(nx2*nx2+ny*ny);if((dist=len-(c11.radius+c21.radius))<1e100){if(0==len)nx2=1,ny=0;else{var t2=1/len;nx2*=t2,ny*=t2}var t3=c11.radius;w1.x=c11.worldCOMx+nx2*t3,w1.y=c11.worldCOMy+ny*t3;var t4=-c21.radius;w2.x=c21.worldCOMx+nx2*t4,w2.y=c21.worldCOMy+ny*t4,axis.x=nx2,axis.y=ny}sep=dist}else{var swapped=!1;if(0==s11.type&&1==s21.type){var tmp=s11;s11=s21,s21=tmp;var tmp2=w1;w1=w2,w2=tmp2,swapped=!0}if(1==s11.type&&0==s21.type){for(var poly=s11.polygon,circle=s21.circle,best=-1e100,a0=null,cx_ite4=poly.edges.head;null!=cx_ite4;){var a=cx_ite4.elt,dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>1e100){best=dist1;break}dist1>0?dist1>best&&(best=dist1,a0=a):best<0&&dist1>best&&(best=dist1,a0=a),cx_ite4=cx_ite4.next}if(best<1e100){var v0=a0.gp0,v11=a0.gp1,dt2=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt2<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx3=0,ny1=0;nx3=circle.worldCOMx-v0.x,ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx3*nx3+ny1*ny1);if((best=len1-circle.radius)<1e100){if(0==len1)nx3=1,ny1=0;else{var t5=1/len1;nx3*=t5,ny1*=t5}var t6=0;w1.x=v0.x+0*nx3,w1.y=v0.y+0*ny1;var t7=-circle.radius;w2.x=circle.worldCOMx+nx3*t7,w2.y=circle.worldCOMy+ny1*t7,axis.x=nx3,axis.y=ny1}}else if(dt2>=v11.y*a0.gnormx-v11.x*a0.gnormy){var nx4=0,ny2=0;nx4=circle.worldCOMx-v11.x,ny2=circle.worldCOMy-v11.y;var len2=Math.sqrt(nx4*nx4+ny2*ny2);if((best=len2-circle.radius)<1e100){if(0==len2)nx4=1,ny2=0;else{var t8=1/len2;nx4*=t8,ny2*=t8}var t9=0;w1.x=v11.x+0*nx4,w1.y=v11.y+0*ny2;var t10=-circle.radius;w2.x=circle.worldCOMx+nx4*t10,w2.y=circle.worldCOMy+ny2*t10,axis.x=nx4,axis.y=ny2}}else{var t11=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t11,w2.y=circle.worldCOMy+a0.gnormy*t11;var t12=-best;w1.x=w2.x+a0.gnormx*t12,w1.y=w2.y+a0.gnormy*t12,axis.x=a0.gnormx,axis.y=a0.gnormy}}swapped&&(axis.x=-axis.x,axis.y=-axis.y),sep=best}else{for(var p11=s11.polygon,p21=s21.polygon,best1=-1e100,a1=null,a2=null,besti=0,cx_ite5=p11.edges.head;null!=cx_ite5;){for(var a3=cx_ite5.elt,min=1e100,cx_ite6=p21.gverts.next;null!=cx_ite6;){var v4=cx_ite6,k=a3.gnormx*v4.x+a3.gnormy*v4.y;k<min&&(min=k),cx_ite6=cx_ite6.next}if((min-=a3.gprojection)>1e100){best1=min;break}min>0?min>best1&&(best1=min,a1=a3,besti=1):best1<0&&min>best1&&(best1=min,a1=a3,besti=1),cx_ite5=cx_ite5.next}if(best1<1e100){for(var cx_ite7=p21.edges.head;null!=cx_ite7;){for(var a4=cx_ite7.elt,min1=1e100,cx_ite8=p11.gverts.next;null!=cx_ite8;){var v5=cx_ite8,k1=a4.gnormx*v5.x+a4.gnormy*v5.y;k1<min1&&(min1=k1),cx_ite8=cx_ite8.next}if((min1-=a4.gprojection)>1e100){best1=min1;break}min1>0?min1>best1&&(best1=min1,a2=a4,besti=2):best1<0&&min1>best1&&(best1=min1,a2=a4,besti=2),cx_ite7=cx_ite7.next}if(best1<1e100){var q1,q2,ax;if(1==besti)q1=p11,q2=p21,ax=a1;else{q1=p21,q2=p11,ax=a2;var tmp1=w1;w1=w2,w2=tmp1,swapped=!swapped}for(var ay=null,min2=1e100,cx_ite9=q2.edges.head;null!=cx_ite9;){var a5=cx_ite9.elt,k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;k2<min2&&(min2=k2,ay=a5),cx_ite9=cx_ite9.next}if(swapped?(axis.x=-ax.gnormx,axis.y=-ax.gnormy):(axis.x=ax.gnormx,axis.y=ax.gnormy),best1>=0){var v01=ax.gp0,v12=ax.gp1,q0=ay.gp0,q11=ay.gp1,vx=0,vy=0,qx=0,qy=0,vdot=1/((vx=v12.x-v01.x)*vx+(vy=v12.y-v01.y)*vy),qdot=1/((qx=q11.x-q0.x)*qx+(qy=q11.y-q0.y)*qy),t13=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot,t21=-(vx*(v01.x-q11.x)+vy*(v01.y-q11.y))*vdot,s12=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot,s22=-(qx*(q0.x-v12.x)+qy*(q0.y-v12.y))*qdot;t13<0?t13=0:t13>1&&(t13=1),t21<0?t21=0:t21>1&&(t21=1),s12<0?s12=0:s12>1&&(s12=1),s22<0?s22=0:s22>1&&(s22=1);var f1x=0,f1y=0,t14=t13;f1x=v01.x+vx*t14,f1y=v01.y+vy*t14;var f2x=0,f2y=0,t15=t21;f2x=v01.x+vx*t15,f2y=v01.y+vy*t15;var g1x=0,g1y=0,t16=s12;g1x=q0.x+qx*t16,g1y=q0.y+qy*t16;var g2x=0,g2y=0,t17=s22;g2x=q0.x+qx*t17,g2y=q0.y+qy*t17;var dx=0,dy=0,d1=(dx=f1x-q0.x)*dx+(dy=f1y-q0.y)*dy,dx1=0,dy1=0,d22=(dx1=f2x-q11.x)*dx1+(dy1=f2y-q11.y)*dy1,dx2=0,dy2=0,e11=(dx2=g1x-v01.x)*dx2+(dy2=g1y-v01.y)*dy2,dx3=0,dy3=0,e21=(dx3=g2x-v12.x)*dx3+(dy3=g2y-v12.y)*dy3,minfx=0,minfy=0,minq=null;d1<d22?(minfx=f1x,minfy=f1y,minq=q0):(minfx=f2x,minfy=f2y,minq=q11,d1=d22);var mingx=0,mingy=0,minv=null;if(e11<e21?(mingx=g1x,mingy=g1y,minv=v01):(mingx=g2x,mingy=g2y,minv=v12,e11=e21),d1<e11?(w1.x=minfx,w1.y=minfy,w2.x=minq.x,w2.y=minq.y,best1=Math.sqrt(d1)):(w2.x=mingx,w2.y=mingy,w1.x=minv.x,w1.y=minv.y,best1=Math.sqrt(e11)),0!=best1){axis.x=w2.x-w1.x,axis.y=w2.y-w1.y;var t18=1/best1;axis.x*=t18,axis.y*=t18,swapped&&(axis.x=-axis.x,axis.y=-axis.y)}sep=best1}else{var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y,d11=ax.gnormy*c1x-ax.gnormx*c1y,den=1/(d11-d0),t19=(-ax.tp1-d0)*den;if(t19>nape.Config.epsilon){var t20=t19;c0x+=dvx*t19,c0y+=dvy*t19}var t22=(-ax.tp0-d11)*den;if(t22<-nape.Config.epsilon){var t23=t22;c1x+=dvx*t22,c1y+=dvy*t22}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection,c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x,w2.y=c0y;var t24=-c0d;w1.x=w2.x+ax.gnormx*t24,w1.y=w2.y+ax.gnormy*t24,sep=c0d}else{w2.x=c1x,w2.y=c1y;var t25=-c1d;w1.x=w2.x+ax.gnormx*t25,w1.y=w2.y+ax.gnormy*t25,sep=c1d}}}else sep=1e100}else sep=1e100}}var sep1=sep+negRadius,dot=deltax*axis.x+deltay*axis.y;if(sep1<nape.Config.distanceThresholdCCD){if(userAPI)break;var d1x=0,d1y=0;d1x=c1.x-b1.posx,d1y=c1.y-b1.posy;var d2x=0,d2y=0;d2x=c2.x-b2.posx,d2y=c2.y-b2.posy;var proj=dot-b1.sweep_angvel*(axis.y*d1x-axis.x*d1y)+b2.sweep_angvel*(axis.y*d2x-axis.x*d2y);if(proj>0&&(toi.slipped=!0),proj<=0||sep1<.5*nape.Config.distanceThresholdCCD)break}var denom=(angBias-dot)*timeStep;if(denom<=0){curTOI=-1;break}var delta2=sep1/denom;if(delta2<1e-6&&(delta2=1e-6),(curTOI+=delta2)>=1){var dt3=(curTOI=1)*timeStep,delta3=dt3-b1.sweepTime;if(0!=delta3){b1.sweepTime=dt3;var t26=delta3;if(b1.posx+=b1.velx*t26,b1.posy+=b1.vely*t26,0!=b1.angvel){var dr2=b1.sweep_angvel*delta3;if(b1.rot+=dr2,dr2*dr2>1e-4)b1.axisx=Math.sin(b1.rot),b1.axisy=Math.cos(b1.rot);else{var d23=dr2*dr2,p4=1-.5*d23,m2=1-d23*d23/8,nx5=(p4*b1.axisx+dr2*b1.axisy)*m2;b1.axisy=(p4*b1.axisy-dr2*b1.axisx)*m2,b1.axisx=nx5}}}if(0==s1.type)s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy),s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy);else{for(var p5=s1.polygon,li2=p5.lverts.next,cx_ite10=p5.gverts.next;null!=cx_ite10;){var g2=cx_ite10,l2=li2;li2=li2.next,g2.x=b1.posx+(b1.axisy*l2.x-b1.axisx*l2.y),g2.y=b1.posy+(l2.x*b1.axisx+l2.y*b1.axisy),cx_ite10=cx_ite10.next}var ite2=p5.edges.head,cx_ite11=p5.gverts.next,u2=cx_ite11;for(cx_ite11=cx_ite11.next;null!=cx_ite11;){var v6=cx_ite11,e4=ite2.elt;ite2=ite2.next,e4.gnormx=b1.axisy*e4.lnormx-b1.axisx*e4.lnormy,e4.gnormy=e4.lnormx*b1.axisx+e4.lnormy*b1.axisy,e4.gprojection=b1.posx*e4.gnormx+b1.posy*e4.gnormy+e4.lprojection,e4.tp0=u2.y*e4.gnormx-u2.x*e4.gnormy,e4.tp1=v6.y*e4.gnormx-v6.x*e4.gnormy,u2=v6,cx_ite11=cx_ite11.next}var v7=p5.gverts.next,e5=ite2.elt;ite2=ite2.next,e5.gnormx=b1.axisy*e5.lnormx-b1.axisx*e5.lnormy,e5.gnormy=e5.lnormx*b1.axisx+e5.lnormy*b1.axisy,e5.gprojection=b1.posx*e5.gnormx+b1.posy*e5.gnormy+e5.lprojection,e5.tp0=u2.y*e5.gnormx-u2.x*e5.gnormy,e5.tp1=v7.y*e5.gnormx-v7.x*e5.gnormy}var dt4=curTOI*timeStep,delta4=dt4-b2.sweepTime;if(0!=delta4){b2.sweepTime=dt4;var t27=delta4;if(b2.posx+=b2.velx*t27,b2.posy+=b2.vely*t27,0!=b2.angvel){var dr3=b2.sweep_angvel*delta4;if(b2.rot+=dr3,dr3*dr3>1e-4)b2.axisx=Math.sin(b2.rot),b2.axisy=Math.cos(b2.rot);else{var d24=dr3*dr3,p6=1-.5*d24,m3=1-d24*d24/8,nx6=(p6*b2.axisx+dr3*b2.axisy)*m3;b2.axisy=(p6*b2.axisy-dr3*b2.axisx)*m3,b2.axisx=nx6}}}if(0==s2.type)s2.worldCOMx=b2.posx+(b2.axisy*s2.localCOMx-b2.axisx*s2.localCOMy),s2.worldCOMy=b2.posy+(s2.localCOMx*b2.axisx+s2.localCOMy*b2.axisy);else{for(var p7=s2.polygon,li3=p7.lverts.next,cx_ite12=p7.gverts.next;null!=cx_ite12;){var g3=cx_ite12,l3=li3;li3=li3.next,g3.x=b2.posx+(b2.axisy*l3.x-b2.axisx*l3.y),g3.y=b2.posy+(l3.x*b2.axisx+l3.y*b2.axisy),cx_ite12=cx_ite12.next}var ite3=p7.edges.head,cx_ite13=p7.gverts.next,u3=cx_ite13;for(cx_ite13=cx_ite13.next;null!=cx_ite13;){var v8=cx_ite13,e6=ite3.elt;ite3=ite3.next,e6.gnormx=b2.axisy*e6.lnormx-b2.axisx*e6.lnormy,e6.gnormy=e6.lnormx*b2.axisx+e6.lnormy*b2.axisy,e6.gprojection=b2.posx*e6.gnormx+b2.posy*e6.gnormy+e6.lprojection,e6.tp0=u3.y*e6.gnormx-u3.x*e6.gnormy,e6.tp1=v8.y*e6.gnormx-v8.x*e6.gnormy,u3=v8,cx_ite13=cx_ite13.next}var v9=p7.gverts.next,e7=ite3.elt;ite3=ite3.next,e7.gnormx=b2.axisy*e7.lnormx-b2.axisx*e7.lnormy,e7.gnormy=e7.lnormx*b2.axisx+e7.lnormy*b2.axisy,e7.gprojection=b2.posx*e7.gnormx+b2.posy*e7.gnormy+e7.lprojection,e7.tp0=u3.y*e7.gnormx-u3.x*e7.gnormy,e7.tp1=v9.y*e7.gnormx-v9.x*e7.gnormy}var s13=s1,s23=s2,w11=c1,w21=c2,sep2;if(0==s13.type&&0==s23.type){var c12=s13.circle,c22=s23.circle,dist2,nx7=0,ny3=0;nx7=c22.worldCOMx-c12.worldCOMx,ny3=c22.worldCOMy-c12.worldCOMy;var len3=Math.sqrt(nx7*nx7+ny3*ny3);if((dist2=len3-(c12.radius+c22.radius))<1e100){if(0==len3)nx7=1,ny3=0;else{var t28=1/len3;nx7*=t28,ny3*=t28}var t29=c12.radius;w11.x=c12.worldCOMx+nx7*t29,w11.y=c12.worldCOMy+ny3*t29;var t30=-c22.radius;w21.x=c22.worldCOMx+nx7*t30,w21.y=c22.worldCOMy+ny3*t30,axis.x=nx7,axis.y=ny3}sep2=dist2}else{var swapped1=!1;if(0==s13.type&&1==s23.type){var tmp3=s13;s13=s23,s23=tmp3;var tmp21=w11;w11=w21,w21=tmp21,swapped1=!0}if(1==s13.type&&0==s23.type){for(var poly1=s13.polygon,circle1=s23.circle,best2=-1e100,a01=null,cx_ite14=poly1.edges.head;null!=cx_ite14;){var a6=cx_ite14.elt,dist3=a6.gnormx*circle1.worldCOMx+a6.gnormy*circle1.worldCOMy-a6.gprojection-circle1.radius;if(dist3>1e100){best2=dist3;break}dist3>0?dist3>best2&&(best2=dist3,a01=a6):best2<0&&dist3>best2&&(best2=dist3,a01=a6),cx_ite14=cx_ite14.next}if(best2<1e100){var v02=a01.gp0,v13=a01.gp1,dt5=circle1.worldCOMy*a01.gnormx-circle1.worldCOMx*a01.gnormy;if(dt5<=v02.y*a01.gnormx-v02.x*a01.gnormy){var nx8=0,ny4=0;nx8=circle1.worldCOMx-v02.x,ny4=circle1.worldCOMy-v02.y;var len4=Math.sqrt(nx8*nx8+ny4*ny4);if((best2=len4-circle1.radius)<1e100){if(0==len4)nx8=1,ny4=0;else{var t31=1/len4;nx8*=t31,ny4*=t31}var t32=0;w11.x=v02.x+0*nx8,w11.y=v02.y+0*ny4;var t33=-circle1.radius;w21.x=circle1.worldCOMx+nx8*t33,w21.y=circle1.worldCOMy+ny4*t33,axis.x=nx8,axis.y=ny4}}else if(dt5>=v13.y*a01.gnormx-v13.x*a01.gnormy){var nx9=0,ny5=0;nx9=circle1.worldCOMx-v13.x,ny5=circle1.worldCOMy-v13.y;var len5=Math.sqrt(nx9*nx9+ny5*ny5);if((best2=len5-circle1.radius)<1e100){if(0==len5)nx9=1,ny5=0;else{var t34=1/len5;nx9*=t34,ny5*=t34}var t35=0;w11.x=v13.x+0*nx9,w11.y=v13.y+0*ny5;var t36=-circle1.radius;w21.x=circle1.worldCOMx+nx9*t36,w21.y=circle1.worldCOMy+ny5*t36,axis.x=nx9,axis.y=ny5}}else{var t37=-circle1.radius;w21.x=circle1.worldCOMx+a01.gnormx*t37,w21.y=circle1.worldCOMy+a01.gnormy*t37;var t38=-best2;w11.x=w21.x+a01.gnormx*t38,w11.y=w21.y+a01.gnormy*t38,axis.x=a01.gnormx,axis.y=a01.gnormy}}swapped1&&(axis.x=-axis.x,axis.y=-axis.y),sep2=best2}else{for(var p12=s13.polygon,p22=s23.polygon,best3=-1e100,a11=null,a21=null,besti1=0,cx_ite15=p12.edges.head;null!=cx_ite15;){for(var a7=cx_ite15.elt,min3=1e100,cx_ite16=p22.gverts.next;null!=cx_ite16;){var v10=cx_ite16,k3=a7.gnormx*v10.x+a7.gnormy*v10.y;k3<min3&&(min3=k3),cx_ite16=cx_ite16.next}if((min3-=a7.gprojection)>1e100){best3=min3;break}min3>0?min3>best3&&(best3=min3,a11=a7,besti1=1):best3<0&&min3>best3&&(best3=min3,a11=a7,besti1=1),cx_ite15=cx_ite15.next}if(best3<1e100){for(var cx_ite17=p22.edges.head;null!=cx_ite17;){for(var a8=cx_ite17.elt,min4=1e100,cx_ite18=p12.gverts.next;null!=cx_ite18;){var v14=cx_ite18,k4=a8.gnormx*v14.x+a8.gnormy*v14.y;k4<min4&&(min4=k4),cx_ite18=cx_ite18.next}if((min4-=a8.gprojection)>1e100){best3=min4;break}min4>0?min4>best3&&(best3=min4,a21=a8,besti1=2):best3<0&&min4>best3&&(best3=min4,a21=a8,besti1=2),cx_ite17=cx_ite17.next}if(best3<1e100){var q12,q21,ax1;if(1==besti1)q12=p12,q21=p22,ax1=a11;else{q12=p22,q21=p12,ax1=a21;var tmp4=w11;w11=w21,w21=tmp4,swapped1=!swapped1}for(var ay1=null,min5=1e100,cx_ite19=q21.edges.head;null!=cx_ite19;){var a9=cx_ite19.elt,k5=ax1.gnormx*a9.gnormx+ax1.gnormy*a9.gnormy;k5<min5&&(min5=k5,ay1=a9),cx_ite19=cx_ite19.next}if(swapped1?(axis.x=-ax1.gnormx,axis.y=-ax1.gnormy):(axis.x=ax1.gnormx,axis.y=ax1.gnormy),best3>=0){var v03=ax1.gp0,v15=ax1.gp1,q01=ay1.gp0,q13=ay1.gp1,vx1=0,vy1=0,qx1=0,qy1=0,vdot1=1/((vx1=v15.x-v03.x)*vx1+(vy1=v15.y-v03.y)*vy1),qdot1=1/((qx1=q13.x-q01.x)*qx1+(qy1=q13.y-q01.y)*qy1),t110=-(vx1*(v03.x-q01.x)+vy1*(v03.y-q01.y))*vdot1,t210=-(vx1*(v03.x-q13.x)+vy1*(v03.y-q13.y))*vdot1,s14=-(qx1*(q01.x-v03.x)+qy1*(q01.y-v03.y))*qdot1,s24=-(qx1*(q01.x-v15.x)+qy1*(q01.y-v15.y))*qdot1;t110<0?t110=0:t110>1&&(t110=1),t210<0?t210=0:t210>1&&(t210=1),s14<0?s14=0:s14>1&&(s14=1),s24<0?s24=0:s24>1&&(s24=1);var f1x1=0,f1y1=0,t39=t110;f1x1=v03.x+vx1*t39,f1y1=v03.y+vy1*t39;var f2x1=0,f2y1=0,t40=t210;f2x1=v03.x+vx1*t40,f2y1=v03.y+vy1*t40;var g1x1=0,g1y1=0,t41=s14;g1x1=q01.x+qx1*t41,g1y1=q01.y+qy1*t41;var g2x1=0,g2y1=0,t42=s24;g2x1=q01.x+qx1*t42,g2y1=q01.y+qy1*t42;var dx4=0,dy4=0,d12=(dx4=f1x1-q01.x)*dx4+(dy4=f1y1-q01.y)*dy4,dx5=0,dy5=0,d25=(dx5=f2x1-q13.x)*dx5+(dy5=f2y1-q13.y)*dy5,dx6=0,dy6=0,e12=(dx6=g1x1-v03.x)*dx6+(dy6=g1y1-v03.y)*dy6,dx7=0,dy7=0,e22=(dx7=g2x1-v15.x)*dx7+(dy7=g2y1-v15.y)*dy7,minfx1=0,minfy1=0,minq1=null;d12<d25?(minfx1=f1x1,minfy1=f1y1,minq1=q01):(minfx1=f2x1,minfy1=f2y1,minq1=q13,d12=d25);var mingx1=0,mingy1=0,minv1=null;if(e12<e22?(mingx1=g1x1,mingy1=g1y1,minv1=v03):(mingx1=g2x1,mingy1=g2y1,minv1=v15,e12=e22),d12<e12?(w11.x=minfx1,w11.y=minfy1,w21.x=minq1.x,w21.y=minq1.y,best3=Math.sqrt(d12)):(w21.x=mingx1,w21.y=mingy1,w11.x=minv1.x,w11.y=minv1.y,best3=Math.sqrt(e12)),0!=best3){axis.x=w21.x-w11.x,axis.y=w21.y-w11.y;var t43=1/best3;axis.x*=t43,axis.y*=t43,swapped1&&(axis.x=-axis.x,axis.y=-axis.y)}sep2=best3}else{var c0x1=0,c0y1=0;c0x1=ay1.gp0.x,c0y1=ay1.gp0.y;var c1x1=0,c1y1=0,dvx1=0,dvy1=0;dvx1=(c1x1=ay1.gp1.x)-c0x1,dvy1=(c1y1=ay1.gp1.y)-c0y1;var d01=ax1.gnormy*c0x1-ax1.gnormx*c0y1,d13=ax1.gnormy*c1x1-ax1.gnormx*c1y1,den1=1/(d13-d01),t44=(-ax1.tp1-d01)*den1;if(t44>nape.Config.epsilon){var t45=t44;c0x1+=dvx1*t44,c0y1+=dvy1*t44}var t46=(-ax1.tp0-d13)*den1;if(t46<-nape.Config.epsilon){var t47=t46;c1x1+=dvx1*t46,c1y1+=dvy1*t46}var c0d1=c0x1*ax1.gnormx+c0y1*ax1.gnormy-ax1.gprojection,c1d1=c1x1*ax1.gnormx+c1y1*ax1.gnormy-ax1.gprojection;if(c0d1<c1d1){w21.x=c0x1,w21.y=c0y1;var t48=-c0d1;w11.x=w21.x+ax1.gnormx*t48,w11.y=w21.y+ax1.gnormy*t48,sep2=c0d1}else{w21.x=c1x1,w21.y=c1y1;var t49=-c1d1;w11.x=w21.x+ax1.gnormx*t49,w11.y=w21.y+ax1.gnormy*t49,sep2=c1d1}}}else sep2=1e100}else sep2=1e100}}var sep3=sep2+negRadius,dot1=deltax*axis.x+deltay*axis.y;if(sep3<nape.Config.distanceThresholdCCD){if(userAPI)break;var d1x1=0,d1y1=0;d1x1=c1.x-b1.posx,d1y1=c1.y-b1.posy;var d2x1=0,d2y1=0;d2x1=c2.x-b2.posx,d2y1=c2.y-b2.posy;var proj1=dot1-b1.sweep_angvel*(axis.y*d1x1-axis.x*d1y1)+b2.sweep_angvel*(axis.y*d2x1-axis.x*d2y1);if(proj1>0&&(toi.slipped=!0),proj1<=0||sep3<.5*nape.Config.distanceThresholdCCD)break}curTOI=-1;break}if(++curIter>=40){sep1>negRadius&&(toi.failed=!0);break}}toi.toi=curTOI},zpp_nape.geom.ZPP_SweepDistance.staticSweep=function(toi,timeStep,lowerBound,negRadius){var s1=toi.s1,s2=toi.s2,b1=s1.body,b2=s2.body,deltax=0,deltay=0;deltax=-b1.velx,deltay=-b1.vely;var ang1=b1.sweep_angvel;ang1<0&&(ang1=-ang1);for(var angBias=s1.sweepCoef*ang1,c1=toi.c1,c2=toi.c2,axis=toi.axis,curTOI=lowerBound,curIter=0;;){var dt=curTOI*timeStep,delta=dt-b1.sweepTime;if(0!=delta){b1.sweepTime=dt;var t=delta;if(b1.posx+=b1.velx*t,b1.posy+=b1.vely*t,0!=b1.angvel){var dr=b1.sweep_angvel*delta;if(b1.rot+=dr,dr*dr>1e-4)b1.axisx=Math.sin(b1.rot),b1.axisy=Math.cos(b1.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*b1.axisx+dr*b1.axisy)*m;b1.axisy=(p*b1.axisy-dr*b1.axisx)*m,b1.axisx=nx}}}if(0==s1.type)s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy),s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy);else{for(var p1=s1.polygon,li=p1.lverts.next,cx_ite=p1.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=b1.posx+(b1.axisy*l.x-b1.axisx*l.y),g.y=b1.posy+(l.x*b1.axisx+l.y*b1.axisy),cx_ite=cx_ite.next}var ite=p1.edges.head,cx_ite1=p1.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gnormx=b1.axisy*e.lnormx-b1.axisx*e.lnormy,e.gnormy=e.lnormx*b1.axisx+e.lnormy*b1.axisy,e.gprojection=b1.posx*e.gnormx+b1.posy*e.gnormy+e.lprojection,e.tp0=u.y*e.gnormx-u.x*e.gnormy,e.tp1=v.y*e.gnormx-v.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=p1.gverts.next,e1=ite.elt;ite=ite.next,e1.gnormx=b1.axisy*e1.lnormx-b1.axisx*e1.lnormy,e1.gnormy=e1.lnormx*b1.axisx+e1.lnormy*b1.axisy,e1.gprojection=b1.posx*e1.gnormx+b1.posy*e1.gnormy+e1.lprojection,e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy,e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}var s11=s1,s21=s2,w1=c1,w2=c2,sep;if(0==s11.type&&0==s21.type){var c11=s11.circle,c21=s21.circle,dist,nx1=0,ny=0;nx1=c21.worldCOMx-c11.worldCOMx,ny=c21.worldCOMy-c11.worldCOMy;var len=Math.sqrt(nx1*nx1+ny*ny);if((dist=len-(c11.radius+c21.radius))<1e100){if(0==len)nx1=1,ny=0;else{var t1=1/len;nx1*=t1,ny*=t1}var t2=c11.radius;w1.x=c11.worldCOMx+nx1*t2,w1.y=c11.worldCOMy+ny*t2;var t3=-c21.radius;w2.x=c21.worldCOMx+nx1*t3,w2.y=c21.worldCOMy+ny*t3,axis.x=nx1,axis.y=ny}sep=dist}else{var swapped=!1;if(0==s11.type&&1==s21.type){var tmp=s11;s11=s21,s21=tmp;var tmp2=w1;w1=w2,w2=tmp2,swapped=!0}if(1==s11.type&&0==s21.type){for(var poly=s11.polygon,circle=s21.circle,best=-1e100,a0=null,cx_ite2=poly.edges.head;null!=cx_ite2;){var a=cx_ite2.elt,dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>1e100){best=dist1;break}dist1>0?dist1>best&&(best=dist1,a0=a):best<0&&dist1>best&&(best=dist1,a0=a),cx_ite2=cx_ite2.next}if(best<1e100){var v0=a0.gp0,v11=a0.gp1,dt1=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt1<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx2=0,ny1=0;nx2=circle.worldCOMx-v0.x,ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx2*nx2+ny1*ny1);if((best=len1-circle.radius)<1e100){if(0==len1)nx2=1,ny1=0;else{var t4=1/len1;nx2*=t4,ny1*=t4}var t5=0;w1.x=v0.x+0*nx2,w1.y=v0.y+0*ny1;var t6=-circle.radius;w2.x=circle.worldCOMx+nx2*t6,w2.y=circle.worldCOMy+ny1*t6,axis.x=nx2,axis.y=ny1}}else if(dt1>=v11.y*a0.gnormx-v11.x*a0.gnormy){var nx3=0,ny2=0;nx3=circle.worldCOMx-v11.x,ny2=circle.worldCOMy-v11.y;var len2=Math.sqrt(nx3*nx3+ny2*ny2);if((best=len2-circle.radius)<1e100){if(0==len2)nx3=1,ny2=0;else{var t7=1/len2;nx3*=t7,ny2*=t7}var t8=0;w1.x=v11.x+0*nx3,w1.y=v11.y+0*ny2;var t9=-circle.radius;w2.x=circle.worldCOMx+nx3*t9,w2.y=circle.worldCOMy+ny2*t9,axis.x=nx3,axis.y=ny2}}else{var t10=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t10,w2.y=circle.worldCOMy+a0.gnormy*t10;var t11=-best;w1.x=w2.x+a0.gnormx*t11,w1.y=w2.y+a0.gnormy*t11,axis.x=a0.gnormx,axis.y=a0.gnormy}}swapped&&(axis.x=-axis.x,axis.y=-axis.y),sep=best}else{for(var p11=s11.polygon,p2=s21.polygon,best1=-1e100,a1=null,a2=null,besti=0,cx_ite3=p11.edges.head;null!=cx_ite3;){for(var a3=cx_ite3.elt,min=1e100,cx_ite4=p2.gverts.next;null!=cx_ite4;){var v2=cx_ite4,k=a3.gnormx*v2.x+a3.gnormy*v2.y;k<min&&(min=k),cx_ite4=cx_ite4.next}if((min-=a3.gprojection)>1e100){best1=min;break}min>0?min>best1&&(best1=min,a1=a3,besti=1):best1<0&&min>best1&&(best1=min,a1=a3,besti=1),cx_ite3=cx_ite3.next}if(best1<1e100){for(var cx_ite5=p2.edges.head;null!=cx_ite5;){for(var a4=cx_ite5.elt,min1=1e100,cx_ite6=p11.gverts.next;null!=cx_ite6;){var v3=cx_ite6,k1=a4.gnormx*v3.x+a4.gnormy*v3.y;k1<min1&&(min1=k1),cx_ite6=cx_ite6.next}if((min1-=a4.gprojection)>1e100){best1=min1;break}min1>0?min1>best1&&(best1=min1,a2=a4,besti=2):best1<0&&min1>best1&&(best1=min1,a2=a4,besti=2),cx_ite5=cx_ite5.next}if(best1<1e100){var q1,q2,ax;if(1==besti)q1=p11,q2=p2,ax=a1;else{q1=p2,q2=p11,ax=a2;var tmp1=w1;w1=w2,w2=tmp1,swapped=!swapped}for(var ay=null,min2=1e100,cx_ite7=q2.edges.head;null!=cx_ite7;){var a5=cx_ite7.elt,k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;k2<min2&&(min2=k2,ay=a5),cx_ite7=cx_ite7.next}if(swapped?(axis.x=-ax.gnormx,axis.y=-ax.gnormy):(axis.x=ax.gnormx,axis.y=ax.gnormy),best1>=0){var v01=ax.gp0,v12=ax.gp1,q0=ay.gp0,q11=ay.gp1,vx=0,vy=0,qx=0,qy=0,vdot=1/((vx=v12.x-v01.x)*vx+(vy=v12.y-v01.y)*vy),qdot=1/((qx=q11.x-q0.x)*qx+(qy=q11.y-q0.y)*qy),t12=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot,t21=-(vx*(v01.x-q11.x)+vy*(v01.y-q11.y))*vdot,s12=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot,s22=-(qx*(q0.x-v12.x)+qy*(q0.y-v12.y))*qdot;t12<0?t12=0:t12>1&&(t12=1),t21<0?t21=0:t21>1&&(t21=1),s12<0?s12=0:s12>1&&(s12=1),s22<0?s22=0:s22>1&&(s22=1);var f1x=0,f1y=0,t13=t12;f1x=v01.x+vx*t13,f1y=v01.y+vy*t13;var f2x=0,f2y=0,t14=t21;f2x=v01.x+vx*t14,f2y=v01.y+vy*t14;var g1x=0,g1y=0,t15=s12;g1x=q0.x+qx*t15,g1y=q0.y+qy*t15;var g2x=0,g2y=0,t16=s22;g2x=q0.x+qx*t16,g2y=q0.y+qy*t16;var dx=0,dy=0,d1=(dx=f1x-q0.x)*dx+(dy=f1y-q0.y)*dy,dx1=0,dy1=0,d21=(dx1=f2x-q11.x)*dx1+(dy1=f2y-q11.y)*dy1,dx2=0,dy2=0,e11=(dx2=g1x-v01.x)*dx2+(dy2=g1y-v01.y)*dy2,dx3=0,dy3=0,e2=(dx3=g2x-v12.x)*dx3+(dy3=g2y-v12.y)*dy3,minfx=0,minfy=0,minq=null;d1<d21?(minfx=f1x,minfy=f1y,minq=q0):(minfx=f2x,minfy=f2y,minq=q11,d1=d21);var mingx=0,mingy=0,minv=null;if(e11<e2?(mingx=g1x,mingy=g1y,minv=v01):(mingx=g2x,mingy=g2y,minv=v12,e11=e2),d1<e11?(w1.x=minfx,w1.y=minfy,w2.x=minq.x,w2.y=minq.y,best1=Math.sqrt(d1)):(w2.x=mingx,w2.y=mingy,w1.x=minv.x,w1.y=minv.y,best1=Math.sqrt(e11)),0!=best1){axis.x=w2.x-w1.x,axis.y=w2.y-w1.y;var t17=1/best1;axis.x*=t17,axis.y*=t17,swapped&&(axis.x=-axis.x,axis.y=-axis.y)}sep=best1}else{var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y,d11=ax.gnormy*c1x-ax.gnormx*c1y,den=1/(d11-d0),t18=(-ax.tp1-d0)*den;if(t18>nape.Config.epsilon){var t19=t18;c0x+=dvx*t18,c0y+=dvy*t18}var t20=(-ax.tp0-d11)*den;if(t20<-nape.Config.epsilon){var t22=t20;c1x+=dvx*t20,c1y+=dvy*t20}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection,c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x,w2.y=c0y;var t23=-c0d;w1.x=w2.x+ax.gnormx*t23,w1.y=w2.y+ax.gnormy*t23,sep=c0d}else{w2.x=c1x,w2.y=c1y;var t24=-c1d;w1.x=w2.x+ax.gnormx*t24,w1.y=w2.y+ax.gnormy*t24,sep=c1d}}}else sep=1e100}else sep=1e100}}var sep1=sep+negRadius,dot=deltax*axis.x+deltay*axis.y;if(sep1<nape.Config.distanceThresholdCCD){var d1x=0,d1y=0;d1x=c1.x-b1.posx,d1y=c1.y-b1.posy;var proj=dot-b1.sweep_angvel*(axis.y*d1x-axis.x*d1y);if(proj>0&&(toi.slipped=!0),proj<=0||sep1<.5*nape.Config.distanceThresholdCCD)break}var denom=(angBias-dot)*timeStep;if(denom<=0){curTOI=-1;break}var delta1=sep1/denom;if(delta1<1e-6&&(delta1=1e-6),(curTOI+=delta1)>=1){var dt2=(curTOI=1)*timeStep,delta2=dt2-b1.sweepTime;if(0!=delta2){b1.sweepTime=dt2;var t25=delta2;if(b1.posx+=b1.velx*t25,b1.posy+=b1.vely*t25,0!=b1.angvel){var dr1=b1.sweep_angvel*delta2;if(b1.rot+=dr1,dr1*dr1>1e-4)b1.axisx=Math.sin(b1.rot),b1.axisy=Math.cos(b1.rot);else{var d22=dr1*dr1,p3=1-.5*d22,m1=1-d22*d22/8,nx4=(p3*b1.axisx+dr1*b1.axisy)*m1;b1.axisy=(p3*b1.axisy-dr1*b1.axisx)*m1,b1.axisx=nx4}}}if(0==s1.type)s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy),s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy);else{for(var p4=s1.polygon,li1=p4.lverts.next,cx_ite8=p4.gverts.next;null!=cx_ite8;){var g1=cx_ite8,l1=li1;li1=li1.next,g1.x=b1.posx+(b1.axisy*l1.x-b1.axisx*l1.y),g1.y=b1.posy+(l1.x*b1.axisx+l1.y*b1.axisy),cx_ite8=cx_ite8.next}var ite1=p4.edges.head,cx_ite9=p4.gverts.next,u1=cx_ite9;for(cx_ite9=cx_ite9.next;null!=cx_ite9;){var v4=cx_ite9,e3=ite1.elt;ite1=ite1.next,e3.gnormx=b1.axisy*e3.lnormx-b1.axisx*e3.lnormy,e3.gnormy=e3.lnormx*b1.axisx+e3.lnormy*b1.axisy,e3.gprojection=b1.posx*e3.gnormx+b1.posy*e3.gnormy+e3.lprojection,e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy,e3.tp1=v4.y*e3.gnormx-v4.x*e3.gnormy,u1=v4,cx_ite9=cx_ite9.next}var v5=p4.gverts.next,e4=ite1.elt;ite1=ite1.next,e4.gnormx=b1.axisy*e4.lnormx-b1.axisx*e4.lnormy,e4.gnormy=e4.lnormx*b1.axisx+e4.lnormy*b1.axisy,e4.gprojection=b1.posx*e4.gnormx+b1.posy*e4.gnormy+e4.lprojection,e4.tp0=u1.y*e4.gnormx-u1.x*e4.gnormy,e4.tp1=v5.y*e4.gnormx-v5.x*e4.gnormy}var s13=s1,s23=s2,w11=c1,w21=c2,sep2;if(0==s13.type&&0==s23.type){var c12=s13.circle,c22=s23.circle,dist2,nx5=0,ny3=0;nx5=c22.worldCOMx-c12.worldCOMx,ny3=c22.worldCOMy-c12.worldCOMy;var len3=Math.sqrt(nx5*nx5+ny3*ny3);if((dist2=len3-(c12.radius+c22.radius))<1e100){if(0==len3)nx5=1,ny3=0;else{var t26=1/len3;nx5*=t26,ny3*=t26}var t27=c12.radius;w11.x=c12.worldCOMx+nx5*t27,w11.y=c12.worldCOMy+ny3*t27;var t28=-c22.radius;w21.x=c22.worldCOMx+nx5*t28,w21.y=c22.worldCOMy+ny3*t28,axis.x=nx5,axis.y=ny3}sep2=dist2}else{var swapped1=!1;if(0==s13.type&&1==s23.type){var tmp3=s13;s13=s23,s23=tmp3;var tmp21=w11;w11=w21,w21=tmp21,swapped1=!0}if(1==s13.type&&0==s23.type){for(var poly1=s13.polygon,circle1=s23.circle,best2=-1e100,a01=null,cx_ite10=poly1.edges.head;null!=cx_ite10;){var a6=cx_ite10.elt,dist3=a6.gnormx*circle1.worldCOMx+a6.gnormy*circle1.worldCOMy-a6.gprojection-circle1.radius;if(dist3>1e100){best2=dist3;break}dist3>0?dist3>best2&&(best2=dist3,a01=a6):best2<0&&dist3>best2&&(best2=dist3,a01=a6),cx_ite10=cx_ite10.next}if(best2<1e100){var v02=a01.gp0,v13=a01.gp1,dt3=circle1.worldCOMy*a01.gnormx-circle1.worldCOMx*a01.gnormy;if(dt3<=v02.y*a01.gnormx-v02.x*a01.gnormy){var nx6=0,ny4=0;nx6=circle1.worldCOMx-v02.x,ny4=circle1.worldCOMy-v02.y;var len4=Math.sqrt(nx6*nx6+ny4*ny4);if((best2=len4-circle1.radius)<1e100){if(0==len4)nx6=1,ny4=0;else{var t29=1/len4;nx6*=t29,ny4*=t29}var t30=0;w11.x=v02.x+0*nx6,w11.y=v02.y+0*ny4;var t31=-circle1.radius;w21.x=circle1.worldCOMx+nx6*t31,w21.y=circle1.worldCOMy+ny4*t31,axis.x=nx6,axis.y=ny4}}else if(dt3>=v13.y*a01.gnormx-v13.x*a01.gnormy){var nx7=0,ny5=0;nx7=circle1.worldCOMx-v13.x,ny5=circle1.worldCOMy-v13.y;var len5=Math.sqrt(nx7*nx7+ny5*ny5);if((best2=len5-circle1.radius)<1e100){if(0==len5)nx7=1,ny5=0;else{var t32=1/len5;nx7*=t32,ny5*=t32}var t33=0;w11.x=v13.x+0*nx7,w11.y=v13.y+0*ny5;var t34=-circle1.radius;w21.x=circle1.worldCOMx+nx7*t34,w21.y=circle1.worldCOMy+ny5*t34,axis.x=nx7,axis.y=ny5}}else{var t35=-circle1.radius;w21.x=circle1.worldCOMx+a01.gnormx*t35,w21.y=circle1.worldCOMy+a01.gnormy*t35;var t36=-best2;w11.x=w21.x+a01.gnormx*t36,w11.y=w21.y+a01.gnormy*t36,axis.x=a01.gnormx,axis.y=a01.gnormy}}swapped1&&(axis.x=-axis.x,axis.y=-axis.y),sep2=best2}else{for(var p12=s13.polygon,p21=s23.polygon,best3=-1e100,a11=null,a21=null,besti1=0,cx_ite11=p12.edges.head;null!=cx_ite11;){for(var a7=cx_ite11.elt,min3=1e100,cx_ite12=p21.gverts.next;null!=cx_ite12;){var v6=cx_ite12,k3=a7.gnormx*v6.x+a7.gnormy*v6.y;k3<min3&&(min3=k3),cx_ite12=cx_ite12.next}if((min3-=a7.gprojection)>1e100){best3=min3;break}min3>0?min3>best3&&(best3=min3,a11=a7,besti1=1):best3<0&&min3>best3&&(best3=min3,a11=a7,besti1=1),cx_ite11=cx_ite11.next}if(best3<1e100){for(var cx_ite13=p21.edges.head;null!=cx_ite13;){for(var a8=cx_ite13.elt,min4=1e100,cx_ite14=p12.gverts.next;null!=cx_ite14;){var v7=cx_ite14,k4=a8.gnormx*v7.x+a8.gnormy*v7.y;k4<min4&&(min4=k4),cx_ite14=cx_ite14.next}if((min4-=a8.gprojection)>1e100){best3=min4;break}min4>0?min4>best3&&(best3=min4,a21=a8,besti1=2):best3<0&&min4>best3&&(best3=min4,a21=a8,besti1=2),cx_ite13=cx_ite13.next}if(best3<1e100){var q12,q21,ax1;if(1==besti1)q12=p12,q21=p21,ax1=a11;else{q12=p21,q21=p12,ax1=a21;var tmp4=w11;w11=w21,w21=tmp4,swapped1=!swapped1}for(var ay1=null,min5=1e100,cx_ite15=q21.edges.head;null!=cx_ite15;){var a9=cx_ite15.elt,k5=ax1.gnormx*a9.gnormx+ax1.gnormy*a9.gnormy;k5<min5&&(min5=k5,ay1=a9),cx_ite15=cx_ite15.next}if(swapped1?(axis.x=-ax1.gnormx,axis.y=-ax1.gnormy):(axis.x=ax1.gnormx,axis.y=ax1.gnormy),best3>=0){var v03=ax1.gp0,v14=ax1.gp1,q01=ay1.gp0,q13=ay1.gp1,vx1=0,vy1=0,qx1=0,qy1=0,vdot1=1/((vx1=v14.x-v03.x)*vx1+(vy1=v14.y-v03.y)*vy1),qdot1=1/((qx1=q13.x-q01.x)*qx1+(qy1=q13.y-q01.y)*qy1),t110=-(vx1*(v03.x-q01.x)+vy1*(v03.y-q01.y))*vdot1,t210=-(vx1*(v03.x-q13.x)+vy1*(v03.y-q13.y))*vdot1,s14=-(qx1*(q01.x-v03.x)+qy1*(q01.y-v03.y))*qdot1,s24=-(qx1*(q01.x-v14.x)+qy1*(q01.y-v14.y))*qdot1;t110<0?t110=0:t110>1&&(t110=1),t210<0?t210=0:t210>1&&(t210=1),s14<0?s14=0:s14>1&&(s14=1),s24<0?s24=0:s24>1&&(s24=1);var f1x1=0,f1y1=0,t37=t110;f1x1=v03.x+vx1*t37,f1y1=v03.y+vy1*t37;var f2x1=0,f2y1=0,t38=t210;f2x1=v03.x+vx1*t38,f2y1=v03.y+vy1*t38;var g1x1=0,g1y1=0,t39=s14;g1x1=q01.x+qx1*t39,g1y1=q01.y+qy1*t39;var g2x1=0,g2y1=0,t40=s24;g2x1=q01.x+qx1*t40,g2y1=q01.y+qy1*t40;var dx4=0,dy4=0,d12=(dx4=f1x1-q01.x)*dx4+(dy4=f1y1-q01.y)*dy4,dx5=0,dy5=0,d23=(dx5=f2x1-q13.x)*dx5+(dy5=f2y1-q13.y)*dy5,dx6=0,dy6=0,e12=(dx6=g1x1-v03.x)*dx6+(dy6=g1y1-v03.y)*dy6,dx7=0,dy7=0,e21=(dx7=g2x1-v14.x)*dx7+(dy7=g2y1-v14.y)*dy7,minfx1=0,minfy1=0,minq1=null;d12<d23?(minfx1=f1x1,minfy1=f1y1,minq1=q01):(minfx1=f2x1,minfy1=f2y1,minq1=q13,d12=d23);var mingx1=0,mingy1=0,minv1=null;if(e12<e21?(mingx1=g1x1,mingy1=g1y1,minv1=v03):(mingx1=g2x1,mingy1=g2y1,minv1=v14,e12=e21),d12<e12?(w11.x=minfx1,w11.y=minfy1,w21.x=minq1.x,w21.y=minq1.y,best3=Math.sqrt(d12)):(w21.x=mingx1,w21.y=mingy1,w11.x=minv1.x,w11.y=minv1.y,best3=Math.sqrt(e12)),0!=best3){axis.x=w21.x-w11.x,axis.y=w21.y-w11.y;var t41=1/best3;axis.x*=t41,axis.y*=t41,swapped1&&(axis.x=-axis.x,axis.y=-axis.y)}sep2=best3}else{var c0x1=0,c0y1=0;c0x1=ay1.gp0.x,c0y1=ay1.gp0.y;var c1x1=0,c1y1=0,dvx1=0,dvy1=0;dvx1=(c1x1=ay1.gp1.x)-c0x1,dvy1=(c1y1=ay1.gp1.y)-c0y1;var d01=ax1.gnormy*c0x1-ax1.gnormx*c0y1,d13=ax1.gnormy*c1x1-ax1.gnormx*c1y1,den1=1/(d13-d01),t42=(-ax1.tp1-d01)*den1;if(t42>nape.Config.epsilon){var t43=t42;c0x1+=dvx1*t42,c0y1+=dvy1*t42}var t44=(-ax1.tp0-d13)*den1;if(t44<-nape.Config.epsilon){var t45=t44;c1x1+=dvx1*t44,c1y1+=dvy1*t44}var c0d1=c0x1*ax1.gnormx+c0y1*ax1.gnormy-ax1.gprojection,c1d1=c1x1*ax1.gnormx+c1y1*ax1.gnormy-ax1.gprojection;if(c0d1<c1d1){w21.x=c0x1,w21.y=c0y1;var t46=-c0d1;w11.x=w21.x+ax1.gnormx*t46,w11.y=w21.y+ax1.gnormy*t46,sep2=c0d1}else{w21.x=c1x1,w21.y=c1y1;var t47=-c1d1;w11.x=w21.x+ax1.gnormx*t47,w11.y=w21.y+ax1.gnormy*t47,sep2=c1d1}}}else sep2=1e100}else sep2=1e100}}var sep3=sep2+negRadius,dot1=deltax*axis.x+deltay*axis.y;if(sep3<nape.Config.distanceThresholdCCD){var d1x1=0,d1y1=0;d1x1=c1.x-b1.posx,d1y1=c1.y-b1.posy;var proj1=dot1-b1.sweep_angvel*(axis.y*d1x1-axis.x*d1y1);if(proj1>0&&(toi.slipped=!0),proj1<=0||sep3<.5*nape.Config.distanceThresholdCCD)break}curTOI=-1;break}if(++curIter>=40){sep1>negRadius&&(toi.failed=!0);break}}toi.toi=curTOI},zpp_nape.geom.ZPP_SweepDistance.distanceBody=function(b1,b2,w1,w2){var t1,t2,ax;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?t1=new zpp_nape.geom.ZPP_Vec2:(t1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=t1.next,t1.next=null),t1.weak=!1,null==zpp_nape.geom.ZPP_Vec2.zpp_pool?t2=new zpp_nape.geom.ZPP_Vec2:(t2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=t2.next,t2.next=null),t2.weak=!1,null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ax=new zpp_nape.geom.ZPP_Vec2:(ax=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ax.next,ax.next=null),ax.weak=!1;for(var min=1e100,cx_ite=b1.shapes.head;null!=cx_ite;){for(var s1=cx_ite.elt,cx_ite1=b2.shapes.head;null!=cx_ite1;){var s2,s11=s1,s21=cx_ite1.elt,w11=t1,w21=t2,upperBound=min,dist;if(null==upperBound&&(upperBound=1e100),0==s11.type&&0==s21.type){var c1=s11.circle,c2=s21.circle,dist1,nx=0,ny=0;nx=c2.worldCOMx-c1.worldCOMx,ny=c2.worldCOMy-c1.worldCOMy;var len=Math.sqrt(nx*nx+ny*ny);if((dist1=len-(c1.radius+c2.radius))<upperBound){if(0==len)nx=1,ny=0;else{var t=1/len;nx*=t,ny*=t}var t3=c1.radius;w11.x=c1.worldCOMx+nx*t3,w11.y=c1.worldCOMy+ny*t3;var t4=-c2.radius;w21.x=c2.worldCOMx+nx*t4,w21.y=c2.worldCOMy+ny*t4,ax.x=nx,ax.y=ny}dist=dist1}else{var swapped=!1;if(0==s11.type&&1==s21.type){var tmp=s11;s11=s21,s21=tmp;var tmp2=w11;w11=w21,w21=tmp2,swapped=!0}if(1==s11.type&&0==s21.type){for(var poly=s11.polygon,circle=s21.circle,best=-1e100,a0=null,cx_ite2=poly.edges.head;null!=cx_ite2;){var a=cx_ite2.elt,dist2=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist2>upperBound){best=dist2;break}dist2>0?dist2>best&&(best=dist2,a0=a):best<0&&dist2>best&&(best=dist2,a0=a),cx_ite2=cx_ite2.next}if(best<upperBound){var v0=a0.gp0,v1=a0.gp1,dt=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx1=0,ny1=0;nx1=circle.worldCOMx-v0.x,ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx1*nx1+ny1*ny1);if((best=len1-circle.radius)<upperBound){if(0==len1)nx1=1,ny1=0;else{var t5=1/len1;nx1*=t5,ny1*=t5}var t6=0;w11.x=v0.x+0*nx1,w11.y=v0.y+0*ny1;var t7=-circle.radius;w21.x=circle.worldCOMx+nx1*t7,w21.y=circle.worldCOMy+ny1*t7,ax.x=nx1,ax.y=ny1}}else if(dt>=v1.y*a0.gnormx-v1.x*a0.gnormy){var nx2=0,ny2=0;nx2=circle.worldCOMx-v1.x,ny2=circle.worldCOMy-v1.y;var len2=Math.sqrt(nx2*nx2+ny2*ny2);if((best=len2-circle.radius)<upperBound){if(0==len2)nx2=1,ny2=0;else{var t8=1/len2;nx2*=t8,ny2*=t8}var t9=0;w11.x=v1.x+0*nx2,w11.y=v1.y+0*ny2;var t10=-circle.radius;w21.x=circle.worldCOMx+nx2*t10,w21.y=circle.worldCOMy+ny2*t10,ax.x=nx2,ax.y=ny2}}else{var t11=-circle.radius;w21.x=circle.worldCOMx+a0.gnormx*t11,w21.y=circle.worldCOMy+a0.gnormy*t11;var t12=-best;w11.x=w21.x+a0.gnormx*t12,w11.y=w21.y+a0.gnormy*t12,ax.x=a0.gnormx,ax.y=a0.gnormy}}swapped&&(ax.x=-ax.x,ax.y=-ax.y),dist=best}else{for(var p1=s11.polygon,p2=s21.polygon,best1=-1e100,a1=null,a2=null,besti=0,cx_ite3=p1.edges.head;null!=cx_ite3;){for(var a3=cx_ite3.elt,min1=1e100,cx_ite4=p2.gverts.next;null!=cx_ite4;){var v=cx_ite4,k=a3.gnormx*v.x+a3.gnormy*v.y;k<min1&&(min1=k),cx_ite4=cx_ite4.next}if((min1-=a3.gprojection)>upperBound){best1=min1;break}min1>0?min1>best1&&(best1=min1,a1=a3,besti=1):best1<0&&min1>best1&&(best1=min1,a1=a3,besti=1),cx_ite3=cx_ite3.next}if(best1<upperBound){for(var cx_ite5=p2.edges.head;null!=cx_ite5;){for(var a4=cx_ite5.elt,min2=1e100,cx_ite6=p1.gverts.next;null!=cx_ite6;){var v2=cx_ite6,k1=a4.gnormx*v2.x+a4.gnormy*v2.y;k1<min2&&(min2=k1),cx_ite6=cx_ite6.next}if((min2-=a4.gprojection)>upperBound){best1=min2;break}min2>0?min2>best1&&(best1=min2,a2=a4,besti=2):best1<0&&min2>best1&&(best1=min2,a2=a4,besti=2),cx_ite5=cx_ite5.next}if(best1<upperBound){var q1,q2,ax1;if(1==besti)q1=p1,q2=p2,ax1=a1;else{q1=p2,q2=p1,ax1=a2;var tmp1=w11;w11=w21,w21=tmp1,swapped=!swapped}for(var ay=null,min3=1e100,cx_ite7=q2.edges.head;null!=cx_ite7;){var a5=cx_ite7.elt,k2=ax1.gnormx*a5.gnormx+ax1.gnormy*a5.gnormy;k2<min3&&(min3=k2,ay=a5),cx_ite7=cx_ite7.next}if(swapped?(ax.x=-ax1.gnormx,ax.y=-ax1.gnormy):(ax.x=ax1.gnormx,ax.y=ax1.gnormy),best1>=0){var v01=ax1.gp0,v11=ax1.gp1,q0=ay.gp0,q11=ay.gp1,vx=0,vy=0,qx=0,qy=0,vdot=1/((vx=v11.x-v01.x)*vx+(vy=v11.y-v01.y)*vy),qdot=1/((qx=q11.x-q0.x)*qx+(qy=q11.y-q0.y)*qy),t13=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot,t21=-(vx*(v01.x-q11.x)+vy*(v01.y-q11.y))*vdot,s12=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot,s22=-(qx*(q0.x-v11.x)+qy*(q0.y-v11.y))*qdot;t13<0?t13=0:t13>1&&(t13=1),t21<0?t21=0:t21>1&&(t21=1),s12<0?s12=0:s12>1&&(s12=1),s22<0?s22=0:s22>1&&(s22=1);var f1x=0,f1y=0,t14=t13;f1x=v01.x+vx*t14,f1y=v01.y+vy*t14;var f2x=0,f2y=0,t15=t21;f2x=v01.x+vx*t15,f2y=v01.y+vy*t15;var g1x=0,g1y=0,t16=s12;g1x=q0.x+qx*t16,g1y=q0.y+qy*t16;var g2x=0,g2y=0,t17=s22;g2x=q0.x+qx*t17,g2y=q0.y+qy*t17;var dx=0,dy=0,d1=(dx=f1x-q0.x)*dx+(dy=f1y-q0.y)*dy,dx1=0,dy1=0,d2=(dx1=f2x-q11.x)*dx1+(dy1=f2y-q11.y)*dy1,dx2=0,dy2=0,e1=(dx2=g1x-v01.x)*dx2+(dy2=g1y-v01.y)*dy2,dx3=0,dy3=0,e2=(dx3=g2x-v11.x)*dx3+(dy3=g2y-v11.y)*dy3,minfx=0,minfy=0,minq=null;d1<d2?(minfx=f1x,minfy=f1y,minq=q0):(minfx=f2x,minfy=f2y,minq=q11,d1=d2);var mingx=0,mingy=0,minv=null;if(e1<e2?(mingx=g1x,mingy=g1y,minv=v01):(mingx=g2x,mingy=g2y,minv=v11,e1=e2),d1<e1?(w11.x=minfx,w11.y=minfy,w21.x=minq.x,w21.y=minq.y,best1=Math.sqrt(d1)):(w21.x=mingx,w21.y=mingy,w11.x=minv.x,w11.y=minv.y,best1=Math.sqrt(e1)),0!=best1){ax.x=w21.x-w11.x,ax.y=w21.y-w11.y;var t18=1/best1;ax.x*=t18,ax.y*=t18,swapped&&(ax.x=-ax.x,ax.y=-ax.y)}dist=best1}else{var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax1.gnormy*c0x-ax1.gnormx*c0y,d11=ax1.gnormy*c1x-ax1.gnormx*c1y,den=1/(d11-d0),t19=(-ax1.tp1-d0)*den;if(t19>nape.Config.epsilon){var t20=t19;c0x+=dvx*t19,c0y+=dvy*t19}var t22=(-ax1.tp0-d11)*den;if(t22<-nape.Config.epsilon){var t23=t22;c1x+=dvx*t22,c1y+=dvy*t22}var c0d=c0x*ax1.gnormx+c0y*ax1.gnormy-ax1.gprojection,c1d=c1x*ax1.gnormx+c1y*ax1.gnormy-ax1.gprojection;if(c0d<c1d){w21.x=c0x,w21.y=c0y;var t24=-c0d;w11.x=w21.x+ax1.gnormx*t24,w11.y=w21.y+ax1.gnormy*t24,dist=c0d}else{w21.x=c1x,w21.y=c1y;var t25=-c1d;w11.x=w21.x+ax1.gnormx*t25,w11.y=w21.y+ax1.gnormy*t25,dist=c1d}}}else dist=upperBound}else dist=upperBound}}dist<min&&(min=dist,w1.x=t1.x,w1.y=t1.y,w2.x=t2.x,w2.y=t2.y),cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}var o=t1;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o;var o1=t2;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1;var o2=ax;return null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,min},zpp_nape.geom.ZPP_SweepDistance.distance=function(s1,s2,w1,w2,axis,upperBound){if(null==upperBound&&(upperBound=1e100),0==s1.type&&0==s2.type){var c1=s1.circle,c2=s2.circle,dist,nx=0,ny=0;nx=c2.worldCOMx-c1.worldCOMx,ny=c2.worldCOMy-c1.worldCOMy;var len=Math.sqrt(nx*nx+ny*ny);if((dist=len-(c1.radius+c2.radius))<upperBound){if(0==len)nx=1,ny=0;else{var t=1/len;nx*=t,ny*=t}var t1=c1.radius;w1.x=c1.worldCOMx+nx*t1,w1.y=c1.worldCOMy+ny*t1;var t2=-c2.radius;w2.x=c2.worldCOMx+nx*t2,w2.y=c2.worldCOMy+ny*t2,axis.x=nx,axis.y=ny}return dist}var swapped=!1;if(0==s1.type&&1==s2.type){var tmp=s1;s1=s2,s2=tmp;var tmp2=w1;w1=w2,w2=tmp2,swapped=!0}if(1==s1.type&&0==s2.type){for(var poly=s1.polygon,circle=s2.circle,best=-1e100,a0=null,cx_ite=poly.edges.head;null!=cx_ite;){var a=cx_ite.elt,dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>upperBound){best=dist1;break}dist1>0?dist1>best&&(best=dist1,a0=a):best<0&&dist1>best&&(best=dist1,a0=a),cx_ite=cx_ite.next}if(best<upperBound){var v0=a0.gp0,v1=a0.gp1,dt=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx1=0,ny1=0;nx1=circle.worldCOMx-v0.x,ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx1*nx1+ny1*ny1);if((best=len1-circle.radius)<upperBound){if(0==len1)nx1=1,ny1=0;else{var t3=1/len1;nx1*=t3,ny1*=t3}var t4=0;w1.x=v0.x+0*nx1,w1.y=v0.y+0*ny1;var t5=-circle.radius;w2.x=circle.worldCOMx+nx1*t5,w2.y=circle.worldCOMy+ny1*t5,axis.x=nx1,axis.y=ny1}}else if(dt>=v1.y*a0.gnormx-v1.x*a0.gnormy){var nx2=0,ny2=0;nx2=circle.worldCOMx-v1.x,ny2=circle.worldCOMy-v1.y;var len2=Math.sqrt(nx2*nx2+ny2*ny2);if((best=len2-circle.radius)<upperBound){if(0==len2)nx2=1,ny2=0;else{var t6=1/len2;nx2*=t6,ny2*=t6}var t7=0;w1.x=v1.x+0*nx2,w1.y=v1.y+0*ny2;var t8=-circle.radius;w2.x=circle.worldCOMx+nx2*t8,w2.y=circle.worldCOMy+ny2*t8,axis.x=nx2,axis.y=ny2}}else{var t9=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t9,w2.y=circle.worldCOMy+a0.gnormy*t9;var t10=-best;w1.x=w2.x+a0.gnormx*t10,w1.y=w2.y+a0.gnormy*t10,axis.x=a0.gnormx,axis.y=a0.gnormy}}return swapped&&(axis.x=-axis.x,axis.y=-axis.y),best}for(var p1=s1.polygon,p2=s2.polygon,best1=-1e100,a1=null,a2=null,besti=0,cx_ite1=p1.edges.head;null!=cx_ite1;){for(var a3=cx_ite1.elt,min=1e100,cx_ite2=p2.gverts.next;null!=cx_ite2;){var v=cx_ite2,k=a3.gnormx*v.x+a3.gnormy*v.y;k<min&&(min=k),cx_ite2=cx_ite2.next}if((min-=a3.gprojection)>upperBound){best1=min;break}min>0?min>best1&&(best1=min,a1=a3,besti=1):best1<0&&min>best1&&(best1=min,a1=a3,besti=1),cx_ite1=cx_ite1.next}if(best1<upperBound){for(var cx_ite3=p2.edges.head;null!=cx_ite3;){for(var a4=cx_ite3.elt,min1=1e100,cx_ite4=p1.gverts.next;null!=cx_ite4;){var v2=cx_ite4,k1=a4.gnormx*v2.x+a4.gnormy*v2.y;k1<min1&&(min1=k1),cx_ite4=cx_ite4.next}if((min1-=a4.gprojection)>upperBound){best1=min1;break}min1>0?min1>best1&&(best1=min1,a2=a4,besti=2):best1<0&&min1>best1&&(best1=min1,a2=a4,besti=2),cx_ite3=cx_ite3.next}if(best1<upperBound){var q1,q2,ax;if(1==besti)q1=p1,q2=p2,ax=a1;else{q1=p2,q2=p1,ax=a2;var tmp1=w1;w1=w2,w2=tmp1,swapped=!swapped}for(var ay=null,min2=1e100,cx_ite5=q2.edges.head;null!=cx_ite5;){var a5=cx_ite5.elt,k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;k2<min2&&(min2=k2,ay=a5),cx_ite5=cx_ite5.next}if(swapped?(axis.x=-ax.gnormx,axis.y=-ax.gnormy):(axis.x=ax.gnormx,axis.y=ax.gnormy),best1>=0){var v01=ax.gp0,v11=ax.gp1,q0=ay.gp0,q11=ay.gp1,vx=0,vy=0,qx=0,qy=0,vdot=1/((vx=v11.x-v01.x)*vx+(vy=v11.y-v01.y)*vy),qdot=1/((qx=q11.x-q0.x)*qx+(qy=q11.y-q0.y)*qy),t11=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot,t21=-(vx*(v01.x-q11.x)+vy*(v01.y-q11.y))*vdot,s11=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot,s21=-(qx*(q0.x-v11.x)+qy*(q0.y-v11.y))*qdot;t11<0?t11=0:t11>1&&(t11=1),t21<0?t21=0:t21>1&&(t21=1),s11<0?s11=0:s11>1&&(s11=1),s21<0?s21=0:s21>1&&(s21=1);var f1x=0,f1y=0,t12=t11;f1x=v01.x+vx*t12,f1y=v01.y+vy*t12;var f2x=0,f2y=0,t13=t21;f2x=v01.x+vx*t13,f2y=v01.y+vy*t13;var g1x=0,g1y=0,t14=s11;g1x=q0.x+qx*t14,g1y=q0.y+qy*t14;var g2x=0,g2y=0,t15=s21;g2x=q0.x+qx*t15,g2y=q0.y+qy*t15;var dx=0,dy=0,d1=(dx=f1x-q0.x)*dx+(dy=f1y-q0.y)*dy,dx1=0,dy1=0,d2=(dx1=f2x-q11.x)*dx1+(dy1=f2y-q11.y)*dy1,dx2=0,dy2=0,e1=(dx2=g1x-v01.x)*dx2+(dy2=g1y-v01.y)*dy2,dx3=0,dy3=0,e2=(dx3=g2x-v11.x)*dx3+(dy3=g2y-v11.y)*dy3,minfx=0,minfy=0,minq=null;d1<d2?(minfx=f1x,minfy=f1y,minq=q0):(minfx=f2x,minfy=f2y,minq=q11,d1=d2);var mingx=0,mingy=0,minv=null;if(e1<e2?(mingx=g1x,mingy=g1y,minv=v01):(mingx=g2x,mingy=g2y,minv=v11,e1=e2),d1<e1?(w1.x=minfx,w1.y=minfy,w2.x=minq.x,w2.y=minq.y,best1=Math.sqrt(d1)):(w2.x=mingx,w2.y=mingy,w1.x=minv.x,w1.y=minv.y,best1=Math.sqrt(e1)),0!=best1){axis.x=w2.x-w1.x,axis.y=w2.y-w1.y;var t16=1/best1;axis.x*=t16,axis.y*=t16,swapped&&(axis.x=-axis.x,axis.y=-axis.y)}return best1}var c0x=0,c0y=0;c0x=ay.gp0.x,c0y=ay.gp0.y;var c1x=0,c1y=0,dvx=0,dvy=0;dvx=(c1x=ay.gp1.x)-c0x,dvy=(c1y=ay.gp1.y)-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y,d11=ax.gnormy*c1x-ax.gnormx*c1y,den=1/(d11-d0),t17=(-ax.tp1-d0)*den;if(t17>nape.Config.epsilon){var t18=t17;c0x+=dvx*t17,c0y+=dvy*t17}var t19=(-ax.tp0-d11)*den;if(t19<-nape.Config.epsilon){var t20=t19;c1x+=dvx*t19,c1y+=dvy*t19}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection,c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x,w2.y=c0y;var t22=-c0d;return w1.x=w2.x+ax.gnormx*t22,w1.y=w2.y+ax.gnormy*t22,c0d}w2.x=c1x,w2.y=c1y;var t23=-c1d;return w1.x=w2.x+ax.gnormx*t23,w1.y=w2.y+ax.gnormy*t23,c1d}return upperBound}return upperBound},zpp_nape.geom.ZPP_SweepDistance.prototype.__class__=zpp_nape.geom.ZPP_SweepDistance,zpp_nape.geom.ZPP_PartitionPair=$hxClasses["zpp_nape.geom.ZPP_PartitionPair"]=function(){this.node=null,this.di=0,this.id=0,this.b=null,this.a=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null},zpp_nape.geom.ZPP_PartitionPair.__name__=["zpp_nape","geom","ZPP_PartitionPair"],zpp_nape.geom.ZPP_PartitionPair.get=function(a,b){var ret;return null==zpp_nape.geom.ZPP_PartitionPair.zpp_pool?ret=new zpp_nape.geom.ZPP_PartitionPair:(ret=zpp_nape.geom.ZPP_PartitionPair.zpp_pool,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=ret.next,ret.next=null),ret.a=a,ret.b=b,a.id<b.id?(ret.id=a.id,ret.di=b.id):(ret.id=b.id,ret.di=a.id),ret},zpp_nape.geom.ZPP_PartitionPair.edge_swap=function(a,b){var t=a.node;a.node=b.node,b.node=t},zpp_nape.geom.ZPP_PartitionPair.edge_lt=function(a,b){return!(a.id>=b.id)||a.id==b.id&&a.di<b.di},zpp_nape.geom.ZPP_PartitionPair.prototype.next=null,zpp_nape.geom.ZPP_PartitionPair.prototype.elem=function(){return this},zpp_nape.geom.ZPP_PartitionPair.prototype.begin=function(){return this.next},zpp_nape.geom.ZPP_PartitionPair.prototype._inuse=null,zpp_nape.geom.ZPP_PartitionPair.prototype.modified=null,zpp_nape.geom.ZPP_PartitionPair.prototype.pushmod=null,zpp_nape.geom.ZPP_PartitionPair.prototype.length=null,zpp_nape.geom.ZPP_PartitionPair.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.geom.ZPP_PartitionPair.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.geom.ZPP_PartitionPair.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.geom.ZPP_PartitionPair.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.geom.ZPP_PartitionPair.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.geom.ZPP_PartitionPair.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.geom.ZPP_PartitionPair.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.geom.ZPP_PartitionPair.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.geom.ZPP_PartitionPair.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.geom.ZPP_PartitionPair.prototype.clear=function(){},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_clear=function(){},zpp_nape.geom.ZPP_PartitionPair.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.geom.ZPP_PartitionPair.prototype.empty=function(){return null==this.next},zpp_nape.geom.ZPP_PartitionPair.prototype.size=function(){return this.length},zpp_nape.geom.ZPP_PartitionPair.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.front=function(){return this.next},zpp_nape.geom.ZPP_PartitionPair.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.geom.ZPP_PartitionPair.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.geom.ZPP_PartitionPair.prototype.free=function(){this.a=this.b=null,this.node=null},zpp_nape.geom.ZPP_PartitionPair.prototype.alloc=function(){},zpp_nape.geom.ZPP_PartitionPair.prototype.a=null,zpp_nape.geom.ZPP_PartitionPair.prototype.b=null,zpp_nape.geom.ZPP_PartitionPair.prototype.id=null,zpp_nape.geom.ZPP_PartitionPair.prototype.di=null,zpp_nape.geom.ZPP_PartitionPair.prototype.node=null,zpp_nape.geom.ZPP_PartitionPair.prototype.__class__=zpp_nape.geom.ZPP_PartitionPair,zpp_nape.geom.ZPP_Triangular=$hxClasses["zpp_nape.geom.ZPP_Triangular"]=function(){},zpp_nape.geom.ZPP_Triangular.__name__=["zpp_nape","geom","ZPP_Triangular"],zpp_nape.geom.ZPP_Triangular.lt=function(p,q){return p.y<q.y||p.y==q.y&&p.x<q.x},zpp_nape.geom.ZPP_Triangular.right_turn=function(a,b,c){var ux=0,uy=0;ux=c.x-b.x,uy=c.y-b.y;var vx=0,vy=0;return vx=b.x-a.x,(vy=b.y-a.y)*ux-vx*uy},zpp_nape.geom.ZPP_Triangular.delaunay=function(A,B,C,D){var ux=0,uy=0,vx=0,vy=0,tmp,tmp1,tmp2;return ux=C.x-B.x,uy=C.y-B.y,vx=B.x-A.x,(vy=B.y-A.y)*ux-vx*uy>=0?tmp2=!0:(ux=D.x-C.x,uy=D.y-C.y,vx=C.x-B.x,tmp2=(vy=C.y-B.y)*ux-vx*uy>=0),tmp2?tmp1=!0:(ux=A.x-D.x,uy=A.y-D.y,vx=D.x-C.x,tmp1=(vy=D.y-C.y)*ux-vx*uy>=0),tmp1?tmp=!0:(ux=B.x-A.x,uy=B.y-A.y,vx=A.x-D.x,tmp=(vy=A.y-D.y)*ux-vx*uy>=0),!!tmp||B.x*(C.y*D.mag-C.mag*D.y)-C.x*(B.y*D.mag-B.mag*D.y)+D.x*(B.y*C.mag-B.mag*C.y)-(A.x*(C.y*D.mag-C.mag*D.y)-C.x*(A.y*D.mag-A.mag*D.y)+D.x*(A.y*C.mag-A.mag*C.y))+(A.x*(B.y*D.mag-B.mag*D.y)-B.x*(A.y*D.mag-A.mag*D.y)+D.x*(A.y*B.mag-A.mag*B.y))-(A.x*(B.y*C.mag-B.mag*C.y)-B.x*(A.y*C.mag-A.mag*C.y)+C.x*(A.y*B.mag-A.mag*B.y))>0},zpp_nape.geom.ZPP_Triangular.optimise=function(P){var F=P.vertices,L=P.vertices,edgeStack;if(null!=F)for(var nite=F;;){var p=nite;if(p.sort(),p.mag=p.x*p.x+p.y*p.y,(nite=nite.next)==L)break}null==zpp_nape.geom.ZPP_Triangular.edgeSet&&(null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?zpp_nape.geom.ZPP_Triangular.edgeSet=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(zpp_nape.geom.ZPP_Triangular.edgeSet=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=zpp_nape.geom.ZPP_Triangular.edgeSet.next,zpp_nape.geom.ZPP_Triangular.edgeSet.next=null),zpp_nape.geom.ZPP_Triangular.edgeSet.lt=zpp_nape.geom.ZPP_PartitionPair.edge_lt,zpp_nape.geom.ZPP_Triangular.edgeSet.swapped=zpp_nape.geom.ZPP_PartitionPair.edge_swap),null==zpp_nape.geom.ZPP_PartitionPair.zpp_pool?edgeStack=new zpp_nape.geom.ZPP_PartitionPair:(edgeStack=zpp_nape.geom.ZPP_PartitionPair.zpp_pool,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=edgeStack.next,edgeStack.next=null);var F1=P.vertices,L1=P.vertices;if(null!=F1)for(var nite1=F1;;){var p1=nite1,q0=p1.next;p1.diagonals.reverse();for(var cx_ite=p1.diagonals.head;null!=cx_ite;){var q=cx_ite.elt;if(q.id<p1.id)q0=q,cx_ite=cx_ite.next;else{var q1=null==cx_ite.next?p1.prev:cx_ite.next.elt;if(!zpp_nape.geom.ZPP_Triangular.delaunay(p1,q0,q,q1)){var ret;null==zpp_nape.geom.ZPP_PartitionPair.zpp_pool?ret=new zpp_nape.geom.ZPP_PartitionPair:(ret=zpp_nape.geom.ZPP_PartitionPair.zpp_pool,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=ret.next,ret.next=null),ret.a=p1,ret.b=q,p1.id<q.id?(ret.id=p1.id,ret.di=q.id):(ret.id=q.id,ret.di=p1.id);var edge=ret;edgeStack.add(edge),edge.node=zpp_nape.geom.ZPP_Triangular.edgeSet.insert(edge)}q0=q,cx_ite=cx_ite.next}}if((nite1=nite1.next)==L1)break}for(;null!=edgeStack.next;){for(var edge1=edgeStack.pop_unsafe(),A=edge1.a,C=edge1.b,B=A.next,D=null,cx_ite1=A.diagonals.head;null!=cx_ite1;){var p2=cx_ite1.elt;if(p2==C){D=null==(cx_ite1=cx_ite1.next)?A.prev:cx_ite1.elt;break}B=p2,cx_ite1=cx_ite1.next}if(A.diagonals.remove(C),C.diagonals.remove(A),C==B.next)B.diagonals.add(D);else for(var cx_ite2=B.diagonals.head;null!=cx_ite2;){var p3;if(cx_ite2.elt==C){B.diagonals.insert(cx_ite2,D);break}cx_ite2=cx_ite2.next}if(A==D.next)D.diagonals.add(B);else for(var cx_ite3=D.diagonals.head;null!=cx_ite3;){var p4;if(cx_ite3.elt==A){D.diagonals.insert(cx_ite3,B);break}cx_ite3=cx_ite3.next}zpp_nape.geom.ZPP_Triangular.edgeSet.remove_node(edge1.node);var o=edge1;o.a=o.b=null,o.node=null,o.next=zpp_nape.geom.ZPP_PartitionPair.zpp_pool,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=o}var o1=edgeStack;o1.a=o1.b=null,o1.node=null,o1.next=zpp_nape.geom.ZPP_PartitionPair.zpp_pool,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=o1},zpp_nape.geom.ZPP_Triangular.triangulate=function(P){var min=P.vertices,max=P.vertices,F=P.vertices.next,L=P.vertices;if(null!=F)for(var nite=F;;){var p=nite;if((p.y<min.y||p.y==min.y&&p.x<min.x)&&(min=p),(max.y<p.y||max.y==p.y&&max.x<p.x)&&(max=p),(nite=nite.next)==L)break}null==zpp_nape.geom.ZPP_Triangular.queue&&(zpp_nape.geom.ZPP_Triangular.queue=new zpp_nape.util.ZNPList_ZPP_PartitionVertex);var rp=max.prev,lp=max.next;for(zpp_nape.geom.ZPP_Triangular.queue.add(max);rp!=min||lp!=min;)rp==min||lp!=min&&(rp.y<lp.y||rp.y==lp.y&&rp.x<lp.x)?(zpp_nape.geom.ZPP_Triangular.queue.add(lp),lp.rightchain=!1,lp=lp.next):(zpp_nape.geom.ZPP_Triangular.queue.add(rp),rp.rightchain=!0,rp=rp.prev);zpp_nape.geom.ZPP_Triangular.queue.add(min),null==zpp_nape.geom.ZPP_Triangular.stack&&(zpp_nape.geom.ZPP_Triangular.stack=new zpp_nape.util.ZNPList_ZPP_PartitionVertex),zpp_nape.geom.ZPP_Triangular.stack.add(zpp_nape.geom.ZPP_Triangular.queue.pop_unsafe());var pre=zpp_nape.geom.ZPP_Triangular.queue.pop_unsafe();for(zpp_nape.geom.ZPP_Triangular.stack.add(pre);;){var p1=zpp_nape.geom.ZPP_Triangular.queue.pop_unsafe();if(null==zpp_nape.geom.ZPP_Triangular.queue.head)break;if(p1.rightchain!=zpp_nape.geom.ZPP_Triangular.stack.head.elt.rightchain){for(;;){var s=zpp_nape.geom.ZPP_Triangular.stack.pop_unsafe();if(null==zpp_nape.geom.ZPP_Triangular.stack.head)break;P.add_diagonal(s,p1)}zpp_nape.geom.ZPP_Triangular.stack.add(pre)}else{for(var q=zpp_nape.geom.ZPP_Triangular.stack.pop_unsafe();null!=zpp_nape.geom.ZPP_Triangular.stack.head;){var s1=zpp_nape.geom.ZPP_Triangular.stack.head.elt,ux=0,uy=0;ux=p1.x-q.x,uy=p1.y-q.y;var vx=0,vy=0;vx=q.x-s1.x;var right=(vy=q.y-s1.y)*ux-vx*uy;if(p1.rightchain&&right>=0||!p1.rightchain&&right<=0)break;P.add_diagonal(s1,p1),q=s1,zpp_nape.geom.ZPP_Triangular.stack.pop()}zpp_nape.geom.ZPP_Triangular.stack.add(q)}zpp_nape.geom.ZPP_Triangular.stack.add(p1),pre=p1}if(null!=zpp_nape.geom.ZPP_Triangular.stack.head)for(zpp_nape.geom.ZPP_Triangular.stack.pop();null!=zpp_nape.geom.ZPP_Triangular.stack.head;){var s2=zpp_nape.geom.ZPP_Triangular.stack.pop_unsafe();if(null==zpp_nape.geom.ZPP_Triangular.stack.head)break;P.add_diagonal(max,s2)}return P},zpp_nape.geom.ZPP_Triangular.prototype.__class__=zpp_nape.geom.ZPP_Triangular,zpp_nape.geom.ZPP_Vec2=$hxClasses["zpp_nape.geom.ZPP_Vec2"]=function(){this.y=0,this.x=0,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.weak=!1,this.outer=null,this._isimmutable=null,this._immutable=!1,this._validate=null,this._invalidate=null},zpp_nape.geom.ZPP_Vec2.__name__=["zpp_nape","geom","ZPP_Vec2"],zpp_nape.geom.ZPP_Vec2.get=function(x,y,immutable){var ret;return null==immutable&&(immutable=!1),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=immutable,ret.x=x,ret.y=y,ret},zpp_nape.geom.ZPP_Vec2.prototype._invalidate=null,zpp_nape.geom.ZPP_Vec2.prototype._validate=null,zpp_nape.geom.ZPP_Vec2.prototype.validate=function(){null!=this._validate&&this._validate()},zpp_nape.geom.ZPP_Vec2.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},zpp_nape.geom.ZPP_Vec2.prototype._immutable=null,zpp_nape.geom.ZPP_Vec2.prototype._isimmutable=null,zpp_nape.geom.ZPP_Vec2.prototype.immutable=function(){if(this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");null!=this._isimmutable&&this._isimmutable()},zpp_nape.geom.ZPP_Vec2.prototype.outer=null,zpp_nape.geom.ZPP_Vec2.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.geom.Vec2;var o=this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.geom.ZPP_Vec2.prototype.weak=null,zpp_nape.geom.ZPP_Vec2.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this._isimmutable=null,this._validate=null,this._invalidate=null},zpp_nape.geom.ZPP_Vec2.prototype.alloc=function(){this.weak=!1},zpp_nape.geom.ZPP_Vec2.prototype.next=null,zpp_nape.geom.ZPP_Vec2.prototype.elem=function(){return this},zpp_nape.geom.ZPP_Vec2.prototype.begin=function(){return this.next},zpp_nape.geom.ZPP_Vec2.prototype._inuse=null,zpp_nape.geom.ZPP_Vec2.prototype.modified=null,zpp_nape.geom.ZPP_Vec2.prototype.pushmod=null,zpp_nape.geom.ZPP_Vec2.prototype.length=null,zpp_nape.geom.ZPP_Vec2.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.geom.ZPP_Vec2.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.geom.ZPP_Vec2.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.geom.ZPP_Vec2.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.geom.ZPP_Vec2.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.geom.ZPP_Vec2.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.geom.ZPP_Vec2.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.geom.ZPP_Vec2.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.geom.ZPP_Vec2.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.geom.ZPP_Vec2.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.geom.ZPP_Vec2.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.geom.ZPP_Vec2.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.geom.ZPP_Vec2.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.geom.ZPP_Vec2.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.geom.ZPP_Vec2.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.geom.ZPP_Vec2.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.geom.ZPP_Vec2.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.geom.ZPP_Vec2.prototype.clear=function(){},zpp_nape.geom.ZPP_Vec2.prototype.inlined_clear=function(){},zpp_nape.geom.ZPP_Vec2.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.geom.ZPP_Vec2.prototype.empty=function(){return null==this.next},zpp_nape.geom.ZPP_Vec2.prototype.size=function(){return this.length},zpp_nape.geom.ZPP_Vec2.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.geom.ZPP_Vec2.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.geom.ZPP_Vec2.prototype.front=function(){return this.next},zpp_nape.geom.ZPP_Vec2.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.geom.ZPP_Vec2.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.geom.ZPP_Vec2.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.geom.ZPP_Vec2.prototype.x=null,zpp_nape.geom.ZPP_Vec2.prototype.y=null,zpp_nape.geom.ZPP_Vec2.prototype.copy=function(){var x=this.x,y=this.y,ret;return null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y,ret},zpp_nape.geom.ZPP_Vec2.prototype.toString=function(){return"{ x: "+this.x+" y: "+this.y+" }"},zpp_nape.geom.ZPP_Vec2.prototype.__class__=zpp_nape.geom.ZPP_Vec2,zpp_nape.geom.ZPP_Vec3=$hxClasses["zpp_nape.geom.ZPP_Vec3"]=function(){this._validate=null,this.immutable=!1,this.z=0,this.y=0,this.x=0,this.outer=null,this.immutable=!1,this._validate=null},zpp_nape.geom.ZPP_Vec3.__name__=["zpp_nape","geom","ZPP_Vec3"],zpp_nape.geom.ZPP_Vec3.prototype.outer=null,zpp_nape.geom.ZPP_Vec3.prototype.x=null,zpp_nape.geom.ZPP_Vec3.prototype.y=null,zpp_nape.geom.ZPP_Vec3.prototype.z=null,zpp_nape.geom.ZPP_Vec3.prototype.immutable=null,zpp_nape.geom.ZPP_Vec3.prototype._validate=null,zpp_nape.geom.ZPP_Vec3.prototype.validate=function(){null!=this._validate&&this._validate()},zpp_nape.geom.ZPP_Vec3.prototype.__class__=zpp_nape.geom.ZPP_Vec3,zpp_nape.geom.ZPP_VecMath=$hxClasses["zpp_nape.geom.ZPP_VecMath"]=function(){},zpp_nape.geom.ZPP_VecMath.__name__=["zpp_nape","geom","ZPP_VecMath"],zpp_nape.geom.ZPP_VecMath.vec_dsq=function(ax,ay,bx,by){var dx=0,dy=0;return(dx=ax-bx)*dx+(dy=ay-by)*dy},zpp_nape.geom.ZPP_VecMath.vec_distance=function(ax,ay,bx,by){var dx=0,dy=0;return dx=ax-bx,dy=ay-by,Math.sqrt(dx*dx+dy*dy)},zpp_nape.geom.ZPP_VecMath.prototype.__class__=zpp_nape.geom.ZPP_VecMath,zpp_nape.phys||(zpp_nape.phys={}),zpp_nape.phys.ZPP_Interactor=$hxClasses["zpp_nape.phys.ZPP_Interactor"]=function(){this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.group=null,this.cbsets=null,this.icompound=null,this.ibody=null,this.ishape=null,this.userData=null,this.id=0,this.outer_i=null,this.id=zpp_nape.ZPP_ID.Interactor(),this.cbsets=new zpp_nape.util.ZNPList_ZPP_CallbackSet,this.cbTypes=new zpp_nape.util.ZNPList_ZPP_CbType},zpp_nape.phys.ZPP_Interactor.__name__=["zpp_nape","phys","ZPP_Interactor"],zpp_nape.phys.ZPP_Interactor.get=function(i1,i2){for(var id=i1.id<i2.id?i1.id:i2.id,di=i1.id<i2.id?i2.id:i1.id,xs,ret=null,cx_ite=(i1.cbsets.length<i2.cbsets.length?i1.cbsets:i2.cbsets).head;null!=cx_ite;){var x=cx_ite.elt;if(x.id==id&&x.di==di){ret=x;break}cx_ite=cx_ite.next}return ret},zpp_nape.phys.ZPP_Interactor.int_callback=function(set,x,cb){var o1=set.int1,o2=set.int2,tmp,_this=x.options1,xs=o1.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=x.options2,xs1=o2.cbTypes;tmp=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else tmp=!1;tmp?(cb.int1=o1,cb.int2=o2):(cb.int1=o2,cb.int2=o1)},zpp_nape.phys.ZPP_Interactor.prototype.outer_i=null,zpp_nape.phys.ZPP_Interactor.prototype.id=null,zpp_nape.phys.ZPP_Interactor.prototype.userData=null,zpp_nape.phys.ZPP_Interactor.prototype.ishape=null,zpp_nape.phys.ZPP_Interactor.prototype.ibody=null,zpp_nape.phys.ZPP_Interactor.prototype.icompound=null,zpp_nape.phys.ZPP_Interactor.prototype.isShape=function(){return null!=this.ishape},zpp_nape.phys.ZPP_Interactor.prototype.isBody=function(){return null!=this.ibody},zpp_nape.phys.ZPP_Interactor.prototype.isCompound=function(){return null!=this.icompound},zpp_nape.phys.ZPP_Interactor.prototype.__iaddedToSpace=function(){null!=this.group&&this.group.interactors.add(this);for(var cx_ite=this.cbTypes.head;null!=cx_ite;){var cb;cx_ite.elt.interactors.add(this),cx_ite=cx_ite.next}this.alloc_cbSet()},zpp_nape.phys.ZPP_Interactor.prototype.__iremovedFromSpace=function(){null!=this.group&&this.group.interactors.remove(this);for(var cx_ite=this.cbTypes.head;null!=cx_ite;){var cb;cx_ite.elt.interactors.remove(this),cx_ite=cx_ite.next}this.dealloc_cbSet()},zpp_nape.phys.ZPP_Interactor.prototype.wake=function(){if(null!=this.ishape){var body=this.ishape.body;null!=body&&null!=body.space&&body.space.non_inlined_wake(body)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},zpp_nape.phys.ZPP_Interactor.prototype.cbsets=null,zpp_nape.phys.ZPP_Interactor.prototype.getSpace=function(){return null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space},zpp_nape.phys.ZPP_Interactor.prototype.group=null,zpp_nape.phys.ZPP_Interactor.prototype.cbTypes=null,zpp_nape.phys.ZPP_Interactor.prototype.cbSet=null,zpp_nape.phys.ZPP_Interactor.prototype.wrap_cbTypes=null,zpp_nape.phys.ZPP_Interactor.prototype.setupcbTypes=function(){this.wrap_cbTypes=zpp_nape.util.ZPP_CbTypeList.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$bind(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$bind(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0,this.wrap_cbTypes.zpp_inner._modifiable=$bind(this,this.immutable_cbTypes)},zpp_nape.phys.ZPP_Interactor.prototype.immutable_cbTypes=function(){this.immutable_midstep("Interactor::cbTypes")},zpp_nape.phys.ZPP_Interactor.prototype.wrap_cbTypes_subber=function(pcb){var cb=pcb.zpp_inner;if(this.cbTypes.has(cb)){var space=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=space&&(this.dealloc_cbSet(),cb.interactors.remove(this)),this.cbTypes.remove(cb),null!=space&&(this.alloc_cbSet(),this.wake())}},zpp_nape.phys.ZPP_Interactor.prototype.wrap_cbTypes_adder=function(cb){return this.insert_cbtype(cb.zpp_inner),!1},zpp_nape.phys.ZPP_Interactor.prototype.insert_cbtype=function(cb){if(!this.cbTypes.has(cb)){var space=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=space&&(this.dealloc_cbSet(),cb.interactors.add(this));for(var pre=null,cx_ite=this.cbTypes.head;null!=cx_ite;){var j=cx_ite.elt;if(cb.id<j.id)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.cbTypes,ret;null==zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbType:(ret=zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++,null!=space&&(this.alloc_cbSet(),this.wake())}},zpp_nape.phys.ZPP_Interactor.prototype.alloc_cbSet=function(){var space=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=(this.cbSet=space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),space.freshInteractorType(this))},zpp_nape.phys.ZPP_Interactor.prototype.dealloc_cbSet=function(){var space=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){if(this.cbSet.interactors.remove(this),space.nullInteractorType(this),0==--this.cbSet.count){space.cbsets.remove(this.cbSet);var o=this.cbSet;for(o.listeners.clear(),o.zip_listeners=!0,o.bodylisteners.clear(),o.zip_bodylisteners=!0,o.conlisteners.clear(),o.zip_conlisteners=!0;null!=o.cbTypes.head;){var cb;o.cbTypes.pop_unsafe().cbsets.remove(o)}o.next=zpp_nape.callbacks.ZPP_CbSet.zpp_pool,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=o}this.cbSet=null}},zpp_nape.phys.ZPP_Interactor.prototype.setGroup=function(group){if(this.group!=group){var inspace=null!=(null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space);inspace&&null!=this.group&&this.group.interactors.remove(this),this.group=group,inspace&&null!=group&&group.interactors.add(this),inspace&&(null!=this.ishape?this.ishape.body.wake():null!=this.ibody?this.ibody.wake():this.icompound.wake())}},zpp_nape.phys.ZPP_Interactor.prototype.immutable_midstep=function(n){if(null!=this.ibody){var _this=this.ibody;if(null!=_this.space&&_this.space.midstep)throw new js._Boot.HaxeError("Error: "+n+" cannot be set during a space step()")}else null!=this.ishape?this.ishape.__immutable_midstep(n):this.icompound.__imutable_midstep(n)},zpp_nape.phys.ZPP_Interactor.prototype.lookup_group=function(){for(var cur=this;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;return null==cur?null:cur.group},zpp_nape.phys.ZPP_Interactor.prototype.copyto=function(ret){ret.zpp_inner_i.group=this.group;var _this=this.outer_i;null==_this.zpp_inner_i.wrap_cbTypes&&_this.zpp_inner_i.setupcbTypes();var _this1=_this.zpp_inner_i.wrap_cbTypes;_this1.zpp_inner.valmod();for(var _g=nape.callbacks.CbTypeIterator.get(_this1);;){_g.zpp_inner.zpp_inner.valmod();var _this2=_g.zpp_inner;_this2.zpp_inner.valmod(),_this2.zpp_inner.zip_length&&(_this2.zpp_inner.zip_length=!1,_this2.zpp_inner.user_length=_this2.zpp_inner.inner.length);var length=_this2.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.callbacks.CbTypeIterator.zpp_pool,nape.callbacks.CbTypeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var cb=_g.zpp_inner.at(_g.zpp_i++);null==ret.zpp_inner_i.wrap_cbTypes&&ret.zpp_inner_i.setupcbTypes();var _this3=ret.zpp_inner_i.wrap_cbTypes;_this3.zpp_inner.reverse_flag?_this3.push(cb):_this3.unshift(cb)}null!=this.userData&&(ret.zpp_inner_i.userData=Reflect.copy(this.userData))},zpp_nape.phys.ZPP_Interactor.prototype.__class__=zpp_nape.phys.ZPP_Interactor,zpp_nape.phys.ZPP_Body=$hxClasses["zpp_nape.phys.ZPP_Body"]=function(){var ret;this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_aabb=!1,this.aabb=null,this.norotate=!1,this.sinertia=0,this.iinertia=0,this.cinertia=0,this.zip_inertia=!1,this.inertia=0,this.inertiaMode=0,this.zip_gravMassScale=!1,this.gravMassScale=0,this.gravMassMode=0,this.zip_gravMass=!1,this.gravMass=0,this.nomove=!1,this.cmass=0,this.smass=0,this.imass=0,this.massMode=0,this.zip_mass=!1,this.mass=0,this.zip_axis=!1,this.axisy=0,this.axisx=0,this.rot=0,this.pre_rot=0,this.kinangvel=0,this.torque=0,this.angvel=0,this.wrapcvel=null,this.wrap_svel=null,this.svely=0,this.svelx=0,this.wrap_kinvel=null,this.kinvely=0,this.kinvelx=0,this.wrap_force=null,this.forcey=0,this.forcex=0,this.wrap_vel=null,this.vely=0,this.velx=0,this.wrap_pos=null,this.posy=0,this.posx=0,this.pre_posy=0,this.pre_posx=0,this.disableCCD=!1,this.bulletEnabled=!1,this.bullet=!1,this.sweepRadius=0,this.sweepFrozen=!1,this.sweep_angvel=0,this.sweepTime=0,this.graph_depth=0,this.component=null,this.wrap_constraints=null,this.constraints=null,this.wrap_arbiters=null,this.arbiters=null,this.space=null,this.wrap_shapes=null,this.shapes=null,this.compound=null,this.type=0,this.world=!1,this.outer=null,zpp_nape.phys.ZPP_Interactor.call(this),this.ibody=this,this.world=!1,this.bulletEnabled=!1,this.sweepTime=0,this.sweep_angvel=0,this.norotate=this.nomove=!1,this.disableCCD=!1,this.posx=0,this.posy=0,this.rot=0,this.axisx=0,this.axisy=1,this.svelx=0,this.svely=0,this.velx=0,this.vely=0,this.kinvelx=0,this.kinvely=0,this.forcex=0,this.forcey=0,this.torque=this.angvel=this.kinangvel=0,this.pre_posx=1/0,this.pre_posy=1/0,this.pre_rot=1/0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.zip_aabb=!0,null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=0,ret.miny=0,ret.maxx=0,ret.maxy=0,this.aabb=ret,this.aabb._immutable=!0;var me=this;this.aabb._validate=$bind(this,this.aabb_validate),this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.arbiters=new zpp_nape.util.ZNPList_ZPP_Arbiter,this.constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape,this.wrap_shapes=zpp_nape.util.ZPP_ShapeList.get(this.shapes),this.wrap_shapes.zpp_inner.adder=$bind(this,this.shapes_adder),this.wrap_shapes.zpp_inner.subber=$bind(this,this.shapes_subber),this.wrap_shapes.zpp_inner._invalidate=$bind(this,this.shapes_invalidate),this.wrap_shapes.zpp_inner._modifiable=$bind(this,this.shapes_modifiable),this.kinematicDelaySleep=!1},zpp_nape.phys.ZPP_Body.__name__=["zpp_nape","phys","ZPP_Body"],zpp_nape.phys.ZPP_Body.__super__=zpp_nape.phys.ZPP_Interactor,zpp_nape.phys.ZPP_Interactor.prototype)zpp_nape.phys.ZPP_Body.prototype[k]=zpp_nape.phys.ZPP_Interactor.prototype[k];for(var k in zpp_nape.phys.ZPP_Body.bodysetlt=function(a,b){return a.id<b.id},zpp_nape.phys.ZPP_Body.__static=function(){null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1);var ret=new nape.phys.Body(zpp_nape.util.ZPP_Flags.BodyType_STATIC),si=ret.zpp_inner;return si.world=!0,si.wrap_shapes.zpp_inner.immutable=!0,si.smass=si.imass=si.cmass=si.mass=si.gravMass=0,si.sinertia=si.iinertia=si.cinertia=si.inertia=0,si.cbTypes.clear(),ret},zpp_nape.phys.ZPP_Body.prototype.outer=null,zpp_nape.phys.ZPP_Body.prototype.world=null,zpp_nape.phys.ZPP_Body.prototype.type=null,zpp_nape.phys.ZPP_Body.prototype.isStatic=function(){return 1==this.type},zpp_nape.phys.ZPP_Body.prototype.isDynamic=function(){return 2==this.type},zpp_nape.phys.ZPP_Body.prototype.isKinematic=function(){return 3==this.type},zpp_nape.phys.ZPP_Body.prototype.invalidate_type=function(){this.invalidate_mass(),this.invalidate_inertia()},zpp_nape.phys.ZPP_Body.prototype.compound=null,zpp_nape.phys.ZPP_Body.prototype.shapes=null,zpp_nape.phys.ZPP_Body.prototype.wrap_shapes=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_shapes=function(){this.zip_aabb=!0,this.zip_localCOM=!0,this.zip_worldCOM=!0,this.invalidate_mass(),this.invalidate_inertia()},zpp_nape.phys.ZPP_Body.prototype.space=null,zpp_nape.phys.ZPP_Body.prototype.arbiters=null,zpp_nape.phys.ZPP_Body.prototype.wrap_arbiters=null,zpp_nape.phys.ZPP_Body.prototype.constraints=null,zpp_nape.phys.ZPP_Body.prototype.wrap_constraints=null,zpp_nape.phys.ZPP_Body.prototype.component=null,zpp_nape.phys.ZPP_Body.prototype.graph_depth=null,zpp_nape.phys.ZPP_Body.prototype.init_bodysetlist=function(){null==zpp_nape.phys.ZPP_Body.bodyset&&(zpp_nape.phys.ZPP_Body.bodyset=new zpp_nape.util.ZPP_Set_ZPP_Body,zpp_nape.phys.ZPP_Body.bodyset.lt=zpp_nape.phys.ZPP_Body.bodysetlt,zpp_nape.phys.ZPP_Body.bodystack=new zpp_nape.util.ZNPList_ZPP_Body)},zpp_nape.phys.ZPP_Body.prototype.connectedBodies_cont=function(b){zpp_nape.phys.ZPP_Body.bodyset.try_insert_bool(b.zpp_inner)&&(zpp_nape.phys.ZPP_Body.bodystack.add(b.zpp_inner),b.zpp_inner.graph_depth=zpp_nape.phys.ZPP_Body.cur_graph_depth+1)},zpp_nape.phys.ZPP_Body.prototype.connectedBodies=function(depth,output){var _gthis=this;null==zpp_nape.phys.ZPP_Body.bodyset&&(zpp_nape.phys.ZPP_Body.bodyset=new zpp_nape.util.ZPP_Set_ZPP_Body,zpp_nape.phys.ZPP_Body.bodyset.lt=zpp_nape.phys.ZPP_Body.bodysetlt,zpp_nape.phys.ZPP_Body.bodystack=new zpp_nape.util.ZNPList_ZPP_Body);var ret=null==output?new nape.phys.BodyList:output;for(zpp_nape.phys.ZPP_Body.bodystack.add(this),zpp_nape.phys.ZPP_Body.bodyset.insert(this),this.graph_depth=0;null!=zpp_nape.phys.ZPP_Body.bodystack.head;){var cur=zpp_nape.phys.ZPP_Body.bodystack.pop_unsafe();if(cur.graph_depth!=depth){zpp_nape.phys.ZPP_Body.cur_graph_depth=cur.graph_depth;for(var cx_ite=cur.constraints.head;null!=cx_ite;){var c;cx_ite.elt.outer.visitBodies($bind(this,this.connectedBodies_cont)),cx_ite=cx_ite.next}}}var _this=zpp_nape.phys.ZPP_Body.bodyset;if(null!=_this.parent){for(var cur1=_this.parent;null!=cur1;)if(null!=cur1.prev)cur1=cur1.prev;else if(null!=cur1.next)cur1=cur1.next;else{var b=cur1.data;if(b!=this){var obj=b.outer;ret.zpp_inner.reverse_flag?ret.push(obj):ret.unshift(obj)}var ret1=cur1.parent;null!=ret1&&(cur1==ret1.prev?ret1.prev=null:ret1.next=null,cur1.parent=null);var o=cur1;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o,cur1=ret1}_this.parent=null}return ret},zpp_nape.phys.ZPP_Body.prototype.interactingBodies=function(arbiter_type,depth,output){var _gthis=this;null==zpp_nape.phys.ZPP_Body.bodyset&&(zpp_nape.phys.ZPP_Body.bodyset=new zpp_nape.util.ZPP_Set_ZPP_Body,zpp_nape.phys.ZPP_Body.bodyset.lt=zpp_nape.phys.ZPP_Body.bodysetlt,zpp_nape.phys.ZPP_Body.bodystack=new zpp_nape.util.ZNPList_ZPP_Body);var ret=null==output?new nape.phys.BodyList:output;for(zpp_nape.phys.ZPP_Body.bodyset.insert(this),zpp_nape.phys.ZPP_Body.bodystack.add(this),this.graph_depth=0;null!=zpp_nape.phys.ZPP_Body.bodystack.head;){var cur=zpp_nape.phys.ZPP_Body.bodystack.pop_unsafe();if(cur.graph_depth!=depth)for(var cx_ite=cur.arbiters.head;null!=cx_ite;){var arb=cx_ite.elt;if(0!=(arb.type&arbiter_type)){var other=arb.b1==cur?arb.b2:arb.b1;zpp_nape.phys.ZPP_Body.bodyset.try_insert_bool(other)&&(zpp_nape.phys.ZPP_Body.bodystack.add(other),other.graph_depth=cur.graph_depth+1)}cx_ite=cx_ite.next}}var _this=zpp_nape.phys.ZPP_Body.bodyset;if(null!=_this.parent){for(var cur1=_this.parent;null!=cur1;)if(null!=cur1.prev)cur1=cur1.prev;else if(null!=cur1.next)cur1=cur1.next;else{var b=cur1.data;if(b!=this){var obj=b.outer;ret.zpp_inner.reverse_flag?ret.push(obj):ret.unshift(obj)}var ret1=cur1.parent;null!=ret1&&(cur1==ret1.prev?ret1.prev=null:ret1.next=null,cur1.parent=null);var o=cur1;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o,cur1=ret1}_this.parent=null}return ret},zpp_nape.phys.ZPP_Body.prototype.atRest=function(dt){if(2!=this.type)return this.component.sleeping;var linSq=nape.Config.linearSleepThreshold,cansleep;if(linSq*=linSq,this.velx*this.velx+this.vely*this.vely>linSq)cansleep=!1;else{var dx=0,dy=0;if((dx=this.posx-this.pre_posx)*dx+(dy=this.posy-this.pre_posy)*dy>.25*linSq*dt*dt)cansleep=!1;else{var dx1=0,dy1=0,idl=(dx1=this.aabb.maxx-this.aabb.minx)*dx1+(dy1=this.aabb.maxy-this.aabb.miny)*dy1,angSq=nape.Config.angularSleepThreshold;if(angSq*=angSq,4*this.angvel*this.angvel*idl>angSq)cansleep=!1;else{var dr=this.rot-this.pre_rot;cansleep=!(dr*dr*idl>angSq*dt*dt)}}}return cansleep||(this.component.waket=this.space.stamp),this.component.waket+nape.Config.sleepDelay<this.space.stamp},zpp_nape.phys.ZPP_Body.prototype.refreshArbiters=function(){for(var cx_ite=this.arbiters.head;null!=cx_ite;){var arb;cx_ite.elt.invalidated=!0,cx_ite=cx_ite.next}},zpp_nape.phys.ZPP_Body.prototype.sweepTime=null,zpp_nape.phys.ZPP_Body.prototype.sweep_angvel=null,zpp_nape.phys.ZPP_Body.prototype.sweepFrozen=null,zpp_nape.phys.ZPP_Body.prototype.sweepRadius=null,zpp_nape.phys.ZPP_Body.prototype.bullet=null,zpp_nape.phys.ZPP_Body.prototype.bulletEnabled=null,zpp_nape.phys.ZPP_Body.prototype.disableCCD=null,zpp_nape.phys.ZPP_Body.prototype.sweepIntegrate=function(dt){var delta=dt-this.sweepTime;if(0!=delta){this.sweepTime=dt;var t=delta;if(this.posx+=this.velx*t,this.posy+=this.vely*t,0!=this.angvel){var dr=this.sweep_angvel*delta;if(this.rot+=dr,dr*dr>1e-4)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*this.axisx+dr*this.axisy)*m;this.axisy=(p*this.axisy-dr*this.axisx)*m,this.axisx=nx}}}},zpp_nape.phys.ZPP_Body.prototype.sweepValidate=function(s){if(0==s.type)s.worldCOMx=this.posx+(this.axisy*s.localCOMx-this.axisx*s.localCOMy),s.worldCOMy=this.posy+(s.localCOMx*this.axisx+s.localCOMy*this.axisy);else{for(var p=s.polygon,li=p.lverts.next,cx_ite=p.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.posx+(this.axisy*l.x-this.axisx*l.y),g.y=this.posy+(l.x*this.axisx+l.y*this.axisy),cx_ite=cx_ite.next}var ite=p.edges.head,cx_ite1=p.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gnormx=this.axisy*e.lnormx-this.axisx*e.lnormy,e.gnormy=e.lnormx*this.axisx+e.lnormy*this.axisy,e.gprojection=this.posx*e.gnormx+this.posy*e.gnormy+e.lprojection,e.tp0=u.y*e.gnormx-u.x*e.gnormy,e.tp1=v.y*e.gnormx-v.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=p.gverts.next,e1=ite.elt;ite=ite.next,e1.gnormx=this.axisy*e1.lnormx-this.axisx*e1.lnormy,e1.gnormy=e1.lnormx*this.axisx+e1.lnormy*this.axisy,e1.gprojection=this.posx*e1.gnormx+this.posy*e1.gnormy+e1.lprojection,e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy,e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}},zpp_nape.phys.ZPP_Body.prototype.pre_posx=null,zpp_nape.phys.ZPP_Body.prototype.pre_posy=null,zpp_nape.phys.ZPP_Body.prototype.posx=null,zpp_nape.phys.ZPP_Body.prototype.posy=null,zpp_nape.phys.ZPP_Body.prototype.wrap_pos=null,zpp_nape.phys.ZPP_Body.prototype.velx=null,zpp_nape.phys.ZPP_Body.prototype.vely=null,zpp_nape.phys.ZPP_Body.prototype.wrap_vel=null,zpp_nape.phys.ZPP_Body.prototype.forcex=null,zpp_nape.phys.ZPP_Body.prototype.forcey=null,zpp_nape.phys.ZPP_Body.prototype.wrap_force=null,zpp_nape.phys.ZPP_Body.prototype.kinvelx=null,zpp_nape.phys.ZPP_Body.prototype.kinvely=null,zpp_nape.phys.ZPP_Body.prototype.wrap_kinvel=null,zpp_nape.phys.ZPP_Body.prototype.svelx=null,zpp_nape.phys.ZPP_Body.prototype.svely=null,zpp_nape.phys.ZPP_Body.prototype.wrap_svel=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_pos=function(){for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}this.zip_worldCOM=!0},zpp_nape.phys.ZPP_Body.prototype.pos_invalidate=function(pos){if(this.immutable_midstep("Body::position"),1==this.type&&null!=this.space)throw new js._Boot.HaxeError("Error: Cannot move a static object once inside a Space");if(this.posx!=pos.x||this.posy!=pos.y){this.posx=pos.x,this.posy=pos.y;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}this.zip_worldCOM=!0,this.wake()}},zpp_nape.phys.ZPP_Body.prototype.pos_validate=function(){this.wrap_pos.zpp_inner.x=this.posx,this.wrap_pos.zpp_inner.y=this.posy},zpp_nape.phys.ZPP_Body.prototype.vel_invalidate=function(vel){if(1==this.type)throw new js._Boot.HaxeError("Error: Static body cannot have its velocity set.");this.velx=vel.x,this.vely=vel.y,this.wake()},zpp_nape.phys.ZPP_Body.prototype.vel_validate=function(){this.wrap_vel.zpp_inner.x=this.velx,this.wrap_vel.zpp_inner.y=this.vely},zpp_nape.phys.ZPP_Body.prototype.kinvel_invalidate=function(vel){this.kinvelx=vel.x,this.kinvely=vel.y,this.wake()},zpp_nape.phys.ZPP_Body.prototype.kinvel_validate=function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx,this.wrap_kinvel.zpp_inner.y=this.kinvely},zpp_nape.phys.ZPP_Body.prototype.svel_invalidate=function(vel){this.svelx=vel.x,this.svely=vel.y,this.wake()},zpp_nape.phys.ZPP_Body.prototype.svel_validate=function(){this.wrap_svel.zpp_inner.x=this.svelx,this.wrap_svel.zpp_inner.y=this.svely},zpp_nape.phys.ZPP_Body.prototype.force_invalidate=function(force){if(2!=this.type)throw new js._Boot.HaxeError("Error: Non-dynamic body cannot have force applied.");this.forcex=force.x,this.forcey=force.y,this.wake()},zpp_nape.phys.ZPP_Body.prototype.force_validate=function(){this.wrap_force.zpp_inner.x=this.forcex,this.wrap_force.zpp_inner.y=this.forcey},zpp_nape.phys.ZPP_Body.prototype.setupPosition=function(){var x=this.posx,y=this.posy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_pos=ret,this.wrap_pos.zpp_inner._inuse=!0,this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=$bind(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=$bind(this,this.pos_validate))},zpp_nape.phys.ZPP_Body.prototype.setupVelocity=function(){var x=this.velx,y=this.vely,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_vel=ret,this.wrap_vel.zpp_inner._inuse=!0,this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=$bind(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=$bind(this,this.vel_validate))},zpp_nape.phys.ZPP_Body.prototype.setupkinvel=function(){var x=this.kinvelx,y=this.kinvely,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_kinvel=ret,this.wrap_kinvel.zpp_inner._inuse=!0,this.world?this.wrap_kinvel.zpp_inner._immutable=!0:(this.wrap_kinvel.zpp_inner._invalidate=$bind(this,this.kinvel_invalidate),this.wrap_kinvel.zpp_inner._validate=$bind(this,this.kinvel_validate))},zpp_nape.phys.ZPP_Body.prototype.setupsvel=function(){var x=this.svelx,y=this.svely,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_svel=ret,this.wrap_svel.zpp_inner._inuse=!0,this.world?this.wrap_svel.zpp_inner._immutable=!0:(this.wrap_svel.zpp_inner._invalidate=$bind(this,this.svel_invalidate),this.wrap_svel.zpp_inner._validate=$bind(this,this.svel_validate))},zpp_nape.phys.ZPP_Body.prototype.setupForce=function(){var x=this.forcex,y=this.forcey,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_force=ret,this.wrap_force.zpp_inner._inuse=!0,this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=$bind(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=$bind(this,this.force_validate))},zpp_nape.phys.ZPP_Body.prototype.cvel_validate=function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx,this.wrapcvel.zpp_inner.y=this.vely+this.kinvely,this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},zpp_nape.phys.ZPP_Body.prototype.wrapcvel=null,zpp_nape.phys.ZPP_Body.prototype.setup_cvel=function(){var me=this;this.wrapcvel=nape.geom.Vec3.get(),this.wrapcvel.zpp_inner.immutable=!0,this.wrapcvel.zpp_inner._validate=$bind(this,this.cvel_validate)},zpp_nape.phys.ZPP_Body.prototype.angvel=null,zpp_nape.phys.ZPP_Body.prototype.torque=null,zpp_nape.phys.ZPP_Body.prototype.kinangvel=null,zpp_nape.phys.ZPP_Body.prototype.pre_rot=null,zpp_nape.phys.ZPP_Body.prototype.rot=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_rot=function(){this.zip_axis=!0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite=cx_ite.next}this.zip_worldCOM=!0},zpp_nape.phys.ZPP_Body.prototype.axisx=null,zpp_nape.phys.ZPP_Body.prototype.axisy=null,zpp_nape.phys.ZPP_Body.prototype.zip_axis=null,zpp_nape.phys.ZPP_Body.prototype.validate_axis=function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot))},zpp_nape.phys.ZPP_Body.prototype.quick_validate_axis=function(){this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)},zpp_nape.phys.ZPP_Body.prototype.delta_rot=function(dr){if(this.rot+=dr,dr*dr>1e-4)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*this.axisx+dr*this.axisy)*m;this.axisy=(p*this.axisy-dr*this.axisx)*m,this.axisx=nx}},zpp_nape.phys.ZPP_Body.prototype.kinematicDelaySleep=null,zpp_nape.phys.ZPP_Body.prototype.mass=null,zpp_nape.phys.ZPP_Body.prototype.zip_mass=null,zpp_nape.phys.ZPP_Body.prototype.massMode=null,zpp_nape.phys.ZPP_Body.prototype.imass=null,zpp_nape.phys.ZPP_Body.prototype.smass=null,zpp_nape.phys.ZPP_Body.prototype.cmass=null,zpp_nape.phys.ZPP_Body.prototype.nomove=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_mass=function(){this.zip_mass=!0,this.invalidate_gravMass()},zpp_nape.phys.ZPP_Body.prototype.validate_mass=function(){var exist=!1;if(this.zip_mass||(this.massMode,0)){if(this.zip_mass=!1,0==this.massMode){this.cmass=0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;s.refmaterial.density=s.material.density,s.validate_area_inertia(),this.cmass+=s.area*s.material.density,cx_ite=cx_ite.next}}2!=this.type||this.nomove?(this.mass=1/0,this.imass=this.smass=0):(this.mass=this.cmass,this.imass=this.smass=1/this.mass)}},zpp_nape.phys.ZPP_Body.prototype.gravMass=null,zpp_nape.phys.ZPP_Body.prototype.zip_gravMass=null,zpp_nape.phys.ZPP_Body.prototype.gravMassMode=null,zpp_nape.phys.ZPP_Body.prototype.gravMassScale=null,zpp_nape.phys.ZPP_Body.prototype.zip_gravMassScale=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_gravMass=function(){1!=this.gravMassMode&&(this.zip_gravMass=!0),2!=this.gravMassMode&&(this.zip_gravMassScale=!0),this.wake()},zpp_nape.phys.ZPP_Body.prototype.validate_gravMass=function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},zpp_nape.phys.ZPP_Body.prototype.invalidate_gravMassScale=function(){2!=this.gravMassMode?this.zip_gravMassScale=!0:this.invalidate_gravMass()},zpp_nape.phys.ZPP_Body.prototype.validate_gravMassScale=function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,0==this.gravMassMode?this.gravMassScale=1:1==this.gravMassMode&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},zpp_nape.phys.ZPP_Body.prototype.inertiaMode=null,zpp_nape.phys.ZPP_Body.prototype.inertia=null,zpp_nape.phys.ZPP_Body.prototype.zip_inertia=null,zpp_nape.phys.ZPP_Body.prototype.cinertia=null,zpp_nape.phys.ZPP_Body.prototype.iinertia=null,zpp_nape.phys.ZPP_Body.prototype.sinertia=null,zpp_nape.phys.ZPP_Body.prototype.norotate=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_inertia=function(){this.zip_inertia=!0,this.wake()},zpp_nape.phys.ZPP_Body.prototype.validate_inertia=function(){var exist=!1;if(this.zip_inertia||(this.inertiaMode,0)){if(this.zip_inertia=!1,0==this.inertiaMode){this.cinertia=0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;s.refmaterial.density=s.material.density,s.validate_area_inertia(),this.cinertia+=s.inertia*s.area*s.material.density,cx_ite=cx_ite.next}}2!=this.type||this.norotate?(this.inertia=1/0,this.sinertia=this.iinertia=0):(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia)}},zpp_nape.phys.ZPP_Body.prototype.invalidate_wake=function(){this.wake()},zpp_nape.phys.ZPP_Body.prototype.aabb=null,zpp_nape.phys.ZPP_Body.prototype.zip_aabb=null,zpp_nape.phys.ZPP_Body.prototype.validate_aabb=function(){if(null==this.shapes.head)throw new js._Boot.HaxeError("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;if(s.zip_aabb&&null!=s.body)if(s.zip_aabb=!1,0==s.type){var _this=s.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite1=_this1.lverts.next,u=cx_ite1,v=cx_ite1=cx_ite1.next;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite1=cx_ite1.next}var w1=cx_ite1=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite1=cx_ite1.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=s.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite2=_this3.gverts.next;null!=cx_ite2;){var g=cx_ite2,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite2=cx_ite2.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite3=_this3.gverts.next.next;null!=cx_ite3;){var p=cx_ite3;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite3=cx_ite3.next}}var _this5=this.aabb,x=s.aabb;x.minx<_this5.minx&&(_this5.minx=x.minx),x.maxx>_this5.maxx&&(_this5.maxx=x.maxx),x.miny<_this5.miny&&(_this5.miny=x.miny),x.maxy>_this5.maxy&&(_this5.maxy=x.maxy),cx_ite=cx_ite.next}}},zpp_nape.phys.ZPP_Body.prototype.invalidate_aabb=function(){this.zip_aabb=!0},zpp_nape.phys.ZPP_Body.prototype.localCOMx=null,zpp_nape.phys.ZPP_Body.prototype.localCOMy=null,zpp_nape.phys.ZPP_Body.prototype.zip_localCOM=null,zpp_nape.phys.ZPP_Body.prototype.worldCOMx=null,zpp_nape.phys.ZPP_Body.prototype.worldCOMy=null,zpp_nape.phys.ZPP_Body.prototype.zip_worldCOM=null,zpp_nape.phys.ZPP_Body.prototype.wrap_localCOM=null,zpp_nape.phys.ZPP_Body.prototype.wrap_worldCOM=null,zpp_nape.phys.ZPP_Body.prototype.invalidate_localCOM=function(){this.zip_localCOM=!0,this.zip_worldCOM=!0},zpp_nape.phys.ZPP_Body.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0},zpp_nape.phys.ZPP_Body.prototype.validate_localCOM=function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var tempx=0,tempy=0,msum=0,cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;if(s.zip_localCOM){if(s.zip_localCOM=!1,1==s.type){var _this=s.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite1=_this.lverts.next,u=cx_ite1,v=cx_ite1=cx_ite1.next;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite1=cx_ite1.next}var w1=cx_ite1=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite1=cx_ite1.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=s.wrap_localCOM&&(s.wrap_localCOM.zpp_inner.x=s.localCOMx,s.wrap_localCOM.zpp_inner.y=s.localCOMy)}s.validate_area_inertia();var t3=s.area*s.material.density;tempx+=s.localCOMx*t3,tempy+=s.localCOMy*t3,msum+=s.area*s.material.density,cx_ite=cx_ite.next}if(0!=msum){var t4=1/msum;this.localCOMx=tempx*t4,this.localCOMy=tempy*t4}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy),this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=msum,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=1/0,this.imass=this.smass=0))}},zpp_nape.phys.ZPP_Body.prototype.validate_worldCOM=function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},zpp_nape.phys.ZPP_Body.prototype.getlocalCOM=function(){if(null==this.shapes.head)throw new js._Boot.HaxeError("Error: localCOM only makes sense when Body has Shapes");this.validate_localCOM()},zpp_nape.phys.ZPP_Body.prototype.getworldCOM=function(){if(null==this.shapes.head)throw new js._Boot.HaxeError("Error: worldCOM only makes sense when Body has Shapes");this.validate_worldCOM()},zpp_nape.phys.ZPP_Body.prototype.__immutable_midstep=function(name){if(null!=this.space&&this.space.midstep)throw new js._Boot.HaxeError("Error: "+name+" cannot be set during a space step()")},zpp_nape.phys.ZPP_Body.prototype.clear=function(){if(null!=this.space)throw new js._Boot.HaxeError("Error: Cannot clear a Body if it is currently being used by a Space!");if(null!=this.constraints.head)throw new js._Boot.HaxeError("Error: Cannot clear a Body if it is currently being used by a constraint!");for(;null!=this.shapes.head;){var s=this.shapes.pop_unsafe();s.removedFromBody(),s.body=null}this.invalidate_shapes(),this.pre_posx=0,this.pre_posy=0,this.posx=0,this.posy=0,this.velx=0,this.vely=0,this.forcex=0,this.forcey=0,this.kinvelx=0,this.kinvely=0,this.svelx=0,this.svely=0,this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s1=cx_ite.elt;1==s1.type&&(s1.polygon.invalidate_gverts(),s1.polygon.invalidate_gaxi()),s1.invalidate_worldCOM(),cx_ite=cx_ite.next}this.zip_worldCOM=!0,this.zip_axis=!0;for(var cx_ite1=this.shapes.head;null!=cx_ite1;){var s2=cx_ite1.elt;1==s2.type&&(s2.polygon.invalidate_gverts(),s2.polygon.invalidate_gaxi()),s2.invalidate_worldCOM(),cx_ite1=cx_ite1.next}this.zip_worldCOM=!0,this.axisx=0,this.axisy=1,this.zip_axis=!1,this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.norotate=!1,this.nomove=!1},zpp_nape.phys.ZPP_Body.prototype.aabb_validate=function(){if(null==this.shapes.head)throw new js._Boot.HaxeError("Error: bounds only makes sense when Body has shapes");if(null==this.shapes.head)throw new js._Boot.HaxeError("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt;if(s.zip_aabb&&null!=s.body)if(s.zip_aabb=!1,0==s.type){var _this=s.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite1=_this1.lverts.next,u=cx_ite1,v=cx_ite1=cx_ite1.next;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite1=cx_ite1.next}var w1=cx_ite1=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite1=cx_ite1.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=s.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite2=_this3.gverts.next;null!=cx_ite2;){var g=cx_ite2,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite2=cx_ite2.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite3=_this3.gverts.next.next;null!=cx_ite3;){var p=cx_ite3;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite3=cx_ite3.next}}var _this5=this.aabb,x=s.aabb;x.minx<_this5.minx&&(_this5.minx=x.minx),x.maxx>_this5.maxx&&(_this5.maxx=x.maxx),x.miny<_this5.miny&&(_this5.miny=x.miny),x.maxy>_this5.maxy&&(_this5.maxy=x.maxy),cx_ite=cx_ite.next}}},zpp_nape.phys.ZPP_Body.prototype.shapes_adder=function(s){if(s.zpp_inner.body!=this){if(null!=s.zpp_inner.body&&s.zpp_inner.body.wrap_shapes.remove(s),s.zpp_inner.body=this,s.zpp_inner.addedToBody(),null!=this.space){var _this=this.space,s1=s.zpp_inner,o=s1.body;o.world||(o.component.waket=_this.stamp+(_this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&_this.really_wake(o,!1)),_this.bphase.insert(s1),s1.addedToSpace()}return 1==s.zpp_inner.type&&(s.zpp_inner.polygon.invalidate_gaxi(),s.zpp_inner.polygon.invalidate_gverts()),!0}return!1},zpp_nape.phys.ZPP_Body.prototype.shapes_subber=function(s){null!=this.space&&this.space.removed_shape(s.zpp_inner),s.zpp_inner.body=null,s.zpp_inner.removedFromBody()},zpp_nape.phys.ZPP_Body.prototype.shapes_invalidate=function(_){this.invalidate_shapes()},zpp_nape.phys.ZPP_Body.prototype.shapes_modifiable=function(){if(this.immutable_midstep("Body::shapes"),1==this.type&&null!=this.space)throw new js._Boot.HaxeError("Error: Cannot modifiy shapes of static object once added to Space")},zpp_nape.phys.ZPP_Body.prototype.addedToSpace=function(){null==zpp_nape.space.ZPP_Component.zpp_pool?this.component=new zpp_nape.space.ZPP_Component:(this.component=zpp_nape.space.ZPP_Component.zpp_pool,zpp_nape.space.ZPP_Component.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!0,this.component.body=this,this.__iaddedToSpace()},zpp_nape.phys.ZPP_Body.prototype.removedFromSpace=function(){for(;null!=this.arbiters.head;){var arb=this.arbiters.pop_unsafe(),s=this.space;if(arb.cleared=!0,arb.b2==this)for(var _this=arb.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==arb){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}if(arb.b1==this)for(var _this1=arb.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==arb){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=arb.pair&&(arb.pair.arb=null,arb.pair=null),arb.active=!1,s.f_arbiters.modified=!0}var o2=this.component;o2.body=null,o2.constraint=null,o2.next=zpp_nape.space.ZPP_Component.zpp_pool,zpp_nape.space.ZPP_Component.zpp_pool=o2,this.component=null,this.__iremovedFromSpace()},zpp_nape.phys.ZPP_Body.prototype.copy=function(){var ret=(new nape.phys.Body).zpp_inner;ret.type=this.type,ret.bulletEnabled=this.bulletEnabled,ret.disableCCD=this.disableCCD;for(var cx_ite=this.shapes.head;null!=cx_ite;){var s=cx_ite.elt,_this=ret.outer.zpp_inner.wrap_shapes,obj=s.outer.copy();_this.zpp_inner.reverse_flag?_this.push(obj):_this.unshift(obj),cx_ite=cx_ite.next}if(ret.posx=this.posx,ret.posy=this.posy,ret.velx=this.velx,ret.vely=this.vely,ret.forcex=this.forcex,ret.forcey=this.forcey,ret.rot=this.rot,ret.angvel=this.angvel,ret.torque=this.torque,ret.kinvelx=this.kinvelx,ret.kinvely=this.kinvely,ret.kinangvel=this.kinangvel,ret.svelx=this.svelx,ret.svely=this.svely,this.zip_axis){ret.zip_axis=!0;for(var cx_ite1=ret.shapes.head;null!=cx_ite1;){var s1=cx_ite1.elt;1==s1.type&&(s1.polygon.invalidate_gverts(),s1.polygon.invalidate_gaxi()),s1.invalidate_worldCOM(),cx_ite1=cx_ite1.next}ret.zip_worldCOM=!0}else ret.axisx=this.axisx,ret.axisy=this.axisy;return ret.rot=this.rot,ret.massMode=this.massMode,ret.gravMassMode=this.gravMassMode,ret.inertiaMode=this.inertiaMode,ret.norotate=this.norotate,ret.nomove=this.nomove,ret.cmass=this.cmass,ret.cinertia=this.cinertia,this.zip_mass?ret.invalidate_mass():ret.mass=this.mass,this.zip_gravMass?ret.invalidate_gravMass():ret.gravMass=this.gravMass,this.zip_gravMassScale?ret.invalidate_gravMassScale():ret.gravMassScale=this.gravMassScale,this.zip_inertia?ret.invalidate_inertia():ret.inertia=this.inertia,this.zip_aabb?ret.zip_aabb=!0:(ret.aabb.minx=this.aabb.minx,ret.aabb.miny=this.aabb.miny,ret.aabb.maxx=this.aabb.maxx,ret.aabb.maxy=this.aabb.maxy),this.zip_localCOM?(ret.zip_localCOM=!0,ret.zip_worldCOM=!0):(ret.localCOMx=this.localCOMx,ret.localCOMy=this.localCOMy),this.zip_worldCOM?ret.zip_worldCOM=!0:(ret.worldCOMx=this.worldCOMx,ret.worldCOMy=this.worldCOMy),this.copyto(ret.outer),ret.outer},zpp_nape.phys.ZPP_Body.prototype.__class__=zpp_nape.phys.ZPP_Body,zpp_nape.phys.ZPP_Compound=$hxClasses["zpp_nape.phys.ZPP_Compound"]=function(){this.space=null,this.compound=null,this.depth=0,this.wrap_compounds=null,this.wrap_constraints=null,this.wrap_bodies=null,this.compounds=null,this.constraints=null,this.bodies=null,this.outer=null,zpp_nape.phys.ZPP_Interactor.call(this),this.icompound=this,this.depth=1;var me=this;this.bodies=new zpp_nape.util.ZNPList_ZPP_Body,this.wrap_bodies=zpp_nape.util.ZPP_BodyList.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber),this.wrap_bodies.zpp_inner._modifiable=$bind(this,this.bodies_modifiable),this.constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.wrap_constraints=zpp_nape.util.ZPP_ConstraintList.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber),this.wrap_constraints.zpp_inner._modifiable=$bind(this,this.constraints_modifiable),this.compounds=new zpp_nape.util.ZNPList_ZPP_Compound,this.wrap_compounds=zpp_nape.util.ZPP_CompoundList.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber),this.wrap_compounds.zpp_inner._modifiable=$bind(this,this.compounds_modifiable)},zpp_nape.phys.ZPP_Compound.__name__=["zpp_nape","phys","ZPP_Compound"],zpp_nape.phys.ZPP_Compound.__super__=zpp_nape.phys.ZPP_Interactor,zpp_nape.phys.ZPP_Interactor.prototype)zpp_nape.phys.ZPP_Compound.prototype[k]=zpp_nape.phys.ZPP_Interactor.prototype[k];for(var k in zpp_nape.phys.ZPP_Compound.prototype.outer=null,zpp_nape.phys.ZPP_Compound.prototype.bodies=null,zpp_nape.phys.ZPP_Compound.prototype.constraints=null,zpp_nape.phys.ZPP_Compound.prototype.compounds=null,zpp_nape.phys.ZPP_Compound.prototype.wrap_bodies=null,zpp_nape.phys.ZPP_Compound.prototype.wrap_constraints=null,zpp_nape.phys.ZPP_Compound.prototype.wrap_compounds=null,zpp_nape.phys.ZPP_Compound.prototype.depth=null,zpp_nape.phys.ZPP_Compound.prototype.compound=null,zpp_nape.phys.ZPP_Compound.prototype.space=null,zpp_nape.phys.ZPP_Compound.prototype.__imutable_midstep=function(name){if(null!=this.space&&this.space.midstep)throw new js._Boot.HaxeError("Error: "+name+" cannot be set during space step()")},zpp_nape.phys.ZPP_Compound.prototype.addedToSpace=function(){this.__iaddedToSpace()},zpp_nape.phys.ZPP_Compound.prototype.removedFromSpace=function(){this.__iremovedFromSpace()},zpp_nape.phys.ZPP_Compound.prototype.breakApart=function(){for(null!=this.space&&(this.__iremovedFromSpace(),this.space.nullInteractorType(this)),null!=this.compound?this.compound.compounds.remove(this):null!=this.space&&this.space.compounds.remove(this);null!=this.bodies.head;){var b=this.bodies.pop_unsafe();null!=(b.compound=this.compound)?this.compound.bodies.add(b):null!=this.space&&this.space.bodies.add(b),null!=this.space&&this.space.freshInteractorType(b)}for(;null!=this.constraints.head;){var c=this.constraints.pop_unsafe();null!=(c.compound=this.compound)?this.compound.constraints.add(c):null!=this.space&&this.space.constraints.add(c)}for(;null!=this.compounds.head;){var c1=this.compounds.pop_unsafe();null!=(c1.compound=this.compound)?this.compound.compounds.add(c1):null!=this.space&&this.space.compounds.add(c1),null!=this.space&&this.space.freshInteractorType(c1)}this.compound=null,this.space=null},zpp_nape.phys.ZPP_Compound.prototype.bodies_adder=function(x){return x.zpp_inner.compound!=this&&(null!=x.zpp_inner.compound?x.zpp_inner.compound.wrap_bodies.remove(x):null!=x.zpp_inner.space&&x.zpp_inner.space.wrap_bodies.remove(x),x.zpp_inner.compound=this,null!=this.space&&this.space.addBody(x.zpp_inner),!0)},zpp_nape.phys.ZPP_Compound.prototype.bodies_subber=function(x){x.zpp_inner.compound=null,null!=this.space&&this.space.remBody(x.zpp_inner)},zpp_nape.phys.ZPP_Compound.prototype.bodies_modifiable=function(){this.immutable_midstep("Compound::bodies")},zpp_nape.phys.ZPP_Compound.prototype.constraints_adder=function(x){return x.zpp_inner.compound!=this&&(null!=x.zpp_inner.compound?x.zpp_inner.compound.wrap_constraints.remove(x):null!=x.zpp_inner.space&&x.zpp_inner.space.wrap_constraints.remove(x),x.zpp_inner.compound=this,null!=this.space&&this.space.addConstraint(x.zpp_inner),!0)},zpp_nape.phys.ZPP_Compound.prototype.constraints_subber=function(x){x.zpp_inner.compound=null,null!=this.space&&this.space.remConstraint(x.zpp_inner)},zpp_nape.phys.ZPP_Compound.prototype.constraints_modifiable=function(){this.immutable_midstep("Compound::constraints")},zpp_nape.phys.ZPP_Compound.prototype.compounds_adder=function(x){for(var cur=this;null!=cur&&cur!=x.zpp_inner;)cur=cur.compound;if(cur==x.zpp_inner)throw new js._Boot.HaxeError("Error: Assignment would cause a cycle in the Compound tree: assigning "+x.toString()+".compound = "+this.outer.toString());return x.zpp_inner.compound!=this&&(null!=x.zpp_inner.compound?x.zpp_inner.compound.wrap_compounds.remove(x):null!=x.zpp_inner.space&&x.zpp_inner.space.wrap_compounds.remove(x),x.zpp_inner.compound=this,x.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(x.zpp_inner),!0)},zpp_nape.phys.ZPP_Compound.prototype.compounds_subber=function(x){x.zpp_inner.compound=null,x.zpp_inner.depth=1,null!=this.space&&this.space.remCompound(x.zpp_inner)},zpp_nape.phys.ZPP_Compound.prototype.compounds_modifiable=function(){this.immutable_midstep("Compound::compounds")},zpp_nape.phys.ZPP_Compound.prototype.copy=function(dict,todo){var root=null==dict;null==dict&&(dict=[]),null==todo&&(todo=[]);for(var ret=new nape.phys.Compound,cx_ite=this.compounds.head;null!=cx_ite;){var c,cc=cx_ite.elt.copy(dict,todo);if(cc.zpp_inner.immutable_midstep("Compound::compound"),(null==cc.zpp_inner.compound?null:cc.zpp_inner.compound.outer)!=ret&&(null!=(null==cc.zpp_inner.compound?null:cc.zpp_inner.compound.outer)&&(null==cc.zpp_inner.compound?null:cc.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(cc),null!=ret)){var _this=ret.zpp_inner.wrap_compounds;_this.zpp_inner.reverse_flag?_this.push(cc):_this.unshift(cc)}var tmp=null==cc.zpp_inner.compound;cx_ite=cx_ite.next}for(var cx_ite1=this.bodies.head;null!=cx_ite1;){var b=cx_ite1.elt,bc=b.outer.copy();if(dict.push(zpp_nape.constraint.ZPP_CopyHelper.dict(b.id,bc)),(null==bc.zpp_inner.compound?null:bc.zpp_inner.compound.outer)!=ret&&(null!=(null==bc.zpp_inner.compound?null:bc.zpp_inner.compound.outer)&&(null==bc.zpp_inner.compound?null:bc.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(bc),null!=ret)){var _this1=ret.zpp_inner.wrap_bodies;_this1.zpp_inner.reverse_flag?_this1.push(bc):_this1.unshift(bc)}var tmp1=null==bc.zpp_inner.compound;cx_ite1=cx_ite1.next}for(var cx_ite2=this.constraints.head;null!=cx_ite2;){var c1,cc1=cx_ite2.elt.copy(dict,todo);if((null==cc1.zpp_inner.compound?null:cc1.zpp_inner.compound.outer)!=ret&&(null!=(null==cc1.zpp_inner.compound?null:cc1.zpp_inner.compound.outer)&&(null==cc1.zpp_inner.compound?null:cc1.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(cc1),null!=ret)){var _this2=ret.zpp_inner.wrap_constraints;_this2.zpp_inner.reverse_flag?_this2.push(cc1):_this2.unshift(cc1)}var tmp2=null==cc1.zpp_inner.compound;cx_ite2=cx_ite2.next}if(root)for(;todo.length>0;)for(var xcb=todo.pop(),_g=0;_g<dict.length;){var idc=dict[_g];if(++_g,idc.id==xcb.id){xcb.cb(idc.bc);break}}return this.copyto(ret),ret},zpp_nape.phys.ZPP_Compound.prototype.__class__=zpp_nape.phys.ZPP_Compound,zpp_nape.phys.ZPP_FluidProperties=$hxClasses["zpp_nape.phys.ZPP_FluidProperties"]=function(){this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.density=0,this.viscosity=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape,this.density=this.viscosity=1,this.wrap_gravity=null,this.gravityx=0,this.gravityy=0},zpp_nape.phys.ZPP_FluidProperties.__name__=["zpp_nape","phys","ZPP_FluidProperties"],zpp_nape.phys.ZPP_FluidProperties.prototype.next=null,zpp_nape.phys.ZPP_FluidProperties.prototype.userData=null,zpp_nape.phys.ZPP_FluidProperties.prototype.outer=null,zpp_nape.phys.ZPP_FluidProperties.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.phys.FluidProperties;var o=this.outer.zpp_inner;o.outer=null,o.next=zpp_nape.phys.ZPP_FluidProperties.zpp_pool,zpp_nape.phys.ZPP_FluidProperties.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.phys.ZPP_FluidProperties.prototype.free=function(){this.outer=null},zpp_nape.phys.ZPP_FluidProperties.prototype.alloc=function(){},zpp_nape.phys.ZPP_FluidProperties.prototype.shapes=null,zpp_nape.phys.ZPP_FluidProperties.prototype.wrap_shapes=null,zpp_nape.phys.ZPP_FluidProperties.prototype.feature_cons=function(){this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape},zpp_nape.phys.ZPP_FluidProperties.prototype.addShape=function(shape){this.shapes.add(shape)},zpp_nape.phys.ZPP_FluidProperties.prototype.remShape=function(shape){this.shapes.remove(shape)},zpp_nape.phys.ZPP_FluidProperties.prototype.copy=function(){var ret;return null==zpp_nape.phys.ZPP_FluidProperties.zpp_pool?ret=new zpp_nape.phys.ZPP_FluidProperties:(ret=zpp_nape.phys.ZPP_FluidProperties.zpp_pool,zpp_nape.phys.ZPP_FluidProperties.zpp_pool=ret.next,ret.next=null),ret.viscosity=this.viscosity,ret.density=this.density,ret},zpp_nape.phys.ZPP_FluidProperties.prototype.viscosity=null,zpp_nape.phys.ZPP_FluidProperties.prototype.density=null,zpp_nape.phys.ZPP_FluidProperties.prototype.gravityx=null,zpp_nape.phys.ZPP_FluidProperties.prototype.gravityy=null,zpp_nape.phys.ZPP_FluidProperties.prototype.wrap_gravity=null,zpp_nape.phys.ZPP_FluidProperties.prototype.gravity_invalidate=function(x){this.gravityx=x.x,this.gravityy=x.y,this.invalidate()},zpp_nape.phys.ZPP_FluidProperties.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},zpp_nape.phys.ZPP_FluidProperties.prototype.getgravity=function(){var x=this.gravityx,y=this.gravityy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_gravity=ret,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$bind(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$bind(this,this.gravity_validate)},zpp_nape.phys.ZPP_FluidProperties.prototype.invalidate=function(){for(var cx_ite=this.shapes.head;null!=cx_ite;){var shape;cx_ite.elt.invalidate_fluidprops(),cx_ite=cx_ite.next}},zpp_nape.phys.ZPP_FluidProperties.prototype.__class__=zpp_nape.phys.ZPP_FluidProperties,zpp_nape.phys.ZPP_Material=$hxClasses["zpp_nape.phys.ZPP_Material"]=function(){this.rollingFriction=0,this.elasticity=0,this.density=0,this.staticFriction=0,this.dynamicFriction=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape,this.elasticity=0,this.dynamicFriction=1,this.staticFriction=2,this.density=.001,this.rollingFriction=.01},zpp_nape.phys.ZPP_Material.__name__=["zpp_nape","phys","ZPP_Material"],zpp_nape.phys.ZPP_Material.prototype.next=null,zpp_nape.phys.ZPP_Material.prototype.userData=null,zpp_nape.phys.ZPP_Material.prototype.outer=null,zpp_nape.phys.ZPP_Material.prototype.wrapper=function(){if(null==this.outer){this.outer=new nape.phys.Material;var o=this.outer.zpp_inner;o.outer=null,o.next=zpp_nape.phys.ZPP_Material.zpp_pool,zpp_nape.phys.ZPP_Material.zpp_pool=o,this.outer.zpp_inner=this}return this.outer},zpp_nape.phys.ZPP_Material.prototype.free=function(){this.outer=null},zpp_nape.phys.ZPP_Material.prototype.alloc=function(){},zpp_nape.phys.ZPP_Material.prototype.shapes=null,zpp_nape.phys.ZPP_Material.prototype.wrap_shapes=null,zpp_nape.phys.ZPP_Material.prototype.feature_cons=function(){this.shapes=new zpp_nape.util.ZNPList_ZPP_Shape},zpp_nape.phys.ZPP_Material.prototype.addShape=function(shape){this.shapes.add(shape)},zpp_nape.phys.ZPP_Material.prototype.remShape=function(shape){this.shapes.remove(shape)},zpp_nape.phys.ZPP_Material.prototype.dynamicFriction=null,zpp_nape.phys.ZPP_Material.prototype.staticFriction=null,zpp_nape.phys.ZPP_Material.prototype.density=null,zpp_nape.phys.ZPP_Material.prototype.elasticity=null,zpp_nape.phys.ZPP_Material.prototype.rollingFriction=null,zpp_nape.phys.ZPP_Material.prototype.copy=function(){var ret=new zpp_nape.phys.ZPP_Material;return ret.dynamicFriction=this.dynamicFriction,ret.staticFriction=this.staticFriction,ret.density=this.density,ret.elasticity=this.elasticity,ret.rollingFriction=this.rollingFriction,ret},zpp_nape.phys.ZPP_Material.prototype.set=function(x){this.dynamicFriction=x.dynamicFriction,this.staticFriction=x.staticFriction,this.density=x.density,this.elasticity=x.elasticity,this.rollingFriction=x.rollingFriction},zpp_nape.phys.ZPP_Material.prototype.invalidate=function(x){for(var cx_ite=this.shapes.head;null!=cx_ite;){var s;cx_ite.elt.invalidate_material(x),cx_ite=cx_ite.next}},zpp_nape.phys.ZPP_Material.prototype.__class__=zpp_nape.phys.ZPP_Material,zpp_nape.shape||(zpp_nape.shape={}),zpp_nape.shape.ZPP_Shape=$hxClasses["zpp_nape.shape.ZPP_Shape"]=function(type){var ret;this.zip_aabb=!1,this.aabb=null,this.pairs=null,this.node=null,this.sweep=null,this.sensorEnabled=!1,this.fluidEnabled=!1,this.fluidProperties=null,this.filter=null,this.material=null,this.refmaterial=null,this.polygon=null,this.circle=null,this.sweepCoef=0,this.zip_sweepRadius=!1,this.sweepRadius=0,this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_angDrag=!1,this.angDrag=0,this.inertia=0,this.zip_area_inertia=!1,this.area=0,this.type=0,this.body=null,this.outer=null,zpp_nape.phys.ZPP_Interactor.call(this),this.pairs=new zpp_nape.util.ZNPList_ZPP_AABBPair,this.ishape=this,this.type=type,null==zpp_nape.geom.ZPP_AABB.zpp_pool?ret=new zpp_nape.geom.ZPP_AABB:(ret=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=ret.next,ret.next=null),ret.minx=0,ret.miny=0,ret.maxx=0,ret.maxy=0,this.aabb=ret,this.aabb._immutable=!0;var me=this;this.aabb._validate=$bind(this,this.aabb_validate),this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.fluidEnabled=!1,this.sensorEnabled=!1,this.fluidProperties=null,this.body=null,this.refmaterial=new zpp_nape.phys.ZPP_Material,this.sweepRadius=this.sweepCoef=0},zpp_nape.shape.ZPP_Shape.__name__=["zpp_nape","shape","ZPP_Shape"],zpp_nape.shape.ZPP_Shape.__super__=zpp_nape.phys.ZPP_Interactor,zpp_nape.phys.ZPP_Interactor.prototype)zpp_nape.shape.ZPP_Shape.prototype[k]=zpp_nape.phys.ZPP_Interactor.prototype[k];for(var k in zpp_nape.shape.ZPP_Shape.prototype.outer=null,zpp_nape.shape.ZPP_Shape.prototype.body=null,zpp_nape.shape.ZPP_Shape.prototype.type=null,zpp_nape.shape.ZPP_Shape.prototype.isCircle=function(){return 0==this.type},zpp_nape.shape.ZPP_Shape.prototype.isPolygon=function(){return 1==this.type},zpp_nape.shape.ZPP_Shape.prototype.area=null,zpp_nape.shape.ZPP_Shape.prototype.zip_area_inertia=null,zpp_nape.shape.ZPP_Shape.prototype.inertia=null,zpp_nape.shape.ZPP_Shape.prototype.angDrag=null,zpp_nape.shape.ZPP_Shape.prototype.zip_angDrag=null,zpp_nape.shape.ZPP_Shape.prototype.localCOMx=null,zpp_nape.shape.ZPP_Shape.prototype.localCOMy=null,zpp_nape.shape.ZPP_Shape.prototype.zip_localCOM=null,zpp_nape.shape.ZPP_Shape.prototype.worldCOMx=null,zpp_nape.shape.ZPP_Shape.prototype.worldCOMy=null,zpp_nape.shape.ZPP_Shape.prototype.zip_worldCOM=null,zpp_nape.shape.ZPP_Shape.prototype.wrap_localCOM=null,zpp_nape.shape.ZPP_Shape.prototype.wrap_worldCOM=null,zpp_nape.shape.ZPP_Shape.prototype.sweepRadius=null,zpp_nape.shape.ZPP_Shape.prototype.zip_sweepRadius=null,zpp_nape.shape.ZPP_Shape.prototype.sweepCoef=null,zpp_nape.shape.ZPP_Shape.prototype.invalidate_sweepRadius=function(){this.zip_sweepRadius=!0},zpp_nape.shape.ZPP_Shape.prototype.validate_sweepRadius=function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},zpp_nape.shape.ZPP_Shape.prototype.circle=null,zpp_nape.shape.ZPP_Shape.prototype.polygon=null,zpp_nape.shape.ZPP_Shape.prototype.refmaterial=null,zpp_nape.shape.ZPP_Shape.prototype.material=null,zpp_nape.shape.ZPP_Shape.prototype.filter=null,zpp_nape.shape.ZPP_Shape.prototype.fluidProperties=null,zpp_nape.shape.ZPP_Shape.prototype.fluidEnabled=null,zpp_nape.shape.ZPP_Shape.prototype.sensorEnabled=null,zpp_nape.shape.ZPP_Shape.prototype.sweep=null,zpp_nape.shape.ZPP_Shape.prototype.node=null,zpp_nape.shape.ZPP_Shape.prototype.pairs=null,zpp_nape.shape.ZPP_Shape.prototype.clear=function(){0==this.type?this.circle.__clear():this.polygon.__clear()},zpp_nape.shape.ZPP_Shape.prototype.aabb=null,zpp_nape.shape.ZPP_Shape.prototype.zip_aabb=null,zpp_nape.shape.ZPP_Shape.prototype.validate_aabb=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var _this=this.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=this.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite2=_this3.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}},zpp_nape.shape.ZPP_Shape.prototype.force_validate_aabb=function(){if(0==this.type){var _this=this.circle;_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy),_this.aabb.minx=_this.worldCOMx-_this.radius,_this.aabb.miny=_this.worldCOMy-_this.radius,_this.aabb.maxx=_this.worldCOMx+_this.radius,_this.aabb.maxy=_this.worldCOMy+_this.radius}else{var _this1=this.polygon,li=_this1.lverts.next,p0=_this1.gverts.next,l=li;li=li.next,p0.x=_this1.body.posx+(_this1.body.axisy*l.x-_this1.body.axisx*l.y),p0.y=_this1.body.posy+(l.x*_this1.body.axisx+l.y*_this1.body.axisy),_this1.aabb.minx=p0.x,_this1.aabb.miny=p0.y,_this1.aabb.maxx=p0.x,_this1.aabb.maxy=p0.y;for(var cx_ite=_this1.gverts.next.next;null!=cx_ite;){var p=cx_ite,l1=li;li=li.next,p.x=_this1.body.posx+(_this1.body.axisy*l1.x-_this1.body.axisx*l1.y),p.y=_this1.body.posy+(l1.x*_this1.body.axisx+l1.y*_this1.body.axisy),p.x<_this1.aabb.minx&&(_this1.aabb.minx=p.x),p.x>_this1.aabb.maxx&&(_this1.aabb.maxx=p.x),p.y<_this1.aabb.miny&&(_this1.aabb.miny=p.y),p.y>_this1.aabb.maxy&&(_this1.aabb.maxy=p.y),cx_ite=cx_ite.next}}},zpp_nape.shape.ZPP_Shape.prototype.invalidate_aabb=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},zpp_nape.shape.ZPP_Shape.prototype.validate_area_inertia=function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},zpp_nape.shape.ZPP_Shape.prototype.validate_angDrag=function(){(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)&&(this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag())},zpp_nape.shape.ZPP_Shape.prototype.validate_localCOM=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},zpp_nape.shape.ZPP_Shape.prototype.validate_worldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var _this1=this.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}},zpp_nape.shape.ZPP_Shape.prototype.getworldCOM=function(){if(null==this.body)throw new js._Boot.HaxeError("Error: worldCOM only makes sense when Shape belongs to a Body");if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var _this1=this.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},zpp_nape.shape.ZPP_Shape.prototype.invalidate_area_inertia=function(){if(this.zip_area_inertia=!0,null!=this.body){var _this=this.body;_this.zip_localCOM=!0,_this.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}},zpp_nape.shape.ZPP_Shape.prototype.invalidate_angDrag=function(){this.zip_angDrag=!0},zpp_nape.shape.ZPP_Shape.prototype.invalidate_localCOM=function(){if(this.zip_localCOM=!0,this.invalidate_area_inertia(),0==this.type&&(this.zip_sweepRadius=!0),this.invalidate_angDrag(),this.invalidate_worldCOM(),null!=this.body){var _this=this.body;_this.zip_localCOM=!0,_this.zip_worldCOM=!0}},zpp_nape.shape.ZPP_Shape.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0,this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},zpp_nape.shape.ZPP_Shape.prototype.invalidate_material=function(flags){if(0!=(flags&zpp_nape.phys.ZPP_Material.WAKE)&&this.wake(),0!=(flags&zpp_nape.phys.ZPP_Material.ARBITERS)&&null!=this.body&&this.body.refreshArbiters(),0!=(flags&zpp_nape.phys.ZPP_Material.PROPS)&&null!=this.body){var _this=this.body;_this.zip_localCOM=!0,_this.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}0!=(flags&zpp_nape.phys.ZPP_Material.ANGDRAG)&&this.invalidate_angDrag(),this.refmaterial.set(this.material)},zpp_nape.shape.ZPP_Shape.prototype.invalidate_filter=function(){this.wake()},zpp_nape.shape.ZPP_Shape.prototype.invalidate_fluidprops=function(){this.fluidEnabled&&this.wake()},zpp_nape.shape.ZPP_Shape.prototype.aabb_validate=function(){if(null==this.body)throw new js._Boot.HaxeError("Error: bounds only makes sense when Shape belongs to a Body");if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var _this=this.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=this.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite2=_this3.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}},zpp_nape.shape.ZPP_Shape.prototype.setMaterial=function(material){this.material!=material&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=material,null!=this.body&&null!=this.body.space&&material.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},zpp_nape.shape.ZPP_Shape.prototype.setFilter=function(filter){this.filter!=filter&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=filter,null!=this.body&&null!=this.body.space&&filter.shapes.add(this),this.wake())},zpp_nape.shape.ZPP_Shape.prototype.setFluid=function(fluid){this.fluidProperties!=fluid&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=fluid,null!=this.body&&null!=this.body.space&&fluid.shapes.add(this),this.fluidEnabled&&this.wake())},zpp_nape.shape.ZPP_Shape.prototype.__immutable_midstep=function(name){if(null!=this.body&&null!=this.body.space&&this.body.space.midstep)throw new js._Boot.HaxeError("Error: "+name+" cannot be set during a space step()")},zpp_nape.shape.ZPP_Shape.prototype.addedToBody=function(){this.invalidate_worldCOM(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},zpp_nape.shape.ZPP_Shape.prototype.removedFromBody=function(){},zpp_nape.shape.ZPP_Shape.prototype.addedToSpace=function(){this.__iaddedToSpace(),this.material.shapes.add(this),this.filter.shapes.add(this),null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},zpp_nape.shape.ZPP_Shape.prototype.removedFromSpace=function(){this.__iremovedFromSpace(),this.material.shapes.remove(this),this.filter.shapes.remove(this),null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},zpp_nape.shape.ZPP_Shape.prototype.copy=function(){var ret=null;ret=0==this.type?this.circle.__copy():this.polygon.__copy(),this.zip_area_inertia?ret.invalidate_area_inertia():(ret.area=this.area,ret.inertia=this.inertia),this.zip_sweepRadius?ret.zip_sweepRadius=!0:(ret.sweepRadius=this.sweepRadius,ret.sweepCoef=this.sweepCoef),this.zip_angDrag?ret.invalidate_angDrag():ret.angDrag=this.angDrag,this.zip_aabb?(ret.zip_aabb=!0,null!=ret.body&&(ret.body.zip_aabb=!0)):(ret.aabb.minx=this.aabb.minx,ret.aabb.miny=this.aabb.miny,ret.aabb.maxx=this.aabb.maxx,ret.aabb.maxy=this.aabb.maxy);var o=ret.material;o.outer=null,o.next=zpp_nape.phys.ZPP_Material.zpp_pool,zpp_nape.phys.ZPP_Material.zpp_pool=o;var o1=ret.filter;return o1.outer=null,o1.next=zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=o1,ret.material=this.material,ret.filter=this.filter,null!=this.fluidProperties&&(ret.fluidProperties=this.fluidProperties),ret.fluidEnabled=this.fluidEnabled,ret.sensorEnabled=this.sensorEnabled,null!=this.userData&&(ret.userData=Reflect.copy(this.userData)),this.copyto(ret.outer),ret.outer},zpp_nape.shape.ZPP_Shape.prototype.__class__=zpp_nape.shape.ZPP_Shape,zpp_nape.shape.ZPP_Circle=$hxClasses["zpp_nape.shape.ZPP_Circle"]=function(){this.radius=0,this.outer_zn=null,zpp_nape.shape.ZPP_Shape.call(this,0),this.circle=this,this.zip_localCOM=!1},zpp_nape.shape.ZPP_Circle.__name__=["zpp_nape","shape","ZPP_Circle"],zpp_nape.shape.ZPP_Circle.__super__=zpp_nape.shape.ZPP_Shape,zpp_nape.shape.ZPP_Shape.prototype)zpp_nape.shape.ZPP_Circle.prototype[k]=zpp_nape.shape.ZPP_Shape.prototype[k];for(var k in zpp_nape.shape.ZPP_Circle.prototype.outer_zn=null,zpp_nape.shape.ZPP_Circle.prototype.radius=null,zpp_nape.shape.ZPP_Circle.prototype.__clear=function(){},zpp_nape.shape.ZPP_Circle.prototype.invalidate_radius=function(){this.invalidate_area_inertia(),this.invalidate_angDrag(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),null!=this.body&&this.body.wake()},zpp_nape.shape.ZPP_Circle.prototype.localCOM_validate=function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy},zpp_nape.shape.ZPP_Circle.prototype.localCOM_invalidate=function(x){this.localCOMx=x.x,this.localCOMy=x.y,this.invalidate_localCOM(),null!=this.body&&this.body.wake()},zpp_nape.shape.ZPP_Circle.prototype.localCOM_immutable=function(){if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw new js._Boot.HaxeError("Error: Cannot modify localCOM of Circle added to a static Body whilst within a Space")},zpp_nape.shape.ZPP_Circle.prototype.setupLocalCOM=function(){var me=this,x=this.localCOMx,y=this.localCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_localCOM=ret,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate),this.wrap_localCOM.zpp_inner._isimmutable=$bind(this,this.localCOM_immutable)},zpp_nape.shape.ZPP_Circle.prototype.__validate_aabb=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var _this1=this.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}var rx=this.radius,ry=this.radius;this.aabb.minx=this.worldCOMx-rx,this.aabb.miny=this.worldCOMy-ry,this.aabb.maxx=this.worldCOMx+rx,this.aabb.maxy=this.worldCOMy+ry},zpp_nape.shape.ZPP_Circle.prototype._force_validate_aabb=function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy),this.aabb.minx=this.worldCOMx-this.radius,this.aabb.miny=this.worldCOMy-this.radius,this.aabb.maxx=this.worldCOMx+this.radius,this.aabb.maxy=this.worldCOMy+this.radius},zpp_nape.shape.ZPP_Circle.prototype.__validate_sweepRadius=function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy),this.sweepRadius=this.sweepCoef+this.radius},zpp_nape.shape.ZPP_Circle.prototype.__validate_area_inertia=function(){var r2=this.radius*this.radius;this.area=r2*Math.PI,this.inertia=.5*r2+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},zpp_nape.shape.ZPP_Circle.prototype.__validate_angDrag=function(){var lc=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,r2=this.radius*this.radius,skin=this.material.dynamicFriction*nape.Config.fluidAngularDragFriction;this.angDrag=(lc+2*r2)*skin+.5*nape.Config.fluidAngularDrag*(1+nape.Config.fluidVacuumDrag)*lc,this.angDrag/=2*(lc+.5*r2)},zpp_nape.shape.ZPP_Circle.prototype.__scale=function(sx,sy){var factor=((sx<0?-sx:sx)+(sy<0?-sy:sy))/2;this.radius*=factor<0?-factor:factor,this.invalidate_radius(),this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0&&(this.localCOMx*=sx,this.localCOMy*=sy,this.invalidate_localCOM())},zpp_nape.shape.ZPP_Circle.prototype.__translate=function(x,y){var t=1;this.localCOMx+=1*x,this.localCOMy+=1*y,this.invalidate_localCOM()},zpp_nape.shape.ZPP_Circle.prototype.__rotate=function(x,y){if(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy>0){var tx=0,ty=0;tx=y*this.localCOMx-x*this.localCOMy,ty=this.localCOMx*x+this.localCOMy*y,this.localCOMx=tx,this.localCOMy=ty,this.invalidate_localCOM()}},zpp_nape.shape.ZPP_Circle.prototype.__transform=function(m){var det=m.zpp_inner.a*m.zpp_inner.d-m.zpp_inner.b*m.zpp_inner.c;det<0&&(det=-det),this.radius*=Math.sqrt(det);var t=m.zpp_inner.a*this.localCOMx+m.zpp_inner.b*this.localCOMy+m.zpp_inner.tx;this.localCOMy=m.zpp_inner.c*this.localCOMx+m.zpp_inner.d*this.localCOMy+m.zpp_inner.ty,this.localCOMx=t,this.invalidate_radius(),this.invalidate_localCOM()},zpp_nape.shape.ZPP_Circle.prototype.__copy=function(){var ret=new nape.shape.Circle(this.radius).zpp_inner_zn;return ret.localCOMx=this.localCOMx,ret.localCOMy=this.localCOMy,ret.zip_localCOM=!1,ret},zpp_nape.shape.ZPP_Circle.prototype.__class__=zpp_nape.shape.ZPP_Circle,zpp_nape.shape.ZPP_Edge=$hxClasses["zpp_nape.shape.ZPP_Edge"]=function(){this.tp1=0,this.tp0=0,this.gp1=null,this.lp1=null,this.gp0=null,this.lp0=null,this.gprojection=0,this.lprojection=0,this.length=0,this.wrap_gnorm=null,this.gnormy=0,this.gnormx=0,this.wrap_lnorm=null,this.lnormy=0,this.lnormx=0,this.outer=null,this.polygon=null,this.next=null,this.lnormx=0,this.lnormy=0,this.gnormx=0,this.gnormy=0,this.length=0,this.lprojection=0,this.gprojection=0},zpp_nape.shape.ZPP_Edge.__name__=["zpp_nape","shape","ZPP_Edge"],zpp_nape.shape.ZPP_Edge.prototype.next=null,zpp_nape.shape.ZPP_Edge.prototype.free=function(){this.polygon=null},zpp_nape.shape.ZPP_Edge.prototype.alloc=function(){},zpp_nape.shape.ZPP_Edge.prototype.polygon=null,zpp_nape.shape.ZPP_Edge.prototype.outer=null,zpp_nape.shape.ZPP_Edge.prototype.wrapper=function(){return null==this.outer&&(zpp_nape.shape.ZPP_Edge.internal=!0,this.outer=new nape.shape.Edge,zpp_nape.shape.ZPP_Edge.internal=!1,this.outer.zpp_inner=this),this.outer},zpp_nape.shape.ZPP_Edge.prototype.lnormx=null,zpp_nape.shape.ZPP_Edge.prototype.lnormy=null,zpp_nape.shape.ZPP_Edge.prototype.wrap_lnorm=null,zpp_nape.shape.ZPP_Edge.prototype.gnormx=null,zpp_nape.shape.ZPP_Edge.prototype.gnormy=null,zpp_nape.shape.ZPP_Edge.prototype.wrap_gnorm=null,zpp_nape.shape.ZPP_Edge.prototype.length=null,zpp_nape.shape.ZPP_Edge.prototype.lprojection=null,zpp_nape.shape.ZPP_Edge.prototype.gprojection=null,zpp_nape.shape.ZPP_Edge.prototype.lp0=null,zpp_nape.shape.ZPP_Edge.prototype.gp0=null,zpp_nape.shape.ZPP_Edge.prototype.lp1=null,zpp_nape.shape.ZPP_Edge.prototype.gp1=null,zpp_nape.shape.ZPP_Edge.prototype.tp0=null,zpp_nape.shape.ZPP_Edge.prototype.tp1=null,zpp_nape.shape.ZPP_Edge.prototype.lnorm_validate=function(){if(null==this.polygon)throw new js._Boot.HaxeError("Error: Edge not currently in use");this.polygon.validate_laxi(),this.wrap_lnorm.zpp_inner.x=this.lnormx,this.wrap_lnorm.zpp_inner.y=this.lnormy},zpp_nape.shape.ZPP_Edge.prototype.gnorm_validate=function(){if(null==this.polygon)throw new js._Boot.HaxeError("Error: Edge not currently in use");if(null==this.polygon.body)throw new js._Boot.HaxeError("Error: Edge worldNormal only makes sense if the parent Polygon is contained within a rigid body");var _this=this.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}this.wrap_gnorm.zpp_inner.x=this.gnormx,this.wrap_gnorm.zpp_inner.y=this.gnormy},zpp_nape.shape.ZPP_Edge.prototype.getlnorm=function(){var x=this.lnormx,y=this.lnormy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_lnorm=ret,this.wrap_lnorm.zpp_inner._immutable=!0,this.wrap_lnorm.zpp_inner._validate=$bind(this,this.lnorm_validate)},zpp_nape.shape.ZPP_Edge.prototype.getgnorm=function(){var x=this.gnormx,y=this.gnormy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_gnorm=ret,this.wrap_gnorm.zpp_inner._immutable=!0,this.wrap_gnorm.zpp_inner._validate=$bind(this,this.gnorm_validate)},zpp_nape.shape.ZPP_Edge.prototype.__class__=zpp_nape.shape.ZPP_Edge,zpp_nape.shape.ZPP_Polygon=$hxClasses["zpp_nape.shape.ZPP_Polygon"]=function(){this.zip_sanitation=!1,this.zip_valid=!1,this.zip_gaxi=!1,this.zip_gverts=!1,this.zip_laxi=!1,this.zip_lverts=!1,this.reverse_flag=!1,this.edgeCnt=0,this.wrap_edges=null,this.edges=null,this.wrap_gverts=null,this.gverts=null,this.wrap_lverts=null,this.lverts=null,this.outer_zn=null,zpp_nape.shape.ZPP_Shape.call(this,1),this.polygon=this,this.lverts=new zpp_nape.geom.ZPP_Vec2,this.gverts=new zpp_nape.geom.ZPP_Vec2,this.edges=new zpp_nape.util.ZNPList_ZPP_Edge,this.edgeCnt=0},zpp_nape.shape.ZPP_Polygon.__name__=["zpp_nape","shape","ZPP_Polygon"],zpp_nape.shape.ZPP_Polygon.__super__=zpp_nape.shape.ZPP_Shape,zpp_nape.shape.ZPP_Shape.prototype)zpp_nape.shape.ZPP_Polygon.prototype[k]=zpp_nape.shape.ZPP_Shape.prototype[k];for(var k in zpp_nape.shape.ZPP_Polygon.prototype.outer_zn=null,zpp_nape.shape.ZPP_Polygon.prototype.lverts=null,zpp_nape.shape.ZPP_Polygon.prototype.wrap_lverts=null,zpp_nape.shape.ZPP_Polygon.prototype.gverts=null,zpp_nape.shape.ZPP_Polygon.prototype.wrap_gverts=null,zpp_nape.shape.ZPP_Polygon.prototype.edges=null,zpp_nape.shape.ZPP_Polygon.prototype.wrap_edges=null,zpp_nape.shape.ZPP_Polygon.prototype.edgeCnt=null,zpp_nape.shape.ZPP_Polygon.prototype.reverse_flag=null,zpp_nape.shape.ZPP_Polygon.prototype.__clear=function(){},zpp_nape.shape.ZPP_Polygon.prototype.lverts_pa_invalidate=function(x){this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.lverts_pa_immutable=function(){if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw new js._Boot.HaxeError("Error: Cannot modify local vertex of Polygon added to a static body whilst within a Space")},zpp_nape.shape.ZPP_Polygon.prototype.gverts_pa_validate=function(){if(null==this.body)throw new js._Boot.HaxeError("Error: World vertex only makes sense when Polygon is contained in a rigid body");if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var _this=this.body;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));for(var li=this.lverts.next,cx_ite=this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),cx_ite=cx_ite.next}}},zpp_nape.shape.ZPP_Polygon.prototype.lverts_post_adder=function(x){x.zpp_inner._invalidate=$bind(this,this.lverts_pa_invalidate),x.zpp_inner._isimmutable=$bind(this,this.lverts_pa_immutable);for(var ite=null,ite2=null,cx_ite=this.lverts.next;null!=cx_ite;){var i;if(cx_ite==x.zpp_inner)break;ite=null==ite?this.gverts.next:ite.next,ite2=null==ite2?this.edges.head:ite2.next,cx_ite=cx_ite.next}var immutable=!0,ret;null==immutable&&(immutable=!1),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=immutable,ret.x=0,ret.y=0;var vec=ret,ed,ed1,ed2;(this.gverts.insert(ite,vec),null!=this.lverts.next.next)&&(null==this.lverts.next.next.next?(null==zpp_nape.shape.ZPP_Edge.zpp_pool?ed=new zpp_nape.shape.ZPP_Edge:(ed=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=ed.next,ed.next=null),ed.polygon=this,this.edges.add(ed),null==zpp_nape.shape.ZPP_Edge.zpp_pool?ed1=new zpp_nape.shape.ZPP_Edge:(ed1=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=ed1.next,ed1.next=null),ed1.polygon=this,this.edges.add(ed1),this.edgeCnt+=2):(null==zpp_nape.shape.ZPP_Edge.zpp_pool?ed2=new zpp_nape.shape.ZPP_Edge:(ed2=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=ed2.next,ed2.next=null),ed2.polygon=this,this.edges.insert(ite2,ed2),this.edgeCnt++));vec._validate=$bind(this,this.gverts_pa_validate)},zpp_nape.shape.ZPP_Polygon.prototype.lverts_subber=function(x){this.cleanup_lvert(x.zpp_inner)},zpp_nape.shape.ZPP_Polygon.prototype.lverts_invalidate=function(_){this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.lverts_validate=function(){this.validate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.lverts_modifiable=function(){if(this.immutable_midstep("Polygon::localVerts"),null!=this.body&&1==this.body.type&&null!=this.body.space)throw new js._Boot.HaxeError("Error: Cannot modifiy shapes of static object once added to Space")},zpp_nape.shape.ZPP_Polygon.prototype.gverts_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var _this=this.body;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));for(var li=this.lverts.next,cx_ite=this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),cx_ite=cx_ite.next}}},zpp_nape.shape.ZPP_Polygon.prototype.edges_validate=function(){this.validate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.getlverts=function(){var me=this;this.wrap_lverts=zpp_nape.util.ZPP_MixVec2List.get(this.lverts),this.wrap_lverts.zpp_inner.post_adder=$bind(this,this.lverts_post_adder),this.wrap_lverts.zpp_inner.subber=$bind(this,this.lverts_subber),this.wrap_lverts.zpp_inner._invalidate=$bind(this,this.lverts_invalidate),this.wrap_lverts.zpp_inner._validate=$bind(this,this.lverts_validate),this.wrap_lverts.zpp_inner._modifiable=$bind(this,this.lverts_modifiable),this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},zpp_nape.shape.ZPP_Polygon.prototype.getgverts=function(){var me=this;this.wrap_gverts=zpp_nape.util.ZPP_MixVec2List.get(this.gverts,!0),this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_gverts.zpp_inner._validate=$bind(this,this.gverts_validate)},zpp_nape.shape.ZPP_Polygon.prototype.getedges=function(){var me=this;this.wrap_edges=zpp_nape.util.ZPP_EdgeList.get(this.edges,!0),this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_edges.zpp_inner._validate=$bind(this,this.edges_validate)},zpp_nape.shape.ZPP_Polygon.prototype.zip_lverts=null,zpp_nape.shape.ZPP_Polygon.prototype.invalidate_lverts=function(){this.invalidate_laxi(),this.invalidate_area_inertia(),this.invalidate_angDrag(),this.invalidate_localCOM(),this.invalidate_gverts(),this.zip_lverts=!0,this.zip_valid=!0,this.zip_sanitation=!0,null!=this.body&&this.body.wake()},zpp_nape.shape.ZPP_Polygon.prototype.zip_laxi=null,zpp_nape.shape.ZPP_Polygon.prototype.invalidate_laxi=function(){this.invalidate_gaxi(),this.zip_sweepRadius=!0,this.zip_laxi=!0},zpp_nape.shape.ZPP_Polygon.prototype.zip_gverts=null,zpp_nape.shape.ZPP_Polygon.prototype.invalidate_gverts=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),this.zip_gverts=!0},zpp_nape.shape.ZPP_Polygon.prototype.zip_gaxi=null,zpp_nape.shape.ZPP_Polygon.prototype.invalidate_gaxi=function(){this.zip_gaxi=!0},zpp_nape.shape.ZPP_Polygon.prototype.zip_valid=null,zpp_nape.shape.ZPP_Polygon.prototype.validation=null,zpp_nape.shape.ZPP_Polygon.prototype.valid=function(){if(this.zip_valid){if(this.zip_valid=!1,this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real()),this.lverts.length<3)return null==zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this.validation=zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE;if(this.validate_lverts(),this.validate_area_inertia(),this.area<nape.Config.epsilon)return null==zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this.validation=zpp_nape.util.ZPP_Flags.ValidationResult_DEGENERATE;var neg=!1,pos=!1,cx_cont=!0,cx_ite=this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite,ax=0,ay=0;ax=w.x-v.x,ay=w.y-v.y;var bx=0,by=0;bx=v.x-u.x;var dot=(by=v.y-u.y)*ax-bx*ay;if(dot>nape.Config.epsilon?pos=!0:dot<-nape.Config.epsilon&&(neg=!0),pos&&neg){cx_cont=!1;break}u=v,v=w,cx_ite=cx_ite.next}if(cx_cont){for(var w1=cx_ite=this.lverts.next;;){var ax1=0,ay1=0;ax1=w1.x-v.x,ay1=w1.y-v.y;var bx1=0,by1=0;bx1=v.x-u.x;var dot1=(by1=v.y-u.y)*ax1-bx1*ay1;if(dot1>nape.Config.epsilon?pos=!0:dot1<-nape.Config.epsilon&&(neg=!0),pos&&neg){cx_cont=!1;break}break}if(cx_cont){u=v,v=w1;for(var w2=cx_ite=cx_ite.next;;){var ax2=0,ay2=0;ax2=w2.x-v.x,ay2=w2.y-v.y;var bx2=0,by2=0;bx2=v.x-u.x;var dot2=(by2=v.y-u.y)*ax2-bx2*ay2;if(dot2>nape.Config.epsilon?pos=!0:dot2<-nape.Config.epsilon&&(neg=!0),pos&&neg)break;break}}}if(pos&&neg)return null==zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this.validation=zpp_nape.util.ZPP_Flags.ValidationResult_CONCAVE;var cont=!0,cx_cont1=!0,cx_ite1=this.lverts.next,u1=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v1=cx_ite1;if(!cont){cx_cont1=!1;break}var cx_cont2=!0,cx_ite2=this.lverts.next,a=cx_ite2;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var b=cx_ite2;if(u1!=a&&u1!=b&&v1!=a&&v1!=b){var sx=0,sy=0;sx=u1.x-a.x,sy=u1.y-a.y;var vx=0,vy=0;vx=v1.x-u1.x;var qx=0,qy=0,den=(vy=v1.y-u1.y)*(qx=b.x-a.x)-vx*(qy=b.y-a.y);if(den*den>nape.Config.epsilon){var t=(qy*sx-qx*sy)*(den=1/den);if(t>nape.Config.epsilon&&t<1-nape.Config.epsilon){var s=(vy*sx-vx*sy)*den;if(s>nape.Config.epsilon&&s<1-nape.Config.epsilon){cont=!1,cx_cont2=!1;break}}}a=b,cx_ite2=cx_ite2.next}else a=b,cx_ite2=cx_ite2.next}if(cx_cont2)for(;;){var b1=this.lverts.next;if(u1==a||u1==b1||v1==a||v1==b1)break;var sx1=0,sy1=0;sx1=u1.x-a.x,sy1=u1.y-a.y;var vx1=0,vy1=0;vx1=v1.x-u1.x;var qx1=0,qy1=0,den1=(vy1=v1.y-u1.y)*(qx1=b1.x-a.x)-vx1*(qy1=b1.y-a.y);if(den1*den1>nape.Config.epsilon){var t1=(qy1*sx1-qx1*sy1)*(den1=1/den1);if(t1>nape.Config.epsilon&&t1<1-nape.Config.epsilon){var s1=(vy1*sx1-vx1*sy1)*den1;if(s1>nape.Config.epsilon&&s1<1-nape.Config.epsilon){cont=!1;break}}}break}u1=v1,cx_ite1=cx_ite1.next}if(cx_cont1)for(;;){var v2=this.lverts.next;if(!cont)break;var cx_cont3=!0,cx_ite3=this.lverts.next,a1=cx_ite3;for(cx_ite3=cx_ite3.next;null!=cx_ite3;){var b2=cx_ite3;if(u1!=a1&&u1!=b2&&v2!=a1&&v2!=b2){var sx2=0,sy2=0;sx2=u1.x-a1.x,sy2=u1.y-a1.y;var vx2=0,vy2=0;vx2=v2.x-u1.x;var qx2=0,qy2=0,den2=(vy2=v2.y-u1.y)*(qx2=b2.x-a1.x)-vx2*(qy2=b2.y-a1.y);if(den2*den2>nape.Config.epsilon){var t2=(qy2*sx2-qx2*sy2)*(den2=1/den2);if(t2>nape.Config.epsilon&&t2<1-nape.Config.epsilon){var s2=(vy2*sx2-vx2*sy2)*den2;if(s2>nape.Config.epsilon&&s2<1-nape.Config.epsilon){cont=!1,cx_cont3=!1;break}}}a1=b2,cx_ite3=cx_ite3.next}else a1=b2,cx_ite3=cx_ite3.next}if(cx_cont3)for(;;){var b3=this.lverts.next;if(u1==a1||u1==b3||v2==a1||v2==b3)break;var sx3=0,sy3=0;sx3=u1.x-a1.x,sy3=u1.y-a1.y;var vx3=0,vy3=0;vx3=v2.x-u1.x;var qx3=0,qy3=0,den3=(vy3=v2.y-u1.y)*(qx3=b3.x-a1.x)-vx3*(qy3=b3.y-a1.y);if(den3*den3>nape.Config.epsilon){var t3=(qy3*sx3-qx3*sy3)*(den3=1/den3);if(t3>nape.Config.epsilon&&t3<1-nape.Config.epsilon){var s3=(vy3*sx3-vx3*sy3)*den3;if(s3>nape.Config.epsilon&&s3<1-nape.Config.epsilon){cont=!1;break}}}break}break}return cont?(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this.validation=zpp_nape.util.ZPP_Flags.ValidationResult_VALID):(null==zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),this.validation=zpp_nape.util.ZPP_Flags.ValidationResult_SELF_INTERSECTING)}return this.validation},zpp_nape.shape.ZPP_Polygon.prototype.validate_lverts=function(){this.zip_lverts&&(this.zip_lverts=!1,this.lverts.length>2&&(this.validate_area_inertia(),this.area<0&&(this.reverse_vertices(),this.area=-this.area)))},zpp_nape.shape.ZPP_Polygon.prototype.cleanup_lvert=function(x){for(var ite=null,ite2=null,cx_ite=this.lverts.next;null!=cx_ite;){var i;if(cx_ite==x)break;ite=null==ite?this.gverts.next:ite.next,ite2=null==ite2?this.edges.head:ite2.next,cx_ite=cx_ite.next}var rem=null==ite?this.gverts.next:ite.next;this.gverts.erase(ite);var o=rem;if(null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,2==this.edgeCnt){var rem1=this.edges.pop_unsafe(),o1=rem1;o1.polygon=null,o1.next=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=o1;var o2=rem1=this.edges.pop_unsafe();o2.polygon=null,o2.next=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=o2,this.edgeCnt=0}else if(0!=this.edgeCnt){var rem2=null==ite2?this.edges.head.elt:ite2.next.elt;this.edges.erase(ite2);var o3=rem2;o3.polygon=null,o3.next=zpp_nape.shape.ZPP_Edge.zpp_pool,zpp_nape.shape.ZPP_Edge.zpp_pool=o3,this.edgeCnt--}},zpp_nape.shape.ZPP_Polygon.prototype.zip_sanitation=null,zpp_nape.shape.ZPP_Polygon.prototype.splice_collinear=function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},zpp_nape.shape.ZPP_Polygon.prototype.splice_collinear_real=function(){if(null!=this.lverts.next&&null!=this.lverts.next.next&&null!=this.lverts.next.next.next){for(var pre=null,cur=this.lverts.next;null!=cur;){var nxt,u=cur,v=null==cur.next?this.lverts.next:cur.next,dx=0,dy=0;(dx=u.x-v.x)*dx+(dy=u.y-v.y)*dy<nape.Config.epsilon*nape.Config.epsilon?(this.cleanup_lvert(cur),cur=this.lverts.erase(pre)):(pre=cur,cur=cur.next)}if(null!=this.lverts.next)for(var removed;;){removed=!1;for(var pre1=this.lverts.next;null!=pre1;){var cur1=null==pre1.next?this.lverts.next:pre1.next,nxt1,u1=pre1,v1=cur1,w=null==cur1.next?this.lverts.next:cur1.next,ax=0,ay=0;ax=v1.x-u1.x,ay=v1.y-u1.y;var bx=0,by=0;bx=w.x-v1.x;var crs=(by=w.y-v1.y)*ax-bx*ay;crs*crs>=nape.Config.epsilon*nape.Config.epsilon?pre1=pre1.next:(this.cleanup_lvert(cur1),this.lverts.erase(null==pre1.next?null:pre1),removed=!0,pre1=pre1.next)}if(!removed)break}}},zpp_nape.shape.ZPP_Polygon.prototype.reverse_vertices=function(){this.lverts.reverse(),this.gverts.reverse(),this.edges.reverse();var ite=this.edges.iterator_at(this.edgeCnt-1),elem=this.edges.pop_unsafe();this.edges.insert(ite,elem),this.reverse_flag=!this.reverse_flag,null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},zpp_nape.shape.ZPP_Polygon.prototype.validate_laxi=function(){if(this.zip_laxi){this.zip_laxi=!1,this.validate_lverts();var ite=this.edges.head,cx_ite=this.lverts.next,u=cx_ite;for(cx_ite=cx_ite.next;null!=cx_ite;){var v=cx_ite,edge=ite.elt;ite=ite.next,edge.lp0=u,edge.lp1=v;var dx=0,dy=0;dx=u.x-v.x,dy=u.y-v.y;var l=Math.sqrt(dx*dx+dy*dy);edge.length=l;var t=1/l,t1=dx*=t;dx=-(dy*=t),dy=t1,edge.lprojection=dx*u.x+dy*u.y,edge.lnormx=dx,edge.lnormy=dy,null!=edge.wrap_lnorm&&(edge.wrap_lnorm.zpp_inner.x=dx,edge.wrap_lnorm.zpp_inner.y=dy),u=v,cx_ite=cx_ite.next}var v1=this.lverts.next,edge1=ite.elt;ite=ite.next,edge1.lp0=u,edge1.lp1=v1;var dx1=0,dy1=0;dx1=u.x-v1.x,dy1=u.y-v1.y;var l1=Math.sqrt(dx1*dx1+dy1*dy1);edge1.length=l1;var t2=1/l1,t3=dx1*=t2;dx1=-(dy1*=t2),dy1=t3,edge1.lprojection=dx1*u.x+dy1*u.y,edge1.lnormx=dx1,edge1.lnormy=dy1,null!=edge1.wrap_lnorm&&(edge1.wrap_lnorm.zpp_inner.x=dx1,edge1.wrap_lnorm.zpp_inner.y=dy1)}},zpp_nape.shape.ZPP_Polygon.prototype.validate_gverts=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var _this=this.body;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));for(var li=this.lverts.next,cx_ite=this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),cx_ite=cx_ite.next}}},zpp_nape.shape.ZPP_Polygon.prototype.validate_gaxi=function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1,this.validate_laxi();var _this=this.body;if(_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot)),this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var _this1=this.body;_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot));for(var li=this.lverts.next,cx_ite=this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),cx_ite=cx_ite.next}}var ite=this.edges.head,cx_ite1=this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy,e.gnormy=e.lnormx*this.body.axisx+e.lnormy*this.body.axisy,e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=this.body.axisy*e1.lnormx-this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*this.body.axisx+e1.lnormy*this.body.axisy,e1.gprojection=this.body.posx*e1.gnormx+this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}},zpp_nape.shape.ZPP_Polygon.prototype.__validate_aabb=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var _this=this.body;_this.zip_axis&&(_this.zip_axis=!1,_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot));for(var li=this.lverts.next,cx_ite=this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),cx_ite=cx_ite.next}}if(null==this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=this.gverts.next;this.aabb.minx=p0.x,this.aabb.miny=p0.y,this.aabb.maxx=p0.x,this.aabb.maxy=p0.y;for(var cx_ite1=this.gverts.next.next;null!=cx_ite1;){var p=cx_ite1;p.x<this.aabb.minx&&(this.aabb.minx=p.x),p.x>this.aabb.maxx&&(this.aabb.maxx=p.x),p.y<this.aabb.miny&&(this.aabb.miny=p.y),p.y>this.aabb.maxy&&(this.aabb.maxy=p.y),cx_ite1=cx_ite1.next}},zpp_nape.shape.ZPP_Polygon.prototype._force_validate_aabb=function(){var li=this.lverts.next,p0=this.gverts.next,l=li;li=li.next,p0.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y),p0.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy),this.aabb.minx=p0.x,this.aabb.miny=p0.y,this.aabb.maxx=p0.x,this.aabb.maxy=p0.y;for(var cx_ite=this.gverts.next.next;null!=cx_ite;){var p=cx_ite,l1=li;li=li.next,p.x=this.body.posx+(this.body.axisy*l1.x-this.body.axisx*l1.y),p.y=this.body.posy+(l1.x*this.body.axisx+l1.y*this.body.axisy),p.x<this.aabb.minx&&(this.aabb.minx=p.x),p.x>this.aabb.maxx&&(this.aabb.maxx=p.x),p.y<this.aabb.miny&&(this.aabb.miny=p.y),p.y>this.aabb.maxy&&(this.aabb.maxy=p.y),cx_ite=cx_ite.next}},zpp_nape.shape.ZPP_Polygon.prototype.__validate_sweepRadius=function(){var maxRadius=0,minRadius=0;this.validate_laxi();for(var cx_ite=this.lverts.next;null!=cx_ite;){var x=cx_ite,r=x.x*x.x+x.y*x.y;r>maxRadius&&(maxRadius=r),cx_ite=cx_ite.next}for(var cx_ite1=this.edges.head;null!=cx_ite1;){var e=cx_ite1.elt;if(e.lprojection<minRadius&&(minRadius=e.lprojection)<0)break;cx_ite1=cx_ite1.next}minRadius<0&&(minRadius=0),this.sweepRadius=Math.sqrt(maxRadius),this.sweepCoef=this.sweepRadius-minRadius},zpp_nape.shape.ZPP_Polygon.prototype.__validate_area_inertia=function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.area=0,this.inertia=0;else{this.area=0;var s1=0,s2=0,cx_ite=this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite,a=v.y*u.x-v.x*u.y,b;s1+=a*(v.x*v.x+v.y*v.y+(v.x*u.x+v.y*u.y)+(u.x*u.x+u.y*u.y)),s2+=a,this.area+=v.x*(w.y-u.y),u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=this.lverts.next,a1=v.y*u.x-v.x*u.y,b1;s1+=a1*(v.x*v.x+v.y*v.y+(v.x*u.x+v.y*u.y)+(u.x*u.x+u.y*u.y)),s2+=a1,this.area+=v.x*(w1.y-u.y),u=v,v=w1;var w2=cx_ite=cx_ite.next,a2=v.y*u.x-v.x*u.y,b2;s1+=a2*(v.x*v.x+v.y*v.y+(v.x*u.x+v.y*u.y)+(u.x*u.x+u.y*u.y)),s2+=a2,this.area+=v.x*(w2.y-u.y),this.inertia=s1/(6*s2),this.area*=.5,this.area<0&&(this.area=-this.area,this.reverse_vertices())}},zpp_nape.shape.ZPP_Polygon.prototype.__validate_angDrag=function(){if(this.lverts.length<3)throw new js._Boot.HaxeError("Error: Polygon's with less than 3 vertices have no meaningful angDrag");this.validate_area_inertia(),this.validate_laxi();for(var accum=0,ei=this.edges.head,perim=0,cx_cont=!0,cx_itei=this.lverts.next,u=cx_itei,cx_itej=cx_itei.next;null!=cx_itej;){var v=cx_itej,edge=ei.elt;ei=ei.next,perim+=edge.length;var dx=0,dy=0;dx=v.x-u.x,dy=v.y-u.y,accum+=edge.length*nape.Config.fluidAngularDragFriction*this.material.dynamicFriction*edge.lprojection*edge.lprojection;var t=-(u.y*edge.lnormx-u.x*edge.lnormy)/(dy*edge.lnormx-dx*edge.lnormy);if(t>0){var ta=t>1?1:t,cx=0,cy=0;cx=u.x,cy=u.y;var t1=ta;cx+=dx*ta,cy+=dy*ta;var dota=edge.lnormy*u.x-edge.lnormx*u.y,dotb=edge.lnormy*cx-edge.lnormx*cy,dots;accum+=(dotb*dotb*dotb-dota*dota*dota)/(3*(dotb-dota))*ta*edge.length*nape.Config.fluidAngularDrag}if(t<1){var tb=t<0?0:t,cx1=0,cy1=0;cx1=u.x,cy1=u.y;var t2=tb;cx1+=dx*tb,cy1+=dy*tb;var dota1=edge.lnormy*cx1-edge.lnormx*cy1,dotb1=edge.lnormy*v.x-edge.lnormx*v.y,dots1;accum+=(dotb1*dotb1*dotb1-dota1*dota1*dota1)/(3*(dotb1-dota1))*nape.Config.fluidVacuumDrag*(1-tb)*edge.length*nape.Config.fluidAngularDrag}cx_itei=cx_itej,u=v,cx_itej=cx_itej.next}for(1;;){var v1=cx_itej=this.lverts.next,edge1=ei.elt;ei=ei.next,perim+=edge1.length;var dx1=0,dy1=0;dx1=v1.x-u.x,dy1=v1.y-u.y,accum+=edge1.length*nape.Config.fluidAngularDragFriction*this.material.dynamicFriction*edge1.lprojection*edge1.lprojection;var t3=-(u.y*edge1.lnormx-u.x*edge1.lnormy)/(dy1*edge1.lnormx-dx1*edge1.lnormy);if(t3>0){var ta1=t3>1?1:t3,cx2=0,cy2=0;cx2=u.x,cy2=u.y;var t4=ta1;cx2+=dx1*ta1,cy2+=dy1*ta1;var dota2=edge1.lnormy*u.x-edge1.lnormx*u.y,dotb2=edge1.lnormy*cx2-edge1.lnormx*cy2,dots2;accum+=(dotb2*dotb2*dotb2-dota2*dota2*dota2)/(3*(dotb2-dota2))*ta1*edge1.length*nape.Config.fluidAngularDrag}if(t3<1){var tb1=t3<0?0:t3,cx3=0,cy3=0;cx3=u.x,cy3=u.y;var t5=tb1;cx3+=dx1*tb1,cy3+=dy1*tb1;var dota3=edge1.lnormy*cx3-edge1.lnormx*cy3,dotb3=edge1.lnormy*v1.x-edge1.lnormx*v1.y,dots3;accum+=(dotb3*dotb3*dotb3-dota3*dota3*dota3)/(3*(dotb3-dota3))*nape.Config.fluidVacuumDrag*(1-tb1)*edge1.length*nape.Config.fluidAngularDrag}break}this.angDrag=accum/(this.inertia*perim)},zpp_nape.shape.ZPP_Polygon.prototype.__validate_localCOM=function(){if(null==this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next){this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;var t=1;this.localCOMx+=1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y;var t1=.5;this.localCOMx*=.5,this.localCOMy*=.5}else{this.localCOMx=0,this.localCOMy=0;var area=0,cx_ite=this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;this.localCOMx+=(v.x+w.x)*cf,this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;this.localCOMx+=(v.x+w1.x)*cf1,this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;this.localCOMx+=(v.x+w2.x)*cf2,this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);this.localCOMx*=t2,this.localCOMy*=t2}},zpp_nape.shape.ZPP_Polygon.prototype.localCOM_validate=function(){if(null==this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon does not have any meaningful localCOM");if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},zpp_nape.shape.ZPP_Polygon.prototype.localCOM_invalidate=function(x){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var _this=this.polygon;if(null==_this.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this.lverts.next.next)_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;else if(null==_this.lverts.next.next.next){_this.localCOMx=_this.lverts.next.x,_this.localCOMy=_this.lverts.next.y;var t=1;_this.localCOMx+=1*_this.lverts.next.next.x,_this.localCOMy+=1*_this.lverts.next.next.y;var t1=.5;_this.localCOMx*=.5,_this.localCOMy*=.5}else{_this.localCOMx=0,_this.localCOMy=0;var area=0,cx_ite=_this.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf,_this.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1,_this.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this.localCOMx+=(v.x+w2.x)*cf2,_this.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this.localCOMx*=t2,_this.localCOMy*=t2}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var delx=0,dely=0;delx=x.x-this.localCOMx,dely=x.y-this.localCOMy;for(var cx_ite1=this.lverts.next;null!=cx_ite1;){var p=cx_ite1,t3=1;p.x+=1*delx,p.y+=1*dely,cx_ite1=cx_ite1.next}this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.setupLocalCOM=function(){var x=this.localCOMx,y=this.localCOMy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_localCOM=ret,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate)},zpp_nape.shape.ZPP_Polygon.prototype.__translate=function(dx,dy){for(var cx_ite=this.lverts.next;null!=cx_ite;){var p=cx_ite,t=1;p.x+=1*dx,p.y+=1*dy,cx_ite=cx_ite.next}this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.__scale=function(sx,sy){for(var cx_ite=this.lverts.next;null!=cx_ite;){var p=cx_ite;p.x*=sx,p.y*=sy,cx_ite=cx_ite.next}this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.__rotate=function(ax,ay){for(var cx_ite=this.lverts.next;null!=cx_ite;){var p=cx_ite,tempx=0,tempy=0;tempx=ay*p.x-ax*p.y,tempy=p.x*ax+p.y*ay,p.x=tempx,p.y=tempy,cx_ite=cx_ite.next}this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.__transform=function(mat){for(var cx_ite=this.lverts.next;null!=cx_ite;){var p=cx_ite,t=mat.zpp_inner.a*p.x+mat.zpp_inner.b*p.y+mat.zpp_inner.tx;p.y=mat.zpp_inner.c*p.x+mat.zpp_inner.d*p.y+mat.zpp_inner.ty,p.x=t,cx_ite=cx_ite.next}this.invalidate_lverts()},zpp_nape.shape.ZPP_Polygon.prototype.__copy=function(){var _this=this.outer_zn,ret;return null==_this.zpp_inner_zn.wrap_lverts&&_this.zpp_inner_zn.getlverts(),new nape.shape.Polygon(_this.zpp_inner_zn.wrap_lverts).zpp_inner_zn},zpp_nape.shape.ZPP_Polygon.prototype.__class__=zpp_nape.shape.ZPP_Polygon,zpp_nape.space||(zpp_nape.space={}),zpp_nape.space.ZPP_Broadphase=$hxClasses["zpp_nape.space.ZPP_Broadphase"]=function(){this.circShape=null,this.matrix=null,this.aabbShape=null,this.dynab=null,this.sweep=null,this.is_sweep=!1,this.space=null},zpp_nape.space.ZPP_Broadphase.__name__=["zpp_nape","space","ZPP_Broadphase"],zpp_nape.space.ZPP_Broadphase.prototype.space=null,zpp_nape.space.ZPP_Broadphase.prototype.is_sweep=null,zpp_nape.space.ZPP_Broadphase.prototype.sweep=null,zpp_nape.space.ZPP_Broadphase.prototype.dynab=null,zpp_nape.space.ZPP_Broadphase.prototype.insert=function(shape){this.is_sweep?this.sweep.__insert(shape):this.dynab.__insert(shape)},zpp_nape.space.ZPP_Broadphase.prototype.remove=function(shape){this.is_sweep?this.sweep.__remove(shape):this.dynab.__remove(shape)},zpp_nape.space.ZPP_Broadphase.prototype.sync=function(shape){if(this.is_sweep){if(!this.sweep.space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this=shape.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=shape.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite2=_this3.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}}else{var _this5=this.dynab,node=shape.node;if(!node.synced){if(!_this5.space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this6=shape.circle;if(_this6.zip_worldCOM&&null!=_this6.body){if(_this6.zip_worldCOM=!1,_this6.zip_localCOM){if(_this6.zip_localCOM=!1,1==_this6.type){var _this7=_this6.polygon;if(null==_this7.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this7.lverts.next.next)_this7.localCOMx=_this7.lverts.next.x,_this7.localCOMy=_this7.lverts.next.y;else if(null==_this7.lverts.next.next.next){_this7.localCOMx=_this7.lverts.next.x,_this7.localCOMy=_this7.lverts.next.y;var t3=1;_this7.localCOMx+=1*_this7.lverts.next.next.x,_this7.localCOMy+=1*_this7.lverts.next.next.y;var t4=.5;_this7.localCOMx*=.5,_this7.localCOMy*=.5}else{_this7.localCOMx=0,_this7.localCOMy=0;var area1=0,cx_ite3=_this7.lverts.next,u1=cx_ite3,v1=cx_ite3=cx_ite3.next;for(cx_ite3=cx_ite3.next;null!=cx_ite3;){var w3=cx_ite3;area1+=v1.x*(w3.y-u1.y);var cf3=w3.y*v1.x-w3.x*v1.y;_this7.localCOMx+=(v1.x+w3.x)*cf3,_this7.localCOMy+=(v1.y+w3.y)*cf3,u1=v1,v1=w3,cx_ite3=cx_ite3.next}var w4=cx_ite3=_this7.lverts.next;area1+=v1.x*(w4.y-u1.y);var cf4=w4.y*v1.x-w4.x*v1.y;_this7.localCOMx+=(v1.x+w4.x)*cf4,_this7.localCOMy+=(v1.y+w4.y)*cf4,u1=v1,v1=w4;var w5=cx_ite3=cx_ite3.next;area1+=v1.x*(w5.y-u1.y);var cf5=w5.y*v1.x-w5.x*v1.y;_this7.localCOMx+=(v1.x+w5.x)*cf5,_this7.localCOMy+=(v1.y+w5.y)*cf5;var t5=area1=1/(3*area1);_this7.localCOMx*=t5,_this7.localCOMy*=t5}}null!=_this6.wrap_localCOM&&(_this6.wrap_localCOM.zpp_inner.x=_this6.localCOMx,_this6.wrap_localCOM.zpp_inner.y=_this6.localCOMy)}var _this8=_this6.body;_this8.zip_axis&&(_this8.zip_axis=!1,_this8.axisx=Math.sin(_this8.rot),_this8.axisy=Math.cos(_this8.rot)),_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy),_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy)}var rx1=_this6.radius,ry1=_this6.radius;_this6.aabb.minx=_this6.worldCOMx-rx1,_this6.aabb.miny=_this6.worldCOMy-ry1,_this6.aabb.maxx=_this6.worldCOMx+rx1,_this6.aabb.maxy=_this6.worldCOMy+ry1}else{var _this9=shape.polygon;if(_this9.zip_gverts&&null!=_this9.body){_this9.zip_gverts=!1,_this9.validate_lverts();var _this10=_this9.body;_this10.zip_axis&&(_this10.zip_axis=!1,_this10.axisx=Math.sin(_this10.rot),_this10.axisy=Math.cos(_this10.rot));for(var li1=_this9.lverts.next,cx_ite4=_this9.gverts.next;null!=cx_ite4;){var g1=cx_ite4,l1=li1;li1=li1.next,g1.x=_this9.body.posx+(_this9.body.axisy*l1.x-_this9.body.axisx*l1.y),g1.y=_this9.body.posy+(l1.x*_this9.body.axisx+l1.y*_this9.body.axisy),cx_ite4=cx_ite4.next}}if(null==_this9.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p01=_this9.gverts.next;_this9.aabb.minx=p01.x,_this9.aabb.miny=p01.y,_this9.aabb.maxx=p01.x,_this9.aabb.maxy=p01.y;for(var cx_ite5=_this9.gverts.next.next;null!=cx_ite5;){var p1=cx_ite5;p1.x<_this9.aabb.minx&&(_this9.aabb.minx=p1.x),p1.x>_this9.aabb.maxx&&(_this9.aabb.maxx=p1.x),p1.y<_this9.aabb.miny&&(_this9.aabb.miny=p1.y),p1.y>_this9.aabb.maxy&&(_this9.aabb.maxy=p1.y),cx_ite5=cx_ite5.next}}var sync;if(node.dyn==(1!=shape.body.type&&!shape.body.component.sleeping)){var _this11=node.aabb,x=shape.aabb;sync=!(x.minx>=_this11.minx&&x.miny>=_this11.miny&&x.maxx<=_this11.maxx&&x.maxy<=_this11.maxy)}else sync=!0;sync&&(node.synced=!0,node.snext=_this5.syncs,_this5.syncs=node)}}},zpp_nape.space.ZPP_Broadphase.prototype.broadphase=function(space,discrete){},zpp_nape.space.ZPP_Broadphase.prototype.clear=function(){},zpp_nape.space.ZPP_Broadphase.prototype.shapesUnderPoint=function(x,y,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.bodiesUnderPoint=function(x,y,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.aabbShape=null,zpp_nape.space.ZPP_Broadphase.prototype.matrix=null,zpp_nape.space.ZPP_Broadphase.prototype.updateAABBShape=function(aabb){if(null==this.aabbShape){null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1);var body,_this=new nape.phys.Body(zpp_nape.util.ZPP_Flags.BodyType_STATIC).zpp_inner.wrap_shapes,obj=this.aabbShape=new nape.shape.Polygon(nape.shape.Polygon.rect(aabb.minx,aabb.miny,aabb.maxx-aabb.minx,aabb.maxy-aabb.miny));_this.zpp_inner.reverse_flag?_this.push(obj):_this.unshift(obj)}else{var ab=this.aabbShape.zpp_inner.aabb,sx=(aabb.maxx-aabb.minx)/(ab.maxx-ab.minx),sy=(aabb.maxy-aabb.miny)/(ab.maxy-ab.miny);null==this.matrix&&(this.matrix=new nape.geom.Mat23);var _this1=this.matrix;if(sx!=sx)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");_this1.zpp_inner.a=sx;var _this2=_this1.zpp_inner;null!=_this2._invalidate&&_this2._invalidate();var _this3=this.matrix,_this4=this.matrix;_this4.zpp_inner.c=0;var _this5=_this4.zpp_inner;null!=_this5._invalidate&&_this5._invalidate();var b=_this4.zpp_inner.c;if(b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");_this3.zpp_inner.b=b;var _this6=_this3.zpp_inner;null!=_this6._invalidate&&_this6._invalidate();var _this7=this.matrix;if(sy!=sy)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");_this7.zpp_inner.d=sy;var _this8=_this7.zpp_inner;null!=_this8._invalidate&&_this8._invalidate();var _this9=this.matrix,tx=aabb.minx-sx*ab.minx;if(tx!=tx)throw new js._Boot.HaxeError("Error: Mat23::tx cannot be NaN");_this9.zpp_inner.tx=tx;var _this10=_this9.zpp_inner;null!=_this10._invalidate&&_this10._invalidate();var _this11=this.matrix,ty=aabb.miny-sy*ab.miny;if(ty!=ty)throw new js._Boot.HaxeError("Error: Mat23::ty cannot be NaN");_this11.zpp_inner.ty=ty;var _this12=_this11.zpp_inner;null!=_this12._invalidate&&_this12._invalidate(),this.aabbShape.transform(this.matrix)}var _this13=this.aabbShape.zpp_inner;if(_this13.zip_aabb&&null!=_this13.body)if(_this13.zip_aabb=!1,0==_this13.type){var _this14=_this13.circle;if(_this14.zip_worldCOM&&null!=_this14.body){if(_this14.zip_worldCOM=!1,_this14.zip_localCOM){if(_this14.zip_localCOM=!1,1==_this14.type){var _this15=_this14.polygon;if(null==_this15.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this15.lverts.next.next)_this15.localCOMx=_this15.lverts.next.x,_this15.localCOMy=_this15.lverts.next.y;else if(null==_this15.lverts.next.next.next){_this15.localCOMx=_this15.lverts.next.x,_this15.localCOMy=_this15.lverts.next.y;var t=1;_this15.localCOMx+=1*_this15.lverts.next.next.x,_this15.localCOMy+=1*_this15.lverts.next.next.y;var t1=.5;_this15.localCOMx*=.5,_this15.localCOMy*=.5}else{_this15.localCOMx=0,_this15.localCOMy=0;var area=0,cx_ite=_this15.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this15.localCOMx+=(v.x+w.x)*cf,_this15.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this15.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this15.localCOMx+=(v.x+w1.x)*cf1,_this15.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this15.localCOMx+=(v.x+w2.x)*cf2,_this15.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this15.localCOMx*=t2,_this15.localCOMy*=t2}}null!=_this14.wrap_localCOM&&(_this14.wrap_localCOM.zpp_inner.x=_this14.localCOMx,_this14.wrap_localCOM.zpp_inner.y=_this14.localCOMy)}var _this16=_this14.body;_this16.zip_axis&&(_this16.zip_axis=!1,_this16.axisx=Math.sin(_this16.rot),_this16.axisy=Math.cos(_this16.rot)),_this14.worldCOMx=_this14.body.posx+(_this14.body.axisy*_this14.localCOMx-_this14.body.axisx*_this14.localCOMy),_this14.worldCOMy=_this14.body.posy+(_this14.localCOMx*_this14.body.axisx+_this14.localCOMy*_this14.body.axisy)}var rx=_this14.radius,ry=_this14.radius;_this14.aabb.minx=_this14.worldCOMx-rx,_this14.aabb.miny=_this14.worldCOMy-ry,_this14.aabb.maxx=_this14.worldCOMx+rx,_this14.aabb.maxy=_this14.worldCOMy+ry}else{var _this17=_this13.polygon;if(_this17.zip_gverts&&null!=_this17.body){_this17.zip_gverts=!1,_this17.validate_lverts();var _this18=_this17.body;_this18.zip_axis&&(_this18.zip_axis=!1,_this18.axisx=Math.sin(_this18.rot),_this18.axisy=Math.cos(_this18.rot));for(var li=_this17.lverts.next,cx_ite1=_this17.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this17.body.posx+(_this17.body.axisy*l.x-_this17.body.axisx*l.y),g.y=_this17.body.posy+(l.x*_this17.body.axisx+l.y*_this17.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this17.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this17.gverts.next;_this17.aabb.minx=p0.x,_this17.aabb.miny=p0.y,_this17.aabb.maxx=p0.x,_this17.aabb.maxy=p0.y;for(var cx_ite2=_this17.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this17.aabb.minx&&(_this17.aabb.minx=p.x),p.x>_this17.aabb.maxx&&(_this17.aabb.maxx=p.x),p.y<_this17.aabb.miny&&(_this17.aabb.miny=p.y),p.y>_this17.aabb.maxy&&(_this17.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}var _this19=this.aabbShape.zpp_inner.polygon;if(_this19.zip_gaxi&&null!=_this19.body){_this19.zip_gaxi=!1,_this19.validate_laxi();var _this20=_this19.body;if(_this20.zip_axis&&(_this20.zip_axis=!1,_this20.axisx=Math.sin(_this20.rot),_this20.axisy=Math.cos(_this20.rot)),_this19.zip_gverts&&null!=_this19.body){_this19.zip_gverts=!1,_this19.validate_lverts();var _this21=_this19.body;_this21.zip_axis&&(_this21.zip_axis=!1,_this21.axisx=Math.sin(_this21.rot),_this21.axisy=Math.cos(_this21.rot));for(var li1=_this19.lverts.next,cx_ite3=_this19.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=_this19.body.posx+(_this19.body.axisy*l1.x-_this19.body.axisx*l1.y),g1.y=_this19.body.posy+(l1.x*_this19.body.axisx+l1.y*_this19.body.axisy),cx_ite3=cx_ite3.next}}var ite=_this19.edges.head,cx_ite4=_this19.gverts.next,u1=cx_ite4;for(cx_ite4=cx_ite4.next;null!=cx_ite4;){var v1=cx_ite4,e=ite.elt;ite=ite.next,e.gp0=u1,e.gp1=v1,e.gnormx=_this19.body.axisy*e.lnormx-_this19.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this19.body.axisx+e.lnormy*_this19.body.axisy,e.gprojection=_this19.body.posx*e.gnormx+_this19.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u1=v1,cx_ite4=cx_ite4.next}var v2=_this19.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u1,e1.gp1=v2,e1.gnormx=_this19.body.axisy*e1.lnormx-_this19.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this19.body.axisx+e1.lnormy*_this19.body.axisy,e1.gprojection=_this19.body.posx*e1.gnormx+_this19.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}},zpp_nape.space.ZPP_Broadphase.prototype.shapesInAABB=function(aabb,strict,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.bodiesInAABB=function(aabb,strict,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.circShape=null,zpp_nape.space.ZPP_Broadphase.prototype.updateCircShape=function(x,y,r){if(null==this.circShape){null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1);var body,_this=new nape.phys.Body(zpp_nape.util.ZPP_Flags.BodyType_STATIC).zpp_inner.wrap_shapes,x1=x,y1=y,ret;if(null==y1&&(y1=0),null==x1&&(x1=0),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x1,ret1.y=y1,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner,obj;if(_this1._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this1._isimmutable&&_this1._isimmutable(),x1!=x1||y1!=y1)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;if(null!=_this2._validate&&_this2._validate(),ret.zpp_inner.x==x1){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this3=ret.zpp_inner;null!=_this3._validate&&_this3._validate(),obj=ret.zpp_inner.y==y1}else obj=!1;if(!obj){ret.zpp_inner.x=x1,ret.zpp_inner.y=y1;var _this4=ret.zpp_inner;null!=_this4._invalidate&&_this4._invalidate(_this4)}}ret.zpp_inner.weak=!1;var obj1=this.circShape=new nape.shape.Circle(r,ret);_this.zpp_inner.reverse_flag?_this.push(obj1):_this.unshift(obj1)}else{var ci=this.circShape.zpp_inner.circle,ss=r/ci.radius;null==this.matrix&&(this.matrix=new nape.geom.Mat23);var _this5=this.matrix,_this6=this.matrix;if(ss!=ss)throw new js._Boot.HaxeError("Error: Mat23::d cannot be NaN");_this6.zpp_inner.d=ss;var _this7=_this6.zpp_inner;null!=_this7._invalidate&&_this7._invalidate();var a=_this6.zpp_inner.d;if(a!=a)throw new js._Boot.HaxeError("Error: Mat23::a cannot be NaN");_this5.zpp_inner.a=a;var _this8=_this5.zpp_inner;null!=_this8._invalidate&&_this8._invalidate();var _this9=this.matrix,_this10=this.matrix;_this10.zpp_inner.c=0;var _this11=_this10.zpp_inner;null!=_this11._invalidate&&_this11._invalidate();var b=_this10.zpp_inner.c;if(b!=b)throw new js._Boot.HaxeError("Error: Mat23::b cannot be NaN");_this9.zpp_inner.b=b;var _this12=_this9.zpp_inner;null!=_this12._invalidate&&_this12._invalidate();var _this13=this.matrix,tx=x-ss*ci.localCOMx;if(tx!=tx)throw new js._Boot.HaxeError("Error: Mat23::tx cannot be NaN");_this13.zpp_inner.tx=tx;var _this14=_this13.zpp_inner;null!=_this14._invalidate&&_this14._invalidate();var _this15=this.matrix,ty=y-ss*ci.localCOMy;if(ty!=ty)throw new js._Boot.HaxeError("Error: Mat23::ty cannot be NaN");_this15.zpp_inner.ty=ty;var _this16=_this15.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(),this.circShape.transform(this.matrix)}var _this17=this.circShape.zpp_inner;if(_this17.zip_aabb&&null!=_this17.body)if(_this17.zip_aabb=!1,0==_this17.type){var _this18=_this17.circle;if(_this18.zip_worldCOM&&null!=_this18.body){if(_this18.zip_worldCOM=!1,_this18.zip_localCOM){if(_this18.zip_localCOM=!1,1==_this18.type){var _this19=_this18.polygon;if(null==_this19.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this19.lverts.next.next)_this19.localCOMx=_this19.lverts.next.x,_this19.localCOMy=_this19.lverts.next.y;else if(null==_this19.lverts.next.next.next){_this19.localCOMx=_this19.lverts.next.x,_this19.localCOMy=_this19.lverts.next.y;var t=1;_this19.localCOMx+=1*_this19.lverts.next.next.x,_this19.localCOMy+=1*_this19.lverts.next.next.y;var t1=.5;_this19.localCOMx*=.5,_this19.localCOMy*=.5}else{_this19.localCOMx=0,_this19.localCOMy=0;var area=0,cx_ite=_this19.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this19.localCOMx+=(v.x+w.x)*cf,_this19.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this19.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this19.localCOMx+=(v.x+w1.x)*cf1,_this19.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this19.localCOMx+=(v.x+w2.x)*cf2,_this19.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this19.localCOMx*=t2,_this19.localCOMy*=t2}}null!=_this18.wrap_localCOM&&(_this18.wrap_localCOM.zpp_inner.x=_this18.localCOMx,_this18.wrap_localCOM.zpp_inner.y=_this18.localCOMy)}var _this20=_this18.body;_this20.zip_axis&&(_this20.zip_axis=!1,_this20.axisx=Math.sin(_this20.rot),_this20.axisy=Math.cos(_this20.rot)),_this18.worldCOMx=_this18.body.posx+(_this18.body.axisy*_this18.localCOMx-_this18.body.axisx*_this18.localCOMy),_this18.worldCOMy=_this18.body.posy+(_this18.localCOMx*_this18.body.axisx+_this18.localCOMy*_this18.body.axisy)}var rx=_this18.radius,ry=_this18.radius;_this18.aabb.minx=_this18.worldCOMx-rx,_this18.aabb.miny=_this18.worldCOMy-ry,_this18.aabb.maxx=_this18.worldCOMx+rx,_this18.aabb.maxy=_this18.worldCOMy+ry}else{var _this21=_this17.polygon;if(_this21.zip_gverts&&null!=_this21.body){_this21.zip_gverts=!1,_this21.validate_lverts();var _this22=_this21.body;_this22.zip_axis&&(_this22.zip_axis=!1,_this22.axisx=Math.sin(_this22.rot),_this22.axisy=Math.cos(_this22.rot));for(var li=_this21.lverts.next,cx_ite1=_this21.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this21.body.posx+(_this21.body.axisy*l.x-_this21.body.axisx*l.y),g.y=_this21.body.posy+(l.x*_this21.body.axisx+l.y*_this21.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this21.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this21.gverts.next;_this21.aabb.minx=p0.x,_this21.aabb.miny=p0.y,_this21.aabb.maxx=p0.x,_this21.aabb.maxy=p0.y;for(var cx_ite2=_this21.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this21.aabb.minx&&(_this21.aabb.minx=p.x),p.x>_this21.aabb.maxx&&(_this21.aabb.maxx=p.x),p.y<_this21.aabb.miny&&(_this21.aabb.miny=p.y),p.y>_this21.aabb.maxy&&(_this21.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}},zpp_nape.space.ZPP_Broadphase.prototype.shapesInCircle=function(x,y,r,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.bodiesInCircle=function(x,y,r,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.validateShape=function(s){if(1==s.type){var _this=s.polygon;if(_this.zip_gaxi&&null!=_this.body){_this.zip_gaxi=!1,_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis&&(_this1.zip_axis=!1,_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot)),_this.zip_gverts&&null!=_this.body){_this.zip_gverts=!1,_this.validate_lverts();var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot));for(var li=_this.lverts.next,cx_ite=_this.gverts.next;null!=cx_ite;){var g=cx_ite,l=li;li=li.next,g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y),g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy),cx_ite=cx_ite.next}}var ite=_this.edges.head,cx_ite1=_this.gverts.next,u=cx_ite1;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var v=cx_ite1,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy,e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite1=cx_ite1.next}var v1=_this.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy,e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}if(s.zip_aabb&&null!=s.body)if(s.zip_aabb=!1,0==s.type){var _this3=s.circle;if(_this3.zip_worldCOM&&null!=_this3.body){if(_this3.zip_worldCOM=!1,_this3.zip_localCOM){if(_this3.zip_localCOM=!1,1==_this3.type){var _this4=_this3.polygon;if(null==_this4.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this4.lverts.next.next)_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;else if(null==_this4.lverts.next.next.next){_this4.localCOMx=_this4.lverts.next.x,_this4.localCOMy=_this4.lverts.next.y;var t=1;_this4.localCOMx+=1*_this4.lverts.next.next.x,_this4.localCOMy+=1*_this4.lverts.next.next.y;var t1=.5;_this4.localCOMx*=.5,_this4.localCOMy*=.5}else{_this4.localCOMx=0,_this4.localCOMy=0;var area=0,cx_ite2=_this4.lverts.next,u1=cx_ite2,v2=cx_ite2=cx_ite2.next;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var w=cx_ite2;area+=v2.x*(w.y-u1.y);var cf=w.y*v2.x-w.x*v2.y;_this4.localCOMx+=(v2.x+w.x)*cf,_this4.localCOMy+=(v2.y+w.y)*cf,u1=v2,v2=w,cx_ite2=cx_ite2.next}var w1=cx_ite2=_this4.lverts.next;area+=v2.x*(w1.y-u1.y);var cf1=w1.y*v2.x-w1.x*v2.y;_this4.localCOMx+=(v2.x+w1.x)*cf1,_this4.localCOMy+=(v2.y+w1.y)*cf1,u1=v2,v2=w1;var w2=cx_ite2=cx_ite2.next;area+=v2.x*(w2.y-u1.y);var cf2=w2.y*v2.x-w2.x*v2.y;_this4.localCOMx+=(v2.x+w2.x)*cf2,_this4.localCOMy+=(v2.y+w2.y)*cf2;var t2=area=1/(3*area);_this4.localCOMx*=t2,_this4.localCOMy*=t2}}null!=_this3.wrap_localCOM&&(_this3.wrap_localCOM.zpp_inner.x=_this3.localCOMx,_this3.wrap_localCOM.zpp_inner.y=_this3.localCOMy)}var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot)),_this3.worldCOMx=_this3.body.posx+(_this3.body.axisy*_this3.localCOMx-_this3.body.axisx*_this3.localCOMy),_this3.worldCOMy=_this3.body.posy+(_this3.localCOMx*_this3.body.axisx+_this3.localCOMy*_this3.body.axisy)}var rx=_this3.radius,ry=_this3.radius;_this3.aabb.minx=_this3.worldCOMx-rx,_this3.aabb.miny=_this3.worldCOMy-ry,_this3.aabb.maxx=_this3.worldCOMx+rx,_this3.aabb.maxy=_this3.worldCOMy+ry}else{var _this6=s.polygon;if(_this6.zip_gverts&&null!=_this6.body){_this6.zip_gverts=!1,_this6.validate_lverts();var _this7=_this6.body;_this7.zip_axis&&(_this7.zip_axis=!1,_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot));for(var li1=_this6.lverts.next,cx_ite3=_this6.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=_this6.body.posx+(_this6.body.axisy*l1.x-_this6.body.axisx*l1.y),g1.y=_this6.body.posy+(l1.x*_this6.body.axisx+l1.y*_this6.body.axisy),cx_ite3=cx_ite3.next}}if(null==_this6.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this6.gverts.next;_this6.aabb.minx=p0.x,_this6.aabb.miny=p0.y,_this6.aabb.maxx=p0.x,_this6.aabb.maxy=p0.y;for(var cx_ite4=_this6.gverts.next.next;null!=cx_ite4;){var p=cx_ite4;p.x<_this6.aabb.minx&&(_this6.aabb.minx=p.x),p.x>_this6.aabb.maxx&&(_this6.aabb.maxx=p.x),p.y<_this6.aabb.miny&&(_this6.aabb.miny=p.y),p.y>_this6.aabb.maxy&&(_this6.aabb.maxy=p.y),cx_ite4=cx_ite4.next}}if(s.zip_worldCOM&&null!=s.body){if(s.zip_worldCOM=!1,s.zip_localCOM){if(s.zip_localCOM=!1,1==s.type){var _this8=s.polygon;if(null==_this8.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this8.lverts.next.next)_this8.localCOMx=_this8.lverts.next.x,_this8.localCOMy=_this8.lverts.next.y;else if(null==_this8.lverts.next.next.next){_this8.localCOMx=_this8.lverts.next.x,_this8.localCOMy=_this8.lverts.next.y;var t3=1;_this8.localCOMx+=1*_this8.lverts.next.next.x,_this8.localCOMy+=1*_this8.lverts.next.next.y;var t4=.5;_this8.localCOMx*=.5,_this8.localCOMy*=.5}else{_this8.localCOMx=0,_this8.localCOMy=0;var area1=0,cx_ite5=_this8.lverts.next,u2=cx_ite5,v3=cx_ite5=cx_ite5.next;for(cx_ite5=cx_ite5.next;null!=cx_ite5;){var w3=cx_ite5;area1+=v3.x*(w3.y-u2.y);var cf3=w3.y*v3.x-w3.x*v3.y;_this8.localCOMx+=(v3.x+w3.x)*cf3,_this8.localCOMy+=(v3.y+w3.y)*cf3,u2=v3,v3=w3,cx_ite5=cx_ite5.next}var w4=cx_ite5=_this8.lverts.next;area1+=v3.x*(w4.y-u2.y);var cf4=w4.y*v3.x-w4.x*v3.y;_this8.localCOMx+=(v3.x+w4.x)*cf4,_this8.localCOMy+=(v3.y+w4.y)*cf4,u2=v3,v3=w4;var w5=cx_ite5=cx_ite5.next;area1+=v3.x*(w5.y-u2.y);var cf5=w5.y*v3.x-w5.x*v3.y;_this8.localCOMx+=(v3.x+w5.x)*cf5,_this8.localCOMy+=(v3.y+w5.y)*cf5;var t5=area1=1/(3*area1);_this8.localCOMx*=t5,_this8.localCOMy*=t5}}null!=s.wrap_localCOM&&(s.wrap_localCOM.zpp_inner.x=s.localCOMx,s.wrap_localCOM.zpp_inner.y=s.localCOMy)}var _this9=s.body;_this9.zip_axis&&(_this9.zip_axis=!1,_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot)),s.worldCOMx=s.body.posx+(s.body.axisy*s.localCOMx-s.body.axisx*s.localCOMy),s.worldCOMy=s.body.posy+(s.localCOMx*s.body.axisx+s.localCOMy*s.body.axisy)}},zpp_nape.space.ZPP_Broadphase.prototype.shapesInShape=function(shape,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.bodiesInShape=function(shape,containment,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.rayCast=function(ray,inner,filter){return null},zpp_nape.space.ZPP_Broadphase.prototype.rayMultiCast=function(ray,inner,filter,output){return null},zpp_nape.space.ZPP_Broadphase.prototype.__class__=zpp_nape.space.ZPP_Broadphase,zpp_nape.space.ZPP_AABBNode=$hxClasses["zpp_nape.space.ZPP_AABBNode"]=function(){this.first_sync=!1,this.synced=!1,this.snext=null,this.moved=!1,this.mnext=null,this.next=null,this.rayt=0,this.height=0,this.child2=null,this.child1=null,this.parent=null,this.dyn=!1,this.shape=null,this.aabb=null,this.height=-1},zpp_nape.space.ZPP_AABBNode.__name__=["zpp_nape","space","ZPP_AABBNode"],zpp_nape.space.ZPP_AABBNode.prototype.aabb=null,zpp_nape.space.ZPP_AABBNode.prototype.shape=null,zpp_nape.space.ZPP_AABBNode.prototype.dyn=null,zpp_nape.space.ZPP_AABBNode.prototype.parent=null,zpp_nape.space.ZPP_AABBNode.prototype.child1=null,zpp_nape.space.ZPP_AABBNode.prototype.child2=null,zpp_nape.space.ZPP_AABBNode.prototype.height=null,zpp_nape.space.ZPP_AABBNode.prototype.rayt=null,zpp_nape.space.ZPP_AABBNode.prototype.next=null,zpp_nape.space.ZPP_AABBNode.prototype.alloc=function(){null==zpp_nape.geom.ZPP_AABB.zpp_pool?this.aabb=new zpp_nape.geom.ZPP_AABB:(this.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=this.aabb.next,this.aabb.next=null),this.moved=!1,this.synced=!1,this.first_sync=!1},zpp_nape.space.ZPP_AABBNode.prototype.free=function(){this.height=-1;var o=this.aabb;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o,this.child1=this.child2=this.parent=null,this.next=null,this.snext=null,this.mnext=null},zpp_nape.space.ZPP_AABBNode.prototype.mnext=null,zpp_nape.space.ZPP_AABBNode.prototype.moved=null,zpp_nape.space.ZPP_AABBNode.prototype.snext=null,zpp_nape.space.ZPP_AABBNode.prototype.synced=null,zpp_nape.space.ZPP_AABBNode.prototype.first_sync=null,zpp_nape.space.ZPP_AABBNode.prototype.isLeaf=function(){return null==this.child1},zpp_nape.space.ZPP_AABBNode.prototype.__class__=zpp_nape.space.ZPP_AABBNode,zpp_nape.space.ZPP_AABBPair=$hxClasses["zpp_nape.space.ZPP_AABBPair"]=function(){this.next=null,this.arb=null,this.di=0,this.id=0,this.sleeping=!1,this.first=!1,this.n2=null,this.n1=null},zpp_nape.space.ZPP_AABBPair.__name__=["zpp_nape","space","ZPP_AABBPair"],zpp_nape.space.ZPP_AABBPair.prototype.n1=null,zpp_nape.space.ZPP_AABBPair.prototype.n2=null,zpp_nape.space.ZPP_AABBPair.prototype.first=null,zpp_nape.space.ZPP_AABBPair.prototype.sleeping=null,zpp_nape.space.ZPP_AABBPair.prototype.id=null,zpp_nape.space.ZPP_AABBPair.prototype.di=null,zpp_nape.space.ZPP_AABBPair.prototype.arb=null,zpp_nape.space.ZPP_AABBPair.prototype.next=null,zpp_nape.space.ZPP_AABBPair.prototype.alloc=function(){},zpp_nape.space.ZPP_AABBPair.prototype.free=function(){this.n1=this.n2=null,this.sleeping=!1},zpp_nape.space.ZPP_AABBPair.prototype.__class__=zpp_nape.space.ZPP_AABBPair,zpp_nape.space.ZPP_AABBTree=$hxClasses["zpp_nape.space.ZPP_AABBTree"]=function(){this.root=null},zpp_nape.space.ZPP_AABBTree.__name__=["zpp_nape","space","ZPP_AABBTree"],zpp_nape.space.ZPP_AABBTree.prototype.root=null,zpp_nape.space.ZPP_AABBTree.prototype.clear=function(){if(null!=this.root){var stack=null;for(this.root.next=stack,stack=this.root;null!=stack;){var ret=stack;stack=ret.next,ret.next=null;var node=ret;null==node.child1?(node.shape.node=null,node.shape.removedFromSpace(),node.shape=null):(null!=node.child1&&(node.child1.next=stack,stack=node.child1),null!=node.child2&&(node.child2.next=stack,stack=node.child2));var o=node;o.height=-1;var o1=o.aabb;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1.wrap_min=o1.wrap_max=null,o1._invalidate=null,o1._validate=null,o1.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o1,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o}this.root=null}},zpp_nape.space.ZPP_AABBTree.prototype.insertLeaf=function(leaf){if(null==this.root)this.root=leaf,this.root.parent=null;else{for(var leafaabb=leaf.aabb,node=this.root;null!=node.child1;){var child1=node.child1,child2=node.child2,_this=node.aabb,area=2*(_this.maxx-_this.minx+(_this.maxy-_this.miny)),_this1=zpp_nape.space.ZPP_AABBTree.tmpaabb,a=node.aabb;_this1.minx=a.minx<leafaabb.minx?a.minx:leafaabb.minx,_this1.miny=a.miny<leafaabb.miny?a.miny:leafaabb.miny,_this1.maxx=a.maxx>leafaabb.maxx?a.maxx:leafaabb.maxx,_this1.maxy=a.maxy>leafaabb.maxy?a.maxy:leafaabb.maxy;var _this2=zpp_nape.space.ZPP_AABBTree.tmpaabb,carea=2*(_this2.maxx-_this2.minx+(_this2.maxy-_this2.miny)),cost=2*carea,icost=2*(carea-area),_this3=zpp_nape.space.ZPP_AABBTree.tmpaabb,b=child1.aabb,cost1;if(_this3.minx=leafaabb.minx<b.minx?leafaabb.minx:b.minx,_this3.miny=leafaabb.miny<b.miny?leafaabb.miny:b.miny,_this3.maxx=leafaabb.maxx>b.maxx?leafaabb.maxx:b.maxx,_this3.maxy=leafaabb.maxy>b.maxy?leafaabb.maxy:b.maxy,null==child1.child1){var _this4=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost1=2*(_this4.maxx-_this4.minx+(_this4.maxy-_this4.miny))+icost}else{var _this5=child1.aabb,oarea=2*(_this5.maxx-_this5.minx+(_this5.maxy-_this5.miny)),_this6=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea;cost1=2*(_this6.maxx-_this6.minx+(_this6.maxy-_this6.miny))-oarea+icost}var _this7=zpp_nape.space.ZPP_AABBTree.tmpaabb,b1=child2.aabb,cost2;if(_this7.minx=leafaabb.minx<b1.minx?leafaabb.minx:b1.minx,_this7.miny=leafaabb.miny<b1.miny?leafaabb.miny:b1.miny,_this7.maxx=leafaabb.maxx>b1.maxx?leafaabb.maxx:b1.maxx,_this7.maxy=leafaabb.maxy>b1.maxy?leafaabb.maxy:b1.maxy,null==child2.child1){var _this8=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost2=2*(_this8.maxx-_this8.minx+(_this8.maxy-_this8.miny))+icost}else{var _this9=child2.aabb,oarea1=2*(_this9.maxx-_this9.minx+(_this9.maxy-_this9.miny)),_this10=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea1;cost2=2*(_this10.maxx-_this10.minx+(_this10.maxy-_this10.miny))-oarea1+icost}if(cost<cost1&&cost<cost2)break;node=cost1<cost2?child1:child2}var sibling=node,oparent=sibling.parent,nparent;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?nparent=new zpp_nape.space.ZPP_AABBNode:(nparent=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=nparent.next,nparent.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?nparent.aabb=new zpp_nape.geom.ZPP_AABB:(nparent.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=nparent.aabb.next,nparent.aabb.next=null),nparent.moved=!1,nparent.synced=!1,nparent.first_sync=!1,nparent.parent=oparent;var _this11=nparent.aabb,b2=sibling.aabb;for(_this11.minx=leafaabb.minx<b2.minx?leafaabb.minx:b2.minx,_this11.miny=leafaabb.miny<b2.miny?leafaabb.miny:b2.miny,_this11.maxx=leafaabb.maxx>b2.maxx?leafaabb.maxx:b2.maxx,_this11.maxy=leafaabb.maxy>b2.maxy?leafaabb.maxy:b2.maxy,nparent.height=sibling.height+1,null!=oparent?(oparent.child1==sibling?oparent.child1=nparent:oparent.child2=nparent,nparent.child1=sibling,nparent.child2=leaf,sibling.parent=nparent,leaf.parent=nparent):(nparent.child1=sibling,nparent.child2=leaf,sibling.parent=nparent,leaf.parent=nparent,this.root=nparent),node=leaf.parent;null!=node;){if(null==node.child1||node.height<2)node=node;else{var b3=node.child1,c=node.child2,balance=c.height-b3.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node,c.parent=node.parent,node.parent=c,null!=c.parent?c.parent.child1==node?c.parent.child1=c:c.parent.child2=c:this.root=c,f.height>g.height){c.child2=f,node.child2=g,g.parent=node;var _this12=node.aabb,a1=b3.aabb,b4=g.aabb;_this12.minx=a1.minx<b4.minx?a1.minx:b4.minx,_this12.miny=a1.miny<b4.miny?a1.miny:b4.miny,_this12.maxx=a1.maxx>b4.maxx?a1.maxx:b4.maxx,_this12.maxy=a1.maxy>b4.maxy?a1.maxy:b4.maxy;var _this13=c.aabb,a2=node.aabb,b5=f.aabb;_this13.minx=a2.minx<b5.minx?a2.minx:b5.minx,_this13.miny=a2.miny<b5.miny?a2.miny:b5.miny,_this13.maxx=a2.maxx>b5.maxx?a2.maxx:b5.maxx,_this13.maxy=a2.maxy>b5.maxy?a2.maxy:b5.maxy;var x=b3.height,y=g.height;node.height=1+(x>y?x:y);var x1=node.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node.child2=f,f.parent=node;var _this14=node.aabb,a3=b3.aabb,b6=f.aabb;_this14.minx=a3.minx<b6.minx?a3.minx:b6.minx,_this14.miny=a3.miny<b6.miny?a3.miny:b6.miny,_this14.maxx=a3.maxx>b6.maxx?a3.maxx:b6.maxx,_this14.maxy=a3.maxy>b6.maxy?a3.maxy:b6.maxy;var _this15=c.aabb,a4=node.aabb,b7=g.aabb;_this15.minx=a4.minx<b7.minx?a4.minx:b7.minx,_this15.miny=a4.miny<b7.miny?a4.miny:b7.miny,_this15.maxx=a4.maxx>b7.maxx?a4.maxx:b7.maxx,_this15.maxy=a4.maxy>b7.maxy?a4.maxy:b7.maxy;var x2=b3.height,y2=f.height;node.height=1+(x2>y2?x2:y2);var x3=node.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node=c}else if(balance<-1){var f1=b3.child1,g1=b3.child2;if(b3.child1=node,b3.parent=node.parent,node.parent=b3,null!=b3.parent?b3.parent.child1==node?b3.parent.child1=b3:b3.parent.child2=b3:this.root=b3,f1.height>g1.height){b3.child2=f1,node.child1=g1,g1.parent=node;var _this16=node.aabb,a5=c.aabb,b8=g1.aabb;_this16.minx=a5.minx<b8.minx?a5.minx:b8.minx,_this16.miny=a5.miny<b8.miny?a5.miny:b8.miny,_this16.maxx=a5.maxx>b8.maxx?a5.maxx:b8.maxx,_this16.maxy=a5.maxy>b8.maxy?a5.maxy:b8.maxy;var _this17=b3.aabb,a6=node.aabb,b9=f1.aabb;_this17.minx=a6.minx<b9.minx?a6.minx:b9.minx,_this17.miny=a6.miny<b9.miny?a6.miny:b9.miny,_this17.maxx=a6.maxx>b9.maxx?a6.maxx:b9.maxx,_this17.maxy=a6.maxy>b9.maxy?a6.maxy:b9.maxy;var x4=c.height,y4=g1.height;node.height=1+(x4>y4?x4:y4);var x5=node.height,y5=f1.height;b3.height=1+(x5>y5?x5:y5)}else{b3.child2=g1,node.child1=f1,f1.parent=node;var _this18=node.aabb,a7=c.aabb,b10=f1.aabb;_this18.minx=a7.minx<b10.minx?a7.minx:b10.minx,_this18.miny=a7.miny<b10.miny?a7.miny:b10.miny,_this18.maxx=a7.maxx>b10.maxx?a7.maxx:b10.maxx,_this18.maxy=a7.maxy>b10.maxy?a7.maxy:b10.maxy;var _this19=b3.aabb,a8=node.aabb,b11=g1.aabb;_this19.minx=a8.minx<b11.minx?a8.minx:b11.minx,_this19.miny=a8.miny<b11.miny?a8.miny:b11.miny,_this19.maxx=a8.maxx>b11.maxx?a8.maxx:b11.maxx,_this19.maxy=a8.maxy>b11.maxy?a8.maxy:b11.maxy;var x6=c.height,y6=f1.height;node.height=1+(x6>y6?x6:y6);var x7=node.height,y7=g1.height;b3.height=1+(x7>y7?x7:y7)}node=b3}else node=node}var child11=node.child1,child21=node.child2,x8=child11.height,y8=child21.height;node.height=1+(x8>y8?x8:y8);var _this20=node.aabb,a9=child11.aabb,b12=child21.aabb;_this20.minx=a9.minx<b12.minx?a9.minx:b12.minx,_this20.miny=a9.miny<b12.miny?a9.miny:b12.miny,_this20.maxx=a9.maxx>b12.maxx?a9.maxx:b12.maxx,_this20.maxy=a9.maxy>b12.maxy?a9.maxy:b12.maxy,node=node.parent}}},zpp_nape.space.ZPP_AABBTree.prototype.inlined_insertLeaf=function(leaf){if(null==this.root)this.root=leaf,this.root.parent=null;else{for(var leafaabb=leaf.aabb,node=this.root;null!=node.child1;){var child1=node.child1,child2=node.child2,_this=node.aabb,area=2*(_this.maxx-_this.minx+(_this.maxy-_this.miny)),_this1=zpp_nape.space.ZPP_AABBTree.tmpaabb,a=node.aabb;_this1.minx=a.minx<leafaabb.minx?a.minx:leafaabb.minx,_this1.miny=a.miny<leafaabb.miny?a.miny:leafaabb.miny,_this1.maxx=a.maxx>leafaabb.maxx?a.maxx:leafaabb.maxx,_this1.maxy=a.maxy>leafaabb.maxy?a.maxy:leafaabb.maxy;var _this2=zpp_nape.space.ZPP_AABBTree.tmpaabb,carea=2*(_this2.maxx-_this2.minx+(_this2.maxy-_this2.miny)),cost=2*carea,icost=2*(carea-area),_this3=zpp_nape.space.ZPP_AABBTree.tmpaabb,b=child1.aabb,cost1;if(_this3.minx=leafaabb.minx<b.minx?leafaabb.minx:b.minx,_this3.miny=leafaabb.miny<b.miny?leafaabb.miny:b.miny,_this3.maxx=leafaabb.maxx>b.maxx?leafaabb.maxx:b.maxx,_this3.maxy=leafaabb.maxy>b.maxy?leafaabb.maxy:b.maxy,null==child1.child1){var _this4=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost1=2*(_this4.maxx-_this4.minx+(_this4.maxy-_this4.miny))+icost}else{var _this5=child1.aabb,oarea=2*(_this5.maxx-_this5.minx+(_this5.maxy-_this5.miny)),_this6=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea;cost1=2*(_this6.maxx-_this6.minx+(_this6.maxy-_this6.miny))-oarea+icost}var _this7=zpp_nape.space.ZPP_AABBTree.tmpaabb,b1=child2.aabb,cost2;if(_this7.minx=leafaabb.minx<b1.minx?leafaabb.minx:b1.minx,_this7.miny=leafaabb.miny<b1.miny?leafaabb.miny:b1.miny,_this7.maxx=leafaabb.maxx>b1.maxx?leafaabb.maxx:b1.maxx,_this7.maxy=leafaabb.maxy>b1.maxy?leafaabb.maxy:b1.maxy,null==child2.child1){var _this8=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost2=2*(_this8.maxx-_this8.minx+(_this8.maxy-_this8.miny))+icost}else{var _this9=child2.aabb,oarea1=2*(_this9.maxx-_this9.minx+(_this9.maxy-_this9.miny)),_this10=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea1;cost2=2*(_this10.maxx-_this10.minx+(_this10.maxy-_this10.miny))-oarea1+icost}if(cost<cost1&&cost<cost2)break;node=cost1<cost2?child1:child2}var sibling=node,oparent=sibling.parent,nparent;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?nparent=new zpp_nape.space.ZPP_AABBNode:(nparent=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=nparent.next,nparent.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?nparent.aabb=new zpp_nape.geom.ZPP_AABB:(nparent.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=nparent.aabb.next,nparent.aabb.next=null),nparent.moved=!1,nparent.synced=!1,nparent.first_sync=!1,nparent.parent=oparent;var _this11=nparent.aabb,b2=sibling.aabb;for(_this11.minx=leafaabb.minx<b2.minx?leafaabb.minx:b2.minx,_this11.miny=leafaabb.miny<b2.miny?leafaabb.miny:b2.miny,_this11.maxx=leafaabb.maxx>b2.maxx?leafaabb.maxx:b2.maxx,_this11.maxy=leafaabb.maxy>b2.maxy?leafaabb.maxy:b2.maxy,nparent.height=sibling.height+1,null!=oparent?(oparent.child1==sibling?oparent.child1=nparent:oparent.child2=nparent,nparent.child1=sibling,nparent.child2=leaf,sibling.parent=nparent,leaf.parent=nparent):(nparent.child1=sibling,nparent.child2=leaf,sibling.parent=nparent,leaf.parent=nparent,this.root=nparent),node=leaf.parent;null!=node;){if(null==node.child1||node.height<2)node=node;else{var b3=node.child1,c=node.child2,balance=c.height-b3.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node,c.parent=node.parent,node.parent=c,null!=c.parent?c.parent.child1==node?c.parent.child1=c:c.parent.child2=c:this.root=c,f.height>g.height){c.child2=f,node.child2=g,g.parent=node;var _this12=node.aabb,a1=b3.aabb,b4=g.aabb;_this12.minx=a1.minx<b4.minx?a1.minx:b4.minx,_this12.miny=a1.miny<b4.miny?a1.miny:b4.miny,_this12.maxx=a1.maxx>b4.maxx?a1.maxx:b4.maxx,_this12.maxy=a1.maxy>b4.maxy?a1.maxy:b4.maxy;var _this13=c.aabb,a2=node.aabb,b5=f.aabb;_this13.minx=a2.minx<b5.minx?a2.minx:b5.minx,_this13.miny=a2.miny<b5.miny?a2.miny:b5.miny,_this13.maxx=a2.maxx>b5.maxx?a2.maxx:b5.maxx,_this13.maxy=a2.maxy>b5.maxy?a2.maxy:b5.maxy;var x=b3.height,y=g.height;node.height=1+(x>y?x:y);var x1=node.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node.child2=f,f.parent=node;var _this14=node.aabb,a3=b3.aabb,b6=f.aabb;_this14.minx=a3.minx<b6.minx?a3.minx:b6.minx,_this14.miny=a3.miny<b6.miny?a3.miny:b6.miny,_this14.maxx=a3.maxx>b6.maxx?a3.maxx:b6.maxx,_this14.maxy=a3.maxy>b6.maxy?a3.maxy:b6.maxy;var _this15=c.aabb,a4=node.aabb,b7=g.aabb;_this15.minx=a4.minx<b7.minx?a4.minx:b7.minx,_this15.miny=a4.miny<b7.miny?a4.miny:b7.miny,_this15.maxx=a4.maxx>b7.maxx?a4.maxx:b7.maxx,_this15.maxy=a4.maxy>b7.maxy?a4.maxy:b7.maxy;var x2=b3.height,y2=f.height;node.height=1+(x2>y2?x2:y2);var x3=node.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node=c}else if(balance<-1){var f1=b3.child1,g1=b3.child2;if(b3.child1=node,b3.parent=node.parent,node.parent=b3,null!=b3.parent?b3.parent.child1==node?b3.parent.child1=b3:b3.parent.child2=b3:this.root=b3,f1.height>g1.height){b3.child2=f1,node.child1=g1,g1.parent=node;var _this16=node.aabb,a5=c.aabb,b8=g1.aabb;_this16.minx=a5.minx<b8.minx?a5.minx:b8.minx,_this16.miny=a5.miny<b8.miny?a5.miny:b8.miny,_this16.maxx=a5.maxx>b8.maxx?a5.maxx:b8.maxx,_this16.maxy=a5.maxy>b8.maxy?a5.maxy:b8.maxy;var _this17=b3.aabb,a6=node.aabb,b9=f1.aabb;_this17.minx=a6.minx<b9.minx?a6.minx:b9.minx,_this17.miny=a6.miny<b9.miny?a6.miny:b9.miny,_this17.maxx=a6.maxx>b9.maxx?a6.maxx:b9.maxx,_this17.maxy=a6.maxy>b9.maxy?a6.maxy:b9.maxy;var x4=c.height,y4=g1.height;node.height=1+(x4>y4?x4:y4);var x5=node.height,y5=f1.height;b3.height=1+(x5>y5?x5:y5)}else{b3.child2=g1,node.child1=f1,f1.parent=node;var _this18=node.aabb,a7=c.aabb,b10=f1.aabb;_this18.minx=a7.minx<b10.minx?a7.minx:b10.minx,_this18.miny=a7.miny<b10.miny?a7.miny:b10.miny,_this18.maxx=a7.maxx>b10.maxx?a7.maxx:b10.maxx,_this18.maxy=a7.maxy>b10.maxy?a7.maxy:b10.maxy;var _this19=b3.aabb,a8=node.aabb,b11=g1.aabb;_this19.minx=a8.minx<b11.minx?a8.minx:b11.minx,_this19.miny=a8.miny<b11.miny?a8.miny:b11.miny,_this19.maxx=a8.maxx>b11.maxx?a8.maxx:b11.maxx,_this19.maxy=a8.maxy>b11.maxy?a8.maxy:b11.maxy;var x6=c.height,y6=f1.height;node.height=1+(x6>y6?x6:y6);var x7=node.height,y7=g1.height;b3.height=1+(x7>y7?x7:y7)}node=b3}else node=node}var child11=node.child1,child21=node.child2,x8=child11.height,y8=child21.height;node.height=1+(x8>y8?x8:y8);var _this20=node.aabb,a9=child11.aabb,b12=child21.aabb;_this20.minx=a9.minx<b12.minx?a9.minx:b12.minx,_this20.miny=a9.miny<b12.miny?a9.miny:b12.miny,_this20.maxx=a9.maxx>b12.maxx?a9.maxx:b12.maxx,_this20.maxy=a9.maxy>b12.maxy?a9.maxy:b12.maxy,node=node.parent}}},zpp_nape.space.ZPP_AABBTree.prototype.removeLeaf=function(leaf){if(leaf==this.root)this.root=null;else{var parent=leaf.parent,gparent=parent.parent,sibling=parent.child1==leaf?parent.child2:parent.child1;if(null!=gparent){gparent.child1==parent?gparent.child1=sibling:gparent.child2=sibling,sibling.parent=gparent;var o=parent;o.height=-1;var o1=o.aabb;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1.wrap_min=o1.wrap_max=null,o1._invalidate=null,o1._validate=null,o1.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o1,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o;for(var node=gparent;null!=node;){if(null==node.child1||node.height<2)node=node;else{var b=node.child1,c=node.child2,balance=c.height-b.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node,c.parent=node.parent,node.parent=c,null!=c.parent?c.parent.child1==node?c.parent.child1=c:c.parent.child2=c:this.root=c,f.height>g.height){c.child2=f,node.child2=g,g.parent=node;var _this=node.aabb,a=b.aabb,b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx,_this.miny=a.miny<b1.miny?a.miny:b1.miny,_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx,_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb,a1=node.aabb,b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx,_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny,_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx,_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height,y=g.height;node.height=1+(x>y?x:y);var x1=node.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node.child2=f,f.parent=node;var _this2=node.aabb,a2=b.aabb,b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx,_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny,_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx,_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb,a3=node.aabb,b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx,_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny,_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx,_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height,y2=f.height;node.height=1+(x2>y2?x2:y2);var x3=node.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node=c}else if(balance<-1){var f1=b.child1,g1=b.child2;if(b.child1=node,b.parent=node.parent,node.parent=b,null!=b.parent?b.parent.child1==node?b.parent.child1=b:b.parent.child2=b:this.root=b,f1.height>g1.height){b.child2=f1,node.child1=g1,g1.parent=node;var _this4=node.aabb,a4=c.aabb,b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx,_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny,_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx,_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb,a5=node.aabb,b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx,_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny,_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx,_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height,y4=g1.height;node.height=1+(x4>y4?x4:y4);var x5=node.height,y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1,node.child1=f1,f1.parent=node;var _this6=node.aabb,a6=c.aabb,b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx,_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny,_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx,_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb,a7=node.aabb,b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx,_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny,_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx,_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height,y6=f1.height;node.height=1+(x6>y6?x6:y6);var x7=node.height,y7=g1.height;b.height=1+(x7>y7?x7:y7)}node=b}else node=node}var child1=node.child1,child2=node.child2,_this8=node.aabb,a8=child1.aabb,b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx,_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny,_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx,_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height,y8=child2.height;node.height=1+(x8>y8?x8:y8),node=node.parent}}else{this.root=sibling,sibling.parent=null;var o2=parent;o2.height=-1;var o3=o2.aabb;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3.wrap_min=o3.wrap_max=null,o3._invalidate=null,o3._validate=null,o3.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o3,o2.child1=o2.child2=o2.parent=null,o2.next=null,o2.snext=null,o2.mnext=null,o2.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o2}}},zpp_nape.space.ZPP_AABBTree.prototype.inlined_removeLeaf=function(leaf){if(leaf!=this.root){var parent=leaf.parent,gparent=parent.parent,sibling=parent.child1==leaf?parent.child2:parent.child1;if(null!=gparent){gparent.child1==parent?gparent.child1=sibling:gparent.child2=sibling,sibling.parent=gparent;var o=parent;o.height=-1;var o1=o.aabb;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1.wrap_min=o1.wrap_max=null,o1._invalidate=null,o1._validate=null,o1.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o1,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o;for(var node=gparent;null!=node;){if(null==node.child1||node.height<2)node=node;else{var b=node.child1,c=node.child2,balance=c.height-b.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node,c.parent=node.parent,node.parent=c,null!=c.parent?c.parent.child1==node?c.parent.child1=c:c.parent.child2=c:this.root=c,f.height>g.height){c.child2=f,node.child2=g,g.parent=node;var _this=node.aabb,a=b.aabb,b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx,_this.miny=a.miny<b1.miny?a.miny:b1.miny,_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx,_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb,a1=node.aabb,b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx,_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny,_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx,_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height,y=g.height;node.height=1+(x>y?x:y);var x1=node.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node.child2=f,f.parent=node;var _this2=node.aabb,a2=b.aabb,b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx,_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny,_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx,_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb,a3=node.aabb,b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx,_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny,_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx,_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height,y2=f.height;node.height=1+(x2>y2?x2:y2);var x3=node.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node=c}else if(balance<-1){var f1=b.child1,g1=b.child2;if(b.child1=node,b.parent=node.parent,node.parent=b,null!=b.parent?b.parent.child1==node?b.parent.child1=b:b.parent.child2=b:this.root=b,f1.height>g1.height){b.child2=f1,node.child1=g1,g1.parent=node;var _this4=node.aabb,a4=c.aabb,b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx,_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny,_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx,_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb,a5=node.aabb,b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx,_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny,_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx,_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height,y4=g1.height;node.height=1+(x4>y4?x4:y4);var x5=node.height,y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1,node.child1=f1,f1.parent=node;var _this6=node.aabb,a6=c.aabb,b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx,_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny,_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx,_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb,a7=node.aabb,b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx,_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny,_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx,_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height,y6=f1.height;node.height=1+(x6>y6?x6:y6);var x7=node.height,y7=g1.height;b.height=1+(x7>y7?x7:y7)}node=b}else node=node}var child1=node.child1,child2=node.child2,_this8=node.aabb,a8=child1.aabb,b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx,_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny,_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx,_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height,y8=child2.height;node.height=1+(x8>y8?x8:y8),node=node.parent}}else{this.root=sibling,sibling.parent=null;var o2=parent;o2.height=-1;var o3=o2.aabb;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3.wrap_min=o3.wrap_max=null,o3._invalidate=null,o3._validate=null,o3.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o3,o2.child1=o2.child2=o2.parent=null,o2.next=null,o2.snext=null,o2.mnext=null,o2.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o2}}else this.root=null},zpp_nape.space.ZPP_AABBTree.prototype.balance=function(a){if(null==a.child1||a.height<2)return a;var b=a.child1,c=a.child2,balance=c.height-b.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=a,c.parent=a.parent,a.parent=c,null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c,f.height>g.height){c.child2=f,a.child2=g,g.parent=a;var _this=a.aabb,a1=b.aabb,b1=g.aabb;_this.minx=a1.minx<b1.minx?a1.minx:b1.minx,_this.miny=a1.miny<b1.miny?a1.miny:b1.miny,_this.maxx=a1.maxx>b1.maxx?a1.maxx:b1.maxx,_this.maxy=a1.maxy>b1.maxy?a1.maxy:b1.maxy;var _this1=c.aabb,a2=a.aabb,b2=f.aabb;_this1.minx=a2.minx<b2.minx?a2.minx:b2.minx,_this1.miny=a2.miny<b2.miny?a2.miny:b2.miny,_this1.maxx=a2.maxx>b2.maxx?a2.maxx:b2.maxx,_this1.maxy=a2.maxy>b2.maxy?a2.maxy:b2.maxy;var x=b.height,y=g.height;a.height=1+(x>y?x:y);var x1=a.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,a.child2=f,f.parent=a;var _this2=a.aabb,a3=b.aabb,b3=f.aabb;_this2.minx=a3.minx<b3.minx?a3.minx:b3.minx,_this2.miny=a3.miny<b3.miny?a3.miny:b3.miny,_this2.maxx=a3.maxx>b3.maxx?a3.maxx:b3.maxx,_this2.maxy=a3.maxy>b3.maxy?a3.maxy:b3.maxy;var _this3=c.aabb,a4=a.aabb,b4=g.aabb;_this3.minx=a4.minx<b4.minx?a4.minx:b4.minx,_this3.miny=a4.miny<b4.miny?a4.miny:b4.miny,_this3.maxx=a4.maxx>b4.maxx?a4.maxx:b4.maxx,_this3.maxy=a4.maxy>b4.maxy?a4.maxy:b4.maxy;var x2=b.height,y2=f.height;a.height=1+(x2>y2?x2:y2);var x3=a.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}return c}if(balance<-1){var f1=b.child1,g1=b.child2;if(b.child1=a,b.parent=a.parent,a.parent=b,null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b,f1.height>g1.height){b.child2=f1,a.child1=g1,g1.parent=a;var _this4=a.aabb,a5=c.aabb,b5=g1.aabb;_this4.minx=a5.minx<b5.minx?a5.minx:b5.minx,_this4.miny=a5.miny<b5.miny?a5.miny:b5.miny,_this4.maxx=a5.maxx>b5.maxx?a5.maxx:b5.maxx,_this4.maxy=a5.maxy>b5.maxy?a5.maxy:b5.maxy;var _this5=b.aabb,a6=a.aabb,b6=f1.aabb;_this5.minx=a6.minx<b6.minx?a6.minx:b6.minx,_this5.miny=a6.miny<b6.miny?a6.miny:b6.miny,_this5.maxx=a6.maxx>b6.maxx?a6.maxx:b6.maxx,_this5.maxy=a6.maxy>b6.maxy?a6.maxy:b6.maxy;var x4=c.height,y4=g1.height;a.height=1+(x4>y4?x4:y4);var x5=a.height,y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1,a.child1=f1,f1.parent=a;var _this6=a.aabb,a7=c.aabb,b7=f1.aabb;_this6.minx=a7.minx<b7.minx?a7.minx:b7.minx,_this6.miny=a7.miny<b7.miny?a7.miny:b7.miny,_this6.maxx=a7.maxx>b7.maxx?a7.maxx:b7.maxx,_this6.maxy=a7.maxy>b7.maxy?a7.maxy:b7.maxy;var _this7=b.aabb,a8=a.aabb,b8=g1.aabb;_this7.minx=a8.minx<b8.minx?a8.minx:b8.minx,_this7.miny=a8.miny<b8.miny?a8.miny:b8.miny,_this7.maxx=a8.maxx>b8.maxx?a8.maxx:b8.maxx,_this7.maxy=a8.maxy>b8.maxy?a8.maxy:b8.maxy;var x6=c.height,y6=f1.height;a.height=1+(x6>y6?x6:y6);var x7=a.height,y7=g1.height;b.height=1+(x7>y7?x7:y7)}return b}return a},zpp_nape.space.ZPP_AABBTree.prototype.__class__=zpp_nape.space.ZPP_AABBTree,zpp_nape.space.ZPP_DynAABBPhase=$hxClasses["zpp_nape.space.ZPP_DynAABBPhase"]=function(space){this.openlist=null,this.failed=null,this.treeStack2=null,this.treeStack=null,this.moves=null,this.syncs=null,this.pairs=null,this.dtree=null,this.stree=null,zpp_nape.space.ZPP_Broadphase.call(this),this.space=space,this.is_sweep=!1,this.dynab=this,this.stree=new zpp_nape.space.ZPP_AABBTree,this.dtree=new zpp_nape.space.ZPP_AABBTree},zpp_nape.space.ZPP_DynAABBPhase.__name__=["zpp_nape","space","ZPP_DynAABBPhase"],zpp_nape.space.ZPP_DynAABBPhase.__super__=zpp_nape.space.ZPP_Broadphase,zpp_nape.space.ZPP_Broadphase.prototype)zpp_nape.space.ZPP_DynAABBPhase.prototype[k]=zpp_nape.space.ZPP_Broadphase.prototype[k];for(var k in zpp_nape.space.ZPP_DynAABBPhase.prototype.stree=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.dtree=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.pairs=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.syncs=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.moves=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.dyn=function(shape){return 1!=shape.body.type&&!shape.body.component.sleeping},zpp_nape.space.ZPP_DynAABBPhase.prototype.__insert=function(shape){var node;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?node=new zpp_nape.space.ZPP_AABBNode:(node=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=node.next,node.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?node.aabb=new zpp_nape.geom.ZPP_AABB:(node.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=node.aabb.next,node.aabb.next=null),node.moved=!1,node.synced=!1,node.first_sync=!1,node.shape=shape,shape.node=node,node.synced=!0,node.first_sync=!0,node.snext=this.syncs,this.syncs=node},zpp_nape.space.ZPP_DynAABBPhase.prototype.__remove=function(shape){var node=shape.node;if(node.first_sync||(node.dyn?this.dtree.removeLeaf(node):this.stree.removeLeaf(node)),shape.node=null,node.synced){for(var pre=null,cur=this.syncs;null!=cur&&cur!=node;)pre=cur,cur=cur.snext;null==pre?this.syncs=cur.snext:pre.snext=cur.snext,cur.snext=null,node.synced=!1}if(node.moved){for(var pre1=null,cur1=this.moves;null!=cur1&&cur1!=node;)pre1=cur1,cur1=cur1.mnext;null==pre1?this.moves=cur1.mnext:pre1.mnext=cur1.mnext,cur1.mnext=null,node.moved=!1}for(var pre2=null,cur2=this.pairs;null!=cur2;){var nxt=cur2.next;if(cur2.n1!=node&&cur2.n2!=node)pre2=cur2,cur2=nxt;else{null==pre2?this.pairs=nxt:pre2.next=nxt,null!=cur2.arb&&(cur2.arb.pair=null),cur2.arb=null,cur2.n1.shape.pairs.remove(cur2),cur2.n2.shape.pairs.remove(cur2);var o=cur2;o.n1=o.n2=null,o.sleeping=!1,o.next=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=o,cur2=nxt}}for(;null!=shape.pairs.head;){var cur3=shape.pairs.pop_unsafe();cur3.n1==node?cur3.n2.shape.pairs.remove(cur3):cur3.n1.shape.pairs.remove(cur3),null!=cur3.arb&&(cur3.arb.pair=null),cur3.arb=null;var o1=cur3;o1.n1=o1.n2=null,o1.sleeping=!1,o1.next=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=o1}var o2=node;o2.height=-1;var o3=o2.aabb;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3.wrap_min=o3.wrap_max=null,o3._invalidate=null,o3._validate=null,o3.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o3,o2.child1=o2.child2=o2.parent=null,o2.next=null,o2.snext=null,o2.mnext=null,o2.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o2},zpp_nape.space.ZPP_DynAABBPhase.prototype.__sync=function(shape){var node=shape.node;if(!node.synced){if(!this.space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this=shape.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=shape.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite2=_this3.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}var sync;if(node.dyn==(1!=shape.body.type&&!shape.body.component.sleeping)){var _this5=node.aabb,x=shape.aabb;sync=!(x.minx>=_this5.minx&&x.miny>=_this5.miny&&x.maxx<=_this5.maxx&&x.maxy<=_this5.maxy)}else sync=!0;sync&&(node.synced=!0,node.snext=this.syncs,this.syncs=node)}},zpp_nape.space.ZPP_DynAABBPhase.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.syncs)if(null==this.moves){for(var node=this.syncs;null!=node;){var shape=node.shape;if(node.first_sync)node.first_sync=!1;else{var tree=node.dyn?this.dtree:this.stree;if(node==tree.root)tree.root=null;else{var parent=node.parent,gparent=parent.parent,sibling=parent.child1==node?parent.child2:parent.child1;if(null!=gparent){gparent.child1==parent?gparent.child1=sibling:gparent.child2=sibling,sibling.parent=gparent;var o=parent;o.height=-1;var o1=o.aabb;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1.wrap_min=o1.wrap_max=null,o1._invalidate=null,o1._validate=null,o1.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o1,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o;for(var node1=gparent;null!=node1;){if(null==node1.child1||node1.height<2)node1=node1;else{var b=node1.child1,c=node1.child2,balance=c.height-b.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node1,c.parent=node1.parent,node1.parent=c,null!=c.parent?c.parent.child1==node1?c.parent.child1=c:c.parent.child2=c:tree.root=c,f.height>g.height){c.child2=f,node1.child2=g,g.parent=node1;var _this=node1.aabb,a=b.aabb,b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx,_this.miny=a.miny<b1.miny?a.miny:b1.miny,_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx,_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb,a1=node1.aabb,b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx,_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny,_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx,_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height,y=g.height;node1.height=1+(x>y?x:y);var x1=node1.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node1.child2=f,f.parent=node1;var _this2=node1.aabb,a2=b.aabb,b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx,_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny,_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx,_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb,a3=node1.aabb,b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx,_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny,_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx,_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height,y2=f.height;node1.height=1+(x2>y2?x2:y2);var x3=node1.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node1=c}else if(balance<-1){var f1=b.child1,g1=b.child2;if(b.child1=node1,b.parent=node1.parent,node1.parent=b,null!=b.parent?b.parent.child1==node1?b.parent.child1=b:b.parent.child2=b:tree.root=b,f1.height>g1.height){b.child2=f1,node1.child1=g1,g1.parent=node1;var _this4=node1.aabb,a4=c.aabb,b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx,_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny,_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx,_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb,a5=node1.aabb,b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx,_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny,_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx,_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height,y4=g1.height;node1.height=1+(x4>y4?x4:y4);var x5=node1.height,y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1,node1.child1=f1,f1.parent=node1;var _this6=node1.aabb,a6=c.aabb,b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx,_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny,_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx,_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb,a7=node1.aabb,b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx,_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny,_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx,_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height,y6=f1.height;node1.height=1+(x6>y6?x6:y6);var x7=node1.height,y7=g1.height;b.height=1+(x7>y7?x7:y7)}node1=b}else node1=node1}var child1=node1.child1,child2=node1.child2,_this8=node1.aabb,a8=child1.aabb,b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx,_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny,_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx,_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height,y8=child2.height;node1.height=1+(x8>y8?x8:y8),node1=node1.parent}}else{tree.root=sibling,sibling.parent=null;var o2=parent;o2.height=-1;var o3=o2.aabb;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3.wrap_min=o3.wrap_max=null,o3._invalidate=null,o3._validate=null,o3.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o3,o2.child1=o2.child2=o2.parent=null,o2.next=null,o2.snext=null,o2.mnext=null,o2.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o2}}}var aabb=node.aabb;if(!this.space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this9=shape.circle;if(_this9.zip_worldCOM&&null!=_this9.body){if(_this9.zip_worldCOM=!1,_this9.zip_localCOM){if(_this9.zip_localCOM=!1,1==_this9.type){var _this10=_this9.polygon;if(null==_this10.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this10.lverts.next.next)_this10.localCOMx=_this10.lverts.next.x,_this10.localCOMy=_this10.lverts.next.y;else if(null==_this10.lverts.next.next.next){_this10.localCOMx=_this10.lverts.next.x,_this10.localCOMy=_this10.lverts.next.y;var t=1;_this10.localCOMx+=1*_this10.lverts.next.next.x,_this10.localCOMy+=1*_this10.lverts.next.next.y;var t1=.5;_this10.localCOMx*=.5,_this10.localCOMy*=.5}else{_this10.localCOMx=0,_this10.localCOMy=0;var area=0,cx_ite=_this10.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this10.localCOMx+=(v.x+w.x)*cf,_this10.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this10.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this10.localCOMx+=(v.x+w1.x)*cf1,_this10.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this10.localCOMx+=(v.x+w2.x)*cf2,_this10.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this10.localCOMx*=t2,_this10.localCOMy*=t2}}null!=_this9.wrap_localCOM&&(_this9.wrap_localCOM.zpp_inner.x=_this9.localCOMx,_this9.wrap_localCOM.zpp_inner.y=_this9.localCOMy)}var _this11=_this9.body;_this11.zip_axis&&(_this11.zip_axis=!1,_this11.axisx=Math.sin(_this11.rot),_this11.axisy=Math.cos(_this11.rot)),_this9.worldCOMx=_this9.body.posx+(_this9.body.axisy*_this9.localCOMx-_this9.body.axisx*_this9.localCOMy),_this9.worldCOMy=_this9.body.posy+(_this9.localCOMx*_this9.body.axisx+_this9.localCOMy*_this9.body.axisy)}var rx=_this9.radius,ry=_this9.radius;_this9.aabb.minx=_this9.worldCOMx-rx,_this9.aabb.miny=_this9.worldCOMy-ry,_this9.aabb.maxx=_this9.worldCOMx+rx,_this9.aabb.maxy=_this9.worldCOMy+ry}else{var _this12=shape.polygon;if(_this12.zip_gverts&&null!=_this12.body){_this12.zip_gverts=!1,_this12.validate_lverts();var _this13=_this12.body;_this13.zip_axis&&(_this13.zip_axis=!1,_this13.axisx=Math.sin(_this13.rot),_this13.axisy=Math.cos(_this13.rot));for(var li=_this12.lverts.next,cx_ite1=_this12.gverts.next;null!=cx_ite1;){var g2=cx_ite1,l=li;li=li.next,g2.x=_this12.body.posx+(_this12.body.axisy*l.x-_this12.body.axisx*l.y),g2.y=_this12.body.posy+(l.x*_this12.body.axisx+l.y*_this12.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this12.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this12.gverts.next;_this12.aabb.minx=p0.x,_this12.aabb.miny=p0.y,_this12.aabb.maxx=p0.x,_this12.aabb.maxy=p0.y;for(var cx_ite2=_this12.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this12.aabb.minx&&(_this12.aabb.minx=p.x),p.x>_this12.aabb.maxx&&(_this12.aabb.maxx=p.x),p.y<_this12.aabb.miny&&(_this12.aabb.miny=p.y),p.y>_this12.aabb.maxy&&(_this12.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}var a9=shape.aabb;aabb.minx=a9.minx-3,aabb.miny=a9.miny-3,aabb.maxx=a9.maxx+3,aabb.maxy=a9.maxy+3;var tree1=(node.dyn=1!=shape.body.type&&!shape.body.component.sleeping)?this.dtree:this.stree;if(null==tree1.root)tree1.root=node,tree1.root.parent=null;else{for(var leafaabb=node.aabb,node2=tree1.root;null!=node2.child1;){var child11=node2.child1,child21=node2.child2,_this14=node2.aabb,area1=2*(_this14.maxx-_this14.minx+(_this14.maxy-_this14.miny)),_this15=zpp_nape.space.ZPP_AABBTree.tmpaabb,a10=node2.aabb;_this15.minx=a10.minx<leafaabb.minx?a10.minx:leafaabb.minx,_this15.miny=a10.miny<leafaabb.miny?a10.miny:leafaabb.miny,_this15.maxx=a10.maxx>leafaabb.maxx?a10.maxx:leafaabb.maxx,_this15.maxy=a10.maxy>leafaabb.maxy?a10.maxy:leafaabb.maxy;var _this16=zpp_nape.space.ZPP_AABBTree.tmpaabb,carea=2*(_this16.maxx-_this16.minx+(_this16.maxy-_this16.miny)),cost=2*carea,icost=2*(carea-area1),_this17=zpp_nape.space.ZPP_AABBTree.tmpaabb,b10=child11.aabb,cost1;if(_this17.minx=leafaabb.minx<b10.minx?leafaabb.minx:b10.minx,_this17.miny=leafaabb.miny<b10.miny?leafaabb.miny:b10.miny,_this17.maxx=leafaabb.maxx>b10.maxx?leafaabb.maxx:b10.maxx,_this17.maxy=leafaabb.maxy>b10.maxy?leafaabb.maxy:b10.maxy,null==child11.child1){var _this18=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost1=2*(_this18.maxx-_this18.minx+(_this18.maxy-_this18.miny))+icost}else{var _this19=child11.aabb,oarea=2*(_this19.maxx-_this19.minx+(_this19.maxy-_this19.miny)),_this20=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea;cost1=2*(_this20.maxx-_this20.minx+(_this20.maxy-_this20.miny))-oarea+icost}var _this21=zpp_nape.space.ZPP_AABBTree.tmpaabb,b11=child21.aabb,cost2;if(_this21.minx=leafaabb.minx<b11.minx?leafaabb.minx:b11.minx,_this21.miny=leafaabb.miny<b11.miny?leafaabb.miny:b11.miny,_this21.maxx=leafaabb.maxx>b11.maxx?leafaabb.maxx:b11.maxx,_this21.maxy=leafaabb.maxy>b11.maxy?leafaabb.maxy:b11.maxy,null==child21.child1){var _this22=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost2=2*(_this22.maxx-_this22.minx+(_this22.maxy-_this22.miny))+icost}else{var _this23=child21.aabb,oarea1=2*(_this23.maxx-_this23.minx+(_this23.maxy-_this23.miny)),_this24=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea1;cost2=2*(_this24.maxx-_this24.minx+(_this24.maxy-_this24.miny))-oarea1+icost}if(cost<cost1&&cost<cost2)break;node2=cost1<cost2?child11:child21}var sibling1=node2,oparent=sibling1.parent,nparent;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?nparent=new zpp_nape.space.ZPP_AABBNode:(nparent=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=nparent.next,nparent.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?nparent.aabb=new zpp_nape.geom.ZPP_AABB:(nparent.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=nparent.aabb.next,nparent.aabb.next=null),nparent.moved=!1,nparent.synced=!1,nparent.first_sync=!1,nparent.parent=oparent;var _this25=nparent.aabb,b12=sibling1.aabb;for(_this25.minx=leafaabb.minx<b12.minx?leafaabb.minx:b12.minx,_this25.miny=leafaabb.miny<b12.miny?leafaabb.miny:b12.miny,_this25.maxx=leafaabb.maxx>b12.maxx?leafaabb.maxx:b12.maxx,_this25.maxy=leafaabb.maxy>b12.maxy?leafaabb.maxy:b12.maxy,nparent.height=sibling1.height+1,null!=oparent?(oparent.child1==sibling1?oparent.child1=nparent:oparent.child2=nparent,nparent.child1=sibling1,nparent.child2=node,sibling1.parent=nparent,node.parent=nparent):(nparent.child1=sibling1,nparent.child2=node,sibling1.parent=nparent,node.parent=nparent,tree1.root=nparent),node2=node.parent;null!=node2;){if(null==node2.child1||node2.height<2)node2=node2;else{var b13=node2.child1,c1=node2.child2,balance1=c1.height-b13.height;if(balance1>1){var f2=c1.child1,g3=c1.child2;if(c1.child1=node2,c1.parent=node2.parent,node2.parent=c1,null!=c1.parent?c1.parent.child1==node2?c1.parent.child1=c1:c1.parent.child2=c1:tree1.root=c1,f2.height>g3.height){c1.child2=f2,node2.child2=g3,g3.parent=node2;var _this26=node2.aabb,a11=b13.aabb,b14=g3.aabb;_this26.minx=a11.minx<b14.minx?a11.minx:b14.minx,_this26.miny=a11.miny<b14.miny?a11.miny:b14.miny,_this26.maxx=a11.maxx>b14.maxx?a11.maxx:b14.maxx,_this26.maxy=a11.maxy>b14.maxy?a11.maxy:b14.maxy;var _this27=c1.aabb,a12=node2.aabb,b15=f2.aabb;_this27.minx=a12.minx<b15.minx?a12.minx:b15.minx,_this27.miny=a12.miny<b15.miny?a12.miny:b15.miny,_this27.maxx=a12.maxx>b15.maxx?a12.maxx:b15.maxx,_this27.maxy=a12.maxy>b15.maxy?a12.maxy:b15.maxy;var x9=b13.height,y9=g3.height;node2.height=1+(x9>y9?x9:y9);var x10=node2.height,y10=f2.height;c1.height=1+(x10>y10?x10:y10)}else{c1.child2=g3,node2.child2=f2,f2.parent=node2;var _this28=node2.aabb,a13=b13.aabb,b16=f2.aabb;_this28.minx=a13.minx<b16.minx?a13.minx:b16.minx,_this28.miny=a13.miny<b16.miny?a13.miny:b16.miny,_this28.maxx=a13.maxx>b16.maxx?a13.maxx:b16.maxx,_this28.maxy=a13.maxy>b16.maxy?a13.maxy:b16.maxy;var _this29=c1.aabb,a14=node2.aabb,b17=g3.aabb;_this29.minx=a14.minx<b17.minx?a14.minx:b17.minx,_this29.miny=a14.miny<b17.miny?a14.miny:b17.miny,_this29.maxx=a14.maxx>b17.maxx?a14.maxx:b17.maxx,_this29.maxy=a14.maxy>b17.maxy?a14.maxy:b17.maxy;var x11=b13.height,y11=f2.height;node2.height=1+(x11>y11?x11:y11);var x12=node2.height,y12=g3.height;c1.height=1+(x12>y12?x12:y12)}node2=c1}else if(balance1<-1){var f3=b13.child1,g4=b13.child2;if(b13.child1=node2,b13.parent=node2.parent,node2.parent=b13,null!=b13.parent?b13.parent.child1==node2?b13.parent.child1=b13:b13.parent.child2=b13:tree1.root=b13,f3.height>g4.height){b13.child2=f3,node2.child1=g4,g4.parent=node2;var _this30=node2.aabb,a15=c1.aabb,b18=g4.aabb;_this30.minx=a15.minx<b18.minx?a15.minx:b18.minx,_this30.miny=a15.miny<b18.miny?a15.miny:b18.miny,_this30.maxx=a15.maxx>b18.maxx?a15.maxx:b18.maxx,_this30.maxy=a15.maxy>b18.maxy?a15.maxy:b18.maxy;var _this31=b13.aabb,a16=node2.aabb,b19=f3.aabb;_this31.minx=a16.minx<b19.minx?a16.minx:b19.minx,_this31.miny=a16.miny<b19.miny?a16.miny:b19.miny,_this31.maxx=a16.maxx>b19.maxx?a16.maxx:b19.maxx,_this31.maxy=a16.maxy>b19.maxy?a16.maxy:b19.maxy;var x13=c1.height,y13=g4.height;node2.height=1+(x13>y13?x13:y13);var x14=node2.height,y14=f3.height;b13.height=1+(x14>y14?x14:y14)}else{b13.child2=g4,node2.child1=f3,f3.parent=node2;var _this32=node2.aabb,a17=c1.aabb,b20=f3.aabb;_this32.minx=a17.minx<b20.minx?a17.minx:b20.minx,_this32.miny=a17.miny<b20.miny?a17.miny:b20.miny,_this32.maxx=a17.maxx>b20.maxx?a17.maxx:b20.maxx,_this32.maxy=a17.maxy>b20.maxy?a17.maxy:b20.maxy;var _this33=b13.aabb,a18=node2.aabb,b21=g4.aabb;_this33.minx=a18.minx<b21.minx?a18.minx:b21.minx,_this33.miny=a18.miny<b21.miny?a18.miny:b21.miny,_this33.maxx=a18.maxx>b21.maxx?a18.maxx:b21.maxx,_this33.maxy=a18.maxy>b21.maxy?a18.maxy:b21.maxy;var x15=c1.height,y15=f3.height;node2.height=1+(x15>y15?x15:y15);var x16=node2.height,y16=g4.height;b13.height=1+(x16>y16?x16:y16)}node2=b13}else node2=node2}var child12=node2.child1,child22=node2.child2,x17=child12.height,y17=child22.height;node2.height=1+(x17>y17?x17:y17);var _this34=node2.aabb,a19=child12.aabb,b22=child22.aabb;_this34.minx=a19.minx<b22.minx?a19.minx:b22.minx,_this34.miny=a19.miny<b22.miny?a19.miny:b22.miny,_this34.maxx=a19.maxx>b22.maxx?a19.maxx:b22.maxx,_this34.maxy=a19.maxy>b22.maxy?a19.maxy:b22.maxy,node2=node2.parent}}node.synced=!1,node.moved=!0,node.mnext=node.snext,node.snext=null,node=node.mnext}var t3=this.syncs;this.syncs=this.moves,this.moves=t3}else for(;null!=this.syncs;){var ret=this.syncs;this.syncs=ret.snext,ret.snext=null;var node3=ret,shape1=node3.shape;if(node3.first_sync)node3.first_sync=!1;else{var tree2=node3.dyn?this.dtree:this.stree;if(node3==tree2.root)tree2.root=null;else{var parent1=node3.parent,gparent1=parent1.parent,sibling2=parent1.child1==node3?parent1.child2:parent1.child1;if(null!=gparent1){gparent1.child1==parent1?gparent1.child1=sibling2:gparent1.child2=sibling2,sibling2.parent=gparent1;var o4=parent1;o4.height=-1;var o5=o4.aabb;null!=o5.outer&&(o5.outer.zpp_inner=null,o5.outer=null),o5.wrap_min=o5.wrap_max=null,o5._invalidate=null,o5._validate=null,o5.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o5,o4.child1=o4.child2=o4.parent=null,o4.next=null,o4.snext=null,o4.mnext=null,o4.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o4;for(var node4=gparent1;null!=node4;){if(null==node4.child1||node4.height<2)node4=node4;else{var b23=node4.child1,c2=node4.child2,balance2=c2.height-b23.height;if(balance2>1){var f4=c2.child1,g5=c2.child2;if(c2.child1=node4,c2.parent=node4.parent,node4.parent=c2,null!=c2.parent?c2.parent.child1==node4?c2.parent.child1=c2:c2.parent.child2=c2:tree2.root=c2,f4.height>g5.height){c2.child2=f4,node4.child2=g5,g5.parent=node4;var _this35=node4.aabb,a20=b23.aabb,b24=g5.aabb;_this35.minx=a20.minx<b24.minx?a20.minx:b24.minx,_this35.miny=a20.miny<b24.miny?a20.miny:b24.miny,_this35.maxx=a20.maxx>b24.maxx?a20.maxx:b24.maxx,_this35.maxy=a20.maxy>b24.maxy?a20.maxy:b24.maxy;var _this36=c2.aabb,a21=node4.aabb,b25=f4.aabb;_this36.minx=a21.minx<b25.minx?a21.minx:b25.minx,_this36.miny=a21.miny<b25.miny?a21.miny:b25.miny,_this36.maxx=a21.maxx>b25.maxx?a21.maxx:b25.maxx,_this36.maxy=a21.maxy>b25.maxy?a21.maxy:b25.maxy;var x18=b23.height,y18=g5.height;node4.height=1+(x18>y18?x18:y18);var x19=node4.height,y19=f4.height;c2.height=1+(x19>y19?x19:y19)}else{c2.child2=g5,node4.child2=f4,f4.parent=node4;var _this37=node4.aabb,a22=b23.aabb,b26=f4.aabb;_this37.minx=a22.minx<b26.minx?a22.minx:b26.minx,_this37.miny=a22.miny<b26.miny?a22.miny:b26.miny,_this37.maxx=a22.maxx>b26.maxx?a22.maxx:b26.maxx,_this37.maxy=a22.maxy>b26.maxy?a22.maxy:b26.maxy;var _this38=c2.aabb,a23=node4.aabb,b27=g5.aabb;_this38.minx=a23.minx<b27.minx?a23.minx:b27.minx,_this38.miny=a23.miny<b27.miny?a23.miny:b27.miny,_this38.maxx=a23.maxx>b27.maxx?a23.maxx:b27.maxx,_this38.maxy=a23.maxy>b27.maxy?a23.maxy:b27.maxy;var x20=b23.height,y20=f4.height;node4.height=1+(x20>y20?x20:y20);var x21=node4.height,y21=g5.height;c2.height=1+(x21>y21?x21:y21)}node4=c2}else if(balance2<-1){var f5=b23.child1,g6=b23.child2;if(b23.child1=node4,b23.parent=node4.parent,node4.parent=b23,null!=b23.parent?b23.parent.child1==node4?b23.parent.child1=b23:b23.parent.child2=b23:tree2.root=b23,f5.height>g6.height){b23.child2=f5,node4.child1=g6,g6.parent=node4;var _this39=node4.aabb,a24=c2.aabb,b28=g6.aabb;_this39.minx=a24.minx<b28.minx?a24.minx:b28.minx,_this39.miny=a24.miny<b28.miny?a24.miny:b28.miny,_this39.maxx=a24.maxx>b28.maxx?a24.maxx:b28.maxx,_this39.maxy=a24.maxy>b28.maxy?a24.maxy:b28.maxy;var _this40=b23.aabb,a25=node4.aabb,b29=f5.aabb;_this40.minx=a25.minx<b29.minx?a25.minx:b29.minx,_this40.miny=a25.miny<b29.miny?a25.miny:b29.miny,_this40.maxx=a25.maxx>b29.maxx?a25.maxx:b29.maxx,_this40.maxy=a25.maxy>b29.maxy?a25.maxy:b29.maxy;var x22=c2.height,y22=g6.height;node4.height=1+(x22>y22?x22:y22);var x23=node4.height,y23=f5.height;b23.height=1+(x23>y23?x23:y23)}else{b23.child2=g6,node4.child1=f5,f5.parent=node4;var _this41=node4.aabb,a26=c2.aabb,b30=f5.aabb;_this41.minx=a26.minx<b30.minx?a26.minx:b30.minx,_this41.miny=a26.miny<b30.miny?a26.miny:b30.miny,_this41.maxx=a26.maxx>b30.maxx?a26.maxx:b30.maxx,_this41.maxy=a26.maxy>b30.maxy?a26.maxy:b30.maxy;var _this42=b23.aabb,a27=node4.aabb,b31=g6.aabb;_this42.minx=a27.minx<b31.minx?a27.minx:b31.minx,_this42.miny=a27.miny<b31.miny?a27.miny:b31.miny,_this42.maxx=a27.maxx>b31.maxx?a27.maxx:b31.maxx,_this42.maxy=a27.maxy>b31.maxy?a27.maxy:b31.maxy;var x24=c2.height,y24=f5.height;node4.height=1+(x24>y24?x24:y24);var x25=node4.height,y25=g6.height;b23.height=1+(x25>y25?x25:y25)}node4=b23}else node4=node4}var child13=node4.child1,child23=node4.child2,_this43=node4.aabb,a28=child13.aabb,b32=child23.aabb;_this43.minx=a28.minx<b32.minx?a28.minx:b32.minx,_this43.miny=a28.miny<b32.miny?a28.miny:b32.miny,_this43.maxx=a28.maxx>b32.maxx?a28.maxx:b32.maxx,_this43.maxy=a28.maxy>b32.maxy?a28.maxy:b32.maxy;var x26=child13.height,y26=child23.height;node4.height=1+(x26>y26?x26:y26),node4=node4.parent}}else{tree2.root=sibling2,sibling2.parent=null;var o6=parent1;o6.height=-1;var o7=o6.aabb;null!=o7.outer&&(o7.outer.zpp_inner=null,o7.outer=null),o7.wrap_min=o7.wrap_max=null,o7._invalidate=null,o7._validate=null,o7.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o7,o6.child1=o6.child2=o6.parent=null,o6.next=null,o6.snext=null,o6.mnext=null,o6.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o6}}}var aabb1=node3.aabb;if(!this.space.continuous&&shape1.zip_aabb&&null!=shape1.body)if(shape1.zip_aabb=!1,0==shape1.type){var _this44=shape1.circle;if(_this44.zip_worldCOM&&null!=_this44.body){if(_this44.zip_worldCOM=!1,_this44.zip_localCOM){if(_this44.zip_localCOM=!1,1==_this44.type){var _this45=_this44.polygon;if(null==_this45.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this45.lverts.next.next)_this45.localCOMx=_this45.lverts.next.x,_this45.localCOMy=_this45.lverts.next.y;else if(null==_this45.lverts.next.next.next){_this45.localCOMx=_this45.lverts.next.x,_this45.localCOMy=_this45.lverts.next.y;var t4=1;_this45.localCOMx+=1*_this45.lverts.next.next.x,_this45.localCOMy+=1*_this45.lverts.next.next.y;var t5=.5;_this45.localCOMx*=.5,_this45.localCOMy*=.5}else{_this45.localCOMx=0,_this45.localCOMy=0;var area2=0,cx_ite3=_this45.lverts.next,u1=cx_ite3,v1=cx_ite3=cx_ite3.next;for(cx_ite3=cx_ite3.next;null!=cx_ite3;){var w3=cx_ite3;area2+=v1.x*(w3.y-u1.y);var cf3=w3.y*v1.x-w3.x*v1.y;_this45.localCOMx+=(v1.x+w3.x)*cf3,_this45.localCOMy+=(v1.y+w3.y)*cf3,u1=v1,v1=w3,cx_ite3=cx_ite3.next}var w4=cx_ite3=_this45.lverts.next;area2+=v1.x*(w4.y-u1.y);var cf4=w4.y*v1.x-w4.x*v1.y;_this45.localCOMx+=(v1.x+w4.x)*cf4,_this45.localCOMy+=(v1.y+w4.y)*cf4,u1=v1,v1=w4;var w5=cx_ite3=cx_ite3.next;area2+=v1.x*(w5.y-u1.y);var cf5=w5.y*v1.x-w5.x*v1.y;_this45.localCOMx+=(v1.x+w5.x)*cf5,_this45.localCOMy+=(v1.y+w5.y)*cf5;var t6=area2=1/(3*area2);_this45.localCOMx*=t6,_this45.localCOMy*=t6}}null!=_this44.wrap_localCOM&&(_this44.wrap_localCOM.zpp_inner.x=_this44.localCOMx,_this44.wrap_localCOM.zpp_inner.y=_this44.localCOMy)}var _this46=_this44.body;_this46.zip_axis&&(_this46.zip_axis=!1,_this46.axisx=Math.sin(_this46.rot),_this46.axisy=Math.cos(_this46.rot)),_this44.worldCOMx=_this44.body.posx+(_this44.body.axisy*_this44.localCOMx-_this44.body.axisx*_this44.localCOMy),_this44.worldCOMy=_this44.body.posy+(_this44.localCOMx*_this44.body.axisx+_this44.localCOMy*_this44.body.axisy)}var rx1=_this44.radius,ry1=_this44.radius;_this44.aabb.minx=_this44.worldCOMx-rx1,_this44.aabb.miny=_this44.worldCOMy-ry1,_this44.aabb.maxx=_this44.worldCOMx+rx1,_this44.aabb.maxy=_this44.worldCOMy+ry1}else{var _this47=shape1.polygon;if(_this47.zip_gverts&&null!=_this47.body){_this47.zip_gverts=!1,_this47.validate_lverts();var _this48=_this47.body;_this48.zip_axis&&(_this48.zip_axis=!1,_this48.axisx=Math.sin(_this48.rot),_this48.axisy=Math.cos(_this48.rot));for(var li1=_this47.lverts.next,cx_ite4=_this47.gverts.next;null!=cx_ite4;){var g7=cx_ite4,l1=li1;li1=li1.next,g7.x=_this47.body.posx+(_this47.body.axisy*l1.x-_this47.body.axisx*l1.y),g7.y=_this47.body.posy+(l1.x*_this47.body.axisx+l1.y*_this47.body.axisy),cx_ite4=cx_ite4.next}}if(null==_this47.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p01=_this47.gverts.next;_this47.aabb.minx=p01.x,_this47.aabb.miny=p01.y,_this47.aabb.maxx=p01.x,_this47.aabb.maxy=p01.y;for(var cx_ite5=_this47.gverts.next.next;null!=cx_ite5;){var p1=cx_ite5;p1.x<_this47.aabb.minx&&(_this47.aabb.minx=p1.x),p1.x>_this47.aabb.maxx&&(_this47.aabb.maxx=p1.x),p1.y<_this47.aabb.miny&&(_this47.aabb.miny=p1.y),p1.y>_this47.aabb.maxy&&(_this47.aabb.maxy=p1.y),cx_ite5=cx_ite5.next}}var a29=shape1.aabb;aabb1.minx=a29.minx-3,aabb1.miny=a29.miny-3,aabb1.maxx=a29.maxx+3,aabb1.maxy=a29.maxy+3;var tree3=(node3.dyn=1!=shape1.body.type&&!shape1.body.component.sleeping)?this.dtree:this.stree;if(null==tree3.root)tree3.root=node3,tree3.root.parent=null;else{for(var leafaabb1=node3.aabb,node5=tree3.root;null!=node5.child1;){var child14=node5.child1,child24=node5.child2,_this49=node5.aabb,area3=2*(_this49.maxx-_this49.minx+(_this49.maxy-_this49.miny)),_this50=zpp_nape.space.ZPP_AABBTree.tmpaabb,a30=node5.aabb;_this50.minx=a30.minx<leafaabb1.minx?a30.minx:leafaabb1.minx,_this50.miny=a30.miny<leafaabb1.miny?a30.miny:leafaabb1.miny,_this50.maxx=a30.maxx>leafaabb1.maxx?a30.maxx:leafaabb1.maxx,_this50.maxy=a30.maxy>leafaabb1.maxy?a30.maxy:leafaabb1.maxy;var _this51=zpp_nape.space.ZPP_AABBTree.tmpaabb,carea1=2*(_this51.maxx-_this51.minx+(_this51.maxy-_this51.miny)),cost3=2*carea1,icost1=2*(carea1-area3),_this52=zpp_nape.space.ZPP_AABBTree.tmpaabb,b33=child14.aabb,cost11;if(_this52.minx=leafaabb1.minx<b33.minx?leafaabb1.minx:b33.minx,_this52.miny=leafaabb1.miny<b33.miny?leafaabb1.miny:b33.miny,_this52.maxx=leafaabb1.maxx>b33.maxx?leafaabb1.maxx:b33.maxx,_this52.maxy=leafaabb1.maxy>b33.maxy?leafaabb1.maxy:b33.maxy,null==child14.child1){var _this53=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost11=2*(_this53.maxx-_this53.minx+(_this53.maxy-_this53.miny))+icost1}else{var _this54=child14.aabb,oarea2=2*(_this54.maxx-_this54.minx+(_this54.maxy-_this54.miny)),_this55=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea2;cost11=2*(_this55.maxx-_this55.minx+(_this55.maxy-_this55.miny))-oarea2+icost1}var _this56=zpp_nape.space.ZPP_AABBTree.tmpaabb,b34=child24.aabb,cost21;if(_this56.minx=leafaabb1.minx<b34.minx?leafaabb1.minx:b34.minx,_this56.miny=leafaabb1.miny<b34.miny?leafaabb1.miny:b34.miny,_this56.maxx=leafaabb1.maxx>b34.maxx?leafaabb1.maxx:b34.maxx,_this56.maxy=leafaabb1.maxy>b34.maxy?leafaabb1.maxy:b34.maxy,null==child24.child1){var _this57=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost21=2*(_this57.maxx-_this57.minx+(_this57.maxy-_this57.miny))+icost1}else{var _this58=child24.aabb,oarea3=2*(_this58.maxx-_this58.minx+(_this58.maxy-_this58.miny)),_this59=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea3;cost21=2*(_this59.maxx-_this59.minx+(_this59.maxy-_this59.miny))-oarea3+icost1}if(cost3<cost11&&cost3<cost21)break;node5=cost11<cost21?child14:child24}var sibling3=node5,oparent1=sibling3.parent,nparent1;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?nparent1=new zpp_nape.space.ZPP_AABBNode:(nparent1=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=nparent1.next,nparent1.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?nparent1.aabb=new zpp_nape.geom.ZPP_AABB:(nparent1.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=nparent1.aabb.next,nparent1.aabb.next=null),nparent1.moved=!1,nparent1.synced=!1,nparent1.first_sync=!1,nparent1.parent=oparent1;var _this60=nparent1.aabb,b35=sibling3.aabb;for(_this60.minx=leafaabb1.minx<b35.minx?leafaabb1.minx:b35.minx,_this60.miny=leafaabb1.miny<b35.miny?leafaabb1.miny:b35.miny,_this60.maxx=leafaabb1.maxx>b35.maxx?leafaabb1.maxx:b35.maxx,_this60.maxy=leafaabb1.maxy>b35.maxy?leafaabb1.maxy:b35.maxy,nparent1.height=sibling3.height+1,null!=oparent1?(oparent1.child1==sibling3?oparent1.child1=nparent1:oparent1.child2=nparent1,nparent1.child1=sibling3,nparent1.child2=node3,sibling3.parent=nparent1,node3.parent=nparent1):(nparent1.child1=sibling3,nparent1.child2=node3,sibling3.parent=nparent1,node3.parent=nparent1,tree3.root=nparent1),node5=node3.parent;null!=node5;){if(null==node5.child1||node5.height<2)node5=node5;else{var b36=node5.child1,c3=node5.child2,balance3=c3.height-b36.height;if(balance3>1){var f6=c3.child1,g8=c3.child2;if(c3.child1=node5,c3.parent=node5.parent,node5.parent=c3,null!=c3.parent?c3.parent.child1==node5?c3.parent.child1=c3:c3.parent.child2=c3:tree3.root=c3,f6.height>g8.height){c3.child2=f6,node5.child2=g8,g8.parent=node5;var _this61=node5.aabb,a31=b36.aabb,b37=g8.aabb;_this61.minx=a31.minx<b37.minx?a31.minx:b37.minx,_this61.miny=a31.miny<b37.miny?a31.miny:b37.miny,_this61.maxx=a31.maxx>b37.maxx?a31.maxx:b37.maxx,_this61.maxy=a31.maxy>b37.maxy?a31.maxy:b37.maxy;var _this62=c3.aabb,a32=node5.aabb,b38=f6.aabb;_this62.minx=a32.minx<b38.minx?a32.minx:b38.minx,_this62.miny=a32.miny<b38.miny?a32.miny:b38.miny,_this62.maxx=a32.maxx>b38.maxx?a32.maxx:b38.maxx,_this62.maxy=a32.maxy>b38.maxy?a32.maxy:b38.maxy;var x27=b36.height,y27=g8.height;node5.height=1+(x27>y27?x27:y27);var x28=node5.height,y28=f6.height;c3.height=1+(x28>y28?x28:y28)}else{c3.child2=g8,node5.child2=f6,f6.parent=node5;var _this63=node5.aabb,a33=b36.aabb,b39=f6.aabb;_this63.minx=a33.minx<b39.minx?a33.minx:b39.minx,_this63.miny=a33.miny<b39.miny?a33.miny:b39.miny,_this63.maxx=a33.maxx>b39.maxx?a33.maxx:b39.maxx,_this63.maxy=a33.maxy>b39.maxy?a33.maxy:b39.maxy;var _this64=c3.aabb,a34=node5.aabb,b40=g8.aabb;_this64.minx=a34.minx<b40.minx?a34.minx:b40.minx,_this64.miny=a34.miny<b40.miny?a34.miny:b40.miny,_this64.maxx=a34.maxx>b40.maxx?a34.maxx:b40.maxx,_this64.maxy=a34.maxy>b40.maxy?a34.maxy:b40.maxy;var x29=b36.height,y29=f6.height;node5.height=1+(x29>y29?x29:y29);var x30=node5.height,y30=g8.height;c3.height=1+(x30>y30?x30:y30)}node5=c3}else if(balance3<-1){var f7=b36.child1,g9=b36.child2;if(b36.child1=node5,b36.parent=node5.parent,node5.parent=b36,null!=b36.parent?b36.parent.child1==node5?b36.parent.child1=b36:b36.parent.child2=b36:tree3.root=b36,f7.height>g9.height){b36.child2=f7,node5.child1=g9,g9.parent=node5;var _this65=node5.aabb,a35=c3.aabb,b41=g9.aabb;_this65.minx=a35.minx<b41.minx?a35.minx:b41.minx,_this65.miny=a35.miny<b41.miny?a35.miny:b41.miny,_this65.maxx=a35.maxx>b41.maxx?a35.maxx:b41.maxx,_this65.maxy=a35.maxy>b41.maxy?a35.maxy:b41.maxy;var _this66=b36.aabb,a36=node5.aabb,b42=f7.aabb;_this66.minx=a36.minx<b42.minx?a36.minx:b42.minx,_this66.miny=a36.miny<b42.miny?a36.miny:b42.miny,_this66.maxx=a36.maxx>b42.maxx?a36.maxx:b42.maxx,_this66.maxy=a36.maxy>b42.maxy?a36.maxy:b42.maxy;var x31=c3.height,y31=g9.height;node5.height=1+(x31>y31?x31:y31);var x32=node5.height,y32=f7.height;b36.height=1+(x32>y32?x32:y32)}else{b36.child2=g9,node5.child1=f7,f7.parent=node5;var _this67=node5.aabb,a37=c3.aabb,b43=f7.aabb;_this67.minx=a37.minx<b43.minx?a37.minx:b43.minx,_this67.miny=a37.miny<b43.miny?a37.miny:b43.miny,_this67.maxx=a37.maxx>b43.maxx?a37.maxx:b43.maxx,_this67.maxy=a37.maxy>b43.maxy?a37.maxy:b43.maxy;var _this68=b36.aabb,a38=node5.aabb,b44=g9.aabb;_this68.minx=a38.minx<b44.minx?a38.minx:b44.minx,_this68.miny=a38.miny<b44.miny?a38.miny:b44.miny,_this68.maxx=a38.maxx>b44.maxx?a38.maxx:b44.maxx,_this68.maxy=a38.maxy>b44.maxy?a38.maxy:b44.maxy;var x33=c3.height,y33=f7.height;node5.height=1+(x33>y33?x33:y33);var x34=node5.height,y34=g9.height;b36.height=1+(x34>y34?x34:y34)}node5=b36}else node5=node5}var child15=node5.child1,child25=node5.child2,x35=child15.height,y35=child25.height;node5.height=1+(x35>y35?x35:y35);var _this69=node5.aabb,a39=child15.aabb,b45=child25.aabb;_this69.minx=a39.minx<b45.minx?a39.minx:b45.minx,_this69.miny=a39.miny<b45.miny?a39.miny:b45.miny,_this69.maxx=a39.maxx>b45.maxx?a39.maxx:b45.maxx,_this69.maxy=a39.maxy>b45.maxy?a39.maxy:b45.maxy,node5=node5.parent}}node3.synced=!1,node3.moved||(node3.moved=!0,node3.mnext=this.moves,this.moves=node3)}},zpp_nape.space.ZPP_DynAABBPhase.prototype.broadphase=function(space,discrete){for(var node=this.syncs;null!=node;){var shape=node.shape;if(node.first_sync)node.first_sync=!1;else{var tree=node.dyn?this.dtree:this.stree;if(node==tree.root)tree.root=null;else{var parent=node.parent,gparent=parent.parent,sibling=parent.child1==node?parent.child2:parent.child1;if(null!=gparent){gparent.child1==parent?gparent.child1=sibling:gparent.child2=sibling,sibling.parent=gparent;var o=parent;o.height=-1;var o1=o.aabb;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1.wrap_min=o1.wrap_max=null,o1._invalidate=null,o1._validate=null,o1.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o1,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o;for(var node1=gparent;null!=node1;){if(null==node1.child1||node1.height<2)node1=node1;else{var b=node1.child1,c=node1.child2,balance=c.height-b.height;if(balance>1){var f=c.child1,g=c.child2;if(c.child1=node1,c.parent=node1.parent,node1.parent=c,null!=c.parent?c.parent.child1==node1?c.parent.child1=c:c.parent.child2=c:tree.root=c,f.height>g.height){c.child2=f,node1.child2=g,g.parent=node1;var _this=node1.aabb,a=b.aabb,b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx,_this.miny=a.miny<b1.miny?a.miny:b1.miny,_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx,_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb,a1=node1.aabb,b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx,_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny,_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx,_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height,y=g.height;node1.height=1+(x>y?x:y);var x1=node1.height,y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g,node1.child2=f,f.parent=node1;var _this2=node1.aabb,a2=b.aabb,b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx,_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny,_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx,_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb,a3=node1.aabb,b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx,_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny,_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx,_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height,y2=f.height;node1.height=1+(x2>y2?x2:y2);var x3=node1.height,y3=g.height;c.height=1+(x3>y3?x3:y3)}node1=c}else if(balance<-1){var f1=b.child1,g1=b.child2;if(b.child1=node1,b.parent=node1.parent,node1.parent=b,null!=b.parent?b.parent.child1==node1?b.parent.child1=b:b.parent.child2=b:tree.root=b,f1.height>g1.height){b.child2=f1,node1.child1=g1,g1.parent=node1;var _this4=node1.aabb,a4=c.aabb,b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx,_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny,_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx,_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb,a5=node1.aabb,b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx,_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny,_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx,_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height,y4=g1.height;node1.height=1+(x4>y4?x4:y4);var x5=node1.height,y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1,node1.child1=f1,f1.parent=node1;var _this6=node1.aabb,a6=c.aabb,b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx,_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny,_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx,_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb,a7=node1.aabb,b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx,_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny,_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx,_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height,y6=f1.height;node1.height=1+(x6>y6?x6:y6);var x7=node1.height,y7=g1.height;b.height=1+(x7>y7?x7:y7)}node1=b}else node1=node1}var child1=node1.child1,child2=node1.child2,_this8=node1.aabb,a8=child1.aabb,b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx,_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny,_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx,_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height,y8=child2.height;node1.height=1+(x8>y8?x8:y8),node1=node1.parent}}else{tree.root=sibling,sibling.parent=null;var o2=parent;o2.height=-1;var o3=o2.aabb;null!=o3.outer&&(o3.outer.zpp_inner=null,o3.outer=null),o3.wrap_min=o3.wrap_max=null,o3._invalidate=null,o3._validate=null,o3.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o3,o2.child1=o2.child2=o2.parent=null,o2.next=null,o2.snext=null,o2.mnext=null,o2.next=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=o2}}}var aabb=node.aabb;if(!space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this9=shape.circle;if(_this9.zip_worldCOM&&null!=_this9.body){if(_this9.zip_worldCOM=!1,_this9.zip_localCOM){if(_this9.zip_localCOM=!1,1==_this9.type){var _this10=_this9.polygon;if(null==_this10.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this10.lverts.next.next)_this10.localCOMx=_this10.lverts.next.x,_this10.localCOMy=_this10.lverts.next.y;else if(null==_this10.lverts.next.next.next){_this10.localCOMx=_this10.lverts.next.x,_this10.localCOMy=_this10.lverts.next.y;var t=1;_this10.localCOMx+=1*_this10.lverts.next.next.x,_this10.localCOMy+=1*_this10.lverts.next.next.y;var t1=.5;_this10.localCOMx*=.5,_this10.localCOMy*=.5}else{_this10.localCOMx=0,_this10.localCOMy=0;var area=0,cx_ite=_this10.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this10.localCOMx+=(v.x+w.x)*cf,_this10.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this10.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this10.localCOMx+=(v.x+w1.x)*cf1,_this10.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this10.localCOMx+=(v.x+w2.x)*cf2,_this10.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this10.localCOMx*=t2,_this10.localCOMy*=t2}}null!=_this9.wrap_localCOM&&(_this9.wrap_localCOM.zpp_inner.x=_this9.localCOMx,_this9.wrap_localCOM.zpp_inner.y=_this9.localCOMy)}var _this11=_this9.body;_this11.zip_axis&&(_this11.zip_axis=!1,_this11.axisx=Math.sin(_this11.rot),_this11.axisy=Math.cos(_this11.rot)),_this9.worldCOMx=_this9.body.posx+(_this9.body.axisy*_this9.localCOMx-_this9.body.axisx*_this9.localCOMy),_this9.worldCOMy=_this9.body.posy+(_this9.localCOMx*_this9.body.axisx+_this9.localCOMy*_this9.body.axisy)}var rx=_this9.radius,ry=_this9.radius;_this9.aabb.minx=_this9.worldCOMx-rx,_this9.aabb.miny=_this9.worldCOMy-ry,_this9.aabb.maxx=_this9.worldCOMx+rx,_this9.aabb.maxy=_this9.worldCOMy+ry}else{var _this12=shape.polygon;if(_this12.zip_gverts&&null!=_this12.body){_this12.zip_gverts=!1,_this12.validate_lverts();var _this13=_this12.body;_this13.zip_axis&&(_this13.zip_axis=!1,_this13.axisx=Math.sin(_this13.rot),_this13.axisy=Math.cos(_this13.rot));for(var li=_this12.lverts.next,cx_ite1=_this12.gverts.next;null!=cx_ite1;){var g2=cx_ite1,l=li;li=li.next,g2.x=_this12.body.posx+(_this12.body.axisy*l.x-_this12.body.axisx*l.y),g2.y=_this12.body.posy+(l.x*_this12.body.axisx+l.y*_this12.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this12.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this12.gverts.next;_this12.aabb.minx=p0.x,_this12.aabb.miny=p0.y,_this12.aabb.maxx=p0.x,_this12.aabb.maxy=p0.y;for(var cx_ite2=_this12.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this12.aabb.minx&&(_this12.aabb.minx=p.x),p.x>_this12.aabb.maxx&&(_this12.aabb.maxx=p.x),p.y<_this12.aabb.miny&&(_this12.aabb.miny=p.y),p.y>_this12.aabb.maxy&&(_this12.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}var a9=shape.aabb;aabb.minx=a9.minx-3,aabb.miny=a9.miny-3,aabb.maxx=a9.maxx+3,aabb.maxy=a9.maxy+3;var tree1=(node.dyn=1!=shape.body.type&&!shape.body.component.sleeping)?this.dtree:this.stree;if(null==tree1.root)tree1.root=node,tree1.root.parent=null;else{for(var leafaabb=node.aabb,node2=tree1.root;null!=node2.child1;){var child11=node2.child1,child21=node2.child2,_this14=node2.aabb,area1=2*(_this14.maxx-_this14.minx+(_this14.maxy-_this14.miny)),_this15=zpp_nape.space.ZPP_AABBTree.tmpaabb,a10=node2.aabb;_this15.minx=a10.minx<leafaabb.minx?a10.minx:leafaabb.minx,_this15.miny=a10.miny<leafaabb.miny?a10.miny:leafaabb.miny,_this15.maxx=a10.maxx>leafaabb.maxx?a10.maxx:leafaabb.maxx,_this15.maxy=a10.maxy>leafaabb.maxy?a10.maxy:leafaabb.maxy;var _this16=zpp_nape.space.ZPP_AABBTree.tmpaabb,carea=2*(_this16.maxx-_this16.minx+(_this16.maxy-_this16.miny)),cost=2*carea,icost=2*(carea-area1),_this17=zpp_nape.space.ZPP_AABBTree.tmpaabb,b10=child11.aabb,cost1;if(_this17.minx=leafaabb.minx<b10.minx?leafaabb.minx:b10.minx,_this17.miny=leafaabb.miny<b10.miny?leafaabb.miny:b10.miny,_this17.maxx=leafaabb.maxx>b10.maxx?leafaabb.maxx:b10.maxx,_this17.maxy=leafaabb.maxy>b10.maxy?leafaabb.maxy:b10.maxy,null==child11.child1){var _this18=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost1=2*(_this18.maxx-_this18.minx+(_this18.maxy-_this18.miny))+icost}else{var _this19=child11.aabb,oarea=2*(_this19.maxx-_this19.minx+(_this19.maxy-_this19.miny)),_this20=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea;cost1=2*(_this20.maxx-_this20.minx+(_this20.maxy-_this20.miny))-oarea+icost}var _this21=zpp_nape.space.ZPP_AABBTree.tmpaabb,b11=child21.aabb,cost2;if(_this21.minx=leafaabb.minx<b11.minx?leafaabb.minx:b11.minx,_this21.miny=leafaabb.miny<b11.miny?leafaabb.miny:b11.miny,_this21.maxx=leafaabb.maxx>b11.maxx?leafaabb.maxx:b11.maxx,_this21.maxy=leafaabb.maxy>b11.maxy?leafaabb.maxy:b11.maxy,null==child21.child1){var _this22=zpp_nape.space.ZPP_AABBTree.tmpaabb;cost2=2*(_this22.maxx-_this22.minx+(_this22.maxy-_this22.miny))+icost}else{var _this23=child21.aabb,oarea1=2*(_this23.maxx-_this23.minx+(_this23.maxy-_this23.miny)),_this24=zpp_nape.space.ZPP_AABBTree.tmpaabb,narea1;cost2=2*(_this24.maxx-_this24.minx+(_this24.maxy-_this24.miny))-oarea1+icost}if(cost<cost1&&cost<cost2)break;node2=cost1<cost2?child11:child21}var sibling1=node2,oparent=sibling1.parent,nparent;null==zpp_nape.space.ZPP_AABBNode.zpp_pool?nparent=new zpp_nape.space.ZPP_AABBNode:(nparent=zpp_nape.space.ZPP_AABBNode.zpp_pool,zpp_nape.space.ZPP_AABBNode.zpp_pool=nparent.next,nparent.next=null),null==zpp_nape.geom.ZPP_AABB.zpp_pool?nparent.aabb=new zpp_nape.geom.ZPP_AABB:(nparent.aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=nparent.aabb.next,nparent.aabb.next=null),nparent.moved=!1,nparent.synced=!1,nparent.first_sync=!1,nparent.parent=oparent;var _this25=nparent.aabb,b12=sibling1.aabb;for(_this25.minx=leafaabb.minx<b12.minx?leafaabb.minx:b12.minx,_this25.miny=leafaabb.miny<b12.miny?leafaabb.miny:b12.miny,_this25.maxx=leafaabb.maxx>b12.maxx?leafaabb.maxx:b12.maxx,_this25.maxy=leafaabb.maxy>b12.maxy?leafaabb.maxy:b12.maxy,nparent.height=sibling1.height+1,null!=oparent?(oparent.child1==sibling1?oparent.child1=nparent:oparent.child2=nparent,nparent.child1=sibling1,nparent.child2=node,sibling1.parent=nparent,node.parent=nparent):(nparent.child1=sibling1,nparent.child2=node,sibling1.parent=nparent,node.parent=nparent,tree1.root=nparent),node2=node.parent;null!=node2;){if(null==node2.child1||node2.height<2)node2=node2;else{var b13=node2.child1,c1=node2.child2,balance1=c1.height-b13.height;if(balance1>1){var f2=c1.child1,g3=c1.child2;if(c1.child1=node2,c1.parent=node2.parent,node2.parent=c1,null!=c1.parent?c1.parent.child1==node2?c1.parent.child1=c1:c1.parent.child2=c1:tree1.root=c1,f2.height>g3.height){c1.child2=f2,node2.child2=g3,g3.parent=node2;var _this26=node2.aabb,a11=b13.aabb,b14=g3.aabb;_this26.minx=a11.minx<b14.minx?a11.minx:b14.minx,_this26.miny=a11.miny<b14.miny?a11.miny:b14.miny,_this26.maxx=a11.maxx>b14.maxx?a11.maxx:b14.maxx,_this26.maxy=a11.maxy>b14.maxy?a11.maxy:b14.maxy;var _this27=c1.aabb,a12=node2.aabb,b15=f2.aabb;_this27.minx=a12.minx<b15.minx?a12.minx:b15.minx,_this27.miny=a12.miny<b15.miny?a12.miny:b15.miny,_this27.maxx=a12.maxx>b15.maxx?a12.maxx:b15.maxx,_this27.maxy=a12.maxy>b15.maxy?a12.maxy:b15.maxy;var x9=b13.height,y9=g3.height;node2.height=1+(x9>y9?x9:y9);var x10=node2.height,y10=f2.height;c1.height=1+(x10>y10?x10:y10)}else{c1.child2=g3,node2.child2=f2,f2.parent=node2;var _this28=node2.aabb,a13=b13.aabb,b16=f2.aabb;_this28.minx=a13.minx<b16.minx?a13.minx:b16.minx,_this28.miny=a13.miny<b16.miny?a13.miny:b16.miny,_this28.maxx=a13.maxx>b16.maxx?a13.maxx:b16.maxx,_this28.maxy=a13.maxy>b16.maxy?a13.maxy:b16.maxy;var _this29=c1.aabb,a14=node2.aabb,b17=g3.aabb;_this29.minx=a14.minx<b17.minx?a14.minx:b17.minx,_this29.miny=a14.miny<b17.miny?a14.miny:b17.miny,_this29.maxx=a14.maxx>b17.maxx?a14.maxx:b17.maxx,_this29.maxy=a14.maxy>b17.maxy?a14.maxy:b17.maxy;var x11=b13.height,y11=f2.height;node2.height=1+(x11>y11?x11:y11);var x12=node2.height,y12=g3.height;c1.height=1+(x12>y12?x12:y12)}node2=c1}else if(balance1<-1){var f3=b13.child1,g4=b13.child2;if(b13.child1=node2,b13.parent=node2.parent,node2.parent=b13,null!=b13.parent?b13.parent.child1==node2?b13.parent.child1=b13:b13.parent.child2=b13:tree1.root=b13,f3.height>g4.height){b13.child2=f3,node2.child1=g4,g4.parent=node2;var _this30=node2.aabb,a15=c1.aabb,b18=g4.aabb;_this30.minx=a15.minx<b18.minx?a15.minx:b18.minx,_this30.miny=a15.miny<b18.miny?a15.miny:b18.miny,_this30.maxx=a15.maxx>b18.maxx?a15.maxx:b18.maxx,_this30.maxy=a15.maxy>b18.maxy?a15.maxy:b18.maxy;var _this31=b13.aabb,a16=node2.aabb,b19=f3.aabb;_this31.minx=a16.minx<b19.minx?a16.minx:b19.minx,_this31.miny=a16.miny<b19.miny?a16.miny:b19.miny,_this31.maxx=a16.maxx>b19.maxx?a16.maxx:b19.maxx,_this31.maxy=a16.maxy>b19.maxy?a16.maxy:b19.maxy;var x13=c1.height,y13=g4.height;node2.height=1+(x13>y13?x13:y13);var x14=node2.height,y14=f3.height;b13.height=1+(x14>y14?x14:y14)}else{b13.child2=g4,node2.child1=f3,f3.parent=node2;var _this32=node2.aabb,a17=c1.aabb,b20=f3.aabb;_this32.minx=a17.minx<b20.minx?a17.minx:b20.minx,_this32.miny=a17.miny<b20.miny?a17.miny:b20.miny,_this32.maxx=a17.maxx>b20.maxx?a17.maxx:b20.maxx,_this32.maxy=a17.maxy>b20.maxy?a17.maxy:b20.maxy;var _this33=b13.aabb,a18=node2.aabb,b21=g4.aabb;_this33.minx=a18.minx<b21.minx?a18.minx:b21.minx,_this33.miny=a18.miny<b21.miny?a18.miny:b21.miny,_this33.maxx=a18.maxx>b21.maxx?a18.maxx:b21.maxx,_this33.maxy=a18.maxy>b21.maxy?a18.maxy:b21.maxy;var x15=c1.height,y15=f3.height;node2.height=1+(x15>y15?x15:y15);var x16=node2.height,y16=g4.height;b13.height=1+(x16>y16?x16:y16)}node2=b13}else node2=node2}var child12=node2.child1,child22=node2.child2,x17=child12.height,y17=child22.height;node2.height=1+(x17>y17?x17:y17);var _this34=node2.aabb,a19=child12.aabb,b22=child22.aabb;_this34.minx=a19.minx<b22.minx?a19.minx:b22.minx,_this34.miny=a19.miny<b22.miny?a19.miny:b22.miny,_this34.maxx=a19.maxx>b22.maxx?a19.maxx:b22.maxx,_this34.maxy=a19.maxy>b22.maxy?a19.maxy:b22.maxy,node2=node2.parent}}node.synced=!1,node=node.snext}for(;null!=this.syncs;){var ret=this.syncs;this.syncs=ret.snext,ret.snext=null;var leaf=ret;if(!leaf.moved){leaf.moved=!1;var lshape=leaf.shape,lbody;if(!lshape.body.component.sleeping){var ab=leaf.aabb,stack=null;for(null!=this.dtree.root&&(this.dtree.root.next=stack,stack=this.dtree.root);null!=stack;){var ret1=stack;stack=ret1.next,ret1.next=null;var node3=ret1;if(node3!=leaf)if(null==node3.child1){var shape1=node3.shape;if(shape1.body!=lshape.body&&(1!=shape1.body.type||1!=lshape.body.type)){var x18=node3.aabb;if(x18.miny<=ab.maxy&&ab.miny<=x18.maxy&&x18.minx<=ab.maxx&&ab.minx<=x18.maxx){var id,di;lshape.id<shape1.id?(id=lshape.id,di=shape1.id):(id=shape1.id,di=lshape.id);for(var s,p1=null,cx_ite3=(lshape.pairs.length<shape1.pairs.length?lshape:shape1).pairs.head;null!=cx_ite3;){var px=cx_ite3.elt;if(px.id==id&&px.di==di){p1=px;break}cx_ite3=cx_ite3.next}if(null!=p1){p1.sleeping&&(p1.sleeping=!1,p1.next=this.pairs,this.pairs=p1,p1.first=!0);continue}null==zpp_nape.space.ZPP_AABBPair.zpp_pool?p1=new zpp_nape.space.ZPP_AABBPair:(p1=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=p1.next,p1.next=null),p1.n1=leaf,p1.n2=node3,p1.id=id,p1.di=di,p1.next=this.pairs,this.pairs=p1,p1.first=!0;var _this35=lshape.pairs,ret2;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret2=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret2.next,ret2.next=null),ret2.elt=p1;var temp=ret2;temp.next=_this35.head,_this35.head=temp,_this35.modified=!0,_this35.length++;var _this36=shape1.pairs,ret3;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret3=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret3.next,ret3.next=null),ret3.elt=p1;var temp1=ret3;temp1.next=_this36.head,_this36.head=temp1,_this36.modified=!0,_this36.length++}}}else{var x19=node3.aabb;x19.miny<=ab.maxy&&ab.miny<=x19.maxy&&x19.minx<=ab.maxx&&ab.minx<=x19.maxx&&(null!=node3.child1&&(node3.child1.next=stack,stack=node3.child1),null!=node3.child2&&(node3.child2.next=stack,stack=node3.child2))}}for(null!=this.stree.root&&(this.stree.root.next=stack,stack=this.stree.root);null!=stack;){var ret4=stack;stack=ret4.next,ret4.next=null;var node4=ret4;if(node4!=leaf)if(null==node4.child1){var shape2=node4.shape;if(shape2.body!=lshape.body&&(1!=shape2.body.type||1!=lshape.body.type)){var x20=node4.aabb;if(x20.miny<=ab.maxy&&ab.miny<=x20.maxy&&x20.minx<=ab.maxx&&ab.minx<=x20.maxx){var id1,di1;lshape.id<shape2.id?(id1=lshape.id,di1=shape2.id):(id1=shape2.id,di1=lshape.id);for(var s1,p2=null,cx_ite4=(lshape.pairs.length<shape2.pairs.length?lshape:shape2).pairs.head;null!=cx_ite4;){var px1=cx_ite4.elt;if(px1.id==id1&&px1.di==di1){p2=px1;break}cx_ite4=cx_ite4.next}if(null!=p2){p2.sleeping&&(p2.sleeping=!1,p2.next=this.pairs,this.pairs=p2,p2.first=!0);continue}null==zpp_nape.space.ZPP_AABBPair.zpp_pool?p2=new zpp_nape.space.ZPP_AABBPair:(p2=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=p2.next,p2.next=null),p2.n1=leaf,p2.n2=node4,p2.id=id1,p2.di=di1,p2.next=this.pairs,this.pairs=p2,p2.first=!0;var _this37=lshape.pairs,ret5;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret5=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret5.next,ret5.next=null),ret5.elt=p2;var temp2=ret5;temp2.next=_this37.head,_this37.head=temp2,_this37.modified=!0,_this37.length++;var _this38=shape2.pairs,ret6;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret6=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret6.next,ret6.next=null),ret6.elt=p2;var temp3=ret6;temp3.next=_this38.head,_this38.head=temp3,_this38.modified=!0,_this38.length++}}}else{var x21=node4.aabb;x21.miny<=ab.maxy&&ab.miny<=x21.maxy&&x21.minx<=ab.maxx&&ab.minx<=x21.maxx&&(null!=node4.child1&&(node4.child1.next=stack,stack=node4.child1),null!=node4.child2&&(node4.child2.next=stack,stack=node4.child2))}}}}}for(;null!=this.moves;){var ret7=this.moves;this.moves=ret7.mnext,ret7.mnext=null;var leaf1=ret7;leaf1.moved=!1;var lshape1=leaf1.shape,lbody1;if(!lshape1.body.component.sleeping){var ab1=leaf1.aabb,stack1=null;for(null!=this.dtree.root&&(this.dtree.root.next=stack1,stack1=this.dtree.root);null!=stack1;){var ret8=stack1;stack1=ret8.next,ret8.next=null;var node5=ret8;if(node5!=leaf1)if(null==node5.child1){var shape3=node5.shape;if(shape3.body!=lshape1.body&&(1!=shape3.body.type||1!=lshape1.body.type)){var x22=node5.aabb;if(x22.miny<=ab1.maxy&&ab1.miny<=x22.maxy&&x22.minx<=ab1.maxx&&ab1.minx<=x22.maxx){var id2,di2;lshape1.id<shape3.id?(id2=lshape1.id,di2=shape3.id):(id2=shape3.id,di2=lshape1.id);for(var s2,p3=null,cx_ite5=(lshape1.pairs.length<shape3.pairs.length?lshape1:shape3).pairs.head;null!=cx_ite5;){var px2=cx_ite5.elt;if(px2.id==id2&&px2.di==di2){p3=px2;break}cx_ite5=cx_ite5.next}if(null!=p3){p3.sleeping&&(p3.sleeping=!1,p3.next=this.pairs,this.pairs=p3,p3.first=!0);continue}null==zpp_nape.space.ZPP_AABBPair.zpp_pool?p3=new zpp_nape.space.ZPP_AABBPair:(p3=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=p3.next,p3.next=null),p3.n1=leaf1,p3.n2=node5,p3.id=id2,p3.di=di2,p3.next=this.pairs,this.pairs=p3,p3.first=!0;var _this39=lshape1.pairs,ret9;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret9=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret9=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret9.next,ret9.next=null),ret9.elt=p3;var temp4=ret9;temp4.next=_this39.head,_this39.head=temp4,_this39.modified=!0,_this39.length++;var _this40=shape3.pairs,ret10;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret10=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret10=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret10.next,ret10.next=null),ret10.elt=p3;var temp5=ret10;temp5.next=_this40.head,_this40.head=temp5,_this40.modified=!0,_this40.length++}}}else{var x23=node5.aabb;x23.miny<=ab1.maxy&&ab1.miny<=x23.maxy&&x23.minx<=ab1.maxx&&ab1.minx<=x23.maxx&&(null!=node5.child1&&(node5.child1.next=stack1,stack1=node5.child1),null!=node5.child2&&(node5.child2.next=stack1,stack1=node5.child2))}}for(null!=this.stree.root&&(this.stree.root.next=stack1,stack1=this.stree.root);null!=stack1;){var ret11=stack1;stack1=ret11.next,ret11.next=null;var node6=ret11;if(node6!=leaf1)if(null==node6.child1){var shape4=node6.shape;if(shape4.body!=lshape1.body&&(1!=shape4.body.type||1!=lshape1.body.type)){var x24=node6.aabb;if(x24.miny<=ab1.maxy&&ab1.miny<=x24.maxy&&x24.minx<=ab1.maxx&&ab1.minx<=x24.maxx){var id3,di3;lshape1.id<shape4.id?(id3=lshape1.id,di3=shape4.id):(id3=shape4.id,di3=lshape1.id);for(var s3,p4=null,cx_ite6=(lshape1.pairs.length<shape4.pairs.length?lshape1:shape4).pairs.head;null!=cx_ite6;){var px3=cx_ite6.elt;if(px3.id==id3&&px3.di==di3){p4=px3;break}cx_ite6=cx_ite6.next}if(null!=p4){p4.sleeping&&(p4.sleeping=!1,p4.next=this.pairs,this.pairs=p4,p4.first=!0);continue}null==zpp_nape.space.ZPP_AABBPair.zpp_pool?p4=new zpp_nape.space.ZPP_AABBPair:(p4=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=p4.next,p4.next=null),p4.n1=leaf1,p4.n2=node6,p4.id=id3,p4.di=di3,p4.next=this.pairs,this.pairs=p4,p4.first=!0;var _this41=lshape1.pairs,ret12;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret12=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret12=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret12.next,ret12.next=null),ret12.elt=p4;var temp6=ret12;temp6.next=_this41.head,_this41.head=temp6,_this41.modified=!0,_this41.length++;var _this42=shape4.pairs,ret13;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret13=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret13=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret13.next,ret13.next=null),ret13.elt=p4;var temp7=ret13;temp7.next=_this42.head,_this42.head=temp7,_this42.modified=!0,_this42.length++}}}else{var x25=node6.aabb;x25.miny<=ab1.maxy&&ab1.miny<=x25.maxy&&x25.minx<=ab1.maxx&&ab1.minx<=x25.maxx&&(null!=node6.child1&&(node6.child1.next=stack1,stack1=node6.child1),null!=node6.child2&&(node6.child2.next=stack1,stack1=node6.child2))}}}}for(var pre=null,cur=this.pairs;null!=cur;){var tmp;if(cur.first)tmp=!1;else{var _this43=cur.n1.aabb,x26=cur.n2.aabb;tmp=!(x26.miny<=_this43.maxy&&_this43.miny<=x26.maxy&&x26.minx<=_this43.maxx&&_this43.minx<=x26.maxx)}if(tmp){null==pre?this.pairs=cur.next:pre.next=cur.next;for(var _this44=cur.n1.shape.pairs,pre1=null,cur1=_this44.head,ret14=!1;null!=cur1;){if(cur1.elt==cur){var old,ret15;null==pre1?(ret15=(old=_this44.head).next,_this44.head=ret15,null==_this44.head&&(_this44.pushmod=!0)):(ret15=(old=pre1.next).next,pre1.next=ret15,null==ret15&&(_this44.pushmod=!0));var o4=old;o4.elt=null,o4.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o4,_this44.modified=!0,_this44.length--,_this44.pushmod=!0,ret14=!0;break}pre1=cur1,cur1=cur1.next}for(var _this45=cur.n2.shape.pairs,pre2=null,cur2=_this45.head,ret16=!1;null!=cur2;){if(cur2.elt==cur){var old1,ret17;null==pre2?(ret17=(old1=_this45.head).next,_this45.head=ret17,null==_this45.head&&(_this45.pushmod=!0)):(ret17=(old1=pre2.next).next,pre2.next=ret17,null==ret17&&(_this45.pushmod=!0));var o5=old1;o5.elt=null,o5.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o5,_this45.modified=!0,_this45.length--,_this45.pushmod=!0,ret16=!0;break}pre2=cur2,cur2=cur2.next}var nxt=cur.next;null!=cur.arb&&(cur.arb.pair=null),cur.arb=null;var o6=cur;o6.n1=o6.n2=null,o6.sleeping=!1,o6.next=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=o6,cur=nxt}else{var s11=cur.n1.shape,b110=s11.body,s21=cur.n2.shape,b23=s21.body;if(cur.first||!b110.component.sleeping&&1!=b110.type||!b23.component.sleeping&&1!=b23.type){cur.first=!1;var _this46=s11.aabb,x27=s21.aabb;if(x27.miny<=_this46.maxy&&_this46.miny<=x27.maxy&&x27.minx<=_this46.maxx&&_this46.minx<=x27.maxx){var oarb=cur.arb;cur.arb=discrete?space.narrowPhase(s11,s21,2!=b110.type||2!=b23.type,cur.arb,!1):space.continuousEvent(s11,s21,2!=b110.type||2!=b23.type,cur.arb,!1),null==cur.arb?null!=oarb&&(oarb.pair=null):cur.arb.pair=cur}pre=cur,cur=cur.next}else cur.sleeping=!0,null==pre?this.pairs=cur.next:pre.next=cur.next,cur=cur.next}}},zpp_nape.space.ZPP_DynAABBPhase.prototype.clear=function(){for(;null!=this.syncs;){var next=this.syncs.snext;this.syncs.snext=null,this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null),this.syncs=next}for(;null!=this.moves;){var next1=this.moves.mnext;this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=next1}for(;null!=this.pairs;){var nxt=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null),this.pairs.arb=null;for(var _this=this.pairs.n1.shape.pairs,obj=this.pairs,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=this.pairs.n2.shape.pairs,obj1=this.pairs,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==obj1){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}var o2=this.pairs;o2.n1=o2.n2=null,o2.sleeping=!1,o2.next=zpp_nape.space.ZPP_AABBPair.zpp_pool,zpp_nape.space.ZPP_AABBPair.zpp_pool=o2,this.pairs=nxt}this.dtree.clear(),this.stree.clear()},zpp_nape.space.ZPP_DynAABBPhase.prototype.treeStack=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.shapesUnderPoint=function(x,y,filter,output){var ret;this.sync_broadphase(),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y;var v=ret,ret1=null==output?new nape.shape.ShapeList:output;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(v.x>=_this.minx&&v.x<=_this.maxx&&v.y>=_this.miny&&v.y<=_this.maxy)if(null==node.child1){var tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(0==node.shape.type?zpp_nape.geom.ZPP_Collide.circleContains(node.shape.circle,v)&&ret1.push(node.shape.outer):zpp_nape.geom.ZPP_Collide.polyContains(node.shape.polygon,v)&&ret1.push(node.shape.outer))}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(v.x>=_this2.minx&&v.x<=_this2.maxx&&v.y>=_this2.miny&&v.y<=_this2.maxy)if(null==node1.child1){var tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;tmp1&&(0==node1.shape.type?zpp_nape.geom.ZPP_Collide.circleContains(node1.shape.circle,v)&&ret1.push(node1.shape.outer):zpp_nape.geom.ZPP_Collide.polyContains(node1.shape.polygon,v)&&ret1.push(node1.shape.outer))}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}var o=v;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret1},zpp_nape.space.ZPP_DynAABBPhase.prototype.bodiesUnderPoint=function(x,y,filter,output){var ret;this.sync_broadphase(),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y;var v=ret,ret1=null==output?new nape.phys.BodyList:output;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(v.x>=_this.minx&&v.x<=_this.maxx&&v.y>=_this.miny&&v.y<=_this.maxy)if(null==node.child1){var body=node.shape.body.outer;if(!ret1.has(body)){var tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(0==node.shape.type?zpp_nape.geom.ZPP_Collide.circleContains(node.shape.circle,v)&&ret1.push(body):zpp_nape.geom.ZPP_Collide.polyContains(node.shape.polygon,v)&&ret1.push(body))}}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(v.x>=_this2.minx&&v.x<=_this2.maxx&&v.y>=_this2.miny&&v.y<=_this2.maxy)if(null==node1.child1){var body1=node1.shape.body.outer;if(!ret1.has(body1)){var tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;tmp1&&(0==node1.shape.type?zpp_nape.geom.ZPP_Collide.circleContains(node1.shape.circle,v)&&ret1.push(body1):zpp_nape.geom.ZPP_Collide.polyContains(node1.shape.polygon,v)&&ret1.push(body1))}}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}var o=v;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret1},zpp_nape.space.ZPP_DynAABBPhase.prototype.treeStack2=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.shapesInAABB=function(aabb,strict,containment,filter,output){this.sync_broadphase(),this.updateAABBShape(aabb);var ab=this.aabbShape.zpp_inner.aabb,ret=null==output?new nape.shape.ShapeList:output;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),x=node.aabb;if(x.minx>=ab.minx&&x.miny>=ab.miny&&x.maxx<=ab.maxx&&x.maxy<=ab.maxy)if(null==node.child1){var tmp;if(null!=filter){var _this=node.shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;tmp&&ret.push(node.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack2.add(node);null!=this.treeStack2.head;){var node1=this.treeStack2.pop_unsafe();if(null==node1.child1){var tmp1;if(null!=filter){var _this1=node1.shape.filter;tmp1=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp1=!0;tmp1&&ret.push(node1.shape.outer)}else null!=node1.child1&&this.treeStack2.add(node1.child1),null!=node1.child2&&this.treeStack2.add(node1.child2)}else{var _this2=node.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node.child1){var tmp2;if(null!=filter){var _this3=node.shape.filter;tmp2=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp2=!0;if(tmp2)if(strict)if(containment)zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,node.shape)&&ret.push(node.shape.outer);else{var x1=node.shape.aabb;x1.minx>=ab.minx&&x1.miny>=ab.miny&&x1.maxx<=ab.maxx&&x1.maxy<=ab.maxy?ret.push(node.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,this.aabbShape.zpp_inner)&&ret.push(node.shape.outer)}else{var tmp3;if(containment){var x2=node.shape.aabb;tmp3=x2.minx>=ab.minx&&x2.miny>=ab.miny&&x2.maxx<=ab.maxx&&x2.maxy<=ab.maxy}else tmp3=!0;tmp3&&ret.push(node.shape.outer)}}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node2=this.treeStack.pop_unsafe(),x3=node2.aabb;if(x3.minx>=ab.minx&&x3.miny>=ab.miny&&x3.maxx<=ab.maxx&&x3.maxy<=ab.maxy)if(null==node2.child1){var tmp4;if(null!=filter){var _this4=node2.shape.filter;tmp4=0!=(_this4.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this4.collisionGroup)}else tmp4=!0;tmp4&&ret.push(node2.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack2.add(node2);null!=this.treeStack2.head;){var node3=this.treeStack2.pop_unsafe();if(null==node3.child1){var tmp5;if(null!=filter){var _this5=node3.shape.filter;tmp5=0!=(_this5.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this5.collisionGroup)}else tmp5=!0;tmp5&&ret.push(node3.shape.outer)}else null!=node3.child1&&this.treeStack2.add(node3.child1),null!=node3.child2&&this.treeStack2.add(node3.child2)}else{var _this6=node2.aabb;if(ab.miny<=_this6.maxy&&_this6.miny<=ab.maxy&&ab.minx<=_this6.maxx&&_this6.minx<=ab.maxx)if(null==node2.child1){var tmp6;if(null!=filter){var _this7=node2.shape.filter;tmp6=0!=(_this7.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this7.collisionGroup)}else tmp6=!0;if(tmp6)if(strict)if(containment)zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,node2.shape)&&ret.push(node2.shape.outer);else{var x4=node2.shape.aabb;x4.minx>=ab.minx&&x4.miny>=ab.miny&&x4.maxx<=ab.maxx&&x4.maxy<=ab.maxy?ret.push(node2.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node2.shape,this.aabbShape.zpp_inner)&&ret.push(node2.shape.outer)}else{var tmp7;if(containment){var x5=node2.shape.aabb;tmp7=x5.minx>=ab.minx&&x5.miny>=ab.miny&&x5.maxx<=ab.maxx&&x5.maxy<=ab.maxy}else tmp7=!0;tmp7&&ret.push(node2.shape.outer)}}else null!=node2.child1&&this.treeStack.add(node2.child1),null!=node2.child2&&this.treeStack.add(node2.child2)}}return ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.failed=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.bodiesInAABB=function(aabb,strict,containment,filter,output){this.sync_broadphase(),this.updateAABBShape(aabb);var ab=this.aabbShape.zpp_inner.aabb,ret=null==output?new nape.phys.BodyList:output;if(null==this.failed&&(this.failed=new nape.phys.BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),x=node.aabb;if(x.minx>=ab.minx&&x.miny>=ab.miny&&x.maxx<=ab.maxx&&x.maxy<=ab.maxy)if(null==node.child1){var tmp;if(null!=filter){var _this=node.shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;if(tmp){var body=node.shape.body.outer;ret.has(body)||ret.push(body)}}else for(null==this.treeStack2&&(this.treeStack2=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack2.add(node);null!=this.treeStack2.head;){var node1=this.treeStack2.pop_unsafe();if(null==node1.child1){var tmp1;if(null!=filter){var _this1=node1.shape.filter;tmp1=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp1=!0;if(tmp1){var body1=node1.shape.body.outer;ret.has(body1)||ret.push(body1)}}else null!=node1.child1&&this.treeStack2.add(node1.child1),null!=node1.child2&&this.treeStack2.add(node1.child2)}else{var _this2=node.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node.child1){var body2=node.shape.body.outer,tmp2;if(null!=filter){var _this3=node.shape.filter;tmp2=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp2=!0;if(tmp2)if(strict)if(containment){if(!this.failed.has(body2)){var col=zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,node.shape);!ret.has(body2)&&col?ret.push(body2):col||(ret.remove(body2),this.failed.push(body2))}}else!ret.has(body2)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,this.aabbShape.zpp_inner)&&ret.push(body2);else if(containment){if(!this.failed.has(body2)){var x1=node.shape.aabb,col1=x1.minx>=ab.minx&&x1.miny>=ab.miny&&x1.maxx<=ab.maxx&&x1.maxy<=ab.maxy;!ret.has(body2)&&col1?ret.push(body2):col1||(ret.remove(body2),this.failed.push(body2))}}else{var tmp3;if(ret.has(body2))tmp3=!1;else{var x2=node.shape.aabb;tmp3=x2.minx>=ab.minx&&x2.miny>=ab.miny&&x2.maxx<=ab.maxx&&x2.maxy<=ab.maxy}tmp3&&ret.push(body2)}}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node2=this.treeStack.pop_unsafe(),x3=node2.aabb;if(x3.minx>=ab.minx&&x3.miny>=ab.miny&&x3.maxx<=ab.maxx&&x3.maxy<=ab.maxy)if(null==node2.child1){var tmp4;if(null!=filter){var _this4=node2.shape.filter;tmp4=0!=(_this4.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this4.collisionGroup)}else tmp4=!0;if(tmp4){var body3=node2.shape.body.outer;ret.has(body3)||ret.push(body3)}}else for(null==this.treeStack2&&(this.treeStack2=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack2.add(node2);null!=this.treeStack2.head;){var node3=this.treeStack2.pop_unsafe();if(null==node3.child1){var tmp5;if(null!=filter){var _this5=node3.shape.filter;tmp5=0!=(_this5.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this5.collisionGroup)}else tmp5=!0;if(tmp5){var body4=node3.shape.body.outer;ret.has(body4)||ret.push(body4)}}else null!=node3.child1&&this.treeStack2.add(node3.child1),null!=node3.child2&&this.treeStack2.add(node3.child2)}else{var _this6=node2.aabb;if(ab.miny<=_this6.maxy&&_this6.miny<=ab.maxy&&ab.minx<=_this6.maxx&&_this6.minx<=ab.maxx)if(null==node2.child1){var body5=node2.shape.body.outer,tmp6;if(null!=filter){var _this7=node2.shape.filter;tmp6=0!=(_this7.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this7.collisionGroup)}else tmp6=!0;if(tmp6)if(strict)if(containment){if(!this.failed.has(body5)){var col2=zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,node2.shape);!ret.has(body5)&&col2?ret.push(body5):col2||(ret.remove(body5),this.failed.push(body5))}}else!ret.has(body5)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node2.shape,this.aabbShape.zpp_inner)&&ret.push(body5);else if(containment){if(!this.failed.has(body5)){var x4=node2.shape.aabb,col3=x4.minx>=ab.minx&&x4.miny>=ab.miny&&x4.maxx<=ab.maxx&&x4.maxy<=ab.maxy;!ret.has(body5)&&col3?ret.push(body5):col3||(ret.remove(body5),this.failed.push(body5))}}else{var tmp7;if(ret.has(body5))tmp7=!1;else{var x5=node2.shape.aabb;tmp7=x5.minx>=ab.minx&&x5.miny>=ab.miny&&x5.maxx<=ab.maxx&&x5.maxy<=ab.maxy}tmp7&&ret.push(body5)}}else null!=node2.child1&&this.treeStack.add(node2.child1),null!=node2.child2&&this.treeStack.add(node2.child2)}}return this.failed.clear(),ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.shapesInCircle=function(x,y,r,containment,filter,output){this.sync_broadphase(),this.updateCircShape(x,y,r);var ab=this.circShape.zpp_inner.aabb,ret=null==output?new nape.shape.ShapeList:output;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx)if(null==node.child1){var tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(containment?zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,node.shape)&&ret.push(node.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,this.circShape.zpp_inner)&&ret.push(node.shape.outer))}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node1.child1){var tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;tmp1&&(containment?zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,node1.shape)&&ret.push(node1.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node1.shape,this.circShape.zpp_inner)&&ret.push(node1.shape.outer))}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}return ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.bodiesInCircle=function(x,y,r,containment,filter,output){this.sync_broadphase(),this.updateCircShape(x,y,r);var ab=this.circShape.zpp_inner.aabb,ret=null==output?new nape.phys.BodyList:output;if(null==this.failed&&(this.failed=new nape.phys.BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx)if(null==node.child1){var body=node.shape.body.outer,tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;if(tmp)if(containment){if(!this.failed.has(body)){var col=zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,node.shape);!ret.has(body)&&col?ret.push(body):col||(ret.remove(body),this.failed.push(body))}}else!ret.has(body)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,this.circShape.zpp_inner)&&ret.push(body)}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node1.child1){var body1=node1.shape.body.outer,tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;if(tmp1)if(containment){if(!this.failed.has(body1)){var col1=zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,node1.shape);!ret.has(body1)&&col1?ret.push(body1):col1||(ret.remove(body1),this.failed.push(body1))}}else!ret.has(body1)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node1.shape,this.circShape.zpp_inner)&&ret.push(body1)}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}return this.failed.clear(),ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.shapesInShape=function(shp,containment,filter,output){this.sync_broadphase(),this.validateShape(shp);var ab=shp.aabb,ret=null==output?new nape.shape.ShapeList:output;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx)if(null==node.child1){var tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(containment?zpp_nape.geom.ZPP_Collide.containTest(shp,node.shape)&&ret.push(node.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,shp)&&ret.push(node.shape.outer))}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node1.child1){var tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;tmp1&&(containment?zpp_nape.geom.ZPP_Collide.containTest(shp,node1.shape)&&ret.push(node1.shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(node1.shape,shp)&&ret.push(node1.shape.outer))}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}return ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.bodiesInShape=function(shp,containment,filter,output){this.sync_broadphase(),this.validateShape(shp);var ab=shp.aabb,ret=null==output?new nape.phys.BodyList:output;if(null==this.failed&&(this.failed=new nape.phys.BodyList),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var node=this.treeStack.pop_unsafe(),_this=node.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx)if(null==node.child1){var body=node.shape.body.outer,tmp;if(null!=filter){var _this1=node.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;if(tmp)if(containment){if(!this.failed.has(body)){var col=zpp_nape.geom.ZPP_Collide.containTest(shp,node.shape);!ret.has(body)&&col?ret.push(body):col||(ret.remove(body),this.failed.push(body))}}else!ret.has(body)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node.shape,shp)&&ret.push(body)}else null!=node.child1&&this.treeStack.add(node.child1),null!=node.child2&&this.treeStack.add(node.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var node1=this.treeStack.pop_unsafe(),_this2=node1.aabb;if(ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx)if(null==node1.child1){var body1=node1.shape.body.outer,tmp1;if(null!=filter){var _this3=node1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;if(tmp1)if(containment){if(!this.failed.has(body1)){var col1=zpp_nape.geom.ZPP_Collide.containTest(shp,node1.shape);!ret.has(body1)&&col1?ret.push(body1):col1||(ret.remove(body1),this.failed.push(body1))}}else!ret.has(body1)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(node1.shape,shp)&&ret.push(body1)}else null!=node1.child1&&this.treeStack.add(node1.child1),null!=node1.child2&&this.treeStack.add(node1.child2)}return this.failed.clear(),ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.openlist=null,zpp_nape.space.ZPP_DynAABBPhase.prototype.rayCast=function(ray,inner,filter){null==this.openlist&&(this.openlist=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.sync_broadphase(),ray.validate_dir();var mint=ray.maxdist;if(null!=this.dtree.root&&ray.aabbtest(this.dtree.root.aabb)){var t=ray.aabbsect(this.dtree.root.aabb);if(t>=0&&t<mint){this.dtree.root.rayt=t;for(var pre=null,cx_ite=this.openlist.head;null!=cx_ite;){var j=cx_ite.elt;if(this.dtree.root.rayt<j.rayt)break;pre=cx_ite,cx_ite=cx_ite.next}var _this=this.openlist,o=this.dtree.root,ret;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;null==pre?(temp.next=_this.head,_this.head=temp):(temp.next=pre.next,pre.next=temp),_this.pushmod=_this.modified=!0,_this.length++}}if(null!=this.stree.root&&ray.aabbtest(this.stree.root.aabb)){var t1=ray.aabbsect(this.stree.root.aabb);if(t1>=0&&t1<mint){this.stree.root.rayt=t1;for(var pre1=null,cx_ite1=this.openlist.head;null!=cx_ite1;){var j1=cx_ite1.elt;if(this.stree.root.rayt<j1.rayt)break;pre1=cx_ite1,cx_ite1=cx_ite1.next}var _this1=this.openlist,o1=this.stree.root,ret1;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret1=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret1.next,ret1.next=null),ret1.elt=o1;var temp1=ret1;null==pre1?(temp1.next=_this1.head,_this1.head=temp1):(temp1.next=pre1.next,pre1.next=temp1),_this1.pushmod=_this1.modified=!0,_this1.length++}}for(var minres=null;null!=this.openlist.head;){var cnode=this.openlist.pop_unsafe();if(cnode.rayt>=mint)break;if(null==cnode.child1){var shape=cnode.shape,tmp;if(null!=filter){var _this2=shape.filter;tmp=0!=(_this2.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this2.collisionGroup)}else tmp=!0;if(tmp){var result=0==shape.type?ray.circlesect(shape.circle,inner,mint):ray.aabbtest(shape.aabb)?ray.polysect(shape.polygon,inner,mint):null;if(null!=result){if(null!=result.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(mint=result.zpp_inner.toiDistance,null!=minres){if(null!=minres.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");minres.zpp_inner.free()}minres=result}}}else{if(null!=cnode.child1&&ray.aabbtest(cnode.child1.aabb)){var t2=ray.aabbsect(cnode.child1.aabb);if(t2>=0&&t2<mint){cnode.child1.rayt=t2;for(var pre2=null,cx_ite2=this.openlist.head;null!=cx_ite2;){var j2=cx_ite2.elt;if(cnode.child1.rayt<j2.rayt)break;pre2=cx_ite2,cx_ite2=cx_ite2.next}var _this3=this.openlist,o2=cnode.child1,ret2;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret2=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret2.next,ret2.next=null),ret2.elt=o2;var temp2=ret2;null==pre2?(temp2.next=_this3.head,_this3.head=temp2):(temp2.next=pre2.next,pre2.next=temp2),_this3.pushmod=_this3.modified=!0,_this3.length++}}if(null!=cnode.child2&&ray.aabbtest(cnode.child2.aabb)){var t3=ray.aabbsect(cnode.child2.aabb);if(t3>=0&&t3<mint){cnode.child2.rayt=t3;for(var pre3=null,cx_ite3=this.openlist.head;null!=cx_ite3;){var j3=cx_ite3.elt;if(cnode.child2.rayt<j3.rayt)break;pre3=cx_ite3,cx_ite3=cx_ite3.next}var _this4=this.openlist,o3=cnode.child2,ret3;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret3=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o3;var temp3=ret3;null==pre3?(temp3.next=_this4.head,_this4.head=temp3):(temp3.next=pre3.next,pre3.next=temp3),_this4.pushmod=_this4.modified=!0,_this4.length++}}}}return this.openlist.clear(),minres},zpp_nape.space.ZPP_DynAABBPhase.prototype.rayMultiCast=function(ray,inner,filter,output){null==this.openlist&&(this.openlist=new zpp_nape.util.ZNPList_ZPP_AABBNode),this.sync_broadphase(),ray.validate_dir();var inf=ray.maxdist>=1/0,ret=null==output?new nape.geom.RayResultList:output;if(null!=this.dtree.root&&ray.aabbtest(this.dtree.root.aabb))if(inf)this.openlist.add(this.dtree.root);else{var t=ray.aabbsect(this.dtree.root.aabb);t>=0&&t<ray.maxdist&&this.openlist.add(this.dtree.root)}if(null!=this.stree.root&&ray.aabbtest(this.stree.root.aabb))if(inf)this.openlist.add(this.stree.root);else{var t1=ray.aabbsect(this.stree.root.aabb);t1>=0&&t1<ray.maxdist&&this.openlist.add(this.stree.root)}for(;null!=this.openlist.head;){var cnode=this.openlist.pop_unsafe();if(null==cnode.child1){var shape=cnode.shape,tmp;if(null!=filter){var _this=shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;tmp&&(0==shape.type?ray.circlesect2(shape.circle,inner,ret):ray.aabbtest(shape.aabb)&&ray.polysect2(shape.polygon,inner,ret))}else{if(null!=cnode.child1&&ray.aabbtest(cnode.child1.aabb))if(inf)this.openlist.add(cnode.child1);else{var t2=ray.aabbsect(cnode.child1.aabb);t2>=0&&t2<ray.maxdist&&this.openlist.add(cnode.child1)}if(null!=cnode.child2&&ray.aabbtest(cnode.child2.aabb))if(inf)this.openlist.add(cnode.child2);else{var t3=ray.aabbsect(cnode.child2.aabb);t3>=0&&t3<ray.maxdist&&this.openlist.add(cnode.child2)}}}return this.openlist.clear(),ret},zpp_nape.space.ZPP_DynAABBPhase.prototype.__class__=zpp_nape.space.ZPP_DynAABBPhase,zpp_nape.space.ZPP_Island=$hxClasses["zpp_nape.space.ZPP_Island"]=function(){this.waket=0,this.sleep=!1,this.comps=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.comps=new zpp_nape.util.ZNPList_ZPP_Component},zpp_nape.space.ZPP_Island.__name__=["zpp_nape","space","ZPP_Island"],zpp_nape.space.ZPP_Island.prototype.next=null,zpp_nape.space.ZPP_Island.prototype.elem=function(){return this},zpp_nape.space.ZPP_Island.prototype.begin=function(){return this.next},zpp_nape.space.ZPP_Island.prototype._inuse=null,zpp_nape.space.ZPP_Island.prototype.modified=null,zpp_nape.space.ZPP_Island.prototype.pushmod=null,zpp_nape.space.ZPP_Island.prototype.length=null,zpp_nape.space.ZPP_Island.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.space.ZPP_Island.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.space.ZPP_Island.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.space.ZPP_Island.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.space.ZPP_Island.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.space.ZPP_Island.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.space.ZPP_Island.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.space.ZPP_Island.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.space.ZPP_Island.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.space.ZPP_Island.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.space.ZPP_Island.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.space.ZPP_Island.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.space.ZPP_Island.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.space.ZPP_Island.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.space.ZPP_Island.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.space.ZPP_Island.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.space.ZPP_Island.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.space.ZPP_Island.prototype.clear=function(){},zpp_nape.space.ZPP_Island.prototype.inlined_clear=function(){},zpp_nape.space.ZPP_Island.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.space.ZPP_Island.prototype.empty=function(){return null==this.next},zpp_nape.space.ZPP_Island.prototype.size=function(){return this.length},zpp_nape.space.ZPP_Island.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.space.ZPP_Island.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.space.ZPP_Island.prototype.front=function(){return this.next},zpp_nape.space.ZPP_Island.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.space.ZPP_Island.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.space.ZPP_Island.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.space.ZPP_Island.prototype.comps=null,zpp_nape.space.ZPP_Island.prototype.sleep=null,zpp_nape.space.ZPP_Island.prototype.waket=null,zpp_nape.space.ZPP_Island.prototype.free=function(){},zpp_nape.space.ZPP_Island.prototype.alloc=function(){this.waket=0},zpp_nape.space.ZPP_Island.prototype.__class__=zpp_nape.space.ZPP_Island,zpp_nape.space.ZPP_Component=$hxClasses["zpp_nape.space.ZPP_Component"]=function(){this.woken=!1,this.waket=0,this.sleeping=!1,this.island=null,this.constraint=null,this.body=null,this.isBody=!1,this.rank=0,this.parent=null,this.next=null,this.sleeping=!1,this.island=null,this.parent=this,this.rank=0,this.woken=!1},zpp_nape.space.ZPP_Component.__name__=["zpp_nape","space","ZPP_Component"],zpp_nape.space.ZPP_Component.prototype.next=null,zpp_nape.space.ZPP_Component.prototype.parent=null,zpp_nape.space.ZPP_Component.prototype.rank=null,zpp_nape.space.ZPP_Component.prototype.isBody=null,zpp_nape.space.ZPP_Component.prototype.body=null,zpp_nape.space.ZPP_Component.prototype.constraint=null,zpp_nape.space.ZPP_Component.prototype.island=null,zpp_nape.space.ZPP_Component.prototype.sleeping=null,zpp_nape.space.ZPP_Component.prototype.waket=null,zpp_nape.space.ZPP_Component.prototype.woken=null,zpp_nape.space.ZPP_Component.prototype.free=function(){this.body=null,this.constraint=null},zpp_nape.space.ZPP_Component.prototype.alloc=function(){},zpp_nape.space.ZPP_Component.prototype.reset=function(){this.sleeping=!1,this.island=null,this.parent=this,this.rank=0},zpp_nape.space.ZPP_Component.prototype.__class__=zpp_nape.space.ZPP_Component,zpp_nape.space.ZPP_CallbackSet=$hxClasses["zpp_nape.space.ZPP_CallbackSet"]=function(){this.lazydel=!1,this.freed=!1,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.int2=null,this.int1=null,this.di=0,this.id=0,this.arbiters=new zpp_nape.util.ZNPList_ZPP_Arbiter},zpp_nape.space.ZPP_CallbackSet.__name__=["zpp_nape","space","ZPP_CallbackSet"],zpp_nape.space.ZPP_CallbackSet.get=function(i1,i2){var ret;return null==zpp_nape.space.ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.space.ZPP_CallbackSet:(ret=zpp_nape.space.ZPP_CallbackSet.zpp_pool,zpp_nape.space.ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.freed=!1,ret.lazydel=!1,ret.COLLISIONstate=1,ret.COLLISIONstamp=0,ret.SENSORstate=1,ret.SENSORstamp=0,ret.FLUIDstate=1,ret.FLUIDstamp=0,i1.id<i2.id?(ret.int1=i1,ret.int2=i2):(ret.int1=i2,ret.int2=i1),ret.id=ret.int1.id,ret.di=ret.int2.id,ret},zpp_nape.space.ZPP_CallbackSet.prototype.id=null,zpp_nape.space.ZPP_CallbackSet.prototype.di=null,zpp_nape.space.ZPP_CallbackSet.prototype.int1=null,zpp_nape.space.ZPP_CallbackSet.prototype.int2=null,zpp_nape.space.ZPP_CallbackSet.prototype.arbiters=null,zpp_nape.space.ZPP_CallbackSet.prototype.COLLISIONstate=null,zpp_nape.space.ZPP_CallbackSet.prototype.COLLISIONstamp=null,zpp_nape.space.ZPP_CallbackSet.prototype.SENSORstate=null,zpp_nape.space.ZPP_CallbackSet.prototype.SENSORstamp=null,zpp_nape.space.ZPP_CallbackSet.prototype.FLUIDstate=null,zpp_nape.space.ZPP_CallbackSet.prototype.FLUIDstamp=null,zpp_nape.space.ZPP_CallbackSet.prototype.next=null,zpp_nape.space.ZPP_CallbackSet.prototype.elem=function(){return this},zpp_nape.space.ZPP_CallbackSet.prototype.begin=function(){return this.next},zpp_nape.space.ZPP_CallbackSet.prototype._inuse=null,zpp_nape.space.ZPP_CallbackSet.prototype.modified=null,zpp_nape.space.ZPP_CallbackSet.prototype.pushmod=null,zpp_nape.space.ZPP_CallbackSet.prototype.length=null,zpp_nape.space.ZPP_CallbackSet.prototype.setbegin=function(i){this.next=i,this.modified=!0,this.pushmod=!0},zpp_nape.space.ZPP_CallbackSet.prototype.add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_add=function(o){o._inuse=!0;var temp=o;return temp.next=this.next,this.next=temp,this.modified=!0,this.length++,o},zpp_nape.space.ZPP_CallbackSet.prototype.addAll=function(x){for(var cx_ite=x.next;null!=cx_ite;){var i=cx_ite;this.add(i),cx_ite=cx_ite.next}},zpp_nape.space.ZPP_CallbackSet.prototype.insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_insert=function(cur,o){o._inuse=!0;var temp=o;return null==cur?(temp.next=this.next,this.next=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.space.ZPP_CallbackSet.prototype.pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_pop=function(){var ret=this.next;this.next=ret.next,ret._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.space.ZPP_CallbackSet.prototype.pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_pop_unsafe=function(){var ret=this.next;return this.pop(),ret},zpp_nape.space.ZPP_CallbackSet.prototype.remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.space.ZPP_CallbackSet.prototype.try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.next,ret=!1;null!=cur;){if(cur==obj){var old,ret1;null==pre?(ret1=(old=this.next).next,this.next=ret1,null==this.next&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_erase=function(pre){var old,ret;return null==pre?(ret=(old=this.next).next,this.next=ret,null==this.next&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0)),old._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.space.ZPP_CallbackSet.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.space.ZPP_CallbackSet.prototype.clear=function(){},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_clear=function(){},zpp_nape.space.ZPP_CallbackSet.prototype.reverse=function(){for(var cur=this.next,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.next=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.space.ZPP_CallbackSet.prototype.empty=function(){return null==this.next},zpp_nape.space.ZPP_CallbackSet.prototype.size=function(){return this.length},zpp_nape.space.ZPP_CallbackSet.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.next;null!=cx_ite;){var npite;if(cx_ite==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.front=function(){return this.next},zpp_nape.space.ZPP_CallbackSet.prototype.back=function(){for(var ret=this.next,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret},zpp_nape.space.ZPP_CallbackSet.prototype.iterator_at=function(ind){for(var ret=this.next;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.space.ZPP_CallbackSet.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it:null},zpp_nape.space.ZPP_CallbackSet.prototype.freed=null,zpp_nape.space.ZPP_CallbackSet.prototype.lazydel=null,zpp_nape.space.ZPP_CallbackSet.prototype.free=function(){this.int1=this.int2=null,this.id=this.di=-1,this.freed=!0},zpp_nape.space.ZPP_CallbackSet.prototype.alloc=function(){this.freed=!1,this.lazydel=!1,this.COLLISIONstate=1,this.COLLISIONstamp=0,this.SENSORstate=1,this.SENSORstamp=0,this.FLUIDstate=1,this.FLUIDstamp=0},zpp_nape.space.ZPP_CallbackSet.prototype.add_arb=function(x){var ret;ret=!1;for(var cx_ite=this.arbiters.head;null!=cx_ite;){var npite;if(cx_ite.elt==x){ret=!0;break}cx_ite=cx_ite.next}if(ret)return!1;var _this=this.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=x;var temp=ret1;return temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++,!0},zpp_nape.space.ZPP_CallbackSet.prototype.try_remove_arb=function(x){for(var _this=this.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==x){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.remove_arb=function(x){for(var _this=this.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==x){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.space.ZPP_CallbackSet.prototype.empty_arb=function(type){var retvar;retvar=!0;for(var cx_ite=this.arbiters.head;null!=cx_ite;){var x;if(0!=(cx_ite.elt.type&type)){retvar=!1;break}cx_ite=cx_ite.next}return retvar},zpp_nape.space.ZPP_CallbackSet.prototype.really_empty=function(){return null==this.arbiters.head},zpp_nape.space.ZPP_CallbackSet.prototype.sleeping=function(){var ret;ret=!0;for(var cx_ite=this.arbiters.head;null!=cx_ite;){var x;if(!cx_ite.elt.sleeping){ret=!1;break}cx_ite=cx_ite.next}return ret},zpp_nape.space.ZPP_CallbackSet.prototype.__class__=zpp_nape.space.ZPP_CallbackSet,zpp_nape.space.ZPP_CbSetManager=$hxClasses["zpp_nape.space.ZPP_CbSetManager"]=function(space){this.space=null,this.cbsets=null,null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?this.cbsets=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(this.cbsets=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=this.cbsets.next,this.cbsets.next=null),this.cbsets.lt=zpp_nape.callbacks.ZPP_CbSet.setlt,this.space=space},zpp_nape.space.ZPP_CbSetManager.__name__=["zpp_nape","space","ZPP_CbSetManager"],zpp_nape.space.ZPP_CbSetManager.prototype.cbsets=null,zpp_nape.space.ZPP_CbSetManager.prototype.space=null,zpp_nape.space.ZPP_CbSetManager.prototype.get=function(cbTypes){if(null==cbTypes.head)return null;var fake;null==zpp_nape.callbacks.ZPP_CbSet.zpp_pool?fake=new zpp_nape.callbacks.ZPP_CbSet:(fake=zpp_nape.callbacks.ZPP_CbSet.zpp_pool,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=fake.next,fake.next=null);var faketypes=fake.cbTypes;fake.cbTypes=cbTypes;var res=this.cbsets.find_weak(fake),ret;if(null!=res)ret=res.data;else{var set=zpp_nape.callbacks.ZPP_CbSet.get(cbTypes);this.cbsets.insert(set),set.manager=this,ret=set}fake.cbTypes=faketypes;var o=fake;for(o.listeners.clear(),o.zip_listeners=!0,o.bodylisteners.clear(),o.zip_bodylisteners=!0,o.conlisteners.clear(),o.zip_conlisteners=!0;null!=o.cbTypes.head;){var cb;o.cbTypes.pop_unsafe().cbsets.remove(o)}return o.next=zpp_nape.callbacks.ZPP_CbSet.zpp_pool,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=o,ret},zpp_nape.space.ZPP_CbSetManager.prototype.remove=function(set){for(this.cbsets.remove(set);null!=set.cbpairs.head;){var pair=set.cbpairs.pop_unsafe();pair.a!=pair.b&&(set==pair.a?pair.b.cbpairs.remove(pair):pair.a.cbpairs.remove(pair));var o=pair;o.a=o.b=null,o.listeners.clear(),o.next=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=o}set.manager=null},zpp_nape.space.ZPP_CbSetManager.prototype.clear=function(){},zpp_nape.space.ZPP_CbSetManager.prototype.validate=function(){if(!this.cbsets.empty()){for(var set_ite=this.cbsets.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var cb;if(set_ite.data.validate(),null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}},zpp_nape.space.ZPP_CbSetManager.prototype.pair=function(a,b){for(var ret=null,pairs,cx_ite=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head,ret1;null!=cx_ite;){var p=cx_ite.elt;if(p.a==a&&p.b==b||p.a==b&&p.b==a){ret=p;break}cx_ite=cx_ite.next}null==ret&&(null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b)?(ret1.a=a,ret1.b=b):(ret1.a=b,ret1.b=a),ret=ret1,a.cbpairs.add(ret),b!=a&&b.cbpairs.add(ret));return ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate()),ret},zpp_nape.space.ZPP_CbSetManager.prototype.valid_listener=function(i){return i.space==this.space},zpp_nape.space.ZPP_CbSetManager.prototype.__class__=zpp_nape.space.ZPP_CbSetManager,zpp_nape.space.ZPP_Space=$hxClasses["zpp_nape.space.ZPP_Space"]=function(gravity,broadphase){var tmp;this.prelisteners=null,this.precb=null,this.continuous=!1,this.toiEvents=null,this.pre_dt=0,this.convexShapeList=null,this.cbsets=null,this.callbackset_list=null,this.callbacks=null,this.wrap_listeners=null,this.listeners=null,this.islands=null,this.staticsleep=null,this.wrap_livecon=null,this.live_constraints=null,this.wrap_live=null,this.live=null,this.wrap_arbiters=null,this.s_arbiters=null,this.f_arbiters=null,this.c_arbiters_false=null,this.c_arbiters_true=null,this.sortcontacts=!1,this.time=0,this.midstep=!1,this.stamp=0,this.global_ang_drag=0,this.global_lin_drag=0,this.__static=null,this.bphase=null,this.kinematics=null,this.wrap_constraints=null,this.constraints=null,this.wrap_compounds=null,this.compounds=null,this.wrap_bodies=null,this.bodies=null,this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.userData=null,this.outer=null,this.toiEvents=new zpp_nape.util.ZNPList_ZPP_ToiEvent,this.global_lin_drag=.015,this.global_ang_drag=.015,zpp_nape.callbacks.ZPP_Callback.internal=!0,this.precb=new nape.callbacks.PreCallback,this.precb.zpp_inner=new zpp_nape.callbacks.ZPP_Callback,zpp_nape.callbacks.ZPP_Callback.internal=!1,this.sortcontacts=!0,this.pre_dt=0,null!=broadphase?(null==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),tmp=broadphase==zpp_nape.util.ZPP_Flags.Broadphase_DYNAMIC_AABB_TREE):tmp=!0,tmp?this.bphase=new zpp_nape.space.ZPP_DynAABBPhase(this):(null==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE=new nape.space.Broadphase,zpp_nape.util.ZPP_Flags.internal=!1),broadphase==zpp_nape.util.ZPP_Flags.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new zpp_nape.space.ZPP_SweepPhase(this))),this.time=0;var me=this;null!=gravity?(this.gravityx=gravity.x,this.gravityy=gravity.y):(this.gravityx=0,this.gravityy=0),this.bodies=new zpp_nape.util.ZNPList_ZPP_Body,this.wrap_bodies=zpp_nape.util.ZPP_BodyList.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber),this.wrap_bodies.zpp_inner._modifiable=$bind(this,this.bodies_modifiable),this.compounds=new zpp_nape.util.ZNPList_ZPP_Compound,this.wrap_compounds=zpp_nape.util.ZPP_CompoundList.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber),this.wrap_compounds.zpp_inner._modifiable=$bind(this,this.compounds_modifiable),this.kinematics=new zpp_nape.util.ZNPList_ZPP_Body,this.c_arbiters_true=new zpp_nape.util.ZNPList_ZPP_ColArbiter,this.c_arbiters_false=new zpp_nape.util.ZNPList_ZPP_ColArbiter,this.f_arbiters=new zpp_nape.util.ZNPList_ZPP_FluidArbiter,this.s_arbiters=new zpp_nape.util.ZNPList_ZPP_SensorArbiter,this.islands=new zpp_nape.space.ZPP_Island,this.live=new zpp_nape.util.ZNPList_ZPP_Body,this.wrap_live=zpp_nape.util.ZPP_BodyList.get(this.live,!0),this.staticsleep=new zpp_nape.util.ZNPList_ZPP_Body,this.constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.wrap_constraints=zpp_nape.util.ZPP_ConstraintList.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber),this.wrap_constraints.zpp_inner._modifiable=$bind(this,this.constraints_modifiable),this.live_constraints=new zpp_nape.util.ZNPList_ZPP_Constraint,this.wrap_livecon=zpp_nape.util.ZPP_ConstraintList.get(this.live_constraints,!0),this.__static=zpp_nape.phys.ZPP_Body.__static(),this.__static.zpp_inner.space=this,this.callbacks=new zpp_nape.callbacks.ZPP_Callback,this.midstep=!1,this.listeners=new zpp_nape.util.ZNPList_ZPP_Listener,this.wrap_listeners=zpp_nape.util.ZPP_ListenerList.get(this.listeners),this.wrap_listeners.zpp_inner.adder=$bind(this,this.listeners_adder),this.wrap_listeners.zpp_inner.subber=$bind(this,this.listeners_subber),this.wrap_listeners.zpp_inner._modifiable=$bind(this,this.listeners_modifiable),this.callbackset_list=new zpp_nape.space.ZPP_CallbackSet,this.mrca1=new zpp_nape.util.ZNPList_ZPP_Interactor,this.mrca2=new zpp_nape.util.ZNPList_ZPP_Interactor,this.prelisteners=new zpp_nape.util.ZNPList_ZPP_InteractionListener,this.cbsets=new zpp_nape.space.ZPP_CbSetManager(this)},zpp_nape.space.ZPP_Space.__name__=["zpp_nape","space","ZPP_Space"],zpp_nape.space.ZPP_Space.prototype.outer=null,zpp_nape.space.ZPP_Space.prototype.userData=null,zpp_nape.space.ZPP_Space.prototype.gravityx=null,zpp_nape.space.ZPP_Space.prototype.gravityy=null,zpp_nape.space.ZPP_Space.prototype.wrap_gravity=null,zpp_nape.space.ZPP_Space.prototype.getgravity=function(){var x=this.gravityx,y=this.gravityy,ret;if(null==y&&(y=0),null==x&&(x=0),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x,ret1.y=y,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=ret.zpp_inner,tmp;if(_this._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this._isimmutable&&_this._isimmutable(),x!=x||y!=y)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=ret.zpp_inner;if(null!=_this1._validate&&_this1._validate(),ret.zpp_inner.x==x){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this2=ret.zpp_inner;null!=_this2._validate&&_this2._validate(),tmp=ret.zpp_inner.y==y}else tmp=!1;if(!tmp){ret.zpp_inner.x=x,ret.zpp_inner.y=y;var _this3=ret.zpp_inner;null!=_this3._invalidate&&_this3._invalidate(_this3)}}ret.zpp_inner.weak=!1,this.wrap_gravity=ret,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$bind(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$bind(this,this.gravity_validate)},zpp_nape.space.ZPP_Space.prototype.gravity_invalidate=function(x){if(this.midstep)throw new js._Boot.HaxeError("Error: Space::gravity cannot be set during space step");this.gravityx=x.x,this.gravityy=x.y;for(var stack=new zpp_nape.util.ZNPList_ZPP_Compound,cx_ite=this.bodies.head;null!=cx_ite;){var x1,o=cx_ite.elt;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!1)),cx_ite=cx_ite.next}for(var cx_ite1=this.compounds.head;null!=cx_ite1;){var i=cx_ite1.elt;stack.add(i),cx_ite1=cx_ite1.next}for(;null!=stack.head;){for(var s=stack.pop_unsafe(),cx_ite2=s.bodies.head;null!=cx_ite2;){var x2,o1=cx_ite2.elt;o1.world||(o1.component.waket=this.stamp+(this.midstep?0:1),3==o1.type&&(o1.kinematicDelaySleep=!0),o1.component.sleeping&&this.really_wake(o1,!1)),cx_ite2=cx_ite2.next}for(var cx_ite3=s.compounds.head;null!=cx_ite3;){var i1=cx_ite3.elt;stack.add(i1),cx_ite3=cx_ite3.next}}},zpp_nape.space.ZPP_Space.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},zpp_nape.space.ZPP_Space.prototype.bodies=null,zpp_nape.space.ZPP_Space.prototype.wrap_bodies=null,zpp_nape.space.ZPP_Space.prototype.compounds=null,zpp_nape.space.ZPP_Space.prototype.wrap_compounds=null,zpp_nape.space.ZPP_Space.prototype.constraints=null,zpp_nape.space.ZPP_Space.prototype.wrap_constraints=null,zpp_nape.space.ZPP_Space.prototype.kinematics=null,zpp_nape.space.ZPP_Space.prototype.bphase=null,zpp_nape.space.ZPP_Space.prototype.__static=null,zpp_nape.space.ZPP_Space.prototype.global_lin_drag=null,zpp_nape.space.ZPP_Space.prototype.global_ang_drag=null,zpp_nape.space.ZPP_Space.prototype.stamp=null,zpp_nape.space.ZPP_Space.prototype.midstep=null,zpp_nape.space.ZPP_Space.prototype.time=null,zpp_nape.space.ZPP_Space.prototype.sortcontacts=null,zpp_nape.space.ZPP_Space.prototype.c_arbiters_true=null,zpp_nape.space.ZPP_Space.prototype.c_arbiters_false=null,zpp_nape.space.ZPP_Space.prototype.f_arbiters=null,zpp_nape.space.ZPP_Space.prototype.s_arbiters=null,zpp_nape.space.ZPP_Space.prototype.wrap_arbiters=null,zpp_nape.space.ZPP_Space.prototype.live=null,zpp_nape.space.ZPP_Space.prototype.wrap_live=null,zpp_nape.space.ZPP_Space.prototype.live_constraints=null,zpp_nape.space.ZPP_Space.prototype.wrap_livecon=null,zpp_nape.space.ZPP_Space.prototype.staticsleep=null,zpp_nape.space.ZPP_Space.prototype.islands=null,zpp_nape.space.ZPP_Space.prototype.listeners=null,zpp_nape.space.ZPP_Space.prototype.wrap_listeners=null,zpp_nape.space.ZPP_Space.prototype.callbacks=null,zpp_nape.space.ZPP_Space.prototype.callbackset_list=null,zpp_nape.space.ZPP_Space.prototype.cbsets=null,zpp_nape.space.ZPP_Space.prototype.clear=function(){for(;null!=this.listeners.head;){var c=this.listeners.pop_unsafe();this.remListener(c)}for(;null!=this.callbackset_list.next;){var c1=this.callbackset_list.pop_unsafe();c1.arbiters.clear();var o=c1;o.int1=o.int2=null,o.id=o.di=-1,o.freed=!0,o.next=zpp_nape.space.ZPP_CallbackSet.zpp_pool,zpp_nape.space.ZPP_CallbackSet.zpp_pool=o}for(;null!=this.c_arbiters_true.head;){var arb=this.c_arbiters_true.pop_unsafe();if(!arb.cleared){for(var _this=arb.b1.arbiters,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==arb){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o1=old;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=arb.b2.arbiters,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==arb){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o2=old1;o2.elt=null,o2.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o2,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}null!=arb.pair&&(arb.pair.arb=null,arb.pair=null)}for(arb.b1=arb.b2=null,arb.active=!1,arb.intchange=!1;null!=arb.contacts.next;){var _this2=arb.contacts,ret4=_this2.next;_this2.pop();var o3=ret4;o3.arbiter=null,o3.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o3;var _this3=arb.innards,ret5=_this3.next;_this3.next=ret5.next,ret5._inuse=!1,null==_this3.next&&(_this3.pushmod=!0),_this3.modified=!0,_this3.length--}var o4=arb;o4.userdef_dyn_fric=!1,o4.userdef_stat_fric=!1,o4.userdef_restitution=!1,o4.userdef_rfric=!1,o4.__ref_edge1=o4.__ref_edge2=null,o4.next=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=o4,arb.pre_dt=-1}for(;null!=this.c_arbiters_false.head;){var arb1=this.c_arbiters_false.pop_unsafe();if(!arb1.cleared){for(var _this4=arb1.b1.arbiters,pre2=null,cur2=_this4.head,ret6=!1;null!=cur2;){if(cur2.elt==arb1){var old2,ret7;null==pre2?(ret7=(old2=_this4.head).next,_this4.head=ret7,null==_this4.head&&(_this4.pushmod=!0)):(ret7=(old2=pre2.next).next,pre2.next=ret7,null==ret7&&(_this4.pushmod=!0));var o5=old2;o5.elt=null,o5.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o5,_this4.modified=!0,_this4.length--,_this4.pushmod=!0,ret6=!0;break}pre2=cur2,cur2=cur2.next}for(var _this5=arb1.b2.arbiters,pre3=null,cur3=_this5.head,ret8=!1;null!=cur3;){if(cur3.elt==arb1){var old3,ret9;null==pre3?(ret9=(old3=_this5.head).next,_this5.head=ret9,null==_this5.head&&(_this5.pushmod=!0)):(ret9=(old3=pre3.next).next,pre3.next=ret9,null==ret9&&(_this5.pushmod=!0));var o6=old3;o6.elt=null,o6.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o6,_this5.modified=!0,_this5.length--,_this5.pushmod=!0,ret8=!0;break}pre3=cur3,cur3=cur3.next}null!=arb1.pair&&(arb1.pair.arb=null,arb1.pair=null)}for(arb1.b1=arb1.b2=null,arb1.active=!1,arb1.intchange=!1;null!=arb1.contacts.next;){var _this6=arb1.contacts,ret10=_this6.next;_this6.pop();var o7=ret10;o7.arbiter=null,o7.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o7;var _this7=arb1.innards,ret11=_this7.next;_this7.next=ret11.next,ret11._inuse=!1,null==_this7.next&&(_this7.pushmod=!0),_this7.modified=!0,_this7.length--}var o8=arb1;o8.userdef_dyn_fric=!1,o8.userdef_stat_fric=!1,o8.userdef_restitution=!1,o8.userdef_rfric=!1,o8.__ref_edge1=o8.__ref_edge2=null,o8.next=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=o8,arb1.pre_dt=-1}for(;null!=this.s_arbiters.head;){var arb2=this.s_arbiters.pop_unsafe();if(!arb2.cleared){for(var _this8=arb2.b1.arbiters,pre4=null,cur4=_this8.head,ret12=!1;null!=cur4;){if(cur4.elt==arb2){var old4,ret13;null==pre4?(ret13=(old4=_this8.head).next,_this8.head=ret13,null==_this8.head&&(_this8.pushmod=!0)):(ret13=(old4=pre4.next).next,pre4.next=ret13,null==ret13&&(_this8.pushmod=!0));var o9=old4;o9.elt=null,o9.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o9,_this8.modified=!0,_this8.length--,_this8.pushmod=!0,ret12=!0;break}pre4=cur4,cur4=cur4.next}for(var _this9=arb2.b2.arbiters,pre5=null,cur5=_this9.head,ret14=!1;null!=cur5;){if(cur5.elt==arb2){var old5,ret15;null==pre5?(ret15=(old5=_this9.head).next,_this9.head=ret15,null==_this9.head&&(_this9.pushmod=!0)):(ret15=(old5=pre5.next).next,pre5.next=ret15,null==ret15&&(_this9.pushmod=!0));var o10=old5;o10.elt=null,o10.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o10,_this9.modified=!0,_this9.length--,_this9.pushmod=!0,ret14=!0;break}pre5=cur5,cur5=cur5.next}null!=arb2.pair&&(arb2.pair.arb=null,arb2.pair=null)}arb2.b1=arb2.b2=null,arb2.active=!1,arb2.intchange=!1;var o11=arb2;o11.next=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=o11}for(;null!=this.f_arbiters.head;){var arb3=this.f_arbiters.pop_unsafe();if(!arb3.cleared){for(var _this10=arb3.b1.arbiters,pre6=null,cur6=_this10.head,ret16=!1;null!=cur6;){if(cur6.elt==arb3){var old6,ret17;null==pre6?(ret17=(old6=_this10.head).next,_this10.head=ret17,null==_this10.head&&(_this10.pushmod=!0)):(ret17=(old6=pre6.next).next,pre6.next=ret17,null==ret17&&(_this10.pushmod=!0));var o12=old6;o12.elt=null,o12.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o12,_this10.modified=!0,_this10.length--,_this10.pushmod=!0,ret16=!0;break}pre6=cur6,cur6=cur6.next}for(var _this11=arb3.b2.arbiters,pre7=null,cur7=_this11.head,ret18=!1;null!=cur7;){if(cur7.elt==arb3){var old7,ret19;null==pre7?(ret19=(old7=_this11.head).next,_this11.head=ret19,null==_this11.head&&(_this11.pushmod=!0)):(ret19=(old7=pre7.next).next,pre7.next=ret19,null==ret19&&(_this11.pushmod=!0));var o13=old7;o13.elt=null,o13.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o13,_this11.modified=!0,_this11.length--,_this11.pushmod=!0,ret18=!0;break}pre7=cur7,cur7=cur7.next}null!=arb3.pair&&(arb3.pair.arb=null,arb3.pair=null)}arb3.b1=arb3.b2=null,arb3.active=!1,arb3.intchange=!1;var o14=arb3;o14.next=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=o14,arb3.pre_dt=-1}for(this.bphase.clear();null!=this.bodies.head;){var b=this.bodies.pop_unsafe();if(null!=b.component){var i=b.component.island;if(null!=i){for(;null!=i.comps.head;){var c2=i.comps.pop_unsafe();c2.sleeping=!1,c2.island=null,c2.parent=c2,c2.rank=0}var o15=i;o15.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o15}}b.removedFromSpace(),b.space=null}for(;null!=this.constraints.head;){var c3=this.constraints.pop_unsafe();if(null!=c3.component){var i1=c3.component.island;if(null!=i1){for(;null!=i1.comps.head;){var c4=i1.comps.pop_unsafe();c4.sleeping=!1,c4.island=null,c4.parent=c4,c4.rank=0}var o16=i1;o16.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o16}}c3.removedFromSpace(),c3.space=null}this.kinematics.clear();for(var stack=new zpp_nape.util.ZNPList_ZPP_Compound;null!=this.compounds.head;){var c5=this.compounds.pop_unsafe();stack.add(c5)}for(;null!=stack.head;){var comp=stack.pop_unsafe();comp.removedFromSpace(),comp.space=null;for(var cx_ite=comp.bodies.head;null!=cx_ite;){var b1=cx_ite.elt;if(null!=b1.component){var i2=b1.component.island;if(null!=i2){for(;null!=i2.comps.head;){var c6=i2.comps.pop_unsafe();c6.sleeping=!1,c6.island=null,c6.parent=c6,c6.rank=0}var o17=i2;o17.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o17}}b1.removedFromSpace(),b1.space=null,cx_ite=cx_ite.next}for(var cx_ite1=comp.constraints.head;null!=cx_ite1;){var c7=cx_ite1.elt;if(null!=c7.component){var i3=c7.component.island;if(null!=i3){for(;null!=i3.comps.head;){var c8=i3.comps.pop_unsafe();c8.sleeping=!1,c8.island=null,c8.parent=c8,c8.rank=0}var o18=i3;o18.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o18}}c7.removedFromSpace(),c7.space=null,cx_ite1=cx_ite1.next}for(var cx_ite2=comp.compounds.head;null!=cx_ite2;){var i4=cx_ite2.elt;stack.add(i4),cx_ite2=cx_ite2.next}}this.staticsleep.clear(),this.live.clear(),this.live_constraints.clear(),this.stamp=0,this.time=0,this.mrca1.clear(),this.mrca2.clear(),this.prelisteners.clear(),this.cbsets.clear()},zpp_nape.space.ZPP_Space.prototype.bodies_adder=function(x){if(null!=x.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");return x.zpp_inner.space!=this&&(null!=x.zpp_inner.space&&x.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(x),this.addBody(x.zpp_inner),!0)},zpp_nape.space.ZPP_Space.prototype.bodies_subber=function(x){this.remBody(x.zpp_inner)},zpp_nape.space.ZPP_Space.prototype.bodies_modifiable=function(){if(this.midstep)throw new js._Boot.HaxeError("Error: Space::bodies cannot be set during space step()")},zpp_nape.space.ZPP_Space.prototype.compounds_adder=function(x){if(null!=x.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");return x.zpp_inner.space!=this&&(null!=x.zpp_inner.space&&x.zpp_inner.space.wrap_compounds.remove(x),this.addCompound(x.zpp_inner),!0)},zpp_nape.space.ZPP_Space.prototype.compounds_subber=function(x){this.remCompound(x.zpp_inner)},zpp_nape.space.ZPP_Space.prototype.compounds_modifiable=function(){if(this.midstep)throw new js._Boot.HaxeError("Error: Space::compounds cannot be set during space step()")},zpp_nape.space.ZPP_Space.prototype.constraints_adder=function(x){if(null!=x.zpp_inner.compound)throw new js._Boot.HaxeError("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");return x.zpp_inner.space!=this&&(null!=x.zpp_inner.space&&x.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(x),this.addConstraint(x.zpp_inner),!0)},zpp_nape.space.ZPP_Space.prototype.constraints_subber=function(x){this.remConstraint(x.zpp_inner)},zpp_nape.space.ZPP_Space.prototype.constraints_modifiable=function(){if(this.midstep)throw new js._Boot.HaxeError("Error: Space::constraints cannot be set during space step()")},zpp_nape.space.ZPP_Space.prototype.listeners_adder=function(x){return x.zpp_inner.space!=this&&(null!=x.zpp_inner.space&&x.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(x),this.addListener(x.zpp_inner),!0)},zpp_nape.space.ZPP_Space.prototype.listeners_subber=function(x){this.remListener(x.zpp_inner)},zpp_nape.space.ZPP_Space.prototype.listeners_modifiable=function(){if(this.midstep)throw new js._Boot.HaxeError("Error: Space::listeners cannot be set during space step()")},zpp_nape.space.ZPP_Space.prototype.revoke_listener=function(x){},zpp_nape.space.ZPP_Space.prototype.unrevoke_listener=function(x){},zpp_nape.space.ZPP_Space.prototype.addListener=function(x){x.space=this,x.addedToSpace();var tmp=null!=x.interaction},zpp_nape.space.ZPP_Space.prototype.remListener=function(x){var tmp=null!=x.interaction;x.removedFromSpace(),x.space=null},zpp_nape.space.ZPP_Space.prototype.add_callbackset=function(cb){var _this=cb.int1.cbsets,ret;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.elt=cb;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++;var _this1=cb.int2.cbsets,ret1;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret1=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret1.next,ret1.next=null),ret1.elt=cb;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++;var _this2=this.callbackset_list;cb._inuse=!0;var temp2=cb;temp2.next=_this2.next,_this2.next=temp2,_this2.modified=!0,_this2.length++},zpp_nape.space.ZPP_Space.prototype.remove_callbackset=function(cb){cb.lazydel=!0;for(var _this=cb.int1.cbsets,pre=null,cur=_this.head,ret=!1;null!=cur;){if(cur.elt==cb){var old,ret1;null==pre?(ret1=(old=_this.head).next,_this.head=ret1,null==_this.head&&(_this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}for(var _this1=cb.int2.cbsets,pre1=null,cur1=_this1.head,ret2=!1;null!=cur1;){if(cur1.elt==cb){var old1,ret3;null==pre1?(ret3=(old1=_this1.head).next,_this1.head=ret3,null==_this1.head&&(_this1.pushmod=!0)):(ret3=(old1=pre1.next).next,pre1.next=ret3,null==ret3&&(_this1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,ret2=!0;break}pre1=cur1,cur1=cur1.next}},zpp_nape.space.ZPP_Space.prototype.transmitType=function(p,new_type){var o=p;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!1)),2==p.type?this.live.remove(p):3==p.type?(this.kinematics.remove(p),this.staticsleep.remove(p)):1==p.type&&this.staticsleep.remove(p),p.type=new_type,3==p.type&&this.kinematics.add(p),1==p.type&&this.static_validation(p),p.component.sleeping=!0;var o1=p;o1.world||(o1.component.waket=this.stamp+(this.midstep?0:1),3==o1.type&&(o1.kinematicDelaySleep=!0),o1.component.sleeping&&this.really_wake(o1,!0))},zpp_nape.space.ZPP_Space.prototype.added_shape=function(s,dontwake){if(null==dontwake&&(dontwake=!1),!dontwake){var o=s.body;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!1))}this.bphase.insert(s),s.addedToSpace()},zpp_nape.space.ZPP_Space.prototype.removed_shape=function(s,deleting){null==deleting&&(deleting=!1);var _gthis=this,body=s.body;deleting||body.wake();for(var pre=null,cx_ite=body.arbiters.head;null!=cx_ite;){var xarb=cx_ite.elt,rem;if(xarb.ws1==s||xarb.ws2==s){if(0!=xarb.present){this.MRCA_chains(xarb.ws1,xarb.ws2);for(var cx_ite1=this.mrca1.head;null!=cx_ite1;){for(var i1=cx_ite1.elt,cx_ite2=this.mrca2.head;null!=cx_ite2;){var i2=cx_ite2.elt,cb1=i1.cbSet,cb2=i2.cbSet;cb1.validate(),cb2.validate();for(var _this=cb1.manager,ret=null,pairs,cx_ite3=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret1;null!=cx_ite3;){var p=cx_ite3.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret=p;break}cx_ite3=cx_ite3.next}if(null==ret)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret1.a=cb1,ret1.b=cb2):(ret1.a=cb2,ret1.b=cb1),ret=ret1,cb1.cbpairs.add(ret),cb2!=cb1&&cb2.cbpairs.add(ret);if(ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate()),null!=ret.listeners.head){var callbackset=zpp_nape.phys.ZPP_Interactor.get(i1,i2);callbackset.remove_arb(xarb),xarb.present--;for(var _this1=cb1.manager,ret2=null,pairs1,cx_ite4=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret3;null!=cx_ite4;){var p1=cx_ite4.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret2=p1;break}cx_ite4=cx_ite4.next}if(null==ret2)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret3=new zpp_nape.callbacks.ZPP_CbSetPair:(ret3=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret3.next,ret3.next=null),ret3.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret3.a=cb1,ret3.b=cb2):(ret3.a=cb2,ret3.b=cb1),ret2=ret3,cb1.cbpairs.add(ret2),cb2!=cb1&&cb2.cbpairs.add(ret2);ret2.zip_listeners&&(ret2.zip_listeners=!1,ret2.__validate());for(var cx_ite5=ret2.listeners.head;null!=cx_ite5;){var x=cx_ite5.elt;if(1==x.event&&0!=(x.itype&xarb.type)&&callbackset.empty_arb(x.itype)){var cb=this.push_callback(x);cb.event=1;var o1=callbackset.int1,o2=callbackset.int2,tmp,_this2=x.options1,xs=o1.cbTypes;if(_this2.nonemptyintersection(xs,_this2.includes)&&!_this2.nonemptyintersection(xs,_this2.excludes)){var _this3=x.options2,xs1=o2.cbTypes;tmp=_this3.nonemptyintersection(xs1,_this3.includes)&&!_this3.nonemptyintersection(xs1,_this3.excludes)}else tmp=!1;tmp?(cb.int1=o1,cb.int2=o2):(cb.int1=o2,cb.int2=o1),cb.set=callbackset}cx_ite5=cx_ite5.next}null==callbackset.arbiters.head&&this.remove_callbackset(callbackset),cx_ite2=cx_ite2.next}else cx_ite2=cx_ite2.next}cx_ite1=cx_ite1.next}}if(xarb.b1!=body&&2==xarb.b1.type){var o=xarb.b1;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!1))}if(xarb.b2!=body&&2==xarb.b2.type){var o3=xarb.b2;o3.world||(o3.component.waket=this.stamp+(this.midstep?0:1),3==o3.type&&(o3.kinematicDelaySleep=!0),o3.component.sleeping&&this.really_wake(o3,!1))}if(xarb.cleared=!0,null==body||xarb.b2==body)for(var _this4=xarb.b1.arbiters,pre1=null,cur=_this4.head,ret4=!1;null!=cur;){if(cur.elt==xarb){var old,ret5;null==pre1?(ret5=(old=_this4.head).next,_this4.head=ret5,null==_this4.head&&(_this4.pushmod=!0)):(ret5=(old=pre1.next).next,pre1.next=ret5,null==ret5&&(_this4.pushmod=!0));var o4=old;o4.elt=null,o4.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o4,_this4.modified=!0,_this4.length--,_this4.pushmod=!0,ret4=!0;break}pre1=cur,cur=cur.next}if(null==body||xarb.b1==body)for(var _this5=xarb.b2.arbiters,pre2=null,cur1=_this5.head,ret6=!1;null!=cur1;){if(cur1.elt==xarb){var old1,ret7;null==pre2?(ret7=(old1=_this5.head).next,_this5.head=ret7,null==_this5.head&&(_this5.pushmod=!0)):(ret7=(old1=pre2.next).next,pre2.next=ret7,null==ret7&&(_this5.pushmod=!0));var o5=old1;o5.elt=null,o5.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o5,_this5.modified=!0,_this5.length--,_this5.pushmod=!0,ret6=!0;break}pre2=cur1,cur1=cur1.next}null!=xarb.pair&&(xarb.pair.arb=null,xarb.pair=null),xarb.active=!1,this.f_arbiters.modified=!0,cx_ite=body.arbiters.erase(pre)}else pre=cx_ite,cx_ite=cx_ite.next}this.bphase.remove(s),s.removedFromSpace()},zpp_nape.space.ZPP_Space.prototype.addConstraint=function(con){con.space=this,con.addedToSpace(),con.active&&(con.component.sleeping=!0,this.wake_constraint(con,!0))},zpp_nape.space.ZPP_Space.prototype.remConstraint=function(con){con.active&&(this.wake_constraint(con,!0),this.live_constraints.remove(con)),con.removedFromSpace(),con.space=null},zpp_nape.space.ZPP_Space.prototype.addCompound=function(x){x.space=this,x.addedToSpace();for(var cx_ite=x.bodies.head;null!=cx_ite;){var i=cx_ite.elt;this.addBody(i),cx_ite=cx_ite.next}for(var cx_ite1=x.constraints.head;null!=cx_ite1;){var i1=cx_ite1.elt;this.addConstraint(i1),cx_ite1=cx_ite1.next}for(var cx_ite2=x.compounds.head;null!=cx_ite2;){var i2=cx_ite2.elt;this.addCompound(i2),cx_ite2=cx_ite2.next}},zpp_nape.space.ZPP_Space.prototype.remCompound=function(x){for(var cx_ite=x.bodies.head;null!=cx_ite;){var i=cx_ite.elt;this.remBody(i),cx_ite=cx_ite.next}for(var cx_ite1=x.constraints.head;null!=cx_ite1;){var i1=cx_ite1.elt;this.remConstraint(i1),cx_ite1=cx_ite1.next}for(var cx_ite2=x.compounds.head;null!=cx_ite2;){var i2=cx_ite2.elt;this.remCompound(i2),cx_ite2=cx_ite2.next}x.removedFromSpace(),x.space=null},zpp_nape.space.ZPP_Space.prototype.addBody=function(body,flag){null==flag&&(flag=-1),body.space=this,body.addedToSpace(),body.component.sleeping=!0;var o=body;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!0));for(var cx_ite=body.shapes.head;null!=cx_ite;){var shape=cx_ite.elt,dontwake=!0;if(null==dontwake&&(dontwake=!1),!dontwake){var o1=shape.body;o1.world||(o1.component.waket=this.stamp+(this.midstep?0:1),3==o1.type&&(o1.kinematicDelaySleep=!0),o1.component.sleeping&&this.really_wake(o1,!1))}this.bphase.insert(shape),shape.addedToSpace(),cx_ite=cx_ite.next}1==body.type?this.static_validation(body):2!=body.type&&3!=flag&&this.kinematics.add(body)},zpp_nape.space.ZPP_Space.prototype.remBody=function(body,flag){if(null==flag&&(flag=-1),1==body.type){var o=body;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!0)),this.staticsleep.remove(body)}else if(2==body.type){var o1=body;o1.world||(o1.component.waket=this.stamp+(this.midstep?0:1),3==o1.type&&(o1.kinematicDelaySleep=!0),o1.component.sleeping&&this.really_wake(o1,!0)),this.live.remove(body)}else{3!=flag&&this.kinematics.remove(body);var o2=body;o2.world||(o2.component.waket=this.stamp+(this.midstep?0:1),3==o2.type&&(o2.kinematicDelaySleep=!0),o2.component.sleeping&&this.really_wake(o2,!0)),this.staticsleep.remove(body)}for(var cx_ite=body.shapes.head;null!=cx_ite;){var shape=cx_ite.elt;this.removed_shape(shape,!0),cx_ite=cx_ite.next}body.removedFromSpace(),body.space=null},zpp_nape.space.ZPP_Space.prototype.shapesUnderPoint=function(x,y,filter,output){return this.bphase.shapesUnderPoint(x,y,filter,output)},zpp_nape.space.ZPP_Space.prototype.bodiesUnderPoint=function(x,y,filter,output){return this.bphase.bodiesUnderPoint(x,y,filter,output)},zpp_nape.space.ZPP_Space.prototype.shapesInAABB=function(aabb,strict,cont,filter,output){return this.bphase.shapesInAABB(aabb.zpp_inner,strict,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.bodiesInAABB=function(aabb,strict,cont,filter,output){return this.bphase.bodiesInAABB(aabb.zpp_inner,strict,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.shapesInCircle=function(pos,rad,cont,filter,output){var tmp=this.bphase;if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=pos.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=pos.zpp_inner.x;if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=pos.zpp_inner;return null!=_this1._validate&&_this1._validate(),tmp.shapesInCircle(tmp1,pos.zpp_inner.y,rad,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.bodiesInCircle=function(pos,rad,cont,filter,output){var tmp=this.bphase;if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this=pos.zpp_inner;null!=_this._validate&&_this._validate();var tmp1=pos.zpp_inner.x;if(null!=pos&&pos.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this1=pos.zpp_inner;return null!=_this1._validate&&_this1._validate(),tmp.bodiesInCircle(tmp1,pos.zpp_inner.y,rad,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.shapesInShape=function(shape,cont,filter,output){return this.bphase.shapesInShape(shape,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.bodiesInShape=function(shape,cont,filter,output){return this.bphase.bodiesInShape(shape,cont,filter,output)},zpp_nape.space.ZPP_Space.prototype.rayCast=function(ray,inner,filter){return this.bphase.rayCast(ray.zpp_inner,inner,null==filter?null:filter.zpp_inner)},zpp_nape.space.ZPP_Space.prototype.rayMultiCast=function(ray,inner,filter,output){return this.bphase.rayMultiCast(ray.zpp_inner,inner,null==filter?null:filter.zpp_inner,output)},zpp_nape.space.ZPP_Space.prototype.convexShapeList=null,zpp_nape.space.ZPP_Space.prototype.convexCast=function(shape,deltaTime,filter,dynamics){var toi;if(null==zpp_nape.geom.ZPP_ToiEvent.zpp_pool?toi=new zpp_nape.geom.ZPP_ToiEvent:(toi=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=toi.next,toi.next=null),toi.failed=!1,toi.s1=toi.s2=null,toi.arbiter=null,0==shape.type){var _this=shape.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}else{var _this3=shape.polygon;if(_this3.zip_gaxi&&null!=_this3.body){_this3.zip_gaxi=!1,_this3.validate_laxi();var _this4=_this3.body;if(_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot)),_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}var ite=_this3.edges.head,cx_ite2=_this3.gverts.next,u1=cx_ite2;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var v1=cx_ite2,e=ite.elt;ite=ite.next,e.gp0=u1,e.gp1=v1,e.gnormx=_this3.body.axisy*e.lnormx-_this3.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this3.body.axisx+e.lnormy*_this3.body.axisy,e.gprojection=_this3.body.posx*e.gnormx+_this3.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u1=v1,cx_ite2=cx_ite2.next}var v2=_this3.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u1,e1.gp1=v2,e1.gnormx=_this3.body.axisy*e1.lnormx-_this3.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this3.body.axisx+e1.lnormy*_this3.body.axisy,e1.gprojection=_this3.body.posx*e1.gnormx+_this3.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}var body=shape.body,prex=body.posx,prey=body.posy;body.sweepTime=0,body.sweep_angvel=body.angvel;var delta=deltaTime-body.sweepTime;if(0!=delta){body.sweepTime=deltaTime;var t3=delta;if(body.posx+=body.velx*t3,body.posy+=body.vely*t3,0!=body.angvel){var dr=body.sweep_angvel*delta;if(body.rot+=dr,dr*dr>1e-4)body.axisx=Math.sin(body.rot),body.axisy=Math.cos(body.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*body.axisx+dr*body.axisy)*m;body.axisy=(p*body.axisy-dr*body.axisx)*m,body.axisx=nx}}}var postx=body.posx,posty=body.posy;shape.validate_sweepRadius();var rad=shape.sweepRadius,aabb;null==zpp_nape.geom.ZPP_AABB.zpp_pool?aabb=new zpp_nape.geom.ZPP_AABB:(aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=aabb.next,aabb.next=null);var x=prex,y=postx;aabb.minx=(x<y?x:y)-rad;var x1=prex,y1=postx;aabb.maxx=(x1>y1?x1:y1)+rad;var x2=prey,y2=posty;aabb.miny=(x2<y2?x2:y2)-rad;var x3=prey,y3=posty;aabb.maxy=(x3>y3?x3:y3)+rad;var list=this.convexShapeList=this.bphase.shapesInAABB(aabb,!1,!1,null==filter?null:filter.zpp_inner,this.convexShapeList),o=aabb;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o;var minAxisx=0,minAxisy=0;minAxisx=0,minAxisy=0;var minPosx=0,minPosy=0;minPosx=0,minPosy=0;var mins=null,mint=deltaTime+1;list.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(list);;){_g.zpp_inner.zpp_inner.valmod();var _this6=_g.zpp_inner;_this6.zpp_inner.valmod(),_this6.zpp_inner.zip_length&&(_this6.zpp_inner.zip_length=!1,_this6.zpp_inner.user_length=_this6.zpp_inner.inner.length);var length=_this6.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var s=_g.zpp_inner.at(_g.zpp_i++);if(s!=shape.outer&&(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null)!=body.outer){if(toi.s1=shape,toi.s2=s.zpp_inner,dynamics){s.zpp_inner.validate_sweepRadius(),(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,zpp_nape.geom.ZPP_SweepDistance.dynamicSweep(toi,deltaTime,0,0,!0);var _this7=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner,delta1=0-_this7.sweepTime;if(0!=delta1){_this7.sweepTime=0;var t4=delta1;if(_this7.posx+=_this7.velx*t4,_this7.posy+=_this7.vely*t4,0!=_this7.angvel){var dr1=_this7.sweep_angvel*delta1;if(_this7.rot+=dr1,dr1*dr1>1e-4)_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this7.axisx+dr1*_this7.axisy)*m1;_this7.axisy=(p1*_this7.axisy-dr1*_this7.axisx)*m1,_this7.axisx=nx1}}}var _this8=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner,s1=s.zpp_inner;if(0==s1.type)s1.worldCOMx=_this8.posx+(_this8.axisy*s1.localCOMx-_this8.axisx*s1.localCOMy),s1.worldCOMy=_this8.posy+(s1.localCOMx*_this8.axisx+s1.localCOMy*_this8.axisy);else{for(var p2=s1.polygon,li1=p2.lverts.next,cx_ite3=p2.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=_this8.posx+(_this8.axisy*l1.x-_this8.axisx*l1.y),g1.y=_this8.posy+(l1.x*_this8.axisx+l1.y*_this8.axisy),cx_ite3=cx_ite3.next}var ite1=p2.edges.head,cx_ite4=p2.gverts.next,u2=cx_ite4;for(cx_ite4=cx_ite4.next;null!=cx_ite4;){var v3=cx_ite4,e2=ite1.elt;ite1=ite1.next,e2.gnormx=_this8.axisy*e2.lnormx-_this8.axisx*e2.lnormy,e2.gnormy=e2.lnormx*_this8.axisx+e2.lnormy*_this8.axisy,e2.gprojection=_this8.posx*e2.gnormx+_this8.posy*e2.gnormy+e2.lprojection,e2.tp0=u2.y*e2.gnormx-u2.x*e2.gnormy,e2.tp1=v3.y*e2.gnormx-v3.x*e2.gnormy,u2=v3,cx_ite4=cx_ite4.next}var v4=p2.gverts.next,e3=ite1.elt;ite1=ite1.next,e3.gnormx=_this8.axisy*e3.lnormx-_this8.axisx*e3.lnormy,e3.gnormy=e3.lnormx*_this8.axisx+e3.lnormy*_this8.axisy,e3.gprojection=_this8.posx*e3.gnormx+_this8.posy*e3.gnormy+e3.lprojection,e3.tp0=u2.y*e3.gnormx-u2.x*e3.gnormy,e3.tp1=v4.y*e3.gnormx-v4.x*e3.gnormy}}else zpp_nape.geom.ZPP_SweepDistance.staticSweep(toi,deltaTime,0,0);toi.toi*=deltaTime,toi.toi>0&&toi.toi<mint&&(mint=toi.toi,minAxisx=toi.axis.x,minAxisy=toi.axis.y,minPosx=toi.c2.x,minPosy=toi.c2.y,mins=s)}}list.clear();var o1=toi;o1.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o1;var delta2=0-body.sweepTime;if(0!=delta2){body.sweepTime=0;var t5=delta2;if(body.posx+=body.velx*t5,body.posy+=body.vely*t5,0!=body.angvel){var dr2=body.sweep_angvel*delta2;if(body.rot+=dr2,dr2*dr2>1e-4)body.axisx=Math.sin(body.rot),body.axisy=Math.cos(body.rot);else{var d22=dr2*dr2,p3=1-.5*d22,m2=1-d22*d22/8,nx2=(p3*body.axisx+dr2*body.axisy)*m2;body.axisy=(p3*body.axisy-dr2*body.axisx)*m2,body.axisx=nx2}}}if(0==shape.type)shape.worldCOMx=body.posx+(body.axisy*shape.localCOMx-body.axisx*shape.localCOMy),shape.worldCOMy=body.posy+(shape.localCOMx*body.axisx+shape.localCOMy*body.axisy);else{for(var p4=shape.polygon,li2=p4.lverts.next,cx_ite5=p4.gverts.next;null!=cx_ite5;){var g2=cx_ite5,l2=li2;li2=li2.next,g2.x=body.posx+(body.axisy*l2.x-body.axisx*l2.y),g2.y=body.posy+(l2.x*body.axisx+l2.y*body.axisy),cx_ite5=cx_ite5.next}var ite2=p4.edges.head,cx_ite6=p4.gverts.next,u3=cx_ite6;for(cx_ite6=cx_ite6.next;null!=cx_ite6;){var v5=cx_ite6,e4=ite2.elt;ite2=ite2.next,e4.gnormx=body.axisy*e4.lnormx-body.axisx*e4.lnormy,e4.gnormy=e4.lnormx*body.axisx+e4.lnormy*body.axisy,e4.gprojection=body.posx*e4.gnormx+body.posy*e4.gnormy+e4.lprojection,e4.tp0=u3.y*e4.gnormx-u3.x*e4.gnormy,e4.tp1=v5.y*e4.gnormx-v5.x*e4.gnormy,u3=v5,cx_ite6=cx_ite6.next}var v6=p4.gverts.next,e5=ite2.elt;ite2=ite2.next,e5.gnormx=body.axisy*e5.lnormx-body.axisx*e5.lnormy,e5.gnormy=e5.lnormx*body.axisx+e5.lnormy*body.axisy,e5.gprojection=body.posx*e5.gnormx+body.posy*e5.gnormy+e5.lprojection,e5.tp0=u3.y*e5.gnormx-u3.x*e5.gnormy,e5.tp1=v6.y*e5.gnormx-v6.x*e5.gnormy}if(mint<=deltaTime){var x4=-minAxisx,y4=-minAxisy,ret;if(null==y4&&(y4=0),null==x4&&(x4=0),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret=new nape.geom.Vec2:(ret=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret.zpp_pool,ret.zpp_pool=null,ret.zpp_disp=!1,ret==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret.zpp_inner){var ret1;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret1=new zpp_nape.geom.ZPP_Vec2:(ret1=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret1.next,ret1.next=null),ret1.weak=!1,ret1._immutable=!1,ret1.x=x4,ret1.y=y4,ret.zpp_inner=ret1,ret.zpp_inner.outer=ret}else{if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=ret.zpp_inner,tmp1;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret.zpp_inner;if(null!=_this10._validate&&_this10._validate(),ret.zpp_inner.x==x4){if(null!=ret&&ret.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=ret.zpp_inner;null!=_this11._validate&&_this11._validate(),tmp1=ret.zpp_inner.y==y4}else tmp1=!1;if(!tmp1){ret.zpp_inner.x=x4,ret.zpp_inner.y=y4;var _this12=ret.zpp_inner;null!=_this12._invalidate&&_this12._invalidate(_this12)}}ret.zpp_inner.weak=!1;var x5=minPosx,y5=minPosy,ret2;if(null==y5&&(y5=0),null==x5&&(x5=0),x5!=x5||y5!=y5)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret2=new nape.geom.Vec2:(ret2=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret2.zpp_pool,ret2.zpp_pool=null,ret2.zpp_disp=!1,ret2==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret2.zpp_inner){var ret3;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret3=new zpp_nape.geom.ZPP_Vec2:(ret3=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret3.next,ret3.next=null),ret3.weak=!1,ret3._immutable=!1,ret3.x=x5,ret3.y=y5,ret2.zpp_inner=ret3,ret2.zpp_inner.outer=ret2}else{if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret2.zpp_inner,tmp2;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x5!=x5||y5!=y5)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret2.zpp_inner;if(null!=_this14._validate&&_this14._validate(),ret2.zpp_inner.x==x5){if(null!=ret2&&ret2.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=ret2.zpp_inner;null!=_this15._validate&&_this15._validate(),tmp2=ret2.zpp_inner.y==y5}else tmp2=!1;if(!tmp2){ret2.zpp_inner.x=x5,ret2.zpp_inner.y=y5;var _this16=ret2.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}}return ret2.zpp_inner.weak=!1,zpp_nape.geom.ZPP_ConvexRayResult.getConvex(ret,ret2,mint,mins)}return null},zpp_nape.space.ZPP_Space.prototype.prepareCast=function(s){if(0==s.type){var _this=s.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}else{var _this3=s.polygon;if(_this3.zip_gaxi&&null!=_this3.body){_this3.zip_gaxi=!1,_this3.validate_laxi();var _this4=_this3.body;if(_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot)),_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}var ite=_this3.edges.head,cx_ite2=_this3.gverts.next,u1=cx_ite2;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var v1=cx_ite2,e=ite.elt;ite=ite.next,e.gp0=u1,e.gp1=v1,e.gnormx=_this3.body.axisy*e.lnormx-_this3.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this3.body.axisx+e.lnormy*_this3.body.axisy,e.gprojection=_this3.body.posx*e.gnormx+_this3.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u1=v1,cx_ite2=cx_ite2.next}var v2=_this3.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u1,e1.gp1=v2,e1.gnormx=_this3.body.axisy*e1.lnormx-_this3.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this3.body.axisx+e1.lnormy*_this3.body.axisy,e1.gprojection=_this3.body.posx*e1.gnormx+_this3.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}},zpp_nape.space.ZPP_Space.prototype.convexMultiCast=function(shape,deltaTime,filter,dynamics,output){var toi;if(null==zpp_nape.geom.ZPP_ToiEvent.zpp_pool?toi=new zpp_nape.geom.ZPP_ToiEvent:(toi=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=toi.next,toi.next=null),toi.failed=!1,toi.s1=toi.s2=null,toi.arbiter=null,0==shape.type){var _this=shape.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}else{var _this3=shape.polygon;if(_this3.zip_gaxi&&null!=_this3.body){_this3.zip_gaxi=!1,_this3.validate_laxi();var _this4=_this3.body;if(_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot)),_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this5=_this3.body;_this5.zip_axis&&(_this5.zip_axis=!1,_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}var ite=_this3.edges.head,cx_ite2=_this3.gverts.next,u1=cx_ite2;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var v1=cx_ite2,e=ite.elt;ite=ite.next,e.gp0=u1,e.gp1=v1,e.gnormx=_this3.body.axisy*e.lnormx-_this3.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this3.body.axisx+e.lnormy*_this3.body.axisy,e.gprojection=_this3.body.posx*e.gnormx+_this3.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u1=v1,cx_ite2=cx_ite2.next}var v2=_this3.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u1,e1.gp1=v2,e1.gnormx=_this3.body.axisy*e1.lnormx-_this3.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this3.body.axisx+e1.lnormy*_this3.body.axisy,e1.gprojection=_this3.body.posx*e1.gnormx+_this3.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}var body=shape.body,prex=body.posx,prey=body.posy;body.sweepTime=0,body.sweep_angvel=body.angvel;var delta=deltaTime-body.sweepTime;if(0!=delta){body.sweepTime=deltaTime;var t3=delta;if(body.posx+=body.velx*t3,body.posy+=body.vely*t3,0!=body.angvel){var dr=body.sweep_angvel*delta;if(body.rot+=dr,dr*dr>1e-4)body.axisx=Math.sin(body.rot),body.axisy=Math.cos(body.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*body.axisx+dr*body.axisy)*m;body.axisy=(p*body.axisy-dr*body.axisx)*m,body.axisx=nx}}}var postx=body.posx,posty=body.posy;shape.validate_sweepRadius();var rad=shape.sweepRadius,aabb;null==zpp_nape.geom.ZPP_AABB.zpp_pool?aabb=new zpp_nape.geom.ZPP_AABB:(aabb=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=aabb.next,aabb.next=null);var x=prex,y=postx;aabb.minx=(x<y?x:y)-rad;var x1=prex,y1=postx;aabb.maxx=(x1>y1?x1:y1)+rad;var x2=prey,y2=posty;aabb.miny=(x2<y2?x2:y2)-rad;var x3=prey,y3=posty;aabb.maxy=(x3>y3?x3:y3)+rad;var list=this.convexShapeList=this.bphase.shapesInAABB(aabb,!1,!1,null==filter?null:filter.zpp_inner,this.convexShapeList),o=aabb;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o;var ret=null==output?new nape.geom.ConvexResultList:output;list.zpp_inner.valmod();for(var _g=nape.shape.ShapeIterator.get(list);;){_g.zpp_inner.zpp_inner.valmod();var _this6=_g.zpp_inner;_this6.zpp_inner.valmod(),_this6.zpp_inner.zip_length&&(_this6.zpp_inner.zip_length=!1,_this6.zpp_inner.user_length=_this6.zpp_inner.inner.length);var length=_this6.zpp_inner.user_length,tmp;if(_g.zpp_critical=!0,_g.zpp_i<length?tmp=!0:(_g.zpp_next=nape.shape.ShapeIterator.zpp_pool,nape.shape.ShapeIterator.zpp_pool=_g,_g.zpp_inner=null,tmp=!1),!tmp)break;_g.zpp_critical=!1;var s=_g.zpp_inner.at(_g.zpp_i++);if(s!=shape.outer&&(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null)!=body.outer){if(toi.s1=shape,toi.s2=s.zpp_inner,dynamics){s.zpp_inner.validate_sweepRadius(),(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,zpp_nape.geom.ZPP_SweepDistance.dynamicSweep(toi,deltaTime,0,0,!0);var _this7=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner,delta1=0-_this7.sweepTime;if(0!=delta1){_this7.sweepTime=0;var t4=delta1;if(_this7.posx+=_this7.velx*t4,_this7.posy+=_this7.vely*t4,0!=_this7.angvel){var dr1=_this7.sweep_angvel*delta1;if(_this7.rot+=dr1,dr1*dr1>1e-4)_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this7.axisx+dr1*_this7.axisy)*m1;_this7.axisy=(p1*_this7.axisy-dr1*_this7.axisx)*m1,_this7.axisx=nx1}}}var _this8=(null!=s.zpp_inner.body?s.zpp_inner.body.outer:null).zpp_inner,s1=s.zpp_inner;if(0==s1.type)s1.worldCOMx=_this8.posx+(_this8.axisy*s1.localCOMx-_this8.axisx*s1.localCOMy),s1.worldCOMy=_this8.posy+(s1.localCOMx*_this8.axisx+s1.localCOMy*_this8.axisy);else{for(var p2=s1.polygon,li1=p2.lverts.next,cx_ite3=p2.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=_this8.posx+(_this8.axisy*l1.x-_this8.axisx*l1.y),g1.y=_this8.posy+(l1.x*_this8.axisx+l1.y*_this8.axisy),cx_ite3=cx_ite3.next}var ite1=p2.edges.head,cx_ite4=p2.gverts.next,u2=cx_ite4;for(cx_ite4=cx_ite4.next;null!=cx_ite4;){var v3=cx_ite4,e2=ite1.elt;ite1=ite1.next,e2.gnormx=_this8.axisy*e2.lnormx-_this8.axisx*e2.lnormy,e2.gnormy=e2.lnormx*_this8.axisx+e2.lnormy*_this8.axisy,e2.gprojection=_this8.posx*e2.gnormx+_this8.posy*e2.gnormy+e2.lprojection,e2.tp0=u2.y*e2.gnormx-u2.x*e2.gnormy,e2.tp1=v3.y*e2.gnormx-v3.x*e2.gnormy,u2=v3,cx_ite4=cx_ite4.next}var v4=p2.gverts.next,e3=ite1.elt;ite1=ite1.next,e3.gnormx=_this8.axisy*e3.lnormx-_this8.axisx*e3.lnormy,e3.gnormy=e3.lnormx*_this8.axisx+e3.lnormy*_this8.axisy,e3.gprojection=_this8.posx*e3.gnormx+_this8.posy*e3.gnormy+e3.lprojection,e3.tp0=u2.y*e3.gnormx-u2.x*e3.gnormy,e3.tp1=v4.y*e3.gnormx-v4.x*e3.gnormy}}else zpp_nape.geom.ZPP_SweepDistance.staticSweep(toi,deltaTime,0,0);if(toi.toi*=deltaTime,toi.toi>0){var x4=-toi.axis.x,y4=-toi.axis.y,ret1;if(null==y4&&(y4=0),null==x4&&(x4=0),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret1=new nape.geom.Vec2:(ret1=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret1.zpp_pool,ret1.zpp_pool=null,ret1.zpp_disp=!1,ret1==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret1.zpp_inner){var ret2;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret2=new zpp_nape.geom.ZPP_Vec2:(ret2=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret2.next,ret2.next=null),ret2.weak=!1,ret2._immutable=!1,ret2.x=x4,ret2.y=y4,ret1.zpp_inner=ret2,ret1.zpp_inner.outer=ret1}else{if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this9=ret1.zpp_inner,res;if(_this9._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this9._isimmutable&&_this9._isimmutable(),x4!=x4||y4!=y4)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this10=ret1.zpp_inner;if(null!=_this10._validate&&_this10._validate(),ret1.zpp_inner.x==x4){if(null!=ret1&&ret1.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this11=ret1.zpp_inner;null!=_this11._validate&&_this11._validate(),res=ret1.zpp_inner.y==y4}else res=!1;if(!res){ret1.zpp_inner.x=x4,ret1.zpp_inner.y=y4;var _this12=ret1.zpp_inner;null!=_this12._invalidate&&_this12._invalidate(_this12)}}ret1.zpp_inner.weak=!1;var x5=toi.c2.x,y5=toi.c2.y,ret3;if(null==y5&&(y5=0),null==x5&&(x5=0),x5!=x5||y5!=y5)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null==zpp_nape.util.ZPP_PubPool.poolVec2?ret3=new nape.geom.Vec2:(ret3=zpp_nape.util.ZPP_PubPool.poolVec2,zpp_nape.util.ZPP_PubPool.poolVec2=ret3.zpp_pool,ret3.zpp_pool=null,ret3.zpp_disp=!1,ret3==zpp_nape.util.ZPP_PubPool.nextVec2&&(zpp_nape.util.ZPP_PubPool.nextVec2=null)),null==ret3.zpp_inner){var ret4;null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret4=new zpp_nape.geom.ZPP_Vec2:(ret4=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret4.next,ret4.next=null),ret4.weak=!1,ret4._immutable=!1,ret4.x=x5,ret4.y=y5,ret3.zpp_inner=ret4,ret3.zpp_inner.outer=ret3}else{if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this13=ret3.zpp_inner,res1;if(_this13._immutable)throw new js._Boot.HaxeError("Error: Vec2 is immutable");if(null!=_this13._isimmutable&&_this13._isimmutable(),x5!=x5||y5!=y5)throw new js._Boot.HaxeError("Error: Vec2 components cannot be NaN");if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this14=ret3.zpp_inner;if(null!=_this14._validate&&_this14._validate(),ret3.zpp_inner.x==x5){if(null!=ret3&&ret3.zpp_disp)throw new js._Boot.HaxeError("Error: Vec2 has been disposed and cannot be used!");var _this15=ret3.zpp_inner;null!=_this15._validate&&_this15._validate(),res1=ret3.zpp_inner.y==y5}else res1=!1;if(!res1){ret3.zpp_inner.x=x5,ret3.zpp_inner.y=y5;var _this16=ret3.zpp_inner;null!=_this16._invalidate&&_this16._invalidate(_this16)}}ret3.zpp_inner.weak=!1;for(var res2=zpp_nape.geom.ZPP_ConvexRayResult.getConvex(ret1,ret3,toi.toi,s),pre=null,cx_ite5=ret.zpp_inner.inner.head;null!=cx_ite5;){var j=cx_ite5.elt;if(null!=res2.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(null!=j.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(res2.zpp_inner.toiDistance<j.zpp_inner.toiDistance)break;pre=cx_ite5,cx_ite5=cx_ite5.next}var _this17=ret.zpp_inner.inner,ret5;null==zpp_nape.util.ZNPNode_ConvexResult.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ConvexResult:(ret5=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=ret5.next,ret5.next=null),ret5.elt=res2;var temp=ret5;null==pre?(temp.next=_this17.head,_this17.head=temp):(temp.next=pre.next,pre.next=temp),_this17.pushmod=_this17.modified=!0,_this17.length++}}}list.clear();var o1=toi;o1.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o1;var delta2=0-body.sweepTime;if(0!=delta2){body.sweepTime=0;var t5=delta2;if(body.posx+=body.velx*t5,body.posy+=body.vely*t5,0!=body.angvel){var dr2=body.sweep_angvel*delta2;if(body.rot+=dr2,dr2*dr2>1e-4)body.axisx=Math.sin(body.rot),body.axisy=Math.cos(body.rot);else{var d22=dr2*dr2,p3=1-.5*d22,m2=1-d22*d22/8,nx2=(p3*body.axisx+dr2*body.axisy)*m2;body.axisy=(p3*body.axisy-dr2*body.axisx)*m2,body.axisx=nx2}}}if(0==shape.type)shape.worldCOMx=body.posx+(body.axisy*shape.localCOMx-body.axisx*shape.localCOMy),shape.worldCOMy=body.posy+(shape.localCOMx*body.axisx+shape.localCOMy*body.axisy);else{for(var p4=shape.polygon,li2=p4.lverts.next,cx_ite6=p4.gverts.next;null!=cx_ite6;){var g2=cx_ite6,l2=li2;li2=li2.next,g2.x=body.posx+(body.axisy*l2.x-body.axisx*l2.y),g2.y=body.posy+(l2.x*body.axisx+l2.y*body.axisy),cx_ite6=cx_ite6.next}var ite2=p4.edges.head,cx_ite7=p4.gverts.next,u3=cx_ite7;for(cx_ite7=cx_ite7.next;null!=cx_ite7;){var v5=cx_ite7,e4=ite2.elt;ite2=ite2.next,e4.gnormx=body.axisy*e4.lnormx-body.axisx*e4.lnormy,e4.gnormy=e4.lnormx*body.axisx+e4.lnormy*body.axisy,e4.gprojection=body.posx*e4.gnormx+body.posy*e4.gnormy+e4.lprojection,e4.tp0=u3.y*e4.gnormx-u3.x*e4.gnormy,e4.tp1=v5.y*e4.gnormx-v5.x*e4.gnormy,u3=v5,cx_ite7=cx_ite7.next}var v6=p4.gverts.next,e5=ite2.elt;ite2=ite2.next,e5.gnormx=body.axisy*e5.lnormx-body.axisx*e5.lnormy,e5.gnormy=e5.lnormx*body.axisx+e5.lnormy*body.axisy,e5.gprojection=body.posx*e5.gnormx+body.posy*e5.gnormy+e5.lprojection,e5.tp0=u3.y*e5.gnormx-u3.x*e5.gnormy,e5.tp1=v6.y*e5.gnormx-v6.x*e5.gnormy}return ret},zpp_nape.space.ZPP_Space.prototype.push_callback=function(i){var cb;return null==zpp_nape.callbacks.ZPP_Callback.zpp_pool?cb=new zpp_nape.callbacks.ZPP_Callback:(cb=zpp_nape.callbacks.ZPP_Callback.zpp_pool,zpp_nape.callbacks.ZPP_Callback.zpp_pool=cb.next,cb.next=null),this.callbacks.push(cb),cb.listener=i,cb},zpp_nape.space.ZPP_Space.prototype.pre_dt=null,zpp_nape.space.ZPP_Space.prototype.step=function(deltaTime,velocityIterations,positionIterations){var _gthis=this;if(this.midstep)throw new js._Boot.HaxeError("Error: ... REALLY?? you're going to call space.step() inside of space.step()? COME ON!!");if(this.time+=deltaTime,this.pre_dt=deltaTime,this.midstep=!0,this.stamp++,this.validation(),this.bphase.broadphase(this,!0),this.prestep(deltaTime),this.sortcontacts){var xxlist=this.c_arbiters_false;if(null!=xxlist.head&&null!=xxlist.head.next){for(var head=xxlist.head,tail=null,left=null,right=null,nxt=null,listSize=1,numMerges,leftSize,rightSize;;){for(numMerges=0,left=head,tail=head=null;null!=left;){for(++numMerges,right=left,leftSize=0,rightSize=listSize;null!=right&&leftSize<listSize;)++leftSize,right=right.next;for(;leftSize>0||rightSize>0&&null!=right;)0==leftSize?(nxt=right,right=right.next,--rightSize):0==rightSize||null==right?(nxt=left,left=left.next,--leftSize):!left.elt.active||!right.elt.active||left.elt.oc1.dist<right.elt.oc1.dist?(nxt=left,left=left.next,--leftSize):(nxt=right,right=right.next,--rightSize),null!=tail?tail.next=nxt:head=nxt,tail=nxt;left=right}if(tail.next=null,listSize<<=1,!(numMerges>1))break}xxlist.head=head,xxlist.modified=!0,xxlist.pushmod=!0}}this.updateVel(deltaTime),this.warmStart(),this.iterateVel(velocityIterations);for(var cx_ite=this.kinematics.head;null!=cx_ite;){var cur=cx_ite.elt;cur.pre_posx=cur.posx,cur.pre_posy=cur.posy,cur.pre_rot=cur.rot,cx_ite=cx_ite.next}for(var cx_ite1=this.live.head;null!=cx_ite1;){var cur1=cx_ite1.elt;cur1.pre_posx=cur1.posx,cur1.pre_posy=cur1.posy,cur1.pre_rot=cur1.rot,cx_ite1=cx_ite1.next}this.updatePos(deltaTime),this.continuous=!0,this.continuousCollisions(deltaTime),this.continuous=!1,this.iteratePos(positionIterations);for(var cx_ite2=this.kinematics.head;null!=cx_ite2;){var cur2=cx_ite2.elt,upos=!(cur2.posx==cur2.pre_posx&&cur2.posy==cur2.pre_posy),urot=cur2.pre_rot!=cur2.rot;if(upos){for(var cx_ite3=cur2.shapes.head;null!=cx_ite3;){var s=cx_ite3.elt;1==s.type&&(s.polygon.invalidate_gverts(),s.polygon.invalidate_gaxi()),s.invalidate_worldCOM(),cx_ite3=cx_ite3.next}cur2.zip_worldCOM=!0}if(urot){cur2.zip_axis=!0;for(var cx_ite4=cur2.shapes.head;null!=cx_ite4;){var s1=cx_ite4.elt;1==s1.type&&(s1.polygon.invalidate_gverts(),s1.polygon.invalidate_gaxi()),s1.invalidate_worldCOM(),cx_ite4=cx_ite4.next}cur2.zip_worldCOM=!0}cx_ite2=cx_ite2.next}for(var cx_ite5=this.live.head;null!=cx_ite5;){var cur3=cx_ite5.elt,upos1=!(cur3.posx==cur3.pre_posx&&cur3.posy==cur3.pre_posy),urot1=cur3.pre_rot!=cur3.rot;if(upos1){for(var cx_ite6=cur3.shapes.head;null!=cx_ite6;){var s2=cx_ite6.elt;1==s2.type&&(s2.polygon.invalidate_gverts(),s2.polygon.invalidate_gaxi()),s2.invalidate_worldCOM(),cx_ite6=cx_ite6.next}cur3.zip_worldCOM=!0}if(urot1){cur3.zip_axis=!0;for(var cx_ite7=cur3.shapes.head;null!=cx_ite7;){var s3=cx_ite7.elt;1==s3.type&&(s3.polygon.invalidate_gverts(),s3.polygon.invalidate_gaxi()),s3.invalidate_worldCOM(),cx_ite7=cx_ite7.next}cur3.zip_worldCOM=!0}cx_ite5=cx_ite5.next}for(var pre=null,cx_ite8=this.staticsleep.head;null!=cx_ite8;){var b=cx_ite8.elt;if(3!=b.type||0==b.velx&&0==b.vely&&0==b.angvel){if(b.kinematicDelaySleep){b.kinematicDelaySleep=!1,cx_ite8=cx_ite8.next;continue}b.component.sleeping=!0;var _this=this.staticsleep,old,ret;null==pre?(ret=(old=_this.head).next,_this.head=ret,null==_this.head&&(_this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(_this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,_this.modified=!0,_this.length--,_this.pushmod=!0,cx_ite8=ret}else pre=cx_ite8,cx_ite8=cx_ite8.next}this.doForests(deltaTime),this.sleepArbiters(),this.midstep=!1;for(var pre1=null,cx_ite9=this.callbackset_list.next;null!=cx_ite9;){var set=cx_ite9;if(null!=set.arbiters.head){var ret2;ret2=!0;for(var cx_ite10=set.arbiters.head;null!=cx_ite10;){var x;if(!cx_ite10.elt.sleeping){ret2=!1;break}cx_ite10=cx_ite10.next}for(var sleeping=ret2,a=set.int1.cbSet,b1=set.int2.cbSet,_this2=a.manager,ret3=null,pairs,cx_ite11=(a.cbpairs.length<b1.cbpairs.length?a.cbpairs:b1.cbpairs).head,ret4;null!=cx_ite11;){var p=cx_ite11.elt;if(p.a==a&&p.b==b1||p.a==b1&&p.b==a){ret3=p;break}cx_ite11=cx_ite11.next}if(null==ret3)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret4=new zpp_nape.callbacks.ZPP_CbSetPair:(ret4=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret4.next,ret4.next=null),ret4.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(a,b1)?(ret4.a=a,ret4.b=b1):(ret4.a=b1,ret4.b=a),ret3=ret4,a.cbpairs.add(ret3),b1!=a&&b1.cbpairs.add(ret3);ret3.zip_listeners&&(ret3.zip_listeners=!1,ret3.__validate());for(var cx_ite12=ret3.listeners.head;null!=cx_ite12;){var x1=cx_ite12.elt;if(6==x1.event&&(!sleeping||x1.allowSleepingCallbacks)&&!set.empty_arb(x1.itype)){var cb=this.push_callback(x1);cb.event=6;var o11=set.int1,o2=set.int2,tmp,_this3=x1.options1,xs=o11.cbTypes;if(_this3.nonemptyintersection(xs,_this3.includes)&&!_this3.nonemptyintersection(xs,_this3.excludes)){var _this4=x1.options2,xs1=o2.cbTypes;tmp=_this4.nonemptyintersection(xs1,_this4.includes)&&!_this4.nonemptyintersection(xs1,_this4.excludes)}else tmp=!1;tmp?(cb.int1=o11,cb.int2=o2):(cb.int1=o2,cb.int2=o11),cb.set=set}cx_ite12=cx_ite12.next}pre1=cx_ite9,cx_ite9=cx_ite9.next}else{var _this1=this.callbackset_list,old1,ret1;null==pre1?(ret1=(old1=_this1.next).next,_this1.next=ret1,null==_this1.next&&(_this1.pushmod=!0)):(ret1=(old1=pre1.next).next,pre1.next=ret1,null==ret1&&(_this1.pushmod=!0)),old1._inuse=!1,_this1.modified=!0,_this1.length--,_this1.pushmod=!0,cx_ite9=ret1;var o1=set;o1.int1=o1.int2=null,o1.id=o1.di=-1,o1.freed=!0,o1.next=zpp_nape.space.ZPP_CallbackSet.zpp_pool,zpp_nape.space.ZPP_CallbackSet.zpp_pool=o1}}for(;!this.callbacks.empty();){var cb1=this.callbacks.pop(),o3;if(0==cb1.listener.type)cb1.listener.body.handler(cb1.wrapper_body());else if(1==cb1.listener.type){var o4;cb1.listener.constraint.handler(cb1.wrapper_con())}else if(2==cb1.listener.type){var o5;cb1.listener.interaction.handleri(cb1.wrapper_int())}var o6=cb1;o6.int1=o6.int2=null,o6.body=null,o6.constraint=null,o6.listener=null,null!=o6.wrap_arbiters&&(o6.wrap_arbiters.zpp_inner.inner=null),o6.set=null,o6.next=zpp_nape.callbacks.ZPP_Callback.zpp_pool,zpp_nape.callbacks.ZPP_Callback.zpp_pool=o6}},zpp_nape.space.ZPP_Space.prototype.toiEvents=null,zpp_nape.space.ZPP_Space.prototype.continuousCollisions=function(deltaTime){var MAX_VEL=2*Math.PI/deltaTime;this.bphase.broadphase(this,!1);for(var curTimeAlpha=0;curTimeAlpha<1&&null!=this.toiEvents.head;){for(var minTOI=null,minTime=2,minKinematic=!1,preMin=null,pre=null,cx_ite=this.toiEvents.head;null!=cx_ite;){var toi=cx_ite.elt,b1=toi.s1.body,b2=toi.s2.body;if(b1.sweepFrozen&&b2.sweepFrozen){if(0==toi.toi||!zpp_nape.geom.ZPP_Collide.testCollide_safe(toi.s1,toi.s2)){cx_ite=this.toiEvents.erase(pre);var o=toi;o.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o;continue}toi.toi=0}if(toi.frozen1!=b1.sweepFrozen||toi.frozen2!=b2.sweepFrozen){if(toi.kinematic){cx_ite=this.toiEvents.erase(pre);var o2=toi;o2.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o2;continue}if(toi.frozen1=b1.sweepFrozen,toi.frozen2=b2.sweepFrozen,toi.frozen1){var tmp=toi.s1;toi.s1=toi.s2,toi.s2=tmp,toi.frozen1=!1,toi.frozen2=!0}if(zpp_nape.geom.ZPP_SweepDistance.staticSweep(toi,deltaTime,0,nape.Config.collisionSlopCCD),toi.toi<0){cx_ite=this.toiEvents.erase(pre);var o1=toi;o1.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o1;continue}}toi.toi>=0&&(toi.toi<minTime||!minKinematic&&toi.kinematic)&&(minTOI=toi,minTime=toi.toi,minKinematic=toi.kinematic,preMin=pre),pre=cx_ite,cx_ite=cx_ite.next}if(null==minTOI)break;this.toiEvents.erase(preMin),curTimeAlpha=minTOI.toi;var b11=minTOI.s1.body,b21=minTOI.s2.body;if(!b11.sweepFrozen){var dt=curTimeAlpha*deltaTime,delta=dt-b11.sweepTime;if(0!=delta){b11.sweepTime=dt;var t=delta;if(b11.posx+=b11.velx*t,b11.posy+=b11.vely*t,0!=b11.angvel){var dr=b11.sweep_angvel*delta;if(b11.rot+=dr,dr*dr>1e-4)b11.axisx=Math.sin(b11.rot),b11.axisy=Math.cos(b11.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*b11.axisx+dr*b11.axisy)*m;b11.axisy=(p*b11.axisy-dr*b11.axisx)*m,b11.axisx=nx}}}var s=minTOI.s1;if(0==s.type)s.worldCOMx=b11.posx+(b11.axisy*s.localCOMx-b11.axisx*s.localCOMy),s.worldCOMy=b11.posy+(s.localCOMx*b11.axisx+s.localCOMy*b11.axisy);else{for(var p1=s.polygon,li=p1.lverts.next,cx_ite1=p1.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=b11.posx+(b11.axisy*l.x-b11.axisx*l.y),g.y=b11.posy+(l.x*b11.axisx+l.y*b11.axisy),cx_ite1=cx_ite1.next}var ite=p1.edges.head,cx_ite2=p1.gverts.next,u=cx_ite2;for(cx_ite2=cx_ite2.next;null!=cx_ite2;){var v=cx_ite2,e=ite.elt;ite=ite.next,e.gnormx=b11.axisy*e.lnormx-b11.axisx*e.lnormy,e.gnormy=e.lnormx*b11.axisx+e.lnormy*b11.axisy,e.gprojection=b11.posx*e.gnormx+b11.posy*e.gnormy+e.lprojection,e.tp0=u.y*e.gnormx-u.x*e.gnormy,e.tp1=v.y*e.gnormx-v.x*e.gnormy,u=v,cx_ite2=cx_ite2.next}var v1=p1.gverts.next,e1=ite.elt;ite=ite.next,e1.gnormx=b11.axisy*e1.lnormx-b11.axisx*e1.lnormy,e1.gnormy=e1.lnormx*b11.axisx+e1.lnormy*b11.axisy,e1.gprojection=b11.posx*e1.gnormx+b11.posy*e1.gnormy+e1.lprojection,e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy,e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}}if(!b21.sweepFrozen){var dt1=curTimeAlpha*deltaTime,delta1=dt1-b21.sweepTime;if(0!=delta1){b21.sweepTime=dt1;var t1=delta1;if(b21.posx+=b21.velx*t1,b21.posy+=b21.vely*t1,0!=b21.angvel){var dr1=b21.sweep_angvel*delta1;if(b21.rot+=dr1,dr1*dr1>1e-4)b21.axisx=Math.sin(b21.rot),b21.axisy=Math.cos(b21.rot);else{var d21=dr1*dr1,p2=1-.5*d21,m1=1-d21*d21/8,nx1=(p2*b21.axisx+dr1*b21.axisy)*m1;b21.axisy=(p2*b21.axisy-dr1*b21.axisx)*m1,b21.axisx=nx1}}}var s1=minTOI.s2;if(0==s1.type)s1.worldCOMx=b21.posx+(b21.axisy*s1.localCOMx-b21.axisx*s1.localCOMy),s1.worldCOMy=b21.posy+(s1.localCOMx*b21.axisx+s1.localCOMy*b21.axisy);else{for(var p3=s1.polygon,li1=p3.lverts.next,cx_ite3=p3.gverts.next;null!=cx_ite3;){var g1=cx_ite3,l1=li1;li1=li1.next,g1.x=b21.posx+(b21.axisy*l1.x-b21.axisx*l1.y),g1.y=b21.posy+(l1.x*b21.axisx+l1.y*b21.axisy),cx_ite3=cx_ite3.next}var ite1=p3.edges.head,cx_ite4=p3.gverts.next,u1=cx_ite4;for(cx_ite4=cx_ite4.next;null!=cx_ite4;){var v2=cx_ite4,e2=ite1.elt;ite1=ite1.next,e2.gnormx=b21.axisy*e2.lnormx-b21.axisx*e2.lnormy,e2.gnormy=e2.lnormx*b21.axisx+e2.lnormy*b21.axisy,e2.gprojection=b21.posx*e2.gnormx+b21.posy*e2.gnormy+e2.lprojection,e2.tp0=u1.y*e2.gnormx-u1.x*e2.gnormy,e2.tp1=v2.y*e2.gnormx-v2.x*e2.gnormy,u1=v2,cx_ite4=cx_ite4.next}var v3=p3.gverts.next,e3=ite1.elt;ite1=ite1.next,e3.gnormx=b21.axisy*e3.lnormx-b21.axisx*e3.lnormy,e3.gnormy=e3.lnormx*b21.axisx+e3.lnormy*b21.axisy,e3.gprojection=b21.posx*e3.gnormx+b21.posy*e3.gnormy+e3.lprojection,e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy,e3.tp1=v3.y*e3.gnormx-v3.x*e3.gnormy}}var wasnull=null==minTOI.arbiter,arb=this.narrowPhase(minTOI.s1,minTOI.s2,!0,minTOI.arbiter,!0);if(null==arb)null!=minTOI.arbiter&&null!=minTOI.arbiter.pair&&(minTOI.arbiter.pair.arb=null,minTOI.arbiter.pair=null);else if(!this.presteparb(arb,deltaTime,!0)&&arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL&&arb.active&&0!=(1&arb.immState)){var _this=arb.colarb,jx=_this.nx*_this.c1.jnAcc-_this.ny*_this.c1.jtAcc,jy=_this.ny*_this.c1.jnAcc+_this.nx*_this.c1.jtAcc,t2=_this.b1.imass;_this.b1.velx-=jx*t2,_this.b1.vely-=jy*t2,_this.b1.angvel-=_this.b1.iinertia*(jy*_this.c1.r1x-jx*_this.c1.r1y);var t3=_this.b2.imass;if(_this.b2.velx+=jx*t3,_this.b2.vely+=jy*t3,_this.b2.angvel+=_this.b2.iinertia*(jy*_this.c1.r2x-jx*_this.c1.r2y),_this.hc2){var jx1=_this.nx*_this.c2.jnAcc-_this.ny*_this.c2.jtAcc,jy1=_this.ny*_this.c2.jnAcc+_this.nx*_this.c2.jtAcc,t4=_this.b1.imass;_this.b1.velx-=jx1*t4,_this.b1.vely-=jy1*t4,_this.b1.angvel-=_this.b1.iinertia*(jy1*_this.c2.r1x-jx1*_this.c2.r1y);var t5=_this.b2.imass;_this.b2.velx+=jx1*t5,_this.b2.vely+=jy1*t5,_this.b2.angvel+=_this.b2.iinertia*(jy1*_this.c2.r2x-jx1*_this.c2.r2y)}_this.b2.angvel+=_this.jrAcc*_this.b2.iinertia,_this.b1.angvel-=_this.jrAcc*_this.b1.iinertia;var _this1=arb.colarb,v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel),v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel),j=(v1y*_this1.nx-v1x*_this1.ny+_this1.surfacex)*_this1.c1.tMass,jMax=_this1.c1.friction*_this1.c1.jnAcc,jOld=_this1.c1.jtAcc,cjAcc=jOld-j;cjAcc>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,_this1.c1.jtAcc=cjAcc;var jx2=-_this1.ny*j,jy2=_this1.nx*j;if(_this1.b2.velx+=jx2*_this1.b2.imass,_this1.b2.vely+=jy2*_this1.b2.imass,_this1.b1.velx-=jx2*_this1.b1.imass,_this1.b1.vely-=jy2*_this1.b1.imass,_this1.b2.angvel+=_this1.rt1b*j*_this1.b2.iinertia,_this1.b1.angvel-=_this1.rt1a*j*_this1.b1.iinertia,_this1.hc2){var v2x=_this1.k2x+_this1.b2.velx-_this1.c2.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c2.r1y*_this1.b1.angvel),v2y=_this1.k2y+_this1.b2.vely+_this1.c2.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c2.r1x*_this1.b1.angvel);j=(v2y*_this1.nx-v2x*_this1.ny+_this1.surfacex)*_this1.c2.tMass,jMax=_this1.c2.friction*_this1.c2.jnAcc,(cjAcc=(jOld=_this1.c2.jtAcc)-j)>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,_this1.c2.jtAcc=cjAcc,jx2=-_this1.ny*j,jy2=_this1.nx*j,_this1.b2.velx+=jx2*_this1.b2.imass,_this1.b2.vely+=jy2*_this1.b2.imass,_this1.b1.velx-=jx2*_this1.b1.imass,_this1.b1.vely-=jy2*_this1.b1.imass,_this1.b2.angvel+=_this1.rt2b*j*_this1.b2.iinertia,_this1.b1.angvel-=_this1.rt2a*j*_this1.b1.iinertia,v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel),v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel),v2x=_this1.k2x+_this1.b2.velx-_this1.c2.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c2.r1y*_this1.b1.angvel),v2y=_this1.k2y+_this1.b2.vely+_this1.c2.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c2.r1x*_this1.b1.angvel);var ax=_this1.c1.jnAcc,ay=_this1.c2.jnAcc,jnx=v1x*_this1.nx+v1y*_this1.ny+_this1.surfacey+_this1.c1.bounce-(_this1.Ka*ax+_this1.Kb*ay),jny=v2x*_this1.nx+v2y*_this1.ny+_this1.surfacey+_this1.c2.bounce-(_this1.Kb*ax+_this1.Kc*ay),xx=-(_this1.kMassa*jnx+_this1.kMassb*jny),xy=-(_this1.kMassb*jnx+_this1.kMassc*jny);xx>=0&&xy>=0?(jnx=xx-ax,jny=xy-ay,_this1.c1.jnAcc=xx,_this1.c2.jnAcc=xy):(xx=-_this1.c1.nMass*jnx)>=0&&_this1.Kb*xx+jny>=0?(jnx=xx-ax,jny=-ay,_this1.c1.jnAcc=xx,_this1.c2.jnAcc=0):(xy=-_this1.c2.nMass*jny)>=0&&_this1.Kb*xy+jnx>=0?(jnx=-ax,jny=xy-ay,_this1.c1.jnAcc=0,_this1.c2.jnAcc=xy):jnx>=0&&jny>=0?(jnx=-ax,jny=-ay,_this1.c1.jnAcc=_this1.c2.jnAcc=0):(jnx=0,jny=0),j=jnx+jny,jx2=_this1.nx*j,jy2=_this1.ny*j,_this1.b2.velx+=jx2*_this1.b2.imass,_this1.b2.vely+=jy2*_this1.b2.imass,_this1.b1.velx-=jx2*_this1.b1.imass,_this1.b1.vely-=jy2*_this1.b1.imass,_this1.b2.angvel+=(_this1.rn1b*jnx+_this1.rn2b*jny)*_this1.b2.iinertia,_this1.b1.angvel-=(_this1.rn1a*jnx+_this1.rn2a*jny)*_this1.b1.iinertia}else{var dw;if(0!=_this1.radius)j=(_this1.b2.angvel-_this1.b1.angvel)*_this1.rMass,jMax=_this1.rfric*_this1.c1.jnAcc,jOld=_this1.jrAcc,_this1.jrAcc-=j,_this1.jrAcc>jMax?_this1.jrAcc=jMax:_this1.jrAcc<-jMax&&(_this1.jrAcc=-jMax),j=_this1.jrAcc-jOld,_this1.b2.angvel+=j*_this1.b2.iinertia,_this1.b1.angvel-=j*_this1.b1.iinertia;v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel),v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel),j=(_this1.c1.bounce+(_this1.nx*v1x+_this1.ny*v1y)+_this1.surfacey)*_this1.c1.nMass,(cjAcc=(jOld=_this1.c1.jnAcc)-j)<0&&(cjAcc=0),j=cjAcc-jOld,_this1.c1.jnAcc=cjAcc,jx2=_this1.nx*j,jy2=_this1.ny*j,_this1.b2.velx+=jx2*_this1.b2.imass,_this1.b2.vely+=jy2*_this1.b2.imass,_this1.b1.velx-=jx2*_this1.b1.imass,_this1.b1.vely-=jy2*_this1.b1.imass,_this1.b2.angvel+=_this1.rn1b*j*_this1.b2.iinertia,_this1.b1.angvel-=_this1.rn1a*j*_this1.b1.iinertia}var _this2=arb.colarb,v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel),v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel),j1=(v1y1*_this2.nx-v1x1*_this2.ny+_this2.surfacex)*_this2.c1.tMass,jMax1=_this2.c1.friction*_this2.c1.jnAcc,jOld1=_this2.c1.jtAcc,cjAcc1=jOld1-j1;cjAcc1>jMax1?cjAcc1=jMax1:cjAcc1<-jMax1&&(cjAcc1=-jMax1),j1=cjAcc1-jOld1,_this2.c1.jtAcc=cjAcc1;var jx3=-_this2.ny*j1,jy3=_this2.nx*j1;if(_this2.b2.velx+=jx3*_this2.b2.imass,_this2.b2.vely+=jy3*_this2.b2.imass,_this2.b1.velx-=jx3*_this2.b1.imass,_this2.b1.vely-=jy3*_this2.b1.imass,_this2.b2.angvel+=_this2.rt1b*j1*_this2.b2.iinertia,_this2.b1.angvel-=_this2.rt1a*j1*_this2.b1.iinertia,_this2.hc2){var v2x1=_this2.k2x+_this2.b2.velx-_this2.c2.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c2.r1y*_this2.b1.angvel),v2y1=_this2.k2y+_this2.b2.vely+_this2.c2.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c2.r1x*_this2.b1.angvel);j1=(v2y1*_this2.nx-v2x1*_this2.ny+_this2.surfacex)*_this2.c2.tMass,jMax1=_this2.c2.friction*_this2.c2.jnAcc,(cjAcc1=(jOld1=_this2.c2.jtAcc)-j1)>jMax1?cjAcc1=jMax1:cjAcc1<-jMax1&&(cjAcc1=-jMax1),j1=cjAcc1-jOld1,_this2.c2.jtAcc=cjAcc1,jx3=-_this2.ny*j1,jy3=_this2.nx*j1,_this2.b2.velx+=jx3*_this2.b2.imass,_this2.b2.vely+=jy3*_this2.b2.imass,_this2.b1.velx-=jx3*_this2.b1.imass,_this2.b1.vely-=jy3*_this2.b1.imass,_this2.b2.angvel+=_this2.rt2b*j1*_this2.b2.iinertia,_this2.b1.angvel-=_this2.rt2a*j1*_this2.b1.iinertia,v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel),v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel),v2x1=_this2.k2x+_this2.b2.velx-_this2.c2.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c2.r1y*_this2.b1.angvel),v2y1=_this2.k2y+_this2.b2.vely+_this2.c2.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c2.r1x*_this2.b1.angvel);var ax1=_this2.c1.jnAcc,ay1=_this2.c2.jnAcc,jnx1=v1x1*_this2.nx+v1y1*_this2.ny+_this2.surfacey+_this2.c1.bounce-(_this2.Ka*ax1+_this2.Kb*ay1),jny1=v2x1*_this2.nx+v2y1*_this2.ny+_this2.surfacey+_this2.c2.bounce-(_this2.Kb*ax1+_this2.Kc*ay1),xx1=-(_this2.kMassa*jnx1+_this2.kMassb*jny1),xy1=-(_this2.kMassb*jnx1+_this2.kMassc*jny1);xx1>=0&&xy1>=0?(jnx1=xx1-ax1,jny1=xy1-ay1,_this2.c1.jnAcc=xx1,_this2.c2.jnAcc=xy1):(xx1=-_this2.c1.nMass*jnx1)>=0&&_this2.Kb*xx1+jny1>=0?(jnx1=xx1-ax1,jny1=-ay1,_this2.c1.jnAcc=xx1,_this2.c2.jnAcc=0):(xy1=-_this2.c2.nMass*jny1)>=0&&_this2.Kb*xy1+jnx1>=0?(jnx1=-ax1,jny1=xy1-ay1,_this2.c1.jnAcc=0,_this2.c2.jnAcc=xy1):jnx1>=0&&jny1>=0?(jnx1=-ax1,jny1=-ay1,_this2.c1.jnAcc=_this2.c2.jnAcc=0):(jnx1=0,jny1=0),j1=jnx1+jny1,jx3=_this2.nx*j1,jy3=_this2.ny*j1,_this2.b2.velx+=jx3*_this2.b2.imass,_this2.b2.vely+=jy3*_this2.b2.imass,_this2.b1.velx-=jx3*_this2.b1.imass,_this2.b1.vely-=jy3*_this2.b1.imass,_this2.b2.angvel+=(_this2.rn1b*jnx1+_this2.rn2b*jny1)*_this2.b2.iinertia,_this2.b1.angvel-=(_this2.rn1a*jnx1+_this2.rn2a*jny1)*_this2.b1.iinertia}else{var dw1;if(0!=_this2.radius)j1=(_this2.b2.angvel-_this2.b1.angvel)*_this2.rMass,jMax1=_this2.rfric*_this2.c1.jnAcc,jOld1=_this2.jrAcc,_this2.jrAcc-=j1,_this2.jrAcc>jMax1?_this2.jrAcc=jMax1:_this2.jrAcc<-jMax1&&(_this2.jrAcc=-jMax1),j1=_this2.jrAcc-jOld1,_this2.b2.angvel+=j1*_this2.b2.iinertia,_this2.b1.angvel-=j1*_this2.b1.iinertia;v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel),v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel),j1=(_this2.c1.bounce+(_this2.nx*v1x1+_this2.ny*v1y1)+_this2.surfacey)*_this2.c1.nMass,(cjAcc1=(jOld1=_this2.c1.jnAcc)-j1)<0&&(cjAcc1=0),j1=cjAcc1-jOld1,_this2.c1.jnAcc=cjAcc1,jx3=_this2.nx*j1,jy3=_this2.ny*j1,_this2.b2.velx+=jx3*_this2.b2.imass,_this2.b2.vely+=jy3*_this2.b2.imass,_this2.b1.velx-=jx3*_this2.b1.imass,_this2.b1.vely-=jy3*_this2.b1.imass,_this2.b2.angvel+=_this2.rn1b*j1*_this2.b2.iinertia,_this2.b1.angvel-=_this2.rn1a*j1*_this2.b1.iinertia}var _this3=arb.colarb,v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel),v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel),j2=(v1y2*_this3.nx-v1x2*_this3.ny+_this3.surfacex)*_this3.c1.tMass,jMax2=_this3.c1.friction*_this3.c1.jnAcc,jOld2=_this3.c1.jtAcc,cjAcc2=jOld2-j2;cjAcc2>jMax2?cjAcc2=jMax2:cjAcc2<-jMax2&&(cjAcc2=-jMax2),j2=cjAcc2-jOld2,_this3.c1.jtAcc=cjAcc2;var jx4=-_this3.ny*j2,jy4=_this3.nx*j2;if(_this3.b2.velx+=jx4*_this3.b2.imass,_this3.b2.vely+=jy4*_this3.b2.imass,_this3.b1.velx-=jx4*_this3.b1.imass,_this3.b1.vely-=jy4*_this3.b1.imass,_this3.b2.angvel+=_this3.rt1b*j2*_this3.b2.iinertia,_this3.b1.angvel-=_this3.rt1a*j2*_this3.b1.iinertia,_this3.hc2){var v2x2=_this3.k2x+_this3.b2.velx-_this3.c2.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c2.r1y*_this3.b1.angvel),v2y2=_this3.k2y+_this3.b2.vely+_this3.c2.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c2.r1x*_this3.b1.angvel);j2=(v2y2*_this3.nx-v2x2*_this3.ny+_this3.surfacex)*_this3.c2.tMass,jMax2=_this3.c2.friction*_this3.c2.jnAcc,(cjAcc2=(jOld2=_this3.c2.jtAcc)-j2)>jMax2?cjAcc2=jMax2:cjAcc2<-jMax2&&(cjAcc2=-jMax2),j2=cjAcc2-jOld2,_this3.c2.jtAcc=cjAcc2,jx4=-_this3.ny*j2,jy4=_this3.nx*j2,_this3.b2.velx+=jx4*_this3.b2.imass,_this3.b2.vely+=jy4*_this3.b2.imass,_this3.b1.velx-=jx4*_this3.b1.imass,_this3.b1.vely-=jy4*_this3.b1.imass,_this3.b2.angvel+=_this3.rt2b*j2*_this3.b2.iinertia,_this3.b1.angvel-=_this3.rt2a*j2*_this3.b1.iinertia,v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel),v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel),v2x2=_this3.k2x+_this3.b2.velx-_this3.c2.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c2.r1y*_this3.b1.angvel),v2y2=_this3.k2y+_this3.b2.vely+_this3.c2.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c2.r1x*_this3.b1.angvel);var ax2=_this3.c1.jnAcc,ay2=_this3.c2.jnAcc,jnx2=v1x2*_this3.nx+v1y2*_this3.ny+_this3.surfacey+_this3.c1.bounce-(_this3.Ka*ax2+_this3.Kb*ay2),jny2=v2x2*_this3.nx+v2y2*_this3.ny+_this3.surfacey+_this3.c2.bounce-(_this3.Kb*ax2+_this3.Kc*ay2),xx2=-(_this3.kMassa*jnx2+_this3.kMassb*jny2),xy2=-(_this3.kMassb*jnx2+_this3.kMassc*jny2);xx2>=0&&xy2>=0?(jnx2=xx2-ax2,jny2=xy2-ay2,_this3.c1.jnAcc=xx2,_this3.c2.jnAcc=xy2):(xx2=-_this3.c1.nMass*jnx2)>=0&&_this3.Kb*xx2+jny2>=0?(jnx2=xx2-ax2,jny2=-ay2,_this3.c1.jnAcc=xx2,_this3.c2.jnAcc=0):(xy2=-_this3.c2.nMass*jny2)>=0&&_this3.Kb*xy2+jnx2>=0?(jnx2=-ax2,jny2=xy2-ay2,_this3.c1.jnAcc=0,_this3.c2.jnAcc=xy2):jnx2>=0&&jny2>=0?(jnx2=-ax2,jny2=-ay2,_this3.c1.jnAcc=_this3.c2.jnAcc=0):(jnx2=0,jny2=0),j2=jnx2+jny2,jx4=_this3.nx*j2,jy4=_this3.ny*j2,_this3.b2.velx+=jx4*_this3.b2.imass,_this3.b2.vely+=jy4*_this3.b2.imass,_this3.b1.velx-=jx4*_this3.b1.imass,_this3.b1.vely-=jy4*_this3.b1.imass,_this3.b2.angvel+=(_this3.rn1b*jnx2+_this3.rn2b*jny2)*_this3.b2.iinertia,_this3.b1.angvel-=(_this3.rn1a*jnx2+_this3.rn2a*jny2)*_this3.b1.iinertia}else{var dw2;if(0!=_this3.radius)j2=(_this3.b2.angvel-_this3.b1.angvel)*_this3.rMass,jMax2=_this3.rfric*_this3.c1.jnAcc,jOld2=_this3.jrAcc,_this3.jrAcc-=j2,_this3.jrAcc>jMax2?_this3.jrAcc=jMax2:_this3.jrAcc<-jMax2&&(_this3.jrAcc=-jMax2),j2=_this3.jrAcc-jOld2,_this3.b2.angvel+=j2*_this3.b2.iinertia,_this3.b1.angvel-=j2*_this3.b1.iinertia;v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel),v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel),j2=(_this3.c1.bounce+(_this3.nx*v1x2+_this3.ny*v1y2)+_this3.surfacey)*_this3.c1.nMass,(cjAcc2=(jOld2=_this3.c1.jnAcc)-j2)<0&&(cjAcc2=0),j2=cjAcc2-jOld2,_this3.c1.jnAcc=cjAcc2,jx4=_this3.nx*j2,jy4=_this3.ny*j2,_this3.b2.velx+=jx4*_this3.b2.imass,_this3.b2.vely+=jy4*_this3.b2.imass,_this3.b1.velx-=jx4*_this3.b1.imass,_this3.b1.vely-=jy4*_this3.b1.imass,_this3.b2.angvel+=_this3.rn1b*j2*_this3.b2.iinertia,_this3.b1.angvel-=_this3.rn1a*j2*_this3.b1.iinertia}var _this4=arb.colarb,v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel),v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel),j3=(v1y3*_this4.nx-v1x3*_this4.ny+_this4.surfacex)*_this4.c1.tMass,jMax3=_this4.c1.friction*_this4.c1.jnAcc,jOld3=_this4.c1.jtAcc,cjAcc3=jOld3-j3;cjAcc3>jMax3?cjAcc3=jMax3:cjAcc3<-jMax3&&(cjAcc3=-jMax3),j3=cjAcc3-jOld3,_this4.c1.jtAcc=cjAcc3;var jx5=-_this4.ny*j3,jy5=_this4.nx*j3;if(_this4.b2.velx+=jx5*_this4.b2.imass,_this4.b2.vely+=jy5*_this4.b2.imass,_this4.b1.velx-=jx5*_this4.b1.imass,_this4.b1.vely-=jy5*_this4.b1.imass,_this4.b2.angvel+=_this4.rt1b*j3*_this4.b2.iinertia,_this4.b1.angvel-=_this4.rt1a*j3*_this4.b1.iinertia,_this4.hc2){var v2x3=_this4.k2x+_this4.b2.velx-_this4.c2.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c2.r1y*_this4.b1.angvel),v2y3=_this4.k2y+_this4.b2.vely+_this4.c2.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c2.r1x*_this4.b1.angvel);j3=(v2y3*_this4.nx-v2x3*_this4.ny+_this4.surfacex)*_this4.c2.tMass,jMax3=_this4.c2.friction*_this4.c2.jnAcc,(cjAcc3=(jOld3=_this4.c2.jtAcc)-j3)>jMax3?cjAcc3=jMax3:cjAcc3<-jMax3&&(cjAcc3=-jMax3),j3=cjAcc3-jOld3,_this4.c2.jtAcc=cjAcc3,jx5=-_this4.ny*j3,jy5=_this4.nx*j3,_this4.b2.velx+=jx5*_this4.b2.imass,_this4.b2.vely+=jy5*_this4.b2.imass,_this4.b1.velx-=jx5*_this4.b1.imass,_this4.b1.vely-=jy5*_this4.b1.imass,_this4.b2.angvel+=_this4.rt2b*j3*_this4.b2.iinertia,_this4.b1.angvel-=_this4.rt2a*j3*_this4.b1.iinertia,v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel),v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel),v2x3=_this4.k2x+_this4.b2.velx-_this4.c2.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c2.r1y*_this4.b1.angvel),v2y3=_this4.k2y+_this4.b2.vely+_this4.c2.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c2.r1x*_this4.b1.angvel);var ax3=_this4.c1.jnAcc,ay3=_this4.c2.jnAcc,jnx3=v1x3*_this4.nx+v1y3*_this4.ny+_this4.surfacey+_this4.c1.bounce-(_this4.Ka*ax3+_this4.Kb*ay3),jny3=v2x3*_this4.nx+v2y3*_this4.ny+_this4.surfacey+_this4.c2.bounce-(_this4.Kb*ax3+_this4.Kc*ay3),xx3=-(_this4.kMassa*jnx3+_this4.kMassb*jny3),xy3=-(_this4.kMassb*jnx3+_this4.kMassc*jny3);xx3>=0&&xy3>=0?(jnx3=xx3-ax3,jny3=xy3-ay3,_this4.c1.jnAcc=xx3,_this4.c2.jnAcc=xy3):(xx3=-_this4.c1.nMass*jnx3)>=0&&_this4.Kb*xx3+jny3>=0?(jnx3=xx3-ax3,jny3=-ay3,_this4.c1.jnAcc=xx3,_this4.c2.jnAcc=0):(xy3=-_this4.c2.nMass*jny3)>=0&&_this4.Kb*xy3+jnx3>=0?(jnx3=-ax3,jny3=xy3-ay3,_this4.c1.jnAcc=0,_this4.c2.jnAcc=xy3):jnx3>=0&&jny3>=0?(jnx3=-ax3,jny3=-ay3,_this4.c1.jnAcc=_this4.c2.jnAcc=0):(jnx3=0,jny3=0),j3=jnx3+jny3,jx5=_this4.nx*j3,jy5=_this4.ny*j3,_this4.b2.velx+=jx5*_this4.b2.imass,_this4.b2.vely+=jy5*_this4.b2.imass,_this4.b1.velx-=jx5*_this4.b1.imass,_this4.b1.vely-=jy5*_this4.b1.imass,_this4.b2.angvel+=(_this4.rn1b*jnx3+_this4.rn2b*jny3)*_this4.b2.iinertia,_this4.b1.angvel-=(_this4.rn1a*jnx3+_this4.rn2a*jny3)*_this4.b1.iinertia}else{var dw3;if(0!=_this4.radius)j3=(_this4.b2.angvel-_this4.b1.angvel)*_this4.rMass,jMax3=_this4.rfric*_this4.c1.jnAcc,jOld3=_this4.jrAcc,_this4.jrAcc-=j3,_this4.jrAcc>jMax3?_this4.jrAcc=jMax3:_this4.jrAcc<-jMax3&&(_this4.jrAcc=-jMax3),j3=_this4.jrAcc-jOld3,_this4.b2.angvel+=j3*_this4.b2.iinertia,_this4.b1.angvel-=j3*_this4.b1.iinertia;v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel),v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel),j3=(_this4.c1.bounce+(_this4.nx*v1x3+_this4.ny*v1y3)+_this4.surfacey)*_this4.c1.nMass,(cjAcc3=(jOld3=_this4.c1.jnAcc)-j3)<0&&(cjAcc3=0),j3=cjAcc3-jOld3,_this4.c1.jnAcc=cjAcc3,jx5=_this4.nx*j3,jy5=_this4.ny*j3,_this4.b2.velx+=jx5*_this4.b2.imass,_this4.b2.vely+=jy5*_this4.b2.imass,_this4.b1.velx-=jx5*_this4.b1.imass,_this4.b1.vely-=jy5*_this4.b1.imass,_this4.b2.angvel+=_this4.rn1b*j3*_this4.b2.iinertia,_this4.b1.angvel-=_this4.rn1a*j3*_this4.b1.iinertia}b11.sweep_angvel=b11.angvel%MAX_VEL,b21.sweep_angvel=b21.angvel%MAX_VEL}if(null!=arb&&arb.active&&0!=(1&arb.immState)&&arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL){if(!b11.sweepFrozen&&3!=b11.type)if(b11.sweepFrozen=!0,minTOI.failed)b11.angvel=b11.sweep_angvel=0;else if(minTOI.slipped){var b12=b11;b12.sweep_angvel*=nape.Config.angularCCDSlipScale,b11.angvel=b12.sweep_angvel}else b11.angvel=b11.sweep_angvel;if(!b21.sweepFrozen&&3!=b21.type)if(b21.sweepFrozen=!0,minTOI.failed)b21.angvel=b21.sweep_angvel=0;else if(minTOI.slipped){var b22=b21;b22.sweep_angvel*=nape.Config.angularCCDSlipScale,b21.angvel=b22.sweep_angvel}else b21.angvel=b21.sweep_angvel}var o3=minTOI;o3.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o3}for(;null!=this.toiEvents.head;){var toi1,o4=this.toiEvents.pop_unsafe();o4.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o4}for(var cx_ite5=this.kinematics.head;null!=cx_ite5;){var cur=cx_ite5.elt,delta2=deltaTime-cur.sweepTime;if(0!=delta2){cur.sweepTime=deltaTime;var t6=delta2;if(cur.posx+=cur.velx*t6,cur.posy+=cur.vely*t6,0!=cur.angvel){var dr2=cur.sweep_angvel*delta2;if(cur.rot+=dr2,dr2*dr2>1e-4)cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot);else{var d22=dr2*dr2,p4=1-.5*d22,m2=1-d22*d22/8,nx2=(p4*cur.axisx+dr2*cur.axisy)*m2;cur.axisy=(p4*cur.axisy-dr2*cur.axisx)*m2,cur.axisx=nx2}}}cur.sweepTime=0,cx_ite5=cx_ite5.next}for(var cx_ite6=this.live.head;null!=cx_ite6;){var cur1=cx_ite6.elt;if(!cur1.sweepFrozen){var delta3=deltaTime-cur1.sweepTime;if(0!=delta3){cur1.sweepTime=deltaTime;var t7=delta3;if(cur1.posx+=cur1.velx*t7,cur1.posy+=cur1.vely*t7,0!=cur1.angvel){var dr3=cur1.sweep_angvel*delta3;if(cur1.rot+=dr3,dr3*dr3>1e-4)cur1.axisx=Math.sin(cur1.rot),cur1.axisy=Math.cos(cur1.rot);else{var d23=dr3*dr3,p5=1-.5*d23,m3=1-d23*d23/8,nx3=(p5*cur1.axisx+dr3*cur1.axisy)*m3;cur1.axisy=(p5*cur1.axisy-dr3*cur1.axisx)*m3,cur1.axisx=nx3}}}}cur1.sweepTime=0,cx_ite6=cx_ite6.next}},zpp_nape.space.ZPP_Space.prototype.continuousEvent=function(s1,s2,stat,in_arb,_){if(s1.body.sweepFrozen&&s2.body.sweepFrozen)return in_arb;if(s1.body.disableCCD||s2.body.disableCCD)return in_arb;var tmp;if(null==in_arb||null!=in_arb.colarb){var b1=s1.body,b2=s2.body,con_ignore;con_ignore=!1;for(var cx_ite=b1.constraints.head,tmp1,tmp2;null!=cx_ite;){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=!0;break}cx_ite=cx_ite.next}if(con_ignore)tmp2=!1;else{for(var cur=s1;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;var g1=null==cur?null:cur.group,tmp3;if(null==g1)tmp3=!1;else{for(var cur1=s2;null!=cur1&&null==cur1.group;)cur1=null!=cur1.ishape?cur1.ishape.body:null!=cur1.icompound?cur1.icompound.compound:cur1.ibody.compound;var g2=null==cur1?null:cur1.group;if(null==g2)tmp3=!1;else{for(var ret=!1;null!=g1&&null!=g2;){if(g1==g2){ret=g1.ignore;break}g1.depth<g2.depth?g2=g2.group:g1=g1.group}tmp3=ret}}tmp2=!tmp3}if(tmp2){var tmp4;if(s1.sensorEnabled||s2.sensorEnabled){var _this=s1.filter,x=s2.filter;tmp4=0!=(_this.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&_this.sensorGroup)}else tmp4=!1;if(tmp4)tmp1=2;else{var tmp5;if(s1.fluidEnabled||s2.fluidEnabled){var _this1=s1.filter,x1=s2.filter;tmp5=0!=(_this1.fluidMask&x1.fluidGroup)&&0!=(x1.fluidMask&_this1.fluidGroup)}else tmp5=!1;if(!tmp5||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia){var _this2=s1.filter,x2=s2.filter;tmp1=0==(_this2.collisionMask&x2.collisionGroup)||0==(x2.collisionMask&_this2.collisionGroup)||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia?-1:1}else tmp1=0}}else tmp1=-1;tmp=tmp1<=0}else tmp=!0;if(tmp)return in_arb;var b11=s1.body,b21=s2.body;if(stat||b11.bullet||b21.bullet){var toi;null==zpp_nape.geom.ZPP_ToiEvent.zpp_pool?toi=new zpp_nape.geom.ZPP_ToiEvent:(toi=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=toi.next,toi.next=null),toi.failed=!1,toi.s1=toi.s2=null,toi.arbiter=null;var kin=3==b11.type||3==b21.type;if(stat&&!kin)2!=s1.body.type?(toi.s2=s1,toi.s1=s2):(toi.s1=s1,toi.s2=s2),toi.kinematic=!1,zpp_nape.geom.ZPP_SweepDistance.staticSweep(toi,this.pre_dt,0,nape.Config.collisionSlopCCD);else if(toi.s1=s1,toi.s2=s2,toi.kinematic=kin,toi.s1.body.sweepFrozen||toi.s2.body.sweepFrozen){if(toi.s1.body.sweepFrozen){var tmp6=toi.s1;toi.s1=toi.s2,toi.s2=tmp6,toi.frozen1=!1,toi.frozen2=!0}zpp_nape.geom.ZPP_SweepDistance.staticSweep(toi,this.pre_dt,0,nape.Config.collisionSlopCCD)}else zpp_nape.geom.ZPP_SweepDistance.dynamicSweep(toi,this.pre_dt,0,nape.Config.collisionSlopCCD);if(stat&&toi.toi<0||toi.failed){var o=toi;o.next=zpp_nape.geom.ZPP_ToiEvent.zpp_pool,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=o}else this.toiEvents.add(toi),toi.frozen1=toi.s1.body.sweepFrozen,toi.frozen2=toi.s2.body.sweepFrozen,toi.arbiter=null!=in_arb?in_arb.colarb:null}return in_arb},zpp_nape.space.ZPP_Space.prototype.bodyCbWake=function(b){if(2==b.type&&null!=b.cbSet)if(this.midstep)for(var cx_ite=b.cbSet.bodylisteners.head;null!=cx_ite;){var i=cx_ite.elt;if(2==i.event){var cb=this.push_callback(i);cb.event=2,cb.body=b,cx_ite=cx_ite.next}else cx_ite=cx_ite.next}else b.component.woken=!0},zpp_nape.space.ZPP_Space.prototype.bodyCbSleep=function(b){if(2==b.type&&null!=b.cbSet)for(var cx_ite=b.cbSet.bodylisteners.head;null!=cx_ite;){var i=cx_ite.elt;if(3==i.event){var cb=this.push_callback(i);cb.event=3,cb.body=b,cx_ite=cx_ite.next}else cx_ite=cx_ite.next}},zpp_nape.space.ZPP_Space.prototype.constraintCbWake=function(con){if(null!=con.cbSet)if(this.midstep)for(var cx_ite=con.cbSet.conlisteners.head;null!=cx_ite;){var i=cx_ite.elt;if(2==i.event){var cb=this.push_callback(i);cb.event=2,cb.constraint=con,cx_ite=cx_ite.next}else cx_ite=cx_ite.next}else con.component.woken=!0},zpp_nape.space.ZPP_Space.prototype.constraintCbSleep=function(con){if(null!=con.cbSet)for(var cx_ite=con.cbSet.conlisteners.head;null!=cx_ite;){var i=cx_ite.elt;if(3==i.event){var cb=this.push_callback(i);cb.event=3,cb.constraint=con,cx_ite=cx_ite.next}else cx_ite=cx_ite.next}},zpp_nape.space.ZPP_Space.prototype.constraintCbBreak=function(con){if(null!=con.cbSet)for(var cx_ite=con.cbSet.conlisteners.head;null!=cx_ite;){var i=cx_ite.elt;if(4==i.event){var cb=this.push_callback(i);cb.event=4,cb.constraint=con,cx_ite=cx_ite.next}else cx_ite=cx_ite.next}},zpp_nape.space.ZPP_Space.prototype.nullListenerType=function(cb1,cb2){for(var stack=new zpp_nape.util.ZNPList_ZPP_Interactor,cx_ite=cb1.interactors.head;null!=cx_ite;){var i=cx_ite.elt;stack.add(i),cx_ite=cx_ite.next}if(cb1!=cb2)for(var cx_ite1=cb2.interactors.head;null!=cx_ite1;){var i1=cx_ite1.elt;stack.add(i1),cx_ite1=cx_ite1.next}for(;null!=stack.head;){var intx=stack.pop_unsafe();if(null!=intx.icompound){for(var comp=intx.icompound,cx_ite2=comp.bodies.head;null!=cx_ite2;){var i2=cx_ite2.elt;stack.add(i2),cx_ite2=cx_ite2.next}for(var cx_ite3=comp.compounds.head;null!=cx_ite3;){var i3=cx_ite3.elt;stack.add(i3),cx_ite3=cx_ite3.next}}else for(var xbody=null!=intx.ibody?intx.ibody:intx.ishape.body,xshp=null!=intx.ishape?intx.ishape:null,cx_ite4=xbody.arbiters.head;null!=cx_ite4;){var xarb=cx_ite4.elt;if(0!=xarb.present)if(null==xshp||xarb.ws1==xshp||xarb.ws2==xshp){this.MRCA_chains(xarb.ws1,xarb.ws2);for(var cx_ite5=this.mrca1.head;null!=cx_ite5;){var i11=cx_ite5.elt;if(i11.cbSet==cb1||i11.cbSet==cb2){for(var cx_ite6=this.mrca2.head;null!=cx_ite6;){var i21=cx_ite6.elt;if(i11.cbSet==cb1&&i21.cbSet!=cb2||i11.cbSet==cb2&&i21.cbSet!=cb1)cx_ite6=cx_ite6.next;else{var callbackset=zpp_nape.phys.ZPP_Interactor.get(i11,i21);if(null!=callbackset){for(;null!=callbackset.arbiters.head;){var arb;callbackset.arbiters.pop_unsafe().present--}this.remove_callbackset(callbackset)}cx_ite6=cx_ite6.next}}cx_ite5=cx_ite5.next}else cx_ite5=cx_ite5.next}cx_ite4=cx_ite4.next}else cx_ite4=cx_ite4.next;else cx_ite4=cx_ite4.next}}},zpp_nape.space.ZPP_Space.prototype.nullInteractorType=function(intx,me){if(null==me&&(me=intx),null!=intx.icompound){for(var comp=intx.icompound,cx_ite=comp.bodies.head;null!=cx_ite;){var body=cx_ite.elt;this.nullInteractorType(body,me),cx_ite=cx_ite.next}for(var cx_ite1=comp.compounds.head;null!=cx_ite1;){var comp1=cx_ite1.elt;this.nullInteractorType(comp1,me),cx_ite1=cx_ite1.next}}else for(var xbody=null!=intx.ibody?intx.ibody:intx.ishape.body,xshp=null!=intx.ishape?intx.ishape:null,cx_ite2=xbody.arbiters.head;null!=cx_ite2;){var xarb=cx_ite2.elt;if(0!=xarb.present)if(null==xshp||xarb.ws1==xshp||xarb.ws2==xshp){this.MRCA_chains(xarb.ws1,xarb.ws2);for(var cx_ite3=this.mrca1.head;null!=cx_ite3;){for(var i1=cx_ite3.elt,cx_ite4=this.mrca2.head;null!=cx_ite4;){var i2=cx_ite4.elt;if(i1==me||i2==me){var callbackset=zpp_nape.phys.ZPP_Interactor.get(i1,i2);null!=callbackset&&(xarb.present--,callbackset.remove_arb(xarb),null==callbackset.arbiters.head&&this.remove_callbackset(callbackset)),cx_ite4=cx_ite4.next}else cx_ite4=cx_ite4.next}cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}else cx_ite2=cx_ite2.next;else cx_ite2=cx_ite2.next}},zpp_nape.space.ZPP_Space.prototype.freshListenerType=function(cb1,cb2){for(var stack=new zpp_nape.util.ZNPList_ZPP_Interactor,cx_ite=cb1.interactors.head;null!=cx_ite;){var i=cx_ite.elt;stack.add(i),cx_ite=cx_ite.next}if(cb1!=cb2)for(var cx_ite1=cb2.interactors.head;null!=cx_ite1;){var i1=cx_ite1.elt;stack.add(i1),cx_ite1=cx_ite1.next}for(;null!=stack.head;){var intx=stack.pop_unsafe();if(null!=intx.icompound){for(var comp=intx.icompound,cx_ite2=comp.bodies.head;null!=cx_ite2;){var i2=cx_ite2.elt;stack.add(i2),cx_ite2=cx_ite2.next}for(var cx_ite3=comp.compounds.head;null!=cx_ite3;){var i3=cx_ite3.elt;stack.add(i3),cx_ite3=cx_ite3.next}}else for(var xbody=null!=intx.ibody?intx.ibody:intx.ishape.body,xshp=null!=intx.ishape?intx.ishape:null,cx_ite4=xbody.arbiters.head;null!=cx_ite4;){var xarb=cx_ite4.elt;if(xarb.presentable)if(null==xshp||xarb.ws1==xshp||xarb.ws2==xshp){this.MRCA_chains(xarb.ws1,xarb.ws2);for(var cx_ite5=this.mrca1.head;null!=cx_ite5;){var i11=cx_ite5.elt;if(i11.cbSet==cb1||i11.cbSet==cb2){for(var cx_ite6=this.mrca2.head;null!=cx_ite6;){var i21=cx_ite6.elt;if(i11.cbSet==cb1&&i21.cbSet!=cb2||i11.cbSet==cb2&&i21.cbSet!=cb1)cx_ite6=cx_ite6.next;else{var callbackset=zpp_nape.phys.ZPP_Interactor.get(i11,i21),tmp,ret;null==callbackset&&(callbackset=zpp_nape.space.ZPP_CallbackSet.get(i11,i21),this.add_callbackset(callbackset)),ret=!1;for(var cx_ite7=callbackset.arbiters.head;null!=cx_ite7;){var npite;if(cx_ite7.elt==xarb){ret=!0;break}cx_ite7=cx_ite7.next}if(ret)tmp=!1;else{var _this=callbackset.arbiters,ret1;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=xarb;var temp=ret1;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++,tmp=!0}tmp&&xarb.present++,cx_ite6=cx_ite6.next}}cx_ite5=cx_ite5.next}else cx_ite5=cx_ite5.next}cx_ite4=cx_ite4.next}else cx_ite4=cx_ite4.next;else cx_ite4=cx_ite4.next}}},zpp_nape.space.ZPP_Space.prototype.freshInteractorType=function(intx,me){if(null==me&&(me=intx),null!=intx.icompound){for(var comp=intx.icompound,cx_ite=comp.bodies.head;null!=cx_ite;){var body=cx_ite.elt;this.freshInteractorType(body,me),cx_ite=cx_ite.next}for(var cx_ite1=comp.compounds.head;null!=cx_ite1;){var comp1=cx_ite1.elt;this.freshInteractorType(comp1,me),cx_ite1=cx_ite1.next}}else for(var xbody=null!=intx.ibody?intx.ibody:intx.ishape.body,xshp=null!=intx.ishape?intx.ishape:null,cx_ite2=xbody.arbiters.head;null!=cx_ite2;){var xarb=cx_ite2.elt;if(xarb.presentable)if(null==xshp||xarb.ws1==xshp||xarb.ws2==xshp){this.MRCA_chains(xarb.ws1,xarb.ws2);for(var cx_ite3=this.mrca1.head;null!=cx_ite3;){for(var i1=cx_ite3.elt,cx_ite4=this.mrca2.head;null!=cx_ite4;){var i2=cx_ite4.elt;if(i1==me||i2==me){var cb1=i1.cbSet,cb2=i2.cbSet;cb1.validate(),cb2.validate();for(var _this=cb1.manager,ret=null,pairs,cx_ite5=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret1;null!=cx_ite5;){var p=cx_ite5.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret=p;break}cx_ite5=cx_ite5.next}if(null==ret)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret1=new zpp_nape.callbacks.ZPP_CbSetPair:(ret1=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret1.next,ret1.next=null),ret1.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret1.a=cb1,ret1.b=cb2):(ret1.a=cb2,ret1.b=cb1),ret=ret1,cb1.cbpairs.add(ret),cb2!=cb1&&cb2.cbpairs.add(ret);if(ret.zip_listeners&&(ret.zip_listeners=!1,ret.__validate()),null!=ret.listeners.head){var callbackset=zpp_nape.phys.ZPP_Interactor.get(i1,i2),tmp,ret2;null==callbackset&&(callbackset=zpp_nape.space.ZPP_CallbackSet.get(i1,i2),this.add_callbackset(callbackset)),ret2=!1;for(var cx_ite6=callbackset.arbiters.head;null!=cx_ite6;){var npite;if(cx_ite6.elt==xarb){ret2=!0;break}cx_ite6=cx_ite6.next}if(ret2)tmp=!1;else{var _this1=callbackset.arbiters,ret3;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret3=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret3.next,ret3.next=null),ret3.elt=xarb;var temp=ret3;temp.next=_this1.head,_this1.head=temp,_this1.modified=!0,_this1.length++,tmp=!0}tmp&&xarb.present++}cx_ite4=cx_ite4.next}else cx_ite4=cx_ite4.next}cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}else cx_ite2=cx_ite2.next;else cx_ite2=cx_ite2.next}},zpp_nape.space.ZPP_Space.prototype.wakeCompound=function(x){for(var cx_ite=x.bodies.head;null!=cx_ite;){var y,o=cx_ite.elt;o.world||(o.component.waket=this.stamp+(this.midstep?0:1),3==o.type&&(o.kinematicDelaySleep=!0),o.component.sleeping&&this.really_wake(o,!1)),cx_ite=cx_ite.next}for(var cx_ite1=x.constraints.head;null!=cx_ite1;){var i=cx_ite1.elt;this.wake_constraint(i),cx_ite1=cx_ite1.next}for(var cx_ite2=x.compounds.head;null!=cx_ite2;){var i1=cx_ite2.elt;this.wakeCompound(i1),cx_ite2=cx_ite2.next}},zpp_nape.space.ZPP_Space.prototype.wakeIsland=function(i){for(;null!=i.comps.head;){var c=i.comps.pop_unsafe();if(c.waket=this.stamp+(this.midstep?0:1),c.isBody){var b=c.body;this.live.add(b);for(var cx_ite=b.arbiters.head;null!=cx_ite;){var arb=cx_ite.elt;if(arb.sleeping)if(arb.sleeping=!1,arb.up_stamp+=this.stamp-arb.sleep_stamp,arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL){var carb=arb.colarb;if(carb.stat){var _this=this.c_arbiters_true,ret;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=carb;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++}else{var _this1=this.c_arbiters_false,ret1;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret1=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret1.next,ret1.next=null),ret1.elt=carb;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++}}else if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID){var _this2=this.f_arbiters,o=arb.fluidarb,ret2;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret2=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret2.next,ret2.next=null),ret2.elt=o;var temp2=ret2;temp2.next=_this2.head,_this2.head=temp2,_this2.modified=!0,_this2.length++}else{var _this3=this.s_arbiters,o1=arb.sensorarb,ret3;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret3=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o1;var temp3=ret3;temp3.next=_this3.head,_this3.head=temp3,_this3.modified=!0,_this3.length++}cx_ite=cx_ite.next}if(this.bodyCbWake(b),c.sleeping=!1,c.island=null,c.parent=c,c.rank=0,1!=b.type)for(var cx_ite1=b.shapes.head;null!=cx_ite1;){var shape=cx_ite1.elt;null!=shape.node&&this.bphase.sync(shape),cx_ite1=cx_ite1.next}}else{var con=c.constraint,_this4=this.live_constraints,ret4;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret4=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret4.next,ret4.next=null),ret4.elt=con;var temp4=ret4;temp4.next=_this4.head,_this4.head=temp4,_this4.modified=!0,_this4.length++,this.constraintCbWake(con),c.sleeping=!1,c.island=null,c.parent=c,c.rank=0}}var o2=i;o2.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o2},zpp_nape.space.ZPP_Space.prototype.non_inlined_wake=function(o,fst){null==fst&&(fst=!1);var o1=o;o1.world||(o1.component.waket=this.stamp+(this.midstep?0:1),3==o1.type&&(o1.kinematicDelaySleep=!0),o1.component.sleeping&&this.really_wake(o1,fst))},zpp_nape.space.ZPP_Space.prototype.really_wake=function(o,fst){if(null==fst&&(fst=!1),null==o.component.island){if(o.component.sleeping=!1,3==o.type||1==o.type){var _this=this.staticsleep,ret;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Body:(ret=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++}else{var _this1=this.live,ret1;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Body:(ret1=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret1.next,ret1.next=null),ret1.elt=o;var temp1=ret1;temp1.next=_this1.head,_this1.head=temp1,_this1.modified=!0,_this1.length++}for(var cx_ite=o.constraints.head;null!=cx_ite;){var con=cx_ite.elt;con.space==this&&this.wake_constraint(con),cx_ite=cx_ite.next}for(var cx_ite1=o.arbiters.head;null!=cx_ite1;){var arb=cx_ite1.elt;if(arb.sleeping)if(arb.sleeping=!1,arb.up_stamp+=this.stamp+(this.midstep?0:1)-arb.sleep_stamp,arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL){var carb=arb.colarb;if(carb.stat){var _this2=this.c_arbiters_true,ret2;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret2=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret2.next,ret2.next=null),ret2.elt=carb;var temp2=ret2;temp2.next=_this2.head,_this2.head=temp2,_this2.modified=!0,_this2.length++}else{var _this3=this.c_arbiters_false,ret3;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret3=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret3.next,ret3.next=null),ret3.elt=carb;var temp3=ret3;temp3.next=_this3.head,_this3.head=temp3,_this3.modified=!0,_this3.length++}}else if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID){var _this4=this.f_arbiters,o1=arb.fluidarb,ret4;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret4=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret4.next,ret4.next=null),ret4.elt=o1;var temp4=ret4;temp4.next=_this4.head,_this4.head=temp4,_this4.modified=!0,_this4.length++}else{var _this5=this.s_arbiters,o2=arb.sensorarb,ret5;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret5=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret5.next,ret5.next=null),ret5.elt=o2;var temp5=ret5;temp5.next=_this5.head,_this5.head=temp5,_this5.modified=!0,_this5.length++}if(arb.type!=zpp_nape.dynamics.ZPP_Arbiter.SENSOR&&!arb.cleared&&arb.up_stamp>=this.stamp&&0!=(1&arb.immState)){if(2==arb.b1.type&&arb.b1.component.sleeping){var o3=arb.b1;o3.world||(o3.component.waket=this.stamp+(this.midstep?0:1),3==o3.type&&(o3.kinematicDelaySleep=!0),o3.component.sleeping&&this.really_wake(o3,!1))}if(2==arb.b2.type&&arb.b2.component.sleeping){var o4=arb.b2;o4.world||(o4.component.waket=this.stamp+(this.midstep?0:1),3==o4.type&&(o4.kinematicDelaySleep=!0),o4.component.sleeping&&this.really_wake(o4,!1))}}cx_ite1=cx_ite1.next}if(fst||2!=o.type||this.bodyCbWake(o),!fst&&!this.bphase.is_sweep&&1!=o.type)for(var cx_ite2=o.shapes.head;null!=cx_ite2;){var shape=cx_ite2.elt;null!=shape.node&&this.bphase.sync(shape),cx_ite2=cx_ite2.next}}else this.wakeIsland(o.component.island)},zpp_nape.space.ZPP_Space.prototype.wake_constraint=function(con,fst){if(null==fst&&(fst=!1),con.active){if(con.component.waket=this.stamp+(this.midstep?0:1),con.component.sleeping){if(null==con.component.island){con.component.sleeping=!1;var _this=this.live_constraints,ret;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret.next,ret.next=null),ret.elt=con;var temp=ret;temp.next=_this.head,_this.head=temp,_this.modified=!0,_this.length++,con.wake_connected(),fst||this.constraintCbWake(con)}else this.wakeIsland(con.component.island);return!0}return!1}return!1},zpp_nape.space.ZPP_Space.prototype.doForests=function(dt){for(var cx_ite=this.c_arbiters_false.head;null!=cx_ite;){var arb=cx_ite.elt;if(!arb.cleared&&arb.up_stamp==this.stamp&&0!=(1&arb.immState)&&2==arb.b1.type&&2==arb.b2.type){var xr,yr;if(arb.b1.component==arb.b1.component.parent)xr=arb.b1.component;else{for(var obj=arb.b1.component,stack=null;obj!=obj.parent;){var nxt=obj.parent;obj.parent=stack,stack=obj,obj=nxt}for(;null!=stack;){var nxt1=stack.parent;stack.parent=obj,stack=nxt1}xr=obj}if(arb.b2.component==arb.b2.component.parent)yr=arb.b2.component;else{for(var obj1=arb.b2.component,stack1=null;obj1!=obj1.parent;){var nxt2=obj1.parent;obj1.parent=stack1,stack1=obj1,obj1=nxt2}for(;null!=stack1;){var nxt3=stack1.parent;stack1.parent=obj1,stack1=nxt3}yr=obj1}xr!=yr&&(xr.rank<yr.rank?xr.parent=yr:xr.rank>yr.rank?yr.parent=xr:(yr.parent=xr,xr.rank++))}cx_ite=cx_ite.next}for(var cx_ite1=this.f_arbiters.head;null!=cx_ite1;){var arb1=cx_ite1.elt;if(!arb1.cleared&&arb1.up_stamp==this.stamp&&0!=(1&arb1.immState)&&2==arb1.b1.type&&2==arb1.b2.type){var xr1,yr1;if(arb1.b1.component==arb1.b1.component.parent)xr1=arb1.b1.component;else{for(var obj2=arb1.b1.component,stack2=null;obj2!=obj2.parent;){var nxt4=obj2.parent;obj2.parent=stack2,stack2=obj2,obj2=nxt4}for(;null!=stack2;){var nxt5=stack2.parent;stack2.parent=obj2,stack2=nxt5}xr1=obj2}if(arb1.b2.component==arb1.b2.component.parent)yr1=arb1.b2.component;else{for(var obj3=arb1.b2.component,stack3=null;obj3!=obj3.parent;){var nxt6=obj3.parent;obj3.parent=stack3,stack3=obj3,obj3=nxt6}for(;null!=stack3;){var nxt7=stack3.parent;stack3.parent=obj3,stack3=nxt7}yr1=obj3}xr1!=yr1&&(xr1.rank<yr1.rank?xr1.parent=yr1:xr1.rank>yr1.rank?yr1.parent=xr1:(yr1.parent=xr1,xr1.rank++))}cx_ite1=cx_ite1.next}for(var cx_ite2=this.live_constraints.head;null!=cx_ite2;){var con;cx_ite2.elt.forest(),cx_ite2=cx_ite2.next}for(;null!=this.live.head;){var _this=this.live,ret=_this.head.elt;_this.pop();var o=ret,oc=o.component,root;if(oc==oc.parent)root=oc;else{for(var obj4=oc,stack4=null;obj4!=obj4.parent;){var nxt8=obj4.parent;obj4.parent=stack4,stack4=obj4,obj4=nxt8}for(;null!=stack4;){var nxt9=stack4.parent;stack4.parent=obj4,stack4=nxt9}root=obj4}if(null==root.island){null==zpp_nape.space.ZPP_Island.zpp_pool?root.island=new zpp_nape.space.ZPP_Island:(root.island=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=root.island.next,root.island.next=null),root.island.waket=0;var _this1=this.islands,o1=root.island;o1._inuse=!0;var temp=o1;temp.next=_this1.next,_this1.next=temp,_this1.modified=!0,_this1.length++,root.island.sleep=!0}oc.island=root.island;var _this2=oc.island.comps,ret1;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret1=new zpp_nape.util.ZNPNode_ZPP_Component:(ret1=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret1.next,ret1.next=null),ret1.elt=oc;var temp1=ret1;temp1.next=_this2.head,_this2.head=temp1,_this2.modified=!0,_this2.length++;var rest=o.atRest(dt);oc.island.sleep=oc.island.sleep&&rest,oc.waket>oc.island.waket&&(oc.island.waket=oc.waket)}for(;null!=this.live_constraints.head;){var _this3=this.live_constraints,ret2=_this3.head.elt;_this3.pop();var o2,oc1=ret2.component,root1;if(oc1==oc1.parent)root1=oc1;else{for(var obj5=oc1,stack5=null;obj5!=obj5.parent;){var nxt10=obj5.parent;obj5.parent=stack5,stack5=obj5,obj5=nxt10}for(;null!=stack5;){var nxt11=stack5.parent;stack5.parent=obj5,stack5=nxt11}root1=obj5}oc1.island=root1.island;var _this4=oc1.island.comps,ret3;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_Component:(ret3=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret3.next,ret3.next=null),ret3.elt=oc1;var temp2=ret3;temp2.next=_this4.head,_this4.head=temp2,_this4.modified=!0,_this4.length++,oc1.waket>oc1.island.waket&&(oc1.island.waket=oc1.waket)}for(;null!=this.islands.next;){var _this5=this.islands,ret4=_this5.next;_this5.pop();var i=ret4;if(i.sleep)for(var cx_ite3=i.comps.head;null!=cx_ite3;){var c=cx_ite3.elt;if(c.isBody){var b=c.body;b.velx=0,b.vely=0,b.angvel=0,c.sleeping=!0;for(var cx_ite4=b.shapes.head;null!=cx_ite4;){var shape=cx_ite4.elt;this.bphase.sync(shape),cx_ite4=cx_ite4.next}this.bodyCbSleep(b)}else{var con1=c.constraint;this.constraintCbSleep(con1),c.sleeping=!0}cx_ite3=cx_ite3.next}else{for(;null!=i.comps.head;){var _this6=i.comps,ret5=_this6.head.elt;_this6.pop();var c1=ret5;if(c1.waket=i.waket,c1.isBody){var _this7=this.live,o3=c1.body,ret6;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_Body:(ret6=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret6.next,ret6.next=null),ret6.elt=o3;var temp3=ret6;temp3.next=_this7.head,_this7.head=temp3,_this7.modified=!0,_this7.length++}else{var _this8=this.live_constraints,o4=c1.constraint,ret7;null==zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_Constraint:(ret7=zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=ret7.next,ret7.next=null),ret7.elt=o4;var temp4=ret7;temp4.next=_this8.head,_this8.head=temp4,_this8.modified=!0,_this8.length++}c1.sleeping=!1,c1.island=null,c1.parent=c1,c1.rank=0}var o5=i;o5.next=zpp_nape.space.ZPP_Island.zpp_pool,zpp_nape.space.ZPP_Island.zpp_pool=o5}}},zpp_nape.space.ZPP_Space.prototype.sleepArbiters=function(){var pre=null,arbs=this.c_arbiters_true,arbite=arbs.head,fst=null!=this.c_arbiters_false;for(fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre=null);null!=arbite;){var arb=arbite.elt;if(arb.b1.component.sleeping&&arb.b2.component.sleeping){var old,ret;arb.sleep_stamp=this.stamp,arb.sleeping=!0,null==pre?(ret=(old=arbs.head).next,arbs.head=ret,null==arbs.head&&(arbs.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(arbs.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,arbs.modified=!0,arbs.length--,arbs.pushmod=!0,arbite=ret,fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre=null)}else pre=arbite,arbite=arbite.next,fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre=null)}var pre1=null,arbs1=this.f_arbiters,arbite1=arbs1.head,fst1=!1;for(fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre1=null);null!=arbite1;){var arb1=arbite1.elt;if(arb1.b1.component.sleeping&&arb1.b2.component.sleeping){var old1,ret1;arb1.sleep_stamp=this.stamp,arb1.sleeping=!0,null==pre1?(ret1=(old1=arbs1.head).next,arbs1.head=ret1,null==arbs1.head&&(arbs1.pushmod=!0)):(ret1=(old1=pre1.next).next,pre1.next=ret1,null==ret1&&(arbs1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o1,arbs1.modified=!0,arbs1.length--,arbs1.pushmod=!0,arbite1=ret1,fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre1=null)}else pre1=arbite1,arbite1=arbite1.next,fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre1=null)}var pre2=null,arbs2=this.s_arbiters,arbite2=arbs2.head,fst2=!1;for(fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre2=null);null!=arbite2;){var arb2=arbite2.elt;if(arb2.b1.component.sleeping&&arb2.b2.component.sleeping){var old2,ret2;arb2.sleep_stamp=this.stamp,arb2.sleeping=!0,null==pre2?(ret2=(old2=arbs2.head).next,arbs2.head=ret2,null==arbs2.head&&(arbs2.pushmod=!0)):(ret2=(old2=pre2.next).next,pre2.next=ret2,null==ret2&&(arbs2.pushmod=!0));var o2=old2;o2.elt=null,o2.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o2,arbs2.modified=!0,arbs2.length--,arbs2.pushmod=!0,arbite2=ret2,fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre2=null)}else pre2=arbite2,arbite2=arbite2.next,fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre2=null)}},zpp_nape.space.ZPP_Space.prototype.static_validation=function(body){if(null!=body.shapes.head){if(null==body.shapes.head)throw new js._Boot.HaxeError("Error: Body bounds only makes sense if it contains shapes");if(body.zip_aabb){body.zip_aabb=!1,body.aabb.minx=1/0,body.aabb.miny=1/0,body.aabb.maxx=-1/0,body.aabb.maxy=-1/0;for(var cx_ite=body.shapes.head;null!=cx_ite;){var s=cx_ite.elt;if(s.zip_aabb&&null!=s.body)if(s.zip_aabb=!1,0==s.type){var _this=s.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite1=_this1.lverts.next,u=cx_ite1,v=cx_ite1=cx_ite1.next;for(cx_ite1=cx_ite1.next;null!=cx_ite1;){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite1=cx_ite1.next}var w1=cx_ite1=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite1=cx_ite1.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=s.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite2=_this3.gverts.next;null!=cx_ite2;){var g=cx_ite2,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite2=cx_ite2.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite3=_this3.gverts.next.next;null!=cx_ite3;){var p=cx_ite3;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite3=cx_ite3.next}}var _this5=body.aabb,x=s.aabb;x.minx<_this5.minx&&(_this5.minx=x.minx),x.maxx>_this5.maxx&&(_this5.maxx=x.maxx),x.miny<_this5.miny&&(_this5.miny=x.miny),x.maxy>_this5.maxy&&(_this5.maxy=x.maxy),cx_ite=cx_ite.next}}}if(body.validate_mass(),body.validate_inertia(),0!=body.velx||0!=body.vely||0!=body.angvel)throw new js._Boot.HaxeError("Error: Static body cannot have any real velocity, only kinematic or surface velocities");for(var cx_ite4=body.shapes.head;null!=cx_ite4;){var s1=cx_ite4.elt;if(1==s1.type){var _this6=s1.polygon;_this6.zip_sanitation&&(_this6.zip_sanitation=!1,_this6.splice_collinear_real());var res=s1.polygon.valid();if(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),res!=zpp_nape.util.ZPP_Flags.ValidationResult_VALID)throw new js._Boot.HaxeError("Error: Cannot simulate with an invalid Polygon : "+s1.polygon.outer.toString()+" is invalid : "+res.toString());var _this7=s1.polygon;if(_this7.zip_gaxi&&null!=_this7.body){_this7.zip_gaxi=!1,_this7.validate_laxi();var _this8=_this7.body;if(_this8.zip_axis&&(_this8.zip_axis=!1,_this8.axisx=Math.sin(_this8.rot),_this8.axisy=Math.cos(_this8.rot)),_this7.zip_gverts&&null!=_this7.body){_this7.zip_gverts=!1,_this7.validate_lverts();var _this9=_this7.body;_this9.zip_axis&&(_this9.zip_axis=!1,_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot));for(var li1=_this7.lverts.next,cx_ite5=_this7.gverts.next;null!=cx_ite5;){var g1=cx_ite5,l1=li1;li1=li1.next,g1.x=_this7.body.posx+(_this7.body.axisy*l1.x-_this7.body.axisx*l1.y),g1.y=_this7.body.posy+(l1.x*_this7.body.axisx+l1.y*_this7.body.axisy),cx_ite5=cx_ite5.next}}var ite=_this7.edges.head,cx_ite6=_this7.gverts.next,u1=cx_ite6;for(cx_ite6=cx_ite6.next;null!=cx_ite6;){var v1=cx_ite6,e=ite.elt;ite=ite.next,e.gp0=u1,e.gp1=v1,e.gnormx=_this7.body.axisy*e.lnormx-_this7.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this7.body.axisx+e.lnormy*_this7.body.axisy,e.gprojection=_this7.body.posx*e.gnormx+_this7.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u1=v1,cx_ite6=cx_ite6.next}var v2=_this7.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u1,e1.gp1=v2,e1.gnormx=_this7.body.axisy*e1.lnormx-_this7.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this7.body.axisx+e1.lnormy*_this7.body.axisy,e1.gprojection=_this7.body.posx*e1.gnormx+_this7.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}cx_ite4=cx_ite4.next}body.sweepFrozen=!0},zpp_nape.space.ZPP_Space.prototype.validation=function(){var _this=this.cbsets;if(!_this.cbsets.empty()){for(var set_ite=_this.cbsets.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var cb;if(set_ite.data.validate(),null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}for(var cx_ite=this.live.head;null!=cx_ite;){var cur=cx_ite.elt;cur.sweepRadius=0;for(var cx_ite1=cur.shapes.head;null!=cx_ite1;){var s=cx_ite1.elt;if(1==s.type){var _this1=s.polygon;_this1.zip_sanitation&&(_this1.zip_sanitation=!1,_this1.splice_collinear_real());var res=s.polygon.valid();if(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),res!=zpp_nape.util.ZPP_Flags.ValidationResult_VALID)throw new js._Boot.HaxeError("Error: Cannot simulate with an invalid Polygon : "+s.polygon.outer.toString()+" is invalid : "+res.toString());var _this2=s.polygon;if(_this2.zip_gaxi&&null!=_this2.body){_this2.zip_gaxi=!1,_this2.validate_laxi();var _this3=_this2.body;if(_this3.zip_axis&&(_this3.zip_axis=!1,_this3.axisx=Math.sin(_this3.rot),_this3.axisy=Math.cos(_this3.rot)),_this2.zip_gverts&&null!=_this2.body){_this2.zip_gverts=!1,_this2.validate_lverts();var _this4=_this2.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this2.lverts.next,cx_ite2=_this2.gverts.next;null!=cx_ite2;){var g=cx_ite2,l=li;li=li.next,g.x=_this2.body.posx+(_this2.body.axisy*l.x-_this2.body.axisx*l.y),g.y=_this2.body.posy+(l.x*_this2.body.axisx+l.y*_this2.body.axisy),cx_ite2=cx_ite2.next}}var ite=_this2.edges.head,cx_ite3=_this2.gverts.next,u=cx_ite3;for(cx_ite3=cx_ite3.next;null!=cx_ite3;){var v=cx_ite3,e=ite.elt;ite=ite.next,e.gp0=u,e.gp1=v,e.gnormx=_this2.body.axisy*e.lnormx-_this2.body.axisx*e.lnormy,e.gnormy=e.lnormx*_this2.body.axisx+e.lnormy*_this2.body.axisy,e.gprojection=_this2.body.posx*e.gnormx+_this2.body.posy*e.gnormy+e.lprojection,null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy),e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy,e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy,u=v,cx_ite3=cx_ite3.next}var v1=_this2.gverts.next,e1=ite.elt;ite=ite.next,e1.gp0=u,e1.gp1=v1,e1.gnormx=_this2.body.axisy*e1.lnormx-_this2.body.axisx*e1.lnormy,e1.gnormy=e1.lnormx*_this2.body.axisx+e1.lnormy*_this2.body.axisy,e1.gprojection=_this2.body.posx*e1.gnormx+_this2.body.posy*e1.gnormy+e1.lprojection,null!=e1.wrap_gnorm&&(e1.wrap_gnorm.zpp_inner.x=e1.gnormx,e1.wrap_gnorm.zpp_inner.y=e1.gnormy),e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy,e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}s.validate_sweepRadius(),s.sweepRadius>cur.sweepRadius&&(cur.sweepRadius=s.sweepRadius),cx_ite1=cx_ite1.next}if(cur.validate_mass(),cur.validate_inertia(),null!=cur.shapes.head){if(null==cur.shapes.head)throw new js._Boot.HaxeError("Error: Body bounds only makes sense if it contains shapes");if(cur.zip_aabb){cur.zip_aabb=!1,cur.aabb.minx=1/0,cur.aabb.miny=1/0,cur.aabb.maxx=-1/0,cur.aabb.maxy=-1/0;for(var cx_ite4=cur.shapes.head;null!=cx_ite4;){var s1=cx_ite4.elt;if(s1.zip_aabb&&null!=s1.body)if(s1.zip_aabb=!1,0==s1.type){var _this5=s1.circle;if(_this5.zip_worldCOM&&null!=_this5.body){if(_this5.zip_worldCOM=!1,_this5.zip_localCOM){if(_this5.zip_localCOM=!1,1==_this5.type){var _this6=_this5.polygon;if(null==_this6.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this6.lverts.next.next)_this6.localCOMx=_this6.lverts.next.x,_this6.localCOMy=_this6.lverts.next.y;else if(null==_this6.lverts.next.next.next){_this6.localCOMx=_this6.lverts.next.x,_this6.localCOMy=_this6.lverts.next.y;var t=1;_this6.localCOMx+=1*_this6.lverts.next.next.x,_this6.localCOMy+=1*_this6.lverts.next.next.y;var t1=.5;_this6.localCOMx*=.5,_this6.localCOMy*=.5}else{_this6.localCOMx=0,_this6.localCOMy=0;var area=0,cx_ite5=_this6.lverts.next,u1=cx_ite5,v2=cx_ite5=cx_ite5.next;for(cx_ite5=cx_ite5.next;null!=cx_ite5;){var w=cx_ite5;area+=v2.x*(w.y-u1.y);var cf=w.y*v2.x-w.x*v2.y;_this6.localCOMx+=(v2.x+w.x)*cf,_this6.localCOMy+=(v2.y+w.y)*cf,u1=v2,v2=w,cx_ite5=cx_ite5.next}var w1=cx_ite5=_this6.lverts.next;area+=v2.x*(w1.y-u1.y);var cf1=w1.y*v2.x-w1.x*v2.y;_this6.localCOMx+=(v2.x+w1.x)*cf1,_this6.localCOMy+=(v2.y+w1.y)*cf1,u1=v2,v2=w1;var w2=cx_ite5=cx_ite5.next;area+=v2.x*(w2.y-u1.y);var cf2=w2.y*v2.x-w2.x*v2.y;_this6.localCOMx+=(v2.x+w2.x)*cf2,_this6.localCOMy+=(v2.y+w2.y)*cf2;var t2=area=1/(3*area);_this6.localCOMx*=t2,_this6.localCOMy*=t2}}null!=_this5.wrap_localCOM&&(_this5.wrap_localCOM.zpp_inner.x=_this5.localCOMx,_this5.wrap_localCOM.zpp_inner.y=_this5.localCOMy)}var _this7=_this5.body;_this7.zip_axis&&(_this7.zip_axis=!1,_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot)),_this5.worldCOMx=_this5.body.posx+(_this5.body.axisy*_this5.localCOMx-_this5.body.axisx*_this5.localCOMy),_this5.worldCOMy=_this5.body.posy+(_this5.localCOMx*_this5.body.axisx+_this5.localCOMy*_this5.body.axisy)}var rx=_this5.radius,ry=_this5.radius;_this5.aabb.minx=_this5.worldCOMx-rx,_this5.aabb.miny=_this5.worldCOMy-ry,_this5.aabb.maxx=_this5.worldCOMx+rx,_this5.aabb.maxy=_this5.worldCOMy+ry}else{var _this8=s1.polygon;if(_this8.zip_gverts&&null!=_this8.body){_this8.zip_gverts=!1,_this8.validate_lverts();var _this9=_this8.body;_this9.zip_axis&&(_this9.zip_axis=!1,_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot));for(var li1=_this8.lverts.next,cx_ite6=_this8.gverts.next;null!=cx_ite6;){var g1=cx_ite6,l1=li1;li1=li1.next,g1.x=_this8.body.posx+(_this8.body.axisy*l1.x-_this8.body.axisx*l1.y),g1.y=_this8.body.posy+(l1.x*_this8.body.axisx+l1.y*_this8.body.axisy),cx_ite6=cx_ite6.next}}if(null==_this8.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this8.gverts.next;_this8.aabb.minx=p0.x,_this8.aabb.miny=p0.y,_this8.aabb.maxx=p0.x,_this8.aabb.maxy=p0.y;for(var cx_ite7=_this8.gverts.next.next;null!=cx_ite7;){var p=cx_ite7;p.x<_this8.aabb.minx&&(_this8.aabb.minx=p.x),p.x>_this8.aabb.maxx&&(_this8.aabb.maxx=p.x),p.y<_this8.aabb.miny&&(_this8.aabb.miny=p.y),p.y>_this8.aabb.maxy&&(_this8.aabb.maxy=p.y),cx_ite7=cx_ite7.next}}var _this10=cur.aabb,x=s1.aabb;x.minx<_this10.minx&&(_this10.minx=x.minx),x.maxx>_this10.maxx&&(_this10.maxx=x.maxx),x.miny<_this10.miny&&(_this10.miny=x.miny),x.maxy>_this10.maxy&&(_this10.maxy=x.maxy),cx_ite4=cx_ite4.next}}cur.validate_worldCOM()}if(cur.validate_gravMass(),cur.zip_axis&&(cur.zip_axis=!1,cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot)),!cur.nomove&&2==cur.type&&0==cur.mass)throw new js._Boot.HaxeError("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!cur.norotate&&2==cur.type&&0==cur.inertia)throw new js._Boot.HaxeError("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");if(cur.component.woken&&null!=cur.cbSet)for(var cx_ite8=cur.cbSet.bodylisteners.head;null!=cx_ite8;){var i=cx_ite8.elt;if(2==i.event){var cb1=this.push_callback(i);cb1.event=2,cb1.body=cur,cx_ite8=cx_ite8.next}else cx_ite8=cx_ite8.next}cur.component.woken=!1;for(var cx_ite9=cur.shapes.head;null!=cx_ite9;){var shape=cx_ite9.elt;this.bphase.sync(shape),cx_ite9=cx_ite9.next}cx_ite=cx_ite.next}for(var cx_ite10=this.kinematics.head;null!=cx_ite10;){var cur1=cx_ite10.elt;cur1.sweepRadius=0;for(var cx_ite11=cur1.shapes.head;null!=cx_ite11;){var s2=cx_ite11.elt;if(1==s2.type){var _this11=s2.polygon;_this11.zip_sanitation&&(_this11.zip_sanitation=!1,_this11.splice_collinear_real());var res1=s2.polygon.valid();if(null==zpp_nape.util.ZPP_Flags.ValidationResult_VALID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ValidationResult_VALID=new nape.shape.ValidationResult,zpp_nape.util.ZPP_Flags.internal=!1),res1!=zpp_nape.util.ZPP_Flags.ValidationResult_VALID)throw new js._Boot.HaxeError("Error: Cannot simulate with an invalid Polygon : "+s2.polygon.outer.toString()+" is invalid : "+res1.toString());var _this12=s2.polygon;if(_this12.zip_gaxi&&null!=_this12.body){_this12.zip_gaxi=!1,_this12.validate_laxi();var _this13=_this12.body;if(_this13.zip_axis&&(_this13.zip_axis=!1,_this13.axisx=Math.sin(_this13.rot),_this13.axisy=Math.cos(_this13.rot)),_this12.zip_gverts&&null!=_this12.body){_this12.zip_gverts=!1,_this12.validate_lverts();var _this14=_this12.body;_this14.zip_axis&&(_this14.zip_axis=!1,_this14.axisx=Math.sin(_this14.rot),_this14.axisy=Math.cos(_this14.rot));for(var li2=_this12.lverts.next,cx_ite12=_this12.gverts.next;null!=cx_ite12;){var g2=cx_ite12,l2=li2;li2=li2.next,g2.x=_this12.body.posx+(_this12.body.axisy*l2.x-_this12.body.axisx*l2.y),g2.y=_this12.body.posy+(l2.x*_this12.body.axisx+l2.y*_this12.body.axisy),cx_ite12=cx_ite12.next}}var ite1=_this12.edges.head,cx_ite13=_this12.gverts.next,u2=cx_ite13;for(cx_ite13=cx_ite13.next;null!=cx_ite13;){var v3=cx_ite13,e2=ite1.elt;ite1=ite1.next,e2.gp0=u2,e2.gp1=v3,e2.gnormx=_this12.body.axisy*e2.lnormx-_this12.body.axisx*e2.lnormy,e2.gnormy=e2.lnormx*_this12.body.axisx+e2.lnormy*_this12.body.axisy,e2.gprojection=_this12.body.posx*e2.gnormx+_this12.body.posy*e2.gnormy+e2.lprojection,null!=e2.wrap_gnorm&&(e2.wrap_gnorm.zpp_inner.x=e2.gnormx,e2.wrap_gnorm.zpp_inner.y=e2.gnormy),e2.tp0=e2.gp0.y*e2.gnormx-e2.gp0.x*e2.gnormy,e2.tp1=e2.gp1.y*e2.gnormx-e2.gp1.x*e2.gnormy,u2=v3,cx_ite13=cx_ite13.next}var v4=_this12.gverts.next,e3=ite1.elt;ite1=ite1.next,e3.gp0=u2,e3.gp1=v4,e3.gnormx=_this12.body.axisy*e3.lnormx-_this12.body.axisx*e3.lnormy,e3.gnormy=e3.lnormx*_this12.body.axisx+e3.lnormy*_this12.body.axisy,e3.gprojection=_this12.body.posx*e3.gnormx+_this12.body.posy*e3.gnormy+e3.lprojection,null!=e3.wrap_gnorm&&(e3.wrap_gnorm.zpp_inner.x=e3.gnormx,e3.wrap_gnorm.zpp_inner.y=e3.gnormy),e3.tp0=e3.gp0.y*e3.gnormx-e3.gp0.x*e3.gnormy,e3.tp1=e3.gp1.y*e3.gnormx-e3.gp1.x*e3.gnormy}}s2.validate_sweepRadius(),s2.sweepRadius>cur1.sweepRadius&&(cur1.sweepRadius=s2.sweepRadius),cx_ite11=cx_ite11.next}if(cur1.validate_mass(),cur1.validate_inertia(),null!=cur1.shapes.head){if(null==cur1.shapes.head)throw new js._Boot.HaxeError("Error: Body bounds only makes sense if it contains shapes");if(cur1.zip_aabb){cur1.zip_aabb=!1,cur1.aabb.minx=1/0,cur1.aabb.miny=1/0,cur1.aabb.maxx=-1/0,cur1.aabb.maxy=-1/0;for(var cx_ite14=cur1.shapes.head;null!=cx_ite14;){var s3=cx_ite14.elt;if(s3.zip_aabb&&null!=s3.body)if(s3.zip_aabb=!1,0==s3.type){var _this15=s3.circle;if(_this15.zip_worldCOM&&null!=_this15.body){if(_this15.zip_worldCOM=!1,_this15.zip_localCOM){if(_this15.zip_localCOM=!1,1==_this15.type){var _this16=_this15.polygon;if(null==_this16.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this16.lverts.next.next)_this16.localCOMx=_this16.lverts.next.x,_this16.localCOMy=_this16.lverts.next.y;else if(null==_this16.lverts.next.next.next){_this16.localCOMx=_this16.lverts.next.x,_this16.localCOMy=_this16.lverts.next.y;var t3=1;_this16.localCOMx+=1*_this16.lverts.next.next.x,_this16.localCOMy+=1*_this16.lverts.next.next.y;var t4=.5;_this16.localCOMx*=.5,_this16.localCOMy*=.5}else{_this16.localCOMx=0,_this16.localCOMy=0;var area1=0,cx_ite15=_this16.lverts.next,u3=cx_ite15,v5=cx_ite15=cx_ite15.next;for(cx_ite15=cx_ite15.next;null!=cx_ite15;){var w3=cx_ite15;area1+=v5.x*(w3.y-u3.y);var cf3=w3.y*v5.x-w3.x*v5.y;_this16.localCOMx+=(v5.x+w3.x)*cf3,_this16.localCOMy+=(v5.y+w3.y)*cf3,u3=v5,v5=w3,cx_ite15=cx_ite15.next}var w4=cx_ite15=_this16.lverts.next;area1+=v5.x*(w4.y-u3.y);var cf4=w4.y*v5.x-w4.x*v5.y;_this16.localCOMx+=(v5.x+w4.x)*cf4,_this16.localCOMy+=(v5.y+w4.y)*cf4,u3=v5,v5=w4;var w5=cx_ite15=cx_ite15.next;area1+=v5.x*(w5.y-u3.y);var cf5=w5.y*v5.x-w5.x*v5.y;_this16.localCOMx+=(v5.x+w5.x)*cf5,_this16.localCOMy+=(v5.y+w5.y)*cf5;var t5=area1=1/(3*area1);_this16.localCOMx*=t5,_this16.localCOMy*=t5}}null!=_this15.wrap_localCOM&&(_this15.wrap_localCOM.zpp_inner.x=_this15.localCOMx,_this15.wrap_localCOM.zpp_inner.y=_this15.localCOMy)}var _this17=_this15.body;_this17.zip_axis&&(_this17.zip_axis=!1,_this17.axisx=Math.sin(_this17.rot),_this17.axisy=Math.cos(_this17.rot)),_this15.worldCOMx=_this15.body.posx+(_this15.body.axisy*_this15.localCOMx-_this15.body.axisx*_this15.localCOMy),_this15.worldCOMy=_this15.body.posy+(_this15.localCOMx*_this15.body.axisx+_this15.localCOMy*_this15.body.axisy)}var rx1=_this15.radius,ry1=_this15.radius;_this15.aabb.minx=_this15.worldCOMx-rx1,_this15.aabb.miny=_this15.worldCOMy-ry1,_this15.aabb.maxx=_this15.worldCOMx+rx1,_this15.aabb.maxy=_this15.worldCOMy+ry1}else{var _this18=s3.polygon;if(_this18.zip_gverts&&null!=_this18.body){_this18.zip_gverts=!1,_this18.validate_lverts();var _this19=_this18.body;_this19.zip_axis&&(_this19.zip_axis=!1,_this19.axisx=Math.sin(_this19.rot),_this19.axisy=Math.cos(_this19.rot));for(var li3=_this18.lverts.next,cx_ite16=_this18.gverts.next;null!=cx_ite16;){var g3=cx_ite16,l3=li3;li3=li3.next,g3.x=_this18.body.posx+(_this18.body.axisy*l3.x-_this18.body.axisx*l3.y),g3.y=_this18.body.posy+(l3.x*_this18.body.axisx+l3.y*_this18.body.axisy),cx_ite16=cx_ite16.next}}if(null==_this18.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p01=_this18.gverts.next;_this18.aabb.minx=p01.x,_this18.aabb.miny=p01.y,_this18.aabb.maxx=p01.x,_this18.aabb.maxy=p01.y;for(var cx_ite17=_this18.gverts.next.next;null!=cx_ite17;){var p1=cx_ite17;p1.x<_this18.aabb.minx&&(_this18.aabb.minx=p1.x),p1.x>_this18.aabb.maxx&&(_this18.aabb.maxx=p1.x),p1.y<_this18.aabb.miny&&(_this18.aabb.miny=p1.y),p1.y>_this18.aabb.maxy&&(_this18.aabb.maxy=p1.y),cx_ite17=cx_ite17.next}}var _this20=cur1.aabb,x1=s3.aabb;x1.minx<_this20.minx&&(_this20.minx=x1.minx),x1.maxx>_this20.maxx&&(_this20.maxx=x1.maxx),x1.miny<_this20.miny&&(_this20.miny=x1.miny),x1.maxy>_this20.maxy&&(_this20.maxy=x1.maxy),cx_ite14=cx_ite14.next}}cur1.validate_worldCOM()}if(cur1.validate_gravMass(),cur1.zip_axis&&(cur1.zip_axis=!1,cur1.axisx=Math.sin(cur1.rot),cur1.axisy=Math.cos(cur1.rot)),!cur1.nomove&&2==cur1.type&&0==cur1.mass)throw new js._Boot.HaxeError("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!cur1.norotate&&2==cur1.type&&0==cur1.inertia)throw new js._Boot.HaxeError("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");for(var cx_ite18=cur1.shapes.head;null!=cx_ite18;){var shape1=cx_ite18.elt;this.bphase.sync(shape1),cx_ite18=cx_ite18.next}cx_ite10=cx_ite10.next}for(var cx_ite19=this.live_constraints.head;null!=cx_ite19;){var con=cx_ite19.elt;if(con.active){if(con.validate(),con.component.woken&&null!=con.cbSet)for(var cx_ite20=con.cbSet.conlisteners.head;null!=cx_ite20;){var i1=cx_ite20.elt;if(2==i1.event){var cb2=this.push_callback(i1);cb2.event=2,cb2.constraint=con,cx_ite20=cx_ite20.next}else cx_ite20=cx_ite20.next}con.component.woken=!1}cx_ite19=cx_ite19.next}},zpp_nape.space.ZPP_Space.prototype.updateVel=function(dt){for(var pre=null,linDrag=1-dt*this.global_lin_drag,angDrag=1-dt*this.global_ang_drag,cx_ite=this.live.head;null!=cx_ite;){var cur=cx_ite.elt;if(0!=cur.smass){var time=dt*cur.imass;cur.velx=linDrag*cur.velx+(cur.forcex+this.gravityx*cur.gravMass)*time,cur.vely=linDrag*cur.vely+(cur.forcey+this.gravityy*cur.gravMass)*time}if(0!=cur.sinertia){var dpx=0,dpy=0;dpx=cur.worldCOMx-cur.posx,dpy=cur.worldCOMy-cur.posy;var torque=cur.torque+(this.gravityy*dpx-this.gravityx*dpy)*cur.gravMass;cur.angvel=angDrag*cur.angvel+torque*dt*cur.iinertia}pre=cx_ite,cx_ite=cx_ite.next}},zpp_nape.space.ZPP_Space.prototype.updatePos=function(dt){for(var MAX_VEL=2*Math.PI/dt,cx_ite=this.live.head;null!=cx_ite;){var cur=cx_ite.elt;cur.pre_posx=cur.posx,cur.pre_posy=cur.posy,cur.pre_rot=cur.rot,cur.sweepTime=0,cur.sweep_angvel=cur.angvel%MAX_VEL;var delta=dt-cur.sweepTime;if(0!=delta){cur.sweepTime=dt;var t=delta;if(cur.posx+=cur.velx*t,cur.posy+=cur.vely*t,0!=cur.angvel){var dr=cur.sweep_angvel*delta;if(cur.rot+=dr,dr*dr>1e-4)cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*cur.axisx+dr*cur.axisy)*m;cur.axisy=(p*cur.axisy-dr*cur.axisx)*m,cur.axisx=nx}}}if(cur.disableCCD)cur.sweepFrozen=!0,cur.bullet=!1;else{var linThreshold=nape.Config.staticCCDLinearThreshold*cur.sweepRadius,angThreshold=nape.Config.staticCCDAngularThreshold;if((cur.velx*cur.velx+cur.vely*cur.vely)*dt*dt>linThreshold*linThreshold||cur.angvel*cur.angvel*dt*dt>angThreshold*angThreshold||3==cur.type){var angvel=cur.sweep_angvel;angvel<0&&(angvel=-angvel);for(var iangvel=1/angvel,cx_ite1=cur.shapes.head;null!=cx_ite1;){var s=cx_ite1.elt,aabb=s.aabb,minx=aabb.minx,miny=aabb.miny,maxx=aabb.maxx,maxy=aabb.maxy,count=angvel*dt*s.sweepCoef*.008333333333333333|0;count>8&&(count=8);var anginc=angvel*dt/count,delta1=dt-cur.sweepTime;if(0!=delta1){cur.sweepTime=dt;var t1=delta1;if(cur.posx+=cur.velx*t1,cur.posy+=cur.vely*t1,0!=cur.angvel){var dr1=cur.sweep_angvel*delta1;if(cur.rot+=dr1,dr1*dr1>1e-4)cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*cur.axisx+dr1*cur.axisy)*m1;cur.axisy=(p1*cur.axisy-dr1*cur.axisx)*m1,cur.axisx=nx1}}}if(0==s.type){var _this=s.circle;_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy),_this.aabb.minx=_this.worldCOMx-_this.radius,_this.aabb.miny=_this.worldCOMy-_this.radius,_this.aabb.maxx=_this.worldCOMx+_this.radius,_this.aabb.maxy=_this.worldCOMy+_this.radius}else{var _this1=s.polygon,li=_this1.lverts.next,p0=_this1.gverts.next,l=li;li=li.next,p0.x=_this1.body.posx+(_this1.body.axisy*l.x-_this1.body.axisx*l.y),p0.y=_this1.body.posy+(l.x*_this1.body.axisx+l.y*_this1.body.axisy),_this1.aabb.minx=p0.x,_this1.aabb.miny=p0.y,_this1.aabb.maxx=p0.x,_this1.aabb.maxy=p0.y;for(var cx_ite2=_this1.gverts.next.next;null!=cx_ite2;){var p2=cx_ite2,l1=li;li=li.next,p2.x=_this1.body.posx+(_this1.body.axisy*l1.x-_this1.body.axisx*l1.y),p2.y=_this1.body.posy+(l1.x*_this1.body.axisx+l1.y*_this1.body.axisy),p2.x<_this1.aabb.minx&&(_this1.aabb.minx=p2.x),p2.x>_this1.aabb.maxx&&(_this1.aabb.maxx=p2.x),p2.y<_this1.aabb.miny&&(_this1.aabb.miny=p2.y),p2.y>_this1.aabb.maxy&&(_this1.aabb.maxy=p2.y),cx_ite2=cx_ite2.next}}minx<aabb.minx?aabb.minx=minx:minx=aabb.minx,miny<aabb.miny?aabb.miny=miny:miny=aabb.miny,maxx>aabb.maxx?aabb.maxx=maxx:maxx=aabb.maxx,maxy>aabb.maxy?aabb.maxy=maxy:maxy=aabb.maxy;for(var _g=1,_g1=count;_g<_g1;){var i,dt1=anginc*_g++*iangvel,delta2=dt1-cur.sweepTime;if(0!=delta2){cur.sweepTime=dt1;var t2=delta2;if(cur.posx+=cur.velx*t2,cur.posy+=cur.vely*t2,0!=cur.angvel){var dr2=cur.sweep_angvel*delta2;if(cur.rot+=dr2,dr2*dr2>1e-4)cur.axisx=Math.sin(cur.rot),cur.axisy=Math.cos(cur.rot);else{var d22=dr2*dr2,p3=1-.5*d22,m2=1-d22*d22/8,nx2=(p3*cur.axisx+dr2*cur.axisy)*m2;cur.axisy=(p3*cur.axisy-dr2*cur.axisx)*m2,cur.axisx=nx2}}}if(0==s.type){var _this2=s.circle;_this2.worldCOMx=_this2.body.posx+(_this2.body.axisy*_this2.localCOMx-_this2.body.axisx*_this2.localCOMy),_this2.worldCOMy=_this2.body.posy+(_this2.localCOMx*_this2.body.axisx+_this2.localCOMy*_this2.body.axisy),_this2.aabb.minx=_this2.worldCOMx-_this2.radius,_this2.aabb.miny=_this2.worldCOMy-_this2.radius,_this2.aabb.maxx=_this2.worldCOMx+_this2.radius,_this2.aabb.maxy=_this2.worldCOMy+_this2.radius}else{var _this3=s.polygon,li1=_this3.lverts.next,p01=_this3.gverts.next,l2=li1;li1=li1.next,p01.x=_this3.body.posx+(_this3.body.axisy*l2.x-_this3.body.axisx*l2.y),p01.y=_this3.body.posy+(l2.x*_this3.body.axisx+l2.y*_this3.body.axisy),_this3.aabb.minx=p01.x,_this3.aabb.miny=p01.y,_this3.aabb.maxx=p01.x,_this3.aabb.maxy=p01.y;for(var cx_ite3=_this3.gverts.next.next;null!=cx_ite3;){var p4=cx_ite3,l3=li1;li1=li1.next,p4.x=_this3.body.posx+(_this3.body.axisy*l3.x-_this3.body.axisx*l3.y),p4.y=_this3.body.posy+(l3.x*_this3.body.axisx+l3.y*_this3.body.axisy),p4.x<_this3.aabb.minx&&(_this3.aabb.minx=p4.x),p4.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p4.x),p4.y<_this3.aabb.miny&&(_this3.aabb.miny=p4.y),p4.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p4.y),cx_ite3=cx_ite3.next}}minx<aabb.minx?aabb.minx=minx:minx=aabb.minx,miny<aabb.miny?aabb.miny=miny:miny=aabb.miny,maxx>aabb.maxx?aabb.maxx=maxx:maxx=aabb.maxx,maxy>aabb.maxy?aabb.maxy=maxy:maxy=aabb.maxy}this.bphase.sync(s),cx_ite1=cx_ite1.next}if(cur.sweepFrozen=!1,2==cur.type&&cur.bulletEnabled){var linThreshold2=nape.Config.bulletCCDLinearThreshold*cur.sweepRadius,angThreshold2=nape.Config.bulletCCDAngularThreshold;((cur.velx*cur.velx+cur.vely*cur.vely)*dt*dt>linThreshold2*linThreshold2||cur.angvel*cur.angvel*dt*dt>angThreshold2*angThreshold2)&&(cur.bullet=!0)}}else cur.sweepFrozen=!0,cur.bullet=!1}cx_ite=cx_ite.next}for(var cx_ite4=this.kinematics.head;null!=cx_ite4;){var cur1=cx_ite4.elt;cur1.pre_posx=cur1.posx,cur1.pre_posy=cur1.posy,cur1.pre_rot=cur1.rot,cur1.sweepTime=0,cur1.sweep_angvel=cur1.angvel%MAX_VEL;var delta3=dt-cur1.sweepTime;if(0!=delta3){cur1.sweepTime=dt;var t3=delta3;if(cur1.posx+=cur1.velx*t3,cur1.posy+=cur1.vely*t3,0!=cur1.angvel){var dr3=cur1.sweep_angvel*delta3;if(cur1.rot+=dr3,dr3*dr3>1e-4)cur1.axisx=Math.sin(cur1.rot),cur1.axisy=Math.cos(cur1.rot);else{var d23=dr3*dr3,p5=1-.5*d23,m3=1-d23*d23/8,nx3=(p5*cur1.axisx+dr3*cur1.axisy)*m3;cur1.axisy=(p5*cur1.axisy-dr3*cur1.axisx)*m3,cur1.axisx=nx3}}}if(cur1.disableCCD)cur1.sweepFrozen=!0,cur1.bullet=!1;else{var linThreshold1=nape.Config.staticCCDLinearThreshold*cur1.sweepRadius,angThreshold1=nape.Config.staticCCDAngularThreshold;if((cur1.velx*cur1.velx+cur1.vely*cur1.vely)*dt*dt>linThreshold1*linThreshold1||cur1.angvel*cur1.angvel*dt*dt>angThreshold1*angThreshold1||3==cur1.type){var angvel1=cur1.sweep_angvel;angvel1<0&&(angvel1=-angvel1);for(var iangvel1=1/angvel1,cx_ite5=cur1.shapes.head;null!=cx_ite5;){var s1=cx_ite5.elt,aabb1=s1.aabb,minx1=aabb1.minx,miny1=aabb1.miny,maxx1=aabb1.maxx,maxy1=aabb1.maxy,count1=angvel1*dt*s1.sweepCoef*.008333333333333333|0;count1>8&&(count1=8);var anginc1=angvel1*dt/count1,delta4=dt-cur1.sweepTime;if(0!=delta4){cur1.sweepTime=dt;var t4=delta4;if(cur1.posx+=cur1.velx*t4,cur1.posy+=cur1.vely*t4,0!=cur1.angvel){var dr4=cur1.sweep_angvel*delta4;if(cur1.rot+=dr4,dr4*dr4>1e-4)cur1.axisx=Math.sin(cur1.rot),cur1.axisy=Math.cos(cur1.rot);else{var d24=dr4*dr4,p6=1-.5*d24,m4=1-d24*d24/8,nx4=(p6*cur1.axisx+dr4*cur1.axisy)*m4;cur1.axisy=(p6*cur1.axisy-dr4*cur1.axisx)*m4,cur1.axisx=nx4}}}if(0==s1.type){var _this4=s1.circle;_this4.worldCOMx=_this4.body.posx+(_this4.body.axisy*_this4.localCOMx-_this4.body.axisx*_this4.localCOMy),_this4.worldCOMy=_this4.body.posy+(_this4.localCOMx*_this4.body.axisx+_this4.localCOMy*_this4.body.axisy),_this4.aabb.minx=_this4.worldCOMx-_this4.radius,_this4.aabb.miny=_this4.worldCOMy-_this4.radius,_this4.aabb.maxx=_this4.worldCOMx+_this4.radius,_this4.aabb.maxy=_this4.worldCOMy+_this4.radius}else{var _this5=s1.polygon,li2=_this5.lverts.next,p02=_this5.gverts.next,l4=li2;li2=li2.next,p02.x=_this5.body.posx+(_this5.body.axisy*l4.x-_this5.body.axisx*l4.y),p02.y=_this5.body.posy+(l4.x*_this5.body.axisx+l4.y*_this5.body.axisy),_this5.aabb.minx=p02.x,_this5.aabb.miny=p02.y,_this5.aabb.maxx=p02.x,_this5.aabb.maxy=p02.y;for(var cx_ite6=_this5.gverts.next.next;null!=cx_ite6;){var p7=cx_ite6,l5=li2;li2=li2.next,p7.x=_this5.body.posx+(_this5.body.axisy*l5.x-_this5.body.axisx*l5.y),p7.y=_this5.body.posy+(l5.x*_this5.body.axisx+l5.y*_this5.body.axisy),p7.x<_this5.aabb.minx&&(_this5.aabb.minx=p7.x),p7.x>_this5.aabb.maxx&&(_this5.aabb.maxx=p7.x),p7.y<_this5.aabb.miny&&(_this5.aabb.miny=p7.y),p7.y>_this5.aabb.maxy&&(_this5.aabb.maxy=p7.y),cx_ite6=cx_ite6.next}}minx1<aabb1.minx?aabb1.minx=minx1:minx1=aabb1.minx,miny1<aabb1.miny?aabb1.miny=miny1:miny1=aabb1.miny,maxx1>aabb1.maxx?aabb1.maxx=maxx1:maxx1=aabb1.maxx,maxy1>aabb1.maxy?aabb1.maxy=maxy1:maxy1=aabb1.maxy;for(var _g2=1,_g11=count1;_g2<_g11;){var i1,dt2=anginc1*_g2++*iangvel1,delta5=dt2-cur1.sweepTime;if(0!=delta5){cur1.sweepTime=dt2;var t5=delta5;if(cur1.posx+=cur1.velx*t5,cur1.posy+=cur1.vely*t5,0!=cur1.angvel){var dr5=cur1.sweep_angvel*delta5;if(cur1.rot+=dr5,dr5*dr5>1e-4)cur1.axisx=Math.sin(cur1.rot),cur1.axisy=Math.cos(cur1.rot);else{var d25=dr5*dr5,p8=1-.5*d25,m5=1-d25*d25/8,nx5=(p8*cur1.axisx+dr5*cur1.axisy)*m5;cur1.axisy=(p8*cur1.axisy-dr5*cur1.axisx)*m5,cur1.axisx=nx5}}}if(0==s1.type){var _this6=s1.circle;_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy),_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy),_this6.aabb.minx=_this6.worldCOMx-_this6.radius,_this6.aabb.miny=_this6.worldCOMy-_this6.radius,_this6.aabb.maxx=_this6.worldCOMx+_this6.radius,_this6.aabb.maxy=_this6.worldCOMy+_this6.radius}else{var _this7=s1.polygon,li3=_this7.lverts.next,p03=_this7.gverts.next,l6=li3;li3=li3.next,p03.x=_this7.body.posx+(_this7.body.axisy*l6.x-_this7.body.axisx*l6.y),p03.y=_this7.body.posy+(l6.x*_this7.body.axisx+l6.y*_this7.body.axisy),_this7.aabb.minx=p03.x,_this7.aabb.miny=p03.y,_this7.aabb.maxx=p03.x,_this7.aabb.maxy=p03.y;for(var cx_ite7=_this7.gverts.next.next;null!=cx_ite7;){var p9=cx_ite7,l7=li3;li3=li3.next,p9.x=_this7.body.posx+(_this7.body.axisy*l7.x-_this7.body.axisx*l7.y),p9.y=_this7.body.posy+(l7.x*_this7.body.axisx+l7.y*_this7.body.axisy),p9.x<_this7.aabb.minx&&(_this7.aabb.minx=p9.x),p9.x>_this7.aabb.maxx&&(_this7.aabb.maxx=p9.x),p9.y<_this7.aabb.miny&&(_this7.aabb.miny=p9.y),p9.y>_this7.aabb.maxy&&(_this7.aabb.maxy=p9.y),cx_ite7=cx_ite7.next}}minx1<aabb1.minx?aabb1.minx=minx1:minx1=aabb1.minx,miny1<aabb1.miny?aabb1.miny=miny1:miny1=aabb1.miny,maxx1>aabb1.maxx?aabb1.maxx=maxx1:maxx1=aabb1.maxx,maxy1>aabb1.maxy?aabb1.maxy=maxy1:maxy1=aabb1.maxy}this.bphase.sync(s1),cx_ite5=cx_ite5.next}if(cur1.sweepFrozen=!1,2==cur1.type&&cur1.bulletEnabled){var linThreshold21=nape.Config.bulletCCDLinearThreshold*cur1.sweepRadius,angThreshold21=nape.Config.bulletCCDAngularThreshold;((cur1.velx*cur1.velx+cur1.vely*cur1.vely)*dt*dt>linThreshold21*linThreshold21||cur1.angvel*cur1.angvel*dt*dt>angThreshold21*angThreshold21)&&(cur1.bullet=!0)}}else cur1.sweepFrozen=!0,cur1.bullet=!1}cx_ite4=cx_ite4.next}},zpp_nape.space.ZPP_Space.prototype.continuous=null,zpp_nape.space.ZPP_Space.prototype.presteparb=function(arb,dt,cont){null==cont&&(cont=!1);var _gthis=this;if(!arb.cleared&&arb.b1.component.sleeping&&arb.b2.component.sleeping)return arb.sleep_stamp=this.stamp,arb.sleeping=!0,!0;if(!arb.cleared||0!=arb.present||arb.intchange){var endcb=!cont&&arb.up_stamp==this.stamp-1&&!arb.cleared&&!arb.intchange,begcb=arb.fresh&&!arb.cleared&&!arb.intchange;if(endcb&&(arb.endGenerated=this.stamp),begcb||endcb||arb.cleared||arb.intchange){for(var s1=arb.ws1,s2=arb.ws2,_this=this.mrca1;null!=_this.head;){var ret=_this.head;_this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==_this.head&&(_this.pushmod=!0),_this.modified=!0,_this.length--}_this.pushmod=!0;for(var _this1=this.mrca2;null!=_this1.head;){var ret1=_this1.head;_this1.head=ret1.next;var o1=ret1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o1,null==_this1.head&&(_this1.pushmod=!0),_this1.modified=!0,_this1.length--}if(_this1.pushmod=!0,null!=s1.cbSet){var _this2=this.mrca1,ret2;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret2=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret2.next,ret2.next=null),ret2.elt=s1;var temp=ret2;temp.next=_this2.head,_this2.head=temp,_this2.modified=!0,_this2.length++}if(null!=s1.body.cbSet){var _this3=this.mrca1,o2=s1.body,ret3;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret3=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o2;var temp1=ret3;temp1.next=_this3.head,_this3.head=temp1,_this3.modified=!0,_this3.length++}if(null!=s2.cbSet){var _this4=this.mrca2,ret4;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret4=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret4.next,ret4.next=null),ret4.elt=s2;var temp2=ret4;temp2.next=_this4.head,_this4.head=temp2,_this4.modified=!0,_this4.length++}if(null!=s2.body.cbSet){var _this5=this.mrca2,o3=s2.body,ret5;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret5=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret5.next,ret5.next=null),ret5.elt=o3;var temp3=ret5;temp3.next=_this5.head,_this5.head=temp3,_this5.modified=!0,_this5.length++}for(var c1=s1.body.compound,c2=s2.body.compound;c1!=c2;){var d1,d2;if((null==c1?0:c1.depth)<(null==c2?0:c2.depth)){if(null!=c2.cbSet){var _this6=this.mrca2,ret6;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret6=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret6.next,ret6.next=null),ret6.elt=c2;var temp4=ret6;temp4.next=_this6.head,_this6.head=temp4,_this6.modified=!0,_this6.length++}c2=c2.compound}else{if(null!=c1.cbSet){var _this7=this.mrca1,ret7;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret7=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret7.next,ret7.next=null),ret7.elt=c1;var temp5=ret7;temp5.next=_this7.head,_this7.head=temp5,_this7.modified=!0,_this7.length++}c1=c1.compound}}for(var cx_ite=this.mrca1.head;null!=cx_ite;){for(var i1=cx_ite.elt,cx_ite1=this.mrca2.head;null!=cx_ite1;){for(var i2=cx_ite1.elt,cb1=i1.cbSet,cb2=i2.cbSet,_this8=cb1.manager,ret8=null,pairs,cx_ite2=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret9;null!=cx_ite2;){var p=cx_ite2.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret8=p;break}cx_ite2=cx_ite2.next}if(null==ret8)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret9=new zpp_nape.callbacks.ZPP_CbSetPair:(ret9=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret9.next,ret9.next=null),ret9.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret9.a=cb1,ret9.b=cb2):(ret9.a=cb2,ret9.b=cb1),ret8=ret9,cb1.cbpairs.add(ret8),cb2!=cb1&&cb2.cbpairs.add(ret8);if(ret8.zip_listeners&&(ret8.zip_listeners=!1,ret8.__validate()),null!=ret8.listeners.head){var callbackset=zpp_nape.phys.ZPP_Interactor.get(i1,i2);if(begcb||arb.intchange){null==callbackset&&(callbackset=zpp_nape.space.ZPP_CallbackSet.get(i1,i2),this.add_callbackset(callbackset));for(var _this9=cb1.manager,ret10=null,pairs1,cx_ite3=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret11;null!=cx_ite3;){var p1=cx_ite3.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret10=p1;break}cx_ite3=cx_ite3.next}if(null==ret10)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret11=new zpp_nape.callbacks.ZPP_CbSetPair:(ret11=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret11.next,ret11.next=null),ret11.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret11.a=cb1,ret11.b=cb2):(ret11.a=cb2,ret11.b=cb1),ret10=ret11,cb1.cbpairs.add(ret10),cb2!=cb1&&cb2.cbpairs.add(ret10);ret10.zip_listeners&&(ret10.zip_listeners=!1,ret10.__validate());for(var cx_ite4=ret10.listeners.head,tmp1,ret12;null!=cx_ite4;){var x=cx_ite4.elt;if(0==x.event&&0!=(x.itype&arb.type)&&callbackset.empty_arb(x.itype)){var cb=this.push_callback(x);cb.event=0;var o11=callbackset.int1,o21=callbackset.int2,tmp,_this10=x.options1,xs=o11.cbTypes;if(_this10.nonemptyintersection(xs,_this10.includes)&&!_this10.nonemptyintersection(xs,_this10.excludes)){var _this11=x.options2,xs1=o21.cbTypes;tmp=_this11.nonemptyintersection(xs1,_this11.includes)&&!_this11.nonemptyintersection(xs1,_this11.excludes)}else tmp=!1;tmp?(cb.int1=o11,cb.int2=o21):(cb.int1=o21,cb.int2=o11),cb.set=callbackset}cx_ite4=cx_ite4.next}ret12=!1;for(var cx_ite5=callbackset.arbiters.head;null!=cx_ite5;){var npite;if(cx_ite5.elt==arb){ret12=!0;break}cx_ite5=cx_ite5.next}if(ret12)tmp1=!1;else{var _this12=callbackset.arbiters,ret13;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret13=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret13=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret13.next,ret13.next=null),ret13.elt=arb;var temp6=ret13;temp6.next=_this12.head,_this12.head=temp6,_this12.modified=!0,_this12.length++,tmp1=!0}tmp1&&arb.present++}else{arb.present--,callbackset.remove_arb(arb);for(var _this13=cb1.manager,ret14=null,pairs2,cx_ite6=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret15;null!=cx_ite6;){var p2=cx_ite6.elt;if(p2.a==cb1&&p2.b==cb2||p2.a==cb2&&p2.b==cb1){ret14=p2;break}cx_ite6=cx_ite6.next}if(null==ret14)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret15=new zpp_nape.callbacks.ZPP_CbSetPair:(ret15=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret15.next,ret15.next=null),ret15.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret15.a=cb1,ret15.b=cb2):(ret15.a=cb2,ret15.b=cb1),ret14=ret15,cb1.cbpairs.add(ret14),cb2!=cb1&&cb2.cbpairs.add(ret14);ret14.zip_listeners&&(ret14.zip_listeners=!1,ret14.__validate());for(var cx_ite7=ret14.listeners.head;null!=cx_ite7;){var x1=cx_ite7.elt;if(1==x1.event&&0!=(x1.itype&arb.type)&&callbackset.empty_arb(x1.itype)){var cb3=this.push_callback(x1);cb3.event=1;var o12=callbackset.int1,o22=callbackset.int2,tmp2,_this14=x1.options1,xs2=o12.cbTypes;if(_this14.nonemptyintersection(xs2,_this14.includes)&&!_this14.nonemptyintersection(xs2,_this14.excludes)){var _this15=x1.options2,xs3=o22.cbTypes;tmp2=_this15.nonemptyintersection(xs3,_this15.includes)&&!_this15.nonemptyintersection(xs3,_this15.excludes)}else tmp2=!1;tmp2?(cb3.int1=o12,cb3.int2=o22):(cb3.int1=o22,cb3.int2=o12),cb3.set=callbackset}cx_ite7=cx_ite7.next}null==callbackset.arbiters.head&&this.remove_callbackset(callbackset)}cx_ite1=cx_ite1.next}else cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}}arb.fresh=!1,arb.intchange=!1}if(arb.cleared||arb.up_stamp+(arb.type==zpp_nape.dynamics.ZPP_Arbiter.COL?nape.Config.arbiterExpirationDelay:0)<this.stamp){if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.SENSOR){var _this16=arb.sensorarb;if(!_this16.cleared){for(var _this17=_this16.b1.arbiters,pre=null,cur=_this17.head,ret16=!1;null!=cur;){if(cur.elt==_this16){var old,ret17;null==pre?(ret17=(old=_this17.head).next,_this17.head=ret17,null==_this17.head&&(_this17.pushmod=!0)):(ret17=(old=pre.next).next,pre.next=ret17,null==ret17&&(_this17.pushmod=!0));var o4=old;o4.elt=null,o4.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o4,_this17.modified=!0,_this17.length--,_this17.pushmod=!0,ret16=!0;break}pre=cur,cur=cur.next}for(var _this18=_this16.b2.arbiters,pre1=null,cur1=_this18.head,ret18=!1;null!=cur1;){if(cur1.elt==_this16){var old1,ret19;null==pre1?(ret19=(old1=_this18.head).next,_this18.head=ret19,null==_this18.head&&(_this18.pushmod=!0)):(ret19=(old1=pre1.next).next,pre1.next=ret19,null==ret19&&(_this18.pushmod=!0));var o5=old1;o5.elt=null,o5.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o5,_this18.modified=!0,_this18.length--,_this18.pushmod=!0,ret18=!0;break}pre1=cur1,cur1=cur1.next}null!=_this16.pair&&(_this16.pair.arb=null,_this16.pair=null)}_this16.b1=_this16.b2=null,_this16.active=!1,_this16.intchange=!1;var o6=_this16;o6.next=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=o6}else if(arb.type==zpp_nape.dynamics.ZPP_Arbiter.FLUID){var _this19=arb.fluidarb;if(!_this19.cleared){for(var _this20=_this19.b1.arbiters,pre2=null,cur2=_this20.head,ret20=!1;null!=cur2;){if(cur2.elt==_this19){var old2,ret21;null==pre2?(ret21=(old2=_this20.head).next,_this20.head=ret21,null==_this20.head&&(_this20.pushmod=!0)):(ret21=(old2=pre2.next).next,pre2.next=ret21,null==ret21&&(_this20.pushmod=!0));var o7=old2;o7.elt=null,o7.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o7,_this20.modified=!0,_this20.length--,_this20.pushmod=!0,ret20=!0;break}pre2=cur2,cur2=cur2.next}for(var _this21=_this19.b2.arbiters,pre3=null,cur3=_this21.head,ret22=!1;null!=cur3;){if(cur3.elt==_this19){var old3,ret23;null==pre3?(ret23=(old3=_this21.head).next,_this21.head=ret23,null==_this21.head&&(_this21.pushmod=!0)):(ret23=(old3=pre3.next).next,pre3.next=ret23,null==ret23&&(_this21.pushmod=!0));var o8=old3;o8.elt=null,o8.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o8,_this21.modified=!0,_this21.length--,_this21.pushmod=!0,ret22=!0;break}pre3=cur3,cur3=cur3.next}null!=_this19.pair&&(_this19.pair.arb=null,_this19.pair=null)}_this19.b1=_this19.b2=null,_this19.active=!1,_this19.intchange=!1;var o9=_this19;o9.next=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=o9,_this19.pre_dt=-1}else{var _this22=arb.colarb;if(!_this22.cleared){for(var _this23=_this22.b1.arbiters,pre4=null,cur4=_this23.head,ret24=!1;null!=cur4;){if(cur4.elt==_this22){var old4,ret25;null==pre4?(ret25=(old4=_this23.head).next,_this23.head=ret25,null==_this23.head&&(_this23.pushmod=!0)):(ret25=(old4=pre4.next).next,pre4.next=ret25,null==ret25&&(_this23.pushmod=!0));var o10=old4;o10.elt=null,o10.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o10,_this23.modified=!0,_this23.length--,_this23.pushmod=!0,ret24=!0;break}pre4=cur4,cur4=cur4.next}for(var _this24=_this22.b2.arbiters,pre5=null,cur5=_this24.head,ret26=!1;null!=cur5;){if(cur5.elt==_this22){var old5,ret27;null==pre5?(ret27=(old5=_this24.head).next,_this24.head=ret27,null==_this24.head&&(_this24.pushmod=!0)):(ret27=(old5=pre5.next).next,pre5.next=ret27,null==ret27&&(_this24.pushmod=!0));var o13=old5;o13.elt=null,o13.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o13,_this24.modified=!0,_this24.length--,_this24.pushmod=!0,ret26=!0;break}pre5=cur5,cur5=cur5.next}null!=_this22.pair&&(_this22.pair.arb=null,_this22.pair=null)}for(_this22.b1=_this22.b2=null,_this22.active=!1,_this22.intchange=!1;null!=_this22.contacts.next;){var _this25=_this22.contacts,ret28=_this25.next;_this25.pop();var o14=ret28;o14.arbiter=null,o14.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o14;var _this26=_this22.innards,ret29=_this26.next;_this26.next=ret29.next,ret29._inuse=!1,null==_this26.next&&(_this26.pushmod=!0),_this26.modified=!0,_this26.length--}var o15=_this22;o15.userdef_dyn_fric=!1,o15.userdef_stat_fric=!1,o15.userdef_restitution=!1,o15.userdef_rfric=!1,o15.__ref_edge1=o15.__ref_edge2=null,o15.next=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=o15,_this22.pre_dt=-1}return!0}var pact=arb.active;if(arb.active=arb.presentable=arb.up_stamp==this.stamp,0!=(1&arb.immState)){if(arb.active&&arb.type!=zpp_nape.dynamics.ZPP_Arbiter.SENSOR)if(null!=arb.colarb){var _this27=arb.colarb;_this27.invalidated&&(_this27.invalidated=!1,_this27.userdef_restitution||(_this27.s1.material.elasticity<=-1/0||_this27.s2.material.elasticity<=-1/0?_this27.restitution=0:_this27.s1.material.elasticity>=1/0||_this27.s2.material.elasticity>=1/0?_this27.restitution=1:_this27.restitution=(_this27.s1.material.elasticity+_this27.s2.material.elasticity)/2,_this27.restitution<0&&(_this27.restitution=0),_this27.restitution>1&&(_this27.restitution=1)),_this27.userdef_dyn_fric||(_this27.dyn_fric=Math.sqrt(_this27.s1.material.dynamicFriction*_this27.s2.material.dynamicFriction)),_this27.userdef_stat_fric||(_this27.stat_fric=Math.sqrt(_this27.s1.material.staticFriction*_this27.s2.material.staticFriction)),_this27.userdef_rfric||(_this27.rfric=Math.sqrt(_this27.s1.material.rollingFriction*_this27.s2.material.rollingFriction))),-1==_this27.pre_dt&&(_this27.pre_dt=dt);var dtratio=dt/_this27.pre_dt;_this27.pre_dt=dt;var mass_sum=_this27.b1.smass+_this27.b2.smass;_this27.hc2=!1;var fst=!0,statType,bias=2!=_this27.b1.type||2!=_this27.b2.type?_this27.continuous?nape.Config.contactContinuousStaticBiasCoef:nape.Config.contactStaticBiasCoef:_this27.continuous?nape.Config.contactContinuousBiasCoef:nape.Config.contactBiasCoef;_this27.biasCoef=bias,_this27.continuous=!1;for(var pre6=null,prei=null,cx_itei=_this27.innards.next,cx_ite8=_this27.contacts.next,norm;null!=cx_ite8;){var c=cx_ite8;if(c.stamp+nape.Config.arbiterExpirationDelay<_this27.stamp){var _this28=_this27.contacts,old6,ret30;null==pre6?(ret30=(old6=_this28.next).next,_this28.next=ret30,null==_this28.next&&(_this28.pushmod=!0)):(ret30=(old6=pre6.next).next,pre6.next=ret30,null==ret30&&(_this28.pushmod=!0)),old6._inuse=!1,_this28.modified=!0,_this28.length--,_this28.pushmod=!0,cx_ite8=ret30;var _this29=_this27.innards,old7,ret31;null==prei?(ret31=(old7=_this29.next).next,_this29.next=ret31,null==_this29.next&&(_this29.pushmod=!0)):(ret31=(old7=prei.next).next,prei.next=ret31,null==ret31&&(_this29.pushmod=!0)),old7._inuse=!1,_this29.modified=!0,_this29.length--,_this29.pushmod=!0,cx_itei=ret31;var o16=c;o16.arbiter=null,o16.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o16}else{var ci=c.inner,pact1=c.active;if(c.active=c.stamp==_this27.stamp,c.active){fst?(fst=!1,_this27.c1=ci,_this27.oc1=c):(_this27.hc2=!0,_this27.c2=ci,_this27.oc2=c),ci.r2x=c.px-_this27.b2.posx,ci.r2y=c.py-_this27.b2.posy,ci.r1x=c.px-_this27.b1.posx,ci.r1y=c.py-_this27.b1.posy;var x2=ci.r2x*_this27.nx+ci.r2y*_this27.ny,kt=mass_sum+_this27.b2.sinertia*(x2*x2),x3=ci.r1x*_this27.nx+ci.r1y*_this27.ny;kt+=_this27.b1.sinertia*(x3*x3),ci.tMass=kt<nape.Config.epsilon*nape.Config.epsilon?0:1/kt;var x4=_this27.ny*ci.r2x-_this27.nx*ci.r2y,nt=mass_sum+_this27.b2.sinertia*(x4*x4),x5=_this27.ny*ci.r1x-_this27.nx*ci.r1y;nt+=_this27.b1.sinertia*(x5*x5),ci.nMass=nt<nape.Config.epsilon*nape.Config.epsilon?0:1/nt;var vrx=0,vry=0,ang=_this27.b2.angvel+_this27.b2.kinangvel;vrx=_this27.b2.velx+_this27.b2.kinvelx-ci.r2y*ang,vry=_this27.b2.vely+_this27.b2.kinvely+ci.r2x*ang,ang=_this27.b1.angvel+_this27.b1.kinangvel,vrx-=_this27.b1.velx+_this27.b1.kinvelx-ci.r1y*ang,vry-=_this27.b1.vely+_this27.b1.kinvely+ci.r1x*ang;var vdot=_this27.nx*vrx+_this27.ny*vry;c.elasticity=_this27.restitution,ci.bounce=vdot*c.elasticity,ci.bounce>-nape.Config.elasticThreshold&&(ci.bounce=0),vdot=vry*_this27.nx-vrx*_this27.ny;var thr=nape.Config.staticFrictionThreshold;ci.friction=vdot*vdot>thr*thr?_this27.dyn_fric:_this27.stat_fric,ci.jnAcc*=dtratio,ci.jtAcc*=dtratio}pact1!=c.active&&(_this27.contacts.modified=!0),pre6=cx_ite8,prei=cx_itei,cx_itei=cx_itei.next,cx_ite8=cx_ite8.next}}if(_this27.hc2){if(_this27.hpc2=!0,_this27.oc1.posOnly){var tmp3=_this27.c1;_this27.c1=_this27.c2,_this27.c2=tmp3;var tmp21=_this27.oc1;_this27.oc1=_this27.oc2,_this27.oc2=tmp21,_this27.hc2=!1}else _this27.oc2.posOnly&&(_this27.hc2=!1);_this27.oc1.posOnly&&(fst=!0)}else _this27.hpc2=!1;if(_this27.jrAcc*=dtratio,fst||(_this27.rn1a=_this27.ny*_this27.c1.r1x-_this27.nx*_this27.c1.r1y,_this27.rt1a=_this27.c1.r1x*_this27.nx+_this27.c1.r1y*_this27.ny,_this27.rn1b=_this27.ny*_this27.c1.r2x-_this27.nx*_this27.c1.r2y,_this27.rt1b=_this27.c1.r2x*_this27.nx+_this27.c1.r2y*_this27.ny,_this27.k1x=_this27.b2.kinvelx-_this27.c1.r2y*_this27.b2.kinangvel-(_this27.b1.kinvelx-_this27.c1.r1y*_this27.b1.kinangvel),_this27.k1y=_this27.b2.kinvely+_this27.c1.r2x*_this27.b2.kinangvel-(_this27.b1.kinvely+_this27.c1.r1x*_this27.b1.kinangvel)),_this27.hc2)if(_this27.rn2a=_this27.ny*_this27.c2.r1x-_this27.nx*_this27.c2.r1y,_this27.rt2a=_this27.c2.r1x*_this27.nx+_this27.c2.r1y*_this27.ny,_this27.rn2b=_this27.ny*_this27.c2.r2x-_this27.nx*_this27.c2.r2y,_this27.rt2b=_this27.c2.r2x*_this27.nx+_this27.c2.r2y*_this27.ny,_this27.k2x=_this27.b2.kinvelx-_this27.c2.r2y*_this27.b2.kinangvel-(_this27.b1.kinvelx-_this27.c2.r1y*_this27.b1.kinangvel),_this27.k2y=_this27.b2.kinvely+_this27.c2.r2x*_this27.b2.kinangvel-(_this27.b1.kinvely+_this27.c2.r1x*_this27.b1.kinangvel),_this27.kMassa=mass_sum+_this27.b1.sinertia*_this27.rn1a*_this27.rn1a+_this27.b2.sinertia*_this27.rn1b*_this27.rn1b,_this27.kMassb=mass_sum+_this27.b1.sinertia*_this27.rn1a*_this27.rn2a+_this27.b2.sinertia*_this27.rn1b*_this27.rn2b,_this27.kMassc=mass_sum+_this27.b1.sinertia*_this27.rn2a*_this27.rn2a+_this27.b2.sinertia*_this27.rn2b*_this27.rn2b,_this27.kMassa*_this27.kMassa+2*_this27.kMassb*_this27.kMassb+_this27.kMassc*_this27.kMassc<nape.Config.illConditionedThreshold*(_this27.kMassa*_this27.kMassc-_this27.kMassb*_this27.kMassb)){_this27.Ka=_this27.kMassa,_this27.Kb=_this27.kMassb,_this27.Kc=_this27.kMassc;var det=_this27.kMassa*_this27.kMassc-_this27.kMassb*_this27.kMassb;if(det!=det)_this27.kMassa=_this27.kMassb=_this27.kMassc=0;else if(0==det){var flag=0;0!=_this27.kMassa?_this27.kMassa=1/_this27.kMassa:(_this27.kMassa=0,flag|=1),0!=_this27.kMassc?_this27.kMassc=1/_this27.kMassc:(_this27.kMassc=0,flag|=2),_this27.kMassb=0}else{det=1/det;var t=_this27.kMassc*det;_this27.kMassc=_this27.kMassa*det,_this27.kMassa=t,_this27.kMassb*=-det}}else{if(_this27.hc2=!1,_this27.oc2.dist<_this27.oc1.dist){var t1=_this27.c1;_this27.c1=_this27.c2,_this27.c2=t1}_this27.oc2.active=!1,_this27.contacts.modified=!0}_this27.surfacex=_this27.b2.svelx,_this27.surfacey=_this27.b2.svely;var t2=1;_this27.surfacex+=1*_this27.b1.svelx,_this27.surfacey+=1*_this27.b1.svely,_this27.surfacex=-_this27.surfacex,_this27.surfacey=-_this27.surfacey,_this27.rMass=_this27.b1.sinertia+_this27.b2.sinertia,0!=_this27.rMass&&(_this27.rMass=1/_this27.rMass),fst&&(arb.active=!1)}else{var _this30=arb.fluidarb;-1==_this30.pre_dt&&(_this30.pre_dt=dt);var dtratio1=dt/_this30.pre_dt;_this30.pre_dt=dt,_this30.r1x=_this30.centroidx-_this30.b1.posx,_this30.r1y=_this30.centroidy-_this30.b1.posy,_this30.r2x=_this30.centroidx-_this30.b2.posx,_this30.r2y=_this30.centroidy-_this30.b2.posy;var g1x=0,g1y=0;_this30.ws1.fluidEnabled&&null!=_this30.ws1.fluidProperties.wrap_gravity?(g1x=_this30.ws1.fluidProperties.gravityx,g1y=_this30.ws1.fluidProperties.gravityy):(g1x=this.gravityx,g1y=this.gravityy);var g2x=0,g2y=0;_this30.ws2.fluidEnabled&&null!=_this30.ws2.fluidProperties.wrap_gravity?(g2x=_this30.ws2.fluidProperties.gravityx,g2y=_this30.ws2.fluidProperties.gravityy):(g2x=this.gravityx,g2y=this.gravityy);var buoyx=0,buoyy=0;if(_this30.ws1.fluidEnabled&&_this30.ws2.fluidEnabled){var mass1=_this30.overlap*_this30.ws1.fluidProperties.density,mass2=_this30.overlap*_this30.ws2.fluidProperties.density;if(mass1>mass2){var t3=mass1+mass2;buoyx-=g1x*t3,buoyy-=g1y*t3}else if(mass1<mass2){var t4=mass1+mass2;buoyx+=g2x*t4,buoyy+=g2y*t4}else{var gx=0,gy=0;gx=g1x+g2x,gy=g1y+g2y;var t5=.5;if(gx*=.5,gy*=.5,_this30.ws1.worldCOMx*gx+_this30.ws1.worldCOMy*gy>_this30.ws2.worldCOMx*gx+_this30.ws2.worldCOMy*gy){var t6=mass1+mass2;buoyx-=gx*t6,buoyy-=gy*t6}else{var t7=mass1+mass2;buoyx+=gx*t7,buoyy+=gy*t7}}}else if(_this30.ws1.fluidEnabled){var mass=_this30.overlap*_this30.ws1.fluidProperties.density,t8=mass;buoyx-=g1x*mass,buoyy-=g1y*mass}else if(_this30.ws2.fluidEnabled){var mass3=_this30.overlap*_this30.ws2.fluidProperties.density,t9=mass3;buoyx+=g2x*mass3,buoyy+=g2y*mass3}var t10=dt;if(buoyx*=dt,buoyy*=dt,_this30.buoyx=buoyx,_this30.buoyy=buoyy,2==_this30.b1.type){var t11=_this30.b1.imass;_this30.b1.velx-=buoyx*t11,_this30.b1.vely-=buoyy*t11,_this30.b1.angvel-=(buoyy*_this30.r1x-buoyx*_this30.r1y)*_this30.b1.iinertia}if(2==_this30.b2.type){var t12=_this30.b2.imass;_this30.b2.velx+=buoyx*t12,_this30.b2.vely+=buoyy*t12,_this30.b2.angvel+=(buoyy*_this30.r2x-buoyx*_this30.r2y)*_this30.b2.iinertia}if(_this30.ws1.fluidEnabled&&0!=_this30.ws1.fluidProperties.viscosity||_this30.ws2.fluidEnabled&&0!=_this30.ws2.fluidProperties.viscosity){_this30.nodrag=!1;var tViscosity=0;if(_this30.ws1.fluidEnabled&&(_this30.ws2.validate_angDrag(),tViscosity+=_this30.ws1.fluidProperties.viscosity*_this30.ws2.angDrag*_this30.overlap/_this30.ws2.area),_this30.ws2.fluidEnabled&&(_this30.ws1.validate_angDrag(),tViscosity+=_this30.ws2.fluidProperties.viscosity*_this30.ws1.angDrag*_this30.overlap/_this30.ws1.area),0!=tViscosity){var iSum=_this30.b1.sinertia+_this30.b2.sinertia;_this30.wMass=0!=iSum?1/iSum:0,tViscosity*=4e-4;var omega=2*Math.PI*tViscosity;_this30.agamma=1/(dt*omega*(2+omega*dt));var ig=1/(1+_this30.agamma),biasCoef=dt*omega*omega*_this30.agamma;_this30.agamma*=ig,_this30.wMass*=ig}else _this30.wMass=0,_this30.agamma=0;var vrnx=_this30.b2.velx+_this30.b2.kinvelx-_this30.r2y*(_this30.b2.angvel+_this30.b2.kinangvel)-(_this30.b1.velx+_this30.b1.kinvelx-_this30.r1y*(_this30.b2.angvel+_this30.b2.kinangvel)),vrny=_this30.b2.vely+_this30.b2.kinvely+_this30.r2x*(_this30.b2.angvel+_this30.b2.kinangvel)-(_this30.b1.vely+_this30.b1.kinvely+_this30.r1x*(_this30.b1.angvel+_this30.b1.kinangvel));if(!(vrnx*vrnx+vrny*vrny<nape.Config.epsilon*nape.Config.epsilon)){var d=vrnx*vrnx+vrny*vrny,imag=1/Math.sqrt(d),t13=imag;vrnx*=imag,vrny*=imag,_this30.nx=vrnx,_this30.ny=vrny}var tViscosity1=0;if(_this30.ws1.fluidEnabled){var f=-_this30.ws1.fluidProperties.viscosity*_this30.overlap/_this30.ws2.area;if(0==_this30.ws2.type)tViscosity1-=f*_this30.ws2.circle.radius*nape.Config.fluidLinearDrag/(2*_this30.ws2.circle.radius*Math.PI);else{for(var poly,bord=0,acc=0,cx_ite9=_this30.ws2.polygon.edges.head;null!=cx_ite9;){var ex=cx_ite9.elt;bord+=ex.length;var fact=f*ex.length*(ex.gnormx*_this30.nx+ex.gnormy*_this30.ny);fact>0&&(fact=fact*=-nape.Config.fluidVacuumDrag),acc-=.5*fact*nape.Config.fluidLinearDrag,cx_ite9=cx_ite9.next}tViscosity1+=acc/bord}}if(_this30.ws2.fluidEnabled){var f1=-_this30.ws2.fluidProperties.viscosity*_this30.overlap/_this30.ws1.area;if(0==_this30.ws1.type)tViscosity1-=f1*_this30.ws1.circle.radius*nape.Config.fluidLinearDrag/(2*_this30.ws1.circle.radius*Math.PI);else{for(var poly1,bord1=0,acc1=0,cx_ite10=_this30.ws1.polygon.edges.head;null!=cx_ite10;){var ex1=cx_ite10.elt;bord1+=ex1.length;var fact1=f1*ex1.length*(ex1.gnormx*_this30.nx+ex1.gnormy*_this30.ny);fact1>0&&(fact1=fact1*=-nape.Config.fluidVacuumDrag),acc1-=.5*fact1*nape.Config.fluidLinearDrag,cx_ite10=cx_ite10.next}tViscosity1+=acc1/bord1}}if(0!=tViscosity1){var m=_this30.b1.smass+_this30.b2.smass,Ka=0,Kb=0,Kc=0;if(Ka=m,Kb=0,Kc=m,0!=_this30.b1.sinertia){var X=_this30.r1x*_this30.b1.sinertia,Y=_this30.r1y*_this30.b1.sinertia;Ka+=Y*_this30.r1y,Kb+=-Y*_this30.r1x,Kc+=X*_this30.r1x}if(0!=_this30.b2.sinertia){var X1=_this30.r2x*_this30.b2.sinertia,Y1=_this30.r2y*_this30.b2.sinertia;Ka+=Y1*_this30.r2y,Kb+=-Y1*_this30.r2x,Kc+=X1*_this30.r2x}var det1=Ka*Kc-Kb*Kb,biasCoef1;if(det1!=det1)Ka=Kb=Kc=0;else if(0==det1){var flag1=0;0!=Ka?Ka=1/Ka:(Ka=0,flag1|=1),0!=Kc?Kc=1/Kc:(Kc=0,flag1|=2),Kb=0}else{var t14=Kc*(det1=1/det1);Kc=Ka*det1,Ka=t14,Kb*=-det1}_this30.vMassa=Ka,_this30.vMassb=Kb,_this30.vMassc=Kc;var omega1=2*Math.PI*tViscosity1;_this30.lgamma=1/(dt*omega1*(2+omega1*dt));var ig1=1/(1+_this30.lgamma);biasCoef1=dt*omega1*omega1*_this30.lgamma,_this30.lgamma*=ig1;var X2=ig1;_this30.vMassa*=X2,_this30.vMassb*=X2,_this30.vMassc*=X2}else _this30.vMassa=0,_this30.vMassb=0,_this30.vMassc=0,_this30.lgamma=0}else _this30.nodrag=!0,_this30.dampx=0,_this30.dampy=0,_this30.adamp=0;var t15=dtratio1;_this30.dampx*=t15,_this30.dampy*=t15,_this30.adamp*=dtratio1}}else if(null!=arb.colarb){var _this31=arb.colarb,fst1=!0,pre7=null,prei1=null,cx_itei1=_this31.innards.next;_this31.hc2=!1;for(var cx_ite11=_this31.contacts.next;null!=cx_ite11;){var c3=cx_ite11;if(c3.stamp+nape.Config.arbiterExpirationDelay<_this31.stamp){var _this32=_this31.contacts,old8,ret32;null==pre7?(ret32=(old8=_this32.next).next,_this32.next=ret32,null==_this32.next&&(_this32.pushmod=!0)):(ret32=(old8=pre7.next).next,pre7.next=ret32,null==ret32&&(_this32.pushmod=!0)),old8._inuse=!1,_this32.modified=!0,_this32.length--,_this32.pushmod=!0,cx_ite11=ret32;var _this33=_this31.innards,old9,ret33;null==prei1?(ret33=(old9=_this33.next).next,_this33.next=ret33,null==_this33.next&&(_this33.pushmod=!0)):(ret33=(old9=prei1.next).next,prei1.next=ret33,null==ret33&&(_this33.pushmod=!0)),old9._inuse=!1,_this33.modified=!0,_this33.length--,_this33.pushmod=!0,cx_itei1=ret33;var o17=c3;o17.arbiter=null,o17.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o17}else{var ci1=c3.inner,pact2=c3.active;c3.active=c3.stamp==_this31.stamp,c3.active&&(fst1?(fst1=!1,_this31.c1=ci1,_this31.oc1=c3):(_this31.hc2=!0,_this31.c2=ci1,_this31.oc2=c3)),pact2!=c3.active&&(_this31.contacts.modified=!0),pre7=cx_ite11,prei1=cx_itei1,cx_itei1=cx_itei1.next,cx_ite11=cx_ite11.next}}if(_this31.hc2){if(_this31.hpc2=!0,_this31.oc1.posOnly){var tmp4=_this31.c1;_this31.c1=_this31.c2,_this31.c2=tmp4;var tmp22=_this31.oc1;_this31.oc1=_this31.oc2,_this31.oc2=tmp22,_this31.hc2=!1}else _this31.oc2.posOnly&&(_this31.hc2=!1);_this31.oc1.posOnly&&(fst1=!0)}else _this31.hpc2=!1;fst1&&(arb.active=!1)}return pact!=arb.active&&(arb.b1.arbiters.modified=!0,arb.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0),!1},zpp_nape.space.ZPP_Space.prototype.prestep=function(dt){for(var pre=null,cx_ite=this.live_constraints.head;null!=cx_ite;){var con=cx_ite.elt;con.preStep(dt)?(cx_ite=this.live_constraints.erase(pre),con.broken(),this.constraintCbBreak(con),con.removeOnBreak?(con.component.sleeping=!0,this.midstep=!1,null!=con.compound?con.compound.wrap_constraints.remove(con.outer):this.wrap_constraints.remove(con.outer),this.midstep=!0):con.active=!1,con.clearcache()):(pre=cx_ite,cx_ite=cx_ite.next)}var pre1=null,arbs=this.c_arbiters_true,arbite=arbs.head,fst=null!=this.c_arbiters_false;for(fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre1=null);null!=arbite;){var arb=arbite.elt;if(this.presteparb(arb,dt)){var old,ret;null==pre1?(ret=(old=arbs.head).next,arbs.head=ret,null==arbs.head&&(arbs.pushmod=!0)):(ret=(old=pre1.next).next,pre1.next=ret,null==ret&&(arbs.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,arbs.modified=!0,arbs.length--,arbs.pushmod=!0,arbite=ret,fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre1=null)}else pre1=arbite,arbite=arbite.next,fst&&null==arbite&&(fst=!1,arbite=this.c_arbiters_false.head,arbs=this.c_arbiters_false,pre1=null)}var pre2=null,arbs1=this.f_arbiters,arbite1=arbs1.head,fst1=!1;for(fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre2=null);null!=arbite1;){var arb1=arbite1.elt;if(this.presteparb(arb1,dt)){var old1,ret1;null==pre2?(ret1=(old1=arbs1.head).next,arbs1.head=ret1,null==arbs1.head&&(arbs1.pushmod=!0)):(ret1=(old1=pre2.next).next,pre2.next=ret1,null==ret1&&(arbs1.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o1,arbs1.modified=!0,arbs1.length--,arbs1.pushmod=!0,arbite1=ret1,fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre2=null)}else pre2=arbite1,arbite1=arbite1.next,fst1&&null==arbite1&&(fst1=!1,arbs1=null,pre2=null)}var pre3=null,arbs2=this.s_arbiters,arbite2=arbs2.head,fst2=!1;for(fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre3=null);null!=arbite2;){var arb2=arbite2.elt;if(this.presteparb(arb2,dt)){var old2,ret2;null==pre3?(ret2=(old2=arbs2.head).next,arbs2.head=ret2,null==arbs2.head&&(arbs2.pushmod=!0)):(ret2=(old2=pre3.next).next,pre3.next=ret2,null==ret2&&(arbs2.pushmod=!0));var o2=old2;o2.elt=null,o2.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o2,arbs2.modified=!0,arbs2.length--,arbs2.pushmod=!0,arbite2=ret2,fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre3=null)}else pre3=arbite2,arbite2=arbite2.next,fst2&&null==arbite2&&(fst2=!1,arbs2=null,pre3=null)}},zpp_nape.space.ZPP_Space.prototype.warmStart=function(){for(var cx_ite=this.f_arbiters.head;null!=cx_ite;){var arb=cx_ite.elt;if(arb.active&&0!=(1&arb.immState)){var t=arb.b1.imass;arb.b1.velx-=arb.dampx*t,arb.b1.vely-=arb.dampy*t;var t1=arb.b2.imass;arb.b2.velx+=arb.dampx*t1,arb.b2.vely+=arb.dampy*t1,arb.b1.angvel-=arb.b1.iinertia*(arb.dampy*arb.r1x-arb.dampx*arb.r1y),arb.b2.angvel+=arb.b2.iinertia*(arb.dampy*arb.r2x-arb.dampx*arb.r2y),arb.b1.angvel-=arb.adamp*arb.b1.iinertia,arb.b2.angvel+=arb.adamp*arb.b2.iinertia}cx_ite=cx_ite.next}var arbi=this.c_arbiters_false.head,fst=!0;for(null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1);null!=arbi;){var arb1=arbi.elt;if(arb1.active&&0!=(1&arb1.immState)){var jx=arb1.nx*arb1.c1.jnAcc-arb1.ny*arb1.c1.jtAcc,jy=arb1.ny*arb1.c1.jnAcc+arb1.nx*arb1.c1.jtAcc,t2=arb1.b1.imass;arb1.b1.velx-=jx*t2,arb1.b1.vely-=jy*t2,arb1.b1.angvel-=arb1.b1.iinertia*(jy*arb1.c1.r1x-jx*arb1.c1.r1y);var t3=arb1.b2.imass;if(arb1.b2.velx+=jx*t3,arb1.b2.vely+=jy*t3,arb1.b2.angvel+=arb1.b2.iinertia*(jy*arb1.c1.r2x-jx*arb1.c1.r2y),arb1.hc2){var jx1=arb1.nx*arb1.c2.jnAcc-arb1.ny*arb1.c2.jtAcc,jy1=arb1.ny*arb1.c2.jnAcc+arb1.nx*arb1.c2.jtAcc,t4=arb1.b1.imass;arb1.b1.velx-=jx1*t4,arb1.b1.vely-=jy1*t4,arb1.b1.angvel-=arb1.b1.iinertia*(jy1*arb1.c2.r1x-jx1*arb1.c2.r1y);var t5=arb1.b2.imass;arb1.b2.velx+=jx1*t5,arb1.b2.vely+=jy1*t5,arb1.b2.angvel+=arb1.b2.iinertia*(jy1*arb1.c2.r2x-jx1*arb1.c2.r2y)}arb1.b2.angvel+=arb1.jrAcc*arb1.b2.iinertia,arb1.b1.angvel-=arb1.jrAcc*arb1.b1.iinertia}arbi=arbi.next,fst&&null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1)}for(var cx_ite1=this.live_constraints.head;null!=cx_ite1;){var con;cx_ite1.elt.warmStart(),cx_ite1=cx_ite1.next}},zpp_nape.space.ZPP_Space.prototype.iterateVel=function(times){for(var _g=0,_g1=times;_g<_g1;){for(var i=_g++,cx_ite=this.f_arbiters.head;null!=cx_ite;){var arb=cx_ite.elt;if(arb.active&&0!=(1&arb.immState)&&!arb.nodrag){var w1=arb.b1.angvel+arb.b1.kinangvel,w2=arb.b2.angvel+arb.b2.kinangvel,jx=arb.b1.velx+arb.b1.kinvelx-arb.r1y*w1-(arb.b2.velx+arb.b2.kinvelx-arb.r2y*w2),jy=arb.b1.vely+arb.b1.kinvely+arb.r1x*w1-(arb.b2.vely+arb.b2.kinvely+arb.r2x*w2),t=arb.vMassa*jx+arb.vMassb*jy;jy=arb.vMassb*jx+arb.vMassc*jy,jx=t;var t1=arb.lgamma;jx-=arb.dampx*t1,jy-=arb.dampy*t1;var t2=1;arb.dampx+=1*jx,arb.dampy+=1*jy;var t3=arb.b1.imass;arb.b1.velx-=jx*t3,arb.b1.vely-=jy*t3;var t4=arb.b2.imass;arb.b2.velx+=jx*t4,arb.b2.vely+=jy*t4,arb.b1.angvel-=arb.b1.iinertia*(jy*arb.r1x-jx*arb.r1y),arb.b2.angvel+=arb.b2.iinertia*(jy*arb.r2x-jx*arb.r2y);var j_damp=(w1-w2)*arb.wMass-arb.adamp*arb.agamma;arb.adamp+=j_damp,arb.b1.angvel-=j_damp*arb.b1.iinertia,arb.b2.angvel+=j_damp*arb.b2.iinertia}cx_ite=cx_ite.next}for(var pre=null,cx_ite1=this.live_constraints.head;null!=cx_ite1;){var con=cx_ite1.elt;con.applyImpulseVel()?(cx_ite1=this.live_constraints.erase(pre),con.broken(),this.constraintCbBreak(con),con.removeOnBreak?(con.component.sleeping=!0,this.midstep=!1,null!=con.compound?con.compound.wrap_constraints.remove(con.outer):this.wrap_constraints.remove(con.outer),this.midstep=!0):con.active=!1,con.clearcache()):(pre=cx_ite1,cx_ite1=cx_ite1.next)}var arbi=this.c_arbiters_false.head,fst=!0;for(null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1);null!=arbi;){var arb1=arbi.elt;if(arb1.active&&0!=(1&arb1.immState)){var v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel),v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel),j=(v1y*arb1.nx-v1x*arb1.ny+arb1.surfacex)*arb1.c1.tMass,jMax=arb1.c1.friction*arb1.c1.jnAcc,jOld=arb1.c1.jtAcc,cjAcc=jOld-j;cjAcc>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,arb1.c1.jtAcc=cjAcc;var jx1=-arb1.ny*j,jy1=arb1.nx*j;if(arb1.b2.velx+=jx1*arb1.b2.imass,arb1.b2.vely+=jy1*arb1.b2.imass,arb1.b1.velx-=jx1*arb1.b1.imass,arb1.b1.vely-=jy1*arb1.b1.imass,arb1.b2.angvel+=arb1.rt1b*j*arb1.b2.iinertia,arb1.b1.angvel-=arb1.rt1a*j*arb1.b1.iinertia,arb1.hc2){var v2x=arb1.k2x+arb1.b2.velx-arb1.c2.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c2.r1y*arb1.b1.angvel),v2y=arb1.k2y+arb1.b2.vely+arb1.c2.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c2.r1x*arb1.b1.angvel);j=(v2y*arb1.nx-v2x*arb1.ny+arb1.surfacex)*arb1.c2.tMass,jMax=arb1.c2.friction*arb1.c2.jnAcc,(cjAcc=(jOld=arb1.c2.jtAcc)-j)>jMax?cjAcc=jMax:cjAcc<-jMax&&(cjAcc=-jMax),j=cjAcc-jOld,arb1.c2.jtAcc=cjAcc,jx1=-arb1.ny*j,jy1=arb1.nx*j,arb1.b2.velx+=jx1*arb1.b2.imass,arb1.b2.vely+=jy1*arb1.b2.imass,arb1.b1.velx-=jx1*arb1.b1.imass,arb1.b1.vely-=jy1*arb1.b1.imass,arb1.b2.angvel+=arb1.rt2b*j*arb1.b2.iinertia,arb1.b1.angvel-=arb1.rt2a*j*arb1.b1.iinertia,v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel),v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel),v2x=arb1.k2x+arb1.b2.velx-arb1.c2.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c2.r1y*arb1.b1.angvel),v2y=arb1.k2y+arb1.b2.vely+arb1.c2.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c2.r1x*arb1.b1.angvel);var ax=arb1.c1.jnAcc,ay=arb1.c2.jnAcc,jnx=v1x*arb1.nx+v1y*arb1.ny+arb1.surfacey+arb1.c1.bounce-(arb1.Ka*ax+arb1.Kb*ay),jny=v2x*arb1.nx+v2y*arb1.ny+arb1.surfacey+arb1.c2.bounce-(arb1.Kb*ax+arb1.Kc*ay),xx=-(arb1.kMassa*jnx+arb1.kMassb*jny),xy=-(arb1.kMassb*jnx+arb1.kMassc*jny);xx>=0&&xy>=0?(jnx=xx-ax,jny=xy-ay,arb1.c1.jnAcc=xx,arb1.c2.jnAcc=xy):(xx=-arb1.c1.nMass*jnx)>=0&&arb1.Kb*xx+jny>=0?(jnx=xx-ax,jny=-ay,arb1.c1.jnAcc=xx,arb1.c2.jnAcc=0):(xy=-arb1.c2.nMass*jny)>=0&&arb1.Kb*xy+jnx>=0?(jnx=-ax,jny=xy-ay,arb1.c1.jnAcc=0,arb1.c2.jnAcc=xy):jnx>=0&&jny>=0?(jnx=-ax,jny=-ay,arb1.c1.jnAcc=arb1.c2.jnAcc=0):(jnx=0,jny=0),j=jnx+jny,jx1=arb1.nx*j,jy1=arb1.ny*j,arb1.b2.velx+=jx1*arb1.b2.imass,arb1.b2.vely+=jy1*arb1.b2.imass,arb1.b1.velx-=jx1*arb1.b1.imass,arb1.b1.vely-=jy1*arb1.b1.imass,arb1.b2.angvel+=(arb1.rn1b*jnx+arb1.rn2b*jny)*arb1.b2.iinertia,arb1.b1.angvel-=(arb1.rn1a*jnx+arb1.rn2a*jny)*arb1.b1.iinertia}else{var dw;if(0!=arb1.radius)j=(arb1.b2.angvel-arb1.b1.angvel)*arb1.rMass,jMax=arb1.rfric*arb1.c1.jnAcc,jOld=arb1.jrAcc,arb1.jrAcc-=j,arb1.jrAcc>jMax?arb1.jrAcc=jMax:arb1.jrAcc<-jMax&&(arb1.jrAcc=-jMax),j=arb1.jrAcc-jOld,arb1.b2.angvel+=j*arb1.b2.iinertia,arb1.b1.angvel-=j*arb1.b1.iinertia;v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel),v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel),j=(arb1.c1.bounce+(arb1.nx*v1x+arb1.ny*v1y)+arb1.surfacey)*arb1.c1.nMass,(cjAcc=(jOld=arb1.c1.jnAcc)-j)<0&&(cjAcc=0),j=cjAcc-jOld,arb1.c1.jnAcc=cjAcc,jx1=arb1.nx*j,jy1=arb1.ny*j,arb1.b2.velx+=jx1*arb1.b2.imass,arb1.b2.vely+=jy1*arb1.b2.imass,arb1.b1.velx-=jx1*arb1.b1.imass,arb1.b1.vely-=jy1*arb1.b1.imass,arb1.b2.angvel+=arb1.rn1b*j*arb1.b2.iinertia,arb1.b1.angvel-=arb1.rn1a*j*arb1.b1.iinertia}}arbi=arbi.next,fst&&null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1)}}},zpp_nape.space.ZPP_Space.prototype.iteratePos=function(times){for(var _g=0,_g1=times;_g<_g1;){for(var i=_g++,pre=null,cx_ite=this.live_constraints.head;null!=cx_ite;){var con=cx_ite.elt;!con.__velocity&&con.stiff&&con.applyImpulsePos()?(cx_ite=this.live_constraints.erase(pre),con.broken(),this.constraintCbBreak(con),con.removeOnBreak?(con.component.sleeping=!0,this.midstep=!1,null!=con.compound?con.compound.wrap_constraints.remove(con.outer):this.wrap_constraints.remove(con.outer),this.midstep=!0):con.active=!1,con.clearcache()):(pre=cx_ite,cx_ite=cx_ite.next)}var arbi=this.c_arbiters_false.head,fst=!0;for(null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1);null!=arbi;){var arb=arbi.elt;if(arb.active&&0!=(1&arb.immState))if(2==arb.ptype){var c=arb.c1,r2x=0,r2y=0;r2x=arb.b2.axisy*c.lr2x-arb.b2.axisx*c.lr2y,r2y=c.lr2x*arb.b2.axisx+c.lr2y*arb.b2.axisy;var t=1;r2x+=1*arb.b2.posx,r2y+=1*arb.b2.posy;var r1x=0,r1y=0;r1x=arb.b1.axisy*c.lr1x-arb.b1.axisx*c.lr1y,r1y=c.lr1x*arb.b1.axisx+c.lr1y*arb.b1.axisy;var t1=1,dx=0,dy=0;dx=r2x-(r1x+=1*arb.b1.posx),dy=r2y-(r1y+=1*arb.b1.posy);var dl=Math.sqrt(dx*dx+dy*dy),r=arb.radius-nape.Config.collisionSlop,err=dl-r;if(dx*arb.nx+dy*arb.ny<0&&(dx=-dx,dy=-dy,err-=arb.radius),err<0)if(dl<nape.Config.epsilon)0!=arb.b1.smass?arb.b1.posx+=10*nape.Config.epsilon:arb.b2.posx+=10*nape.Config.epsilon;else{var t2=1/dl;dx*=t2;var px=.5*(r1x+r2x),py=.5*(r1y+r2y),pen=dl-r,rn1=(dy*=t2)*(r1x=px-arb.b1.posx)-dx*(r1y=py-arb.b1.posy),rn2=dy*(r2x=px-arb.b2.posx)-dx*(r2y=py-arb.b2.posy),K=arb.b2.smass+rn2*rn2*arb.b2.sinertia+arb.b1.smass+rn1*rn1*arb.b1.sinertia;if(0!=K){var jn=-arb.biasCoef*pen/K,Jx=0,Jy=0,t3=jn;Jx=dx*jn,Jy=dy*jn;var t4=arb.b1.imass;arb.b1.posx-=Jx*t4,arb.b1.posy-=Jy*t4;var _this=arb.b1,dr=-rn1*arb.b1.iinertia*jn;if(_this.rot+=dr,dr*dr>1e-4)_this.axisx=Math.sin(_this.rot),_this.axisy=Math.cos(_this.rot);else{var d2=dr*dr,p=1-.5*d2,m=1-d2*d2/8,nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m,_this.axisx=nx}var t5=arb.b2.imass;arb.b2.posx+=Jx*t5,arb.b2.posy+=Jy*t5;var _this1=arb.b2,dr1=rn2*arb.b2.iinertia*jn;if(_this1.rot+=dr1,dr1*dr1>1e-4)_this1.axisx=Math.sin(_this1.rot),_this1.axisy=Math.cos(_this1.rot);else{var d21=dr1*dr1,p1=1-.5*d21,m1=1-d21*d21/8,nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1,_this1.axisx=nx1}}}}else{var gnormx=0,gnormy=0,gproj,clip1x=0,clip1y=0,clip2x=0,clip2y=0;if(0==arb.ptype){gnormx=arb.b1.axisy*arb.lnormx-arb.b1.axisx*arb.lnormy,gnormy=arb.lnormx*arb.b1.axisx+arb.lnormy*arb.b1.axisy,gproj=arb.lproj+(gnormx*arb.b1.posx+gnormy*arb.b1.posy),clip1x=arb.b2.axisy*arb.c1.lr1x-arb.b2.axisx*arb.c1.lr1y,clip1y=arb.c1.lr1x*arb.b2.axisx+arb.c1.lr1y*arb.b2.axisy;var t6=1;if(clip1x+=1*arb.b2.posx,clip1y+=1*arb.b2.posy,arb.hpc2){clip2x=arb.b2.axisy*arb.c2.lr1x-arb.b2.axisx*arb.c2.lr1y,clip2y=arb.c2.lr1x*arb.b2.axisx+arb.c2.lr1y*arb.b2.axisy;var t7=1;clip2x+=1*arb.b2.posx,clip2y+=1*arb.b2.posy}}else{gnormx=arb.b2.axisy*arb.lnormx-arb.b2.axisx*arb.lnormy,gnormy=arb.lnormx*arb.b2.axisx+arb.lnormy*arb.b2.axisy,gproj=arb.lproj+(gnormx*arb.b2.posx+gnormy*arb.b2.posy),clip1x=arb.b1.axisy*arb.c1.lr1x-arb.b1.axisx*arb.c1.lr1y,clip1y=arb.c1.lr1x*arb.b1.axisx+arb.c1.lr1y*arb.b1.axisy;var t8=1;if(clip1x+=1*arb.b1.posx,clip1y+=1*arb.b1.posy,arb.hpc2){clip2x=arb.b1.axisy*arb.c2.lr1x-arb.b1.axisx*arb.c2.lr1y,clip2y=arb.c2.lr1x*arb.b1.axisx+arb.c2.lr1y*arb.b1.axisy;var t9=1;clip2x+=1*arb.b1.posx,clip2y+=1*arb.b1.posy}}var err1=clip1x*gnormx+clip1y*gnormy-gproj-arb.radius;err1+=nape.Config.collisionSlop;var err2=0;if(arb.hpc2&&(err2=clip2x*gnormx+clip2y*gnormy-gproj-arb.radius,err2+=nape.Config.collisionSlop),err1<0||err2<0){arb.rev&&(gnormx=-gnormx,gnormy=-gnormy);var c1r1x=0,c1r1y=0;c1r1x=clip1x-arb.b1.posx,c1r1y=clip1y-arb.b1.posy;var c1r2x=0,c1r2y=0;c1r2x=clip1x-arb.b2.posx,c1r2y=clip1y-arb.b2.posy;var c2r1x=0,c2r1y=0,c2r2x=0,c2r2y=0;if(arb.hpc2){var rn1a=gnormy*c1r1x-gnormx*c1r1y,rn1b=gnormy*c1r2x-gnormx*c1r2y,rn2a=gnormy*(c2r1x=clip2x-arb.b1.posx)-gnormx*(c2r1y=clip2y-arb.b1.posy),rn2b=gnormy*(c2r2x=clip2x-arb.b2.posx)-gnormx*(c2r2y=clip2y-arb.b2.posy),mass_sum=arb.b1.smass+arb.b2.smass;arb.kMassa=mass_sum+arb.b1.sinertia*rn1a*rn1a+arb.b2.sinertia*rn1b*rn1b,arb.kMassb=mass_sum+arb.b1.sinertia*rn1a*rn2a+arb.b2.sinertia*rn1b*rn2b,arb.kMassc=mass_sum+arb.b1.sinertia*rn2a*rn2a+arb.b2.sinertia*rn2b*rn2b;var Ka=0,Kb=0,Kc=0;Ka=arb.kMassa,Kb=arb.kMassb,Kc=arb.kMassc;for(var bx=err1*arb.biasCoef,by=err2*arb.biasCoef;;){var xx=0,xy=0;xx=-(xx=bx),xy=-(xy=by);var det=arb.kMassa*arb.kMassc-arb.kMassb*arb.kMassb,vn2,vn1;if(det!=det)xx=xy=0;else if(0==det)0!=arb.kMassa?xx/=arb.kMassa:xx=0,0!=arb.kMassc?xy/=arb.kMassc:xy=0;else{var t10=(det=1/det)*(arb.kMassc*xx-arb.kMassb*xy);xy=det*(arb.kMassa*xy-arb.kMassb*xx),xx=t10}if(xx>=0&&xy>=0){var t11=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t11,arb.b1.posy-=gnormy*t11;var _this2=arb.b1,dr2=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this2.rot+=dr2,dr2*dr2>1e-4)_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot);else{var d22=dr2*dr2,p2=1-.5*d22,m2=1-d22*d22/8,nx2=(p2*_this2.axisx+dr2*_this2.axisy)*m2;_this2.axisy=(p2*_this2.axisy-dr2*_this2.axisx)*m2,_this2.axisx=nx2}var t12=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t12,arb.b2.posy+=gnormy*t12;var _this3=arb.b2,dr3=arb.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this3.rot+=dr3,dr3*dr3>1e-4)_this3.axisx=Math.sin(_this3.rot),_this3.axisy=Math.cos(_this3.rot);else{var d23=dr3*dr3,p3=1-.5*d23,m3=1-d23*d23/8,nx3=(p3*_this3.axisx+dr3*_this3.axisy)*m3;_this3.axisy=(p3*_this3.axisy-dr3*_this3.axisx)*m3,_this3.axisx=nx3}break}if(xy=0,(xx=-bx/Ka)>=0&&Kb*xx+by>=0){var t13=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t13,arb.b1.posy-=gnormy*t13;var _this4=arb.b1,dr4=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this4.rot+=dr4,dr4*dr4>1e-4)_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot);else{var d24=dr4*dr4,p4=1-.5*d24,m4=1-d24*d24/8,nx4=(p4*_this4.axisx+dr4*_this4.axisy)*m4;_this4.axisy=(p4*_this4.axisy-dr4*_this4.axisx)*m4,_this4.axisx=nx4}var t14=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t14,arb.b2.posy+=gnormy*t14;var _this5=arb.b2,dr5=arb.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this5.rot+=dr5,dr5*dr5>1e-4)_this5.axisx=Math.sin(_this5.rot),_this5.axisy=Math.cos(_this5.rot);else{var d25=dr5*dr5,p5=1-.5*d25,m5=1-d25*d25/8,nx5=(p5*_this5.axisx+dr5*_this5.axisy)*m5;_this5.axisy=(p5*_this5.axisy-dr5*_this5.axisx)*m5,_this5.axisx=nx5}break}if(xx=0,(xy=-by/Kc)>=0&&Kb*xy+bx>=0){var t15=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t15,arb.b1.posy-=gnormy*t15;var _this6=arb.b1,dr6=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);if(_this6.rot+=dr6,dr6*dr6>1e-4)_this6.axisx=Math.sin(_this6.rot),_this6.axisy=Math.cos(_this6.rot);else{var d26=dr6*dr6,p6=1-.5*d26,m6=1-d26*d26/8,nx6=(p6*_this6.axisx+dr6*_this6.axisy)*m6;_this6.axisy=(p6*_this6.axisy-dr6*_this6.axisx)*m6,_this6.axisx=nx6}var t16=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t16,arb.b2.posy+=gnormy*t16;var _this7=arb.b2,dr7=arb.b2.iinertia*(rn1b*xx+rn2b*xy);if(_this7.rot+=dr7,dr7*dr7>1e-4)_this7.axisx=Math.sin(_this7.rot),_this7.axisy=Math.cos(_this7.rot);else{var d27=dr7*dr7,p7=1-.5*d27,m7=1-d27*d27/8,nx7=(p7*_this7.axisx+dr7*_this7.axisy)*m7;_this7.axisy=(p7*_this7.axisy-dr7*_this7.axisx)*m7,_this7.axisx=nx7}break}break}}else{var rn11=gnormy*c1r1x-gnormx*c1r1y,rn21=gnormy*c1r2x-gnormx*c1r2y,K1=arb.b2.smass+rn21*rn21*arb.b2.sinertia+arb.b1.smass+rn11*rn11*arb.b1.sinertia;if(0!=K1){var jn1=-arb.biasCoef*err1/K1,Jx1=0,Jy1=0,t17=jn1;Jx1=gnormx*jn1,Jy1=gnormy*jn1;var t18=arb.b1.imass;arb.b1.posx-=Jx1*t18,arb.b1.posy-=Jy1*t18;var _this8=arb.b1,dr8=-rn11*arb.b1.iinertia*jn1;if(_this8.rot+=dr8,dr8*dr8>1e-4)_this8.axisx=Math.sin(_this8.rot),_this8.axisy=Math.cos(_this8.rot);else{var d28=dr8*dr8,p8=1-.5*d28,m8=1-d28*d28/8,nx8=(p8*_this8.axisx+dr8*_this8.axisy)*m8;_this8.axisy=(p8*_this8.axisy-dr8*_this8.axisx)*m8,_this8.axisx=nx8}var t19=arb.b2.imass;arb.b2.posx+=Jx1*t19,arb.b2.posy+=Jy1*t19;var _this9=arb.b2,dr9=rn21*arb.b2.iinertia*jn1;if(_this9.rot+=dr9,dr9*dr9>1e-4)_this9.axisx=Math.sin(_this9.rot),_this9.axisy=Math.cos(_this9.rot);else{var d29=dr9*dr9,p9=1-.5*d29,m9=1-d29*d29/8,nx9=(p9*_this9.axisx+dr9*_this9.axisy)*m9;_this9.axisy=(p9*_this9.axisy-dr9*_this9.axisx)*m9,_this9.axisx=nx9}}}}}arbi=arbi.next,fst&&null==arbi&&(arbi=this.c_arbiters_true.head,fst=!1)}}},zpp_nape.space.ZPP_Space.prototype.group_ignore=function(s1,s2){for(var cur=s1;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;var g1=null==cur?null:cur.group;if(null==g1)return!1;for(var cur1=s2;null!=cur1&&null==cur1.group;)cur1=null!=cur1.ishape?cur1.ishape.body:null!=cur1.icompound?cur1.icompound.compound:cur1.ibody.compound;var g2=null==cur1?null:cur1.group;if(null==g2)return!1;for(var ret=!1;null!=g1&&null!=g2;){if(g1==g2){ret=g1.ignore;break}g1.depth<g2.depth?g2=g2.group:g1=g1.group}return ret},zpp_nape.space.ZPP_Space.prototype.interactionType=function(s1,s2,b1,b2){var con_ignore;con_ignore=!1;for(var cx_ite=b1.constraints.head,tmp;null!=cx_ite;){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=!0;break}cx_ite=cx_ite.next}if(con_ignore)tmp=!1;else{for(var cur=s1;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;var g1=null==cur?null:cur.group,tmp1;if(null==g1)tmp1=!1;else{for(var cur1=s2;null!=cur1&&null==cur1.group;)cur1=null!=cur1.ishape?cur1.ishape.body:null!=cur1.icompound?cur1.icompound.compound:cur1.ibody.compound;var g2=null==cur1?null:cur1.group;if(null==g2)tmp1=!1;else{for(var ret=!1;null!=g1&&null!=g2;){if(g1==g2){ret=g1.ignore;break}g1.depth<g2.depth?g2=g2.group:g1=g1.group}tmp1=ret}}tmp=!tmp1}if(tmp){var tmp2,tmp3;if(s1.sensorEnabled||s2.sensorEnabled){var _this=s1.filter,x=s2.filter;tmp2=0!=(_this.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&_this.sensorGroup)}else tmp2=!1;if(tmp2)return 2;if(s1.fluidEnabled||s2.fluidEnabled){var _this1=s1.filter,x1=s2.filter;tmp3=0!=(_this1.fluidMask&x1.fluidGroup)&&0!=(x1.fluidMask&_this1.fluidGroup)}else tmp3=!1;if(!tmp3||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia){var _this2=s1.filter,x2=s2.filter;return 0==(_this2.collisionMask&x2.collisionGroup)||0==(x2.collisionMask&_this2.collisionGroup)||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia?-1:1}return 0}return-1},zpp_nape.space.ZPP_Space.prototype.precb=null,zpp_nape.space.ZPP_Space.prototype.prelisteners=null,zpp_nape.space.ZPP_Space.prototype.narrowPhase=function(s1,s2,stat,in_arb,continuous){var _gthis=this,ret=null,b1=s1.body,b2=s2.body,con_ignore;con_ignore=!1;for(var cx_ite=b1.constraints.head,itype,itype1;null!=cx_ite;){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=!0;break}cx_ite=cx_ite.next}if(con_ignore)itype1=!1;else{for(var cur=s1;null!=cur&&null==cur.group;)cur=null!=cur.ishape?cur.ishape.body:null!=cur.icompound?cur.icompound.compound:cur.ibody.compound;var g1=null==cur?null:cur.group,itype2;if(null==g1)itype2=!1;else{for(var cur1=s2;null!=cur1&&null==cur1.group;)cur1=null!=cur1.ishape?cur1.ishape.body:null!=cur1.icompound?cur1.icompound.compound:cur1.ibody.compound;var g2=null==cur1?null:cur1.group;if(null==g2)itype2=!1;else{for(var ret1=!1;null!=g1&&null!=g2;){if(g1==g2){ret1=g1.ignore;break}g1.depth<g2.depth?g2=g2.group:g1=g1.group}itype2=ret1}}itype1=!itype2}if(itype1){var itype3;if(s1.sensorEnabled||s2.sensorEnabled){var _this=s1.filter,x=s2.filter;itype3=0!=(_this.sensorMask&x.sensorGroup)&&0!=(x.sensorMask&_this.sensorGroup)}else itype3=!1;if(itype3)itype=2;else{var itype4;if(s1.fluidEnabled||s2.fluidEnabled){var _this1=s1.filter,x1=s2.filter;itype4=0!=(_this1.fluidMask&x1.fluidGroup)&&0!=(x1.fluidMask&_this1.fluidGroup)}else itype4=!1;if(!itype4||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia){var _this2=s1.filter,x2=s2.filter;itype=0==(_this2.collisionMask&x2.collisionGroup)||0==(x2.collisionMask&_this2.collisionGroup)||0==b1.imass&&0==b2.imass&&0==b1.iinertia&&0==b2.iinertia?-1:1}else itype=0}}else itype=-1;if(-1!=itype){var sa,sb;s1.type>s2.type?(sa=s2,sb=s1):s1.type==s2.type?s1.id<s2.id?(sa=s1,sb=s2):(sb=s1,sa=s2):(sa=s1,sb=s2);var reverse=sa==s2;if(0==itype){var xarb;if(null==in_arb){for(var ret2=null,b,cx_ite1=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;null!=cx_ite1;){var arb=cx_ite1.elt;if(arb.id==sa.id&&arb.di==sb.id){ret2=arb;break}cx_ite1=cx_ite1.next}xarb=ret2}else xarb=in_arb;var first=null==xarb,arb1,swapped=!1;if(first)null==zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool?arb1=new zpp_nape.dynamics.ZPP_FluidArbiter:(arb1=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=arb1.next,arb1.next=null);else if(null==xarb.fluidarb){var b3=null;xarb.cleared=!0;for(var _this3=xarb.b1.arbiters,pre=null,cur2=_this3.head,ret3=!1;null!=cur2;){if(cur2.elt==xarb){var old,ret4;null==pre?(ret4=(old=_this3.head).next,_this3.head=ret4,null==_this3.head&&(_this3.pushmod=!0)):(ret4=(old=pre.next).next,pre.next=ret4,null==ret4&&(_this3.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,_this3.modified=!0,_this3.length--,_this3.pushmod=!0,ret3=!0;break}pre=cur2,cur2=cur2.next}for(var _this4=xarb.b2.arbiters,pre1=null,cur3=_this4.head,ret5=!1;null!=cur3;){if(cur3.elt==xarb){var old1,ret6;null==pre1?(ret6=(old1=_this4.head).next,_this4.head=ret6,null==_this4.head&&(_this4.pushmod=!0)):(ret6=(old1=pre1.next).next,pre1.next=ret6,null==ret6&&(_this4.pushmod=!0));var o1=old1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o1,_this4.modified=!0,_this4.length--,_this4.pushmod=!0,ret5=!0;break}pre1=cur3,cur3=cur3.next}null!=xarb.pair&&(xarb.pair.arb=null,xarb.pair=null),xarb.active=!1,this.f_arbiters.modified=!0,null==zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool?arb1=new zpp_nape.dynamics.ZPP_FluidArbiter:(arb1=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=arb1.next,arb1.next=null),arb1.intchange=!0,first=!0,swapped=!0}else arb1=xarb.fluidarb;var inttype=4;if(first||arb1.stamp!=this.stamp||continuous)if(arb1.stamp=this.stamp,zpp_nape.geom.ZPP_Collide.flowCollide(sa,sb,arb1)){if(first){var di=sb.id;arb1.b1=s1.body,arb1.ws1=s1,arb1.b2=s2.body,arb1.ws2=s2,arb1.id=sa.id,arb1.di=di;var _this5=arb1.b1.arbiters,ret7;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret7=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret7.next,ret7.next=null),ret7.elt=arb1;var temp=ret7;temp.next=_this5.head,_this5.head=temp,_this5.modified=!0,_this5.length++;var _this6=arb1.b2.arbiters,ret8;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret8=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret8=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret8.next,ret8.next=null),ret8.elt=arb1;var temp1=ret8;temp1.next=_this6.head,_this6.head=temp1,_this6.modified=!0,_this6.length++,arb1.active=!0,arb1.present=0,arb1.cleared=!1,arb1.sleeping=!1,arb1.fresh=!1,arb1.presentable=!1,arb1.nx=0,arb1.ny=1,arb1.dampx=0,arb1.dampy=0,arb1.adamp=0;var _this7=this.f_arbiters,ret9;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret9=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret9=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret9.next,ret9.next=null),ret9.elt=arb1;var temp2=ret9;temp2.next=_this7.head,_this7.head=temp2,_this7.modified=!0,_this7.length++,arb1.fresh=!swapped}else arb1.fresh=arb1.up_stamp<this.stamp-1||arb1.endGenerated==this.stamp&&continuous;if(arb1.up_stamp=arb1.stamp,arb1.fresh||0==(4&arb1.immState)){arb1.immState=1;for(var anyimpure=!1,arbs1=arb1.ws1.id>arb1.ws2.id?arb1.ws2:arb1.ws1,arbs2=arb1.ws1.id>arb1.ws2.id?arb1.ws1:arb1.ws2,_this8=this.mrca1;null!=_this8.head;){var ret10=_this8.head;_this8.head=ret10.next;var o2=ret10;o2.elt=null,o2.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o2,null==_this8.head&&(_this8.pushmod=!0),_this8.modified=!0,_this8.length--}_this8.pushmod=!0;for(var _this9=this.mrca2;null!=_this9.head;){var ret11=_this9.head;_this9.head=ret11.next;var o3=ret11;o3.elt=null,o3.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o3,null==_this9.head&&(_this9.pushmod=!0),_this9.modified=!0,_this9.length--}if(_this9.pushmod=!0,null!=arbs1.cbSet){var _this10=this.mrca1,ret12;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret12=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret12=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret12.next,ret12.next=null),ret12.elt=arbs1;var temp3=ret12;temp3.next=_this10.head,_this10.head=temp3,_this10.modified=!0,_this10.length++}if(null!=arbs1.body.cbSet){var _this11=this.mrca1,o4=arbs1.body,ret13;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret13=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret13=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret13.next,ret13.next=null),ret13.elt=o4;var temp4=ret13;temp4.next=_this11.head,_this11.head=temp4,_this11.modified=!0,_this11.length++}if(null!=arbs2.cbSet){var _this12=this.mrca2,ret14;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret14=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret14=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret14.next,ret14.next=null),ret14.elt=arbs2;var temp5=ret14;temp5.next=_this12.head,_this12.head=temp5,_this12.modified=!0,_this12.length++}if(null!=arbs2.body.cbSet){var _this13=this.mrca2,o5=arbs2.body,ret15;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret15=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret15=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret15.next,ret15.next=null),ret15.elt=o5;var temp6=ret15;temp6.next=_this13.head,_this13.head=temp6,_this13.modified=!0,_this13.length++}for(var c1=arbs1.body.compound,c2=arbs2.body.compound;c1!=c2;){var d1,d2;if((null==c1?0:c1.depth)<(null==c2?0:c2.depth)){if(null!=c2.cbSet){var _this14=this.mrca2,ret16;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret16=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret16=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret16.next,ret16.next=null),ret16.elt=c2;var temp7=ret16;temp7.next=_this14.head,_this14.head=temp7,_this14.modified=!0,_this14.length++}c2=c2.compound}else{if(null!=c1.cbSet){var _this15=this.mrca1,ret17;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret17=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret17=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret17.next,ret17.next=null),ret17.elt=c1;var temp8=ret17;temp8.next=_this15.head,_this15.head=temp8,_this15.modified=!0,_this15.length++}c1=c1.compound}}for(var cx_ite2=this.mrca1.head;null!=cx_ite2;){for(var i1=cx_ite2.elt,cx_ite3=this.mrca2.head;null!=cx_ite3;){for(var i2=cx_ite3.elt,cb1=i1.cbSet,cb2=i2.cbSet,_this16=cb1.manager,ret18=null,pairs,cx_ite4=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret19;null!=cx_ite4;){var p=cx_ite4.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret18=p;break}cx_ite4=cx_ite4.next}if(null==ret18)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret19=new zpp_nape.callbacks.ZPP_CbSetPair:(ret19=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret19.next,ret19.next=null),ret19.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret19.a=cb1,ret19.b=cb2):(ret19.a=cb2,ret19.b=cb1),ret18=ret19,cb1.cbpairs.add(ret18),cb2!=cb1&&cb2.cbpairs.add(ret18);if(ret18.zip_listeners&&(ret18.zip_listeners=!1,ret18.__validate()),null!=ret18.listeners.head){for(var callbackset=null,ncallbackset=null,_this17=this.prelisteners;null!=_this17.head;){var ret20=_this17.head;_this17.head=ret20.next;var o6=ret20;o6.elt=null,o6.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o6,null==_this17.head&&(_this17.pushmod=!0),_this17.modified=!0,_this17.length--}_this17.pushmod=!0;for(var lite=null,_this18=cb1.manager,ret21=null,pairs1,cx_ite5=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head,ret22;null!=cx_ite5;){var p1=cx_ite5.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret21=p1;break}cx_ite5=cx_ite5.next}if(null==ret21)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret22=new zpp_nape.callbacks.ZPP_CbSetPair:(ret22=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret22.next,ret22.next=null),ret22.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb1,cb2)?(ret22.a=cb1,ret22.b=cb2):(ret22.a=cb2,ret22.b=cb1),ret21=ret22,cb1.cbpairs.add(ret21),cb2!=cb1&&cb2.cbpairs.add(ret21);ret21.zip_listeners&&(ret21.zip_listeners=!1,ret21.__validate());for(var cx_ite6=ret21.listeners.head;null!=cx_ite6;){var x3=cx_ite6.elt;if(5==x3.event&&0!=(4&x3.itype)){var _this19=this.prelisteners,ret23;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret23=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret23=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret23.next,ret23.next=null),ret23.elt=x3;var temp9=ret23;null==lite?(temp9.next=_this19.head,_this19.head=temp9):(temp9.next=lite.next,lite.next=temp9),_this19.pushmod=_this19.modified=!0,_this19.length++,lite=temp9,anyimpure=anyimpure||!x3.pure}cx_ite6=cx_ite6.next}if(null!=this.prelisteners.head){if(null==(callbackset=zpp_nape.phys.ZPP_Interactor.get(i1,i2))&&(ncallbackset=zpp_nape.space.ZPP_CallbackSet.get(i1,i2),this.add_callbackset(ncallbackset)),null==callbackset||(callbackset.FLUIDstamp!=this.stamp||continuous)&&0==(4&callbackset.FLUIDstate)){if(null!=ncallbackset&&(callbackset=ncallbackset),null!=callbackset)for(var cx_ite7=this.prelisteners.head;null!=cx_ite7;){var listener;7==cx_ite7.elt.itype?(callbackset.COLLISIONstamp=this.stamp,callbackset.SENSORstamp=this.stamp,callbackset.FLUIDstamp=this.stamp):callbackset.FLUIDstamp=this.stamp,cx_ite7=cx_ite7.next}arb1.mutable=!0,null!=arb1.wrap_position&&(arb1.wrap_position.zpp_inner._immutable=!1);var pact=arb1.active;arb1.active=!0;var emptycontacts=!1;this.precb.zpp_inner.pre_arbiter=arb1,this.precb.zpp_inner.set=callbackset;for(var cx_ite8=this.prelisteners.head;null!=cx_ite8;){var listener1=cx_ite8.elt;this.precb.zpp_inner.listener=listener1;var cb=this.precb.zpp_inner,o11=callbackset.int1,o21=callbackset.int2,ret24,_this20=listener1.options1,xs=o11.cbTypes;if(_this20.nonemptyintersection(xs,_this20.includes)&&!_this20.nonemptyintersection(xs,_this20.excludes)){var _this21=listener1.options2,xs1=o21.cbTypes;ret24=_this21.nonemptyintersection(xs1,_this21.includes)&&!_this21.nonemptyintersection(xs1,_this21.excludes)}else ret24=!1;ret24?(cb.int1=o11,cb.int2=o21):(cb.int1=o21,cb.int2=o11),this.precb.zpp_inner.pre_swapped=i1!=this.precb.zpp_inner.int1;var ret25=listener1.handlerp(this.precb),ret26;if(null!=ret25)null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret25==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT?ret26=5:(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret25==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE?ret26=1:(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret26=ret25==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE?6:2)),arb1.immState=ret26;cx_ite8=cx_ite8.next}if(arb1.mutable=!1,null!=arb1.wrap_position&&(arb1.wrap_position.zpp_inner._immutable=!0),arb1.active=pact,null!=callbackset)for(var cx_ite9=this.prelisteners.head;null!=cx_ite9;){var listener2;7==cx_ite9.elt.itype?(callbackset.COLLISIONstate=arb1.immState,callbackset.SENSORstate=arb1.immState,callbackset.FLUIDstate=arb1.immState):callbackset.FLUIDstate=arb1.immState,cx_ite9=cx_ite9.next}}else null==callbackset?0==(4&arb1.immState)&&(arb1.immState=1):arb1.immState=callbackset.FLUIDstate;cx_ite3=cx_ite3.next}else cx_ite3=cx_ite3.next}else cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}if(anyimpure&&0==(4&arb1.immState)){if(2==arb1.b1.type){var o7=arb1.b1;o7.world||(o7.component.waket=this.stamp+(this.midstep?0:1),3==o7.type&&(o7.kinematicDelaySleep=!0),o7.component.sleeping&&this.really_wake(o7,!1))}if(2==arb1.b1.type){var o8=arb1.b2;o8.world||(o8.component.waket=this.stamp+(this.midstep?0:1),3==o8.type&&(o8.kinematicDelaySleep=!0),o8.component.sleeping&&this.really_wake(o8,!1))}}}if(0!=(1&arb1.immState)){if(2==arb1.b1.type&&arb1.b1.component.sleeping){var o9=arb1.b1;o9.world||(o9.component.waket=this.stamp+(this.midstep?0:1),3==o9.type&&(o9.kinematicDelaySleep=!0),o9.component.sleeping&&this.really_wake(o9,!1))}if(2==arb1.b2.type&&arb1.b2.component.sleeping){var o10=arb1.b2;o10.world||(o10.component.waket=this.stamp+(this.midstep?0:1),3==o10.type&&(o10.kinematicDelaySleep=!0),o10.component.sleeping&&this.really_wake(o10,!1))}}if(arb1.sleeping){arb1.sleeping=!1;var _this22=this.f_arbiters,ret27;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret27=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret27=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret27.next,ret27.next=null),ret27.elt=arb1;var temp10=ret27;temp10.next=_this22.head,_this22.head=temp10,_this22.modified=!0,_this22.length++}ret=arb1}else if(first){var o12=arb1;o12.next=zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=o12,ret=null}else ret=arb1;else ret=arb1}else if(1==itype){var carbs=stat?this.c_arbiters_true:this.c_arbiters_false,xarb1;if(null==in_arb){for(var ret28=null,b4,cx_ite10=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;null!=cx_ite10;){var arb2=cx_ite10.elt;if(arb2.id==sa.id&&arb2.di==sb.id){ret28=arb2;break}cx_ite10=cx_ite10.next}xarb1=ret28}else xarb1=in_arb;var first1=null==xarb1,arb3,swapped1=!1;if(first1)null==zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool?arb3=new zpp_nape.dynamics.ZPP_ColArbiter:(arb3=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=arb3.next,arb3.next=null),arb3.stat=stat;else if(null==xarb1.colarb){var b5=null;xarb1.cleared=!0;for(var _this23=xarb1.b1.arbiters,pre2=null,cur4=_this23.head,ret29=!1;null!=cur4;){if(cur4.elt==xarb1){var old2,ret30;null==pre2?(ret30=(old2=_this23.head).next,_this23.head=ret30,null==_this23.head&&(_this23.pushmod=!0)):(ret30=(old2=pre2.next).next,pre2.next=ret30,null==ret30&&(_this23.pushmod=!0));var o13=old2;o13.elt=null,o13.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o13,_this23.modified=!0,_this23.length--,_this23.pushmod=!0,ret29=!0;break}pre2=cur4,cur4=cur4.next}for(var _this24=xarb1.b2.arbiters,pre3=null,cur5=_this24.head,ret31=!1;null!=cur5;){if(cur5.elt==xarb1){var old3,ret32;null==pre3?(ret32=(old3=_this24.head).next,_this24.head=ret32,null==_this24.head&&(_this24.pushmod=!0)):(ret32=(old3=pre3.next).next,pre3.next=ret32,null==ret32&&(_this24.pushmod=!0));var o14=old3;o14.elt=null,o14.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o14,_this24.modified=!0,_this24.length--,_this24.pushmod=!0,ret31=!0;break}pre3=cur5,cur5=cur5.next}null!=xarb1.pair&&(xarb1.pair.arb=null,xarb1.pair=null),xarb1.active=!1,this.f_arbiters.modified=!0,null==zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool?arb3=new zpp_nape.dynamics.ZPP_ColArbiter:(arb3=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=arb3.next,arb3.next=null),arb3.intchange=!0,arb3.stat=stat,first1=!0,swapped1=!0}else reverse=sa!=(arb3=xarb1.colarb).s1,arb3.stat!=stat&&(arb3.stat=stat,arb3.sleeping||((stat?this.c_arbiters_false:this.c_arbiters_true).remove(arb3),carbs.add(arb3)));var inttype1=1;if(first1||arb3.stamp!=this.stamp||continuous)if(arb3.stamp=this.stamp,zpp_nape.geom.ZPP_Collide.contactCollide(sa,sb,arb3,reverse)){if(first1){var di1=sb.id;arb3.b1=s1.body,arb3.ws1=s1,arb3.b2=s2.body,arb3.ws2=s2,arb3.id=sa.id,arb3.di=di1;var _this25=arb3.b1.arbiters,ret33;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret33=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret33=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret33.next,ret33.next=null),ret33.elt=arb3;var temp11=ret33;temp11.next=_this25.head,_this25.head=temp11,_this25.modified=!0,_this25.length++;var _this26=arb3.b2.arbiters,ret34;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret34=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret34=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret34.next,ret34.next=null),ret34.elt=arb3;var temp12=ret34,ret35;temp12.next=_this26.head,_this26.head=temp12,_this26.modified=!0,_this26.length++,arb3.active=!0,arb3.present=0,arb3.cleared=!1,arb3.sleeping=!1,arb3.fresh=!1,arb3.presentable=!1,arb3.s1=s1,arb3.s2=s2,arb3.userdef_restitution||(arb3.s1.material.elasticity<=-1/0||arb3.s2.material.elasticity<=-1/0?arb3.restitution=0:arb3.s1.material.elasticity>=1/0||arb3.s2.material.elasticity>=1/0?arb3.restitution=1:arb3.restitution=(arb3.s1.material.elasticity+arb3.s2.material.elasticity)/2,arb3.restitution<0&&(arb3.restitution=0),arb3.restitution>1&&(arb3.restitution=1)),arb3.userdef_dyn_fric||(arb3.dyn_fric=Math.sqrt(arb3.s1.material.dynamicFriction*arb3.s2.material.dynamicFriction)),arb3.userdef_stat_fric||(arb3.stat_fric=Math.sqrt(arb3.s1.material.staticFriction*arb3.s2.material.staticFriction)),arb3.userdef_rfric||(arb3.rfric=Math.sqrt(arb3.s1.material.rollingFriction*arb3.s2.material.rollingFriction)),null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret35=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret35=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret35.next,ret35.next=null),ret35.elt=arb3;var temp13=ret35;temp13.next=carbs.head,carbs.head=temp13,carbs.modified=!0,carbs.length++,arb3.fresh=!swapped1}else arb3.fresh=arb3.up_stamp<this.stamp-1||arb3.endGenerated==this.stamp&&continuous;if(arb3.up_stamp=arb3.stamp,arb3.fresh||0==(4&arb3.immState)){arb3.immState=1;for(var anyimpure1=!1,arbs11=arb3.ws1.id>arb3.ws2.id?arb3.ws2:arb3.ws1,arbs21=arb3.ws1.id>arb3.ws2.id?arb3.ws1:arb3.ws2,_this27=this.mrca1;null!=_this27.head;){var ret36=_this27.head;_this27.head=ret36.next;var o15=ret36;o15.elt=null,o15.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o15,null==_this27.head&&(_this27.pushmod=!0),_this27.modified=!0,_this27.length--}_this27.pushmod=!0;for(var _this28=this.mrca2;null!=_this28.head;){var ret37=_this28.head;_this28.head=ret37.next;var o16=ret37;o16.elt=null,o16.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o16,null==_this28.head&&(_this28.pushmod=!0),_this28.modified=!0,_this28.length--}if(_this28.pushmod=!0,null!=arbs11.cbSet){var _this29=this.mrca1,ret38;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret38=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret38=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret38.next,ret38.next=null),ret38.elt=arbs11;var temp14=ret38;temp14.next=_this29.head,_this29.head=temp14,_this29.modified=!0,_this29.length++}if(null!=arbs11.body.cbSet){var _this30=this.mrca1,o17=arbs11.body,ret39;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret39=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret39=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret39.next,ret39.next=null),ret39.elt=o17;var temp15=ret39;temp15.next=_this30.head,_this30.head=temp15,_this30.modified=!0,_this30.length++}if(null!=arbs21.cbSet){var _this31=this.mrca2,ret40;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret40=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret40=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret40.next,ret40.next=null),ret40.elt=arbs21;var temp16=ret40;temp16.next=_this31.head,_this31.head=temp16,_this31.modified=!0,_this31.length++}if(null!=arbs21.body.cbSet){var _this32=this.mrca2,o18=arbs21.body,ret41;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret41=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret41=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret41.next,ret41.next=null),ret41.elt=o18;var temp17=ret41;temp17.next=_this32.head,_this32.head=temp17,_this32.modified=!0,_this32.length++}for(var c11=arbs11.body.compound,c21=arbs21.body.compound;c11!=c21;){var d11,d21;if((null==c11?0:c11.depth)<(null==c21?0:c21.depth)){if(null!=c21.cbSet){var _this33=this.mrca2,ret42;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret42=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret42=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret42.next,ret42.next=null),ret42.elt=c21;var temp18=ret42;temp18.next=_this33.head,_this33.head=temp18,_this33.modified=!0,_this33.length++}c21=c21.compound}else{if(null!=c11.cbSet){var _this34=this.mrca1,ret43;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret43=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret43=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret43.next,ret43.next=null),ret43.elt=c11;var temp19=ret43;temp19.next=_this34.head,_this34.head=temp19,_this34.modified=!0,_this34.length++}c11=c11.compound}}for(var cx_ite11=this.mrca1.head;null!=cx_ite11;){for(var i11=cx_ite11.elt,cx_ite12=this.mrca2.head;null!=cx_ite12;){for(var i21=cx_ite12.elt,cb11=i11.cbSet,cb21=i21.cbSet,_this35=cb11.manager,ret44=null,pairs2,cx_ite13=(cb11.cbpairs.length<cb21.cbpairs.length?cb11.cbpairs:cb21.cbpairs).head,ret45;null!=cx_ite13;){var p2=cx_ite13.elt;if(p2.a==cb11&&p2.b==cb21||p2.a==cb21&&p2.b==cb11){ret44=p2;break}cx_ite13=cx_ite13.next}if(null==ret44)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret45=new zpp_nape.callbacks.ZPP_CbSetPair:(ret45=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret45.next,ret45.next=null),ret45.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb11,cb21)?(ret45.a=cb11,ret45.b=cb21):(ret45.a=cb21,ret45.b=cb11),ret44=ret45,cb11.cbpairs.add(ret44),cb21!=cb11&&cb21.cbpairs.add(ret44);if(ret44.zip_listeners&&(ret44.zip_listeners=!1,ret44.__validate()),null!=ret44.listeners.head){for(var callbackset1=null,ncallbackset1=null,_this36=this.prelisteners;null!=_this36.head;){var ret46=_this36.head;_this36.head=ret46.next;var o19=ret46;o19.elt=null,o19.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o19,null==_this36.head&&(_this36.pushmod=!0),_this36.modified=!0,_this36.length--}_this36.pushmod=!0;for(var lite1=null,_this37=cb11.manager,ret47=null,pairs3,cx_ite14=(cb11.cbpairs.length<cb21.cbpairs.length?cb11.cbpairs:cb21.cbpairs).head,ret48;null!=cx_ite14;){var p3=cx_ite14.elt;if(p3.a==cb11&&p3.b==cb21||p3.a==cb21&&p3.b==cb11){ret47=p3;break}cx_ite14=cx_ite14.next}if(null==ret47)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret48=new zpp_nape.callbacks.ZPP_CbSetPair:(ret48=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret48.next,ret48.next=null),ret48.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb11,cb21)?(ret48.a=cb11,ret48.b=cb21):(ret48.a=cb21,ret48.b=cb11),ret47=ret48,cb11.cbpairs.add(ret47),cb21!=cb11&&cb21.cbpairs.add(ret47);ret47.zip_listeners&&(ret47.zip_listeners=!1,ret47.__validate());for(var cx_ite15=ret47.listeners.head;null!=cx_ite15;){var x4=cx_ite15.elt;if(5==x4.event&&0!=(1&x4.itype)){var _this38=this.prelisteners,ret49;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret49=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret49=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret49.next,ret49.next=null),ret49.elt=x4;var temp20=ret49;null==lite1?(temp20.next=_this38.head,_this38.head=temp20):(temp20.next=lite1.next,lite1.next=temp20),_this38.pushmod=_this38.modified=!0,_this38.length++,lite1=temp20,anyimpure1=anyimpure1||!x4.pure}cx_ite15=cx_ite15.next}if(null!=this.prelisteners.head){if(null==(callbackset1=zpp_nape.phys.ZPP_Interactor.get(i11,i21))&&(ncallbackset1=zpp_nape.space.ZPP_CallbackSet.get(i11,i21),this.add_callbackset(ncallbackset1)),null==callbackset1||(callbackset1.COLLISIONstamp!=this.stamp||continuous)&&0==(4&callbackset1.COLLISIONstate)){if(null!=ncallbackset1&&(callbackset1=ncallbackset1),null!=callbackset1)for(var cx_ite16=this.prelisteners.head;null!=cx_ite16;){var listener3;7==cx_ite16.elt.itype?(callbackset1.COLLISIONstamp=this.stamp,callbackset1.SENSORstamp=this.stamp,callbackset1.FLUIDstamp=this.stamp):callbackset1.COLLISIONstamp=this.stamp,cx_ite16=cx_ite16.next}arb3.mutable=!0,null!=arb3.wrap_normal&&(arb3.wrap_normal.zpp_inner._immutable=!1),null!=arb3.wrap_contacts&&(arb3.wrap_contacts.zpp_inner.immutable=!1);var pact1=arb3.active;arb3.active=!0;var emptycontacts1=!1,fst=!0,pre4=null,prei=null,cx_itei=arb3.innards.next;arb3.hc2=!1;for(var cx_ite17=arb3.contacts.next;null!=cx_ite17;){var c=cx_ite17;if(c.stamp+nape.Config.arbiterExpirationDelay<arb3.stamp){var _this39=arb3.contacts,old4,ret50;null==pre4?(ret50=(old4=_this39.next).next,_this39.next=ret50,null==_this39.next&&(_this39.pushmod=!0)):(ret50=(old4=pre4.next).next,pre4.next=ret50,null==ret50&&(_this39.pushmod=!0)),old4._inuse=!1,_this39.modified=!0,_this39.length--,_this39.pushmod=!0,cx_ite17=ret50;var _this40=arb3.innards,old5,ret51;null==prei?(ret51=(old5=_this40.next).next,_this40.next=ret51,null==_this40.next&&(_this40.pushmod=!0)):(ret51=(old5=prei.next).next,prei.next=ret51,null==ret51&&(_this40.pushmod=!0)),old5._inuse=!1,_this40.modified=!0,_this40.length--,_this40.pushmod=!0,cx_itei=ret51;var o20=c;o20.arbiter=null,o20.next=zpp_nape.dynamics.ZPP_Contact.zpp_pool,zpp_nape.dynamics.ZPP_Contact.zpp_pool=o20}else{var ci=c.inner,pact2=c.active;c.active=c.stamp==arb3.stamp,c.active&&(fst?(fst=!1,arb3.c1=ci,arb3.oc1=c):(arb3.hc2=!0,arb3.c2=ci,arb3.oc2=c)),pact2!=c.active&&(arb3.contacts.modified=!0),pre4=cx_ite17,prei=cx_itei,cx_itei=cx_itei.next,cx_ite17=cx_ite17.next}}if(arb3.hc2){if(arb3.hpc2=!0,arb3.oc1.posOnly){var tmp=arb3.c1;arb3.c1=arb3.c2,arb3.c2=tmp;var tmp2=arb3.oc1;arb3.oc1=arb3.oc2,arb3.oc2=tmp2,arb3.hc2=!1}else arb3.oc2.posOnly&&(arb3.hc2=!1);arb3.oc1.posOnly&&(fst=!0)}else arb3.hpc2=!1;this.precb.zpp_inner.pre_arbiter=arb3,this.precb.zpp_inner.set=callbackset1;for(var cx_ite18=this.prelisteners.head;null!=cx_ite18;){var listener4=cx_ite18.elt;this.precb.zpp_inner.listener=listener4;var cb3=this.precb.zpp_inner,o110=callbackset1.int1,o22=callbackset1.int2,ret52,_this41=listener4.options1,xs2=o110.cbTypes;if(_this41.nonemptyintersection(xs2,_this41.includes)&&!_this41.nonemptyintersection(xs2,_this41.excludes)){var _this42=listener4.options2,xs3=o22.cbTypes;ret52=_this42.nonemptyintersection(xs3,_this42.includes)&&!_this42.nonemptyintersection(xs3,_this42.excludes)}else ret52=!1;ret52?(cb3.int1=o110,cb3.int2=o22):(cb3.int1=o22,cb3.int2=o110),this.precb.zpp_inner.pre_swapped=i11!=this.precb.zpp_inner.int1;var ret53=listener4.handlerp(this.precb),ret54;if(null!=ret53)null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret53==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT?ret54=5:(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret53==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE?ret54=1:(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret54=ret53==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE?6:2)),arb3.immState=ret54;cx_ite18=cx_ite18.next}if(arb3.mutable=!1,null!=arb3.wrap_normal&&(arb3.wrap_normal.zpp_inner._immutable=!0),null!=arb3.wrap_contacts&&(arb3.wrap_contacts.zpp_inner.immutable=!0),arb3.active=pact1,null!=callbackset1)for(var cx_ite19=this.prelisteners.head;null!=cx_ite19;){var listener5;7==cx_ite19.elt.itype?(callbackset1.COLLISIONstate=arb3.immState,callbackset1.SENSORstate=arb3.immState,callbackset1.FLUIDstate=arb3.immState):callbackset1.COLLISIONstate=arb3.immState,cx_ite19=cx_ite19.next}}else null==callbackset1?0==(4&arb3.immState)&&(arb3.immState=1):arb3.immState=callbackset1.COLLISIONstate;cx_ite12=cx_ite12.next}else cx_ite12=cx_ite12.next}else cx_ite12=cx_ite12.next}cx_ite11=cx_ite11.next}if(anyimpure1&&0==(4&arb3.immState)){if(2==arb3.b1.type){var o23=arb3.b1;o23.world||(o23.component.waket=this.stamp+(this.midstep?0:1),3==o23.type&&(o23.kinematicDelaySleep=!0),o23.component.sleeping&&this.really_wake(o23,!1))}if(2==arb3.b1.type){var o24=arb3.b2;o24.world||(o24.component.waket=this.stamp+(this.midstep?0:1),3==o24.type&&(o24.kinematicDelaySleep=!0),o24.component.sleeping&&this.really_wake(o24,!1))}}}if(0!=(1&arb3.immState)){if(2==arb3.b1.type&&arb3.b1.component.sleeping){var o25=arb3.b1;o25.world||(o25.component.waket=this.stamp+(this.midstep?0:1),3==o25.type&&(o25.kinematicDelaySleep=!0),o25.component.sleeping&&this.really_wake(o25,!1))}if(2==arb3.b2.type&&arb3.b2.component.sleeping){var o26=arb3.b2;o26.world||(o26.component.waket=this.stamp+(this.midstep?0:1),3==o26.type&&(o26.kinematicDelaySleep=!0),o26.component.sleeping&&this.really_wake(o26,!1))}}if(arb3.sleeping){var ret55;arb3.sleeping=!1,null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret55=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret55=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret55.next,ret55.next=null),ret55.elt=arb3;var temp21=ret55;temp21.next=carbs.head,carbs.head=temp21,carbs.modified=!0,carbs.length++}ret=arb3}else if(first1){var o27=arb3;o27.userdef_dyn_fric=!1,o27.userdef_stat_fric=!1,o27.userdef_restitution=!1,o27.userdef_rfric=!1,o27.__ref_edge1=o27.__ref_edge2=null,o27.next=zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=o27,ret=null}else ret=arb3;else ret=arb3}else{var xarb2;if(null==in_arb){for(var ret56=null,b6,cx_ite20=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;null!=cx_ite20;){var arb4=cx_ite20.elt;if(arb4.id==sa.id&&arb4.di==sb.id){ret56=arb4;break}cx_ite20=cx_ite20.next}xarb2=ret56}else xarb2=in_arb;var first2=null==xarb2,arb5,swapped2=!1;if(first2)null==zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool?arb5=new zpp_nape.dynamics.ZPP_SensorArbiter:(arb5=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=arb5.next,arb5.next=null);else if(null==xarb2.sensorarb){var b7=null;xarb2.cleared=!0;for(var _this43=xarb2.b1.arbiters,pre5=null,cur6=_this43.head,ret57=!1;null!=cur6;){if(cur6.elt==xarb2){var old6,ret58;null==pre5?(ret58=(old6=_this43.head).next,_this43.head=ret58,null==_this43.head&&(_this43.pushmod=!0)):(ret58=(old6=pre5.next).next,pre5.next=ret58,null==ret58&&(_this43.pushmod=!0));var o28=old6;o28.elt=null,o28.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o28,_this43.modified=!0,_this43.length--,_this43.pushmod=!0,ret57=!0;break}pre5=cur6,cur6=cur6.next}for(var _this44=xarb2.b2.arbiters,pre6=null,cur7=_this44.head,ret59=!1;null!=cur7;){if(cur7.elt==xarb2){var old7,ret60;null==pre6?(ret60=(old7=_this44.head).next,_this44.head=ret60,null==_this44.head&&(_this44.pushmod=!0)):(ret60=(old7=pre6.next).next,pre6.next=ret60,null==ret60&&(_this44.pushmod=!0));var o29=old7;o29.elt=null,o29.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o29,_this44.modified=!0,_this44.length--,_this44.pushmod=!0,ret59=!0;break}pre6=cur7,cur7=cur7.next}null!=xarb2.pair&&(xarb2.pair.arb=null,xarb2.pair=null),xarb2.active=!1,this.f_arbiters.modified=!0,null==zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool?arb5=new zpp_nape.dynamics.ZPP_SensorArbiter:(arb5=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=arb5.next,arb5.next=null),arb5.intchange=!0,first2=!0,swapped2=!0}else arb5=xarb2.sensorarb;var inttype2=2;if(first2||arb5.stamp!=this.stamp||continuous)if(arb5.stamp=this.stamp,zpp_nape.geom.ZPP_Collide.testCollide(sa,sb)){if(first2){var di2=sb.id;arb5.b1=s1.body,arb5.ws1=s1,arb5.b2=s2.body,arb5.ws2=s2,arb5.id=sa.id,arb5.di=di2;var _this45=arb5.b1.arbiters,ret61;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret61=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret61=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret61.next,ret61.next=null),ret61.elt=arb5;var temp22=ret61;temp22.next=_this45.head,_this45.head=temp22,_this45.modified=!0,_this45.length++;var _this46=arb5.b2.arbiters,ret62;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret62=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret62=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret62.next,ret62.next=null),ret62.elt=arb5;var temp23=ret62;temp23.next=_this46.head,_this46.head=temp23,_this46.modified=!0,_this46.length++,arb5.active=!0,arb5.present=0,arb5.cleared=!1,arb5.sleeping=!1,arb5.fresh=!1,arb5.presentable=!1;var _this47=this.s_arbiters,ret63;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret63=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret63=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret63.next,ret63.next=null),ret63.elt=arb5;var temp24=ret63;temp24.next=_this47.head,_this47.head=temp24,_this47.modified=!0,_this47.length++,arb5.fresh=!swapped2}else arb5.fresh=arb5.up_stamp<this.stamp-1||arb5.endGenerated==this.stamp&&continuous;if(arb5.up_stamp=arb5.stamp,arb5.fresh||0==(4&arb5.immState)){arb5.immState=1;for(var anyimpure2=!1,arbs12=arb5.ws1.id>arb5.ws2.id?arb5.ws2:arb5.ws1,arbs22=arb5.ws1.id>arb5.ws2.id?arb5.ws1:arb5.ws2,_this48=this.mrca1;null!=_this48.head;){var ret64=_this48.head;_this48.head=ret64.next;var o30=ret64;o30.elt=null,o30.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o30,null==_this48.head&&(_this48.pushmod=!0),_this48.modified=!0,_this48.length--}_this48.pushmod=!0;for(var _this49=this.mrca2;null!=_this49.head;){var ret65=_this49.head;_this49.head=ret65.next;var o31=ret65;o31.elt=null,o31.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o31,null==_this49.head&&(_this49.pushmod=!0),_this49.modified=!0,_this49.length--}if(_this49.pushmod=!0,null!=arbs12.cbSet){var _this50=this.mrca1,ret66;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret66=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret66=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret66.next,ret66.next=null),ret66.elt=arbs12;var temp25=ret66;temp25.next=_this50.head,_this50.head=temp25,_this50.modified=!0,_this50.length++}if(null!=arbs12.body.cbSet){var _this51=this.mrca1,o32=arbs12.body,ret67;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret67=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret67=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret67.next,ret67.next=null),ret67.elt=o32;var temp26=ret67;temp26.next=_this51.head,_this51.head=temp26,_this51.modified=!0,_this51.length++}if(null!=arbs22.cbSet){var _this52=this.mrca2,ret68;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret68=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret68=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret68.next,ret68.next=null),ret68.elt=arbs22;var temp27=ret68;temp27.next=_this52.head,_this52.head=temp27,_this52.modified=!0,_this52.length++}if(null!=arbs22.body.cbSet){var _this53=this.mrca2,o33=arbs22.body,ret69;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret69=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret69=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret69.next,ret69.next=null),ret69.elt=o33;var temp28=ret69;temp28.next=_this53.head,_this53.head=temp28,_this53.modified=!0,_this53.length++}for(var c12=arbs12.body.compound,c22=arbs22.body.compound;c12!=c22;){var d12,d22;if((null==c12?0:c12.depth)<(null==c22?0:c22.depth)){if(null!=c22.cbSet){var _this54=this.mrca2,ret70;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret70=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret70=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret70.next,ret70.next=null),ret70.elt=c22;var temp29=ret70;temp29.next=_this54.head,_this54.head=temp29,_this54.modified=!0,_this54.length++}c22=c22.compound}else{if(null!=c12.cbSet){var _this55=this.mrca1,ret71;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret71=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret71=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret71.next,ret71.next=null),ret71.elt=c12;var temp30=ret71;temp30.next=_this55.head,_this55.head=temp30,_this55.modified=!0,_this55.length++}c12=c12.compound}}for(var cx_ite21=this.mrca1.head;null!=cx_ite21;){for(var i12=cx_ite21.elt,cx_ite22=this.mrca2.head;null!=cx_ite22;){for(var i22=cx_ite22.elt,cb12=i12.cbSet,cb22=i22.cbSet,_this56=cb12.manager,ret72=null,pairs4,cx_ite23=(cb12.cbpairs.length<cb22.cbpairs.length?cb12.cbpairs:cb22.cbpairs).head,ret73;null!=cx_ite23;){var p4=cx_ite23.elt;if(p4.a==cb12&&p4.b==cb22||p4.a==cb22&&p4.b==cb12){ret72=p4;break}cx_ite23=cx_ite23.next}if(null==ret72)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret73=new zpp_nape.callbacks.ZPP_CbSetPair:(ret73=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret73.next,ret73.next=null),ret73.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb12,cb22)?(ret73.a=cb12,ret73.b=cb22):(ret73.a=cb22,ret73.b=cb12),ret72=ret73,cb12.cbpairs.add(ret72),cb22!=cb12&&cb22.cbpairs.add(ret72);if(ret72.zip_listeners&&(ret72.zip_listeners=!1,ret72.__validate()),null!=ret72.listeners.head){for(var callbackset2=null,ncallbackset2=null,_this57=this.prelisteners;null!=_this57.head;){var ret74=_this57.head;_this57.head=ret74.next;var o34=ret74;o34.elt=null,o34.next=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=o34,null==_this57.head&&(_this57.pushmod=!0),_this57.modified=!0,_this57.length--}_this57.pushmod=!0;for(var lite2=null,_this58=cb12.manager,ret75=null,pairs5,cx_ite24=(cb12.cbpairs.length<cb22.cbpairs.length?cb12.cbpairs:cb22.cbpairs).head,ret76;null!=cx_ite24;){var p5=cx_ite24.elt;if(p5.a==cb12&&p5.b==cb22||p5.a==cb22&&p5.b==cb12){ret75=p5;break}cx_ite24=cx_ite24.next}if(null==ret75)null==zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool?ret76=new zpp_nape.callbacks.ZPP_CbSetPair:(ret76=zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=ret76.next,ret76.next=null),ret76.zip_listeners=!0,zpp_nape.callbacks.ZPP_CbSet.setlt(cb12,cb22)?(ret76.a=cb12,ret76.b=cb22):(ret76.a=cb22,ret76.b=cb12),ret75=ret76,cb12.cbpairs.add(ret75),cb22!=cb12&&cb22.cbpairs.add(ret75);ret75.zip_listeners&&(ret75.zip_listeners=!1,ret75.__validate());for(var cx_ite25=ret75.listeners.head;null!=cx_ite25;){var x5=cx_ite25.elt;if(5==x5.event&&0!=(2&x5.itype)){var _this59=this.prelisteners,ret77;null==zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool?ret77=new zpp_nape.util.ZNPNode_ZPP_InteractionListener:(ret77=zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=ret77.next,ret77.next=null),ret77.elt=x5;var temp31=ret77;null==lite2?(temp31.next=_this59.head,_this59.head=temp31):(temp31.next=lite2.next,lite2.next=temp31),_this59.pushmod=_this59.modified=!0,_this59.length++,lite2=temp31,anyimpure2=anyimpure2||!x5.pure}cx_ite25=cx_ite25.next}if(null!=this.prelisteners.head){if(null==(callbackset2=zpp_nape.phys.ZPP_Interactor.get(i12,i22))&&(ncallbackset2=zpp_nape.space.ZPP_CallbackSet.get(i12,i22),this.add_callbackset(ncallbackset2)),null==callbackset2||(callbackset2.SENSORstamp!=this.stamp||continuous)&&0==(4&callbackset2.SENSORstate)){if(null!=ncallbackset2&&(callbackset2=ncallbackset2),null!=callbackset2)for(var cx_ite26=this.prelisteners.head;null!=cx_ite26;){var listener6;7==cx_ite26.elt.itype?(callbackset2.COLLISIONstamp=this.stamp,callbackset2.SENSORstamp=this.stamp,callbackset2.FLUIDstamp=this.stamp):callbackset2.SENSORstamp=this.stamp,cx_ite26=cx_ite26.next}var pact3=arb5.active;arb5.active=!0;var emptycontacts2=!1;this.precb.zpp_inner.pre_arbiter=arb5,this.precb.zpp_inner.set=callbackset2;for(var cx_ite27=this.prelisteners.head;null!=cx_ite27;){var listener7=cx_ite27.elt;this.precb.zpp_inner.listener=listener7;var cb4=this.precb.zpp_inner,o111=callbackset2.int1,o210=callbackset2.int2,ret78,_this60=listener7.options1,xs4=o111.cbTypes;if(_this60.nonemptyintersection(xs4,_this60.includes)&&!_this60.nonemptyintersection(xs4,_this60.excludes)){var _this61=listener7.options2,xs5=o210.cbTypes;ret78=_this61.nonemptyintersection(xs5,_this61.includes)&&!_this61.nonemptyintersection(xs5,_this61.excludes)}else ret78=!1;ret78?(cb4.int1=o111,cb4.int2=o210):(cb4.int1=o210,cb4.int2=o111),this.precb.zpp_inner.pre_swapped=i12!=this.precb.zpp_inner.int1;var ret79=listener7.handlerp(this.precb),ret80;if(null!=ret79)null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret79==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT?ret80=5:(null==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret79==zpp_nape.util.ZPP_Flags.PreFlag_ACCEPT_ONCE?ret80=1:(null==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.PreFlag_IGNORE=new nape.callbacks.PreFlag,zpp_nape.util.ZPP_Flags.internal=!1),ret80=ret79==zpp_nape.util.ZPP_Flags.PreFlag_IGNORE?6:2)),arb5.immState=ret80;cx_ite27=cx_ite27.next}if(arb5.active=pact3,null!=callbackset2)for(var cx_ite28=this.prelisteners.head;null!=cx_ite28;){var listener8;7==cx_ite28.elt.itype?(callbackset2.COLLISIONstate=arb5.immState,callbackset2.SENSORstate=arb5.immState,callbackset2.FLUIDstate=arb5.immState):callbackset2.SENSORstate=arb5.immState,cx_ite28=cx_ite28.next}}else null==callbackset2?0==(4&arb5.immState)&&(arb5.immState=1):arb5.immState=callbackset2.SENSORstate;cx_ite22=cx_ite22.next}else cx_ite22=cx_ite22.next}else cx_ite22=cx_ite22.next}cx_ite21=cx_ite21.next}if(anyimpure2&&0==(4&arb5.immState)){if(1!=arb5.b1.type){var o35=arb5.b1;o35.world||(o35.component.waket=this.stamp+(this.midstep?0:1),3==o35.type&&(o35.kinematicDelaySleep=!0),o35.component.sleeping&&this.really_wake(o35,!1))}if(1!=arb5.b2.type){var o36=arb5.b2;o36.world||(o36.component.waket=this.stamp+(this.midstep?0:1),3==o36.type&&(o36.kinematicDelaySleep=!0),o36.component.sleeping&&this.really_wake(o36,!1))}}}if(arb5.sleeping){arb5.sleeping=!1;var _this62=this.s_arbiters,ret81;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret81=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret81=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret81.next,ret81.next=null),ret81.elt=arb5;var temp32=ret81;temp32.next=_this62.head,_this62.head=temp32,_this62.modified=!0,_this62.length++}ret=arb5}else if(first2){var o37=arb5;o37.next=zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool,zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=o37,ret=null}else ret=arb5;else ret=arb5}}return ret},zpp_nape.space.ZPP_Space.prototype.mrca1=null,zpp_nape.space.ZPP_Space.prototype.mrca2=null,zpp_nape.space.ZPP_Space.prototype.MRCA_chains=function(s1,s2){for(var _this=this.mrca1;null!=_this.head;){var ret=_this.head;_this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==_this.head&&(_this.pushmod=!0),_this.modified=!0,_this.length--}_this.pushmod=!0;for(var _this1=this.mrca2;null!=_this1.head;){var ret1=_this1.head;_this1.head=ret1.next;var o1=ret1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o1,null==_this1.head&&(_this1.pushmod=!0),_this1.modified=!0,_this1.length--}if(_this1.pushmod=!0,null!=s1.cbSet){var _this2=this.mrca1,ret2;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret2=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret2.next,ret2.next=null),ret2.elt=s1;var temp=ret2;temp.next=_this2.head,_this2.head=temp,_this2.modified=!0,_this2.length++}if(null!=s1.body.cbSet){var _this3=this.mrca1,o2=s1.body,ret3;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret3=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o2;var temp1=ret3;temp1.next=_this3.head,_this3.head=temp1,_this3.modified=!0,_this3.length++}if(null!=s2.cbSet){var _this4=this.mrca2,ret4;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret4=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret4.next,ret4.next=null),ret4.elt=s2;var temp2=ret4;temp2.next=_this4.head,_this4.head=temp2,_this4.modified=!0,_this4.length++}if(null!=s2.body.cbSet){var _this5=this.mrca2,o3=s2.body,ret5;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret5=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret5.next,ret5.next=null),ret5.elt=o3;var temp3=ret5;temp3.next=_this5.head,_this5.head=temp3,_this5.modified=!0,_this5.length++}for(var c1=s1.body.compound,c2=s2.body.compound;c1!=c2;){var d1,d2;if((null==c1?0:c1.depth)<(null==c2?0:c2.depth)){if(null!=c2.cbSet){var _this6=this.mrca2,ret6;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret6=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret6.next,ret6.next=null),ret6.elt=c2;var temp4=ret6;temp4.next=_this6.head,_this6.head=temp4,_this6.modified=!0,_this6.length++}c2=c2.compound}else{if(null!=c1.cbSet){var _this7=this.mrca1,ret7;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret7=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret7.next,ret7.next=null),ret7.elt=c1;var temp5=ret7;temp5.next=_this7.head,_this7.head=temp5,_this7.modified=!0,_this7.length++}c1=c1.compound}}},zpp_nape.space.ZPP_Space.prototype.inlined_MRCA_chains=function(s1,s2){for(var _this=this.mrca1;null!=_this.head;){var ret=_this.head;_this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o,null==_this.head&&(_this.pushmod=!0),_this.modified=!0,_this.length--}_this.pushmod=!0;for(var _this1=this.mrca2;null!=_this1.head;){var ret1=_this1.head;_this1.head=ret1.next;var o1=ret1;o1.elt=null,o1.next=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=o1,null==_this1.head&&(_this1.pushmod=!0),_this1.modified=!0,_this1.length--}if(_this1.pushmod=!0,null!=s1.cbSet){var _this2=this.mrca1,ret2;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret2=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret2=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret2.next,ret2.next=null),ret2.elt=s1;var temp=ret2;temp.next=_this2.head,_this2.head=temp,_this2.modified=!0,_this2.length++}if(null!=s1.body.cbSet){var _this3=this.mrca1,o2=s1.body,ret3;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret3=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret3=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret3.next,ret3.next=null),ret3.elt=o2;var temp1=ret3;temp1.next=_this3.head,_this3.head=temp1,_this3.modified=!0,_this3.length++}if(null!=s2.cbSet){var _this4=this.mrca2,ret4;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret4=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret4=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret4.next,ret4.next=null),ret4.elt=s2;var temp2=ret4;temp2.next=_this4.head,_this4.head=temp2,_this4.modified=!0,_this4.length++}if(null!=s2.body.cbSet){var _this5=this.mrca2,o3=s2.body,ret5;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret5=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret5=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret5.next,ret5.next=null),ret5.elt=o3;var temp3=ret5;temp3.next=_this5.head,_this5.head=temp3,_this5.modified=!0,_this5.length++}for(var c1=s1.body.compound,c2=s2.body.compound;c1!=c2;){var d1,d2;if((null==c1?0:c1.depth)<(null==c2?0:c2.depth)){if(null!=c2.cbSet){var _this6=this.mrca2,ret6;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret6=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret6=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret6.next,ret6.next=null),ret6.elt=c2;var temp4=ret6;temp4.next=_this6.head,_this6.head=temp4,_this6.modified=!0,_this6.length++}c2=c2.compound}else{if(null!=c1.cbSet){var _this7=this.mrca1,ret7;null==zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool?ret7=new zpp_nape.util.ZNPNode_ZPP_Interactor:(ret7=zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=ret7.next,ret7.next=null),ret7.elt=c1;var temp5=ret7;temp5.next=_this7.head,_this7.head=temp5,_this7.modified=!0,_this7.length++}c1=c1.compound}}},zpp_nape.space.ZPP_Space.prototype.__class__=zpp_nape.space.ZPP_Space,zpp_nape.space.ZPP_SweepData=$hxClasses["zpp_nape.space.ZPP_SweepData"]=function(){this.aabb=null,this.shape=null,this.prev=null,this.next=null},zpp_nape.space.ZPP_SweepData.__name__=["zpp_nape","space","ZPP_SweepData"],zpp_nape.space.ZPP_SweepData.prototype.next=null,zpp_nape.space.ZPP_SweepData.prototype.prev=null,zpp_nape.space.ZPP_SweepData.prototype.shape=null,zpp_nape.space.ZPP_SweepData.prototype.aabb=null,zpp_nape.space.ZPP_SweepData.prototype.free=function(){this.prev=null,this.shape=null,this.aabb=null},zpp_nape.space.ZPP_SweepData.prototype.alloc=function(){},zpp_nape.space.ZPP_SweepData.prototype.gt=function(x){return this.aabb.minx>x.aabb.minx},zpp_nape.space.ZPP_SweepData.prototype.__class__=zpp_nape.space.ZPP_SweepData,zpp_nape.space.ZPP_SweepPhase=$hxClasses["zpp_nape.space.ZPP_SweepPhase"]=function(space){this.failed=null,this.list=null,zpp_nape.space.ZPP_Broadphase.call(this),this.space=space,this.is_sweep=!0,this.sweep=this},zpp_nape.space.ZPP_SweepPhase.__name__=["zpp_nape","space","ZPP_SweepPhase"],zpp_nape.space.ZPP_SweepPhase.__super__=zpp_nape.space.ZPP_Broadphase,zpp_nape.space.ZPP_Broadphase.prototype)zpp_nape.space.ZPP_SweepPhase.prototype[k]=zpp_nape.space.ZPP_Broadphase.prototype[k];for(var k in zpp_nape.space.ZPP_SweepPhase.prototype.list=null,zpp_nape.space.ZPP_SweepPhase.prototype.__insert=function(shape){var dat;null==zpp_nape.space.ZPP_SweepData.zpp_pool?dat=new zpp_nape.space.ZPP_SweepData:(dat=zpp_nape.space.ZPP_SweepData.zpp_pool,zpp_nape.space.ZPP_SweepData.zpp_pool=dat.next,dat.next=null),shape.sweep=dat,dat.shape=shape,dat.aabb=shape.aabb,dat.next=this.list,null!=this.list&&(this.list.prev=dat),this.list=dat},zpp_nape.space.ZPP_SweepPhase.prototype.__remove=function(shape){var dat=shape.sweep;null==dat.prev?this.list=dat.next:dat.prev.next=dat.next,null!=dat.next&&(dat.next.prev=dat.prev),shape.sweep=null;var o=dat;o.prev=null,o.shape=null,o.aabb=null,o.next=zpp_nape.space.ZPP_SweepData.zpp_pool,zpp_nape.space.ZPP_SweepData.zpp_pool=o},zpp_nape.space.ZPP_SweepPhase.prototype.__sync=function(shape){if(!this.space.continuous&&shape.zip_aabb&&null!=shape.body)if(shape.zip_aabb=!1,0==shape.type){var _this=shape.circle;if(_this.zip_worldCOM&&null!=_this.body){if(_this.zip_worldCOM=!1,_this.zip_localCOM){if(_this.zip_localCOM=!1,1==_this.type){var _this1=_this.polygon;if(null==_this1.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful localCOM");if(null==_this1.lverts.next.next)_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;else if(null==_this1.lverts.next.next.next){_this1.localCOMx=_this1.lverts.next.x,_this1.localCOMy=_this1.lverts.next.y;var t=1;_this1.localCOMx+=1*_this1.lverts.next.next.x,_this1.localCOMy+=1*_this1.lverts.next.next.y;var t1=.5;_this1.localCOMx*=.5,_this1.localCOMy*=.5}else{_this1.localCOMx=0,_this1.localCOMy=0;var area=0,cx_ite=_this1.lverts.next,u=cx_ite,v=cx_ite=cx_ite.next;for(cx_ite=cx_ite.next;null!=cx_ite;){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf,_this1.localCOMy+=(v.y+w.y)*cf,u=v,v=w,cx_ite=cx_ite.next}var w1=cx_ite=_this1.lverts.next;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1,_this1.localCOMy+=(v.y+w1.y)*cf1,u=v,v=w1;var w2=cx_ite=cx_ite.next;area+=v.x*(w2.y-u.y);var cf2=w2.y*v.x-w2.x*v.y;_this1.localCOMx+=(v.x+w2.x)*cf2,_this1.localCOMy+=(v.y+w2.y)*cf2;var t2=area=1/(3*area);_this1.localCOMx*=t2,_this1.localCOMy*=t2}}null!=_this.wrap_localCOM&&(_this.wrap_localCOM.zpp_inner.x=_this.localCOMx,_this.wrap_localCOM.zpp_inner.y=_this.localCOMy)}var _this2=_this.body;_this2.zip_axis&&(_this2.zip_axis=!1,_this2.axisx=Math.sin(_this2.rot),_this2.axisy=Math.cos(_this2.rot)),_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy),_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}var rx=_this.radius,ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx,_this.aabb.miny=_this.worldCOMy-ry,_this.aabb.maxx=_this.worldCOMx+rx,_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=shape.polygon;if(_this3.zip_gverts&&null!=_this3.body){_this3.zip_gverts=!1,_this3.validate_lverts();var _this4=_this3.body;_this4.zip_axis&&(_this4.zip_axis=!1,_this4.axisx=Math.sin(_this4.rot),_this4.axisy=Math.cos(_this4.rot));for(var li=_this3.lverts.next,cx_ite1=_this3.gverts.next;null!=cx_ite1;){var g=cx_ite1,l=li;li=li.next,g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y),g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy),cx_ite1=cx_ite1.next}}if(null==_this3.lverts.next)throw new js._Boot.HaxeError("Error: An empty polygon has no meaningful bounds");var p0=_this3.gverts.next;_this3.aabb.minx=p0.x,_this3.aabb.miny=p0.y,_this3.aabb.maxx=p0.x,_this3.aabb.maxy=p0.y;for(var cx_ite2=_this3.gverts.next.next;null!=cx_ite2;){var p=cx_ite2;p.x<_this3.aabb.minx&&(_this3.aabb.minx=p.x),p.x>_this3.aabb.maxx&&(_this3.aabb.maxx=p.x),p.y<_this3.aabb.miny&&(_this3.aabb.miny=p.y),p.y>_this3.aabb.maxy&&(_this3.aabb.maxy=p.y),cx_ite2=cx_ite2.next}}},zpp_nape.space.ZPP_SweepPhase.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.list)for(var a=this.list.next;null!=a;){var n=a.next,b=a.prev;if(a.aabb.minx>b.aabb.minx)a=n;else{for(;null!=b.prev&&b.prev.aabb.minx>a.aabb.minx;)b=b.prev;var prev=a.prev;prev.next=a.next,null!=a.next&&(a.next.prev=prev),null==b.prev?(a.prev=null,this.list=a,a.next=b,b.prev=a):(a.prev=b.prev,b.prev=a,a.prev.next=a,a.next=b),a=n}}},zpp_nape.space.ZPP_SweepPhase.prototype.sync_broadphase_fast=function(){for(var a=this.list.next;null!=a;){var n=a.next,b=a.prev;if(a.aabb.minx>b.aabb.minx)a=n;else{for(;null!=b.prev&&b.prev.aabb.minx>a.aabb.minx;)b=b.prev;var prev=a.prev;prev.next=a.next,null!=a.next&&(a.next.prev=prev),null==b.prev?(a.prev=null,this.list=a,a.next=b,b.prev=a):(a.prev=b.prev,b.prev=a,a.prev.next=a,a.next=b),a=n}}},zpp_nape.space.ZPP_SweepPhase.prototype.broadphase=function(space,discrete){if(null!=this.list){for(var a=this.list.next;null!=a;){var n=a.next,b=a.prev;if(a.aabb.minx>b.aabb.minx)a=n;else{for(;null!=b.prev&&b.prev.aabb.minx>a.aabb.minx;)b=b.prev;var prev=a.prev;prev.next=a.next,null!=a.next&&(a.next.prev=prev),null==b.prev?(a.prev=null,this.list=a,a.next=b,b.prev=a):(a.prev=b.prev,b.prev=a,a.prev.next=a,a.next=b),a=n}}for(var d1=this.list;null!=d1;){for(var d2=d1.next,s1=d1.shape,b1=s1.body,bottom=d1.aabb.maxx;null!=d2&&!(d2.aabb.minx>bottom);){var s2=d2.shape,b2=s2.body;if(b2!=b1)if(1!=b1.type||1!=b2.type)if(b1.component.sleeping&&b2.component.sleeping)d2=d2.next;else{var _this=s1.aabb,x=s2.aabb;x.miny>_this.maxy||_this.miny>x.maxy||(discrete?space.narrowPhase(s1,s2,2!=b1.type||2!=b2.type,null,!1):space.continuousEvent(s1,s2,2!=b1.type||2!=b2.type,null,!1)),d2=d2.next}else d2=d2.next;else d2=d2.next}d1=d1.next}}},zpp_nape.space.ZPP_SweepPhase.prototype.clear=function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},zpp_nape.space.ZPP_SweepPhase.prototype.shapesUnderPoint=function(x,y,filter,output){var ret;this.sync_broadphase(),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y;for(var v=ret,ret1=null==output?new nape.shape.ShapeList:output,a=this.list;null!=a&&a.aabb.minx>x;)a=a.next;for(;null!=a&&a.aabb.minx<=x;){if(a.aabb.maxx>=x&&a.aabb.miny<=y&&a.aabb.maxy>=y){var shape=a.shape,tmp;if(null!=filter){var _this=shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;tmp&&(0==shape.type?zpp_nape.geom.ZPP_Collide.circleContains(shape.circle,v)&&ret1.push(shape.outer):zpp_nape.geom.ZPP_Collide.polyContains(shape.polygon,v)&&ret1.push(shape.outer))}a=a.next}var o=v;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret1},zpp_nape.space.ZPP_SweepPhase.prototype.bodiesUnderPoint=function(x,y,filter,output){var ret;this.sync_broadphase(),null==zpp_nape.geom.ZPP_Vec2.zpp_pool?ret=new zpp_nape.geom.ZPP_Vec2:(ret=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=ret.next,ret.next=null),ret.weak=!1,ret._immutable=!1,ret.x=x,ret.y=y;for(var v=ret,ret1=null==output?new nape.phys.BodyList:output,a=this.list;null!=a&&a.aabb.minx>x;)a=a.next;for(;null!=a&&a.aabb.minx<=x;){if(a.aabb.maxx>=x&&a.aabb.miny<=y&&a.aabb.maxy>=y){var shape=a.shape,body=shape.body.outer;if(!ret1.has(body)){var tmp;if(null!=filter){var _this=shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;tmp&&(0==shape.type?zpp_nape.geom.ZPP_Collide.circleContains(shape.circle,v)&&ret1.push(body):zpp_nape.geom.ZPP_Collide.polyContains(shape.polygon,v)&&ret1.push(body))}}a=a.next}var o=v;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret1},zpp_nape.space.ZPP_SweepPhase.prototype.shapesInAABB=function(aabb,strict,containment,filter,output){this.sync_broadphase(),this.updateAABBShape(aabb);for(var ab=this.aabbShape.zpp_inner.aabb,ret=null==output?new nape.shape.ShapeList:output,a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var shape=a.shape,tmp;if(null!=filter){var _this=shape.filter;tmp=0!=(_this.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this.collisionGroup)}else tmp=!0;if(tmp)if(strict)if(containment)zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,shape)&&ret.push(shape.outer);else{var x=a.aabb;if(x.minx>=ab.minx&&x.miny>=ab.miny&&x.maxx<=ab.maxx&&x.maxy<=ab.maxy)ret.push(shape.outer);else{var _this1=a.aabb;ab.miny<=_this1.maxy&&_this1.miny<=ab.maxy&&ab.minx<=_this1.maxx&&_this1.minx<=ab.maxx&&zpp_nape.geom.ZPP_Collide.testCollide_safe(shape,this.aabbShape.zpp_inner)&&ret.push(shape.outer)}}else{var tmp1;if(containment){var x1=a.aabb;tmp1=x1.minx>=ab.minx&&x1.miny>=ab.miny&&x1.maxx<=ab.maxx&&x1.maxy<=ab.maxy}else{var _this2=a.aabb;tmp1=ab.miny<=_this2.maxy&&_this2.miny<=ab.maxy&&ab.minx<=_this2.maxx&&_this2.minx<=ab.maxx}tmp1&&ret.push(shape.outer)}a=a.next}return ret},zpp_nape.space.ZPP_SweepPhase.prototype.failed=null,zpp_nape.space.ZPP_SweepPhase.prototype.bodiesInAABB=function(aabb,strict,containment,filter,output){this.sync_broadphase(),this.updateAABBShape(aabb);var ab=this.aabbShape.zpp_inner.aabb,ret=null==output?new nape.phys.BodyList:output;null==this.failed&&(this.failed=new nape.phys.BodyList);for(var a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var shape=a.shape,body=shape.body.outer,_this=a.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx){var tmp;if(null!=filter){var _this1=shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;if(tmp)if(strict)if(containment){if(!this.failed.has(body)){var col=zpp_nape.geom.ZPP_Collide.containTest(this.aabbShape.zpp_inner,shape);!ret.has(body)&&col?ret.push(body):col||(ret.remove(body),this.failed.push(body))}}else!ret.has(body)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(shape,this.aabbShape.zpp_inner)&&ret.push(body);else if(containment){if(!this.failed.has(body)){var x=shape.aabb,col1=x.minx>=ab.minx&&x.miny>=ab.miny&&x.maxx<=ab.maxx&&x.maxy<=ab.maxy;!ret.has(body)&&col1?ret.push(body):col1||(ret.remove(body),this.failed.push(body))}}else{var tmp1;if(ret.has(body))tmp1=!1;else{var x1=shape.aabb;tmp1=x1.minx>=ab.minx&&x1.miny>=ab.miny&&x1.maxx<=ab.maxx&&x1.maxy<=ab.maxy}tmp1&&ret.push(body)}}a=a.next}return this.failed.clear(),ret},zpp_nape.space.ZPP_SweepPhase.prototype.shapesInCircle=function(x,y,r,containment,filter,output){this.sync_broadphase(),this.updateCircShape(x,y,r);for(var ab=this.circShape.zpp_inner.aabb,ret=null==output?new nape.shape.ShapeList:output,a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var _this=a.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx){var shape=a.shape,tmp;if(null!=filter){var _this1=shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(containment?zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,shape)&&ret.push(shape.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(shape,this.circShape.zpp_inner)&&ret.push(shape.outer))}a=a.next}return ret},zpp_nape.space.ZPP_SweepPhase.prototype.bodiesInCircle=function(x,y,r,containment,filter,output){this.sync_broadphase(),this.updateCircShape(x,y,r);var ab=this.circShape.zpp_inner.aabb,ret=null==output?new nape.phys.BodyList:output;null==this.failed&&(this.failed=new nape.phys.BodyList);for(var a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var _this=a.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx){var shape=a.shape,body=shape.body.outer,tmp;if(null!=filter){var _this1=shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;if(tmp)if(containment){if(!this.failed.has(body)){var col=zpp_nape.geom.ZPP_Collide.containTest(this.circShape.zpp_inner,shape);!ret.has(body)&&col?ret.push(body):col||(ret.remove(body),this.failed.push(body))}}else!ret.has(body)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(shape,this.circShape.zpp_inner)&&ret.push(body)}a=a.next}return this.failed.clear(),ret},zpp_nape.space.ZPP_SweepPhase.prototype.shapesInShape=function(shape,containment,filter,output){this.sync_broadphase(),this.validateShape(shape);for(var ab=shape.aabb,ret=null==output?new nape.shape.ShapeList:output,a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var _this=a.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx){var shape2=a.shape,tmp;if(null!=filter){var _this1=shape2.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;tmp&&(containment?zpp_nape.geom.ZPP_Collide.containTest(shape,shape2)&&ret.push(shape2.outer):zpp_nape.geom.ZPP_Collide.testCollide_safe(shape2,shape)&&ret.push(shape2.outer))}a=a.next}return ret},zpp_nape.space.ZPP_SweepPhase.prototype.bodiesInShape=function(shape,containment,filter,output){this.sync_broadphase(),this.validateShape(shape);var ab=shape.aabb,ret=null==output?new nape.phys.BodyList:output;null==this.failed&&(this.failed=new nape.phys.BodyList);for(var a=this.list;null!=a&&a.aabb.maxx<ab.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=ab.maxx;){var _this=a.aabb;if(ab.miny<=_this.maxy&&_this.miny<=ab.maxy&&ab.minx<=_this.maxx&&_this.minx<=ab.maxx){var shape2=a.shape,body=shape2.body.outer,tmp;if(null!=filter){var _this1=shape2.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;if(tmp)if(containment){if(!this.failed.has(body)){var col=zpp_nape.geom.ZPP_Collide.containTest(shape,shape2);!ret.has(body)&&col?ret.push(body):col||(ret.remove(body),this.failed.push(body))}}else!ret.has(body)&&zpp_nape.geom.ZPP_Collide.testCollide_safe(shape,shape2)&&ret.push(body)}a=a.next}return this.failed.clear(),ret},zpp_nape.space.ZPP_SweepPhase.prototype.rayCast=function(ray,inner,filter){this.sync_broadphase(),ray.validate_dir();var rayab=ray.rayAABB(),mint=ray.maxdist,minres=null;if(0==ray.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=rayab.minx;){var tmp,_this=a.aabb;if(rayab.miny<=_this.maxy&&_this.miny<=rayab.maxy&&rayab.minx<=_this.maxx&&_this.minx<=rayab.maxx)if(null!=filter){var _this1=a.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;else tmp=!1;if(tmp){var t=ray.aabbsect(a.aabb);if(t>=0&&t<mint){var result=0==a.shape.type?ray.circlesect(a.shape.circle,inner,mint):ray.polysect(a.shape.polygon,inner,mint);if(null!=result){if(null!=result.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(mint=result.zpp_inner.toiDistance,null!=minres){if(null!=minres.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");minres.zpp_inner.free()}minres=result}}}a=a.next}else if(ray.dirx<0){for(var a1=this.list,b=null;null!=a1&&a1.aabb.minx<=rayab.maxx;)b=a1,a1=a1.next;for(a1=b;null!=a1;){var tmp1,_this2=a1.aabb;if(rayab.miny<=_this2.maxy&&_this2.miny<=rayab.maxy&&rayab.minx<=_this2.maxx&&_this2.minx<=rayab.maxx)if(null!=filter){var _this3=a1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;else tmp1=!1;if(tmp1){var t1=ray.aabbsect(a1.aabb);if(t1>=0&&t1<mint){var result1=0==a1.shape.type?ray.circlesect(a1.shape.circle,inner,mint):ray.polysect(a1.shape.polygon,inner,mint);if(null!=result1){if(null!=result1.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(mint=result1.zpp_inner.toiDistance,null!=minres){if(null!=minres.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");minres.zpp_inner.free()}minres=result1}}}a1=a1.prev}}else for(var a2=this.list;null!=a2&&a2.aabb.minx<=rayab.maxx&&a2.aabb.minx<ray.originx+ray.dirx*mint;){var tmp2,_this4=a2.aabb;if(rayab.miny<=_this4.maxy&&_this4.miny<=rayab.maxy&&rayab.minx<=_this4.maxx&&_this4.minx<=rayab.maxx)if(null!=filter){var _this5=a2.shape.filter;tmp2=0!=(_this5.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this5.collisionGroup)}else tmp2=!0;else tmp2=!1;if(tmp2){var t2=ray.aabbsect(a2.aabb);if(t2>=0&&t2<mint){var result2=0==a2.shape.type?ray.circlesect(a2.shape.circle,inner,mint):ray.polysect(a2.shape.polygon,inner,mint);if(null!=result2){if(null!=result2.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");if(mint=result2.zpp_inner.toiDistance,null!=minres){if(null!=minres.zpp_inner.next)throw new js._Boot.HaxeError("Error: This object has been disposed of and cannot be used");minres.zpp_inner.free()}minres=result2}}}a2=a2.next}var o=rayab;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o,minres},zpp_nape.space.ZPP_SweepPhase.prototype.rayMultiCast=function(ray,inner,filter,output){this.sync_broadphase(),ray.validate_dir();var rayab=ray.rayAABB(),ret=null==output?new nape.geom.RayResultList:output;if(0==ray.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=rayab.minx;){var tmp,_this=a.aabb,t;if(rayab.miny<=_this.maxy&&_this.miny<=rayab.maxy&&rayab.minx<=_this.maxx&&_this.minx<=rayab.maxx)if(null!=filter){var _this1=a.shape.filter;tmp=0!=(_this1.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this1.collisionGroup)}else tmp=!0;else tmp=!1;if(tmp)ray.aabbsect(a.aabb)>=0&&(0==a.shape.type?ray.circlesect2(a.shape.circle,inner,ret):ray.polysect2(a.shape.polygon,inner,ret));a=a.next}else if(ray.dirx<0){for(var a1=this.list,b=null;null!=a1&&a1.aabb.minx<=rayab.maxx;)b=a1,a1=a1.next;for(a1=b;null!=a1;){var tmp1,_this2=a1.aabb,t1;if(rayab.miny<=_this2.maxy&&_this2.miny<=rayab.maxy&&rayab.minx<=_this2.maxx&&_this2.minx<=rayab.maxx)if(null!=filter){var _this3=a1.shape.filter;tmp1=0!=(_this3.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this3.collisionGroup)}else tmp1=!0;else tmp1=!1;if(tmp1)ray.aabbsect(a1.aabb)>=0&&(0==a1.shape.type?ray.circlesect2(a1.shape.circle,inner,ret):ray.polysect2(a1.shape.polygon,inner,ret));a1=a1.prev}}else for(var a2=this.list;null!=a2&&a2.aabb.minx<=rayab.maxx;){var tmp2,_this4=a2.aabb,t2;if(rayab.miny<=_this4.maxy&&_this4.miny<=rayab.maxy&&rayab.minx<=_this4.maxx&&_this4.minx<=rayab.maxx)if(null!=filter){var _this5=a2.shape.filter;tmp2=0!=(_this5.collisionMask&filter.collisionGroup)&&0!=(filter.collisionMask&_this5.collisionGroup)}else tmp2=!0;else tmp2=!1;if(tmp2)ray.aabbsect(a2.aabb)>=0&&(0==a2.shape.type?ray.circlesect2(a2.shape.circle,inner,ret):ray.polysect2(a2.shape.polygon,inner,ret));a2=a2.next}var o=rayab;return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o.wrap_min=o.wrap_max=null,o._invalidate=null,o._validate=null,o.next=zpp_nape.geom.ZPP_AABB.zpp_pool,zpp_nape.geom.ZPP_AABB.zpp_pool=o,ret},zpp_nape.space.ZPP_SweepPhase.prototype.__class__=zpp_nape.space.ZPP_SweepPhase,zpp_nape.util.ZNPArray2_Float=$hxClasses["zpp_nape.util.ZNPArray2_Float"]=function(width,height){this.width=0,this.list=null,this.width=width,this.list=[]},zpp_nape.util.ZNPArray2_Float.__name__=["zpp_nape","util","ZNPArray2_Float"],zpp_nape.util.ZNPArray2_Float.prototype.list=null,zpp_nape.util.ZNPArray2_Float.prototype.width=null,zpp_nape.util.ZNPArray2_Float.prototype.resize=function(width,height,def){this.width=width;for(var _g=0,_g1=width*height;_g<_g1;){var i=_g++;this.list[i]=def}},zpp_nape.util.ZNPArray2_Float.prototype.get=function(x,y){return this.list[y*this.width+x]},zpp_nape.util.ZNPArray2_Float.prototype.set=function(x,y,obj){return this.list[y*this.width+x]=obj},zpp_nape.util.ZNPArray2_Float.prototype.__class__=zpp_nape.util.ZNPArray2_Float,zpp_nape.util.ZNPArray2_ZPP_GeomVert=$hxClasses["zpp_nape.util.ZNPArray2_ZPP_GeomVert"]=function(width,height){this.width=0,this.list=null,this.width=width,this.list=[]},zpp_nape.util.ZNPArray2_ZPP_GeomVert.__name__=["zpp_nape","util","ZNPArray2_ZPP_GeomVert"],zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.list=null,zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.width=null,zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.resize=function(width,height,def){this.width=width;for(var _g=0,_g1=width*height;_g<_g1;){var i=_g++;this.list[i]=def}},zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.get=function(x,y){return this.list[y*this.width+x]},zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.set=function(x,y,obj){return this.list[y*this.width+x]=obj},zpp_nape.util.ZNPArray2_ZPP_GeomVert.prototype.__class__=zpp_nape.util.ZNPArray2_ZPP_GeomVert,zpp_nape.util.ZNPArray2_ZPP_MarchPair=$hxClasses["zpp_nape.util.ZNPArray2_ZPP_MarchPair"]=function(width,height){this.width=0,this.list=null,this.width=width,this.list=[]},zpp_nape.util.ZNPArray2_ZPP_MarchPair.__name__=["zpp_nape","util","ZNPArray2_ZPP_MarchPair"],zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.list=null,zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.width=null,zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.resize=function(width,height,def){this.width=width;for(var _g=0,_g1=width*height;_g<_g1;){var i=_g++;this.list[i]=def}},zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.get=function(x,y){return this.list[y*this.width+x]},zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.set=function(x,y,obj){return this.list[y*this.width+x]=obj},zpp_nape.util.ZNPArray2_ZPP_MarchPair.prototype.__class__=zpp_nape.util.ZNPArray2_ZPP_MarchPair,zpp_nape.util.Hashable2_Boolfalse=$hxClasses["zpp_nape.util.Hashable2_Boolfalse"]=function(){this.di=0,this.id=0,this.hnext=null,this.next=null,this.value=!1},zpp_nape.util.Hashable2_Boolfalse.__name__=["zpp_nape","util","Hashable2_Boolfalse"],zpp_nape.util.Hashable2_Boolfalse.get=function(id,di,val){var ret;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret=new zpp_nape.util.Hashable2_Boolfalse:(ret=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret.next,ret.next=null),ret.id=id,ret.di=di;var ret1=ret;return ret1.value=val,ret1},zpp_nape.util.Hashable2_Boolfalse.getpersist=function(id,di){var ret;return null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret=new zpp_nape.util.Hashable2_Boolfalse:(ret=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret.next,ret.next=null),ret.id=id,ret.di=di,ret},zpp_nape.util.Hashable2_Boolfalse.ordered_get=function(id,di,val){if(id<=di){var ret;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret=new zpp_nape.util.Hashable2_Boolfalse:(ret=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret.next,ret.next=null),ret.id=id,ret.di=di;var ret1=ret;return ret1.value=val,ret1}var ret2;null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret2=new zpp_nape.util.Hashable2_Boolfalse:(ret2=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret2.next,ret2.next=null),ret2.id=di,ret2.di=id;var ret3=ret2;return ret3.value=val,ret3},zpp_nape.util.Hashable2_Boolfalse.ordered_get_persist=function(id,di){var ret,ret1;return id<=di?(null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret=new zpp_nape.util.Hashable2_Boolfalse:(ret=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret.next,ret.next=null),ret.id=id,ret.di=di,ret):(null==zpp_nape.util.Hashable2_Boolfalse.zpp_pool?ret1=new zpp_nape.util.Hashable2_Boolfalse:(ret1=zpp_nape.util.Hashable2_Boolfalse.zpp_pool,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=ret1.next,ret1.next=null),ret1.id=di,ret1.di=id,ret1)},zpp_nape.util.Hashable2_Boolfalse.prototype.value=null,zpp_nape.util.Hashable2_Boolfalse.prototype.next=null,zpp_nape.util.Hashable2_Boolfalse.prototype.hnext=null,zpp_nape.util.Hashable2_Boolfalse.prototype.id=null,zpp_nape.util.Hashable2_Boolfalse.prototype.di=null,zpp_nape.util.Hashable2_Boolfalse.prototype.free=function(){},zpp_nape.util.Hashable2_Boolfalse.prototype.alloc=function(){},zpp_nape.util.Hashable2_Boolfalse.prototype.__class__=zpp_nape.util.Hashable2_Boolfalse,zpp_nape.util.FastHash2_Hashable2_Boolfalse=$hxClasses["zpp_nape.util.FastHash2_Hashable2_Boolfalse"]=function(){this.cnt=0,this.table=null,this.cnt=0,this.table=[];for(var _g=0,_g1=1048576;_g<_g1;){var i=_g++;this.table.push(null)}},zpp_nape.util.FastHash2_Hashable2_Boolfalse.__name__=["zpp_nape","util","FastHash2_Hashable2_Boolfalse"],zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.table=null,zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.cnt=null,zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.empty=function(){return 0==this.cnt},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.clear=function(){for(var _g=0,_g1=this.table.length;_g<_g1;){var i=_g++,n=this.table[i];if(null!=n){for(;null!=n;){var t=n.hnext;n.hnext=null,n=t}this.table[i]=null}}},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.get=function(id,di){var n=this.table[106039*id+di&1048575];if(null==n)return null;if(n.id==id&&n.di==di)return n;for(;null!=(n=n.hnext)&&(n.id!=id||n.di!=di););return n},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.ordered_get=function(id,di){if(id>di){var t=id;id=di,di=t}var n=this.table[106039*id+di&1048575];if(null==n)return null;if(n.id==id&&n.di==di)return n;for(;null!=(n=n.hnext)&&(n.id!=id||n.di!=di););return n},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.has=function(id,di){var n=this.table[106039*id+di&1048575];if(null==n)return!1;if(n.id==id&&n.di==di)return!0;for(;null!=(n=n.hnext)&&(n.id!=id||n.di!=di););return null!=n},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.maybeAdd=function(arb){var h=106039*arb.id+arb.di&1048575,n=this.table[h],cont=!0;null==n?(this.table[h]=arb,arb.hnext=null):(arb.hnext=n.hnext,n.hnext=arb),this.cnt++},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.add=function(arb){var h=106039*arb.id+arb.di&1048575,n=this.table[h];null==n?(this.table[h]=arb,arb.hnext=null):(arb.hnext=n.hnext,n.hnext=arb),this.cnt++},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.remove=function(arb){var h=106039*arb.id+arb.di&1048575,n=this.table[h];if(n==arb)this.table[h]=n.hnext;else if(null!=n){for(var pre;pre=n,null!=(n=n.hnext)&&n!=arb;);pre.hnext=n.hnext}arb.hnext=null,this.cnt--},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.hash=function(id,di){return 106039*id+di&1048575},zpp_nape.util.FastHash2_Hashable2_Boolfalse.prototype.__class__=zpp_nape.util.FastHash2_Hashable2_Boolfalse,zpp_nape.util.ZNPList_ZPP_CallbackSet=$hxClasses["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CallbackSet.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"],zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CallbackSet:(ret=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CallbackSet.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CallbackSet,zpp_nape.util.ZNPList_ZPP_Shape=$hxClasses["zpp_nape.util.ZNPList_ZPP_Shape"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Shape.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"],zpp_nape.util.ZNPList_ZPP_Shape.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Shape.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Shape.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Shape.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Shape.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Shape.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Shape.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Shape:(ret=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Shape:(ret=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Shape.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Shape.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Shape:(ret=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Shape:(ret=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Shape.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Shape.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Shape.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Shape.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Shape.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Shape.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Shape.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Shape.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Shape.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Shape.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Shape.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Shape.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Shape,zpp_nape.util.ZNPList_ZPP_Body=$hxClasses["zpp_nape.util.ZNPList_ZPP_Body"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Body.__name__=["zpp_nape","util","ZNPList_ZPP_Body"],zpp_nape.util.ZNPList_ZPP_Body.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Body.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Body.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Body.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Body.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Body.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Body.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Body:(ret=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Body:(ret=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Body.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Body.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Body:(ret=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Body:(ret=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Body.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Body.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Body.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Body.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Body.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Body.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Body.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Body.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Body.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Body.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Body.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Body.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Body,zpp_nape.util.ZNPList_ZPP_Compound=$hxClasses["zpp_nape.util.ZNPList_ZPP_Compound"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Compound.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"],zpp_nape.util.ZNPList_ZPP_Compound.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Compound.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Compound.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Compound.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Compound.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Compound.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Compound.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Compound:(ret=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Compound:(ret=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Compound.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Compound.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Compound:(ret=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Compound:(ret=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Compound.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Compound.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Compound.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Compound.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Compound.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Compound.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Compound.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Compound.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Compound.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Compound.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Compound.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Compound.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Compound,zpp_nape.util.ZNPList_ZPP_Arbiter=$hxClasses["zpp_nape.util.ZNPList_ZPP_Arbiter"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Arbiter.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"],zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Arbiter:(ret=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Arbiter.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Arbiter,zpp_nape.util.ZNPList_ZPP_CbSetPair=$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CbSetPair.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"],zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSetPair:(ret=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSetPair:(ret=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSetPair:(ret=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CbSetPair:(ret=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CbSetPair.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CbSetPair,zpp_nape.util.ZNPList_ZPP_CutInt=$hxClasses["zpp_nape.util.ZNPList_ZPP_CutInt"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CutInt.__name__=["zpp_nape","util","ZNPList_ZPP_CutInt"],zpp_nape.util.ZNPList_ZPP_CutInt.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CutInt.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CutInt.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CutInt.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CutInt.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutInt:(ret=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutInt:(ret=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutInt:(ret=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutInt:(ret=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CutInt.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CutInt,zpp_nape.util.ZNPList_ZPP_CutVert=$hxClasses["zpp_nape.util.ZNPList_ZPP_CutVert"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_CutVert.__name__=["zpp_nape","util","ZNPList_ZPP_CutVert"],zpp_nape.util.ZNPList_ZPP_CutVert.prototype.head=null,zpp_nape.util.ZNPList_ZPP_CutVert.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_CutVert.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_CutVert.prototype.length=null,zpp_nape.util.ZNPList_ZPP_CutVert.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutVert:(ret=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutVert:(ret=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutVert:(ret=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_CutVert:(ret=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_CutVert.prototype.__class__=zpp_nape.util.ZNPList_ZPP_CutVert,zpp_nape.util.ZNPList_ZPP_PartitionVertex=$hxClasses["zpp_nape.util.ZNPList_ZPP_PartitionVertex"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_PartitionVertex.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionVertex"],zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.head=null,zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.length=null,zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionVertex:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionVertex:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionVertex:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionVertex:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_PartitionVertex.prototype.__class__=zpp_nape.util.ZNPList_ZPP_PartitionVertex,zpp_nape.util.ZNPList_ZPP_SimplifyP=$hxClasses["zpp_nape.util.ZNPList_ZPP_SimplifyP"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_SimplifyP.__name__=["zpp_nape","util","ZNPList_ZPP_SimplifyP"],zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.head=null,zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.length=null,zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimplifyP:(ret=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimplifyP:(ret=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimplifyP:(ret=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimplifyP:(ret=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_SimplifyP.prototype.__class__=zpp_nape.util.ZNPList_ZPP_SimplifyP,zpp_nape.util.ZNPList_ZPP_PartitionedPoly=$hxClasses["zpp_nape.util.ZNPList_ZPP_PartitionedPoly"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionedPoly"],zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.head=null,zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.length=null,zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionedPoly:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionedPoly:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionedPoly:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_PartitionedPoly:(ret=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_PartitionedPoly.prototype.__class__=zpp_nape.util.ZNPList_ZPP_PartitionedPoly,zpp_nape.util.ZNPList_ZPP_GeomVert=$hxClasses["zpp_nape.util.ZNPList_ZPP_GeomVert"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_GeomVert.__name__=["zpp_nape","util","ZNPList_ZPP_GeomVert"],zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.head=null,zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.length=null,zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomVert:(ret=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomVert:(ret=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomVert:(ret=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomVert:(ret=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_GeomVert.prototype.__class__=zpp_nape.util.ZNPList_ZPP_GeomVert,zpp_nape.util.ZNPList_ZPP_SimpleVert=$hxClasses["zpp_nape.util.ZNPList_ZPP_SimpleVert"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_SimpleVert.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleVert"],zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.head=null,zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.length=null,zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleVert:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleVert:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleVert:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleVert:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_SimpleVert.prototype.__class__=zpp_nape.util.ZNPList_ZPP_SimpleVert,zpp_nape.util.ZNPList_ZPP_SimpleEvent=$hxClasses["zpp_nape.util.ZNPList_ZPP_SimpleEvent"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_SimpleEvent.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleEvent"],zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.head=null,zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.length=null,zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleEvent:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleEvent:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleEvent:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SimpleEvent:(ret=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_SimpleEvent.prototype.__class__=zpp_nape.util.ZNPList_ZPP_SimpleEvent,zpp_nape.util.ZNPList_ZPP_AABBPair=$hxClasses["zpp_nape.util.ZNPList_ZPP_AABBPair"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_AABBPair.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"],zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.head=null,zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.length=null,zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBPair:(ret=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_AABBPair.prototype.__class__=zpp_nape.util.ZNPList_ZPP_AABBPair,zpp_nape.util.ZNPList_ZPP_Edge=$hxClasses["zpp_nape.util.ZNPList_ZPP_Edge"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Edge.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"],zpp_nape.util.ZNPList_ZPP_Edge.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Edge.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Edge.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Edge.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Edge.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Edge.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Edge.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Edge:(ret=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Edge:(ret=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Edge.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Edge.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Edge:(ret=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Edge:(ret=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Edge.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Edge.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Edge.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Edge.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Edge.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Edge.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Edge.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Edge.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Edge.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Edge.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Edge.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Edge.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Edge,zpp_nape.util.ZNPList_ZPP_AABBNode=$hxClasses["zpp_nape.util.ZNPList_ZPP_AABBNode"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_AABBNode.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"],zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.head=null,zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.length=null,zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_AABBNode:(ret=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_AABBNode.prototype.__class__=zpp_nape.util.ZNPList_ZPP_AABBNode,zpp_nape.util.ZNPList_ZPP_Component=$hxClasses["zpp_nape.util.ZNPList_ZPP_Component"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Component.__name__=["zpp_nape","util","ZNPList_ZPP_Component"],zpp_nape.util.ZNPList_ZPP_Component.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Component.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Component.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Component.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Component.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Component.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Component.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Component:(ret=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Component:(ret=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Component.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Component.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Component:(ret=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Component:(ret=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Component.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Component.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Component.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Component.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Component.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Component.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Component.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Component.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Component.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Component.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Component.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Component.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Component,zpp_nape.util.ZNPList_ZPP_FluidArbiter=$hxClasses["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_FluidArbiter.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"],zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.head=null,zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.length=null,zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_FluidArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_FluidArbiter.prototype.__class__=zpp_nape.util.ZNPList_ZPP_FluidArbiter,zpp_nape.util.ZNPList_ZPP_SensorArbiter=$hxClasses["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_SensorArbiter.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"],zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.head=null,zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.length=null,zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_SensorArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_SensorArbiter.prototype.__class__=zpp_nape.util.ZNPList_ZPP_SensorArbiter,zpp_nape.util.ZNPList_ZPP_Listener=$hxClasses["zpp_nape.util.ZNPList_ZPP_Listener"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_Listener.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"],zpp_nape.util.ZNPList_ZPP_Listener.prototype.head=null,zpp_nape.util.ZNPList_ZPP_Listener.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_Listener.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_Listener.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_Listener.prototype.length=null,zpp_nape.util.ZNPList_ZPP_Listener.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Listener.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Listener:(ret=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Listener:(ret=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_Listener.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_Listener.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Listener:(ret=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_Listener:(ret=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_Listener.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_Listener.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Listener.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_Listener.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Listener.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_Listener.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_Listener.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_Listener.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_Listener.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_Listener.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_Listener.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_Listener.prototype.__class__=zpp_nape.util.ZNPList_ZPP_Listener,zpp_nape.util.ZNPList_ZPP_ColArbiter=$hxClasses["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_ColArbiter.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"],zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.head=null,zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.length=null,zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ColArbiter:(ret=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_ColArbiter.prototype.__class__=zpp_nape.util.ZNPList_ZPP_ColArbiter,zpp_nape.util.ZNPList_ZPP_InteractionGroup=$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_InteractionGroup.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"],zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.head=null,zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.length=null,zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionGroup:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionGroup:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionGroup:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_InteractionGroup:(ret=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_InteractionGroup.prototype.__class__=zpp_nape.util.ZNPList_ZPP_InteractionGroup,zpp_nape.util.ZNPList_ZPP_ToiEvent=$hxClasses["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_ToiEvent.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"],zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.head=null,zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.length=null,zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ToiEvent:(ret=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ToiEvent:(ret=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ToiEvent:(ret=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_ToiEvent:(ret=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_ToiEvent.prototype.__class__=zpp_nape.util.ZNPList_ZPP_ToiEvent,zpp_nape.util.ZNPList_ConvexResult=$hxClasses["zpp_nape.util.ZNPList_ConvexResult"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ConvexResult.__name__=["zpp_nape","util","ZNPList_ConvexResult"],zpp_nape.util.ZNPList_ConvexResult.prototype.head=null,zpp_nape.util.ZNPList_ConvexResult.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ConvexResult.prototype.modified=null,zpp_nape.util.ZNPList_ConvexResult.prototype.pushmod=null,zpp_nape.util.ZNPList_ConvexResult.prototype.length=null,zpp_nape.util.ZNPList_ConvexResult.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ConvexResult.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ConvexResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_ConvexResult:(ret=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ConvexResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_ConvexResult:(ret=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ConvexResult.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ConvexResult.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ConvexResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_ConvexResult:(ret=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ConvexResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_ConvexResult:(ret=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ConvexResult.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ConvexResult.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ConvexResult.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ConvexResult.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ConvexResult.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ConvexResult.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ConvexResult.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ConvexResult.zpp_pool,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ConvexResult.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ConvexResult.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ConvexResult.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ConvexResult.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ConvexResult.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ConvexResult.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ConvexResult.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ConvexResult.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ConvexResult.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ConvexResult.prototype.__class__=zpp_nape.util.ZNPList_ConvexResult,zpp_nape.util.ZNPList_ZPP_GeomPoly=$hxClasses["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_ZPP_GeomPoly.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"],zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.head=null,zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.modified=null,zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.pushmod=null,zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.length=null,zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomPoly:(ret=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomPoly:(ret=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomPoly:(ret=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool?ret=new zpp_nape.util.ZNPNode_ZPP_GeomPoly:(ret=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_ZPP_GeomPoly.prototype.__class__=zpp_nape.util.ZNPList_ZPP_GeomPoly,zpp_nape.util.ZNPList_RayResult=$hxClasses["zpp_nape.util.ZNPList_RayResult"]=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null},zpp_nape.util.ZNPList_RayResult.__name__=["zpp_nape","util","ZNPList_RayResult"],zpp_nape.util.ZNPList_RayResult.prototype.head=null,zpp_nape.util.ZNPList_RayResult.prototype.begin=function(){return this.head},zpp_nape.util.ZNPList_RayResult.prototype.modified=null,zpp_nape.util.ZNPList_RayResult.prototype.pushmod=null,zpp_nape.util.ZNPList_RayResult.prototype.length=null,zpp_nape.util.ZNPList_RayResult.prototype.setbegin=function(i){this.head=i,this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_RayResult.prototype.add=function(o){var ret;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_RayResult:(ret=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_RayResult.prototype.inlined_add=function(o){var ret;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_RayResult:(ret=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return temp.next=this.head,this.head=temp,this.modified=!0,this.length++,o},zpp_nape.util.ZNPList_RayResult.prototype.addAll=function(x){for(var cx_ite=x.head;null!=cx_ite;){var i=cx_ite.elt;this.add(i),cx_ite=cx_ite.next}},zpp_nape.util.ZNPList_RayResult.prototype.insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_RayResult:(ret=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_RayResult.prototype.inlined_insert=function(cur,o){var ret;null==zpp_nape.util.ZNPNode_RayResult.zpp_pool?ret=new zpp_nape.util.ZNPNode_RayResult:(ret=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=ret.next,ret.next=null),ret.elt=o;var temp=ret;return null==cur?(temp.next=this.head,this.head=temp):(temp.next=cur.next,cur.next=temp),this.pushmod=this.modified=!0,this.length++,temp},zpp_nape.util.ZNPList_RayResult.prototype.pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_RayResult.prototype.inlined_pop=function(){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zpp_nape.util.ZNPList_RayResult.prototype.pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_RayResult.prototype.inlined_pop_unsafe=function(){var ret=this.head.elt;return this.pop(),ret},zpp_nape.util.ZNPList_RayResult.prototype.remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_RayResult.prototype.try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){this.erase(pre),ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_RayResult.prototype.inlined_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}},zpp_nape.util.ZNPList_RayResult.prototype.inlined_try_remove=function(obj){for(var pre=null,cur=this.head,ret=!1;null!=cur;){if(cur.elt==obj){var old,ret1;null==pre?(ret1=(old=this.head).next,this.head=ret1,null==this.head&&(this.pushmod=!0)):(ret1=(old=pre.next).next,pre.next=ret1,null==ret1&&(this.pushmod=!0));var o=old;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret=!0;break}pre=cur,cur=cur.next}return ret},zpp_nape.util.ZNPList_RayResult.prototype.erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_RayResult.prototype.inlined_erase=function(pre){var old,ret;null==pre?(ret=(old=this.head).next,this.head=ret,null==this.head&&(this.pushmod=!0)):(ret=(old=pre.next).next,pre.next=ret,null==ret&&(this.pushmod=!0));var o=old;return o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0,ret},zpp_nape.util.ZNPList_RayResult.prototype.splice=function(pre,n){for(;n-- >0&&null!=pre.next;)this.erase(pre);return pre.next},zpp_nape.util.ZNPList_RayResult.prototype.clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_RayResult.prototype.inlined_clear=function(){for(;null!=this.head;){var ret=this.head;this.head=ret.next;var o=ret;o.elt=null,o.next=zpp_nape.util.ZNPNode_RayResult.zpp_pool,zpp_nape.util.ZNPNode_RayResult.zpp_pool=o,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zpp_nape.util.ZNPList_RayResult.prototype.reverse=function(){for(var cur=this.head,pre=null;null!=cur;){var nx=cur.next;cur.next=pre,this.head=cur,pre=cur,cur=nx}this.modified=!0,this.pushmod=!0},zpp_nape.util.ZNPList_RayResult.prototype.empty=function(){return null==this.head},zpp_nape.util.ZNPList_RayResult.prototype.size=function(){return this.length},zpp_nape.util.ZNPList_RayResult.prototype.has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_RayResult.prototype.inlined_has=function(obj){var ret;ret=!1;for(var cx_ite=this.head;null!=cx_ite;){var npite;if(cx_ite.elt==obj){ret=!0;break}cx_ite=cx_ite.next}return ret},zpp_nape.util.ZNPList_RayResult.prototype.front=function(){return this.head.elt},zpp_nape.util.ZNPList_RayResult.prototype.back=function(){for(var ret=this.head,cur=ret;null!=cur;)ret=cur,cur=cur.next;return ret.elt},zpp_nape.util.ZNPList_RayResult.prototype.iterator_at=function(ind){for(var ret=this.head;ind-- >0&&null!=ret;)ret=ret.next;return ret},zpp_nape.util.ZNPList_RayResult.prototype.at=function(ind){var it=this.iterator_at(ind);return null!=it?it.elt:null},zpp_nape.util.ZNPList_RayResult.prototype.__class__=zpp_nape.util.ZNPList_RayResult,zpp_nape.util.ZNPNode_ZPP_CbType=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbType"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CbType.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"],zpp_nape.util.ZNPNode_ZPP_CbType.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CbType.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CbType.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CbType.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CbType.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CbType.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CbType,zpp_nape.util.ZNPNode_ZPP_CallbackSet=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CallbackSet.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"],zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CallbackSet.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CallbackSet,zpp_nape.util.ZNPNode_ZPP_Shape=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Shape"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Shape.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"],zpp_nape.util.ZNPNode_ZPP_Shape.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Shape.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Shape.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Shape.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Shape.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Shape.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Shape,zpp_nape.util.ZNPNode_ZPP_Body=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Body"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Body.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"],zpp_nape.util.ZNPNode_ZPP_Body.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Body.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Body.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Body.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Body.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Body.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Body,zpp_nape.util.ZNPNode_ZPP_Constraint=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Constraint"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Constraint.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"],zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Constraint.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Constraint,zpp_nape.util.ZNPNode_ZPP_Compound=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Compound"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Compound.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"],zpp_nape.util.ZNPNode_ZPP_Compound.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Compound.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Compound.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Compound.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Compound.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Compound.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Compound,zpp_nape.util.ZNPNode_ZPP_Arbiter=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Arbiter.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"],zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Arbiter.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Arbiter,zpp_nape.util.ZNPNode_ZPP_InteractionListener=$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_InteractionListener.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"],zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_InteractionListener.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_InteractionListener,zpp_nape.util.ZNPNode_ZPP_CbSet=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSet"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CbSet.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"],zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CbSet.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CbSet,zpp_nape.util.ZNPNode_ZPP_Interactor=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Interactor"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Interactor.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"],zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Interactor.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Interactor,zpp_nape.util.ZNPNode_ZPP_BodyListener=$hxClasses["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_BodyListener.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"],zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_BodyListener.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_BodyListener,zpp_nape.util.ZNPNode_ZPP_CbSetPair=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CbSetPair.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"],zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CbSetPair.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CbSetPair,zpp_nape.util.ZNPNode_ZPP_ConstraintListener=$hxClasses["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_ConstraintListener.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"],zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_ConstraintListener.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_ConstraintListener,zpp_nape.util.ZNPNode_ZPP_CutInt=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CutInt"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CutInt.__name__=["zpp_nape","util","ZNPNode_ZPP_CutInt"],zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CutInt.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CutInt,zpp_nape.util.ZNPNode_ZPP_CutVert=$hxClasses["zpp_nape.util.ZNPNode_ZPP_CutVert"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_CutVert.__name__=["zpp_nape","util","ZNPNode_ZPP_CutVert"],zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_CutVert.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_CutVert,zpp_nape.util.ZNPNode_ZPP_PartitionVertex=$hxClasses["zpp_nape.util.ZNPNode_ZPP_PartitionVertex"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_PartitionVertex.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionVertex"],zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_PartitionVertex.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_PartitionVertex,zpp_nape.util.ZNPNode_ZPP_SimplifyP=$hxClasses["zpp_nape.util.ZNPNode_ZPP_SimplifyP"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_SimplifyP.__name__=["zpp_nape","util","ZNPNode_ZPP_SimplifyP"],zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_SimplifyP.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_SimplifyP,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly=$hxClasses["zpp_nape.util.ZNPNode_ZPP_PartitionedPoly"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionedPoly"],zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly,zpp_nape.util.ZNPNode_ZPP_GeomVert=$hxClasses["zpp_nape.util.ZNPNode_ZPP_GeomVert"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_GeomVert.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomVert"],zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_GeomVert.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_GeomVert,zpp_nape.util.ZNPNode_ZPP_SimpleVert=$hxClasses["zpp_nape.util.ZNPNode_ZPP_SimpleVert"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_SimpleVert.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleVert"],zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_SimpleVert.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_SimpleVert,zpp_nape.util.ZNPNode_ZPP_SimpleEvent=$hxClasses["zpp_nape.util.ZNPNode_ZPP_SimpleEvent"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_SimpleEvent.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleEvent"],zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_SimpleEvent.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_SimpleEvent,zpp_nape.util.ZNPNode_ZPP_Vec2=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Vec2"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Vec2.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"],zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Vec2.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Vec2,zpp_nape.util.ZNPNode_ZPP_AABBPair=$hxClasses["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_AABBPair.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"],zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_AABBPair.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_AABBPair,zpp_nape.util.ZNPNode_ZPP_Edge=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Edge"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Edge.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"],zpp_nape.util.ZNPNode_ZPP_Edge.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Edge.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Edge.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Edge.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Edge.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Edge.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Edge,zpp_nape.util.ZNPNode_ZPP_AABBNode=$hxClasses["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_AABBNode.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"],zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_AABBNode.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_AABBNode,zpp_nape.util.ZNPNode_ZPP_Component=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Component"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Component.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"],zpp_nape.util.ZNPNode_ZPP_Component.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Component.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Component.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Component.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Component.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Component.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Component,zpp_nape.util.ZNPNode_ZPP_FluidArbiter=$hxClasses["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_FluidArbiter.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"],zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_FluidArbiter.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_FluidArbiter,zpp_nape.util.ZNPNode_ZPP_SensorArbiter=$hxClasses["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_SensorArbiter.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"],zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_SensorArbiter.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_SensorArbiter,zpp_nape.util.ZNPNode_ZPP_Listener=$hxClasses["zpp_nape.util.ZNPNode_ZPP_Listener"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_Listener.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"],zpp_nape.util.ZNPNode_ZPP_Listener.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_Listener.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_Listener.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_Listener.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_Listener.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_Listener.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_Listener,zpp_nape.util.ZNPNode_ZPP_ColArbiter=$hxClasses["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_ColArbiter.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"],zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_ColArbiter.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_ColArbiter,zpp_nape.util.ZNPNode_ZPP_InteractionGroup=$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_InteractionGroup.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"],zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_InteractionGroup.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_InteractionGroup,zpp_nape.util.ZNPNode_ZPP_ToiEvent=$hxClasses["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_ToiEvent.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"],zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_ToiEvent.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_ToiEvent,zpp_nape.util.ZNPNode_ConvexResult=$hxClasses["zpp_nape.util.ZNPNode_ConvexResult"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ConvexResult.__name__=["zpp_nape","util","ZNPNode_ConvexResult"],zpp_nape.util.ZNPNode_ConvexResult.prototype.next=null,zpp_nape.util.ZNPNode_ConvexResult.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ConvexResult.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ConvexResult.prototype.elt=null,zpp_nape.util.ZNPNode_ConvexResult.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ConvexResult.prototype.__class__=zpp_nape.util.ZNPNode_ConvexResult,zpp_nape.util.ZNPNode_ZPP_GeomPoly=$hxClasses["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_ZPP_GeomPoly.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"],zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.next=null,zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.alloc=function(){},zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.elt=null,zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_ZPP_GeomPoly.prototype.__class__=zpp_nape.util.ZNPNode_ZPP_GeomPoly,zpp_nape.util.ZNPNode_RayResult=$hxClasses["zpp_nape.util.ZNPNode_RayResult"]=function(){this.elt=null,this.next=null},zpp_nape.util.ZNPNode_RayResult.__name__=["zpp_nape","util","ZNPNode_RayResult"],zpp_nape.util.ZNPNode_RayResult.prototype.next=null,zpp_nape.util.ZNPNode_RayResult.prototype.alloc=function(){},zpp_nape.util.ZNPNode_RayResult.prototype.free=function(){this.elt=null},zpp_nape.util.ZNPNode_RayResult.prototype.elt=null,zpp_nape.util.ZNPNode_RayResult.prototype.elem=function(){return this.elt},zpp_nape.util.ZNPNode_RayResult.prototype.__class__=zpp_nape.util.ZNPNode_RayResult,zpp_nape.util.ZPP_MixVec2List=$hxClasses["zpp_nape.util.ZPP_MixVec2List"]=function(){this.at_index=0,this.at_ite=null,this.zip_length=!1,this._length=0,this.inner=null,nape.geom.Vec2List.call(this),this.at_ite=null,this.at_index=0,this.zip_length=!0,this._length=0},zpp_nape.util.ZPP_MixVec2List.__name__=["zpp_nape","util","ZPP_MixVec2List"],zpp_nape.util.ZPP_MixVec2List.__super__=nape.geom.Vec2List,nape.geom.Vec2List.prototype)zpp_nape.util.ZPP_MixVec2List.prototype[k]=nape.geom.Vec2List.prototype[k];return zpp_nape.util.ZPP_MixVec2List.get=function(list,immutable){null==immutable&&(immutable=!1);var ret=new zpp_nape.util.ZPP_MixVec2List;return ret.inner=list,ret.zpp_inner.immutable=immutable,ret},zpp_nape.util.ZPP_MixVec2List.prototype.inner=null,zpp_nape.util.ZPP_MixVec2List.prototype._length=null,zpp_nape.util.ZPP_MixVec2List.prototype.zip_length=null,zpp_nape.util.ZPP_MixVec2List.prototype.at_ite=null,zpp_nape.util.ZPP_MixVec2List.prototype.at_index=null,zpp_nape.util.ZPP_MixVec2List.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var cx_ite=this.inner.next;null!=cx_ite;){var i=cx_ite;this._length++,cx_ite=cx_ite.next}this.zip_length=!1}return this._length},zpp_nape.util.ZPP_MixVec2List.prototype.zpp_vm=function(){this.zpp_inner.validate(),this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},zpp_nape.util.ZPP_MixVec2List.prototype.at=function(index){if(this.zpp_vm(),index<0||index>=this.zpp_gl())throw new js._Boot.HaxeError("Error: Index out of bounds");if(this.zpp_inner.reverse_flag&&(index=this.zpp_gl()-1-index),index<this.at_index||null==this.at_ite)for(this.at_index=0,this.at_ite=this.inner.next;;){var x=this.at_ite;break}for(;this.at_index!=index;)for(this.at_index++,this.at_ite=this.at_ite.next;;){var x1=this.at_ite;break}var _this=this.at_ite;if(null==_this.outer){_this.outer=new nape.geom.Vec2;var o=_this.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,_this.outer.zpp_inner=_this}return _this.outer},zpp_nape.util.ZPP_MixVec2List.prototype.push=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.zpp_vm(),obj.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: Vec2 is already in use");var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag)this.inner.add(obj.zpp_inner);else{var ite=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(ite,obj.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},zpp_nape.util.ZPP_MixVec2List.prototype.unshift=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.zpp_vm(),obj.zpp_inner._inuse)throw new js._Boot.HaxeError("Error: Vec2 is already in use");var cont=null==this.zpp_inner.adder||this.zpp_inner.adder(obj);if(cont){if(this.zpp_inner.reverse_flag){var ite=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(ite,obj.zpp_inner)}else this.inner.add(obj.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(obj)}return cont},zpp_nape.util.ZPP_MixVec2List.prototype.pop=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){if(null==(ret=this.inner.next).outer){ret.outer=new nape.geom.Vec2;var o=ret.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret.outer.zpp_inner=ret}var retx=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.inner.pop()}else{null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var ite=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(ret=null==ite?this.inner.next:ite.next).outer){ret.outer=new nape.geom.Vec2;var o1=ret.outer.zpp_inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret.outer.zpp_inner=ret}var retx1=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.inner.erase(ite)}if(this.zpp_inner.invalidate(),null==ret.outer){ret.outer=new nape.geom.Vec2;var o2=ret.outer.zpp_inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,ret.outer.zpp_inner=ret}return ret.outer},zpp_nape.util.ZPP_MixVec2List.prototype.shift=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.modify_test(),this.empty())throw new js._Boot.HaxeError("Error: Cannot remove from empty list");this.zpp_vm();var ret=null,retx2;if(this.zpp_inner.reverse_flag){null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var ite=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(ret=null==ite?this.inner.next:ite.next).outer){ret.outer=new nape.geom.Vec2;var o=ret.outer.zpp_inner;null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o,ret.outer.zpp_inner=ret}var retx=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx),this.zpp_inner.dontremove||this.inner.erase(ite)}else{if(null==(ret=this.inner.next).outer){ret.outer=new nape.geom.Vec2;var o1=ret.outer.zpp_inner;null!=o1.outer&&(o1.outer.zpp_inner=null,o1.outer=null),o1._isimmutable=null,o1._validate=null,o1._invalidate=null,o1.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o1,ret.outer.zpp_inner=ret}var retx1=ret.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(retx1),this.zpp_inner.dontremove||this.inner.pop()}if(this.zpp_inner.invalidate(),null==ret.outer){ret.outer=new nape.geom.Vec2;var o2=ret.outer.zpp_inner;null!=o2.outer&&(o2.outer.zpp_inner=null,o2.outer=null),o2._isimmutable=null,o2._validate=null,o2._invalidate=null,o2.next=zpp_nape.geom.ZPP_Vec2.zpp_pool,zpp_nape.geom.ZPP_Vec2.zpp_pool=o2,ret.outer.zpp_inner=ret}return ret.outer},zpp_nape.util.ZPP_MixVec2List.prototype.remove=function(obj){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");var ret;this.zpp_inner.modify_test(),this.zpp_vm(),ret=!1;for(var cx_ite=this.inner.next;null!=cx_ite;){var x=cx_ite;if(obj.zpp_inner==x){ret=!0;break}cx_ite=cx_ite.next}return ret&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(obj),this.zpp_inner.dontremove||this.inner.remove(obj.zpp_inner),this.zpp_inner.invalidate()),ret},zpp_nape.util.ZPP_MixVec2List.prototype.clear=function(){if(this.zpp_inner.immutable)throw new js._Boot.HaxeError("Error: Vec2List is immutable");if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},zpp_nape.util.ZPP_MixVec2List.prototype.__class__=zpp_nape.util.ZPP_MixVec2List,zpp_nape.util.ZPP_ConstraintList=$hxClasses["zpp_nape.util.ZPP_ConstraintList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Constraint,this._invalidated=!0},zpp_nape.util.ZPP_ConstraintList.__name__=["zpp_nape","util","ZPP_ConstraintList"],zpp_nape.util.ZPP_ConstraintList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.constraint.ConstraintList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ConstraintList.prototype.outer=null,zpp_nape.util.ZPP_ConstraintList.prototype.inner=null,zpp_nape.util.ZPP_ConstraintList.prototype.immutable=null,zpp_nape.util.ZPP_ConstraintList.prototype._invalidated=null,zpp_nape.util.ZPP_ConstraintList.prototype._invalidate=null,zpp_nape.util.ZPP_ConstraintList.prototype._validate=null,zpp_nape.util.ZPP_ConstraintList.prototype._modifiable=null,zpp_nape.util.ZPP_ConstraintList.prototype.adder=null,zpp_nape.util.ZPP_ConstraintList.prototype.post_adder=null,zpp_nape.util.ZPP_ConstraintList.prototype.subber=null,zpp_nape.util.ZPP_ConstraintList.prototype.dontremove=null,zpp_nape.util.ZPP_ConstraintList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ConstraintList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ConstraintList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ConstraintList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ConstraintList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ConstraintList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ConstraintList.prototype.at_index=null,zpp_nape.util.ZPP_ConstraintList.prototype.at_ite=null,zpp_nape.util.ZPP_ConstraintList.prototype.push_ite=null,zpp_nape.util.ZPP_ConstraintList.prototype.zip_length=null,zpp_nape.util.ZPP_ConstraintList.prototype.user_length=null,zpp_nape.util.ZPP_ConstraintList.prototype.__class__=zpp_nape.util.ZPP_ConstraintList,zpp_nape.util.ZPP_BodyList=$hxClasses["zpp_nape.util.ZPP_BodyList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Body,this._invalidated=!0},zpp_nape.util.ZPP_BodyList.__name__=["zpp_nape","util","ZPP_BodyList"],zpp_nape.util.ZPP_BodyList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.phys.BodyList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_BodyList.prototype.outer=null,zpp_nape.util.ZPP_BodyList.prototype.inner=null,zpp_nape.util.ZPP_BodyList.prototype.immutable=null,zpp_nape.util.ZPP_BodyList.prototype._invalidated=null,zpp_nape.util.ZPP_BodyList.prototype._invalidate=null,zpp_nape.util.ZPP_BodyList.prototype._validate=null,zpp_nape.util.ZPP_BodyList.prototype._modifiable=null,zpp_nape.util.ZPP_BodyList.prototype.adder=null,zpp_nape.util.ZPP_BodyList.prototype.post_adder=null,zpp_nape.util.ZPP_BodyList.prototype.subber=null,zpp_nape.util.ZPP_BodyList.prototype.dontremove=null,zpp_nape.util.ZPP_BodyList.prototype.reverse_flag=null,zpp_nape.util.ZPP_BodyList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_BodyList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_BodyList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_BodyList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_BodyList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_BodyList.prototype.at_index=null,zpp_nape.util.ZPP_BodyList.prototype.at_ite=null,zpp_nape.util.ZPP_BodyList.prototype.push_ite=null,zpp_nape.util.ZPP_BodyList.prototype.zip_length=null,zpp_nape.util.ZPP_BodyList.prototype.user_length=null,zpp_nape.util.ZPP_BodyList.prototype.__class__=zpp_nape.util.ZPP_BodyList,zpp_nape.util.ZPP_InteractorList=$hxClasses["zpp_nape.util.ZPP_InteractorList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Interactor,this._invalidated=!0},zpp_nape.util.ZPP_InteractorList.__name__=["zpp_nape","util","ZPP_InteractorList"],zpp_nape.util.ZPP_InteractorList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.phys.InteractorList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_InteractorList.prototype.outer=null,zpp_nape.util.ZPP_InteractorList.prototype.inner=null,zpp_nape.util.ZPP_InteractorList.prototype.immutable=null,zpp_nape.util.ZPP_InteractorList.prototype._invalidated=null,zpp_nape.util.ZPP_InteractorList.prototype._invalidate=null,zpp_nape.util.ZPP_InteractorList.prototype._validate=null,zpp_nape.util.ZPP_InteractorList.prototype._modifiable=null,zpp_nape.util.ZPP_InteractorList.prototype.adder=null,zpp_nape.util.ZPP_InteractorList.prototype.post_adder=null,zpp_nape.util.ZPP_InteractorList.prototype.subber=null,zpp_nape.util.ZPP_InteractorList.prototype.dontremove=null,zpp_nape.util.ZPP_InteractorList.prototype.reverse_flag=null,zpp_nape.util.ZPP_InteractorList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_InteractorList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_InteractorList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_InteractorList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_InteractorList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_InteractorList.prototype.at_index=null,zpp_nape.util.ZPP_InteractorList.prototype.at_ite=null,zpp_nape.util.ZPP_InteractorList.prototype.push_ite=null,zpp_nape.util.ZPP_InteractorList.prototype.zip_length=null,zpp_nape.util.ZPP_InteractorList.prototype.user_length=null,zpp_nape.util.ZPP_InteractorList.prototype.__class__=zpp_nape.util.ZPP_InteractorList,zpp_nape.util.ZPP_CompoundList=$hxClasses["zpp_nape.util.ZPP_CompoundList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Compound,this._invalidated=!0},zpp_nape.util.ZPP_CompoundList.__name__=["zpp_nape","util","ZPP_CompoundList"],zpp_nape.util.ZPP_CompoundList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.phys.CompoundList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_CompoundList.prototype.outer=null,zpp_nape.util.ZPP_CompoundList.prototype.inner=null,zpp_nape.util.ZPP_CompoundList.prototype.immutable=null,zpp_nape.util.ZPP_CompoundList.prototype._invalidated=null,zpp_nape.util.ZPP_CompoundList.prototype._invalidate=null,zpp_nape.util.ZPP_CompoundList.prototype._validate=null,zpp_nape.util.ZPP_CompoundList.prototype._modifiable=null,zpp_nape.util.ZPP_CompoundList.prototype.adder=null,zpp_nape.util.ZPP_CompoundList.prototype.post_adder=null,zpp_nape.util.ZPP_CompoundList.prototype.subber=null,zpp_nape.util.ZPP_CompoundList.prototype.dontremove=null,zpp_nape.util.ZPP_CompoundList.prototype.reverse_flag=null,zpp_nape.util.ZPP_CompoundList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_CompoundList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_CompoundList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_CompoundList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_CompoundList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_CompoundList.prototype.at_index=null,zpp_nape.util.ZPP_CompoundList.prototype.at_ite=null,zpp_nape.util.ZPP_CompoundList.prototype.push_ite=null,zpp_nape.util.ZPP_CompoundList.prototype.zip_length=null,zpp_nape.util.ZPP_CompoundList.prototype.user_length=null,zpp_nape.util.ZPP_CompoundList.prototype.__class__=zpp_nape.util.ZPP_CompoundList,zpp_nape.util.ZPP_ListenerList=$hxClasses["zpp_nape.util.ZPP_ListenerList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Listener,this._invalidated=!0},zpp_nape.util.ZPP_ListenerList.__name__=["zpp_nape","util","ZPP_ListenerList"],zpp_nape.util.ZPP_ListenerList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.callbacks.ListenerList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ListenerList.prototype.outer=null,zpp_nape.util.ZPP_ListenerList.prototype.inner=null,zpp_nape.util.ZPP_ListenerList.prototype.immutable=null,zpp_nape.util.ZPP_ListenerList.prototype._invalidated=null,zpp_nape.util.ZPP_ListenerList.prototype._invalidate=null,zpp_nape.util.ZPP_ListenerList.prototype._validate=null,zpp_nape.util.ZPP_ListenerList.prototype._modifiable=null,zpp_nape.util.ZPP_ListenerList.prototype.adder=null,zpp_nape.util.ZPP_ListenerList.prototype.post_adder=null,zpp_nape.util.ZPP_ListenerList.prototype.subber=null,zpp_nape.util.ZPP_ListenerList.prototype.dontremove=null,zpp_nape.util.ZPP_ListenerList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ListenerList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ListenerList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ListenerList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ListenerList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ListenerList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ListenerList.prototype.at_index=null,zpp_nape.util.ZPP_ListenerList.prototype.at_ite=null,zpp_nape.util.ZPP_ListenerList.prototype.push_ite=null,zpp_nape.util.ZPP_ListenerList.prototype.zip_length=null,zpp_nape.util.ZPP_ListenerList.prototype.user_length=null,zpp_nape.util.ZPP_ListenerList.prototype.__class__=zpp_nape.util.ZPP_ListenerList,zpp_nape.util.ZPP_CbTypeList=$hxClasses["zpp_nape.util.ZPP_CbTypeList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_CbType,this._invalidated=!0},zpp_nape.util.ZPP_CbTypeList.__name__=["zpp_nape","util","ZPP_CbTypeList"],zpp_nape.util.ZPP_CbTypeList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.callbacks.CbTypeList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_CbTypeList.prototype.outer=null,zpp_nape.util.ZPP_CbTypeList.prototype.inner=null,zpp_nape.util.ZPP_CbTypeList.prototype.immutable=null,zpp_nape.util.ZPP_CbTypeList.prototype._invalidated=null,zpp_nape.util.ZPP_CbTypeList.prototype._invalidate=null,zpp_nape.util.ZPP_CbTypeList.prototype._validate=null,zpp_nape.util.ZPP_CbTypeList.prototype._modifiable=null,zpp_nape.util.ZPP_CbTypeList.prototype.adder=null,zpp_nape.util.ZPP_CbTypeList.prototype.post_adder=null,zpp_nape.util.ZPP_CbTypeList.prototype.subber=null,zpp_nape.util.ZPP_CbTypeList.prototype.dontremove=null,zpp_nape.util.ZPP_CbTypeList.prototype.reverse_flag=null,zpp_nape.util.ZPP_CbTypeList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_CbTypeList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_CbTypeList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_CbTypeList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_CbTypeList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_CbTypeList.prototype.at_index=null,zpp_nape.util.ZPP_CbTypeList.prototype.at_ite=null,zpp_nape.util.ZPP_CbTypeList.prototype.push_ite=null,zpp_nape.util.ZPP_CbTypeList.prototype.zip_length=null,zpp_nape.util.ZPP_CbTypeList.prototype.user_length=null,zpp_nape.util.ZPP_CbTypeList.prototype.__class__=zpp_nape.util.ZPP_CbTypeList,zpp_nape.util.ZPP_Vec2List=$hxClasses["zpp_nape.util.ZPP_Vec2List"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Vec2,this._invalidated=!0},zpp_nape.util.ZPP_Vec2List.__name__=["zpp_nape","util","ZPP_Vec2List"],zpp_nape.util.ZPP_Vec2List.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.geom.Vec2List;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_Vec2List.prototype.outer=null,zpp_nape.util.ZPP_Vec2List.prototype.inner=null,zpp_nape.util.ZPP_Vec2List.prototype.immutable=null,zpp_nape.util.ZPP_Vec2List.prototype._invalidated=null,zpp_nape.util.ZPP_Vec2List.prototype._invalidate=null,zpp_nape.util.ZPP_Vec2List.prototype._validate=null,zpp_nape.util.ZPP_Vec2List.prototype._modifiable=null,zpp_nape.util.ZPP_Vec2List.prototype.adder=null,zpp_nape.util.ZPP_Vec2List.prototype.post_adder=null,zpp_nape.util.ZPP_Vec2List.prototype.subber=null,zpp_nape.util.ZPP_Vec2List.prototype.dontremove=null,zpp_nape.util.ZPP_Vec2List.prototype.reverse_flag=null,zpp_nape.util.ZPP_Vec2List.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_Vec2List.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_Vec2List.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_Vec2List.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_Vec2List.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_Vec2List.prototype.at_index=null,zpp_nape.util.ZPP_Vec2List.prototype.at_ite=null,zpp_nape.util.ZPP_Vec2List.prototype.push_ite=null,zpp_nape.util.ZPP_Vec2List.prototype.zip_length=null,zpp_nape.util.ZPP_Vec2List.prototype.user_length=null,zpp_nape.util.ZPP_Vec2List.prototype.__class__=zpp_nape.util.ZPP_Vec2List,zpp_nape.util.ZPP_GeomPolyList=$hxClasses["zpp_nape.util.ZPP_GeomPolyList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_GeomPoly,this._invalidated=!0},zpp_nape.util.ZPP_GeomPolyList.__name__=["zpp_nape","util","ZPP_GeomPolyList"],zpp_nape.util.ZPP_GeomPolyList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.geom.GeomPolyList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_GeomPolyList.prototype.outer=null,zpp_nape.util.ZPP_GeomPolyList.prototype.inner=null,zpp_nape.util.ZPP_GeomPolyList.prototype.immutable=null,zpp_nape.util.ZPP_GeomPolyList.prototype._invalidated=null,zpp_nape.util.ZPP_GeomPolyList.prototype._invalidate=null,zpp_nape.util.ZPP_GeomPolyList.prototype._validate=null,zpp_nape.util.ZPP_GeomPolyList.prototype._modifiable=null,zpp_nape.util.ZPP_GeomPolyList.prototype.adder=null,zpp_nape.util.ZPP_GeomPolyList.prototype.post_adder=null,zpp_nape.util.ZPP_GeomPolyList.prototype.subber=null,zpp_nape.util.ZPP_GeomPolyList.prototype.dontremove=null,zpp_nape.util.ZPP_GeomPolyList.prototype.reverse_flag=null,zpp_nape.util.ZPP_GeomPolyList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_GeomPolyList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_GeomPolyList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_GeomPolyList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_GeomPolyList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_GeomPolyList.prototype.at_index=null,zpp_nape.util.ZPP_GeomPolyList.prototype.at_ite=null,zpp_nape.util.ZPP_GeomPolyList.prototype.push_ite=null,zpp_nape.util.ZPP_GeomPolyList.prototype.zip_length=null,zpp_nape.util.ZPP_GeomPolyList.prototype.user_length=null,zpp_nape.util.ZPP_GeomPolyList.prototype.__class__=zpp_nape.util.ZPP_GeomPolyList,zpp_nape.util.ZPP_RayResultList=$hxClasses["zpp_nape.util.ZPP_RayResultList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_RayResult,this._invalidated=!0},zpp_nape.util.ZPP_RayResultList.__name__=["zpp_nape","util","ZPP_RayResultList"],zpp_nape.util.ZPP_RayResultList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.geom.RayResultList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_RayResultList.prototype.outer=null,zpp_nape.util.ZPP_RayResultList.prototype.inner=null,zpp_nape.util.ZPP_RayResultList.prototype.immutable=null,zpp_nape.util.ZPP_RayResultList.prototype._invalidated=null,zpp_nape.util.ZPP_RayResultList.prototype._invalidate=null,zpp_nape.util.ZPP_RayResultList.prototype._validate=null,zpp_nape.util.ZPP_RayResultList.prototype._modifiable=null,zpp_nape.util.ZPP_RayResultList.prototype.adder=null,zpp_nape.util.ZPP_RayResultList.prototype.post_adder=null,zpp_nape.util.ZPP_RayResultList.prototype.subber=null,zpp_nape.util.ZPP_RayResultList.prototype.dontremove=null,zpp_nape.util.ZPP_RayResultList.prototype.reverse_flag=null,zpp_nape.util.ZPP_RayResultList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_RayResultList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_RayResultList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_RayResultList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_RayResultList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_RayResultList.prototype.at_index=null,zpp_nape.util.ZPP_RayResultList.prototype.at_ite=null,zpp_nape.util.ZPP_RayResultList.prototype.push_ite=null,zpp_nape.util.ZPP_RayResultList.prototype.zip_length=null,zpp_nape.util.ZPP_RayResultList.prototype.user_length=null,zpp_nape.util.ZPP_RayResultList.prototype.__class__=zpp_nape.util.ZPP_RayResultList,zpp_nape.util.ZPP_ConvexResultList=$hxClasses["zpp_nape.util.ZPP_ConvexResultList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ConvexResult,this._invalidated=!0},zpp_nape.util.ZPP_ConvexResultList.__name__=["zpp_nape","util","ZPP_ConvexResultList"],zpp_nape.util.ZPP_ConvexResultList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.geom.ConvexResultList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ConvexResultList.prototype.outer=null,zpp_nape.util.ZPP_ConvexResultList.prototype.inner=null,zpp_nape.util.ZPP_ConvexResultList.prototype.immutable=null,zpp_nape.util.ZPP_ConvexResultList.prototype._invalidated=null,zpp_nape.util.ZPP_ConvexResultList.prototype._invalidate=null,zpp_nape.util.ZPP_ConvexResultList.prototype._validate=null,zpp_nape.util.ZPP_ConvexResultList.prototype._modifiable=null,zpp_nape.util.ZPP_ConvexResultList.prototype.adder=null,zpp_nape.util.ZPP_ConvexResultList.prototype.post_adder=null,zpp_nape.util.ZPP_ConvexResultList.prototype.subber=null,zpp_nape.util.ZPP_ConvexResultList.prototype.dontremove=null,zpp_nape.util.ZPP_ConvexResultList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ConvexResultList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ConvexResultList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ConvexResultList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ConvexResultList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ConvexResultList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ConvexResultList.prototype.at_index=null,zpp_nape.util.ZPP_ConvexResultList.prototype.at_ite=null,zpp_nape.util.ZPP_ConvexResultList.prototype.push_ite=null,zpp_nape.util.ZPP_ConvexResultList.prototype.zip_length=null,zpp_nape.util.ZPP_ConvexResultList.prototype.user_length=null,zpp_nape.util.ZPP_ConvexResultList.prototype.__class__=zpp_nape.util.ZPP_ConvexResultList,zpp_nape.util.ZPP_EdgeList=$hxClasses["zpp_nape.util.ZPP_EdgeList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Edge,this._invalidated=!0},zpp_nape.util.ZPP_EdgeList.__name__=["zpp_nape","util","ZPP_EdgeList"],zpp_nape.util.ZPP_EdgeList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.shape.EdgeList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_EdgeList.prototype.outer=null,zpp_nape.util.ZPP_EdgeList.prototype.inner=null,zpp_nape.util.ZPP_EdgeList.prototype.immutable=null,zpp_nape.util.ZPP_EdgeList.prototype._invalidated=null,zpp_nape.util.ZPP_EdgeList.prototype._invalidate=null,zpp_nape.util.ZPP_EdgeList.prototype._validate=null,zpp_nape.util.ZPP_EdgeList.prototype._modifiable=null,zpp_nape.util.ZPP_EdgeList.prototype.adder=null,zpp_nape.util.ZPP_EdgeList.prototype.post_adder=null,zpp_nape.util.ZPP_EdgeList.prototype.subber=null,zpp_nape.util.ZPP_EdgeList.prototype.dontremove=null,zpp_nape.util.ZPP_EdgeList.prototype.reverse_flag=null,zpp_nape.util.ZPP_EdgeList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_EdgeList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_EdgeList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_EdgeList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_EdgeList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_EdgeList.prototype.at_index=null,zpp_nape.util.ZPP_EdgeList.prototype.at_ite=null,zpp_nape.util.ZPP_EdgeList.prototype.push_ite=null,zpp_nape.util.ZPP_EdgeList.prototype.zip_length=null,zpp_nape.util.ZPP_EdgeList.prototype.user_length=null,zpp_nape.util.ZPP_EdgeList.prototype.__class__=zpp_nape.util.ZPP_EdgeList,zpp_nape.util.ZPP_ShapeList=$hxClasses["zpp_nape.util.ZPP_ShapeList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Shape,this._invalidated=!0},zpp_nape.util.ZPP_ShapeList.__name__=["zpp_nape","util","ZPP_ShapeList"],zpp_nape.util.ZPP_ShapeList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.shape.ShapeList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ShapeList.prototype.outer=null,zpp_nape.util.ZPP_ShapeList.prototype.inner=null,zpp_nape.util.ZPP_ShapeList.prototype.immutable=null,zpp_nape.util.ZPP_ShapeList.prototype._invalidated=null,zpp_nape.util.ZPP_ShapeList.prototype._invalidate=null,zpp_nape.util.ZPP_ShapeList.prototype._validate=null,zpp_nape.util.ZPP_ShapeList.prototype._modifiable=null,zpp_nape.util.ZPP_ShapeList.prototype.adder=null,zpp_nape.util.ZPP_ShapeList.prototype.post_adder=null,zpp_nape.util.ZPP_ShapeList.prototype.subber=null,zpp_nape.util.ZPP_ShapeList.prototype.dontremove=null,zpp_nape.util.ZPP_ShapeList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ShapeList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ShapeList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ShapeList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ShapeList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ShapeList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ShapeList.prototype.at_index=null,zpp_nape.util.ZPP_ShapeList.prototype.at_ite=null,zpp_nape.util.ZPP_ShapeList.prototype.push_ite=null,zpp_nape.util.ZPP_ShapeList.prototype.zip_length=null,zpp_nape.util.ZPP_ShapeList.prototype.user_length=null,zpp_nape.util.ZPP_ShapeList.prototype.__class__=zpp_nape.util.ZPP_ShapeList,zpp_nape.util.ZPP_InteractionGroupList=$hxClasses["zpp_nape.util.ZPP_InteractionGroupList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_InteractionGroup,this._invalidated=!0},zpp_nape.util.ZPP_InteractionGroupList.__name__=["zpp_nape","util","ZPP_InteractionGroupList"],zpp_nape.util.ZPP_InteractionGroupList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.dynamics.InteractionGroupList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_InteractionGroupList.prototype.outer=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.inner=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.immutable=null,zpp_nape.util.ZPP_InteractionGroupList.prototype._invalidated=null,zpp_nape.util.ZPP_InteractionGroupList.prototype._invalidate=null,zpp_nape.util.ZPP_InteractionGroupList.prototype._validate=null,zpp_nape.util.ZPP_InteractionGroupList.prototype._modifiable=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.adder=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.post_adder=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.subber=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.dontremove=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.reverse_flag=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_InteractionGroupList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_InteractionGroupList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_InteractionGroupList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_InteractionGroupList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_InteractionGroupList.prototype.at_index=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.at_ite=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.push_ite=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.zip_length=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.user_length=null,zpp_nape.util.ZPP_InteractionGroupList.prototype.__class__=zpp_nape.util.ZPP_InteractionGroupList,zpp_nape.util.ZPP_ArbiterList=$hxClasses["zpp_nape.util.ZPP_ArbiterList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.util.ZNPList_ZPP_Arbiter,this._invalidated=!0},zpp_nape.util.ZPP_ArbiterList.__name__=["zpp_nape","util","ZPP_ArbiterList"],zpp_nape.util.ZPP_ArbiterList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.dynamics.ArbiterList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ArbiterList.prototype.outer=null,zpp_nape.util.ZPP_ArbiterList.prototype.inner=null,zpp_nape.util.ZPP_ArbiterList.prototype.immutable=null,zpp_nape.util.ZPP_ArbiterList.prototype._invalidated=null,zpp_nape.util.ZPP_ArbiterList.prototype._invalidate=null,zpp_nape.util.ZPP_ArbiterList.prototype._validate=null,zpp_nape.util.ZPP_ArbiterList.prototype._modifiable=null,zpp_nape.util.ZPP_ArbiterList.prototype.adder=null,zpp_nape.util.ZPP_ArbiterList.prototype.post_adder=null,zpp_nape.util.ZPP_ArbiterList.prototype.subber=null,zpp_nape.util.ZPP_ArbiterList.prototype.dontremove=null,zpp_nape.util.ZPP_ArbiterList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ArbiterList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ArbiterList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ArbiterList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ArbiterList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ArbiterList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ArbiterList.prototype.at_index=null,zpp_nape.util.ZPP_ArbiterList.prototype.at_ite=null,zpp_nape.util.ZPP_ArbiterList.prototype.push_ite=null,zpp_nape.util.ZPP_ArbiterList.prototype.zip_length=null,zpp_nape.util.ZPP_ArbiterList.prototype.user_length=null,zpp_nape.util.ZPP_ArbiterList.prototype.__class__=zpp_nape.util.ZPP_ArbiterList,zpp_nape.util.ZPP_ContactList=$hxClasses["zpp_nape.util.ZPP_ContactList"]=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zpp_nape.dynamics.ZPP_Contact,this._invalidated=!0},zpp_nape.util.ZPP_ContactList.__name__=["zpp_nape","util","ZPP_ContactList"],zpp_nape.util.ZPP_ContactList.get=function(list,imm){null==imm&&(imm=!1);var ret=new nape.dynamics.ContactList;return ret.zpp_inner.inner=list,imm&&(ret.zpp_inner.immutable=!0),ret.zpp_inner.zip_length=!0,ret},zpp_nape.util.ZPP_ContactList.prototype.outer=null,zpp_nape.util.ZPP_ContactList.prototype.inner=null,zpp_nape.util.ZPP_ContactList.prototype.immutable=null,zpp_nape.util.ZPP_ContactList.prototype._invalidated=null,zpp_nape.util.ZPP_ContactList.prototype._invalidate=null,zpp_nape.util.ZPP_ContactList.prototype._validate=null,zpp_nape.util.ZPP_ContactList.prototype._modifiable=null,zpp_nape.util.ZPP_ContactList.prototype.adder=null,zpp_nape.util.ZPP_ContactList.prototype.post_adder=null,zpp_nape.util.ZPP_ContactList.prototype.subber=null,zpp_nape.util.ZPP_ContactList.prototype.dontremove=null,zpp_nape.util.ZPP_ContactList.prototype.reverse_flag=null,zpp_nape.util.ZPP_ContactList.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zpp_nape.util.ZPP_ContactList.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zpp_nape.util.ZPP_ContactList.prototype.modify_test=function(){null!=this._modifiable&&this._modifiable()},zpp_nape.util.ZPP_ContactList.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zpp_nape.util.ZPP_ContactList.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zpp_nape.util.ZPP_ContactList.prototype.at_index=null,zpp_nape.util.ZPP_ContactList.prototype.at_ite=null,zpp_nape.util.ZPP_ContactList.prototype.push_ite=null,zpp_nape.util.ZPP_ContactList.prototype.zip_length=null,zpp_nape.util.ZPP_ContactList.prototype.user_length=null,zpp_nape.util.ZPP_ContactList.prototype.__class__=zpp_nape.util.ZPP_ContactList,zpp_nape.util.ZPP_Math=$hxClasses["zpp_nape.util.ZPP_Math"]=function(){},zpp_nape.util.ZPP_Math.__name__=["zpp_nape","util","ZPP_Math"],zpp_nape.util.ZPP_Math.sqrt=function(x){return Math.sqrt(x)},zpp_nape.util.ZPP_Math.invsqrt=function(x){return 1/Math.sqrt(x)},zpp_nape.util.ZPP_Math.sqr=function(x){return x*x},zpp_nape.util.ZPP_Math.clamp2=function(x,a){var a1=-a;return x<a1?a1:x>a?a:x},zpp_nape.util.ZPP_Math.clamp=function(x,a,b){return x<a?a:x>b?b:x},zpp_nape.util.ZPP_Math.prototype.__class__=zpp_nape.util.ZPP_Math,zpp_nape.util.ZPP_PubPool=$hxClasses["zpp_nape.util.ZPP_PubPool"]=function(){},zpp_nape.util.ZPP_PubPool.__name__=["zpp_nape","util","ZPP_PubPool"],zpp_nape.util.ZPP_PubPool.prototype.__class__=zpp_nape.util.ZPP_PubPool,zpp_nape.util.ZPP_Set_ZPP_Body=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_Body"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_Body.__name__=["zpp_nape","util","ZPP_Set_ZPP_Body"],zpp_nape.util.ZPP_Set_ZPP_Body.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_Body.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_Body:(x=zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_Body.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_Body,zpp_nape.util.ZPP_Set_ZPP_CbSetPair=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"],zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSetPair:(x=zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_CbSetPair.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_CbSetPair,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_PartitionVertex"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionVertex"],zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionVertex:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex,zpp_nape.util.ZPP_Set_ZPP_PartitionPair=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_PartitionPair"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionPair"],zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_PartitionPair:(x=zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_PartitionPair.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_PartitionPair,zpp_nape.util.ZPP_Set_ZPP_SimpleVert=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_SimpleVert"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleVert"],zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleVert:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_SimpleVert.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_SimpleVert,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_SimpleSeg"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleSeg"],zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleSeg:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_SimpleEvent"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleEvent"],zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_SimpleEvent:(x=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent,zpp_nape.util.ZPP_Set_ZPP_CbSet=$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null},zpp_nape.util.ZPP_Set_ZPP_CbSet.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"],zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.alloc=function(){},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.lt=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.swapped=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.data=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.prev=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.next=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.parent=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.colour=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.verify=function(){if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data,prei=!0;if(!this.empty()){for(var set_ite1=this.parent;null!=set_ite1.prev;)set_ite1=set_ite1.prev;for(;null!=set_ite1;){var j=set_ite1.data;if(prei){if(i==j)prei=!1;else if(!this.lt(j,i)&&this.lt(i,j))return!1}else if(!this.lt(i,j)&&this.lt(j,i))return!1;if(null!=set_ite1.next)for(set_ite1=set_ite1.next;null!=set_ite1.prev;)set_ite1=set_ite1.prev;else{for(;null!=set_ite1.parent&&set_ite1==set_ite1.parent.next;)set_ite1=set_ite1.parent;set_ite1=set_ite1.parent}}}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return!0},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.empty=function(){return null==this.parent},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.size=function(){var ret=0;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var i=set_ite.data;if(++ret,null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.has=function(obj){return null!=this.find(obj)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.find=function(obj){for(var cur=this.parent;null!=cur&&cur.data!=obj;)cur=this.lt(obj,cur.data)?cur.prev:cur.next;return cur},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.has_weak=function(obj){return null!=this.find_weak(obj)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.find_weak=function(obj){for(var cur=this.parent;null!=cur;)if(this.lt(obj,cur.data))cur=cur.prev;else{if(!this.lt(cur.data,obj))break;cur=cur.next}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.lower_bound=function(obj){var ret=null;if(!this.empty()){for(var set_ite=this.parent;null!=set_ite.prev;)set_ite=set_ite.prev;for(;null!=set_ite;){var elt=set_ite.data;if(!this.lt(elt,obj)){ret=elt;break}if(null!=set_ite.next)for(set_ite=set_ite.next;null!=set_ite.prev;)set_ite=set_ite.prev;else{for(;null!=set_ite.parent&&set_ite==set_ite.parent.next;)set_ite=set_ite.parent;set_ite=set_ite.parent}}}return ret},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.first=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;return cur.data},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.pop_front=function(){for(var cur=this.parent;null!=cur.prev;)cur=cur.prev;var ret=cur.data;return this.remove_node(cur),ret},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.remove=function(obj){var node=this.find(obj);this.remove_node(node)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.successor_node=function(cur){if(null!=cur.next)for(cur=cur.next;null!=cur.prev;)cur=cur.prev;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.prev!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.predecessor_node=function(cur){if(null!=cur.prev)for(cur=cur.prev;null!=cur.next;)cur=cur.next;else{var pre=cur;for(cur=cur.parent;null!=cur&&cur.next!=pre;)pre=cur,cur=cur.parent}return cur},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.successor=function(obj){var node=this.successor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.predecessor=function(obj){var node=this.predecessor_node(this.find(obj));return null==node?null:node.data},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.remove_node=function(cur){if(null!=cur.next&&null!=cur.prev){for(var sm=cur.next;null!=sm.prev;)sm=sm.prev;var t=cur.data;cur.data=sm.data,sm.data=t,null!=this.swapped&&this.swapped(cur.data,sm.data),cur=sm}var child=null==cur.prev?cur.next:cur.prev;if(1==cur.colour)if(null!=cur.prev||null!=cur.next)child.colour=1;else if(null!=cur.parent)for(var parent=cur.parent;;){parent.colour++,parent.prev.colour--,parent.next.colour--;var child1=parent.prev;if(-1==child1.colour){this.__fix_neg_red(child1);break}if(0==child1.colour){if(null!=child1.prev&&0==child1.prev.colour){this.__fix_dbl_red(child1.prev);break}if(null!=child1.next&&0==child1.next.colour){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(-1==child2.colour){this.__fix_neg_red(child2);break}if(0==child2.colour){if(null!=child2.prev&&0==child2.prev.colour){this.__fix_dbl_red(child2.prev);break}if(null!=child2.next&&0==child2.next.colour){this.__fix_dbl_red(child2.next);break}}if(2==parent.colour){if(null!=parent.parent){parent=parent.parent;continue}parent.colour=1}break}var par=cur.parent;null==par?this.parent=child:par.prev==cur?par.prev=child:par.next=child,null!=child&&(child.parent=par),cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=o},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.clear=function(){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.clear_with=function(lambda){if(null!=this.parent){for(var cur=this.parent;null!=cur;)if(null!=cur.prev)cur=cur.prev;else if(null!=cur.next)cur=cur.next;else{lambda(cur.data);var ret=cur.parent;null!=ret&&(cur==ret.prev?ret.prev=null:ret.next=null,cur.parent=null);var o=cur;o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=o,cur=ret}this.parent=null}},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.clear_node=function(node,lambda){lambda(node.data);var ret=node.parent;null!=ret&&(node==ret.prev?ret.prev=null:ret.next=null,node.parent=null);var o=node;return o.data=null,o.lt=null,o.swapped=null,o.next=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=o,ret},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.__fix_neg_red=function(negred){var parent=negred.parent,child;if(parent.prev==negred){var nl=negred.prev,nr=negred.next,trl=nr.prev,trr=nr.next;nl.colour=0,negred.colour=parent.colour=1,negred.next=trl,null!=trl&&(trl.parent=negred);var t=parent.data;parent.data=nr.data,nr.data=t,null!=this.swapped&&this.swapped(parent.data,nr.data),nr.prev=trr,null!=trr&&(trr.parent=nr),nr.next=parent.next,null!=parent.next&&(parent.next.parent=nr),parent.next=nr,null!=nr&&(nr.parent=parent),child=nl}else{var nl1=negred.next,nr1=negred.prev,trl1=nr1.next,trr1=nr1.prev;nl1.colour=0,negred.colour=parent.colour=1,negred.prev=trl1,null!=trl1&&(trl1.parent=negred);var t1=parent.data;parent.data=nr1.data,nr1.data=t1,null!=this.swapped&&this.swapped(parent.data,nr1.data),nr1.next=trr1,null!=trr1&&(trr1.parent=nr1),nr1.prev=parent.prev,null!=parent.prev&&(parent.prev.parent=nr1),parent.prev=nr1,null!=nr1&&(nr1.parent=parent),child=nl1}null!=child.prev&&0==child.prev.colour?this.__fix_dbl_red(child.prev):null!=child.next&&0==child.next.colour&&this.__fix_dbl_red(child.next)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.__fix_dbl_red=function(x){for(;;){var par=x.parent,g=par.parent,n1,n2,n3,t1,t2,t3,t4;if(null==g){par.colour=1;break}par==g.prev?(n3=g,t4=g.next,x==par.prev?(n1=x,n2=par,t1=x.prev,t2=x.next,t3=par.next):(n1=par,n2=x,t1=par.prev,t2=x.prev,t3=x.next)):(n1=g,t1=g.prev,x==par.prev?(n2=x,n3=par,t2=x.prev,t3=x.next,t4=par.next):(n2=par,n3=x,t2=par.prev,t3=x.prev,t4=x.next));var par1=g.parent;if(null==par1?this.parent=n2:par1.prev==g?par1.prev=n2:par1.next=n2,null!=n2&&(n2.parent=par1),n1.prev=t1,null!=t1&&(t1.parent=n1),n1.next=t2,null!=t2&&(t2.parent=n1),n2.prev=n1,null!=n1&&(n1.parent=n2),n2.next=n3,null!=n3&&(n3.parent=n2),n3.prev=t3,null!=t3&&(t3.parent=n3),n3.next=t4,null!=t4&&(t4.parent=n3),n2.colour=g.colour-1,n1.colour=1,n3.colour=1,n2==this.parent)this.parent.colour=1;else if(0==n2.colour&&0==n2.parent.colour){x=n2;continue}break}},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.try_insert_bool=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null!=x&&(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),!0)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.try_insert=function(obj){var x=null,cur=null;if(null==this.parent)null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,this.parent=x;else for(cur=this.parent;;)if(this.lt(obj,cur.data)){if(null==cur.prev){null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(!this.lt(cur.data,obj))break;if(null==cur.next){null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,cur.next=x,x.parent=cur;break}cur=cur.next}return null==x?cur:(null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x)},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.insert=function(obj){var x;if(null==zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool?x=new zpp_nape.util.ZPP_Set_ZPP_CbSet:(x=zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=x.next,x.next=null),x.data=obj,null==this.parent)this.parent=x;else for(var cur=this.parent;;)if(this.lt(x.data,cur.data)){if(null==cur.prev){cur.prev=x,x.parent=cur;break}cur=cur.prev}else{if(null==cur.next){cur.next=x,x.parent=cur;break}cur=cur.next}return null==x.parent?x.colour=1:(x.colour=0,0==x.parent.colour&&this.__fix_dbl_red(x)),x},zpp_nape.util.ZPP_Set_ZPP_CbSet.prototype.__class__=zpp_nape.util.ZPP_Set_ZPP_CbSet,String.__name__=!0,Array.__name__=!0,Object.defineProperty(js._Boot.HaxeError.prototype,"message",{get:function(){return String(this.val)}}),js.Boot.__toStr={}.toString,nape.Config.epsilon=1e-8,nape.Config.fluidAngularDragFriction=2.5,nape.Config.fluidAngularDrag=100,nape.Config.fluidVacuumDrag=.5,nape.Config.fluidLinearDrag=.5,nape.Config.collisionSlop=.2,nape.Config.collisionSlopCCD=.5,nape.Config.distanceThresholdCCD=.05,nape.Config.staticCCDLinearThreshold=.05,nape.Config.staticCCDAngularThreshold=.005,nape.Config.bulletCCDLinearThreshold=.125,nape.Config.bulletCCDAngularThreshold=.0125,nape.Config.dynamicSweepLinearThreshold=17,nape.Config.dynamicSweepAngularThreshold=.6,nape.Config.angularCCDSlipScale=.75,nape.Config.arbiterExpirationDelay=6,nape.Config.staticFrictionThreshold=2,nape.Config.elasticThreshold=20,nape.Config.sleepDelay=60,nape.Config.linearSleepThreshold=.2,nape.Config.angularSleepThreshold=.4,nape.Config.contactBiasCoef=.3,nape.Config.contactStaticBiasCoef=.6,nape.Config.contactContinuousBiasCoef=.4,nape.Config.contactContinuousStaticBiasCoef=.5,nape.Config.constraintLinearSlop=.1,nape.Config.constraintAngularSlop=.001,nape.Config.illConditionedThreshold=2e8,nape.callbacks.CbTypeIterator.zpp_pool=null,nape.callbacks.ListenerIterator.zpp_pool=null,nape.constraint.Constraint.zpp_internalAlloc=!1,nape.constraint.ConstraintIterator.zpp_pool=null,nape.dynamics.ArbiterIterator.zpp_pool=null,nape.dynamics.ContactIterator.zpp_pool=null,nape.dynamics.InteractionGroupIterator.zpp_pool=null,nape.geom.ConvexResultIterator.zpp_pool=null,nape.geom.GeomPolyIterator.zpp_pool=null,nape.geom.RayResultIterator.zpp_pool=null,nape.geom.Vec2Iterator.zpp_pool=null,nape.phys.Interactor.zpp_internalAlloc=!1,nape.phys.BodyIterator.zpp_pool=null,nape.phys.CompoundIterator.zpp_pool=null,nape.phys.InteractorIterator.zpp_pool=null,nape.shape.Shape.zpp_internalAlloc=!1,nape.shape.EdgeIterator.zpp_pool=null,nape.shape.ShapeIterator.zpp_pool=null,zpp_nape.ZPP_Const.FMAX=1e100,zpp_nape.ZPP_ID._Constraint=0,zpp_nape.ZPP_ID._Interactor=0,zpp_nape.ZPP_ID._CbType=0,zpp_nape.ZPP_ID._CbSet=0,zpp_nape.ZPP_ID._Listener=0,zpp_nape.ZPP_ID._ZPP_SimpleVert=0,zpp_nape.ZPP_ID._ZPP_SimpleSeg=0,zpp_nape.ZPP_ID._Space=0,zpp_nape.ZPP_ID._InteractionGroup=0,zpp_nape.callbacks.ZPP_Callback.internal=!1,zpp_nape.callbacks.ZPP_Callback.zpp_pool=null,zpp_nape.callbacks.ZPP_CbSet.zpp_pool=null,zpp_nape.callbacks.ZPP_CbSetPair.zpp_pool=null,zpp_nape.callbacks.ZPP_CbType.ANY_SHAPE=new nape.callbacks.CbType,zpp_nape.callbacks.ZPP_CbType.ANY_BODY=new nape.callbacks.CbType,zpp_nape.callbacks.ZPP_CbType.ANY_COMPOUND=new nape.callbacks.CbType,zpp_nape.callbacks.ZPP_CbType.ANY_CONSTRAINT=new nape.callbacks.CbType,zpp_nape.util.ZPP_Flags.internal=!1,zpp_nape.util.ZPP_Flags.id_ImmState_ACCEPT=1,zpp_nape.util.ZPP_Flags.id_ImmState_IGNORE=2,zpp_nape.util.ZPP_Flags.id_ImmState_ALWAYS=4,zpp_nape.util.ZPP_Flags.id_GravMassMode_DEFAULT=0,zpp_nape.util.ZPP_Flags.id_GravMassMode_FIXED=1,zpp_nape.util.ZPP_Flags.id_GravMassMode_SCALED=2,zpp_nape.util.ZPP_Flags.id_InertiaMode_DEFAULT=0,zpp_nape.util.ZPP_Flags.id_InertiaMode_FIXED=1,zpp_nape.util.ZPP_Flags.id_MassMode_DEFAULT=0,zpp_nape.util.ZPP_Flags.id_MassMode_FIXED=1,zpp_nape.util.ZPP_Flags.id_BodyType_STATIC=1,zpp_nape.util.ZPP_Flags.id_BodyType_DYNAMIC=2,zpp_nape.util.ZPP_Flags.id_BodyType_KINEMATIC=3,zpp_nape.util.ZPP_Flags.id_ListenerType_BODY=0,zpp_nape.util.ZPP_Flags.id_PreFlag_ACCEPT=1,zpp_nape.util.ZPP_Flags.id_ListenerType_CONSTRAINT=1,zpp_nape.util.ZPP_Flags.id_PreFlag_IGNORE=2,zpp_nape.util.ZPP_Flags.id_ListenerType_INTERACTION=2,zpp_nape.util.ZPP_Flags.id_PreFlag_ACCEPT_ONCE=3,zpp_nape.util.ZPP_Flags.id_ListenerType_PRE=3,zpp_nape.util.ZPP_Flags.id_PreFlag_IGNORE_ONCE=4,zpp_nape.util.ZPP_Flags.id_CbEvent_BEGIN=0,zpp_nape.util.ZPP_Flags.id_InteractionType_COLLISION=1,zpp_nape.util.ZPP_Flags.id_CbEvent_ONGOING=6,zpp_nape.util.ZPP_Flags.id_InteractionType_SENSOR=2,zpp_nape.util.ZPP_Flags.id_CbEvent_END=1,zpp_nape.util.ZPP_Flags.id_InteractionType_FLUID=4,zpp_nape.util.ZPP_Flags.id_CbEvent_WAKE=2,zpp_nape.util.ZPP_Flags.id_InteractionType_ANY=7,zpp_nape.util.ZPP_Flags.id_CbEvent_SLEEP=3,zpp_nape.util.ZPP_Flags.id_CbEvent_BREAK=4,zpp_nape.util.ZPP_Flags.id_CbEvent_PRE=5,zpp_nape.util.ZPP_Flags.id_Winding_UNDEFINED=0,zpp_nape.util.ZPP_Flags.id_Winding_CLOCKWISE=1,zpp_nape.util.ZPP_Flags.id_Winding_ANTICLOCKWISE=2,zpp_nape.util.ZPP_Flags.id_ValidationResult_VALID=0,zpp_nape.util.ZPP_Flags.id_ValidationResult_DEGENERATE=1,zpp_nape.util.ZPP_Flags.id_ValidationResult_CONCAVE=2,zpp_nape.util.ZPP_Flags.id_ValidationResult_SELF_INTERSECTING=3,zpp_nape.util.ZPP_Flags.id_ShapeType_CIRCLE=0,zpp_nape.util.ZPP_Flags.id_ShapeType_POLYGON=1,zpp_nape.util.ZPP_Flags.id_Broadphase_DYNAMIC_AABB_TREE=0,zpp_nape.util.ZPP_Flags.id_Broadphase_SWEEP_AND_PRUNE=1,zpp_nape.util.ZPP_Flags.id_ArbiterType_COLLISION=1,zpp_nape.util.ZPP_Flags.id_ArbiterType_SENSOR=2,zpp_nape.util.ZPP_Flags.id_ArbiterType_FLUID=4,zpp_nape.callbacks.ZPP_Listener.internal=!1,zpp_nape.callbacks.ZPP_Listener.types=function($this){var $r;null==zpp_nape.util.ZPP_Flags.ListenerType_BODY&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_BODY=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.ListenerType_BODY;null==zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.ListenerType_CONSTRAINT;null==zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp2=zpp_nape.util.ZPP_Flags.ListenerType_INTERACTION;return null==zpp_nape.util.ZPP_Flags.ListenerType_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ListenerType_PRE=new nape.callbacks.ListenerType,zpp_nape.util.ZPP_Flags.internal=!1),$r=[tmp,tmp1,tmp2,zpp_nape.util.ZPP_Flags.ListenerType_PRE]}(this),zpp_nape.callbacks.ZPP_Listener.events=function($this){var $r;null==zpp_nape.util.ZPP_Flags.CbEvent_BEGIN&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BEGIN=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.CbEvent_BEGIN;null==zpp_nape.util.ZPP_Flags.CbEvent_END&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_END=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.CbEvent_END;null==zpp_nape.util.ZPP_Flags.CbEvent_WAKE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_WAKE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp2=zpp_nape.util.ZPP_Flags.CbEvent_WAKE;null==zpp_nape.util.ZPP_Flags.CbEvent_SLEEP&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_SLEEP=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp3=zpp_nape.util.ZPP_Flags.CbEvent_SLEEP;null==zpp_nape.util.ZPP_Flags.CbEvent_BREAK&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_BREAK=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp4=zpp_nape.util.ZPP_Flags.CbEvent_BREAK;null==zpp_nape.util.ZPP_Flags.CbEvent_PRE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_PRE=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1);var tmp5=zpp_nape.util.ZPP_Flags.CbEvent_PRE;return null==zpp_nape.util.ZPP_Flags.CbEvent_ONGOING&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING=new nape.callbacks.CbEvent,zpp_nape.util.ZPP_Flags.internal=!1),$r=[tmp,tmp1,tmp2,tmp3,tmp4,tmp5,zpp_nape.util.ZPP_Flags.CbEvent_ONGOING]}(this),zpp_nape.callbacks.ZPP_InteractionListener.UCbSet=new zpp_nape.util.ZNPList_ZPP_CbSet,zpp_nape.callbacks.ZPP_InteractionListener.VCbSet=new zpp_nape.util.ZNPList_ZPP_CbSet,zpp_nape.callbacks.ZPP_InteractionListener.WCbSet=new zpp_nape.util.ZNPList_ZPP_CbSet,zpp_nape.callbacks.ZPP_InteractionListener.UCbType=new zpp_nape.util.ZNPList_ZPP_CbType,zpp_nape.callbacks.ZPP_InteractionListener.VCbType=new zpp_nape.util.ZNPList_ZPP_CbType,zpp_nape.callbacks.ZPP_InteractionListener.WCbType=new zpp_nape.util.ZNPList_ZPP_CbType,zpp_nape.dynamics.ZPP_Arbiter.internal=!1,zpp_nape.dynamics.ZPP_Arbiter.COL=1,zpp_nape.dynamics.ZPP_Arbiter.FLUID=4,zpp_nape.dynamics.ZPP_Arbiter.SENSOR=2,zpp_nape.dynamics.ZPP_Arbiter.types=function($this){var $r;null==zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.ArbiterType_COLLISION;null==zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.ArbiterType_SENSOR;return null==zpp_nape.util.ZPP_Flags.ArbiterType_FLUID&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ArbiterType_FLUID=new nape.dynamics.ArbiterType,zpp_nape.util.ZPP_Flags.internal=!1),$r=[null,tmp,tmp1,null,zpp_nape.util.ZPP_Flags.ArbiterType_FLUID]}(this),zpp_nape.dynamics.ZPP_SensorArbiter.zpp_pool=null,zpp_nape.dynamics.ZPP_FluidArbiter.zpp_pool=null,zpp_nape.dynamics.ZPP_ColArbiter.FACE1=0,zpp_nape.dynamics.ZPP_ColArbiter.FACE2=1,zpp_nape.dynamics.ZPP_ColArbiter.CIRCLE=2,zpp_nape.dynamics.ZPP_ColArbiter.zpp_pool=null,zpp_nape.dynamics.ZPP_Contact.internal=!1,zpp_nape.dynamics.ZPP_Contact.zpp_pool=null,zpp_nape.dynamics.ZPP_InteractionFilter.zpp_pool=null,zpp_nape.dynamics.ZPP_InteractionGroup.SHAPE=1,zpp_nape.dynamics.ZPP_InteractionGroup.BODY=2,zpp_nape.geom.ZPP_AABB.zpp_pool=null,zpp_nape.geom.ZPP_Collide.flowpoly=new zpp_nape.util.ZNPList_ZPP_Vec2,zpp_nape.geom.ZPP_Collide.flowsegs=new zpp_nape.util.ZNPList_ZPP_Vec2,zpp_nape.geom.ZPP_ConvexRayResult.convexPool=null,zpp_nape.geom.ZPP_ConvexRayResult.rayPool=null,zpp_nape.geom.ZPP_ConvexRayResult.internal=!1,zpp_nape.geom.ZPP_CutVert.zpp_pool=null,zpp_nape.geom.ZPP_CutInt.zpp_pool=null,zpp_nape.geom.ZPP_Cutter.ints=null,zpp_nape.geom.ZPP_Cutter.paths=null,zpp_nape.geom.ZPP_GeomVert.zpp_pool=null,zpp_nape.geom.ZPP_GeomVertexIterator.zpp_pool=null,zpp_nape.geom.ZPP_GeomVertexIterator.internal=!1,zpp_nape.geom.ZPP_MarchSpan.zpp_pool=null,zpp_nape.geom.ZPP_MarchPair.zpp_pool=null,zpp_nape.geom.ZPP_MarchingSquares.me=new zpp_nape.geom.ZPP_MarchingSquares,zpp_nape.geom.ZPP_MarchingSquares.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85],zpp_nape.geom.ZPP_Mat23.zpp_pool=null,zpp_nape.geom.ZPP_Monotone.queue=null,zpp_nape.geom.ZPP_Monotone.edges=null,zpp_nape.geom.ZPP_PartitionVertex.nextId=0,zpp_nape.geom.ZPP_PartitionVertex.zpp_pool=null,zpp_nape.geom.ZPP_PartitionedPoly.zpp_pool=null,zpp_nape.geom.ZPP_Ray.internal=!1,zpp_nape.geom.ZPP_SimpleVert.zpp_pool=null,zpp_nape.geom.ZPP_SimpleSeg.zpp_pool=null,zpp_nape.geom.ZPP_SimpleEvent.zpp_pool=null,zpp_nape.geom.ZPP_Simple.sweep=null,zpp_nape.geom.ZPP_Simple.inthash=null,zpp_nape.geom.ZPP_Simple.vertices=null,zpp_nape.geom.ZPP_Simple.queue=null,zpp_nape.geom.ZPP_Simple.ints=null,zpp_nape.geom.ZPP_Simple.list_vertices=null,zpp_nape.geom.ZPP_Simple.list_queue=null,zpp_nape.geom.ZPP_SimplifyV.zpp_pool=null,zpp_nape.geom.ZPP_SimplifyP.zpp_pool=null,zpp_nape.geom.ZPP_Simplify.stack=null,zpp_nape.geom.ZPP_ToiEvent.zpp_pool=null,zpp_nape.geom.ZPP_PartitionPair.zpp_pool=null,zpp_nape.geom.ZPP_Triangular.queue=null,zpp_nape.geom.ZPP_Triangular.stack=null,zpp_nape.geom.ZPP_Triangular.edgeSet=null,zpp_nape.geom.ZPP_Vec2.zpp_pool=null,zpp_nape.phys.ZPP_Body.types=function($this){var $r;null==zpp_nape.util.ZPP_Flags.BodyType_STATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_STATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.BodyType_STATIC;null==zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp1=zpp_nape.util.ZPP_Flags.BodyType_DYNAMIC;return null==zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC=new nape.phys.BodyType,zpp_nape.util.ZPP_Flags.internal=!1),$r=[null,tmp,tmp1,zpp_nape.util.ZPP_Flags.BodyType_KINEMATIC]}(this),zpp_nape.phys.ZPP_Body.bodystack=null,zpp_nape.phys.ZPP_Body.bodyset=null,zpp_nape.phys.ZPP_Body.cur_graph_depth=0,zpp_nape.phys.ZPP_FluidProperties.zpp_pool=null,zpp_nape.phys.ZPP_Material.zpp_pool=null,zpp_nape.phys.ZPP_Material.WAKE=1,zpp_nape.phys.ZPP_Material.PROPS=2,zpp_nape.phys.ZPP_Material.ANGDRAG=4,zpp_nape.phys.ZPP_Material.ARBITERS=8,zpp_nape.shape.ZPP_Shape.types=function($this){var $r;null==zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1);var tmp=zpp_nape.util.ZPP_Flags.ShapeType_CIRCLE;return null==zpp_nape.util.ZPP_Flags.ShapeType_POLYGON&&(zpp_nape.util.ZPP_Flags.internal=!0,zpp_nape.util.ZPP_Flags.ShapeType_POLYGON=new nape.shape.ShapeType,zpp_nape.util.ZPP_Flags.internal=!1),$r=[tmp,zpp_nape.util.ZPP_Flags.ShapeType_POLYGON]}(this),zpp_nape.shape.ZPP_Edge.zpp_pool=null,zpp_nape.shape.ZPP_Edge.internal=!1,zpp_nape.space.ZPP_AABBNode.zpp_pool=null,zpp_nape.space.ZPP_AABBPair.zpp_pool=null,zpp_nape.space.ZPP_AABBTree.tmpaabb=new zpp_nape.geom.ZPP_AABB,zpp_nape.space.ZPP_DynAABBPhase.FATTEN=3,zpp_nape.space.ZPP_DynAABBPhase.VEL_STEPS=2,zpp_nape.space.ZPP_Island.zpp_pool=null,zpp_nape.space.ZPP_Component.zpp_pool=null,zpp_nape.space.ZPP_CallbackSet.zpp_pool=null,zpp_nape.space.ZPP_SweepData.zpp_pool=null,zpp_nape.util.Hashable2_Boolfalse.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CbType.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CallbackSet.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Shape.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Body.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Constraint.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Compound.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Arbiter.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_InteractionListener.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CbSet.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Interactor.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_BodyListener.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CbSetPair.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_ConstraintListener.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CutInt.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_CutVert.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_PartitionVertex.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_SimplifyP.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_PartitionedPoly.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_GeomVert.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_SimpleVert.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_SimpleEvent.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Vec2.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_AABBPair.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Edge.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_AABBNode.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Component.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_FluidArbiter.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_SensorArbiter.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_Listener.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_ColArbiter.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_InteractionGroup.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_ToiEvent.zpp_pool=null,zpp_nape.util.ZNPNode_ConvexResult.zpp_pool=null,zpp_nape.util.ZNPNode_ZPP_GeomPoly.zpp_pool=null,zpp_nape.util.ZNPNode_RayResult.zpp_pool=null,zpp_nape.util.ZPP_ConstraintList.internal=!1,zpp_nape.util.ZPP_BodyList.internal=!1,zpp_nape.util.ZPP_InteractorList.internal=!1,zpp_nape.util.ZPP_CompoundList.internal=!1,zpp_nape.util.ZPP_ListenerList.internal=!1,zpp_nape.util.ZPP_CbTypeList.internal=!1,zpp_nape.util.ZPP_Vec2List.internal=!1,zpp_nape.util.ZPP_GeomPolyList.internal=!1,zpp_nape.util.ZPP_RayResultList.internal=!1,zpp_nape.util.ZPP_ConvexResultList.internal=!1,zpp_nape.util.ZPP_EdgeList.internal=!1,zpp_nape.util.ZPP_ShapeList.internal=!1,zpp_nape.util.ZPP_InteractionGroupList.internal=!1,zpp_nape.util.ZPP_ArbiterList.internal=!1,zpp_nape.util.ZPP_ContactList.internal=!1,zpp_nape.util.ZPP_PubPool.poolGeomPoly=null,zpp_nape.util.ZPP_PubPool.nextGeomPoly=null,zpp_nape.util.ZPP_PubPool.poolVec2=null,zpp_nape.util.ZPP_PubPool.nextVec2=null,zpp_nape.util.ZPP_PubPool.poolVec3=null,zpp_nape.util.ZPP_PubPool.nextVec3=null,zpp_nape.util.ZPP_Set_ZPP_Body.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_CbSetPair.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_PartitionVertex.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_PartitionPair.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_SimpleVert.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_SimpleSeg.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_SimpleEvent.zpp_pool=null,zpp_nape.util.ZPP_Set_ZPP_CbSet.zpp_pool=null,sandbox.Main.main(),nape}));